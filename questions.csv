Id,OwnerUserId,CreationDate,Score,Title,Body
469,147,2008-08-02T15:11:16Z,21,How can I find the full path to a font from its display name on a Mac?,"<p>I am using the Photoshop's javascript API to find the fonts in a given PSD.</p>

<p>Given a font name returned by the API, I want to find the actual physical font file that that font name corresponds to on the disc.</p>

<p>This is all happening in a python program running on OSX so I guess I'm looking for one of:</p>

<ul>
<li>Some Photoshop javascript</li>
<li>A Python function</li>
<li>An OSX API that I can call from python</li>
</ul>
"
502,147,2008-08-02T17:01:58Z,27,Get a preview JPEG of a PDF on Windows?,"<p>I have a cross-platform (Python) application which needs to generate a JPEG preview of the first page of a PDF.</p>

<p>On the Mac I am spawning <a href=""http://developer.apple.com/documentation/Darwin/Reference/ManPages/man1/sips.1.html"">sips</a>.  Is there something similarly simple I can do on Windows?</p>
"
535,154,2008-08-02T18:43:54Z,40,Continuous Integration System for a Python Codebase,"<p>I'm starting work on a hobby project with a python codebase and would like to set up some form of continuous integration (i.e. running a battery of test-cases each time a check-in is made and sending nag e-mails to responsible persons when the tests fail) similar to CruiseControl or TeamCity.</p>

<p>I realize I could do this with hooks in most VCSes, but that requires that the tests run on the same machine as the version control server, which isn't as elegant as I would like. Does anyone have any suggestions for a small, user-friendly, open-source continuous integration system suitable for a Python codebase?</p>
"
594,116,2008-08-03T01:15:08Z,25,cx_Oracle: How do I iterate over a result set?,"<p>There are several ways to iterate over a result set. What are the tradeoff of each?</p>
"
683,199,2008-08-03T13:19:16Z,28,Using 'in' to match an attribute of Python objects in an array,"<p>I don't remember whether I was dreaming or not but I seem to recall there being a function which allowed something like,</p>

<pre><code>foo in iter_attr(array of python objects, attribute name)</code></pre>

<p>I've looked over the docs but this kind of thing doesn't fall under any obvious listed headers</p>"
742,189,2008-08-03T15:55:28Z,30,Class views in Django,"<p><a href=""http://www.djangoproject.com/"">Django</a> view points to a function, which can be a problem if you want to change only a bit of functionality. Yes, I could have million keyword arguments and even more if statements in the function, but I was thinking more of an object oriented approach.</p>

<p>For example, I have a page that displays a user. This page is very similar to page that displays a group, but it's still not so similar to just use another data model. Group also has members etc...</p>

<p>One way would be to point views to class methods and then extend that class. Has anyone tried this approach or has any other idea? </p>"
766,1384652,2008-08-03T17:44:07Z,20,Python and MySQL,"<p>I can get Python to work with Postgresql but I cannot get it to work with MySQL. The main problem is that on the shared hosting account I have I do not have the ability to install things such as Django or PySQL, I generally fail when installing them on my computer so maybe it's good I can't install on the host.</p>

<p>I found <a href=""http://barryp.org/software/bpgsql/"">bpgsql</a> really good because it does not require an install, it's a single file that I can look at, read and then call the functions of. Does anybody know of something like this for MySQL?</p>"
773,207,2008-08-03T18:27:09Z,256,How do I use Python's itertools.groupby()?,"<p>I haven't been able to find an understandable explanation of how to actually use Python's <code>itertools.groupby()</code> function.  What I'm trying to do is this:</p>

<ul>
<li>Take a list - in this case, the children of an objectified <code>lxml</code> element</li>
<li>Divide it into groups based on some criteria</li>
<li>Then later iterate over each of these groups separately.</li>
</ul>

<p>I've reviewed <a href=""https://docs.python.org/2/library/itertools.html"">the documentation</a>, and <a href=""https://docs.python.org/2/library/itertools.html#itertools.groupby"">the examples</a>, but I've had trouble trying to apply them beyond a simple list of numbers. </p>

<p>So, how do I use of <code>itertools.groupby()</code>?  Is there another technique I should be using?  Pointers to good ""prerequisite"" reading would also be appreciated.</p>
"
972,145,2008-08-04T02:17:51Z,364,Adding a Method to an Existing Object Instance,"<p>I've read that it is possible to add a method to an existing object (e.g. not in the class definition) in <strong>Python</strong>, I think this is called <em>Monkey Patching</em> (or in some cases <em>Duck Punching</em>). I understand that it's not always a good decision to do so. But, how might one do this?</p>

<p><strong>UPDATE 8/04/2008 00:21:01 EST:</strong></p>

<p><a href=""http://stackoverflow.com/a/982"">That</a> looks like a good answer John Downey, I tried it but it appears that it ends up being not a <em>true</em> method.</p>

<p>Your example defines the new patch function with an argument of <strong><code>self</code></strong>, but if you write actual code that way, the now patched class method asks for an argument named <code>self</code> (it doesn't automagically recognize it as the object to which it is supposed to bind, which is what would happen if defined within the class definition), meaning you have to call <strong><code>class.patch(obj)</code></strong> instead of just <strong><code>class.patch()</code></strong> if you want the same functionality as a <em>true</em> method.</p>

<p><strong>It looks like Python isn't really treating it as a method, but more just as a variable which happens to be a function</strong> (and as such is callable).  Is there any way to attach an actual method to a class?</p>

<p>Oh, and Ryan, <a href=""http://pypi.python.org/pypi/monkey"">that</a> isn't exactly what I was looking for (it isn't a builtin functionality), but it is quite cool nonetheless.</p>
"
1476,92,2008-08-04T18:20:36Z,251,How do you express binary literals in Python?,"<p>How do you express an integer as a binary number with Python literals?</p>

<p>I was easily able to find the answer for hex:</p>

<pre><code>    &gt;&gt;&gt; 0x12AF
    4783
    &gt;&gt;&gt; 0x100
    256
</code></pre>

<p>and octal:</p>

<pre><code>    &gt;&gt;&gt; 01267
    695
    &gt;&gt;&gt; 0100
    64
</code></pre>

<p><strong>How do you use literals to express binary in Python?</strong></p>

<hr>

<p><strong><em>Summary of Answers</em></strong></p>

<ul>
<li>Python 2.5 and earlier: can express binary using <code>int('01010101111',2)</code> but not with a literal.</li>
<li>Python 2.5 and earlier: there is <em>no way</em> to express binary literals.</li>
<li>Python 2.6 beta: You can do like so: <code>0b1100111</code> or <code>0B1100111</code>.</li>
<li>Python 2.6 beta: will also allow <code>0o27</code> or <code>0O27</code> (second character is the letter O) to represent an octal.</li>
<li>Python 3.0 beta: Same as 2.6, but will no longer allow the older <code>027</code> syntax for octals.</li>
</ul>
"
1734,59,2008-08-05T00:12:55Z,20,Any experiences with Protocol Buffers?,"<p>I was just looking through some information about Google's <a href=""http://code.google.com/apis/protocolbuffers/"">protocol buffers</a> data interchange format.  Has anyone played around with the code or even created a project around it?</p>

<p>I'm currently using XML in a Python project for structured content created by hand in a text editor, and I was wondering what the general opinion was on Protocol Buffers as a user-facing input format.  The speed and brevity benefits definitely seem to be there, but there are so many factors when it comes to actually generating and processing the data.</p>"
1829,30,2008-08-05T02:39:23Z,12,How do I make a menu that does not require the user to press [enter] to make a selection?,"<p>I've got a menu in Python. That part was easy. I'm using <code>raw_input()</code> to get the selection from the user. </p>

<p>The problem is that <code>raw_input</code> (and input) require the user to press <kbd>Enter</kbd> after they make a selection. Is there any way to make the program act immediately upon a keystroke? Here's what I've got so far:</p>

<pre><code>import sys
print """"""Menu
1) Say Foo
2) Say Bar""""""
answer = raw_input(""Make a selection&gt; "")

if ""1"" in answer: print ""foo""
elif ""2"" in answer: print ""bar""
</code></pre>

<p>It would be great to have something like</p>

<pre><code>print menu
while lastKey = """":
    lastKey = check_for_recent_keystrokes()
if ""1"" in lastKey: #do stuff...
</code></pre>
"
1854,116,2008-08-05T03:23:18Z,270,How to check what OS am I running on in Python?,"<p>What do I need to look at to see if I'm on Windows, Unix, etc?</p>
"
1983,116,2008-08-05T07:18:55Z,31,"Python: what is the difference between (1,2,3) and [1,2,3], and when should I use each?","<p>In many places, <code>(1,2,3)</code> and <code>[1,2,3]</code> can be used interchangeably.</p>

<p>When should I use one or the other, and why?</p>
"
2311,394,2008-08-05T13:40:47Z,26,File size differences after copying a file to a server vía FTP,"<p>I have created a PHP-script to update a webserver that is live inside a local directory.
I'm migrating the script into Python. It works fine for the most part, but after a PUT command the size of the file appears to change. Thus, the size of the file is different from that of the file on the server. </p>

<p>Once I download again the file from the FTP server, the only difference is the CR/LF mark. This annoys me because the same script is comparing the size of the files to update. Also, in case it means anything, the script works perfectly in PHP vía ftp_put.</p>

<pre><code>from ftplib import FTP

ftpserver = ""myserver""
ftpuser = ""myuser""
ftppass = ""mypwd""

locfile =  ""g:/test/style.css""
ftpfile =  ""/temp/style.css""

try:
    ftp = FTP(ftpserver, ftpuser, ftppass)
except:
    exit (""Cannot connect"")

f = open (locfile, ""r"")
try:
    ftp.delete (ftpfile)
except:
    pass

# ftp.sendcmd (""TYPE I"")
# ftp.storlines(""STOR %s"" % ftpfile, f)
ftp.storbinary(""STOR %s"" % ftpfile, f)
f.close()

ftp.dir (ftpfile)
ftp.quit()
</code></pre>

<p>Any suggestions?</p>
"
2933,1384652,2008-08-05T22:26:00Z,171,How can I create a directly-executable cross-platform GUI app using Python?,"<p>Python works on multiple platforms and can be used for desktop and web applications, thus I conclude that there is some way to compile it into an executable for Mac, Windows and Linux.</p>

<p>The problem being I have no idea where to start or how to write a GUI with it, can anybody shed some light on this and point me in the right direction please?</p>"
3061,121,2008-08-06T03:36:08Z,761,Calling a function of a module from a string with the function's name in Python,"<p>What is the best way to go about calling a function given a string with the function's name in a Python program.  For example, let's say that I have a module <code>foo</code>, and I have a string whose contents are <code>""bar""</code>. What is the best way to go about calling <code>foo.bar()</code>?</p>

<p>I need to get the return value of the function, which is why I don't just use <code>eval</code>. I figured out how to do it by using <code>eval</code> to define a temp function that returns the result of that function call, but I'm hoping that there is a more elegant way to do this.</p>
"
3976,556,2008-08-06T21:00:01Z,12,Programmatically talking to a Serial Port in OS X or Linux,"<p>I have a Prolite LED sign that I like to set up to show scrolling search queries from a apache logs and other fun statistics. The problem is, my G5 does not have a serial port, so I have to use a usb to serial dongle. It shows up as /dev/cu.usbserial and /dev/tty.usbserial . </p>

<p>When i do this everything seems to be hunky-dory:</p>

<pre><code>stty -f /dev/cu.usbserial
speed 9600 baud;
lflags: -icanon -isig -iexten -echo
iflags: -icrnl -ixon -ixany -imaxbel -brkint
oflags: -opost -onlcr -oxtabs
cflags: cs8 -parenb
</code></pre>

<p>Everything also works when I use the <a href=""http://www.versiontracker.com/dyn/moreinfo/macosx/24024"">serial port tool</a> to talk to it.</p>

<p>If I run this piece of code while the above mentioned serial port tool, everthing also works. But as soon as I disconnect the tool the connection gets lost. </p>

<pre><code>#!/usr/bin/python

import serial

ser = serial.Serial('/dev/cu.usbserial', 9600, timeout=10) 
ser.write(""&lt;ID01&gt;&lt;PA&gt; \r\n"") 
read_chars = ser.read(20)
print read_chars

ser.close()
</code></pre>

<p>So the question is, what magicks do I need to perform to start talking to the serial port without the serial port tool? Is that a permissions problem? Also, what's the difference between /dev/cu.usbserial and /dev/tty.usbserial?</p>

<hr>

<p>Nope, no serial numbers. The thing is, the problem persists even with sudo-running the python script, and the only thing that makes it go through if I open the connection in the gui tool that I mentioned.</p>
"
4942,1384652,2008-08-07T16:43:21Z,5,How to sell Python to a client/boss/person with lots of cash,"<p>When asked to create system XYZ and you ask to do it in Python over PHP or Ruby, what are the main features you can mention when they require you to explain it?</p>"
5102,556,2008-08-07T18:24:12Z,14,How do you set up Python scripts to work in Apache 2.0?,"<p>I tried to follow a couple of googled up tutorials on setting up mod_python, but failed every time. Do you have a good, step-by step, rock-solid howto?</p>

<p>My dev box is OS X, production - Centos.</p>"
5136,676,2008-08-07T18:47:58Z,6,Does anyone have experience creating a shared library in MATLAB?,"<p>A researcher has created a small simulation in MATLAB, and we want to make it accessible to others. My plan is to take the simulation, clean up a few things, and turn it into a set of functions. Then, I plan to compile it into a C library and use SWIG to create a Python wrapper. At that point, I should be able to call the simulation from a small Django app. At least, I hope so.</p>

<p>Do I have the right plan? Has anyone else done something similar? Can you let me know if there are some serious pitfalls I'm not aware of at the moment?</p>"
5313,680,2008-08-07T21:07:24Z,11,"Cross Platform, Language Agnostic GUI Markup Language?","<p>I learned Swing back in the day but now I've moved to Python and want to make some apps with GUIs. I haven't had the time to learn a new GUI API so I've been using Jython, but I would prefer to use CPython. </p>

<p>It would be great if I can have one simple markup that allows me to switch GUI libraries. It would be even better if I can use the same markup language across languages so I can quickly make GUIs for any language I'm using. Does anyone know of such a markup/library?</p>

<p>I've seen markups like Glade and wxWidget's markup (I forget the name). They're partly what I'm looking for (making a GUI without coding it in a language) but they're intertwined with a specific library. And neither are really nice looking or friendly to human editting.</p>"
5415,680,2008-08-07T22:24:27Z,21,Convert Bytes to Floating Point Numbers in Python,<p>I have a binary file that I have to parse and I'm using Python. Is there a way to take 4 bytes and convert it to a single precision floating point number?</p>
5419,207,2008-08-07T22:26:58Z,72,"Python, Unicode, and the Windows console","<p>When I try to print a Unicode string in a Windows console, I get a <code>UnicodeEncodeError: 'charmap' codec can't encode character ....</code> error.  I assume this is because the Windows console does not accept Unicode-only characters. What's the best way around this? Is there any way I can make Python automatically print a <code>?</code> instead of failing in this situation?</p>

<p><strong>Edit:</strong>  I'm using Python 2.5.</p>

<hr>

<p><strong>Note:</strong> @LasseV.Karlsen answer with the checkmark is sort of outdated (from 2008). Please use the solutions/answers/suggestions below with care!!</p>

<p><a href=""http://stackoverflow.com/a/32176732/610569"">@JFSebastian answer</a> is more relevant as of today (6 Jan 2016).</p>
"
5909,394,2008-08-08T13:35:19Z,28,Get size of a file before downloading in Python,"<p>I'm downloading an entire directory from a web server. It works OK, but I can't figure how to get the file size before download to compare if it was updated on the server or not. Can this be done as if I was downloading the file from a FTP server?</p>

<pre><code>import urllib
import re

url = ""http://www.someurl.com""

# Download the page locally
f = urllib.urlopen(url)
html = f.read()
f.close()

f = open (""temp.htm"", ""w"")
f.write (html)
f.close()

# List only the .TXT / .ZIP files
fnames = re.findall('^.*&lt;a href=""(\w+(?:\.txt|.zip)?)"".*$', html, re.MULTILINE)

for fname in fnames:
    print fname, ""...""

    f = urllib.urlopen(url + ""/"" + fname)

    #### Here I want to check the filesize to download or not #### 
    file = f.read()
    f.close()

    f = open (fname, ""w"")
    f.write (file)
    f.close()
</code></pre>

<hr>

<p>@Jon: thank for your quick answer. It works, but the filesize on the web server is slightly less than the filesize of the downloaded file. </p>

<p>Examples:</p>

<pre><code>Local Size  Server Size
 2.223.533  2.115.516
   664.603    662.121
</code></pre>

<p>It has anything to do with the CR/LF conversion?</p>
"
5966,745,2008-08-08T14:05:45Z,10,Best way to abstract season/show/episode data,"<p>Basically, I've written an API to www.thetvdb.com in Python. The current code can be found <a href=""http://github.com/dbr/tvdb_api/tree/master/tvdb_api.py"">here</a>.</p>

<p>It grabs data from the API as requested, and has to store the data somehow, and make it available by doing:</p>

<pre><code>print tvdbinstance[1][23]['episodename'] # get the name of episode 23 of season 1<br></code></pre>

<p>What is the ""best"" way to abstract this data within the Tvdb() class?</p>

<p>I originally used a extended Dict() that automatically created sub-dicts (so you could do <code>x[1][2][3][4] = ""something""</code> without having to do <code>if x[1].has_key(2): x[1][2] = []</code> and so on)</p>

<p>Then I just stored the data by doing <code>self.data[show_id][season_number][episode_number][attribute_name] = ""something""</code></p>

<p>This worked okay, but there was no easy way of checking if x[3][24] was supposed to exist or not (so I couldn't raise the season_not_found exception)</p>

<p>Currently it's using four classes. ShowContainer, Show, Season and Episode. Each one is a very basic dict, which I can easily add extra functionality in (the search() function on Show() for example). Each has a <code>__setitem__</code>, <code>__getitem_</code> and <code>has_key</code></p>

<p>This works mostly fine, I can check in Shows if it has that season in it's self.data dict, if not, raise season_not_found. Check in Season() if it has that episode and so on.</p>

<p>The problem now is it's presenting itself as a dict, but doesn't have all the functionality, and because I'm overriding the <em>_getitem_</em> and <em>_setitem_</em> functions, it's easy to accidently recursively call <em>_getitem_</em> (so I'm not sure if extending the Dict class will cause problems)</p>

<p>The other slight problem is adding data into the dict is a lot more work than the old Ddict method (which was <code>self.data[seas_no][ep_no]['attribute'] = 'something'</code>). See _setItem and _setData. It's not too bad, since it's currently only a read-only API interface (so the users of the API should only ever retrieve data, not add more), but it's hardly.. elegant..</p>

<p>I think the series-of-classes system is probably the best way, but does anyone have a better idea for storing the data? And would extending the ShowContainer/etc classes with Dict cause problems?</p>"
8154,736,2008-08-11T19:59:32Z,10,Pylons error - 'MySQL server has gone away',"<p>[I hope this isn't too obscure&hellip; I'll ask the newsgroup if nobody knows here]</p>

<p>I'm using Pylons (a python framework) to serve a simple web application, but it seems to die from time to time, with this in the error log: <code>(2006, 'MySQL server has gone away')</code></p>

<p>I did a bit of checking, and saw that this was because the connections to MySQL were not being renewed. This shouldn't be a problem though, because the <code>sqlalchemy.pool_recycle</code> in the config file should automatically keep it alive. The default was <code>3600</code>, but I dialed it back to <code>1800</code> because of this problem. It helped a bit, but <code>3600</code> <em>should</em> be fine according to the docs. The errors still happen semi-regularly. I don't want to lower it too much though and DOS my own database :).</p>

<p>Maybe something in my MySQL config is goofy? Not sure where to look exactly.</p>

<p>Other relevant details:</p>

<pre><code>  Python 2.5
  Pylons: 0.9.6.2 (w/ sql_alchemy)
  MySQL: 5.0.51
</code></pre>
"
8692,NA,2008-08-12T11:28:36Z,164,How to use Xpath in Python?,"<p>What is the library? Is there a full implementation? How is the library used? Where is its website?</p>
"
8948,145,2008-08-12T15:16:00Z,81,Accessing mp3 Meta-Data with Python,"<p>What is the best way to retrieve mp3 metadata in python?  I've seen a couple frameworks out there, but I'm unsure as to which would be the best to use.... Any ideas?</p>
"
10123,742,2008-08-13T17:46:41Z,8,How do I treat an integer as an array of bytes in Python?,"<p>I'm trying to decode the result of the Python os.wait() function. This returns, according to the Python docs:</p>

<blockquote>
  <p>a tuple containing its pid and exit status indication: a 16-bit number, whose low byte is the signal number that killed the process, and whose high byte is the exit status (if the signal number is zero); the high bit of the low byte is set if a core file was produced.</p>
</blockquote>

<p>How do I decode the exit status indication (which is an integer) to obtain the high and low byte? To be specific, how do I implement the decode function used in the following code snippet:</p>

<pre><code>(pid,status) = os.wait()
(exitstatus, signum) = decode(status)
</code></pre>
"
11060,912,2008-08-14T13:59:21Z,18,How should I unit test a code-generator?,"<p>This is a difficult and open-ended question I know, but I thought I'd throw it to the floor and see if anyone had any interesting suggestions.</p>

<p>I have developed a code-generator that takes our python interface to our C++ code (generated via SWIG) and generates code needed to expose this as WebServices.  When I developed this code I did it using TDD, but I've found my tests to be brittle as hell.  Because each test essentially wanted to verify that for a given bit of input code (which happens to be a C++ header) I'd get a given bit of outputted code I wrote a small engine that reads test definitions from XML input files and generates test cases from these expectations.</p>

<p>The problem is I dread going in to modify the code at all.  That and the fact that the unit tests themselves are a: complex, and b: brittle.</p>

<p>So I'm trying to think of alternative approaches to this problem, and it strikes me I'm perhaps tackling it the wrong way.  Maybe I need to focus more on the outcome, IE: does the code I generate actually run and do what I want it to, rather than, does the code look the way I want it to.</p>

<p>Has anyone got any experiences of something similar to this they would care to share?</p>
"
12591,207,2008-08-15T18:42:20Z,6,Using an XML catalog with Python's lxml?,"<p>Is there a way, when I parse an XML document using lxml, to validate that document against its DTD using an external catalog file?   I need to be able to work the fixed attributes defined in a document’s DTD.</p>
"
12592,742,2008-08-15T18:43:17Z,28,Can you check that an exception is thrown with doctest in Python?,"<p>Is it possible to write a doctest unit test that will check that an exception is raised?<br>
For example, if I have a function <code>foo(x)</code> that is supposed to raise an exception if <code>x&lt;0</code>, how would I write the doctest for that? </p>
"
13396,1266,2008-08-16T22:28:39Z,5,Replacement for for... if array iteration,"<p>I love list comprehensions in Python, because they concisely represent a transformation of a list.</p>

<p>However, in other languages, I frequently find myself writing something along the lines of:</p>

<pre><code>foreach (int x in intArray)
  if (x &gt; 3) //generic condition on x
    x++ 
    //do other processing
</code></pre>

<p>This example is in C#, where I'm under the impression LINQ can help with this, but is there some common programming construct which can replace this slightly less-than-elegant solution?  Perhaps a data structure I'm not considering?</p>
"
13454,NA,2008-08-17T01:23:50Z,9,Python version of PHP's stripslashes,"<p>I wrote a piece of code to convert PHP's striplashes into valid Python [backslash] escapes:</p>

<pre><code>cleaned = stringwithslashes
cleaned = cleaned.replace('\\n', '\n')
cleaned = cleaned.replace('\\r', '\n')
cleaned = cleaned.replace('\\', '')
</code></pre>

<p>How can I condense it? </p>
"
13791,1370,2008-08-17T18:20:21Z,10,Python Regular Expressions to implement string unescaping,"<p>I'm trying to implement string unescaping with Python regex and backreferences, and it doesn't seem to want to work very well. I'm sure it's something I'm doing wrong but I can't figure out what...</p>

<pre><code>&gt;&gt;&gt; import re
&gt;&gt;&gt; mystring = r""This is \n a test \r""
&gt;&gt;&gt; p = re.compile( ""\\\\(\\S)"" )
&gt;&gt;&gt; p.sub( ""\\1"", mystring )
'This is n a test r'
&gt;&gt;&gt; p.sub( ""\\\\\\1"", mystring )
'This is \\n a test \\r'
&gt;&gt;&gt; p.sub( ""\\\\1"", mystring )
'This is \\1 a test \\1'
</code></pre>

<p>I'd like to replace \\[char] with \[char], but backreferences in Python don't appear to follow the same rules they do in every other implementation I've ever used. Could someone shed some light?</p>
"
13857,1649,2008-08-17T19:14:30Z,56,Can you explain closures (as they relate to Python)?,"<p>I've been reading a lot about closures and I think I understand them, but without clouding the picture for myself and others, I am hoping someone can explain closures as succinctly and clearly as possible.  I'm looking for a simple explanation that might help me understand where and why I would want to use them.</p>
"
13941,1615,2008-08-17T21:33:39Z,34,"Python Sound (""Bell"")","<p>I'd like to have a python program alert me when it has completed its task by making a beep noise.  Currently,  I use <code>import os</code> and then use a command line speech program to say ""Process complete.""  I much rather it be a simple ""bell.""</p>

<p>I know that there's a function that can be used in Cocoa apps, NSBeep, but I don't think that has much anything to do with this.</p>

<p>I've also tried <code>print(\a)</code> but that didn't work.</p>

<p>I'm using a Mac, if you couldn't tell by my Cocoa comment, so that may help.</p>

<p>Thanks!</p>
"
14281,1448,2008-08-18T07:41:09Z,3,Is there a python module for regex matching in zip files,"<p>I have over a million text files compressed into 40 zip files. I also have a list of about 500 model names of phones. I want to find out the number of times a particular model was mentioned in the text files. </p>

<p>Is there any python module which can do a regex match on the files without unzipping it. Is there a simple way to solve this problem without unzipping?</p>
"
14389,745,2008-08-18T09:41:14Z,21,Regex and unicode,"<p>I have a script that parses the filenames of TV episodes (show.name.s01e02.avi for example), grabs the episode name (from the www.thetvdb.com API) and automatically renames them into something nicer (Show Name - [01x02].avi)</p>

<p>The script works fine, that is until you try and use it on files that have Unicode show-names (something I never really thought about, since all the files I have are English, so mostly pretty-much all fall within <code>[a-zA-Z0-9'\-]</code>)</p>

<p>How can I allow the regular expressions to match accented characters and the likes? Currently the regex's config section looks like..</p>

<pre><code>config['valid_filename_chars'] = """"""0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!@£$%^&amp;*()_+=-[]{}""'.,&lt;&gt;`~? """"""
config['valid_filename_chars_regex'] = re.escape(config['valid_filename_chars'])

config['name_parse'] = [
    # foo_[s01]_[e01]
    re.compile('''^([%s]+?)[ \._\-]\[[Ss]([0-9]+?)\]_\[[Ee]([0-9]+?)\]?[^\\/]*$'''% (config['valid_filename_chars_regex'])),
    # foo.1x09*
    re.compile('''^([%s]+?)[ \._\-]\[?([0-9]+)x([0-9]+)[^\\/]*$''' % (config['valid_filename_chars_regex'])),
    # foo.s01.e01, foo.s01_e01
    re.compile('''^([%s]+?)[ \._\-][Ss]([0-9]+)[\.\- ]?[Ee]([0-9]+)[^\\/]*$''' % (config['valid_filename_chars_regex'])),
    # foo.103*
    re.compile('''^([%s]+)[ \._\-]([0-9]{1})([0-9]{2})[\._ -][^\\/]*$''' % (config['valid_filename_chars_regex'])),
    # foo.0103*
    re.compile('''^([%s]+)[ \._\-]([0-9]{2})([0-9]{2,3})[\._ -][^\\/]*$''' % (config['valid_filename_chars_regex'])),
]
</code></pre>
"
15798,446497,2008-08-19T06:24:54Z,27,How do I validate xml against a DTD file in Python,"<p>I need to validate an XML string (and not a file)
against a DTD description file. </p>

<p>How can that be done in <code>python</code>?</p>
"
16067,199,2008-08-19T12:32:38Z,18,Prototyping with Python code before compiling,"<p>I have been mulling over writing a peak fitting library for a while. I know Python fairly well and plan on implementing everything in Python to begin with but envisage that I may have to re-implement some core routines in a compiled language eventually.</p>

<p>IIRC, one of Python's original remits was as a prototyping language, however Python is pretty liberal in allowing functions, functors, objects to be passed to functions and methods, whereas I suspect the same is not true of say C or Fortran.</p>

<p>What should I know about designing functions/classes which I envisage will have to interface into the compiled language? And how much of these potential problems are dealt with by libraries such as cTypes, bgen, <a href=""http://www.swig.org/"">SWIG</a>, <a href=""http://www.boost.org/doc/libs/1_35_0/libs/python/doc/index.html"">Boost.Python</a>, <a href=""http://cython.org/"">Cython</a> or <a href=""http://www.riverbankcomputing.co.uk/software/sip/intro"">Python SIP</a>?</p>

<p>For this particular use case, (a fitting library) I imagine allowing users to define mathematical functions (Guassian, Lorentzian etc.) as Python functions which can then to be passed an interpreted by the compiled code fitting library. Passing and returning arrays is also essential.</p>
"
16861,2019,2008-08-19T20:18:31Z,46,Sanitising user input using Python,"<p>What's the best way to sanitise user input for a Python-based web application? Is there a single function to remove HTML characters and any other necessary characters combinations to prevent an <a href=""http://en.wikipedia.org/wiki/Cross-site_scripting"" rel=""nofollow"">XSS</a> or SQL injection attack?</p>
"
17250,394,2008-08-20T00:16:40Z,24,Create an encrypted ZIP file in Python,"<p>I'm creating an ZIP file with ZipFile in Python 2.5, it works ok so far:</p>

<pre><code>import zipfile, os

locfile = ""test.txt""
loczip = os.path.splitext (locfile)[0] + "".zip""
zip = zipfile.ZipFile (loczip, ""w"")
zip.write (locfile)
zip.close()
</code></pre>

<p>but I couldn't find how to encrypt the files in the ZIP file.
I could use system and call PKZIP -s, but I suppose there must be a more ""Pythonic"" way.  I'm looking for an open source solution.</p>
"
17893,745,2008-08-20T13:07:25Z,36,What's the best way to distribute python command-line tools?,"<p>My current setup.py script works okay, but it installs tvnamer.py (the tool) as ""tvnamer.py"" into site-packages or somewhere similar..</p>

<p>Can I make setup.py install tvnamer.py as tvnamer, and/or is there a better way of installing command-line applications?</p>
"
19030,745,2008-08-20T22:50:55Z,2,How to check set of files conform to a naming scheme,"<p>I have a bunch of files (TV episodes, although that is fairly arbitrary) that I want to check match a specific naming/organisation scheme..</p>

<p>Currently: I have three arrays of regex, one for valid filenames, one for files missing an episode name, and one for valid paths.</p>

<p>Then, I loop though each valid-filename regex, if it matches, append it to a ""valid"" dict, if not, do the same with the missing-ep-name regexs, if it matches this I append it to an ""invalid"" dict with an error code (2:'missing epsiode name'), if it matches neither, it gets added to invalid with the 'malformed name' error code.</p>

<p>The current code can be found <a href=""http://github.com/dbr/checktveps/tree/8a6dc68ad61e684c8d8f0ca1dc37a22d1c51aa82/2checkTvEps.py"" rel=""nofollow"">here</a></p>

<p>I want to add a rule that checks for the presence of a folder.jpg file in each directory, but to add this would make the code substantially more messy in it's current state.. </p>

<p>How could I write this system in a more expandable way?</p>

<p>The rules it needs to check would be..</p>

<ul>
<li>File is in the format <code>Show Name - [01x23] - Episode Name.avi</code> or <code>Show Name - [01xSpecial02] - Special Name.avi</code> or <code>Show Name - [01xExtra01] - Extra Name.avi</code></li>
<li>If filename is in the format <code>Show Name - [01x23].avi</code> display it a 'missing episode name' section of the output</li>
<li>The path should be in the format <code>Show Name/season 2/the_file.avi</code> (where season 2 should be the correct season number in the filename)</li>
<li>each <code>Show Name/season 1/</code> folder should contain ""folder.jpg""</li>
</ul>

<p>.any ideas? While I'm trying to check TV episodes, this concept/code should be able to apply to many things..</p>

<p>The only thought I had was a list of dicts in the format:</p>

<pre><code>checker = [
{
    'name':'valid files',
    'type':'file',
    'function':check_valid(), # runs check_valid() on all files
    'status':0 # if it returns True, this is the status the file gets
}
</code></pre>
"
19151,145,2008-08-21T00:36:11Z,321,Build a Basic Python Iterator,"<p>How would one create an iterative function (or iterator object) in python?</p>
"
19339,680,2008-08-21T04:29:07Z,241,A Transpose/Unzip Function in Python (inverse of zip),"<p>I have a list of 2-item tuples and I'd like to convert them to 2 lists where the first contains the first item in each tuple and the second list holds the second item.</p>

<p><strong>For example:</strong></p>

<pre><code>original = [('a', 1), ('b', 2), ('c', 3), ('d', 4)]
# and I want to become...
result = (['a', 'b', 'c', 'd'], [1, 2, 3, 4])
</code></pre>

<p>Is there a builtin function that does that?</p>
"
19654,1951,2008-08-21T11:48:03Z,5,Introducing Python,"<p>The company I used to work with has two developers working fulltime, and a handful of freelancers. They're in the process of hiring a new lead developer to try to bring order and management to the development.</p>

<p>But, currently, one of the developers has seen the light of Django (the company has only developed in PHP to date) while the other developer is concerned that introducing a new language (Python) is a bad idea right now.</p>

<p>How should they approach introducing this new technology? Obviously with only one of the developers actually knowing Python, there will be no redundancy when that dev is away or leaves the company.</p>

<p>Should they bother to introduce Python, or should they look for PHP-only solutions until such a time when the team actually have more than one Pythonion? Without a team leader, the decisions are having to fall to them.</p>
"
20063,1335,2008-08-21T14:24:41Z,84,What's the best way to grab/parse command line arguments passed to a Python script?,"<p>What's the <strong>easiest, tersest, and most flexible</strong> method or library for parsing Python command line arguments?</p>
"
20794,1892,2008-08-21T19:00:52Z,13,Find broken symlinks with Python,"<p>If I call <code>os.stat()</code> on a broken <code>symlink</code>, python throws an <code>OSError</code> exception. This makes it useful for finding them. However, there are a few other reasons that <code>os.stat()</code> might throw a similar exception. Is there a more precise way of detecting broken <code>symlinks</code> with Python under Linux?</p>
"
20927,1914,2008-08-21T19:41:57Z,6,updating an auto_now DateTimeField in a parent model w/ Django,"<p>I've got two models: Message and Attachment. Each attachment is attached to a specific message, using a ForeignKey on the Attachment model. Both models have an auto_now DateTimeField called updated. I'm trying to make it so that when any attachment is saved, it also sets the updated field on the associated message to now. Here's my code:</p>

<pre><code>def save(self):
    super(Attachment, self).save()
    self.message.updated = self.updated
</code></pre>

<p>Will this work, and if you can explain it to me, why? If not, how would I accomplish this?</p>
"
21454,2019,2008-08-21T23:48:08Z,65,Specifying a mySQL ENUM in a Django model,"<p>How do I go about specifying and using an ENUM in a Django model?</p>
"
21934,1556,2008-08-22T07:35:26Z,35,Why Java and Python garbage collection methods are different?,"<p>Python uses the reference count method to handle object life time. So an object that has no more use will be immediately destroyed.</p>

<p>But, in Java, the GC(garbage collector) destroys objects which are no longer used at a specific time.</p>

<p>Why does Java choose this strategy and what is the benefit from this?</p>

<p>Is this better than the Python approach?</p>
"
21961,2427,2008-08-22T09:06:43Z,3,Why does this python date/time conversion seem wrong?,"<pre><code>&gt;&gt;&gt; import time
&gt;&gt;&gt; time.strptime(""01-31-2009"", ""%m-%d-%Y"")
(2009, 1, 31, 0, 0, 0, 5, 31, -1)
&gt;&gt;&gt; time.mktime((2009, 1, 31, 0, 0, 0, 5, 31, -1))
1233378000.0
&gt;&gt;&gt; 60*60*24 # seconds in a day
86400
&gt;&gt;&gt; 1233378000.0 / 86400
14275.208333333334
</code></pre>

<p>time.mktime should return the number of seconds since the epoch. Since I'm giving it a time at midnight and the epoch is at midnight, shouldn't the result be evenly divisible by the number of seconds in a day?</p>
"
22059,NA,2008-08-22T10:51:19Z,4,"How do content discovery engines, like Zemanta and Open Calais work?","<p>I was wondering how as semantic service like Open Calais figures out the names of companies, or people, tech concepts, keywords, etc. from a piece of text. Is it because they have a large database that they match the text against? </p>

<p>How would a service like Zemanta know what images to suggest to a piece of text for instance? </p>
"
22149,2077,2008-08-22T12:01:53Z,25,Unicode vs UTF-8 confusion in Python / Django?,"<p>I stumbled over this passage in the <a href=""http://www.djangoproject.com/documentation/tutorial01/"">Django tutorial</a>:</p>

<blockquote>
  <p>Django models have a default <strong>str</strong>() method that calls <strong>unicode</strong>() and converts the result to a UTF-8 bytestring. This means that unicode(p) will return a Unicode string, and str(p) will return a normal string, with characters encoded as UTF-8.</p>
</blockquote>

<p>Now, I'm confused because afaik Unicode is not any particular representation, so what is a ""Unicode string"" in Python? Does that mean UCS-2? Googling turned up <a href=""http://www.reportlab.com/i18n/python_unicode_tutorial.html"">this ""Python Unicode Tutorial""</a> which boldly states</p>

<blockquote>
  <p>Unicode is a two-byte encoding which covers all of the world's common writing systems.</p>
</blockquote>

<p>which is plain wrong, or is it? I have been confused many times by character set and encoding issues, but here I'm quite sure that the documentation I'm reading is confused. Does anybody know what's going on in Python when it gives me a ""Unicode string""?</p>
"
22617,2504,2008-08-22T15:10:46Z,68,Format numbers to strings in Python,"<p>I need to find out how to format numbers as strings. My code is here:</p>

<pre><code>return str(hours)+"":""+str(minutes)+"":""+str(seconds)+"" ""+ampm
</code></pre>

<p>Hours and minutes are integers, and seconds is a float.  the str() function will convert all of these numbers to the tenths (0.1) place.  So instead of my string outputting ""5:30:59.07 pm"", it would display something like ""5.0:30.0:59.1 pm"".</p>

<p>Bottom line, what library / function do I need to do this for me?</p>
"
22676,2109,2008-08-22T15:34:13Z,492,How do I download a file over HTTP using Python?,"<p>I have a small utility that I use to download a MP3 from a website on a schedule and then builds/updates a podcast XML file which I've obviously added to iTunes.</p>

<p>The text processing that creates/updates the XML file is written in Python. I use wget inside a Windows <code>.bat</code> file to download the actual MP3 however. I would prefer to have the entire utility written in Python though.</p>

<p>I struggled though to find a way to actually down load the file in Python, thus why I resorted to <code>wget</code>.</p>

<p>So, how do I download the file using Python?</p>
"
23397,2555,2008-08-22T20:27:46Z,20,What's the best way to duplicate fork() in windows?,"<p>How do I implement some logic that will allow me to reproduce on Windows the functionality that I have on Linux with the <code>fork()</code> system call, using Python?</p>

<p>I'm specifically trying to execute a method on the SAPI Com component, while continuing the other logic in the main thread without blocking or waiting.</p>
"
23907,745,2008-08-23T03:00:46Z,34,How can I graph the Lines of Code history for git repo?,"<p>Basically I want to get the number of lines-of-code in the repository after each commit.</p>

<p>The only (really crappy) ways I have found is to use git filter-branch to run ""wc -l *"", and a script that run git reset --hard on each commit, then ran wc -l</p>

<p>To make it a bit clearer, when the tool is run, it would output the lines of code of the very first commit, then the second and so on.. This is what I want the tool to output (as an example):</p>

<pre><code>me@something:~/$ gitsloc --branch master
10
48
153
450
1734
1542
</code></pre>

<p>I've played around with the ruby 'git' library, but the closest I found was using the .lines() method on a diff, which seems like it should give the added lines (but does not.. it returns 0 when you delete lines for example)</p>

<pre><code>require 'rubygems'
require 'git'

total = 0
g = Git.open(working_dir = '/Users/dbr/Desktop/code_projects/tvdb_api')


last = nil
g.log.each do |cur|
  diff = g.diff(last, cur)
  total = total + diff.lines
  puts total
  last = cur
end
</code></pre>
"
24193,267,2008-08-23T12:41:43Z,3,Python code generator for Visual Studio?,"<p>I had an idea, if I add a python .py file to my C# project, and tag the file with a custom generator that would execute the python file, and treat the output as the result of the code generation, ie. put it into a C# file, that would allow me to do quite a lot of code generation as part of the build process.</p>

<p>Does anyone know if such a custom generator for Visual Studio 2008 exists?</p>
"
24931,1670,2008-08-24T08:46:57Z,7,How to capture Python interpreter's and/or CMD.EXE's output from a Python script?,"<ol>
<li>Is it possible to capture Python interpreter's output from a Python script?</li>
<li>Is it possible to capture Windows CMD's output from a Python script?</li>
</ol>

<p>If so, which librar(y|ies) should I look into?</p>
"
25116,2679,2008-08-24T15:37:50Z,41,Binary buffer in Python,"<p>In Python you can use <a href=""https://docs.python.org/library/struct.html"">StringIO</a> for a file-like buffer for character data. <a href=""https://docs.python.org/library/mmap.html"">Memory-mapped file</a> basically does similar thing for binary data, but it requires a file that is used as the basis. Does Python have a file object that is intended for binary data and is memory only, equivalent to Java's <a href=""http://java.sun.com/javase/6/docs/api/java/io/ByteArrayOutputStream.html"">ByteArrayOutputStream</a>?</p>

<p>The use-case I have is I want to create a ZIP file in memory, and <a href=""https://docs.python.org/library/zipfile.html"">ZipFile</a> requires a file-like object.</p>
"
25661,2772,2008-08-25T04:36:48Z,7,pyGame within a pyGTK application,"<p>What is the best way to use PyGame (SDL) within a PyGTK application?</p>

<p>I'm searching for a method that allows me to have a drawing area in the GTK window and at the same time being able to manage both GTK and SDL events.</p>
"
25807,2679,2008-08-25T09:06:16Z,30,Python super class reflection,"<p>If I have Python code</p>

<pre><code>class A():
    pass
class B():
    pass
class C(A, B):
    pass
</code></pre>

<p>and I have class <code>C</code>, is there a way to iterate through it's super classed (<code>A</code> and <code>B</code>)? Something like pseudocode:</p>

<pre><code>&gt;&gt;&gt; magicGetSuperClasses(C)
(&lt;type 'A'&gt;, &lt;type 'B'&gt;)
</code></pre>

<p>One solution seems to be <a href=""http://docs.python.org/lib/module-inspect.html"">inspect module</a> and <code>getclasstree</code> function.</p>

<pre><code>def magicGetSuperClasses(cls):
    return [o[0] for o in inspect.getclasstree([cls]) if type(o[0]) == type]
</code></pre>

<p>but is this a ""Pythonian"" way to achieve the goal?</p>
"
26595,156,2008-08-25T18:27:16Z,193,"Is there any difference between ""foo is None"" and ""foo == None""?","<p>Is there any difference between:</p>

<pre><code>if foo is None: pass
</code></pre>

<p>and</p>

<pre><code>if foo == None: pass
</code></pre>

<p>The convention that I've seen in most Python code (and the code I myself write) is the former, but I recently came across code which uses the latter.  None is an instance (and the only instance, IIRC) of NoneType, so it shouldn't matter, right?  Are there any circumstances in which it might?</p>
"
26706,1785,2008-08-25T19:43:15Z,5,wxpython: How do I examine dragged data in OnDragOver?,"<p>I'm a bit perplexed by drag and drop in wxPython (but perhaps this questions pertains to drag and drop in other GUI frameworks as well). The frameworks provides a couple of callbacks (OnEnter and OnDragOver) that purportedly allow me to inform the system whether the current mouse position is a valid place to drop whatever it is that is being dragged. From these methods I can return wx.DragNone, wx.DragCopy, etc. What baffles me is that from within these methods I am not allowed to call GetData, which means I am not allowed to examine the data that the user is dragging. If I cannot see the data, how am I supposed to know whether it is OK for the user to drop here?</p>
"
27567,1662,2008-08-26T08:40:28Z,9,Where can I learn more about PyPy's translation function?,"<p>I've been having a hard time trying to understand PyPy's translation.  It looks like something absolutely revolutionary from simply reading the description, however I'm hard-pressed to find good documentation on actually translating a real world piece of code to something such as LLVM.  Does such a thing exist?  The official PyPy documentation on it just skims over the functionality, rather than providing anything I can try out myself.</p>
"
28165,305,2008-08-26T14:20:48Z,10,Does PHP have an equivalent to this type of Python string substitution?,"<p>Python has this wonderful way of handling string substitutions using dictionaries:</p>

<pre><code>&gt;&gt;&gt; 'The %(site)s site %(adj)s because it %(adj)s' % {'site':'Stackoverflow', 'adj':'rocks'}
'The Stackoverflow site rocks because it rocks'
</code></pre>

<p>I love this because you can specify a value once in the dictionary and then replace it all over the place in the string.</p>

<p>I've tried to achieve something similar in PHP using various string replace functions but everything I've come up with feels awkward.</p>

<p>Does anybody have a nice clean way to do this kind of string substitution in PHP?</p>

<p><em><strong>Edit</em></strong><br>
Here's the code from the sprintf page that I liked best.  </p>

<pre><code>&lt;?php

function sprintf3($str, $vars, $char = '%')
{
    $tmp = array();
    foreach($vars as $k =&gt; $v)
    {
        $tmp[$char . $k . $char] = $v;
    }
    return str_replace(array_keys($tmp), array_values($tmp), $str);
}

echo sprintf3( 'The %site% site %adj% because it %adj%', array('site'=&gt;'Stackoverflow', 'adj'=&gt;'rocks'));
?&gt;
</code></pre>
"
28369,3002,2008-08-26T15:27:03Z,3,"Is ""safe_eval"" really safe?","<p>I'm looking for a ""safe"" eval function, to implement spreadsheet-like calculations (using numpy/scipy).</p>

<p>The functionality to do this (the <a href=""http://docs.python.org/lib/module-rexec.html"" rel=""nofollow"">rexec module</a>) has been removed from Python since 2.3 due to apparently unfixable security problems. There are several third-party hacks out there that purport to do this - the most thought-out solution that I have found is 
<a href=""http://code.activestate.com/recipes/496746/"" rel=""nofollow"">this Python Cookbok recipe</a>, ""safe_eval"". </p>

<p>Am I reasonably safe if I use this (or something similar), to protect from malicious code, or am I stuck with writing my own parser? Does anyone know of any better alternatives?</p>

<p>EDIT: I just discovered <a href=""http://pypi.python.org/pypi/RestrictedPython"" rel=""nofollow"">RestrictedPython</a>, which is part of Zope. Any opinions on this are  welcome.</p>
"
28559,116,2008-08-26T16:37:52Z,9,Most Pythonic way equivalent for: while ((x = next()) != END),"<p>What's the best Python idiom for this C construct?</p>

<pre><code>while ((x = next()) != END) {
    ....
}
</code></pre>

<p>I don't have the ability to recode next().</p>

<p>update:  and the answer from seems to be:</p>

<pre><code>for x in iter(next, END):
    ....
</code></pre>
"
28668,1892,2008-08-26T17:20:47Z,8,Best way to extract data from a FileMaker Pro database in a script?,"<p>My job would be easier, or at least less tedious if I could come up with an automated way (preferably in a Python script) to extract useful information from a FileMaker Pro database. I am working on Linux machine and the FileMaker database is on the same LAN running on an OS X machine. I can log into the webby interface from my machine.</p>

<p>I'm quite handy with SQL, and if somebody could point me to some FileMaker plug-in that could give me SQL access to the data within FileMaker, I would be pleased as punch. Everything I've found only goes the other way: Having FileMaker get data from SQL sources. Not useful.</p>

<p>It's not my first choice, but I'd use Perl instead of Python if there was a Perl-y solution at hand.</p>

<p><em>Note</em>: XML/XSLT services (as suggested by some folks) are only available on FM Server, not FM Pro. Otherwise, that would probably be the best solution. ODBC is turning out to be extremely difficult to even get working. There is absolutely zero feedback from FM when you set it up so you have to dig through /var/log/system.log and parse obscure error messages.</p>

<p><em>Conclusion</em>: I got it working by running a python script locally on the machine that queries the FM database through the ODBC connections. The script is actually a TCPServer that accepts socket connections from other systems on the LAN, runs the queries, and returns the data through the socket connection. I had to do this to bypass the fact that FM Pro only accepts ODBC connections locally (FM server is required for external connections).</p>
"
28796,2900,2008-08-26T18:26:51Z,52,What refactoring tools do you use for Python?,"<p>I have a bunch of classes I want to rename.  Some of them have names that are small and that name is reused in other class names, where I don't want that name changed.  Most of this lives in Python code, but we also have some XML code that references class names.</p>

<p>Simple search and replace only gets me so far.  In my case, I want to rename AdminAction to AdminActionPlug and AdminActionLogger to AdminActionLoggerPlug, so the first one's search-and-replace would also hit the second, wrongly.</p>

<p>Does anyone have experience with Python refactoring tools ? Bonus points if they can fix class names in the XML documents too.</p>
"
28961,3117,2008-08-26T19:49:54Z,7,What's the best way to use web services in python?,"<p>I have a medium sized application that runs as a .net web-service which I do not control,
and I want to create a loose pythonic API above it to enable easy scripting.</p>

<p>I wanted to know what is the best/most practical solution for using web-services in python.</p>

<p>Edit:
I need to consume a complex soap WS
and I have no control over it.</p>
"
29243,1638,2008-08-27T00:21:35Z,14,How do I create an xml document in python,"<p>Here is my sample code:</p>

<pre><code>from xml.dom.minidom import *
def make_xml():
    doc = Document()
    node = doc.createElement('foo')
    node.innerText = 'bar'
    doc.appendChild(node)
    return doc
if __name__ == '__main__':
    make_xml().writexml(sys.stdout)
</code></pre>

<p>when I run the above code I get this:</p>

<pre><code>&lt;?xml version=""1.0"" ?&gt;
&lt;foo/&gt;
</code></pre>

<p>I would like to get:</p>

<pre><code>&lt;?xml version=""1.0"" ?&gt;
&lt;foo&gt;bar&lt;/foo&gt;
</code></pre>

<p>I just guessed that there was an innerText property, it gives no compiler error, but does not seem to work... how do I go about creating a text node?</p>
"
29562,2908,2008-08-27T05:03:07Z,23,Python distutils - does anyone know how to use it?,"<p>I wrote a quick program in python to add a gtk GUI to a cli program. I was wondering how I can create an installer using distutils. Since it's just a GUI frontend for a command line app it only works in *nix anyway so I'm not worried about it being cross platform.</p>

<p>my main goal is to create a .deb package for debian/ubuntu users, but I don't understand make/configure files. I've primarily been a web developer up until now.</p>

<p>Thanks for your help!</p>

<p><strong>edit</strong>: Does anyone know of a project that uses distutils so I could see it in action and, you know, actually try building it?</p>

<h2>Here are a few useful links</h2>

<ul>
<li><p><a href=""https://wiki.ubuntu.com/PackagingGuide/Python"">Ubuntu Python Packaging Guide</a></p>

<p>This Guide is <strong><em>very</em></strong> helpful. I don't know how I missed it during my initial wave of gooling. It even walks you through packaging up an existing python application</p></li>
<li><p><a href=""https://wiki.ubuntu.com/MOTU/GettingStarted"">The Ubuntu MOTU Project</a></p>

<p>This is the official package maintaining project at ubuntu. Anyone can join, and there are lots of tutorials and info about creating packages, of all types, which include the above 'python packaging guide'.</p></li>
<li><p><a href=""http://episteme.arstechnica.com/eve/forums/a/tpc/f/96509133/m/808004952931"">""Python distutils to deb?"" - Ars Technica Forum discussion</a></p>

<p>According to this conversation, you can't just use distutils. It doesn't follow the debian packaging format (or something like that). I guess that's why you need dh_make as seen in the Ubuntu Packaging guide</p></li>
<li><p><a href=""http://osdir.com/ml/linux.debian.devel.python/2004-10/msg00013.html"">""A bdist_deb command for distutils</a></p>

<p>This one has some interesting discussion (it's also how I found the ubuntu guide) about concatenating a zip-file and a shell script to create some kind of universal executable (anything with python and bash that is). weird. Let me know if anyone finds more info on this practice because I've never heard of it.</p></li>
<li><p><A href=""http://mail.python.org/pipermail/distutils-sig/2000-May/001000.html"">Description of the deb format and how distutils fit in - python mailing list</a></p></li>
</ul>
"
29856,3431280,2008-08-27T10:22:09Z,2,Install Python to match directory layout in OS X 10.5,"<p>The default Python install on OS X 10.5 is 2.5.1 with a fat 32 bit (Intel and PPC) client. I want to setup apache and mysql to run django. In the past I have run apache and mysql to match this install in 32 bit mode (even stripping out the 64 bit stuff from apache to make it work).</p>

<p>I want to upgrade Python to 64 bit. I am completely comfortable with compiling it from source with one caveat. How to I match the way that the default install is laid out? Especially with regards to site-packages being in <code>/Library/Python/2.5/</code> and not the one in buried at the top of the framework once I compile it. </p>
"
31340,242853,2008-08-27T23:44:47Z,71,"How do threads work in Python, and what are common Python-threading specific pitfalls?","<p>I've been trying to wrap my head around how threads work in Python, and it's hard to find good information on how they operate. I may just be missing a link or something, but it seems like the official documentation isn't very thorough on the subject, and I haven't been able to find a good write-up.</p>

<p>From what I can tell, only one thread can be running at once, and the active thread switches every 10 instructions or so?</p>

<p>Where is there a good explanation, or can you provide one? It would also be very nice to be aware of common problems that you run into while using threads with Python.</p>
"
32044,3154,2008-08-28T11:43:10Z,44,How can I render a tree structure (recursive) using a django template?,"<p>I have a tree structure in memory that I would like to render in HTML using a Django template. </p>

<pre><code>class Node():
  name = ""node name""
  children = []
</code></pre>

<p>There will be some object <code>root</code> that is a <code>Node</code>, and <code>children</code> is a list of <code>Node</code>s. <code>root</code> will be passed in the content of the template.</p>

<p>I have found <a href=""http://blog.elsdoerfer.name/2008/01/22/recursion-in-django-templates/"">this</a> one discussion of how this might be achieved, but the poster suggests this might not be good in a production environment.</p>

<p>Does anybody know of a better way?</p>
"
32385,2147,2008-08-28T14:23:00Z,6,Programmatically editing Python source,"<p>This is something that I think would be very useful.  Basically, I'd like there to be a way to edit Python source programmatically without requiring human intervention.  There are a couple of things I would like to do with this:</p>

<ol>
<li><p>Edit the configuration of Python apps that use source modules for configuration.</p></li>
<li><p>Set up a ""template"" so that I can customize a Python source file on the fly.  This way, I can set up a ""project"" system on an open source app I'm working on and allow certain files to be customized.</p></li>
</ol>

<p>I could probably write something that can do this myself, but I can see that opening up a lot of ""devil's in the details"" type issues.  Are there any ways to do this currently, or am I just going to have to bite the bullet and implement it myself?</p>
"
32404,2077,2008-08-28T14:28:04Z,165,"Is it possible to run a Python script as a service in Windows? If possible, how?","<p>I am sketching the architecture for a set of programs that share various interrelated objects stored in a database. I want one of the programs to act as a service which provides a higher level interface for operations on these objects, and the other programs to access the objects through that service.</p>

<p>I am currently aiming for Python and the Django framework as the technologies to implement that service with. I'm pretty sure I figure how to demonize the Python program in Linux. However, it is an optional spec item that the system should support Windows. I have little experience with Windows programming and no experience at all with Windows services.</p>

<p><strong>Is it possible to run a Python programs as a Windows service (i. e. run it automatically without user login)?</strong> I won't necessarily have to implement this part, but I need a rough idea how it would be done in order to decide whether to design along these lines.</p>

<p><i>Edit: Thanks for all the answers so far, they are quite comprehensive. I would like to know one more thing: <b>How is Windows aware of my service? Can I manage it with the native Windows utilities?</b> <strong>Basically, what is the equivalent of putting a start/stop script in /etc/init.d?</i></strong></p>
"
32899,720,2008-08-28T17:49:02Z,111,How to generate dynamic (parametrized) unit tests in python?,"<p>I have some kind of test data and want to create an unit test for each item. My first idea was to do it like this:</p>

<pre><code>import unittest

l = [[""foo"", ""a"", ""a"",], [""bar"", ""a"", ""b""], [""lee"", ""b"", ""b""]]

class TestSequence(unittest.TestCase):
    def testsample(self):
        for name, a,b in l:
            print ""test"", name
            self.assertEqual(a,b)

if __name__ == '__main__':
    unittest.main()
</code></pre>

<p>The downside of this is that it handles all data in one test. I would like to generate one test for each item on the fly. Any suggestions?</p>
"
33475,742,2008-08-28T21:48:09Z,1,"ssh hangs when command invoked directly, but exits cleanly when run interactive","<p>I need to launch a server on the remote machine and retrieve the port number that the server process is lsitening on.  When invoked, the server will listen on a random port and output the port number on stderr.</p>

<p>I want to automate the process of logging on to the remote machine, launching the process, and retrieving the port number. I wrote a Python script called ""<code>invokejob.py</code>"" that lives on the remote machine to act as a wrapper that invokes the job and then returns the port number, it looks like this:</p>

<pre><code>import re, subprocess
executable = ... # Name of executable
regex = ... # Regex to extract the port number from the output
p = subprocess.Popen(executable,
    bufsize=1, # line buffered
    stderr=subprocess.PIPE
    )
s = p.stderr.readline()
port = re.match(regex).groups()[0]
print port
</code></pre>

<p>If I log in interactively, this script works:</p>

<pre><code>$ ssh remotehost.example.com
Last login: Thu Aug 28 17:31:18 2008 from localhost
$ ./invokejob.py
63409
$ exit
logout
Connection to remotehost.example.com closed.
</code></pre>

<p>(Note: successful logout, it did not hang).</p>

<p>However, if I try to invoke it from the command-line, it just hangs:</p>

<pre><code>$ ssh remotehost.example.com invokejob.py
</code></pre>

<p>Does anybody know why it hangs in the second case, and what I can do to avoid this? </p>

<p>Note that I need to retrieve the output of the program, so I can't just use the ssh ""-f"" flag or redirect standard output.</p>
"
33534,394,2008-08-28T22:18:02Z,10,Extending base classes in Python,"<p>I'm trying to extend some ""base"" classes in Python:</p>

<pre><code>class xlist (list):
    def len(self):
        return len(self)

    def add(self, *args):
        self.extend(args)
        return None


class xint (int):
    def add(self, value):
        self += value
        return self


x = xlist([1,2,3])
print x.len()   ## &gt;&gt;&gt; 3 ok
print x         ## &gt;&gt;&gt; [1,2,3] ok
x.add (4, 5, 6)
print x         ## &gt;&gt;&gt; [1,2,3,4,5,6] ok

x = xint(10)
print x         ## &gt;&gt;&gt; 10 ok
x.add (2)
print x         ## &gt;&gt;&gt; 10  # Not ok (#1)

print type(x)         ## &gt;&gt;&gt; &lt;class '__main__.xint'&gt; ok
x += 5
print type(x)         ## &gt;&gt;&gt; &lt;type 'int'&gt;  # Not ok (#2)
</code></pre>

<p>It works fine in the <em>list</em> case because the <em>append</em> method modifies the object ""in place"", without returning it. But in the <em>int</em> case, the <em>add</em> method doesn't modify the value of the external <em>x</em> variable. I suppose that's fine in the sense that <em>self</em> is a local variable in the <em>add</em> method of the class, but this is preventing me from modifying the initial value assigned to the instance of the class.</p>

<p>Is it possible to extend a class this way or should I define a class property with the base type and map all the needed methods to this property?</p>
"
33978,3119,2008-08-29T04:59:31Z,117,Find out how much memory is being used by an object in Python,"<p>How would you go about finding out how much memory is being used by an object? I know it is possible to find out how much is used by a block of code, but not by an instantiated object (anytime during its life), which is what I want. </p>
"
34020,3561,2008-08-29T05:43:16Z,17,Are Python threads buggy?,"<p>A reliable coder friend told me that Python's current multi-threading implementation is seriously buggy - enough to avoid using altogether.  What can said about this rumor?</p>
"
34079,3573,2008-08-29T06:55:54Z,44,How to specify an authenticated proxy for a python http connection?,"<p>What's the best way to specify a proxy with username and password for an http connection in python?</p>
"
34209,3594,2008-08-29T09:03:27Z,1,Django ImageField core=False in newforms admin,"<p>In the transition to newforms admin I'm having difficulty figuring out how specify core=False for ImageFields.</p>

<p>I get the following error:</p>

<pre><code>TypeError: __init__() got an unexpected keyword argument 'core'
</code></pre>

<p>[Edit] However, by just removing the core argument I get a ""This field is required."" error in the admin interface on attempted submission. How does one accomplish what core=False is meant to do using newforms admin?</p>
"
34243,3594,2008-08-29T09:24:08Z,8,Python descriptor protocol analog in other languages?,"<p>Is there something like the Python descriptor protocol implemented in other languages? It seems like a nice way to increase modularity/encapsulation without bloating your containing class' implementation, but I've never heard of a similar thing in any other languages. Is it likely absent from other languages because of the lookup overhead?</p>
"
34328,2077,2008-08-29T10:18:21Z,10,How do I make Windows aware of a service I have written in Python?,"<p>In <a href=""http://stackoverflow.com/questions/32404/can-i-run-a-python-script-as-a-service-in-windows-how"" rel=""nofollow"" title=""Python scripts as Windows service"">another question</a> I posted yesterday, I got very good advice on how a Python script could be run as a service in Windows. What I'm left wondering is: How is Windows aware of the services that can be managed in the native tools (""services"" window in ""administrative tools""). I. e. what is the Windows equivalent of putting a start/stop script in /etc/init.d under Linux?</p>
"
34439,3587,2008-08-29T15:05:17Z,159,Finding what methods an object has,"<p>Given a Python object of any kind, is there an easy way to get a list of all methods that this object has?<br>
Or,</p>

<p>if this is not possible, is there at least an easy way to check if it has a particular method other than simply checking if an error occurs when the method is called?</p>
"
34916,985,2008-08-29T18:12:30Z,8,Scaffolding in pylons,"<p>Is there anything similar to rails' scaffolding fo pylons? I've been poking around google, but fofund only this thing caled dbsprockets, which is fine, although probably way to much for my needs. What i really need is a basic CRUD thas is based on the SQLAlchemy model.</p>
"
35538,3594,2008-08-30T01:15:32Z,21,Validate (X)HTML in Python,"<p>What's the best way to go about validating that a document follows some version of HTML (prefereably that I can specify)? I'd like to be able to know where the failures occur, as in a web-based validator, except in a native Python app.</p>
"
35569,3594,2008-08-30T01:51:05Z,6,Why does Python's iter() on a mapping return iterkeys() instead of iteritems()?,"<p>It seems like if you want to get the keys of a mapping, you ask for them; otherwise, give me the <em>whole</em> mapping (constituted by a set of key-value pairs). Is there a historical reason for this?</p>
"
35634,3594,2008-08-30T03:04:54Z,6,"Ruby ""is"" equivalent","<p>Is there a Ruby equivalent for Python's ""is""? It tests whether two objects are identical (i.e. have the same memory location).</p>
"
35753,3373,2008-08-30T07:08:22Z,25,Is Python good for big software projects (not web based)?,"<p>Right now I'm developing mostly in C/C++, but I wrote some small utilities in Python to automatize some tasks and I really love it as language (especially the productivity). </p>

<p>Except for the performances (a problem that could be sometimes solved thanks to the ease of interfacing Python with C modules), do you think it is proper for production use in the development of stand-alone complex applications (think for example to a word processor or a graphic tool)?</p>

<p>What IDE would you suggest? The IDLE provided with Python is not enough even for small projects in my opinion.</p>
"
35805,3154,2008-08-30T09:12:41Z,27,Why is my instance variable not in __dict__?,"<p>If I create a class <code>A</code> as follows:</p>

<pre><code>class A:
    def __init__(self):
        self.name = 'A'
</code></pre>

<p>Inspecting the <code>__dict__</code> member looks like <code>{'name': 'A'}</code></p>

<p>If however I create a class <code>B</code>:</p>

<pre><code>class B:
    name = 'B'
</code></pre>

<p><code>__dict__</code> is empty.</p>

<p>What is the difference between the two, and why doesn't <code>name</code> show up in <code>B</code>'s <code>__dict__</code>?</p>
"
35817,3715,2008-08-30T09:27:24Z,72,How to escape os.system() calls in Python?,"<p>When using os.system() it's often necessary to escape filenames and other arguments passed as parameters to commands.  How can I do this?  Preferably something that would work on multiple operating systems/shells but in particular for bash.</p>

<p>I'm currently doing the following, but am sure there must be a library function for this, or at least a more elegant/robust/efficient option:</p>

<pre><code>def sh_escape(s):
   return s.replace(""("",""\\("").replace("")"",""\\)"").replace("" "",""\\ "")

os.system(""cat %s | grep something | sort &gt; %s"" 
          % (sh_escape(in_filename), 
             sh_escape(out_filename)))
</code></pre>

<p><em>Edit:</em> I've accepted the simple answer of using quotes, don't know why I didn't think of that; I guess because I came from Windows where ' and "" behave a little differently.</p>

<p>Regarding security, I understand the concern, but, in this case, I'm interested in a quick and easy solution which os.system() provides, and the source of the strings is either not user-generated or at least entered by a trusted user (me).</p>
"
35948,3117,2008-08-30T13:20:02Z,30,Django templates and variable attributes,"<p>I'm using Google App Engine and Django templates.<br>
I have a table that I want to display the objects look something like:<br></p>

<pre><code>Object Result:
    Items = [item1,item2]
    Users = [{name='username',item1=3,item2=4},..]
</code></pre>

<p>The Django template is:</p>

<pre><code>&lt;table&gt;
&lt;tr align=""center""&gt;
    &lt;th&gt;user&lt;/th&gt;
    {% for item in result.items %}
        &lt;th&gt;{{item}}&lt;/th&gt;
    {% endfor %}
&lt;/tr&gt;

{% for user in result.users %}
    &lt;tr align=""center""&gt; 
        &lt;td&gt;{{user.name}}&lt;/td&gt;
        {% for item in result.items %}
            &lt;td&gt;{{ user.item }}&lt;/td&gt;
        {% endfor %}
    &lt;/tr&gt;
{% endfor %}
&lt;/table&gt;
</code></pre>

<p>Now the <a href=""http://www.djangoproject.com/documentation/0.96/templates/#variables"" rel=""nofollow"">Django documention</a> states that when it sees a <strong>.</strong> in variables<br>
It tries several things to get the data, one of which is dictionary lookup which is exactly what I want but doesn't seem to happen...</p>
"
35988,3738,2008-08-30T14:33:25Z,210,C-like structures in Python,"<p>Is there a way to conveniently define a C-like structure in Python? I'm tired of writing stuff like:</p>

<pre><code>class MyStruct():
    def __init__(self, field1, field2, field3):
        self.field1 = field1
        self.field2 = field2
        self.field3 = field3
</code></pre>
"
36139,3205,2008-08-30T17:03:09Z,211,How do I sort a list of strings in Python?,"<p>What is the best way of creating an alphabetically sorted list in Python?</p>
"
36324,1714,2008-08-30T20:24:38Z,4,"""The system cannot find the file specified"" when invoking subprocess.Popen in python","<p>I'm trying to use svnmerge.py to merge some files.  Under the hood it uses python, and when I use it I get an error - ""The system cannot find the file specified"".  Colleagues at work are running the same version of svnmerge.py, and of python (2.5.2, specifically r252:60911) without an issue.</p>

<p>I found <a href=""http://www.nabble.com/problem-under-some-windows-desktop-td15868057.html"" rel=""nofollow"">this link</a>, which describes my problem.  Trying what was outlined there, I confirmed Python could find svn (it's in my path):</p>

<pre>
P:\>python 
Python 2.5.2 (r252:60911, Feb 21 2008, 13:11:45) [MSC v.1310 32 bit (Intel)] on win32 
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information. 
>>> import os 
>>> i,k = os.popen4(""svn --version"") 
>>> i.close() 
>>> k.readline() 
'svn, version 1.4.2 (r22196)\n' 
</pre>

<p>Looking at the svnmerge.py code, though, I noticed for python versions 2.4 and higher it was following a different execution path.  Rather than invoking
os.popen4() it uses subprocess.Popen().  Trying that reproduces the error:</p>

<pre>
C:\>python
Python 2.5.2 (r252:60911, Feb 21 2008, 13:11:45) [MSC v.1310 32 bit (Intel)] on win32 Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
>>> import subprocess
>>> p = subprocess.Popen(""svn --version"", stdout=subprocess.PIPE, 
>>> close_fds=False, stderr=subprocess.PIPE)
Traceback (most recent call last):
  File """", line 1, in 
  File ""C:\Python25\lib\subprocess.py"", line 594, in __init__
    errread, errwrite)
  File ""C:\Python25\lib\subprocess.py"", line 816, in _execute_child
    startupinfo)
WindowsError: [Error 2] The system cannot find the file specified
>>>
</pre>

<p>For now, I've commented out the 2.4-and-higher specific code, but I'd like to find a proper solution.</p>

<p>If it's not obvious, I'm a complete python newbie, but google hasn't helped.  Any pointers?</p>
"
36806,3431280,2008-08-31T12:03:20Z,5,Setup django with WSGI and apache,"<p>I have been sold on mod_wsgi and apache rather than mod_python.
I have all the parts installed (django, apache, mod_wsgi) but have run into a problem deploying.</p>

<p>I am on osx 10.5 with apache 2.2 and django 1.0b2, mod_wsgi-2.3</p>

<p>My application is called tred.</p>

<p>Here are the relevant files:
httpd-vhosts (included in httpd-conf)</p>

<pre>
NameVirtualHost tred:80



  ServerName tred

  Alias /admin_media /usr/lib/python2.5/site-packages/django/contrib/admin/media

  
    Order allow,deny
    Allow from all
  

  Alias /media /Users/dmg/Sites/tred/media

  
    Order allow,deny
    Allow from all
  

  Alias / /Users/dmg/Sites/tred/

  
        Order allow,deny
        Allow from all
    

  WSGIScriptAlias / /Users/dmg/Sites/tred/mod_wsgi-handler.wsgi

  WSGIDaemonProcess tred user=dmg group=staff processes=1 threads=10
  WSGIProcessGroup tred


</pre>

<p>mod_wsgi-handle.wsgi</p>

<pre>
import sys
import os

sys.path.append(os.path.dirname(os.path.abspath(__file__)) + '/..')
os.environ['DJANGO_SETTINGS_MODULE'] = 'tred.settings'

import django.core.handlers.wsgi

application = django.core.handlers.wsgi.WSGIHandler()
</pre>

<p>When I go to <a href=""http://tred"">http://tred</a> I get a directory listing rather than the rendered website. I think I have followed the tutorials correctly but it is obviously not right. What can I do to make this work?</p>
"
36812,2592,2008-08-31T12:11:10Z,2,How do I add data to an existing model in Django?,"<p>Currently, I am writing up a bit of a product-based CMS as my first project.</p>

<p>Here is my question. How can I add additional data (products) to my Product model?</p>

<p>I have added '/admin/products/add' to my urls.py, but I don't really know where to go from there. How would i build both my view and my template? Please keep in mind that I don't really know all that much Python, and i am very new to Django</p>

<p>How can I do this all without using this existing django admin interface.</p>
"
36901,2572,2008-08-31T15:04:35Z,833,What does ** (double star) and * (star) do for Python parameters?,"<p>In the following method definitions, what does the <code>*</code> and <code>**</code> do for <code>param2</code>?</p>

<pre><code>def foo(param1, *param2):
def bar(param1, **param2):
</code></pre>
"
36932,3880,2008-08-31T15:55:47Z,1146,How can I represent an 'Enum' in Python?,"<p>I'm mainly a C# developer, but I'm currently working on a project in Python.</p>

<p>How can I represent the equivalent of an Enum in Python?  </p>
"
36953,3189,2008-08-31T16:50:35Z,45,"Resources for lexing, tokenising and parsing in python","<p>Can people point me to resources on lexing, parsing and tokenising with Python?</p>

<p>I'm doing a little hacking on an open source project (<a href=""http://www.hotwire-shell.org/"">hotwire</a>) and wanted to do a few changes to the code that <a href=""http://code.google.com/p/hotwire-shell/source/browse/trunk/hotwire/externals/shlex.py"">lexes</a>, <a href=""http://code.google.com/p/hotwire-shell/source/browse/trunk/hotwire/command.py"">parses and tokenises</a> the commands entered into it.  As it is real working code it is fairly complex and a bit hard to work out.</p>

<p>I haven't worked on code to lex/parse/tokenise before, so I was thinking one approach would be to work through a tutorial or two on this aspect.  I would hope to learn enough to navigate around the code I actually want to alter.  Is there anything suitable out there?  (Ideally it could be done in an afternoon without having to buy and read the dragon book first ...)</p>

<p><strong>Edit:</strong> (7 Oct 2008) None of the below answers quite give what I want.  With them I could generate parsers from scratch, but I want to learn how to write my own basic parser from scratch, not using lex and yacc or similar tools.  Having done that I can then understand the existing code better.  </p>

<p>So could someone point me to a tutorial where I can build a basic parser from scratch, using just python?</p>
"
37142,3855,2008-08-31T21:41:24Z,7,How to make Ruby or Python web sites to use multiple cores?,"<p>Even though <a href=""http://twistedmatrix.com/pipermail/twisted-python/2004-May/007896.html"">Python</a> and <a href=""http://www.reddit.com/comments/6wmum/thread_safe_ruby_on_rails_in_22_release/"">Ruby</a> have one kernel thread per interpreter thread, they have a global interpreter lock (GIL) that is used to protect potentially shared data structures, so this inhibits multi-processor execution. Even though the portions in those languajes that are written in C or C++ can be free-threaded, that's not possible with pure interpreted code unless you use multiple processes. What's the best way to achieve this? <a href=""http://blogs.codehaus.org/people/tirsen/archives/001041_ruby_on_rails_and_fastcgi_scaling_using_processes_instead_of_threads.html"">Using FastCGI</a>? Creating a <a href=""http://blog.innerewut.de/files/images/stage_2.png"">cluster or a farm</a> of virtualized servers? Using their Java equivalents, JRuby and Jython?</p>
"
37479,1057,2008-09-01T05:17:35Z,0,How can I simply inherit methods from an existing instance?,"<p>below I have a very simple example of what I'm trying to do.  I want to be able to use HTMLDecorator with any other class.  Ignore the fact it's called decorator, it's just a name.</p>

<pre><code>import cgi

class ClassX(object):
  pass # ... with own __repr__

class ClassY(object):
  pass # ... with own __repr__

inst_x=ClassX()

inst_y=ClassY()

inst_z=[ i*i for i in range(25) ]

inst_b=True

class HTMLDecorator(object):
   def html(self): # an ""enhanced"" version of __repr__
       return cgi.escape(self.__repr__()).join((""&lt;H1&gt;"",""&lt;/H1&gt;""))

print HTMLDecorator(inst_x).html()
print HTMLDecorator(inst_y).html()
wrapped_z = HTMLDecorator(inst_z)
inst_z[0] += 70
wrapped_z[0] += 71
print wrapped_z.html()
print HTMLDecorator(inst_b).html()
</code></pre>

<p>Output:</p>

<pre>Traceback (most recent call last):
  File ""html.py"", line 21, in 
    print HTMLDecorator(inst_x).html()
TypeError: default __new__ takes no parameters</pre>

<p>Is what I'm trying to do possible?  If so, what am I doing wrong?</p>
"
37486,3971,2008-09-01T05:25:01Z,15,Filter out HTML tags and resolve entities in python,"<p>Because regular expressions scare me, I'm trying to find a way to remove all HTML tags and resolve HTML entities from a string in Python.</p>
"
37535,3715,2008-09-01T06:45:40Z,21,What's the easiest way to read a FoxPro DBF file from Python?,"<p>I've got a bunch of FoxPro (VFP9) DBF files on my Ubuntu system, is there a library to open these in Python?  I only need to read them, and would preferably have access to the memo fields too.</p>

<p><strong>Update</strong>: Thanks @cnu, I used Yusdi Santoso's <a href=""http://www.physics.ox.ac.uk/users/santoso/dbf.py.src""><code>dbf.py</code></a> and it works nicely.  One gotcha: The memo file name extension must be lower case, i.e. <code>.fpt</code>, not <code>.FPT</code> which was how the filename came over from Windows.</p>
"
38238,3171,2008-09-01T18:16:41Z,194,What are Class methods in Python for?,"<p>I'm teaching myself Python and my most recent lesson was that <a href=""http://dirtsimple.org/2004/12/python-is-not-java.html"">Python is not Java</a>, and so I've just spent a while turning all my Class methods into functions.</p>

<p>I now realise that I don't need to use Class methods for what I would done with <code>static</code> methods in Java, but now I'm not sure when I would use them.  All the advice I can find about Python Class methods is along the lines of newbies like me should steer clear of them, and the standard documentation is at its most opaque when discussing them.</p>

<p>Does anyone have a good example of using a Class method in Python or at least can someone tell me when Class methods can be sensibly used?</p>
"
38435,2193,2008-09-01T21:06:07Z,2,Retrieving an Oracle timestamp using Python's Win32 ODBC module,"<p>Given an Oracle table created using the following:</p>

<pre><code>CREATE TABLE Log(WhenAdded TIMESTAMP(6) WITH TIME ZONE);
</code></pre>

<p>Using the Python ODBC module from its <a href=""http://www.python.org/download/windows/"" rel=""nofollow"">Win32 extensions</a> (from the win32all package), I tried the following:</p>

<pre><code>import dbi, odbc

connection = odbc.odbc(""Driver=Oracle in OraHome92;Dbq=SERVER;Uid=USER;Pwd=PASSWD"")

cursor = connection.cursor()
cursor.execute(""SELECT WhenAdded FROM Log"")

results = cursor.fetchall()
</code></pre>

<p>When I run this, I get the following:</p>

<pre><code>Traceback (most recent call last):
...
    results = cursor.fetchall()
dbi.operation-error: [Oracle][ODBC][Ora]ORA-00932: inconsistent datatypes: expected %s got %s 
in FETCH
</code></pre>

<p>The other data types I've tried (VARCHAR2, BLOB) do not cause this problem. Is there a way of retrieving timestamps?</p>
"
38508,3880,2008-09-01T22:01:02Z,49,What's the best way to return multiple values from a function in Python?,"<p>I have a function where I need to do something to a string.  I need the function to return a boolean indicating whether or not the operation succeeded, and I also need to return the modified string.  </p>

<p>In C#, I would use an out parameter for the string, but there is no equivalent in Python.  I'm still very new to Python and the only thing I can think of is to return a tuple with the boolean and modified string.</p>

<p>Related question: <a href=""http://stackoverflow.com/questions/61605/is-it-pythonic-for-a-function-to-return-multiple-values"">Is it pythonic for a function to return multiple values?</a></p>
"
38601,2592,2008-09-01T23:22:55Z,147,Using Django time/date widgets in custom form,"<p>How can I use the nifty JavaScript date and time widgets that the default admin uses with my custom view?</p>

<p>I have looked through <a href=""https://docs.djangoproject.com/en/dev/topics/forms/"">the Django forms documentation</a>, and it briefly mentions django.contrib.admin.widgets, but I don't know how to use it?</p>

<p>Here is my template that I want it applied on.</p>

<pre><code>&lt;form action=""."" method=""POST""&gt;
    &lt;table&gt;
        {% for f in form %}
           &lt;tr&gt; &lt;td&gt; {{ f.name }}&lt;/td&gt; &lt;td&gt;{{ f }}&lt;/td&gt; &lt;/tr&gt;
        {% endfor %}
    &lt;/table&gt;
    &lt;input type=""submit"" name=""submit"" value=""Add Product""&gt;
&lt;/form&gt;
</code></pre>

<p>Also, I think it should be noted that I haven't really written a view up myself for this form, I am using a generic view. Here is the entry from the url.py:</p>

<pre><code>(r'^admin/products/add/$', create_object, {'model': Product, 'post_save_redirect': ''}),
</code></pre>

<p>And I am relevantly new to the whole Django/MVC/MTV thing, so please go easy...</p>
"
38987,3207,2008-09-02T07:44:30Z,1867,How to merge two Python dictionaries in a single expression?,"<p>I have two Python dictionaries, and I want to write a single expression that returns these two dictionaries, merged.  The <code>update()</code> method would be what I need, if it returned its result instead of modifying a dict in-place.</p>

<pre><code>&gt;&gt;&gt; x = {'a':1, 'b': 2}
&gt;&gt;&gt; y = {'b':10, 'c': 11}
&gt;&gt;&gt; z = x.update(y)
&gt;&gt;&gt; print z
None
&gt;&gt;&gt; x
{'a': 1, 'b': 10, 'c': 11}
</code></pre>

<p>How can I get that final merged dict in z, not x?</p>

<p>(To be extra-clear, the last-one-wins conflict-handling of <code>dict.update()</code> is what I'm looking for as well.)</p>
"
39086,4166,2008-09-02T09:19:04Z,170,Search and replace a line in a file in Python,"<p>I want to loop over the contents of a text file and do a search and replace on some lines and write the result back to the file. I could first load the whole file in memory and then write it back, but that probably is not the best way to do it.</p>

<p>What is the best way to do this, within the following code?</p>

<pre><code>f = open(file)
for line in f:
    if line.contains('foo'):
        newline = line.replace('foo', 'bar')
        # how to write this newline back to the file
</code></pre>
"
39104,4198,2008-09-02T09:40:26Z,12,Finding a file in a Python module distribution,"<p>I've written a Python package that includes a bsddb database of pre-computed values for one of the more time-consuming computations.  For simplicity, my setup script installs the database file in the same directory as the code which accesses the database (on Unix, something like /usr/lib/python2.5/site-packages/mypackage/).</p>

<p>How do I store the final location of the database file so my code can access it?  Right now, I'm using a hack based on the <code>__file__</code> variable in the module which accesses the database:</p>

<pre>
dbname = os.path.join(os.path.dirname(__file__), ""database.dat"")
</pre>

<p>It works, but it seems... hackish.  Is there a better way to do this?  I'd like to have the setup script just grab the final installation location from the distutils module and stuff it into a ""dbconfig.py"" file that gets installed alongside the code that accesses the database.</p>
"
39663,2587612,2008-09-02T14:28:40Z,25,What is the best way to do Bit Field manipulation in Python?,"<p>I'm reading some MPEG Transport Stream protocol over UDP and it has some funky bitfields in it (length 13 for example). I'm using the ""struct"" library to do the broad unpacking, but is there a simple way to say ""Grab the next 13 bits"" rather than have to hand-tweak the bit manipulation? I'd like something like the way C does bit fields (without having to revert to C).</p>

<p>Suggestions?</p>
"
39847,1892,2008-09-02T15:46:39Z,2,Using C in a shared multi-platform POSIX environment,"<p>I write tools that are used in a shared workspace. Since there are multiple OS's working in this space, we generally use Python and standardize the version that is installed across machines. However, if I wanted to write some things in C, I was wondering if maybe I could have the application wrapped in a Python script, that detected the operating system and fired off the correct version of the C application. Each platform has GCC available and uses the same shell.</p>

<p>One idea was to have the C compiled to the users local ~/bin, with timestamp comparison with C code so it is not compiled each run, but only when code is updated. Another was to just compile it for each platform, and have the wrapper script select the proper executable.</p>

<p>Is there an accepted/stable process for this? Are there any catches? Are there alternatives (assuming the absolute need to use native C code)?</p>

<p><em>Clarification: Multiple OS's are involved that do not share ABI. Eg. OS X, various Linuxes, BSD etc. I need to be able to update the code in place in shared folders and have the new code working more or less instantaneously. Distributing binary or source packages is less than ideal.</em></p>
"
39929,3002,2008-09-02T16:19:11Z,5,PGP signatures from Python?,"<p>What is the easiest way to create and verify PGP/GPG signatures from within a Python application? </p>

<p>I can call pgp or gpg using subprocess and parse the output, but I was looking for a way that didn't require an external program to be installed (my application is cross-platform mac/windows/unix).</p>
"
39960,208,2008-09-02T16:29:30Z,17,javascript locals()?,"<p>In python one can get a dictionary of all local and global variables in the current scope with the built-in functions locals() and globals().  Is there some equivalent way of doing this in javascript?  For instance, I would like to do something like the following:</p>

<pre><code>var foo = function(){ alert('foo'); };
var bar = function(){ alert('bar'); };

var s = 'foo';
locals()[s](); // alerts 'foo'
</code></pre>

<p>Is this at all possible, or should I just be using a local object for the lookup?</p>
"
40586,116,2008-09-02T20:40:29Z,1,cx_Oracle: how do I get the ORA-xxxxx error number?,"<p>In a try/except block, how do I extract the Oracle error number?</p>
"
40705,3594,2008-09-02T21:21:14Z,12,Python deployment and /usr/bin/env portability,"<p>At the beginning of all my executable Python scripts I put the <a href=""http://en.wikipedia.org/wiki/Shebang_(Unix)"">shebang</a> line:</p>

<pre><code>#!/usr/bin/env python
</code></pre>

<p>I'm running these scripts on a system where <code>env python</code> yields a Python 2.2 environment. My scripts quickly fail because I have a manual check for a compatible Python version:</p>

<pre><code>if sys.version_info &lt; (2, 4):
    raise ImportError(""Cannot run with Python version &lt; 2.4"")
</code></pre>

<p>I don't want to have to change the shebang line on every executable file, if it's possible; however, I don't have administrative access to the machine to change the result of <code>env python</code> and I don't want to force a particular version, as in:</p>

<pre><code>#!/usr/bin/env python2.4
</code></pre>

<p>I'd like to avoid this because system may have a newer version than Python 2.4, or may have Python 2.5 but no Python 2.4.</p>

<p>What's the elegant solution?</p>

<p>[Edit:] I wasn't specific enough in posing the question -- I'd like to let users execute the scripts without manual configuration (e.g. path alteration or symlinking in <code>~/bin</code> and ensuring your PATH has <code>~/bin</code> before the Python 2.2 path). Maybe some distribution utility is required to prevent the manual tweaks?</p>
"
41547,3355,2008-09-03T12:22:44Z,25,Always including the user in the django template context,"<p>I am working on a small intranet site for a small company, where user should be able to post. I have imagined a very simple authentication mechanism where people just enter their email address, and gets sent a unique login url, that sets a cookie that will always identify them for future requests.</p>

<p>In my template setup, I have base.html, and the other pages extend this. I want to show logged in or register button in the base.html, but how can I ensure that the necessary variables are always a part of the context? It seems that each view just sets up the context as they like, and there is no global context population. Is there a way of doing this without including the user in each context creation?</p>

<p>Or will I have to make my own custom shortcuts to setup the context properly?</p>
"
41562,4319,2008-09-03T12:35:45Z,7,How do I do monkeypatching in python?,"<p>I've had to do some introspection in python and it wasn't pretty:</p>

<pre><code>name = sys._getframe(1).f_code
name = ""%s:%d %s()"" %(os.path.split(name.co_filename)[1],name.co_firstlineno,name.co_name)
</code></pre>

<p>To get something like</p>

<pre><code>foo.py:22 bar() blah blah
</code></pre>

<p>In our debugging output.</p>

<p>I'd ideally like to prepend anything to stderr with this sort of information -- 
Is it possible to change the behaviour of print globally within python?</p>
"
41701,4397,2008-09-03T13:48:30Z,12,Splitting tuples in Python - best practice?,"<p>I have a method in my Python code that returns a tuple - a row from a SQL query. Let's say it has three fields: (jobId, label, username)</p>

<p>For ease of passing it around between functions, I've been passing the entire tuple as a variable called 'job'. Eventually, however, I want to get at the bits, so I've been using code like this:
(jobId, label, username) = job</p>

<p>I've realised, however, that this is a maintenance nightmare, because now I can never add new fields to the result set without breaking all of my existing code. How should I have written this?</p>

<p>Here are my two best guesses:
(jobId, label, username) = (job[0], job[1], job[2])
...but that doesn't scale nicely when you have 15...20 fields</p>

<p>or to convert the results from the SQL query to a dictionary straight away and pass that around (I don't have control over the fact that it starts life as a tuple, that's fixed for me)</p>
"
41969,3002,2008-09-03T15:47:23Z,6,Standard way to open a folder window in linux?,"<p>I want to open a folder window, in the appropriate file manager, from within a cross-platform (windows/mac/linux) Python application.</p>

<p>On OSX, I can open a window in the finder with</p>

<pre><code>os.system('open ""%s""' % foldername)
</code></pre>

<p>and on Windows with</p>

<pre><code>os.startfile(foldername)
</code></pre>

<p>What about unix/linux? Is there a standard way to do this or do I have to special case gnome/kde/etc and manually run the appropriate application (nautilus/konqueror/etc)?</p>

<p>This looks like something that could be specified by the <a href=""http://freedesktop.org"">freedesktop.org</a> folks (a python module, similar to <code>webbrowser</code>, would also be nice!).</p>
"
42034,577,2008-09-03T16:13:06Z,25,What is a tuple useful for?,"<p>I am learning Python for a class now, and we just covered tuples as one of the data types. I read the Wikipedia page on it, but, I could not figure out where such a data type would be useful in practice. Can I have some examples, perhaps in Python, where an immutable set of numbers would be needed? How is this different from a list?</p>
"
42482,2678,2008-09-03T20:18:47Z,15,Best way to extract text from a Word doc without using COM/automation?,"<p>Is there a reasonable way to extract plain text from a Word file that doesn't depend on COM automation?  (This is a a feature for a web app deployed on a non-Windows platform - that's non-negotiable in this case.)</p>

<p>Antiword seems like it might be a reasonable option, but it seems like it might be abandoned.</p>

<p>A Python solution would be ideal, but doesn't appear to be available.</p>
"
42581,3594,2008-09-03T21:00:33Z,31,Python re.sub MULTILINE caret match,"<p>The Python docs say:</p>

<blockquote>
  <p>re.MULTILINE: When specified, the pattern character '^' matches at the beginning of the string and at the beginning of each line (immediately following each newline)... By default, '^' matches only at the beginning of the string...</p>
</blockquote>

<p>So what's going on when I get the following unexpected result?</p>

<pre><code>&gt;&gt;&gt; import re
&gt;&gt;&gt; s = """"""// The quick brown fox.
... // Jumped over the lazy dog.""""""
&gt;&gt;&gt; re.sub('^//', '', s, re.MULTILINE)
' The quick brown fox.\n// Jumped over the lazy dog.'
</code></pre>
"
42950,680,2008-09-04T00:54:44Z,306,Get Last Day of the Month in Python,"<p>Is there a way using Python's standard library to easily determine (i.e. one function call) the last day of a given month?</p>

<p>If the standard library doesn't support that, does the dateutil package support this?</p>
"
43099,3830,2008-09-04T02:34:41Z,3,How can I get a commit message from a bzr post-commit hook?,"<p>I'm trying to write a bzr post-commit hook for my private bugtracker, but I'm stuck at the function signature of post_commit(local, master, old_revno, old_revid, new_revno, mew_revid).  How can I extract the commit message for the branch from this with bzrlib in Python?</p>
"
43290,3355,2008-09-04T07:36:39Z,22,How to generate urls in django,"<p>In Django's template language, you can use <code>{% url [viewname] [args] %}</code> to generate a URL to a specific view with parameters. How can you programatically do the same in Python code?</p>

<p>What I need is to create a list of menu items where each item has name, URL, and an active flag  (whether it's the current page or not). This is because it will be a lot cleaner to do this in Python than the template language.</p>
"
43315,2183,2008-09-04T07:59:57Z,78,Can I write native iPhone apps using Python,"<p>Using <a href=""http://pyobjc.sourceforge.net/"">PyObjC</a>, you can use Python to write Cocoa applications for OS X. Can I write native iPhone apps using Python and if so, how?</p>
"
43368,4462,2008-09-04T08:53:58Z,11,A python web application framework for tight DB/GUI coupling?,"<p>I'm a firm believer of the heretic thought of tight coupling between the backend and frontend: I want existing, implied knowledge about a backend to be automatically made use of when generating user interfaces. E.g., if a VARCHAR column has a maximum with of 20 characters, there GUIs should automatically constrain the user from typing more than 20 characters in a related form field.</p>

<p>And I have strong antipathy to ORMs which want to define my database tables, or are based on some hack where every table needs to have extra numeric ID columns because of the ORM.</p>

<p>I've looked a bit into Python database frameworks and I think I can conclude the SQLAlchemy fits best to my mentality.</p>

<p>Now, I need to find a web application framework which fits naturally with SQLAlchemy (or an equivalent) and perhaps even with my appetite for coupling. With ""web application framework"", I mean products/project such as Pyhons, Django, TurboGears, web2py, etc.</p>

<p>E.g., it should ideally be able to:</p>

<ul>
<li><strong>automatically select a suitable form widget</strong> for data entering a given column if told to do so; e.g., if the column has a foreign key to a column with 10 different values, widget should display the 10 possible values as a dropdown</li>
<li><strong>auto-generate javascript form validation code</strong> which gives the end-user quick error feedback if a string is entered into a field which is about to end up in an INTEGER column, etc</li>
<li>auto-generate a <strong>calendar widget</strong> for data which will end up in a DATE column</li>
<li><strong>hint NOT NULL constraints</strong> as javascript which complains about empty or whitespace-only data in a related input field</li>
<li>generate javascript validation code which matches relevant (simple) <strong>CHECK-constraints</strong></li>
<li>make it easy to <strong>avoid SQL injection</strong>, by using prepared statements and/or validation of externally derived data</li>
<li>make it easy to <strong>avoid cross site scripting</strong> by automatically escape outgoing strings when appropriate</li>
<li><strong>make use of constraint names</strong> to generate somewhat user friendly error messages in case a constrataint is violated</li>
</ul>

<p>All this should happen dynamically, so table adjustments are automatically reflected on the frontend - probably with a caching mechanism, so that all the model introspection wouldn't kill performance. In other words, I don't want to repeat my model definition in an XML file (or alike) when it has already been carefully been defined in my database.</p>

<p>Does such a framework exist for Python (or for any language, for that matter)? If not: Which of the several Python web application frameworks will be least in the way if I were to add parts of the above features myself?</p>
"
43580,2260,2008-09-04T12:07:27Z,101,How to find the mime type of a file in python?,"<p>Let's say you want to save a bunch of files somewhere, for instance in BLOBs. Let's say you want to dish these files out via a web page and have the client automatically open the correct application/viewer.</p>

<p>Assumption: The browser figures out which application/viewer to use by the mime-type (content-type?) header in the HTTP response.</p>

<p>Based on that assumption, in addition to the bytes of the file, you also want to save the MIME type.</p>

<p>How would you find the MIME type of a file? I'm currently on a Mac, but this should also work on Windows. </p>

<p>Does the browser add this information when posting the file to the web page?</p>

<p>Is there a neat python library for finding this information? A WebService or (even better) a downloadable database?</p>
"
43709,2239,2008-09-04T13:00:13Z,24,Pros and Cons of different approaches to web programming in Python,"<p>I'd like to do some server-side scripting using Python. But I'm kind of lost with the number of ways to do that.</p>

<p>It starts with the do-it-yourself CGI approach and it seems to end with some pretty robust frameworks that would basically do all the job themselves. And a huge lot of stuff in between, like <a href=""http://webpy.org/"">web.py</a>, <a href=""http://pyroxide.org/"">Pyroxide</a> and <a href=""http://wiki.python.org/moin/Django"">Django</a>.</p>

<ul>
<li>What are the <strong>pros</strong> and <strong>cons</strong> of the frameworks or approaches that <em>you've worked on</em>?</li>
<li>What <strong>trade-offs</strong> are there?</li>
<li>For <strong>what kind of projects</strong> they do well and for what they don't?</li>
</ul>

<p>Edit: I haven't got much experience with web programing yet.<br />
I would like to avoid the basic and tedious things like parsing the URL for parameters, etc.<br />
On the other hand, while the video of <a href=""http://www.rubyonrails.org/screencasts"">blog created in 15 minutes</a> with <a href=""http://www.rubyonrails.org/"">Ruby on Rails</a> left me impressed, I realized that there were hundreds of things hidden from me - which is cool if you need to write a working webapp in no time, but not that great for really understanding the magic - and that's what I seek now.</p>
"
43775,1876,2008-09-04T13:36:46Z,14,Modulus operation with negatives values - weird thing?,"<p>Can you please tell me how much is <code>(-2) % 5</code>?
According to my Python interpreter is 3, but do you have a wise explanation for this?</p>

<p>I've read that in some languages the result can be machine-dependent, but I'm not sure though.</p>
"
44084,1679,2008-09-04T16:06:48Z,31,How do I document a module in Python?,"<p>That's it. If you want to document a function or a class, you put a string just after the definition. For instance:</p>

<pre><code>def foo():
    """"""This function does nothing.""""""
    pass
</code></pre>

<p>But what about a module? How can I document what a <em>file.py</em> does?</p>
"
44352,NA,2008-09-04T18:05:23Z,15,Iterate over subclasses of a given class in a given module,"<p>In Python, given a module X and a class Y, how can I iterate or generate a list of all subclasses of Y that exist in module X?</p>
"
44778,4285,2008-09-04T21:04:04Z,180,How would you make a comma-separated string from a list?,"<p>What would be your preferred way to concatenate strings from a sequence such that between each two consecutive pair a comma is added. That is, how do you map, for instance, <code>[ 'a', 'b', 'c' ]</code> to <code>'a,b,c'</code>? (The cases <code>[ s ]</code> and <code>[]</code> should be mapped to <code>s</code> and <code>''</code>, respectively.)</p>

<p>I usually end up using something like <code>''.join(map(lambda x: x+',',l))[:-1]</code>, but also feeling somewhat unsatisfied.</p>

<p>Edit: I'm both ashamed and happy that the solution is so simple. Obviously I have hardly a clue as to what I'm doing. (I probably needed ""simple"" concatenation in the past and somehow memorised <code>s.join([e1,e2,...])</code> as a shorthand for <code>s+e1+e2+...</code>.)</p>
"
44834,1794,2008-09-04T21:28:18Z,409,Can someone explain __all__ in Python?,"<p>I have been using Python more and more, and I keep seeing the variable <code>__all__</code> set in different <code>__init__.py</code> files.  Can someone explain what this does?</p>
"
45013,2168,2008-09-05T00:10:37Z,1,Can the HTTP version or headers affect the visual appearance of a web page?,"<p>I know, I would have thought the answer was obviously ""no"" as well, but I am experiencing a strange situation where when I view my site from our staging server it appears slightly larger than when I view it from my local dev server.  I have used Charles to confirm that all of the content -- the HTML, the images, the CSS, the javascript, <strong>everything</strong> is the same.</p>

<p>The ONLY difference in the traffic is that (because the local site is served from the Django development mode server) the response headers look like this:</p>

<pre><code>HTTP/1.0 200 OK
Server  WSGIServer/0.1 Python/2.5.2
Date    Thu, 04 Sep 2008 23:56:10 GMT 
Vary    Cookie
Content-Length  2301
Content-Type    text/html; charset=utf-8
</code></pre>

<p>Whereas on the staging server (where Django is running inside Apache) the headers look like this:</p>

<pre><code>HTTP/1.1 200 OK
Date    Thu, 04 Sep 2008 23:56:06 GMT
Server  Apache/2.2.8 (Ubuntu) mod_python/3.3.1 Python/2.5.2 PHP/5.2.4-2ubuntu5 with Suhosin-Patch
Vary    Cookie
Content-Length  2301
Content-Type    text/html; charset=utf-8
</code></pre>

<p>So, as far as I can tell the only differences are HTTP/1.1 vs HTTP/1.0, the server identifer (Apache vs WSGIServer) and the order of the Date/Server headers.</p>

<p>To elaborate a bit further on the differences in appearance, basically it appears as if the version of the site on the staging server is ""zoomed in"" by about 10%.  For example, the primary logo which dominates our home page is 220 pixels wide but when server from our staging server shows up as 245 pixels wide.  Everything else on the page, (other images, text, spacing, etc) is also proportionately larger.</p>

<p>This is all in Firefox 3.  I don't have any other browsers available to test with at the moment.</p>

<p>Has anyone else encountered any bizarre behavior anything like this before?  I am at a loss.</p>
"
45122,1914,2008-09-05T02:15:33Z,35,"Python packages - import by class, not file","<p>Say I have the following file structure:</p>

<pre><code>app/
  app.py
  controllers/
    __init__.py
    project.py
    plugin.py
</code></pre>

<p>If app/controllers/project.py defines a class Project, app.py would import it like this:</p>

<pre><code>from app.controllers.project import Project
</code></pre>

<p>I'd like to just be able to do:</p>

<pre><code>from app.controllers import Project
</code></pre>

<p>How would this be done?</p>
"
45228,1114,2008-09-05T04:27:46Z,14,Where can I find the time and space complexity of the built-in sequence types in Python,"<p>I've been unable to find a source for this information, short of looking through the Python source code myself to determine how the objects work. Does anyone know where I could find this online?</p>
"
45500,NA,2008-09-05T10:13:16Z,7,Wacom tablet Python interface,"<p>If possible I want to catch pressure sensitive input from a Wacom tablet in Python. Are there any Python libraries available that can do this?</p>
"
45507,4203,2008-09-05T10:26:47Z,11,Is there a Python library for generating .ico files?,"<p>I'm looking to create <code>favicon.ico</code> files programatically from Python, but PIL only has support for reading <code>ico</code> files.</p>
"
45540,4717,2008-09-05T11:07:06Z,5,How to know whether a window with a given title is already open in Tk?,"<p>I’ve writen a little python script that just pops up a message box containing the text passed on the command line. I want to pop it up only when the window —resulting from a previous call— is not open.</p>

<pre><code>from Tkinter import *
import tkMessageBox

root = Tk()
root.withdraw() 

# TODO not if a window with this title exists
tkMessageBox.showinfo(""Key you!"", "" "".join(sys.argv[1:]))
</code></pre>

<p>Any idea how to check that?</p>
"
45954,4761,2008-09-05T14:44:25Z,10,Analizing MIPS binaries: is there a Python library for parsing binary data?,"<p>I'm working on a utility which needs to resolve hex addresses to a symbolic function name and source code line number within a binary. The utility will run on Linux on x86, though the binaries it analyzes will be for a MIPS-based embedded system. The MIPS binaries are in ELF format, using DWARF for the symbolic debugging information.</p>

<p>I'm currently planning to fork objdump, passing in a list of hex addresses and parsing the output to get function names and source line numbers. I have compiled an objdump with support for MIPS binaries, and it is working.</p>

<p>I'd prefer to have a package allowing me to look things up natively from the Python code without forking another process. I can find no mention of libdwarf, libelf, or libbfd on python.org, nor any mention of python on dwarfstd.org.</p>

<p>Is there a suitable module available somewhere?</p>
"
47198,680,2008-09-06T02:22:50Z,14,Which Version of Python to Use for Maximum Compatibility,"<p>If I was going to start an open source project using Python what version should I use to ensure that the vast majority of users can use it on their system?</p>

<p>I'm the kind of person who quickly jumps to the next version (which I'll do when Python 3 comes out) but many people may be more conservative if their current version seems to be working fine. What version would hit the sweet spot but still allow me to enjoy the newest and coolest language enhancements?</p>
"
47207,2592,2008-09-06T02:42:49Z,7,Django: Print url of view without hardcoding the url,"<p>Can i print out a url <code>/admin/manage/products/add</code> of a certain view in a template?</p>

<p>Here is the rule i want to create a link for</p>

<pre><code>(r'^manage/products/add/$', create_object, {'model': Product, 'post_save_redirect': ''}),
</code></pre>

<p>I would like to have /manage/products/add in a template without hardcoding it. How can i do this?</p>

<p><strong>Edit:</strong> I am not using the default admin (well, i am but it is at another url), this is my own</p>
"
47253,4491,2008-09-06T04:26:49Z,22,How do you set up a python wsgi server under IIS?,"<p>I work in a windows environment and would prefer to deploy code to IIS. At the same time I would like to code in python.</p>

<p>Having read that IIS can run fastCGI application, I went to the IIS site where it describes in detail how to get PHP up and running but not much about anything else.</p>

<p>Does anyone have experience getting a <strong>Python</strong> framework <strong>running under IIS</strong> using something other that plain old CGI?</p>

<p>If so can you explain to direct me to some instructions on setting this up?</p>
"
47701,4883,2008-09-06T18:14:05Z,24,Is there a way to attach a debugger to a multi-threaded Python process?,"<p>I'm trying to debug a deadlock in a multi-threaded Python application after it has locked up.  Is there a way to attach a debugger to inspect the state of the process?  </p>

<p>Edit: I'm attempting this on Linux, but it would be great if there were a cross-platform solution.  It's Python after all :)</p>
"
47789,4883,2008-09-06T20:07:59Z,213,Generator Expressions vs. List Comprehension,"<p>When should you use generator expressions and when should you use list comprehensions in Python?</p>

<pre><code># Generator expression
(x*2 for x in range(256))

# List comprehension
[x*2 for x in range(256)]
</code></pre>
"
47801,1448,2008-09-06T20:17:45Z,6,User Authentication in Pylons + AuthKit,"<p>I am trying to create a web application using Pylons and the resources on the web point to the <a href=""http://pylonsbook.com/alpha1/authentication_and_authorization"">PylonsBook</a> page which isn't of much help. I want authentication and authorisation and is there anyway to setup Authkit to work easily with Pylons?</p>

<p>I tried downloading the <a href=""http://pypi.python.org/pypi/SimpleSiteTemplate/"">SimpleSiteTemplate</a> from the cheeseshop but wasn't able to run the setup-app command. It throws up an error:</p>

<pre><code>  File ""/home/cnu/env/lib/python2.5/site-packages/SQLAlchemy-0.4.7-py2.5.egg/sqlalchemy/schema.py"", line 96, in __call__
    table = metadata.tables[key]
AttributeError: 'module' object has no attribute 'tables'
</code></pre>

<p>I use Pylons 0.9.7rc1, SQLAlchemy 0.4.7, Authkit 0.4.</p>
"
47953,4491,2008-09-06T23:35:30Z,23,What are the advantages of packaging your python library/application as an .egg file?,"<p>I've read some about .egg files and I've noticed them in my lib directory but what are the advantages/disadvantages of using then as a developer?</p>
"
48123,802,2008-09-07T04:00:41Z,27,Glade or no glade: What is the best way to use PyGtk?,"<p>I've been learning python for a while now with some success. I even managed to create one or two (simple) programs using PyGtk + Glade.</p>

<p>The thing is: I am not sure if the best way to use GTK with python is by building the interfaces using Glade.</p>

<p>I was wondering if the more experienced ones among us (remember, I'm just a beginner) could point out the benefits and caveats of using Glade as opposed to creating everything in the code itself (assuming that learning the correct gtk bindings wouldn't exactly be a problem).</p>
"
48176,4883,2008-09-07T05:21:42Z,5,Embedding a remote Python shell in an application,"<p>You can embed the <a href=""http://ipython.scipy.org/"">IPython</a> shell inside of your application so that it launches the shell in the foreground.  Is there a way to embed a telnet server in a python app so that you can telnet to a certain port and launch a remote IPython shell?  </p>

<p>Any tips for redirecting the input/output streams for IPython or how to hook it up to a telnet server library or recommendations for other libraries that could be used to implement this are much appreciated.  </p>
"
48458,96,2008-09-07T14:08:47Z,112,Project structure for Google App Engine,"<p>I started an application in Google App Engine right when it came out, to play with the technology and work on a pet project that I had been thinking about for a long time but never gotten around to starting.  The result is <a href=""http://www.bowlsk.com"" rel=""nofollow"">BowlSK</a>.  However, as it has grown, and features have been added, it has gotten really difficult to keep things organized - mainly due to the fact that this is my first python project, and I didn't know anything about it until I started working.</p>

<p>What I have:</p>

<ul>
<li>Main Level contains:

<ul>
<li>all .py files (didn't know how to make packages work)</li>
<li>all .html templates for main level pages</li>
</ul></li>
<li>Subdirectories:

<ul>
<li>separate folders for css, images, js, etc.</li>
<li>folders that hold .html templates for subdirecty-type urls</li>
</ul></li>
</ul>

<p>Example:<br/>
<a href=""http://www.bowlsk.com/"" rel=""nofollow"">http://www.bowlsk.com/</a> maps to HomePage (default package), template at ""index.html""<br/>
<a href=""http://www.bowlsk.com/games/view-series.html?series=7130"" rel=""nofollow"">http://www.bowlsk.com/games/view-series.html?series=7130</a> maps to ViewSeriesPage (again, default package), template at ""games/view-series.html""</p>

<p>It's nasty.  How do I restructure?  I had 2 ideas:</p>

<ul>
<li><p>Main Folder containing: appdef, indexes, main.py?</p>

<ul>
<li>Subfolder for code.  Does this have to be my first package?</li>
<li>Subfolder for templates.  Folder heirarchy would match package heirarchy</li>
<li>Individual subfolders for css, images, js, etc.</li>
</ul></li>
<li><p>Main Folder containing appdef, indexes, main.py?</p>

<ul>
<li>Subfolder for code + templates.  This way I have the handler class right next to the template, because in this stage, I'm adding lots of features, so modifications to one mean modifications to the other.  Again, do I have to have this folder name be the first package name for my classes?  I'd like the folder to be ""src"", but I don't want my classes to be ""src.WhateverPage""</li>
</ul></li>
</ul>

<p>Is there a best practice?  With Django 1.0 on the horizon, is there something I can do now to improve my ability to integrate with it when it becomes the official GAE templating engine?  I would simply start trying these things, and seeing which seems better, but pyDev's refactoring support doesn't seem to handle package moves very well, so it will likely be a non-trivial task to get all of this working again.</p>
"
48562,5060,2008-09-07T16:32:55Z,7,How do I implement a pre-commit hook script in SVN that calls dos2unix to validate checked-in file,"<p>I was wondering if anyone here had some experience writing this type of script and if they could give me some pointers.</p>

<p>I would like to modify this <a href=""http://wordaligned.org/articles/a-subversion-pre-commit-hook"" rel=""nofollow"">script</a> to validate that the check-in file does not have a Carriage Return in the EOL formatting. The EOL format is CR LF in Windows and LF in Unix. When a User checks-in code with the Windows format. It does not compile in Unix anymore. I know this can be done on the client side but I need to have this validation done on the server side. To achieve this, I need to do the following:</p>

<p>1) Make sure the file I check is not a binary, I dont know how to do this with svnlook, should I check the mime:type of the file? The <a href=""http://svnbook.red-bean.com/nightly/en/svn.reposadmin.create.html"" rel=""nofollow"">Red Book</a> does not indicate this clearly or I must have not seen it.</p>

<p>2) I would like to run the <a href=""http://linux.about.com/od/commands/l/blcmdl1_dos2uni.htm"" rel=""nofollow"">dos2unix</a> command to validate that the file has the correct EOL format. I would compare the output of the dos2unix command against the original file. If there is a diff between both, I give an error message to the client and cancel the check-in.</p>

<p>I would like your comments/feedback on this approach.</p>
"
48777,422,2008-09-07T20:57:16Z,2,Python: No module named core.exceptions,"<p>I'm trying to get Google AppEngine to work on my Debian box and am getting the following error when I try to access my page:</p>

<pre><code>&lt;type 'exceptions.ImportError'&gt;: No module named core.exceptions
</code></pre>

<p>The same app works fine for me when I run it on my other Ubuntu box, so I know it's not a problem with the app itself. However, I need to get it working on this Debian box. It originally had python 2.4 but after AppEngine complained about it I installed the python2.5 and python2.5-dev packages (to no avail). </p>

<p>I saw on this <a href=""http://groups.google.com/group/google-appengine/browse_thread/thread/8f2459d2df9d735a/df2b1e9bb76f87c0?show_docid=df2b1e9bb76f87c0&amp;fwc=1"" rel=""nofollow"">Google Group post</a> that it may be due to the version of AppEngine and just to reinstall it, but that didn't work. Any ideas?</p>

<p>Edit 1: Also tried uninstalling python2.4 and 2.5 then reinstalling 2.5, which also didn't work.</p>

<p>Edit 2: Turns out when I made AppEngine into a CVS project it didn't add the core directory into my project, so when I checked it out there literally was no module named core.exceptions. Re-downloading that folder resolved the problem.</p>
"
49137,3153,2008-09-08T03:53:39Z,18,Calling python from a c++ program for distribution,"<p>I would like to call python script files from my c++ program. </p>

<p>I am not sure that the people I will distribute to will have python installed.</p>

<p>Basically I'm looking for a .lib file that I can use that has an Apache like distribution license.</p>
"
49164,4491,2008-09-08T04:21:22Z,13,How do I turn a python program into an .egg file?,"<p>How do I turn a python program into an .egg file?</p>
"
49307,5148,2008-09-08T08:25:55Z,7,Can parallel traversals be done in MATLAB just as in Python?,"<p>Using the <code>zip</code> function, Python allows for loops to traverse multiple sequences in parallel.  </p>

<p><code>for (x,y) in zip(List1, List2):</code></p>

<p>Does MATLAB have an equivalent syntax? If not, what is the best way to iterate over two parallel arrays at the same time using MATLAB?</p>
"
49455,4966,2008-09-08T10:55:13Z,1,"How does one decrypt a PDF with an owner password, but no user password?","<p>Although the <a href=""http://www.adobe.com/devnet/pdf/pdf_reference.html"" rel=""nofollow"">PDF specification</a> is available from Adobe, it's not exactly the simplest document to read through.  PDF allows documents to be encrypted so that either a user password and/or an owner password is required to do various things with the document (display, print, etc).  A common use is to lock a PDF so that end users can read it without entering any password, but a password is required to do anything else.</p>

<p>I'm trying to parse PDFs that are locked in this way (to get the same privileges as you would get opening them in any reader).  Using an empty string as the user password doesn't work, but it seems (section 3.5.2 of the spec) that there has to be a user password to create the hash for the admin password.</p>

<p>What I would like is either an explanation of how to do this, or any code that I can read (ideally Python, C, or C++, but anything readable will do) that does this so that I can understand what I'm meant to be doing.  Standalone code, rather than reading through (e.g.) the gsview source, would be best.</p>
"
49824,4223,2008-09-08T14:36:24Z,23,Java -> Python?,"<p>Besides the dynamic nature of Python (and the syntax), what are some of the major features of the Python language that Java doesn't have, and vice versa?</p>
"
49926,3002,2008-09-08T15:19:59Z,22,Open source alternative to MATLAB's fmincon function?,"<p>Is there an open-source alternative to MATLAB's <a href=""http://www.mathworks.com/access/helpdesk/help/toolbox/optim/index.html?/access/helpdesk/help/toolbox/optim/ug/fmincon.html""><code>fmincon</code></a> function for constrained linear optimization? I'm rewriting a MATLAB program to use Python / <a href=""http://numpy.scipy.org/"">NumPy</a> / <a href=""http://www.scipy.org/"">SciPy</a> and this is the only function I haven't found an equivalent to. A NumPy-based solution would be ideal, but any language will do.</p>
"
50394,4172,2008-09-08T18:43:52Z,7,What Python way would you suggest to check whois database records?,"<p>I'm trying to get a webservice up and running that actually requires to check whois databases. What I'm doing right now is ugly and I'd like to avoid it as much as I can: I call gwhois command and parse its output. Ugly.</p>

<p>I did some search to try to find a pythonic way to do this task. Generally I got quite much nothing - <a href=""http://mail.python.org/pipermail/python-list/2000-March/028122.html"">this old discussion list link</a> has a way to check if domain exist. Quite not what I was looking for... But still, it was best anwser Google gave me - everything else is just a bunch of unanwsered questions.</p>

<p>Any of you have succeeded to get some method up and running? I'd very much appreciate some tips, or should I just do it the opensource-way, sit down and code something by myself? :) </p>
"
50499,4872,2008-09-08T19:41:10Z,262,How do I get the path and name of the file that is currently executing?,"<p>I have scripts calling other script files but I need to get the filepath of the file that is currently running within the process. </p>

<p>For example, let's say I have three files. Using <a href=""http://docs.python.org/library/functions.html#execfile"">execfile</a>:</p>

<ul>
<li><code>script_1.py</code> calls <code>script_2.py</code>. </li>
<li>In turn, <code>script_2.py</code> calls <code>script_3.py</code>. </li>
</ul>

<p>How can I get the file name and path of <strong><code>script_3.py</code></strong>, <em>from code within <code>script_3.py</code></em>, without having to pass that information as arguments from <code>script_2.py</code>?</p>

<p>(Executing <code>os.getcwd()</code> returns the original starting script's filepath not the current file's.)</p>
"
50568,4072,2008-09-08T20:16:16Z,34,Django Sessions,"<p>I'm looking at sessions in Django, and by default they are stored in the database.  What are the benefits of filesystem and cache sessions and when should I use them?</p>
"
50923,4883,2008-09-08T23:10:53Z,4,How do you create a weak reference to an object in Python?,"<p>How do you create a weak reference to an object in Python?  </p>
"
51010,5304,2008-09-09T00:28:58Z,9,What is the simplest way to find the difference between 2 times in python?,"<p>I have 2 time values which have the type <code>datetime.time</code>. I want to find their difference. The obvious thing to do is t1 - t2, but this doesn't work. It works for objects of type <code>datetime.datetime</code> but not for <code>datetime.time</code>. So what is the best way to do this?</p>
"
51212,2386,2008-09-09T04:09:15Z,41,How to write a download progress indicator in Python?,"<p>I am writing a little application to download files over http (as, for example, described <a href=""http://stackoverflow.com/questions/22676/how-do-i-download-a-file-over-http-using-python#22776"" rel=""nofollow"">here</a>).</p>

<p>I also want to include a little download progress indicator showing the percentage of the download progress.</p>

<p>Here is what I came up with:</p>

<pre>
    sys.stdout.write(rem_file + ""..."")    
    urllib.urlretrieve(rem_file, loc_file, reporthook=dlProgress)

    def dlProgress(count, blockSize, totalSize):
      percent = int(count*blockSize*100/totalSize)
      sys.stdout.write(""%2d%%"" % percent)
      sys.stdout.write(""\b\b\b"")
      sys.stdout.flush()
</pre>

<p>Output: MyFileName... 9%</p>

<p>Any other ideas or recommendations to do this? </p>

<p>One thing that's somewhat annoying is the blinking cursor in the terminal on the first digit of the percentage. Is there a way to prevent this? Is there a way to hide the cursor?</p>

<p><strong>EDIT:</strong></p>

<p>Here a better alternative using a global variable for the filename in dlProgress and the '\r' code:</p>

<pre>
    global rem_file # global variable to be used in dlProgress

    urllib.urlretrieve(rem_file, loc_file, reporthook=dlProgress)

    def dlProgress(count, blockSize, totalSize):
      percent = int(count*blockSize*100/totalSize)
      sys.stdout.write(""\r"" + rem_file + ""...%d%%"" % percent)
      sys.stdout.flush()
</pre>

<p>Output: MyFileName...9% </p>

<p>And the cursor shows up at the END of the line. Much better.</p>
"
51233,2386,2008-09-09T04:38:55Z,44,How can I retrieve the page title of a webpage using Python?,"<p>How can I retrieve the page title of a webpage (title html tag) using Python?</p>
"
51412,3355,2008-09-09T08:46:51Z,11,Passing on named variable arguments in python,"<p>Say I have the following methods:</p>

<pre><code>def methodA(arg, **kwargs):
    pass

def methodB(arg, *args, **kwargs):
    pass
</code></pre>

<p>In methodA I wish to call methodB, passing on the kwargs. However, it seems that if I define <code>methodA</code> as follows, the second argument will be passed on as positional rather than named variable arguments.</p>

<pre><code>def methodA(arg, **kwargs):
    methodB(""argvalue"", kwargs)
</code></pre>

<p>How do I make sure that the **kwargs in methodA gets passed as **kwargs to methodB?</p>
"
51502,5342,2008-09-09T10:05:36Z,2,Improving Python readability?,"<p>I've been really enjoying Python programming lately. I come from a background of a strong love for C-based coding, where everything is perhaps more complicated than it should be (but puts hair on your chest, at least). So switching from C to Python for more complex things that don't require tons of speed has been more of a boon than a bane in writing projects.</p>

<p>However, coming from this land of brackets and parentheses and structs as far as the naked eye can see, I come across a small problem: I find Python difficult to read.</p>

<p>For example, the following block of text is hard for me to decipher unless I stare at it (which I dislike doing):</p>

<pre><code>if foo:
   bar = baz
   while bar not biz:
      bar = i_am_going_to_find_you_biz_i_swear_on_my_life()

did_i_not_warn_you_biz()
my_father_is_avenged()
</code></pre>

<p>The problem occurs at the end of that if block: all the tabbing and then suddenly returning to a jarring block feels almost disturbing. As a solution, I've started coding my Python like this:</p>

<pre><code>if foo:
   bar = baz
   while bar not biz:
      bar = i_am_going_to_find_you_biz_i_swear_on_my_life()
   #-- while --
#-- if --

did_i_not_warn_you_biz()
my_father_is_avenged()
</code></pre>

<p>And this, for some odd reason, makes me more able to read my own code. But I'm curious: has anyone else with my strange problem found easier ways to make their tabbed-out code more readable? I'd love to find out if there's a better way to do this before this becomes a huge habit for me.</p>
"
51520,974,2008-09-09T10:19:32Z,308,How to get an absolute file path in Python,"<p>Given a path such as <code>""mydir/myfile.txt""</code>, how do I find the absolute filepath relative to the current working directory in Python? E.g. on Windows, I might end up with:</p>

<pre><code>""C:/example/cwd/mydir/myfile.txt""
</code></pre>
"
51553,5357,2008-09-09T10:33:39Z,11,Why are SQL aggregate functions so much slower than Python and Java (or Poor Man's OLAP),"<p>I need a real DBA's opinion. Postgres 8.3 takes 200 ms to execute this query on my Macbook Pro while Java and Python perform the same calculation in under 20 ms (350,000 rows):</p>

<pre><code>SELECT count(id), avg(a), avg(b), avg(c), avg(d) FROM tuples;
</code></pre>

<p>Is this normal behaviour when using a SQL database?</p>

<p>The schema (the table holds responses to a survey):</p>

<pre><code>CREATE TABLE tuples (id integer primary key, a integer, b integer, c integer, d integer);

\copy tuples from '350,000 responses.csv' delimiter as ','
</code></pre>

<p>I wrote some tests in Java and Python for context and they crush SQL (except for pure python):</p>

<pre><code>java   1.5 threads ~ 7 ms    
java   1.5         ~ 10 ms    
python 2.5 numpy   ~ 18 ms  
python 2.5         ~ 370 ms
</code></pre>

<p>Even sqlite3 is competitive with Postgres despite it assumping all columns are strings (for contrast: even using just switching to numeric columns instead of integers in Postgres results in 10x slowdown)</p>

<p>Tunings i've tried without success include (blindly following some web advice):</p>

<pre><code>increased the shared memory available to Postgres to 256MB    
increased the working memory to 2MB
disabled connection and statement logging
used a stored procedure via CREATE FUNCTION ... LANGUAGE SQL
</code></pre>

<p>So my question is, is my experience here normal, and this is what I can expect when using a SQL database?  I can understand that ACID must come with costs, but this is kind of crazy in my opinion.  I'm not asking for realtime game speed, but since Java can process millions of doubles in under 20 ms, I feel a bit jealous. </p>

<p>Is there a better way to do simple OLAP on the cheap (both in terms of money and server complexity)?  I've looked into Mondrian and Pig + Hadoop but not super excited about maintaining yet another server application and not sure if they would even help.</p>

<hr>

<p>No the Python code and Java code do all the work in house so to speak.  I just generate 4 arrays with 350,000 random values each, then take the average.  I don't include the generation in the timings, only the averaging step.  The java threads timing uses 4 threads (one per array average), overkill but it's definitely the fastest.</p>

<p>The sqlite3 timing is driven by the Python program and is running from disk (not :memory:)</p>

<p>I realize Postgres is doing much more behind the scenes, but most of that work doesn't matter to me since this is read only data.</p>

<p>The Postgres query doesn't change timing on subsequent runs.</p>

<p>I've rerun the Python tests to include spooling it off the disk.  The timing slows down considerably to nearly 4 secs.  But I'm guessing that Python's file handling code is pretty much in C (though maybe not the csv lib?) so this indicates to me that Postgres isn't streaming from the disk either (or that you are correct and I should bow down before whoever wrote their storage layer!)</p>
"
51658,NA,2008-09-09T11:36:39Z,56,Cross-platform space remaining on volume using python,"<p>I need a way to determine the space remaining on a disk volume using python on linux, Windows and OS X. I'm currently parsing the output of the various system calls (df, dir) to accomplish this - is there a better way?</p>
"
53027,1384652,2008-09-09T22:15:09Z,3,Large Python Includes,"<p>I have a file that I want to include in Python but the included file is fairly long and it'd be much neater to be able to split them into several files but then I have to use several include statements.</p>

<p>Is there some way to group together several files and include them all at once?</p>
"
53162,4872,2008-09-09T23:45:30Z,535,How can I do a line break (line continuation) in Python?,"<p>I have a long line of code that I want to break up among multiple lines. What do I use and what is the syntax?</p>

<p>For example, adding a bunch of strings,</p>

<pre><code>e = 'a' + 'b' + 'c' + 'd'
</code></pre>

<p>and have it like this:</p>

<pre><code>e = 'a' + 'b' +
    'c' + 'd'
</code></pre>
"
53225,4883,2008-09-10T00:31:11Z,22,How do you check whether a python method is bound or not?,"<p>Given a reference to a method, is there a way to check whether the method is bound to an object or not?  Can you also access the instance that it's bound to?</p>
"
53513,4872,2008-09-10T06:20:11Z,1615,Best way to check if a list is empty,"<p>For example, if passed the following:</p>

<pre><code>a = []
</code></pre>

<p>How do I check to see if <code>a</code> is empty?</p>
"
53543,4491,2008-09-10T07:04:43Z,15,"What are some strategies to write python code that works in CPython, Jython and IronPython","<p>Having tries to target two of these environments at the same time I can safely say the if you have to use a database etc. you end up having to write unique code for that environment. Have you got a great way to handle this situation?</p>
"
53786,5357,2008-09-10T11:16:30Z,3,How do i generate a histogram for a given probability distribution (for functional testing a server)?,"<p>I am trying to automate functional testing of a server using a realistic frequency distribution of requests. (sort of load testing, sort of simulation)</p>

<p>I've chosen the <a href=""http://en.wikipedia.org/wiki/Weibull_distribution"" rel=""nofollow"">Weibull</a> distribution as it ""sort of"" matches the distribution I've observed (ramps up quickly, drops off quickly but not instantly)</p>

<p>I use this distribution to generate the number of requests that should be sent each day between a given start and end date</p>

<p>I've hacked together an algorithm in Python that sort of works but it feels kludgy:</p>

<pre><code>how_many_days = (end_date - start_date).days
freqs = defaultdict(int)
for x in xrange(how_many_responses):
    freqs[int(how_many_days * weibullvariate(0.5, 2))] += 1
timeline = []
day = start_date
for i,freq in sorted(freqs.iteritems()):
    timeline.append((day, freq))
    day += timedelta(days=1)
return timeline
</code></pre>

<p>What better ways are there to do this? </p>
"
53997,3834,2008-09-10T13:12:07Z,12,Any good AJAX framework for Google App Engine apps?,"<p>I am trying to implement AJAX in my Google App Engine application, and so I am looking for a good AJAX framework that will help me. Anyone has any idea?</p>

<p>I am thinking about Google Web Toolkit, how good it is in terms of creating AJAX for Google App Engine?</p>
"
54867,4883,2008-09-10T18:01:27Z,604,What is the difference between old style and new style classes in Python?,"<p>What is the difference between old style and new style classes in Python?  Is there ever a reason to use old-style classes these days?</p>
"
55180,4872,2008-09-10T20:05:25Z,11,"In Python, how can you easily retrieve sorted items from a dictionary?","<p>Dictionaries unlike lists are not ordered (and do not have the 'sort' attribute). Therefore, you can not rely on getting the items in the same order when first added. </p>

<p>What is the easiest way to loop through a dictionary containing strings as the key value and retrieving them in ascending order by key?</p>

<p>For example, you had this:</p>

<pre><code>d = {'b' : 'this is b', 'a': 'this is a' , 'c' : 'this is c'}
</code></pre>

<p>I want to print the associated values in the following sequence sorted by key:</p>

<pre><code>this is a
this is b
this is c
</code></pre>
"
55365,4872,2008-09-10T21:32:47Z,4,How can I get Emacs' key bindings in Python's IDLE?,"<p>I use Emacs primarily for coding Python but sometimes I use IDLE. Is there a way to change the key bindings easily in IDLE to match Emacs?</p>
"
55391,5675,2008-09-10T21:49:53Z,9,Python regular expression for HTML parsing (BeautifulSoup),"<p>I want to grab the value of a hidden input field in HTML.</p>

<pre><code>&lt;input type=""hidden"" name=""fooId"" value=""12-3456789-1111111111"" /&gt;
</code></pre>

<p>I want to write a regular expression in Python that will return the value of fooId, given that I know the line in the HTML follows the format</p>

<pre><code>&lt;input type=""hidden"" name=""fooId"" value=""**[id is here]**"" /&gt;
</code></pre>

<p>Can someone provide an example in Python to parse the HTML for the value?</p>
"
56229,5190,2008-09-11T10:35:37Z,34,XML writing tools for Python,"<p>I'm currently trying ElementTree and it looks fine, it escapes HTML entities and so on and so forth. Am I missing something truly wonderful I haven't heard of?</p>

<p>This is similar to what I'm actually doing:</p>

<pre><code>import xml.etree.ElementTree as ET
root = ET.Element('html')
head = ET.SubElement(root,'head')
script = ET.SubElement(head,'script')
script.set('type','text/javascript')
script.text = ""var a = 'I love &amp;aacute; letters'""
body = ET.SubElement(root,'body')
h1 = ET.SubElement(body,'h1')
h1.text = ""And I like the fact that 3 &gt; 1""
tree = ET.ElementTree(root)
tree.write('foo.xhtml')

# more foo.xhtml
&lt;html&gt;&lt;head&gt;&lt;script type=""text/javascript""&gt;var a = 'I love &amp;amp;aacute;
letters'&lt;/script&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;And I like the fact that 3 &amp;gt; 1&lt;/h1&gt;
&lt;/body&gt;&lt;/html&gt;
</code></pre>
"
56417,3497,2008-09-11T12:29:09Z,18,Anyone used Dabo for a medium-big project?,"<p>We're at the beginning of a new ERP-ish client-server application, developed as a Python rich client.  We're currently evaluating Dabo as our main framework and it looks quite nice and easy to use, but I was wondering, has anyone used it for medium-to-big sized projects?<br />
Thanks for your time!</p>
"
56820,736,2008-09-11T15:08:09Z,71,round() in Python doesn't seem to be rounding properly,"<p>The documentation for the <a href=""http://docs.python.org/lib/built-in-funcs.html"">round()</a> function states that you pass it a number, and the positions past the decimal to round. Thus it <em>should</em> do this:</p>

<pre><code>n = 5.59
round(n, 1) # 5.6
</code></pre>

<p>But, in actuality, good old floating point weirdness creeps in and you get:</p>

<pre><code>5.5999999999999996
</code></pre>

<p>For the purposes of UI, I need to display <code>5.6</code>. I poked around the Internet and found some <a href=""http://mail.python.org/pipermail/python-list/2005-September/340383.html"">documentation</a> that this is dependent on my implementation of Python. Unfortunately, this occurs on both my Windows dev machine and each Linux server I've tried. <a href=""http://www.python.org/doc/2.5.1/tut/node16.html"">See here also</a>.</p>

<p>Short of creating my own round library, is there any way around this?</p>
"
57708,680,2008-09-11T21:28:46Z,60,Convert XML/HTML Entities into Unicode String in Python,"<p>I'm doing some web scraping and sites frequently use HTML entities to represent non ascii characters. Does Python have a utility that takes a string with HTML entities and returns a unicode type?</p>

<p>For example:</p>

<p>I get back:</p>

<pre><code>&amp;#x01ce;
</code></pre>

<p>which represents an ""ǎ"" with a tone mark.  In binary, this is represented as the 16 bit 01ce.  I want to convert the html entity into the value  <code>u'\u01ce'</code></p>
"
58119,1892,2008-09-12T01:35:33Z,11,Does re.compile() or any given Python library call throw an exception?,"<p>I can't tell from the Python documentation whether the re.compile(x) function may throw an exception (assuming you pass in a string). I imagine there is something that could be considered an invalid regular expression. The larger question is, where do I go to find if a given Python library call may throw exception(s) and what those are? </p>
"
58294,5342,2008-09-12T04:21:51Z,8,How do I get the external IP of a socket in Python?,"<p>When I call <code>socket.getsockname()</code> on a socket object, it returns a tuple of my machine's internal IP and the port. However, I would like to retrieve my external IP. What's the cheapest, most efficient manner of doing this?</p>
"
58622,2077,2008-09-12T10:26:40Z,49,Can I document Python code with doxygen (and does it make sense)?,"<p>I like doxygen to create documentation of C or PHP code. I have an upcoming Python project and I think I remember that Python doesn't have /* .. */ comments and also has its own self-documentation facility which seems to be the pythonic way to document.</p>

<p>Can I just use doxygen? Anything particular to be aware of?</p>

<p>I have done some coding in Python but so far only on small projects where I was to lazy to document at all (yeah, I know ... but let's just pretend that's OK for now).</p>
"
58711,745,2008-09-12T11:18:04Z,11,"How would you design a very ""Pythonic"" UI framework?","<p>I have been playing with the Ruby library ""shoes"". Basically you can write a GUI application in the following way:</p>

<pre><code>Shoes.app do
  t = para ""Not clicked!""
  button ""The Label"" do
    alert ""You clicked the button!"" # when clicked, make an alert
    t.replace ""Clicked!"" # ..and replace the label's text
  end
end
</code></pre>

<p>This made me think - how would I design a similarly nice-to-use GUI framework in Python? One that doesn't have the usual tyings of basically being wrappers to a C* library (In the case of GTK, Tk, wx, QT etc etc)</p>

<p>Shoes takes things from web devlopment (like <code>#f0c2f0</code> style colour notation, CSS layout techniques, like <code>:margin =&gt; 10</code>), and from ruby (extensively using blocks in sensible ways)</p>

<p>Python's lack of ""rubyish blocks"" makes a (metaphorically)-direct port impossible:</p>

<pre><code>def Shoeless(Shoes.app):
    self.t = para(""Not clicked!"")

    def on_click_func(self):
        alert(""You clicked the button!"")
        self.t.replace(""clicked!"")

    b = button(""The label"", click=self.on_click_func)
</code></pre>

<p>No where near as clean, and wouldn't be <em>nearly</em> as flexible, and I'm not even sure if it would be implementable.</p>

<p>Using decorators seems like an interesting way to map blocks of code to a specific action:</p>

<pre><code>class BaseControl:
    def __init__(self):
        self.func = None

    def clicked(self, func):
        self.func = func

    def __call__(self):
        if self.func is not None:
            self.func()

class Button(BaseControl):
    pass

class Label(BaseControl):
    pass

# The actual applications code (that the end-user would write)
class MyApp:
    ok = Button()
    la = Label()

    @ok.clicked
    def clickeryHappened():
        print ""OK Clicked!""

if __name__ == '__main__':
    a = MyApp()
    a.ok() # trigger the clicked action
</code></pre>

<p>Basically the decorator function stores the function, then when the action occurred (say, a click) the appropriate function would be executed.</p>

<p>The scope of various stuff (say, the <code>la</code> label in the above example) could be rather complicated, but it seems doable in a fairly neat manner..</p>
"
59648,6163,2008-09-12T18:09:02Z,1,Storing multiple arrays in Python,"<p>I am writing a program to simulate the actual polling data companies like Gallup or Rasmussen publish daily: www.gallup.com and www.rassmussenreports.com</p>

<p>I'm using a brute force method, where the computer generates some random daily polling data and then calculates three day averages to see if the average of the random data matches pollsters numbers. (Most companies poll numbers are three day averages)</p>

<p>Currently, it works well for one iteration, but my goal is to have it produce the most common simulation that matches the average polling data. I could then change the code of anywhere from 1 to 1000 iterations. </p>

<p>And this is my problem. At the end of the test I have an array in a single variable that looks something like this:</p>

<pre><code>[40.1, 39.4, 56.7, 60.0, 20.0 ..... 19.0]
</code></pre>

<p>The program currently produces one array for each correct simulation. <em>I can store each array in a single variable, but I then have to have a program that could generate 1 to 1000 variables depending on how many iterations I requested!?</em> </p>

<p>How do I avoid this? I know there is an intelligent way of doing this that doesn't require the program to generate variables to store arrays depending on how many simulations I want.</p>

<p>Code testing for McCain:</p>

<pre><code> test = [] 

while x &lt; 5: 

   test = round(100*random.random())

   mctest.append(test) 

   x = x +1 


mctestavg = (mctest[0] + mctest[1] + mctest[2])/3 

#mcavg is real data

if mctestavg == mcavg[2]: 
  mcwork = mctest 
</code></pre>

<p>How do I repeat without creating multiple mcwork vars?</p>
"
59825,2260,2008-09-12T19:58:33Z,154,How to retrieve an element from a set without removing it?,"<p>Suppose the following:</p>

<pre><code>&gt;&gt;&gt;s = set([1, 2, 3])
</code></pre>

<p>How do I get a value (any value) out of s without doing s.pop()? I want to leave the item in the set until I am sure I can remove it - something I can only be sure of after an asynchronous call to another host.</p>

<p>Quick and dirty:</p>

<pre><code>&gt;&gt;&gt;elem = s.pop()
&gt;&gt;&gt;s.add(elem)
</code></pre>

<p>But do you know of a better way? Ideally in constant time.</p>
"
60152,2555,2008-09-12T23:28:16Z,9,Automate firefox with python?,"<p>Been scouring the net for something like firewatir but for python.  I'm trying to automate  firefox on linux.  Any suggestions?</p>
"
60208,4907,2008-09-13T00:36:30Z,788,Replacements for switch statement in Python?,"<p>I want to write a function in Python that returns different fixed values based on the value of an input index.  </p>

<p>In other languages I would use a <code>switch</code> or <code>case</code> statement, but Python does not appear to have a <code>switch</code> statement.  What are the recommended Python solutions in this scenario?</p>
"
60352,2679,2008-09-13T05:51:17Z,0,Can distutils create empty __init__.py files?,"<p>If all of my <code>__init__.py</code> files are empty, do I have to store them into version control, or is there a way to make <code>distutils</code> create empty <code>__init__.py</code> files during installation?</p>
"
60446,6254,2008-09-13T09:56:04Z,3,Windows Mobile development in Python,"<p>What is the best way to start developing Windows Mobile Professional applications in Python? Is there a reasonable SDK including an emulator? Is it even possible without doing excessive amount of underlaying Windows API calls for UI for instance?</p>
"
60649,1304,2008-09-13T16:10:34Z,53,cross platform IPC,"<p>I'm looking for suggestions on possible IPC mechanisms that are:</p>

<ul>
<li><strong>cross platform</strong> (WIN32 and Linux at least)</li>
<li>Simple to implement in <strong>C++</strong> as well as the <strong>most common scripting languages</strong> (perl, ruby python etc).</li>
<li>Finally, <strong>simple to use</strong> from a programming point of view!</li>
</ul>

<p>What are my options? I'm programming under Linux, but I'd like what I write to be portable to other OSes in the future. I've thought about using sockets, named pipes, or something like DBus.</p>

<p>Does anyone have any advice?</p>
"
60680,4321,2008-09-13T16:42:38Z,14,How do I write a python HTTP server to listen on multiple ports?,"<p>I'm writing a small web server in Python, using BaseHTTPServer and a custom subclass of BaseHTTPServer.BaseHTTPRequestHandler. Is it possible to make this listen on more than one port?</p>

<p>What I'm doing now:</p>

<pre><code>class MyRequestHandler(BaseHTTPServer.BaseHTTPRequestHandler):
  def doGET
  [...]

class ThreadingHTTPServer(ThreadingMixIn, HTTPServer): 
    pass

server = ThreadingHTTPServer(('localhost', 80), MyRequestHandler)
server.serve_forever()
</code></pre>
"
60685,1304,2008-09-13T16:53:57Z,5,python regex to match multi-line preprocessor macro,"<p>What follows is a regular expression I have written to match multi-line pre-processor macros in C / C++ code. I'm by no means a regular expressions guru, so I'd welcome any advice on how I can make this better.</p>

<p>Here's the regex:</p>

<pre><code>\s*#define(.*\\\n)+[\S]+(?!\\)
</code></pre>

<p>It should match all of this:</p>

<pre><code>#define foo(x) if(x) \
doSomething(x)
</code></pre>

<p>But only some of this (shouldn't match the next line of code:</p>

<pre><code>#define foo(x) if(x) \
doSomething(x)
normalCode();
</code></pre>

<p>And also shouldn't match single-line preprocessor macros.</p>

<p>I'm pretty sure that the regex above works - but as I said, there probably a better way of doing it, and I imagine that there are ways of breaking it. Can anyone suggest any?</p>
"
60805,1448,2008-09-13T19:58:02Z,49,Getting random row through SQLAlchemy,"<p>How do I select a(or some) random row(s) from a table using SQLAlchemy? </p>
"
60848,4883,2008-09-13T20:38:05Z,44,How do you retrieve items from a dictionary in the order that they're inserted?,"<p>Is it possible to retrieve items from a Python dictionary in the order that they were inserted?</p>
"
61151,4883,2008-09-14T05:41:11Z,286,Where do the Python unit tests go?,"<p>If you're writing a library, or an app, where do the unit test files go?  </p>

<p>It's nice to separate the test files from the main app code, but it's awkward to put them into a ""tests"" subdirectory inside of the app root directory, because it makes it harder to import the modules that you'll be testing.  </p>

<p>Is there a best practice here?</p>
"
61517,2148,2008-09-14T18:00:43Z,174,Python dictionary from an object's fields,"<p>Do you know if there is a built-in function to build a dictionary from an arbitrary object? I'd like to do something like this:</p>

<pre><code>&gt;&gt;&gt; class Foo:
...     bar = 'hello'
...     baz = 'world'
...
&gt;&gt;&gt; f = Foo()
&gt;&gt;&gt; props(f)
{ 'bar' : 'hello', 'baz' : 'world' }
</code></pre>

<p><strong>NOTE:</strong> It should not include methods. Only fields.</p>

<p>Thanks</p>
"
61605,4883,2008-09-14T20:15:19Z,66,Is it pythonic for a function to return multiple values?,"<p>In python, you can have a function return multiple values.  Here's a contrived example:</p>

<pre><code>def divide(x, y):
    quotient = x/y
    remainder = x % y
    return quotient, remainder  

(q, r) = divide(22, 7)
</code></pre>

<p>This seems very useful, but it looks like it can also be abused (""Well..function X already computes what we need as an intermediate value.  Let's have X return that value also"").</p>

<p>When should you draw the line and define a different method?  </p>
"
61781,2908,2008-09-15T01:41:31Z,0,python cgi on IIS,"<p>How do you set up IIS so that you can call python scripts from asp pages?</p>

<p>Ok, so I found the answer to that question here: <a href=""http://support.microsoft.com/kb/276494"" rel=""nofollow"">http://support.microsoft.com/kb/276494</a></p>

<p>So on to my next question: How do you call a cgi script from within classic asp (vb) code? Particularly one which is not in the web root directory.</p>
"
61894,4904,2008-09-15T05:21:47Z,3,What's a good way to find relative paths in Google App Engine?,"<p>So I've done the trivial ""warmup"" apps with GAE.  Now I'd like to build something with a more complex directory structure.  Something along the lines of:</p>

<pre><code>siteroot/
	models/
	controllers/
		controller1/
		controller2/
		...
	templates/
		template1/
		template2/
		...
</code></pre>

<p>..etc.  The controllers will be Python modules handling requests.  They would then need to locate (Django-style) templates in associated folders.  Most of the demo apps I've seen resolve template paths like this:</p>

<pre><code>path = os.path.join(os.path.dirname(__file__), 'myPage.html')
</code></pre>

<p>...the __ file __ property resolves to the currently executing script.  So, in my above example, if a Python script were running in controllers/controller1/, then the 'myPage.html' would resolve to that same directory -- controllers/controller1/myPage.html -- and I would rather cleanly separate my Python code and templates.</p>

<p>The solution I've hacked together feels... hacky:</p>

<pre><code>base_paths = os.path.split(os.path.dirname(__file__))
template_dir = os.path.join(base_paths[0], ""templates"")
</code></pre>

<p>So, I'm just snipping off the last element of the path for the currently running script and appending the template directory to the new path.  The other (non-GAE specific) solutions I've seen for resolving Python paths seem pretty heavyweight (such as splitting paths into lists and manipulating accordingly).  Django seems to have an answer for this, but I'd rather stick to the GAE API, vs. creating a full Django app and modifying it for GAE.</p>

<p>I'm assuming anything hard-coded would be non-starter, since the apps live on Google's infinite server farm.  So what's a better way?</p>
"
62079,1384652,2008-09-15T10:06:19Z,2,Comparing runtimes,"<p>I am trying to get some accurate runtime comparisons of PHP vs Python (and potentially any other language that I have to include). Timing within a script is not my problem but timing within a script does not account for everything from the moment the request is made to run the script to output.</p>

<blockquote>
  <p>1) Is it actually worth taking such things into account?</p>
  
  <p>2) Assuming it is worth taking it into account, how do I do this?</p>
</blockquote>

<p>I'm using a Mac so I've got access to Linux commands and I'm not afraid to compile/create a command to help me, I just don't know how to write such a command.</p>
"
63086,1231,2008-09-15T13:55:14Z,6,"Is there a way around coding in Python without the tab, indent & whitespace criteria?","<p>I want to start using Python for small projects but the fact that a misplaced tab or indent can throw a compile error is really getting on my nerves. Is there some type of setting to turn this off?</p>

<p>I'm currently using NotePad++. Is there maybe an IDE that would take care of the tabs and indenting?</p>
"
63488,7666,2008-09-15T14:38:58Z,0,Which is the most useful Mercurial hook for programming in a loosely connected team?,"<p>I recently discovered the notify extension in Mercurial which allows me quickly send out emails whenever I push changes, but I'm pretty sure I'm still missing out on a lot of functionality which could make my life a lot easier. </p>

<ul>
<li>notify-extension: <a href=""http://www.selenic.com/mercurial/wiki/index.cgi/NotifyExtension"" rel=""nofollow"">http://www.selenic.com/mercurial/wiki/index.cgi/NotifyExtension</a></li>
</ul>

<p>Which Mercurial hook or combination of interoperating hooks is the most useful for working in a loosely connected team? </p>

<p>Please add links to non-standard parts you use and/or add the hook (or a description how to set it up), so others can easily use it. </p>
"
63681,7735,2008-09-15T15:00:45Z,1,How create threads under Python for Delphi,"<p>I'm hosting Python script with Python for Delphi components inside my Delphi application. I'd like to create background tasks which keep running by script.</p>

<p>Is it possible to create threads which keep running even if the script execution  ends (but not the host process, which keeps going on). I've noticed that the program gets stuck if the executing script ends and there is thread running. However if I'll wait until the thread is finished everything goes fine.</p>

<p>I'm trying to use ""threading"" standard module for threads.</p>
"
64141,8324,2008-09-15T15:51:02Z,1,Classes in Python,"<p>In Python is there any way to make a class, then make a second version of that class with identical dat,a but which can be changed, then reverted to be the same as the data in the original class? </p>

<p>So I would make a class with the numbers 1 to 5 as the data in it, then make a second class with the same names for sections (or very similar). Mess around with the numbers in the second class then with one function then reset them to be the same as in the first class. </p>

<p>The only alternative I've found is to make one aggravatingly long class with too many separate pieces of data in it to be readily usable.</p>
"
64185,6525,2008-09-15T15:57:48Z,2,Nice Python wrapper for Yahoo's Geoplanet web service?,"<p>Has anybody created a nice wrapper around Yahoo's geo webservice ""GeoPlanet"" yet?</p>
"
64237,8420,2008-09-15T16:03:22Z,48,When to create a new app (with startapp) in Django?,"<p>I've googled around for this, but I still have trouble relating to what Django defines as ""apps"". </p>

<p>Should I create a new app for each piece of functionality in a site, even though it uses models from the main project? </p>

<p>Do you guys have good rule of thumb of when to split off a new app, and when to keep functionality together with the ""main project"" or other apps?</p>
"
64362,8548,2008-09-15T16:18:59Z,1,How can I access App Engine through a Corporate proxy?,"<p>I have corporate proxy that supports https but not HTTP CONNECT (even after authentication). It just gives 403 Forbidden in response anything but HTTP or HTTPS URLS. It uses HTTP authenication, not NTLM. It is well documented the urllib2 does not work with https thru a proxy. App Engine trys to connect to a https URL using urllib2 to update the app.</p>

<p>On *nix, urllib2 expects proxies to set using env variables.</p>

<pre><code>export http_proxy=""http://mycorporateproxy:8080""
export https_proxy=""https://mycorporateproxy:8080""
</code></pre>

<p>This is sited as a work around: <a href=""http://code.activestate.com/recipes/456195/"" rel=""nofollow"">http://code.activestate.com/recipes/456195/</a>. Also see <a href=""http://code.google.com/p/googleappengine/issues/detail?id=126"" rel=""nofollow"">http://code.google.com/p/googleappengine/issues/detail?id=126</a>.
None of these fixes have worked for me. They seem to rely on the proxy server supporting HTTP CONNECT. Does anyone have any other work arounds? I sure I am not the only
one behind a restrictive corporate proxy.</p>
"
64426,8585,2008-09-15T16:27:47Z,9,Best Python supported server/client protocol?,"<p>I'm looking for a good server/client protocol supported in Python for making data requests/file transfers between one server and many clients.  Security is also an issue - so secure login would be a plus.  I've been looking into XML-RPC, but it looks to be a pretty old (and possibly unused these days?) protocol.</p>
"
64505,8206,2008-09-15T16:36:35Z,70,Sending mail from Python using SMTP,"<p>I'm using the following method to send mail from Python using SMTP. Is it the right method to use or are there gotchas I'm missing ?</p>

<pre><code>from smtplib import SMTP
import datetime

debuglevel = 0

smtp = SMTP()
smtp.set_debuglevel(debuglevel)
smtp.connect('YOUR.MAIL.SERVER', 26)
smtp.login('USERNAME@DOMAIN', 'PASSWORD')

from_addr = ""John Doe &lt;john@doe.net&gt;""
to_addr = ""foo@bar.com""

subj = ""hello""
date = datetime.datetime.now().strftime( ""%d/%m/%Y %H:%M"" )

message_text = ""Hello\nThis is a mail from your server\n\nBye\n""

msg = ""From: %s\nTo: %s\nSubject: %s\nDate: %s\n\n%s"" 
        % ( from_addr, to_addr, subj, date, message_text )

smtp.sendmail(from_addr, to_addr, msg)
smtp.quit()
</code></pre>
"
65076,9099,2008-09-15T17:48:22Z,47,How to setup VIM autoindentation properly for editing Python files - *.py,"<p>I've troubles setting VIM (7.1.xxx) for editing python files. 
Indenting seems to be broken (optimal 4 spaces).
I've followed some tutorials I found via Google. Still no effect :/ 
Please help.</p>
"
65266,9241,2008-09-15T18:10:35Z,17,Caching compiled regex objects in Python?,"<p>Each time a python file is imported that contains a large quantity of static regular expressions, cpu cycles are spent compiling the strings into their representative state machines in memory.</p>

<pre><code>a = re.compile(""a.*b"")
b = re.compile(""c.*d"")
...
</code></pre>

<p>Question: Is it possible to store these regular expressions in a cache on disk in a pre-compiled manner to avoid having to execute the regex compilations on each import?</p>

<p>Pickling the object simply does the following, causing compilation to happen anyway:</p>

<pre><code>&gt;&gt;&gt; import pickle
&gt;&gt;&gt; import re
&gt;&gt;&gt; x = re.compile("".*"")
&gt;&gt;&gt; pickle.dumps(x)
""cre\n_compile\np0\n(S'.*'\np1\nI0\ntp2\nRp3\n.""
</code></pre>

<p>And re objects are unmarshallable:</p>

<pre><code>&gt;&gt;&gt; import marshal
&gt;&gt;&gt; import re
&gt;&gt;&gt; x = re.compile("".*"")
&gt;&gt;&gt; marshal.dumps(x)
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
ValueError: unmarshallable object
</code></pre>
"
65400,5179,2008-09-15T18:24:14Z,5,How to add method using metaclass,"<p>How do I add an instance method to a class using a metaclass (yes I do need to use a metaclass)? The following kind of works, but the func_name will still be ""foo"":</p>

<pre><code>def bar(self):
    print ""bar""

class MetaFoo(type):
    def __new__(cls, name, bases, dict):
        dict[""foobar""] = bar
        return type(name, bases, dict)

class Foo(object):
    __metaclass__ = MetaFoo

&gt;&gt;&gt; f = Foo()
&gt;&gt;&gt; f.foobar()
bar
&gt;&gt;&gt; f.foobar.func_name
'bar'
</code></pre>

<p>My problem is that some library code actually uses the func_name and later fails to find the 'bar' method of the Foo instance. I could do:</p>

<pre><code>dict[""foobar""] = types.FunctionType(bar.func_code, {}, ""foobar"")
</code></pre>

<p>There is also types.MethodType, but I need an instance that does'nt exist yet to use that. Am I missing someting here?</p>
"
66636,9940,2008-09-15T20:31:33Z,1,Decorating a parent class method,"<p>I would like to make a child class that has a method of the parent class where the method is a 'classmethod' in the child class but <strong>not</strong> in the parent class.</p>

<p>Essentially, I am trying to accomplish the following:</p>

<pre><code>class foo(Object):
    def meth1(self, val):
        self.value = val

class bar(foo):
    meth1 = classmethod(foo.meth1)
</code></pre>
"
66730,8453,2008-09-15T20:41:58Z,6,How do I create a new signal in pygtk,"<p>I've created a python object, but I want to send signals on it.  I made it inherit from gobject.GObject, but there doesn't seem to be any way to create a new signal on my object.</p>
"
67180,10160,2008-09-15T21:29:26Z,0,"mod_python/MySQL error on INSERT with a lot of data: ""OperationalError: (2006, 'MySQL server has gone away')""","<p>When doing an INSERT with a lot of data, ie:</p>

<pre><code>INSERT INTO table (mediumtext_field) VALUES ('...lots of text here: about 2MB worth...')
</code></pre>

<p>MySQL returns </p>

<blockquote>
  <p>""OperationalError: (2006, 'MySQL server has gone away')""</p>
</blockquote>

<p>This is happening within a minute of starting the script, so it is not a timeout issue. Also, <code>mediumtext_field</code> should be able to hold ~16MB of data, so that shouldn't be a problem.</p>

<p>Any ideas what is causing the error or how to work around it?</p>

<p>Some relevant libraries being used: <code>mod_python 3.3.1</code>, <code>MySQL 5.0.51</code> (on Windows XP SP3, via xampp, details below)</p>

<p><strong>ApacheFriends XAMPP (basic package) version 1.6.5</strong></p>

<ul>
<li>Apache 2.2.6</li>
<li>MySQL 5.0.51</li>
<li>phpMyAdmin 2.11.3</li>
</ul>
"
67223,10176,2008-09-15T21:33:41Z,1,why might my pyglet vertex lists and batches be very slow on Windows?,"<p>I'm writing opengl code in python using the library pyglet. When I draw to the screen using pyglet.graphics.vertex_list or pyglet.graphics.batch objects, they are very slow (~0.1 fps) compared to plain old pyglet.graphics.draw() or just glVertex() calls, which are about 40fps for the same geometry.
In Linux the vertex_list is about the same speed as glVertex, which is disappointing, and batch methods are about twice as fast, which is a little better but not as much gain as I was hoping for.</p>
"
67454,9812,2008-09-15T22:00:31Z,41,Serving dynamically generated ZIP archives in Django,"<p>How to serve users a dynamically generated ZIP archive in Django?</p>

<p>I'm making a site, where users can choose any combination of available books and download them as ZIP archive. I'm worried that generating such archives for each request would slow my server down to a crawl. I have also heard that Django doesn't currently have a good solution for serving dynamically generated files.</p>
"
67631,10286,2008-09-15T22:30:55Z,498,How to import a module given the full path?,"<p>How can I load a Python module given its full path? Note that the file can be anywhere in the filesystem, as it is a configuration option.</p>
"
68282,4883,2008-09-16T00:39:55Z,125,"Why do you need explicitly have the ""self"" argument into a Python method?","<p>When defining a method on a class in Python, it looks something like this:</p>

<pre><code>class MyClass(object):
    def __init__(self, x, y):
        self.x = x
        self.y = y
</code></pre>

<p>But in some other languages, such as C#, you have a reference to the object that the method is bound to with the ""this"" keyword without declaring it as an argument in the method prototype.  </p>

<p>Was this an intentional language design decision in Python or are there some implementation details that require the passing of ""self"" as an argument?</p>
"
68327,680,2008-09-16T00:48:37Z,3,Change command Method for Tkinter Button in Python,"<p>I create a new Button object but did not specify the <code>command</code> option upon creation. Is there a way in Tkinter to change the command (onclick) function after the object has been created?</p>
"
68335,10668,2008-09-16T00:50:10Z,55,How to copy a file to a remote server in Python using SCP or SSH?,"<p>I have a text file on my local machine that is generated by a daily Python script run in cron. </p>

<p>I would like to add a bit of code to have that file sent securely to my server over SSH.</p>
"
68477,4883,2008-09-16T01:16:24Z,70,Send file using POST from a Python script,"<p>Is there a way to send a file using POST from a Python script?</p>
"
68541,NA,2008-09-16T01:27:28Z,0,libxml2-p25 on OS X 10.5 needs sudo?,"<p>When trying to use <code>libxml2</code> as myself I get an error saying the package cannot be found. If I run as as super user I am able to import fine.</p>

<p>I have installed <code>python25</code> and all <code>libxml2</code> and <code>libxml2-py25</code> related libraries via fink and own the entire path including the library. Any ideas why I'd still need to sudo?</p>
"
68630,4883,2008-09-16T01:43:39Z,101,Are tuples more efficient than lists in Python?,"<p>Is there any performance difference between tuples and lists when it comes to instantiation and retrieval of elements? </p>
"
68645,2246,2008-09-16T01:46:36Z,1015,Static class variables in Python,"<p>Is it possible to have static class variables or methods in python? What syntax is required to do this?</p>
"
68774,5324,2008-09-16T02:06:11Z,30,Best way to open a socket in Python,"<p>I want to open a TCP client socket in Python. Do I have to go through all the low-level BSD create-socket-handle / connect-socket stuff or is there a simpler one-line way?</p>
"
69645,1724701,2008-09-16T05:44:54Z,54,Take a screenshot via a python script. [Linux],"<p>I want to take a screenshot via a python script and unobtrusively save it.</p>

<p>I'm only interested in the Linux solution, and should support any X based environment.</p>
"
69979,11324,2008-09-16T07:07:42Z,1,Can I implement a web user authentication system in python without POST?,"<p>My university doesn't support the POST cgi method (I know, it's crazy), and I was hoping to be able to have a system where a user can have a username and password and log in securely. Is this even possible?</p>

<p>If it's not, how would you do it with POST? Just out of curiosity.</p>

<p>Cheers!</p>
"
70528,1943957,2008-09-16T08:59:32Z,344,Why are Python's 'private' methods not actually private?,"<p>Python gives us the ability to create 'private' methods and variables within a class by prepending double underscores to the name, like this: <code>__myPrivateMethod()</code>. How, then, can one explain this</p>

<pre><code>>>> class MyClass:
...     def myPublicMethod(self):
...             print 'public method'
...     def __myPrivateMethod(self):
...             print 'this is private!!'
... 
>>> obj = MyClass()
>>> obj.myPublicMethod()
public method
>>> obj.__myPrivateMethod()
Traceback (most recent call last):
  File """", line 1, in 
AttributeError: MyClass instance has no attribute '__myPrivateMethod'
>>> dir(obj)
['_MyClass__myPrivateMethod', '__doc__', '__module__', 'myPublicMethod']
>>> obj._MyClass__myPrivateMethod()
this is private!!
</code></pre>

<p>What's the deal?!</p>

<p>I'll explain this a little for those who didn't quite get that.</p>

<pre><code>>>> class MyClass:
...     def myPublicMethod(self):
...             print 'public method'
...     def __myPrivateMethod(self):
...             print 'this is private!!'
... 
>>> obj = MyClass()
</code></pre>

<p>What I did there is create a class with a public method and a private method and instantiate it.</p>

<p>Next, I call its public method.</p>

<pre><code>>>> obj.myPublicMethod()
public method
</code></pre>

<p>Next, I try and call its private method.</p>

<pre><code>>>> obj.__myPrivateMethod()
Traceback (most recent call last):
  File """", line 1, in 
AttributeError: MyClass instance has no attribute '__myPrivateMethod'
</code></pre>

<p>Everything looks good here; we're unable to call it. It is, in fact, 'private'. Well, actually it isn't. Running <em>dir()</em> on the object reveals a new magical method that python creates magically for all of your 'private' methods.</p>

<pre><code>>>> dir(obj)
['_MyClass__myPrivateMethod', '__doc__', '__module__', 'myPublicMethod']
</code></pre>

<p>This new method's name is always an underscore, followed by the class name, followed by the method name.</p>

<pre><code>>>> obj._MyClass__myPrivateMethod()
this is private!!
</code></pre>

<p>So much for encapsulation, eh?</p>

<p>In any case, I'd always heard Python doesn't support encapsulation, so why even try? What gives?</p>
"
70653,11563,2008-09-16T09:17:41Z,5,Python Authentication API,"<p>I'm looking for a python library that will help me to create an authentication method for a desktop app I'm writing.
I have found several method in web framework such as django or turbogears.</p>

<p>I just want a kind of username-password association stored into a local file.
I can write it by myself, but I'm really it already exists and will be a better solution (I'm not very fluent with encryption).</p>
"
70681,11596,2008-09-16T09:22:36Z,2,Python Psycopg error and connection handling (v MySQLdb),"<p>Is there a way to make psycopg and postgres deal with errors without having to reestablish the connection, like MySQLdb?  The commented version of the below works with MySQLdb, the comments make it work with Psycopg2:</p>

<pre><code>results = {'felicitas': 3, 'volumes': 8, 'acillevs': 1, 'mosaics': 13, 'perat\xe9': 1, 'representative': 6....}
for item in sorted(results):
    try:
        cur.execute(""""""insert into resultstab values ('%s', %d)"""""" % (item, results[item]))
        print item, results[item]
#       conn.commit()
    except:
#       conn=psycopg2.connect(user='bvm', database='wdb', password='redacted')
#       cur=conn.cursor()
        print 'choked on', item
        continue
</code></pre>

<p>This must slow things down, could anyone give a suggestion for passing over formatting errors?  Obviously the above chokes on apostrophes, but is there a way to make it pass over that without getting something like the following, or committing, reconnecting, etc?:</p>

<pre><code>agreement 19
agreements 1
agrees 1
agrippa 9
choked on agrippa's
choked on agrippina
</code></pre>
"
70797,1384652,2008-09-16T09:44:59Z,222,Python: user input and commandline arguments,"<p>How do I have a Python script that can accept user input (assuming this is possible) and how do I make it read in arguments if run from the command line?</p>
"
71151,1384652,2008-09-16T10:49:36Z,7,HTML parser in Python,"<p>Using the Python Documentation I found the <a href=""http://docs.python.org/lib/module-HTMLParser.html"">HTML parser</a> but I have no idea which library to import to use it, how do I find this out (bearing in mind it doesn't say on the page).</p>
"
71817,11992,2008-09-16T12:46:28Z,2,Using the docstring from one method to automatically overwrite that of another method,"<p>The problem: I have a class which contains a template method <code>execute</code> which calls another method <code>_execute</code>. Subclasses are supposed to overwrite <code>_execute</code> to implement some specific functionality. This functionality should be documented in the docstring of <code>_execute</code>. 
Advanced users can create their own subclasses to extend the library. However, another user dealing with such a subclass should only use <code>execute</code>, so he won't see the correct docstring if he uses <code>help(execute)</code>.</p>

<p>Therefore it would be nice to modify the base class in such a way that in a subclass the docstring of <code>execute</code> is automatically replaced with that of <code>_execute</code>. Any ideas how this might be done?</p>

<p>I was thinking of metaclasses to do this, to make this completely transparent to the user.</p>
"
72393,1384652,2008-09-16T13:47:48Z,6,"Python and ""re""","<p>A tutorial I have on Regex in python explains how to use the re module in python, I wanted to grab the URL out of an A tag so knowing Regex I wrote the correct expression and tested it in my regex testing app of choice and ensured it worked. When placed into python it failed.</p>

<p>After much head scratching I found out the issue, it automatically expects your pattern to be at the start of the string. I have found a fix but I would like to know how to change:</p>

<pre><code>regex = "".*(a_regex_of_pure_awesomeness)""
</code></pre>

<p>into</p>

<pre><code>regex = ""a_regex_of_pure_awesomeness""
</code></pre>

<p>Okay, it's a standard URL regex but I wanted to avoid any potential confusion about what I wanted to get rid of and possibly pretend to be funny.</p>
"
72422,9510,2008-09-16T13:50:25Z,3,Python's unittest logic,"<p>Can someone explain this result to me. The first test succeeds but the second fails, although the variable tested is changed in the first test.</p>

<pre><code>&gt;&gt;&gt; class MyTest(unittest.TestCase):
    def setUp(self):
    	self.i = 1
    def testA(self):
    	self.i = 3
    	self.assertEqual(self.i, 3)
    def testB(self):
    	self.assertEqual(self.i, 3)


&gt;&gt;&gt; unittest.main()
.F
======================================================================
FAIL: testB (__main__.MyTest)
----------------------------------------------------------------------
Traceback (most recent call last):
  File ""&lt;pyshell#61&gt;"", line 8, in testB
AssertionError: 1 != 3

----------------------------------------------------------------------
Ran 2 tests in 0.016s
</code></pre>
"
72852,3497,2008-09-16T14:24:02Z,309,How to do relative imports in Python?,"<p>Imagine this directory structure:</p>

<pre><code>app/
   __init__.py
   sub1/
      __init__.py
      mod1.py
   sub2/
      __init__.py
      mod2.py
</code></pre>

<p>I'm coding <code>mod1</code>, and I need to import something from <code>mod2</code>. How should I do it?  </p>

<p>I tried <code>from ..sub2 import mod2</code> but I'm getting an ""Attempted relative import in non-package"".</p>

<p>I googled around but found only ""<code>sys.path</code> manipulation"" hacks. Isn't there a clean way?  </p>

<hr>

<p>Edit: all my <code>__init__.py</code>'s are currently empty  </p>

<p>Edit2: I'm trying to do this because sub2 contains classes that are shared across sub packages (<code>sub1</code>, <code>subX</code>, etc.).</p>

<p>Edit3: The behaviour I'm looking for is the same as described in <a href=""http://www.python.org/dev/peps/pep-0366/"">PEP 366</a> (thanks John B)</p>
"
72899,12398,2008-09-16T14:27:47Z,822,How do I sort a list of dictionaries by values of the dictionary in Python?,"<p>I got a list of dictionaries and want that to be sorted by a value of that dictionary.</p>

<p>This</p>

<pre><code>[{'name':'Homer', 'age':39}, {'name':'Bart', 'age':10}]
</code></pre>

<p>sorted by name, should become</p>

<pre><code>[{'name':'Bart', 'age':10}, {'name':'Homer', 'age':39}]
</code></pre>
"
72945,8507,2008-09-16T14:31:21Z,9,How to create a triple-join table with Django,"<p>Using Django's built in models, how would one create a triple-join between three models.</p>

<p>For example:</p>

<ul>
<li>Users, Roles, and Events are the models.</li>
<li>Users have many Roles, and Roles many Users.  (ManyToMany)</li>
<li>Events have many Users, and Users many Events. (ManyToMany)</li>
<li>But for any given Event, any User may have only one Role.</li>
</ul>

<p>How can this be represented in the model?</p>
"
73439,12218,2008-09-16T15:16:19Z,1,Is there a python package to interface with MS Cluster?,"<p>I need to write a couple of python scripts to automate the installation of Microsoft Cluster Ressources. </p>

<p>More specifically, I'll need to query MS Cluster to be able to get a list of ressources with their parameters. And I also need to be able to create resources and set their parameters. </p>

<p>Is someone knows if there is a package/module. Or even some sample scripts using Mark Hammond's pywin32 packages ?</p>
"
73663,1384652,2008-09-16T15:35:55Z,469,Terminating a Python script,"<p>I am aware of the <code>die()</code> command in PHP which stops a script early.</p>

<p>How can I do this in Python?</p>
"
73781,12779,2008-09-16T15:46:43Z,47,Sending mail via sendmail from python,"<p>If I want to send mail not via SMTP, but rather via sendmail, is there a library for python that encapsulates this process?</p>

<p>Better yet, is there a good library that abstracts the whole 'sendmail -versus- smtp' choice?</p>

<p>I'll be running this script on a bunch of unix hosts, only some of which are listening on localhost:25; a few of these are part of embedded systems and can't be set up to accept SMTP.</p>

<p>As part of Good Practice, I'd really like to have the library take care of header injection vulnerabilities itself -- so just dumping a string to <code>popen('/usr/bin/sendmail', 'w')</code> is a little closer to the metal than I'd like.</p>

<p>If the answer is 'go write a library,' so be it ;-)</p>
"
74092,156,2008-09-16T16:13:09Z,6,Is there a common way to check in Python if an object is any function type?,"<p>I have a function in Python which is iterating over the attributes returned from dir(obj), and I want to check to see if any of the objects contained within is a function, method, built-in function, etc.  Normally you could use callable() for this, but I don't want to include classes.  The best I've come up with so far is:</p>

<pre><code>isinstance(obj, (types.BuiltinFunctionType, types.FunctionType, types.MethodType))
</code></pre>

<p>Is there a more future-proof way to do this check?</p>

<p><strong>Edit:</strong> I misspoke before when I said: ""Normally you could use callable() for this, but I don't want to disqualify classes.""  I actually <em>do</em> want to disqualify classes.  I want to match <em>only</em> functions, not classes.</p>
"
74430,13050,2008-09-16T16:49:33Z,8,Random in python 2.5 not working?,"<p>I am trying to use the <code>import random</code> statement in python, but it doesn't appear to have any methods in it to use.</p>

<p>Am I missing something?</p>
"
75440,8453,2008-09-16T18:26:47Z,30,How do I get the name of a python class as a string?,"<p>What method do I call to get the name of a class?</p>
"
75621,8247,2008-09-16T18:45:34Z,7,How to use form values from an unbound form,"<p>I have a web report that uses a Django form (new forms) for fields that control the query used to generate the report (start date, end date, ...). The issue I'm having is that the page should work using the form's initial values (unbound), but I can't access the cleaned_data field unless I call is_valid(). But is_valid() always fails on unbound forms.</p>

<p>It seems like Django's forms were designed with the use case of editing data such that an unbound form isn't really useful for anything other than displaying HTML.</p>

<p>For example, if I have:</p>

<pre><code>if request.method == 'GET':
    form = MyForm()
else:
    form = MyForm(request.method.POST)

if form.is_valid():
    do_query(form.cleaned_data['start_date'], form.cleaned_data['end_date'])
</code></pre>

<p>is_valid() will fail if this is a GET (since it's unbound), and if I do:</p>

<pre><code>if request.method == 'GET':
    form = MyForm()
    do_query(form.cleaned_data['start_date'], form.cleaned_data['end_date'])
else:
    form = MyForm(request.method.POST)
    if form.is_valid():
       do_query(form.cleaned_data['start_date'], form.cleaned_data['end_date'])
</code></pre>

<p>the first call to do_query triggers exceptions on form.cleaned_data, which is not a valid field because is_valid() has not been called. It seems like I have to do something like:</p>

<pre><code>if request.method == 'GET':
    form = MyForm()
    do_query(form['start_date'].field.initial, form['end_date'].field.initial)
else:
    form = MyForm(request.method.POST)
    if form.is_valid():
       do_query(form.cleaned_data['start_date'], form.cleaned_data['end_date'])
</code></pre>

<p>that is, there isn't a common interface for retrieving the form's values between a bound form and an unbound one.</p>

<p>Does anyone see a cleaner way to do this?</p>
"
75798,13436,2008-09-16T19:05:48Z,16,Django -vs- Grails -vs-?,"<p>I'm wondering if there's such a thing as Django-like ease of web app development combined with good deployment, debugging and other tools? </p>

<p>Django is a very productive framework for building content-heavy sites; the best I've tried and a breath of fresh air compared to some of the Java monstrosities out there. However it's written in Python which means there's little real support in the way of deployment/packaging, debugging, profilers and other tools that make building and maintaining applications much easier. </p>

<p>Ruby has similar issues and although I do like Ruby <strong>much</strong> better than I like Python, I get the impression that Rails is roughly in the same boat at Django when it comes to managing/supporting the app. </p>

<p>Has anyone here tried both Django and Grails (or other web frameworks) for non-trivial projects? How did they compare?</p>
"
75829,NA,2008-09-16T19:08:29Z,5,Best way to access table instances when using SQLAlchemy's declarative syntax,"<p>All the docs for SQLAlchemy give <code>INSERT</code> and <code>UPDATE</code> examples using the local table instance (e.g. <code>tablename.update()</code>... )</p>

<p>Doing this seems difficult with the declarative syntax, I need to reference <code>Base.metadata.tables[""tablename""]</code> to get the table reference.</p>

<p>Am I supposed to do this another way?   Is there a different syntax for <code>INSERT</code> and <code>UPDATE</code> recommended when using the declarative syntax?  Should I just switch to the old way?</p>
"
76096,64673,2008-09-16T19:38:45Z,8,Undo with GTK TextView,"<p>I'm trying to keep dependencies to a minimum for a program I contribute to, it's a small text editor.</p>

<p>GTK Textview doesn't seem to come with a built-in undo function. Is there any reference implementation I've been missing on so far? Is everyone writing their own undo function for their TextView widgets?</p>

<p>I'll be happy about any sample code - most happy about python sample code, as our project is in python.</p>
"
77086,13778,2008-09-16T21:05:26Z,27,"Which is faster, python webpages or php webpages?","<p>Does anyone know how the speed of pylons(or any of the other frameworks) compares to a  similar website made with php?
I know that serving a python base webpage via cgi is slower than php because of its long start up every time.</p>

<p>I enjoy using pylons and I would still use it if it was slower than php. But if pylons was faster than php, I could maybe, hopefully, eventually convince my employer to allow me to convert the site over to pylons.</p>
"
77198,4787,2008-09-16T21:15:02Z,3,"What does BlazeDS Livecycle Data Services do, that something like PyAMF or RubyAMF not do?","<p>I'm doing a tech review and looking at AMF integration with various backends (Rails, Python, Grails etc).</p>

<p>Lots of options are out there, question is, what do the Adobe products do (BlazeDS etc) that something like RubyAMF / pyAMF don't?</p>
"
77552,5926,2008-09-16T21:50:58Z,73,'id' is a bad variable name in Python,"<p>Why is it bad to name a variable <code>id</code> in Python?</p>
"
77731,13996,2008-09-16T22:05:58Z,4,iBATIS for Python?,"<p>At my current gig, we use iBATIS through Java to CRUD our databases.  I like the abstract qualities of the tool, especially when working with legacy databases, as it doesn't impose its own syntax on you.</p>

<p><strong>I'm looking for a Python analogue to this library</strong>, since the website only has Java/.NET/Ruby versions available.  I don't want to have to switch to Jython if I don't need to.</p>

<p>Are there any other projects similar to iBATIS functionality out there for Python?</p>
"
77936,676,2008-09-16T22:28:58Z,10,What's the best way to calculate a 3D (or n-D) centroid?,"<p>As part of a project at work I have to calculate the centroid of a set of points in 3D space. Right now I'm doing it in a way that seems simple but naive -- by taking the average of each set of points, as in:</p>

<pre><code>centroid = average(x), average(y), average(z)
</code></pre>

<p>where <code>x</code>, <code>y</code> and <code>z</code> are arrays of floating-point numbers. I seem to recall that there is a way to get a more accurate centroid, but I haven't found a simple algorithm for doing so. Anyone have any ideas or suggestions? I'm using Python for this, but I can adapt examples from other languages.</p>
"
78238,NA,2008-09-16T23:11:31Z,1,OPENGL User Interface Programming,"<p>I'm developing a graphical application to present data (not a game but a real workhorse app). It needs to be cross platform, so I have chosen:</p>

<ul>
<li>python</li>
<li>openGL (I need 3D, blending, textures etc)</li>
<li>pyopengl</li>
<li>wx/pywx - windowing, dialogs etc.</li>
</ul>

<p>The last component - WX - raises the question. I can put together a very nice looking app (the prototypes look slick) - but when I need to interact with the user to ask questions, get input, I have to use WX. It makes the app look inconsistent to have traditional UI with traditional dialogs and combos and text entry on top of a full screen 3D app with blending, smooth motion, textures etc.</p>

<p>Has anyone developed a GUI using OpenGL and python? Can you share with me the toolkits and/or tricks you used? I need combos, text entry, buttons, radios, option buttons, tree view.</p>

<p>There are some toolkits out there, but they are either incomplete or old and unmaintained. A great example is pyUI (http://pyui.sourceforge.net/) - looks slick but untouched for years.</p>
"
78431,12650,2008-09-16T23:46:47Z,5,Redirect command to input of another in Python,"<p>I would like to replicate this in python:</p>

<pre><code>gvimdiff &lt;(hg cat file.txt) file.txt
</code></pre>

<p>(hg cat file.txt outputs the most recently committed version of file.txt)</p>

<p>I know how to pipe the file to gvimdiff, but it won't accept another file:</p>

<pre><code>$ hg cat file.txt | gvimdiff file.txt -
Too many edit arguments: ""-""
</code></pre>

<p>Getting to the python part...</p>

<pre><code># hgdiff.py
import subprocess
import sys
file = sys.argv[1]
subprocess.call([""gvimdiff"", ""&lt;(hg cat %s)"" % file, file])
</code></pre>

<p>When subprocess is called it merely passes <code>&lt;(hg cat file)</code> onto <code>gvimdiff</code> as a filename.</p>

<p>So, is there any way to redirect a command as bash does?
For simplicity's sake just cat a file and redirect it to diff:</p>

<pre><code>diff &lt;(cat file.txt) file.txt
</code></pre>
"
78450,14382,2008-09-16T23:52:04Z,6,Python ReportLab use of splitfirst/splitlast,"<p>I'm trying to use Python with ReportLab 2.2 to create a PDF report.<br />
According to the <a href=""http://www.reportlab.com/docs/userguide.pdf"">user guide</a>,</p>

<blockquote>
  <p>Special TableStyle Indeces [sic]</p>
  
  <p>In any style command the first row index may be set to one of the special strings 'splitlast' or 'splitfirst' to indicate that the style should be used only for the last row of a split table, or the first row of a continuation. This allows splitting tables with nicer effects around the split.</p>
</blockquote>

<p>I've tried using several style elements, including:</p>

<pre><code>('TEXTCOLOR', (0, 'splitfirst'), (1, 'splitfirst'), colors.black) 
('TEXTCOLOR', (0, 'splitfirst'), (1, 0), colors.black) 
('TEXTCOLOR', (0, 'splitfirst'), (1, -1), colors.black)
</code></pre>

<p>and none of these seems to work.  The first generates a TypeError with the message: </p>

<pre><code>TypeError: cannot concatenate 'str' and 'int' objects
</code></pre>

<p>and the latter two generate TypeErrors with the message:</p>

<pre><code>TypeError: an integer is required
</code></pre>

<p>Is this functionality simply broken or am I doing something wrong?  If the latter, what am I doing wrong?</p>
"
78799,10708,2008-09-17T01:02:31Z,54,Is there a benefit to defining a class inside another class in Python?,"<p>What I'm talking about here are nested classes. Essentially, I have two classes that I'm modeling. A DownloadManager class and a DownloadThread class. The obvious OOP concept here is composition. However, composition doesn't necessarily mean nesting, right?</p>

<p>I have code that looks something like this:</p>

<pre><code>class DownloadThread:
    def foo(self):
        pass

class DownloadManager():
    def __init__(self):
        dwld_threads = []
    def create_new_thread():
        dwld_threads.append(DownloadThread())
</code></pre>

<p>But now I'm wondering if there's a situation where nesting would be better. Something like:</p>

<pre><code>class DownloadManager():
    class DownloadThread:
        def foo(self):
            pass
    def __init__(self):
        dwld_threads = []
    def create_new_thread():
        dwld_threads.append(DownloadManager.DownloadThread())
</code></pre>
"
78900,11886,2008-09-17T01:22:56Z,3,How to check for memory leaks in Guile extension modules?,"<p>I develop an extension module for Guile, written in C.  This extension module embeds a Python interpreter.</p>

<p>Since this extension module invokes the Python interpreter, I need to verify that it properly manages the memory occupied by Python objects.  </p>

<p>I found that the Python interpreter is well-behaved in its own memory handling, so that by running valgrind I can find memory leaks due to bugs in my own Python interpreter embedding code, if there are no other interfering factors.  </p>

<p>However, when I run Guile under valgrind, valgrind reports memory leaks.  Such memory leaks obscure any memory leaks due to my own code.  </p>

<p>The question is what can I do to separate memory leaks due to bugs in my code from memory leaks reported by valgrind as due to Guile.  Another tool instead of valgrind?  Special valgrind options?  Give up and rely upon manual code walkthrough?</p>
"
79454,10840,2008-09-17T02:52:58Z,5,Testing GUI code: should I use a mocking library?,"<p>Recently I've been experimenting with TDD while developing a GUI application in Python. I find it very reassuring to have tests that verify the functionality of my code, but it's been tricky to follow some of the recommened practices of TDD. Namely, writing tests first has been hard. And I'm finding it difficult to make my tests readable (due to extensive use of a mocking library).</p>

<p>I chose a mocking library called <a href=""http://labix.org/mocker"" rel=""nofollow"">mocker</a>. I use it a lot since much of the code I'm testing makes calls to (a) other methods in my application that depend on system state or (b) ObjC/Cocoa objects that cannot exist without an event loop, etc.</p>

<p>Anyway, I've got a lot of tests that look like this:</p>

<pre><code>def test_current_window_controller():
    def test(config):
        ac = AppController()
        m = Mocker()
        ac.iter_window_controllers = iwc = m.replace(ac.iter_window_controllers)
        expect(iwc()).result(iter(config))
        with m:
            result = ac.current_window_controller()
            assert result == (config[0] if config else None)
    yield test, []
    yield test, [0]
    yield test, [1, 0]
</code></pre>

<p>Notice that this is actually three tests; all use the same parameterized test function. Here's the code that is being tested:</p>

<pre><code>def current_window_controller(self):
    try:
        # iter_window_controllers() iterates in z-order starting
        # with the controller of the top-most window
        # assumption: the top-most window is the ""current"" one
        wc = self.iter_window_controllers().next()
    except StopIteration:
        return None
    return wc
</code></pre>

<p>One of the things I've noticed with using mocker is that it's easier to write the application code first and then go back and write the tests second, since most of the time I'm mocking many method calls and the syntax to write the mocked calls is much more verbose (thus harder to write) than the application code. It's easier to write the app code and then model the test code off of that.</p>

<p>I find that with this testing method (and a bit of discipline) I can easily write code with 100% test coverage.</p>

<p>I'm wondering if these tests are good tests? Will I regret doing it this way down the road when I finally discover the secret to writing good tests?</p>

<p>Am I violating the core principles of TDD so much that my testing is in vain?</p>
"
79602,322887,2008-09-17T03:19:29Z,1,How do I get started processing email related to website activity?,"<p>I am writing a web application that requires user interaction via email.  I'm curious if there is a best practice or recommended source for learning about processing email.  I am writing my application in Python, but I'm not sure what mail server to use or how to format the message or subject line to account for automated processing.  I'm also looking for guidance on processing bouncebacks.  </p>

<p>Thanks!</p>
"
79754,3176,2008-09-17T03:46:55Z,11,Unittest causing sys.exit(),"<p>No matter what I do sys.exit() is called by unittest, even the most trivial examples.  I can't tell if my install is messed up or what is going on.</p>

<pre><code>IDLE 1.2.2      ==== No Subprocess ====
&gt;&gt;&gt; import unittest
&gt;&gt;&gt; 
&gt;&gt;&gt; class Test(unittest.TestCase):
        def testA(self):
        	a = 1
	        self.assertEqual(a,1)

&gt;&gt;&gt; unittest.main()
option -n not recognized
Usage: idle.pyw [options] [test] [...]

Options:
  -h, --help       Show this message
  -v, --verbose    Verbose output
  -q, --quiet      Minimal output

 Examples:
   idle.pyw                               - run default set of tests
   idle.pyw MyTestSuite                   - run suite 'MyTestSuite'
   idle.pyw MyTestCase.testSomething      - run MyTestCase.testSomething
   idle.pyw MyTestCase                    - run all 'test*' test methods
                                           in MyTestCase

Traceback (most recent call last):
  File ""&lt;pyshell#7&gt;"", line 1, in &lt;module&gt;
    unittest.main()
  File ""E:\Python25\lib\unittest.py"", line 767, in __init__
    self.parseArgs(argv)
  File ""E:\Python25\lib\unittest.py"", line 796, in parseArgs
    self.usageExit(msg)
  File ""E:\Python25\lib\unittest.py"", line 773, in usageExit
    sys.exit(2)
SystemExit: 2
&gt;&gt;&gt;
</code></pre>
"
79797,3715,2008-09-17T03:52:42Z,147,How do I convert local time to UTC in Python?,"<p>How do I convert a datetime <em>string in local time</em> to a <em>string in UTC time</em>?</p>

<p>I'm sure I've done this before, but can't find it and SO will hopefully help me (and others) do that in future.</p>

<p><strong>Clarification</strong>:  For example, if I have <code>2008-09-17 14:02:00</code> in my local timezone (<code>+10</code>), I'd like to generate a string with the equivalent <code>UTC</code> time: <code>2008-09-17 04:02:00</code>.</p>

<p>Also, from <a href=""http://lucumr.pocoo.org/2011/7/15/eppur-si-muove/"">http://lucumr.pocoo.org/2011/7/15/eppur-si-muove/</a>, note that in general this isn't possible as with DST and other issues there is no unique conversion from local time to UTC time.</p>
"
79850,10708,2008-09-17T04:02:53Z,17,How do you design data models for Bigtable/Datastore (GAE)?,"<p>Since the Google App Engine Datastore is based on <a href=""http://research.google.com/archive/bigtable.html"">Bigtable</a> and we know that's not a relational database, how do you design a <strong><em>database schema</em>/*data model*</strong> for applications that use this type of database system?</p>
"
79968,5324,2008-09-17T04:25:15Z,163,Split a string by spaces -- preserving quoted substrings -- in Python,"<p>I have a string which is like this:</p>

<pre><code>this is ""a test""
</code></pre>

<p>I'm trying to write something in Python to split it up by space while ignoring spaces within quotes. The result I'm looking for is:</p>

<pre><code>['this','is','a test']
</code></pre>

<p>PS. I know you are going to ask ""what happens if there are quotes within the quotes, well, in my application, that will never happen.</p>
"
80215,310574,2008-09-17T05:15:02Z,2,Btrieve without Pervasive?,"<p>Is there any library available to query Btrieve databases without buying something from Pervasive? I'm looking to code in C# or Python.</p>
"
80347,NA,2008-09-17T05:44:30Z,1,PubSub lib for c#,"<p>Is there a c# library which provides similar functionality to the <a href=""http://wiki.wxpython.org/PubSub"" rel=""nofollow"">Python PubSub</a> library? I think it's kind of an Observer Pattern which allows me to subscribe for messages of a given topic instead of using events.</p>
"
80617,15175,2008-09-17T06:51:35Z,29,Asychronous Programming in Python Twisted,"<p>I'm having trouble developing a reverse proxy in Twisted. It works, but it seems overly complex and convoluted. So much of it feels like voodoo...</p>

<p>Are there any <em>simple, solid</em> examples of asynchronous program structure on the web or in books? A sort of best practices guide? When I complete my program I'd like to be able to still see the structure in some way, not be looking at a bowl of spaghetti.</p>
"
80993,15274,2008-09-17T08:05:18Z,4,How to skip sys.exitfunc when unhandled exceptions occur,"<p>As you can see, even after the program should have died it speaks from the grave. Is there a way to ""deregister"" the exitfunction in case of exceptions?</p>

<pre><code>import atexit

def helloworld():
    print(""Hello World!"")

atexit.register(helloworld)

raise Exception(""Good bye cruel world!"")
</code></pre>

<p>outputs</p>

<pre><code>Traceback (most recent call last):
  File ""test.py"", line 8, in &lt;module&gt;
    raise Exception(""Good bye cruel world!"")
Exception: Good bye cruel world!
Hello World!
</code></pre>
"
81191,14351,2008-09-17T08:42:07Z,2,PythonWin's python interactive shell calling constructors twice?,"<p>While answering <a href=""http://stackoverflow.com/questions/68645/python-static-variable#81002"">http://stackoverflow.com/questions/68645/python-static-variable#81002</a> </p>

<p>I noticed that PythonWin PyWin32 build 209.2 interpreter seems to evaluate twice?</p>

<pre><code>PythonWin 2.5 (r25:51908, Mar  9 2007, 17:40:28) [MSC v.1310 32 bit (Intel)] on win32.
Portions Copyright 1994-2006 Mark Hammond - see 'Help/About PythonWin' for further copyright information.
&gt;&gt;&gt; class X:
...     l = []
...     def __init__(self):
...     	self.__class__.l.append(1)
...     	
&gt;&gt;&gt; X().l
[1, 1]
&gt;&gt;&gt;
</code></pre>

<p>while the python interpreter does the right thing</p>

<pre><code>C:\&gt;python
ActivePython 2.5.0.0 (ActiveState Software Inc.) based on
Python 2.5 (r25:51908, Mar  9 2007, 17:40:28) [MSC v.1310 32 bit (Intel)] on win32
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt; class X:
...   l = []
...   def __init__(self):
...     self.__class__.l.append(1)
...
&gt;&gt;&gt; X().l
[1]
&gt;&gt;&gt;
</code></pre>
"
81451,3834,2008-09-17T09:28:53Z,73,Upload files in Google App Engine,"<p>I am planning to create a web app that allows users to downgrade their visual studio project files. However, It seems Google App Engine accepts files uploading and flat file storing on the Google Server through <code>db.TextProperty</code> and <code>db.BlobProperty</code>.</p>

<p>I'll be glad anyone can provide code sample (both the client and the server side) on how this can be done.</p>
"
82180,14006,2008-09-17T11:28:23Z,2,PyQt and PyCairo,"<p>I know it's possible to place a PyCairo surface inside a Gtk Drawing Area. But I think Qt is a lot better to work with, so I've been wondering if there's anyway to place a PyCairo surface inside some Qt component?</p>
"
82607,15625,2008-09-17T12:32:01Z,1,Python + DNS : Cannot get RRSIG records: No Answer,"<p>I get DNS records from a Python program, using <a href=""http://www.dnspython.org/"" rel=""nofollow"">DNS
Python</a></p>

<p>I can get various DNSSEC-related records:</p>

<pre><code>&gt;&gt;&gt; import dns.resolver
&gt;&gt;&gt; myresolver = dns.resolver.Resolver()
&gt;&gt;&gt; myresolver.use_edns(1, 0, 1400)
&gt;&gt;&gt; print myresolver.query('sources.org', 'DNSKEY')
&lt;dns.resolver.Answer object at 0xb78ed78c&gt;
&gt;&gt;&gt; print myresolver.query('ripe.net', 'NSEC')
&lt;dns.resolver.Answer object at 0x8271c0c&gt;
</code></pre>

<p>But no RRSIG records:</p>

<pre><code>&gt;&gt;&gt; print myresolver.query('sources.org', 'RRSIG')
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
  File ""/usr/lib/python2.5/site-packages/dns/resolver.py"", line 664, in query
    answer = Answer(qname, rdtype, rdclass, response)                        
  File ""/usr/lib/python2.5/site-packages/dns/resolver.py"", line 121, in __init__
    raise NoAnswer
</code></pre>

<p>I tried several signed domains like absolight.fr or ripe.net.</p>

<p>Trying with dig, I see that there are indeed RRSIG records.</p>

<p>Checking with tcpdump, I can see that DNS Python sends the correct
query and receives correct replies (here, eight records):</p>

<pre><code>16:09:39.342532 IP 192.134.4.69.53381 &gt; 192.134.4.162.53: 22330+ [1au] RRSIG? sources.org. (40)
16:09:39.343229 IP 192.134.4.162.53 &gt; 192.134.4.69.53381: 22330 8/5/6 RRSIG[|domain]
</code></pre>

<p>DNS Python 1.6.0 -
Python 2.5.2 (r252:60911, Aug  8 2008, 09:22:44) 
[GCC 4.3.1] on linux2</p>
"
82653,70293,2008-09-17T12:37:48Z,17,"Is there any list of blog engines, written in Django?","<p>Is there any list of blog engines, written in Django?</p>
"
82831,15616,2008-09-17T12:55:00Z,2729,How do I check whether a file exists using Python?,"<p>How do I check whether a file exists, without using the <a href=""https://docs.python.org/3.6/reference/compound_stmts.html#try""><code>try</code></a> statement?</p>
"
83756,6899,2008-09-17T14:22:56Z,11,How to programmatically enable/disable network interfaces? (Windows XP),"<p>I need to enable/disable completely network interfaces from a script in Windows XP. I'm looking for a python solution, but any general way (eg WMI, some command-line à la netsh, some windows call) is welcome and will be adjusted. Thanks.</p>
"
83983,16070,2008-09-17T14:43:18Z,18,Why isn't the 'len' function inherited by dictionaries and lists in Python,"<p>example:</p>

<pre><code>a_list = [1, 2, 3]
a_list.len() # doesn't work
len(a_list) # works
</code></pre>

<p>Python being (very) object oriented, I don't understand why the 'len' function isn't inherited by the object. 
Plus I keep trying the wrong solution since it appears as the logical one to me</p>
"
85119,4919,2008-09-17T16:37:23Z,3,Running multiple sites from a single Python web framework,"<p>What are come good (or at least clever) ways of running multiple sites from a single, common Python web framework (ie: Pylons, TurboGears, etc)? I know you can do redirection based on the domain or path to rewrite the URI to point at a site-specific location and I've also seen some brutish ""<code>if site == 'site1' / elseif / elseif / etc</code>""  that I would like to avoid.</p>
"
85451,16148,2008-09-17T17:09:13Z,333,Python - time.clock() vs. time.time() - accuracy?,"<p>Which is better to use for timing in Python? time.clock() or time.time()? Which one provides more accuracy?</p>

<p>for example:</p>

<pre><code>start = time.clock()
... do something
elapsed = (time.clock() - start)
</code></pre>

<p>vs.</p>

<pre><code>start = time.time()
... do something
elapsed = (time.time() - start)
</code></pre>
"
85577,11760,2008-09-17T17:23:23Z,8,Search for host with MAC-address using Python,"<p>I'd like to search for a given MAC address on my network, all from within a Python script.  I already have a map of all the active IP addresses in the network but I cannot figure out how to glean the MAC address.  Any ideas?</p>
"
85985,3002,2008-09-17T18:09:32Z,8,How to best implement simple crash / error reporting?,"<p>What would be the best way to implement a simple crash / error reporting mechanism? </p>

<p>Details: my app is <strong>cross-platform (mac/windows/linux) and written in Python</strong>, so I just need something that will send me a small amount of text, e.g. just a timestamp and a traceback (which I already generate and show in my error dialog). </p>

<p>It would be fine if it could simply email it, but I can't think of a way to do this without including a username and password for the smtp server in the application...
Should I implement a simple web service on  the server side and have my app send it an HTTP request with the info? Any better ideas?</p>

<p>Thanks!</p>
"
86134,10428,2008-09-17T18:25:28Z,9,What are the pros and cons of the various Python implementations?,"<p>I am relatively new to Python, and I have always used the standard cpython (v2.5) implementation.  </p>

<p>I've been wondering about the other implementations though, particularly Jython and IronPython.  What makes them better?  What makes them worse?  What other implementations are there?</p>

<p>I guess what I'm looking for is a summary and list of pros and cons for each implementation.</p>
"
87317,3464,2008-09-17T20:32:04Z,10,Get list of XML attribute values in Python,"<p>I need to get a list of attribute values from child elements in Python.</p>

<p>It's easiest to explain with an example.</p>

<p>Given some XML like this:</p>

<pre><code>&lt;elements&gt;
    &lt;parent name=""CategoryA""&gt;
        &lt;child value=""a1""/&gt;
        &lt;child value=""a2""/&gt;
        &lt;child value=""a3""/&gt;
    &lt;/parent&gt;
    &lt;parent name=""CategoryB""&gt;
        &lt;child value=""b1""/&gt;
        &lt;child value=""b2""/&gt;
        &lt;child value=""b3""/&gt;
    &lt;/parent&gt;
&lt;/elements&gt;
</code></pre>

<p>I want to be able to do something like:</p>



<pre class=""lang-python prettyprint-override""><code>&gt;&gt;&gt; getValues(""CategoryA"")
['a1', 'a2', 'a3']
&gt;&gt;&gt; getValues(""CategoryB"")
['b1', 'b2', 'b3']
</code></pre>

<p>It looks like a job for XPath but I'm open to all recommendations. I'd also like to hear about your favourite Python XML libraries.</p>
"
87522,10669,2008-09-17T20:48:45Z,3,"If it is decided that our system needs an overhaul, what is the best way to go about it?","<p>We are mainting a web application that is built on Classic ASP using VBScript as the primary language. We are in agreement that our backend (framework if you will) is out dated and doesn't provide us with the proper tools to move forward in a quick manner. We have pretty much embraced the current webMVC pattern that is all over the place, and cannot do it, in a reasonable manner, with the current technology. The big missing features are proper dispatching and templating with inheritance, amongst others.</p>

<p>Currently there are two paths being discussed:</p>

<ol>
<li>Port the existing application to Classic ASP using JScript, which will allow us to hopefully go from there to .NET MSJscript without too much trouble, and eventually end up on the .NET platform (preferably the MVC stuff will be done by then, ASP.NET isn't much better than were we are on now, in our opinions). This has been argued as the safer path with less risk than the next option, albeit it might take slightly longer.</li>
<li>Completely rewrite the application using some other technology, right now the leader of the pack is Python WSGI with a custom framework, ORM, and a good templating solution. There is wiggle room here for even django and other pre-built solutions. This method would hopefully be the quickest solution, as we would probably run a beta beside the actual product, but it does have the potential for a big waste of time if we can't/don't get it right.</li>
</ol>

<p>This does not mean that our logic is gone, as what we have built over the years is fairly stable, as noted just difficult to deal with. It is built on SQL Server 2005 with heavy use of stored procedures and published on IIS 6, just for a little more background.</p>

<p>Now, the question. Has anyone taken either of the two paths above? If so, was it successful, how could it have been better, etc. We aren't looking to deviate much from doing one of those two things, but some suggestions or other solutions would potentially be helpful.</p>
"
88194,3350,2008-09-17T22:05:56Z,1,Setting Environment Variables for Mercurial Hook,"<p>I am trying to call a shell script that sets a bunch of environment variables on our server from a mercurial hook. The shell script gets called fine when a new changegroup comes in, but the environment variables aren't carrying over past the call to the shell script.</p>

<p>My hgrc file on the respository looks like this:</p>

<p><pre><code>
[hooks]
changegroup = shell_script
changegroup.env = env
</pre></code></p>

<p>I can see the output of the shell script, and then the output of the env command, but the env command doesn't include the new environment variables set by the shell script.</p>

<p>I have verified that the shell script works fine when run by itself but when run in the context of the mercurial hook it does not properly set the environment.</p>

<p>Thank you guys for any help you can provide.</p>
"
88259,NA,2008-09-17T22:16:43Z,104,How do you configure Django for simple development and deployment?,"<p>I tend to use <a href=""http://en.wikipedia.org/wiki/SQLite"">SQLite</a> when doing <a href=""http://en.wikipedia.org/wiki/Django%5F%28web%5Fframework%29"">Django</a>
development, but on a live server something more robust is
often needed (<a href=""http://en.wikipedia.org/wiki/MySQL"">MySQL</a>/<a href=""http://en.wikipedia.org/wiki/PostgreSQL"">PostgreSQL</a>, for example).
Invariably, there are other changes to make to the Django
settings as well: different logging locations / intensities,
media paths, etc.</p>

<p>How do you manage all these changes to make deployment a
simple, automated process?</p>
"
88325,577,2008-09-17T22:26:37Z,16,How do I unit test an __init__() method of a python class with assertRaises()?,"<p>I have a class:</p>

<pre><code>class MyClass:
def __init__(self, foo):
    if foo != 1:
        raise Error(""foo is not equal to 1!"")
</code></pre>

<p>and a unit test that is supposed to make sure the incorrect arg passed to the constructor properly raises an error:</p>

<pre><code>def testInsufficientArgs(self):
    foo = 0
    self.assertRaises((Error), myClass = MyClass(Error, foo))
</code></pre>

<p>But I get...</p>

<pre><code>NameError: global name 'Error' is not defined
</code></pre>

<p>Why? Where should I be defining this Error object? I thought it was built-in as a default exception type, no?</p>
"
88554,10096,2008-09-17T23:06:21Z,2,"In Python, how do you take tokenized input such as with the C++?","<p>In C++, I can have take input like this: </p>

<p>cin >> a >> b >> c;</p>

<p>And a can be int, b can be float, and c can be whatever... How do I do the same in python? </p>

<p>input() and raw_input(), the way I'm using them, don't seem to be giving me the desired results.</p>
"
88613,NA,2008-09-17T23:17:12Z,35,How do I split a string into a list?,"<p>If I have this string:</p>

<blockquote>
  <p>2+24*48/32</p>
</blockquote>

<p>what is the most efficient approach for creating this list:</p>

<blockquote>
  <p>['2', '+', '24', '*', '48', '/', '32']</p>
</blockquote>
"
89228,17085,2008-09-18T01:35:30Z,2312,Calling an external command in Python,"<p>How can I call an external command (as if I'd typed it at the Unix shell or Windows command prompt) from within a Python script?</p>
"
89909,4527,2008-09-18T04:04:58Z,54,"How do I verify that a string only contains letters, numbers, underscores and dashes?","<p>I know how to do this if I iterate through all of the characters in the string but I am looking for a more elegant method.</p>

<p>Thanks</p>
"
90052,NA,2008-09-18T04:36:00Z,2,Issue with Regular expressions in python,"<p>Ok, so i'm working on a regular expression to search out all the header information in a site.</p>

<p>I've compiled the regular expression:</p>

<pre><code>regex = re.compile(r'''
    &lt;h[0-9]&gt;\s?
    (&lt;a[ ]href=""[A-Za-z0-9.]*""&gt;)?\s?
    [A-Za-z0-9.,:'""=/?;\s]*\s?
    [A-Za-z0-9.,:'""=/?;\s]?
''',  re.X)
</code></pre>

<p>When i run this in python reg ex. tester, it works out wonderfully.</p>

<p>Sample data:</p>

<pre><code>&lt;body&gt;
    &lt;h1&gt;Dog &lt;/h1&gt;
    &lt;h2&gt;Cat &lt;/h2&gt;
    &lt;h3&gt;Fancy &lt;/h3&gt;
    &lt;h1&gt;Tall cup of lemons&lt;/h1&gt;
    &lt;h1&gt;&lt;a href=""dog.com""&gt;Dog thing&lt;/a&gt;&lt;/h1&gt;
&lt;/body&gt;
</code></pre>

<p>Now, in the REDemo, it works wonderfully.</p>

<p>When i put it in my python code, however, it only prints <code>&lt;a href=""dog.com""&gt;</code></p>

<p>Here's my python code, I'm not sure if i'm doing something wrong or if something is lost in translation. I appreciate your help.</p>

<pre><code>stories=[]
response = urllib2.urlopen('http://apricotclub.org/duh.html')
html = response.read().lower()
p = re.compile('&lt;h[0-9]&gt;\\s?(&lt;a href=\""[A-Za-z0-9.]*\""&gt;)?\\s?[A-Za-z0-9.,:\'\""=/?;\\s]*\\s?[A-Za-z0-9.,:\'\""=/?;\\s]?')
stories=re.findall(p, html)
for i in stories:
    if len(i) &gt;= 5:
        print i 
</code></pre>

<p>I should also note, that when i take out the <code>(&lt;a href=\""[A-Za-z0-9.]*\""&gt;)?</code> from the regular expression it works fine for non-link <code>&lt;hN&gt;</code> lines.</p>
"
90775,1531,2008-09-18T07:46:43Z,7,How do you load an embedded icon from an exe file with PyWin32?,"<p>I have an exe file generated with py2exe. In the setup.py I specify an icon to be embedded in the exe:</p>

<pre><code>windows=[{'script': 'my_script.py','icon_resources': [(0, 'my_icon.ico')], ...
</code></pre>

<p>I tried loading the icon using:</p>

<pre><code>hinst = win32api.GetModuleHandle(None)
hicon = win32gui.LoadImage(hinst, 0, win32con.IMAGE_ICON, 0, 0, win32con.LR_DEFAULTSIZE)
</code></pre>

<p>But this produces an (very unspecific) error:<br />
<strong>pywintypes.error: (0, 'LoadImage', 'No error message is available')</strong><br />
<br>
If I try specifying 0 as a string</p>

<pre><code>hicon = win32gui.LoadImage(hinst, '0', win32con.IMAGE_ICON, 0, 0, win32con.LR_DEFAULTSIZE)
</code></pre>

<p>then I get the error:<br />
<strong>pywintypes.error: (1813, 'LoadImage', 'The specified resource type cannot be found in the image file.')</strong><br />
<br>So, what's the correct method/syntax to load the icon?<br />
<em>Also please notice that I don't use any GUI toolkit - just the Windows API via PyWin32.</em></p>
"
91183,17451,2008-09-18T09:25:30Z,3,I need to write code in python for comparing text of two documents using fingerprint techniques,"<p>I need to write code in python language for comparing the text of document using fingerprint techniques. I do not know to take fingerprint of a document or to generate fingerprint of a document. I'm asking if anyone knows the method or has source code for generating fingerprints of documents which is stored in bits form.</p>
"
91205,17457,2008-09-18T09:29:23Z,10,Will everything in the standard library treat strings as unicode in Python 3.0?,"<p>I'm a little confused about how the standard library will behave now that Python (from 3.0) is unicode-based. Will modules such as CGI and urllib use unicode strings or will they use the new 'bytes' type and just provide encoded data?</p>
"
91666,11760,2008-09-18T11:09:50Z,2,NI CVI with Python,"<p>I'd like to integrate a Python IDLE-esque command prompt interface into an existing NI-CVI (LabWindows) application.  I've tried to follow the Python.org discussions but seem to get lost in the details.  Is there a resource out there for dummies like me?</p>
"
91810,4086,2008-09-18T11:43:45Z,16,Is there a pretty printer for python data?,"<p>Working with python interactively, it's sometimes necessary to display a result which is some arbitrarily complex data structure (like lists with embedded lists, etc.)
The default way to display them is just one massive linear dump which just wraps over and over and you have to parse carefully to read it.</p>

<p>Is there something that will take any python object and display it in a more rational manner. e.g.</p>

<pre><code>[0, 1,
    [a, b, c],
    2, 3, 4]
</code></pre>

<p>instead of:</p>

<pre><code>[0, 1, [a, b, c], 2, 3, 4]
</code></pre>

<p>I know that's not a very good example, but I think you get the idea.</p>
"
91821,3154,2008-09-18T11:45:16Z,8,Google App Engine: how can I programmatically access the properties of my Model class?,"<p>I have a model class:</p>

<pre><code>class Person(db.Model):
  first_name = db.StringProperty(required=True)
  last_name = db.StringProperty(required=True)
</code></pre>

<p>I have an instance of this class in <code>p</code>, and string <code>s</code> contains the value <code>'first_name'</code>. I would like to do something like:</p>

<pre><code>print p[s]
</code></pre>

<p>and </p>

<pre><code>p[s] = new_value
</code></pre>

<p>Both of which result in a <code>TypeError</code>.</p>

<p>Does anybody know how I can achieve what I would like?</p>
"
92230,1384652,2008-09-18T12:51:07Z,16,"Python, beyond the basics","<p>I've gotten to grips with the basics of Python and I've got a small holiday which I want to use some of to learn a little more Python. The problem is that I have no idea what to learn or where to start. I'm primarily web development but in this case I don't know how much difference it will make.</p>
"
92373,10661,2008-09-18T13:09:21Z,0,Django + FCGID on Fedora Core 9 -- what am I missing?,"<p>Fedora Core 9 seems to have <a href=""http://fastcgi.coremail.cn/"" rel=""nofollow"">FCGID</a> instead of <a href=""http://www.fastcgi.com/drupal/node/2"" rel=""nofollow"">FastCGI</a> as a pre-built, YUM-managed module.  [<em>I'd rather not have to maintain a module outside of YUM; so no manual builds for me or my sysadmins.</em>]</p>

<p>I'm trying to launch Django through the runfastcgi interface (per the <a href=""http://docs.djangoproject.com/en/dev/howto/deployment/fastcgi/"" rel=""nofollow"">FastCGI deployment</a> docs).  </p>

<p>What I'm seeing is the resulting page written to <code>error_log</code>.  It does not come back through Apache to my browser.  Further, there are a bunch of messages -- apparently from <a href=""http://trac.saddi.com/flup"" rel=""nofollow"">flup</a> and WSGIServer -- that indicate that the WSGI environment isn't defined properly.</p>

<ol>
<li><p>Is FastCGI available for FC9, and I just overlooked it?</p></li>
<li><p>Does FCGID and flup actually create the necessary WSGI environment for Django?  If so, can you share the <code>.fcgi</code> interface script you're using?  Mine is copied from <code>mysite.fcgi </code> in the Django docs.  The FCGID <a href=""http://fastcgi.coremail.cn/doc.htm"" rel=""nofollow"">Documentations</a> page drops hints that PHP and Ruby are supported -- PHP directly, and Ruby through <code>dispatch.fcgi</code> -- and Python is not supported.</p></li>
</ol>

<p><strong>Update</strong>.  The error messages are...</p>

<pre><code>WSGIServer: missing FastCGI param REQUEST_METHOD required by WSGI! 
WSGIServer: missing FastCGI param SERVER_NAME required by WSGI!
WSGIServer: missing FastCGI param SERVER_PORT required by WSGI!
WSGIServer: missing FastCGI param SERVER_PROTOCOL required by WSGI!
</code></pre>

<p>Should I abandon ship and switch to <a href=""http://www.modpython.org/"" rel=""nofollow"">mod_python</a> and give up on this approach?</p>
"
92438,5190,2008-09-18T13:17:06Z,59,Stripping non printable characters from a string in python,"<p>I use to run</p>

<pre><code>$s =~ s/[^[:print:]]//g;
</code></pre>

<p>on Perl to get rid of non printable characters. </p>

<p>In Python there's no POSIX regex classes, and I can't write [:print:] having it mean what I want. I know of no way in Python to detect if a character is printable or not. </p>

<p>What would you do? </p>

<p>EDIT: It has to support Unicode characters as well. The string.printable way will happily strip them out of the output. 
curses.ascii.isprint will return false for any unicode character.</p>
"
92533,15842,2008-09-18T13:29:56Z,4,Python module functions used in unexpected ways,"<p>Based on <a href=""http://stackoverflow.com/questions/6209/split-a-string-ignoring-quoted-sections#6243"">""Split a string by spaces in Python""</a>, which uses <em>shlex.split</em> to split a string with quotes smartly, I would be interested in hearing about other common tasks solved by non-obvious standard library functions.  </p>

<p>If this turns into <a href=""http://www.doughellmann.com/projects/PyMOTW/"" rel=""nofollow"">Module of The Week</a>, that's fine too.  </p>
"
92565,11827,2008-09-18T13:34:54Z,6,How can I highlight text in Scintilla?,"<p>I am writing an editor using <a href=""http://www.scintilla.org/"" rel=""nofollow"">Scintilla</a>.</p>

<p>I am already using a lexer to do automatic syntax highlighting but now I would like to mark search results. If I want to mark only one hit I can set the selection there, however, I would like to mark (e.g. with yellow background) all the hits.</p>

<p>I writing this in Perl but if you have suggestions in other languages that would be cool as well.</p>
"
92620,4300,2008-09-18T13:41:22Z,13,Python sockets suddenly timing out?,"<p>I came back today to an old script I had for logging into Gmail via SSL. The script worked fine last time I ran it (several months ago) but now it dies immediately with:</p>

<pre><code>&lt;urlopen error The read operation timed out&gt;
</code></pre>

<p>If I set the timeout (no matter how long), it dies even more immediately with:</p>

<pre><code>&lt;urlopen error The connect operation timed out&gt;
</code></pre>

<p>The latter is reproducible with:</p>

<pre><code>import socket
socket.setdefaulttimeout(30000)
sock = socket.socket()
sock.connect(('www.google.com', 443))
ssl = socket.ssl(sock)
</code></pre>

<p>returning:</p>

<pre><code>socket.sslerror: The connect operation timed out
</code></pre>

<p>but I can't seem to reproduce the former and, after much stepping thru the code, I have no clue what's causing any of this.</p>
"
92928,17732,2008-09-18T14:16:45Z,227,time.sleep -- sleeps thread or process?,"<p>In Python for the *nix, does <code>time.sleep()</code> block the thread or the process?</p>
"
93710,17865,2008-09-18T15:42:19Z,12,What's the easiest non-memory intensive way to output XML from Python?,"<p>Basically, something similar to System.Xml.XmlWriter - A streaming XML Writer that doesn't incur much of a memory overhead. So that rules out xml.dom and xml.dom.minidom. Suggestions?</p>
"
94153,4872,2008-09-18T16:27:26Z,13,How do I persist to disk a temporary file using Python?,"<p>I am attempting to use the 'tempfile' module for manipulating and creating text files. Once the file is ready I want to save it to disk. I thought it would be as simple as using 'shutil.copy'. However, I get a 'permission denied' IOError:</p>

<pre><code>&gt;&gt;&gt; import tempfile, shutil
&gt;&gt;&gt; f = tempfile.TemporaryFile(mode ='w+t')
&gt;&gt;&gt; f.write('foo')
&gt;&gt;&gt; shutil.copy(f.name, 'bar.txt')

Traceback (most recent call last):
  File ""&lt;pyshell#5&gt;"", line 1, in &lt;module&gt;
    shutil.copy(f.name, 'bar.txt')
  File ""C:\Python25\lib\shutil.py"", line 80, in copy
    copyfile(src, dst)
  File ""C:\Python25\lib\shutil.py"", line 46, in copyfile
    fsrc = open(src, 'rb')
IOError: [Errno 13] Permission denied: 'c:\\docume~1\\me\\locals~1\\temp\\tmpvqq3go'
&gt;&gt;&gt;
</code></pre>

<p>Is this not intended when using the 'tempfile' library? Is there a better way to do this? (Maybe I am overlooking something very trivial)</p>
"
94334,NA,2008-09-18T16:45:07Z,6,Distributed python,"<p>What is the best python framework to create distributed applications? For example to build a P2P app.</p>
"
94490,676,2008-09-18T17:03:36Z,9,How do I read selected files from a remote Zip archive over HTTP using Python?,"<p>I need to read selected files, matching on the file name, from a remote zip archive using Python. I don't want to save the full zip to a temporary file (it's not that large, so I can handle everything in memory).</p>

<p>I've already written the code and it works, and I'm answering this myself so I can search for it later. But since evidence suggests that I'm one of the dumber participants on Stackoverflow, I'm sure there's room for improvement.</p>
"
94935,1384652,2008-09-18T17:52:51Z,378,What is the difference between range and xrange functions in Python 2.X?,"<p>Apparently xrange is faster but I have no idea why it's faster (and no proof besides the anecdotal so far that it is faster) or what besides that is different about</p>

<pre><code>for i in range(0, 20):
for i in xrange(0, 20):
</code></pre>
"
94952,5113,2008-09-18T17:54:39Z,10,Python implementation of Parsec?,"<p>I recently wrote a parser in Python using Ply (it's a python reimplementation of yacc).  When I was almost done with the parser I discovered that the grammar I need to parse requires me to do some look up during parsing to inform the lexer.  Without doing a look up to inform the lexer I cannot correctly parse the strings in the language.</p>

<p>Given than I can control the state of the lexer from the grammar rules I think I'll be solving my use case using a look up table in the parser module, but it may become too difficult to maintain/test.  So I want to know about some of the other options.</p>

<p>In Haskell I would use Parsec, a library of parsing functions (known as combinators).  Is there a Python implementation of Parsec?  Or perhaps some other production quality library full of parsing functionality so I can build a context sensitive parser in Python?</p>

<p>EDIT: All my attempts at context free parsing have failed.  For this reason, I don't expect ANTLR to be useful here.</p>
"
95642,9188,2008-09-18T18:52:30Z,10,Does an application-wide exception handler make sense?,"<p>Long story short, I have a substantial Python application that, among other things, does outcalls to ""losetup"", ""mount"", etc. on Linux.  Essentially consuming system resources that must be released when complete.</p>

<p>If my application crashes, I want to ensure these system resources are properly released.</p>

<p>Does it make sense to do something like the following?</p>

<pre><code>def main():
    # TODO: main application entry point
    pass

def cleanup():
    # TODO: release system resources here
    pass

if __name__ == ""__main__"":
    try:
        main()
    except:
        cleanup()
        raise
</code></pre>

<p>Is this something that is typically done?  Is there a better way?  Perhaps the destructor in a singleton class?</p>
"
95950,1566663,2008-09-18T19:19:43Z,0,Python reading Oracle path,"<p>On my desktop I have written a small Pylons app that connects to Oracle.   I'm now trying to deploy it to my server which is running Win2k3 x64. (My desktop is 32-bit XP) The Oracle installation on the server is also 64-bit.</p>

<p>I was getting errors about loading the OCI dll, so I installed the 32 bit client into <code>C:\oracle32</code>.</p>

<p>If I add this to the <code>PATH</code> environment variable, it works great.   But I also want to run the Pylons app as a service (<a href=""http://wiki.pylonshq.com/display/pylonscookbook/How+to+run+Pylons+as+a+Windows+service"" rel=""nofollow"">using this recipe</a>) and don't want to put this 32-bit library on the path for all other applications.  </p>

<p>I tried using <code>sys.path.append(""C:\\oracle32\\bin"")</code> but that doesn't seem to work.</p>
"
96508,NA,2008-09-18T20:24:43Z,3,How to associated the cn in an ssl cert of pyOpenSSL verify_cb to a generated socket,"<p>I am a little new to pyOpenSSL.  I am trying to figure out how to associate the generated socket to an ssl cert.  verify_cb gets called which give me access to the cert and a conn but how do I associate those things when this happens:</p>

<p>cli,addr = self.server.accept()</p>
"
97513,5113,2008-09-18T22:09:21Z,2,How to load a python module into a fresh interactive shell in Komodo?,"<p>When using PyWin I can easily load a python file into a fresh interactive shell and I find this quite handy for prototyping and other exploratory tasks.</p>

<p>I would like to use Komodo as my python editor, but I haven't found a replacement for PyWin's ability to restart the shell and reload the current module.   How can I do this in Komodo?</p>

<p>It is also very important to me that when I reload I get a fresh shell.  I would prefer it if my previous interactions are in the shell history, but it is more important to me that the memory be isolated from the previous versions and attempts.</p>
"
98135,4766,2008-09-18T23:55:21Z,85,How do I use Django templates without the rest of Django?,"<p>I want to use the Django template engine in my (Python) code, but I'm not building a Django-based web site.  How do I use it without having a settings.py file (and others) and having to set the DJANGO_SETTINGS_MODULE environment variable?</p>

<p>If I run the following code:</p>

<pre><code>&gt;&gt;&gt; import django.template
&gt;&gt;&gt; from django.template import Template, Context
&gt;&gt;&gt; t = Template('My name is {{ my_name }}.')
</code></pre>

<p>I get:</p>

<pre><code>ImportError: Settings cannot be imported, because environment variable DJANGO_SETTINGS_MODULE is undefined.
</code></pre>
"
98687,2168,2008-09-19T01:36:03Z,24,What is the best solution for database connection pooling in python?,"<p>I have developed some custom DAO-like classes to meet some very specialized requirements for my project that is a server-side process that does not run inside any kind of framework.  </p>

<p>The solution works great except that every time a new request is made, I open a new connection via MySQLdb.connect.  </p>

<p>What is the best ""drop in"" solution to switch this over to using connection pooling in python?  I am imagining something like the commons DBCP solution for Java.  </p>

<p>The process is long running and has many threads that need to make requests, but not all at the same time... specifically they do quite a lot of work before brief bursts of writing out a chunk of their results.</p>

<p>Edited to add:
After some more searching I found <a href=""http://furius.ca/antiorm/"">anitpool.py</a> which looks decent, but as I'm relatively new to python I guess I just want to make sure I'm not missing a more obvious/more idiomatic/better solution.  </p>
"
100003,9951,2008-09-19T06:10:46Z,3219,What is a metaclass in Python?,"<p>What are metaclasses? What do you use them for?</p>
"
100210,5536,2008-09-19T07:19:36Z,188,What is the standard way to add N seconds to datetime.time in Python?,"<p>Given a <code>datetime.time</code> value in Python, is there a standard way to add an integer number of seconds to it, so that <code>11:34:59</code> + 3 = <code>11:35:02</code>, for example?</p>

<p>These obvious ideas don't work:</p>

<pre><code>&gt;&gt;&gt; datetime.time(11, 34, 59) + 3
TypeError: unsupported operand type(s) for +: 'datetime.time' and 'int'
&gt;&gt;&gt; datetime.time(11, 34, 59) + datetime.timedelta(0, 3)
TypeError: unsupported operand type(s) for +: 'datetime.time' and 'datetime.timedelta'
&gt;&gt;&gt; datetime.time(11, 34, 59) + datetime.time(0, 0, 3)
TypeError: unsupported operand type(s) for +: 'datetime.time' and 'datetime.time'
</code></pre>

<p>In the end I have written functions like this:</p>

<pre><code>def add_secs_to_time(timeval, secs_to_add):
    secs = timeval.hour * 3600 + timeval.minute * 60 + timeval.second
    secs += secs_to_add
    return datetime.time(secs // 3600, (secs % 3600) // 60, secs % 60)
</code></pre>

<p>I can't help thinking that I'm missing an easier way to do this though.</p>

<h3>Related</h3>

<ul>
<li><a href=""http://stackoverflow.com/questions/656297/python-time-timedelta-equivalent"">python time + timedelta equivalent</a></li>
</ul>
"
100298,14648,2008-09-19T07:40:22Z,91,How can I analyze Python code to identify problematic areas?,"<p>I have a large source repository split across multiple projects. I would like to produce a report about the health of the source code, identifying problem areas that need to be addressed.</p>

<p>Specifically, I'd like to call out routines with a high cyclomatic complexity, identify repetition, and perhaps run some lint-like static analysis to spot suspicious (and thus likely erroneous) constructs.</p>

<p>How might I go about constructing such a report?</p>
"
100624,12166,2008-09-19T09:02:43Z,20,Python on Windows - how to wait for multiple child processes?,"<p>How to wait for multiple child processes in Python on Windows, without active wait (polling)? Something like this <em>almost</em> works for me:</p>

<pre><code>proc1 = subprocess.Popen(['python','mytest.py'])
proc2 = subprocess.Popen(['python','mytest.py'])    
proc1.wait()
print ""1 finished""
proc2.wait()
print ""2 finished""
</code></pre>

<p>The problem is that when <code>proc2</code> finishes before <code>proc1</code>, the parent process will still wait for <code>proc1</code>. On Unix one would use <code>waitpid(0)</code> in a loop to get the child processes' return codes as they finish - how to achieve something like this in Python on Windows?</p>
"
100732,10708,2008-09-19T09:29:19Z,82,"Why is ""if not someobj:"" better than ""if someobj == None:"" in Python?","<p>I've seen several examples of code like this:</p>

<pre><code>if not someobj:
    #do something
</code></pre>

<p>But I'm wondering why not doing:</p>

<pre><code>if someobj == None:
    #do something
</code></pre>

<p>Is there any difference? Does one have an advantage over the other?</p>
"
101061,4702,2008-09-19T10:53:12Z,10,Building Python C extension modules for Windows,"<p>I have a C extension module and it would be nice to distribute built binaries. Setuptools makes it easy to build extensions modules on OS X and GNU/Linux, since those OSs come with GCC, but I don't know how to do it in Windows.</p>

<p>Would I need to buy a copy of Visual Studio, or does Visual Studio Express work? Can I just use Cygwin or MinGW?</p>
"
101128,17493,2008-09-19T11:09:27Z,44,How do I read text from the (windows) clipboard from python?,"<p>How do I read text from the (windows) clipboard from python?</p>
"
101174,16047,2008-09-19T11:21:57Z,12,Is there a zip-like method in .Net?,"<p>In Python there is a really neat function called <code>zip</code> which can be used to iterate through two lists at the same time:</p>

<pre><code>list1 = [1, 2, 3]
list2 = [""a"", ""b"", ""c""]
for v1, v2 in zip(list1, list2):
    print v1 + "" "" + v2
</code></pre>

<p>The above code shoul produce the following:</p>

<pre>1 a
2 b
3 c</pre>

<p>I wonder if there is a method like it available in .Net? I'm thinking about writing it myself, but there is no point if it's already available.</p>
"
101301,11439,2008-09-19T11:58:00Z,3,IronClad equivalent for Jython,"<p>For IronPython there is a project - <a href=""http://www.resolversystems.com/documentation/index.php/Ironclad"" rel=""nofollow"">IronClad</a>, that aims to transparently run C extensions in it. Is there a similiar project for Jython?</p>
"
101742,477,2008-09-19T13:19:09Z,49,How do you access an authenticated Google App Engine service from a (non-web) python client?,"<p>I have a Google App Engine app - <a href=""http://mylovelyapp.appspot.com/"">http://mylovelyapp.appspot.com/</a>
It has a page - mylovelypage</p>

<p>For the moment, the page just does <code>self.response.out.write('OK')</code></p>

<p>If I run the following Python at my computer:</p>

<pre><code>import urllib2
f = urllib2.urlopen(""http://mylovelyapp.appspot.com/mylovelypage"")
s = f.read()
print s
f.close()
</code></pre>

<p>it prints ""OK""</p>

<p>the problem is if I add <code>login:required</code> to this page in the app's yaml</p>

<p>then this prints out the HTML of the Google Accounts login page</p>

<p>I've tried ""normal"" authentication approaches. e.g.</p>

<pre><code>passman = urllib2.HTTPPasswordMgrWithDefaultRealm()

auth_handler = urllib2.HTTPBasicAuthHandler()
auth_handler.add_password(None,
                          uri='http://mylovelyapp.appspot.com/mylovelypage',
                          user='billy.bob@gmail.com',
                          passwd='billybobspasswd')
opener = urllib2.build_opener(auth_handler)
urllib2.install_opener(opener)
</code></pre>

<p>But it makes no difference - I still get the login page's HTML back.</p>

<p>I've tried <a href=""http://code.google.com/apis/accounts/docs/AuthForInstalledApps.html"">Google's ClientLogin auth API</a>, but I can't get it to work.</p>

<pre><code>h = httplib2.Http()

auth_uri = 'https://www.google.com/accounts/ClientLogin'
headers = {'Content-Type': 'application/x-www-form-urlencoded'}
myrequest = ""Email=%s&amp;Passwd=%s&amp;service=ah&amp;source=DALELANE-0.0"" % (""billy.bob@gmail.com"", ""billybobspassword"")
response, content = h.request(auth_uri, 'POST', body=myrequest, headers=headers)

if response['status'] == '200':
    authtok = re.search('Auth=(\S*)', content).group(1)

    headers = {}
    headers['Authorization'] = 'GoogleLogin auth=%s' % authtok.strip()
    headers['Content-Length'] = '0'

    response, content = h.request(""http://mylovelyapp.appspot.com/mylovelypage"", 
                                  'POST', 
                                  body="""", 
                                  headers=headers)

    while response['status'] == ""302"":        
        response, content = h.request(response['location'], 'POST', body="""", headers=headers) 

    print content
</code></pre>

<p>I do seem to be able to get some token correctly, but attempts to use it in the header when I call 'mylovelypage' still just return me the login page's HTML. :-( </p>

<p>Can anyone help, please?</p>

<p>Could I use the <a href=""http://code.google.com/p/gdata-python-client/"">GData client library</a> to do this sort of thing? From
what I've read, I think it should be able to access App Engine apps,
but I haven't been any more successful at getting the authentication working for App Engine stuff there either </p>

<p>Any pointers to samples, articles, or even just keywords I should be
searching for to get me started, would be very much appreciated.</p>

<p>Thanks!</p>
"
101754,9951,2008-09-19T13:21:12Z,1360,Is there a way to run Python on Android?,"<p>We are working on an <a href=""http://en.wikipedia.org/wiki/S60_%28software_platform%29"">S60</a> version and this platform has a nice Python API. </p>

<p>However, there is nothing official about Python on Android, but since <a href=""http://en.wikipedia.org/wiki/Jython"">Jython</a> exists, is there a way to let the snake and the robot work together?</p>
"
102394,18909,2008-09-19T14:43:24Z,4,Sorting a dict on __iter__,"<p>I am trying to sort a dict based on its key and return an iterator to the values from within an overridden iter method in a class. Is there a nicer and more efficient way of doing this than creating a new list, inserting into the list as I sort through the keys?</p>
"
102535,4834,2008-09-19T14:58:49Z,157,What can you use Python generator functions for?,"<p>I'm starting to learn Python and I've come across generator functions, those that have a yield statement in them.  I want to know what types of problems that these functions are really good at solving.</p>
"
103844,577,2008-09-19T17:21:53Z,14,How do I merge a 2D array in Python into one string with List Comprehension?,"<p>List Comprehension for me seems to be like the opaque block of granite that regular expressions are for me. I need pointers.</p>

<p>Say, I have a 2D list:</p>

<pre><code>li = [[0,1,2],[3,4,5],[6,7,8]]
</code></pre>

<p>I would like to merge this either into one long list</p>

<pre><code>li2 = [0,1,2,3,4,5,6,7,8]
</code></pre>

<p>or into a string with separators:</p>

<pre><code>s = ""0,1,2,3,4,5,6,7,8""
</code></pre>

<p>Really, I'd like to know how to do both.</p>
"
104420,3399,2008-09-19T18:41:03Z,271,How to generate all permutations of a list in Python,"<p>How do you generate all the permutations of a list in Python, independently of the type of elements in that list?</p>

<p>For example:</p>

<pre><code>permutations([])
[]

permutations([1])
[1]

permutations([1, 2])
[1, 2]
[2, 1]

permutations([1, 2, 3])
[1, 2, 3]
[1, 3, 2]
[2, 1, 3]
[2, 3, 1]
[3, 1, 2]
[3, 2, 1]
</code></pre>

<p>EDIT:
Eliben pointed to a solution that's similar to mine although simpler, so I'm choosing it as the accepted answer, although Python 2.6+ has a builtin solution in the <strong>itertools</strong> module:</p>

<pre><code>import itertools
itertools.permutations([1, 2, 3])
</code></pre>
"
104983,19215,2008-09-19T19:53:19Z,62,"What is ""thread local storage"" in Python, and why do I need it?","<p>In Python specifically, how do variables get shared between threads?</p>

<p>Although I have used <code>threading.Thread</code> before I never really understood or saw examples of how variables got shared.  Are they shared between the main thread and the children or only among the children? When would I need to use thread local storage to avoid this sharing?</p>

<p>I have seen many warnings about synchronizing access to shared data among threads by using locks but I have yet to see a really good example of the problem. </p>

<p>Thanks in advance!</p>
"
105095,16148,2008-09-19T20:07:37Z,51,Are locks unnecessary in multi-threaded Python code because of the GIL?,"<p>If you are relying on an implementation of Python that has a Global Interpreter Lock (i.e. CPython) and writing multithreaded code, do you really need locks at all?</p>

<p>If the GIL doesn't allow multiple instructions to be executed in parallel, wouldn't shared data be unnecessary to protect?</p>

<p>sorry if this is a dumb question, but it is something I have always wondered about Python on multi-processor/core machines.  </p>

<p>same thing would apply to any other language implementation that has a GIL.</p>
"
105702,6007,2008-09-19T21:17:20Z,11,Making a beta code for a public django site,"<p>I'm about to put a beta version of the site I'm working on up on the web. It needs to have a beta code to restrict access. The site is written in django.</p>

<p>I don't want to change the fundamental Auth system to accommodate a beta code, and I don't care particularly that the security of the beta code is iron-clad, just that it's a significant stumbling block.</p>

<p>How should I do this? It's a fairly large project, so adding code to every view is far from ideal.</p>

<hr>

<p>That solution works well. The Middleware Class I ended up with this this:</p>

<pre><code>from django.http import HttpResponseRedirect

class BetaMiddleware(object):
    """"""
    Require beta code session key in order to view any page.
    """"""
    def process_request(self, request):
        if request.path != '/beta/' and not request.session.get('in_beta'):
            return HttpResponseRedirect('%s?next=%s' % ('/beta/', request.path))
</code></pre>
"
106630,17160,2008-09-20T00:53:24Z,5,Why unicode() uses str() on my object only with no encoding given?,"<p>I start by creating a string variable with some <strong>non-ascii</strong> <em>utf-8</em> encoded data on it:</p>

<pre><code>&gt;&gt;&gt; text = 'á'
&gt;&gt;&gt; text
'\xc3\xa1'
&gt;&gt;&gt; text.decode('utf-8')
u'\xe1'
</code></pre>

<p>Using <code>unicode()</code> on it raises errors...</p>

<pre><code>&gt;&gt;&gt; unicode(text)
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 0: 
                    ordinal not in range(128)
</code></pre>

<p>...but if I know the encoding I can use it as second parameter:</p>

<pre><code>&gt;&gt;&gt; unicode(text, 'utf-8')
u'\xe1'
&gt;&gt;&gt; unicode(text, 'utf-8') == text.decode('utf-8')
True
</code></pre>

<p>Now if I have a class that returns this text in the <code>__str__()</code> method:</p>

<pre><code>&gt;&gt;&gt; class ReturnsEncoded(object):
...     def __str__(self):
...         return text
... 
&gt;&gt;&gt; r = ReturnsEncoded()
&gt;&gt;&gt; str(r)
'\xc3\xa1'
</code></pre>

<p><code>unicode(r)</code> seems to use <code>str()</code> on it, since it raises the same error as <code>unicode(text)</code> above:</p>

<pre><code>&gt;&gt;&gt; unicode(r)
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
UnicodeDecodeError: 'ascii' codec can't decode byte 0xc3 in position 0: 
                    ordinal not in range(128)
</code></pre>

<p>Until now everything is as planned!</p>

<p><strong>But as no one would ever expect, <code>unicode(r, 'utf-8')</code> won't even try:</strong></p>

<pre><code>&gt;&gt;&gt; unicode(r, 'utf-8')
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
TypeError: coercing to Unicode: need string or buffer, ReturnsEncoded found
</code></pre>

<p>Why? Why this inconsistent behavior? Is it a bug? is it intended? Very awkward.</p>
"
106725,19435,2008-09-20T01:39:48Z,43,How to bundle a Python application including dependencies?,"<p>I need to package my python application, its dependencies and python into a single MSI installer. The end result should desirably be:</p>

<ul>
<li>Python is installed in the standard location</li>
<li>the package and its dependencies are installed in a separate directory (possibly site-packages)</li>
<li>the installation directory should contain the python uncompressed and a standalone executable is not required</li>
</ul>
"
106766,19207,2008-09-20T01:56:25Z,22,Unit Testing File Modifications,"<p>A common task in programs I've been working on lately is modifying a text file in some way. (Hey, I'm on Linux. Everything's a file. And I do large-scale system admin.)</p>

<p>But the file the code modifies may not exist on my desktop box. And I probably don't want to modify it if it IS on my desktop.</p>

<p>I've read about unit testing in Dive Into Python, and it's pretty clear what I want to do when testing an app that converts decimal to Roman Numerals (the example in DintoP). The testing is nicely self-contained. You don't need to verify that the program PRINTS the right thing, you just need to verify that the functions are returning the right output to a given input.</p>

<p>In my case, however, we need to test that the program is modifying its environment correctly. Here's what I've come up with:</p>

<p>1) Create the ""original"" file in a standard location, perhaps /tmp.</p>

<p>2) Run the function that modifies the file, passing it the path to the file in /tmp.</p>

<p>3) Verify that the file in /tmp was changed correctly; pass/fail unit test accordingly.</p>

<p>This seems kludgy to me. (Gets even kludgier if you want to verify that backup copies of the file are created properly, etc.)  Has anyone come up with a better way?</p>
"
106850,NA,2008-09-20T02:45:45Z,5,How best to draw in the console?,"<p>I'm trying to write a console (as in terminal, not gaming console) pong game in python and I'm having trouble figuring how best to (re)draw the game.</p>

<p>I was thinking of having an 2d array as a sort of bitmap, editing the array to reflect the ball/paddles new positions and then casting each row to a string and printing it. However that means that the old ""frames"" will remain, and if the dimensions of the game are smaller than the console window, old frames will still be visible.</p>

<p>Is there a way to delete characters from the console? '\b' I've heard is unreliable.</p>

<p>Or is there an easier alternative route to outputting to the console for this sort of app?</p>
"
107405,10708,2008-09-20T06:38:38Z,97,How do you send a HEAD HTTP request in Python 2?,"<p>What I'm trying to do here is get the headers of a given URL so I can determine the MIME type. I want to be able to see if <code>http://somedomain/foo/</code> will return an HTML document or a JPEG image for example. Thus, I need to figure out how to send a HEAD request so that I can read the MIME type without having to download the content. Does anyone know of an easy way of doing this?</p>
"
107616,116,2008-09-20T08:27:11Z,3,XML-RPC: best way to handle 64-bit values?,"<p>So the official XML-RPC standard doesn't support 64-bit values.  But in these modern times, 64-bit values are increasingly common.</p>

<p>How do you handle these?  What XML-RPC extensions are the most common?  What language bindings are there?  I'm especially interested in Python and C++, but all information is appreciated.</p>
"
107675,13049,2008-09-20T08:56:59Z,10,How can I unit test responses from the webapp WSGI application in Google App Engine?,"<p>I'd like to unit test responses from the Google App Engine webapp.WSGIApplication, for example request the url '/' and test that the responses status code is 200, using <a href=""http://code.google.com/p/gaeunit"">GAEUnit</a>. How can I do this? </p>

<p>I'd like to use the webapp framework and GAEUnit, which runs within the App Engine sandbox (unfortunately <a href=""http://pythonpaste.org/webtest/"">WebTest</a> does not work within the sandbox).</p>
"
107705,8206,2008-09-20T09:17:20Z,285,Disable output buffering,"<p>Is output buffering enabled by default in Python's interpreter for <code>sys.stdout</code>?</p>

<p>If the answer is positive, what are all the ways to disable it?</p>

<p>Suggestions so far:</p>

<ol>
<li>Use the <code>-u</code> command line switch</li>
<li>Wrap <code>sys.stdout</code> in an object that flushes after every write</li>
<li>Set <code>PYTHONUNBUFFERED</code> env var</li>
<li><code>sys.stdout = os.fdopen(sys.stdout.fileno(), 'w', 0)</code></li>
</ol>

<p>Is there any other way to set some global flag in <code>sys</code>/<code>sys.stdout</code> programmatically during execution?</p>
"
108009,8206,2008-09-20T12:14:41Z,3,PLY: Token shifting problem in C parser,"<p>I'm writing a C parser using PLY, and recently ran into a problem.
This code:</p>

<pre><code>typedef int my_type;
my_type x;
</code></pre>

<p>Is correct C code, because my_type is defined as a type previously to
being used as such. I handle it by filling a type symbol table in the
parser that gets used by the lexer to differentiate between types and
simple identifiers.</p>

<p>However, while the type declaration rule ends with SEMI (the ';' token), PLY shifts the token <code>my_type</code> from the second line before deciding it's done with the first one. Because of this, I have no chance to pass the update in the type symbol table to the lexer and it
sees my_type as an identifier and not a type.</p>

<p>Any ideas for a fix ?</p>

<p>The full code is at: <a href=""http://code.google.com/p/pycparser/source/browse/trunk/src/c_parser.py"" rel=""nofollow"">http://code.google.com/p/pycparser/source/browse/trunk/src/c_parser.py</a>
Not sure how I can create a smaller example out of this. </p>

<p><strong>Edit:</strong></p>

<p>Problem solved. See my solution below.</p>
"
108134,19607,2008-09-20T13:20:50Z,3,How to apply bold style to a specific word in Excel file using Python?,"<p>I am using <code>pyexcelerator</code> Python module to generate Excel files. 
I want to apply bold style to part of cell text, but not to the whole cell.
How to do it?</p>
"
108193,12785,2008-09-20T13:46:52Z,30,Union and Intersect in Django,"<pre><code>class Tag(models.Model):
  name = models.CharField(maxlength=100)

class Blog(models.Model):
  name = models.CharField(maxlength=100)
  tags =  models.ManyToManyField(Tag)
</code></pre>

<p>Simple models just to ask my question.</p>

<p>I wonder how can i query blogs using tags in two different ways.</p>

<ul>
<li>Blog entries that are tagged with ""tag1"" or ""tag2"":
<code>Blog.objects.filter(tags_in=[1,2]).distinct()</code></li>
<li>Blog objects that are tagged with ""tag1"" and ""tag2"" : <strong>?</strong></li>
<li>Blog objects that are tagged with exactly ""tag1"" and ""tag2"" and nothing else : <strong>??</strong></li>
</ul>

<p><hr /></p>

<p>Tag and Blog is just used for an example.</p>
"
108523,9127,2008-09-20T15:42:39Z,6,How should I best emulate and/or avoid enum's in Python?,"<p>I've been using a small class to emulate Enums in some Python projects. Is there a better way or does this make the most sense for some situations?</p>

<p>Class code here:</p>

<pre><code>class Enum(object):
'''Simple Enum Class
Example Usage:
&gt;&gt;&gt; codes = Enum('FOO BAR BAZ') # codes.BAZ will be 2 and so on ...'''
def __init__(self, names):
    for number, name in enumerate(names.split()):
        setattr(self, name, number)
</code></pre>
"
108586,15842,2008-09-20T16:07:18Z,3,"Topological sort, recursive, using generators","<p>Data:  a dependency list, already verified to be acyclic.  So here, 'a' depends on 'b','c' (c depends on d), etc...  </p>

<pre><code>A = { 'a' :  dict(b=1, c=1),
    'c' : dict(d=1),
    'd' : dict(e=1,f=1,g=1),
    'h' : dict(j=1)
    }
</code></pre>

<p>I'd like to have a top-down, recursive solution to let's say, find the chain starting at 
'a':  a, c, d, e, g, f, b</p>

<p>So, right now (a non-generator solution):</p>

<pre><code>def get_all(D,k):
    L = []
    def get2(D,k):
        L.append(k)
        for ii in D.get(k,[]):
            get2(D, ii)
    get2(D,k)
    return L
</code></pre>

<p>Obviously, this is pretty weak :)  I've been banging my head about how to how to get yields inside there, and I'd appreciate any py-foo y'all can bring to this.</p>
"
108822,8548,2008-09-20T17:34:24Z,40,Delete all data for a kind in Google App Engine,"<p>I would like to wipe out all data for a specific kind in Google App Engine. What is the
best way to do this?
I wrote a delete script (hack), but since there is so much data is
timeout's out after a few hundred records. </p>
"
108848,145,2008-09-20T17:42:53Z,36,Python Music Library?,"<p>I'm looking at writing a little drum machine in Python for fun.  I've googled some and found the python pages on <a href=""http://wiki.python.org/moin/PythonInMusic"">music</a> and <a href=""http://wiki.python.org/moin/Audio/"">basic audio</a> as well as a StackOverflow question on <a href=""http://stackoverflow.com/questions/45385/good-python-library-for-generating-audio-files"">generating audio files</a>, but <strong><em>what I'm looking for is a decent library for music creation</em></strong>.  Has anyone on here tried to do something like this before?  If so, what was your solution?  What, either of the ones I've found, or something I haven't found, would be a decent library for audio manipulation?</p>

<p>Minimally, I'd like to be able to do something similar to <a href=""http://audacity.sourceforge.net/"">Audacity's</a> scope within python, but if anyone knows of a library that can do more... I'm all ears.</p>
"
108892,745,2008-09-20T18:07:40Z,39,Is there something like 'autotest' for Python unittests?,"<p>Basically, growl notifications (or other callbacks) when tests break or pass. <strong>Does anything like this exist?</strong></p>

<p>If not, it should be pretty easy to write.. Easiest way would be to..</p>

<ol>
<li>run <code>python-autotest myfile1.py myfile2.py etc.py</code></li>
<li>Check if files-to-be-monitored have been modified (possibly just if they've been saved).</li>
<li>Run any tests in those files.</li>
<li>If a test fails, but in the previous run it passed, generate a growl alert. Same with tests that fail then pass.</li>
<li>Wait, and repeat steps 2-5.</li>
</ol>

<p>The problem I can see there is if the tests are in a different file. The simple solution would be to run all the tests after each save.. but with slower tests, this might take longer than the time between saves, and/or could use a lot of CPU power etc..</p>

<p>The best way to do it would be to actually see what bits of code have changed, if function abc() has changed, only run tests that interact with this.. While this would be great, I think it'd be extremely complex to implement?</p>

<p>To summarise:</p>

<ul>
<li>Is there anything like the Ruby tool <code>autotest</code> (part of the <a href=""http://www.zenspider.com/ZSS/Products/ZenTest/"">ZenTest package</a>), but for Python code?</li>
<li>How do you check which functions have changed between two revisions of a script?</li>
<li>Is it possible to determine which functions a command will call? (Somewhat like a reverse traceback)</li>
</ul>
"
109087,422,2008-09-20T19:30:24Z,66,How to get instance variables in Python?,"<p>Is there a built-in method in Python to get an array of all a class' instance variables? For example, if I have this code:</p>

<pre><code>class hi:
  def __init__(self):
    self.ii = ""foo""
    self.kk = ""bar""
</code></pre>

<p>Is there a way for me to do this:</p>

<pre><code>&gt;&gt;&gt; mystery_method(hi)
[""ii"", ""kk""]
</code></pre>

<p>Thanks guys!</p>

<p>Edit: I originally had asked for class variables erroneously. Thanks to all who brought this to my attention!</p>
"
109705,NA,2008-09-20T23:02:35Z,9,Python signal woes: SIGQUIT handler delays execution if SIGQUIT recieved during execution of another signal handler?,"<p>The following program is very simple: it outputs a single dot each half a second. If it recieves a <strong>SIGQUIT</strong>, it proceeds to output ten <strong>Q</strong>s. If it recieves a <strong>SIGTSTP</strong> <em>(<kbd>Ctrl</kbd>-<kbd>Z</kbd>)</em>, it outputs ten <strong>Z</strong>s.</p>

<p>If it recieves a <strong>SIGTSTP</strong> while printing <strong>Q</strong>s, it will print ten <strong>Z</strong>s after it's done with the ten <strong>Q</strong>s. This is a good thing.</p>

<p>However, if it recieves a <strong>SIGQUIT</strong> while printing <strong>Z</strong>s, it fails to print <strong>Q</strong>s after them. Instead, it prints them out only after I manually terminate execution via a KeyboardInterrupt. I want the <strong>Q</strong>s to be printed immediately after the <strong>Z</strong>s.</p>

<p>This happens using Python2.3.</p>

<p>I hope I've made a silly, easily-correctable mistake somewhere. What am I doing wrong? Muchas gracias. ^^</p>

<pre><code>#!/usr/bin/python

from signal import *
from time import sleep
from sys import stdout

def write(text):
    stdout.write(text)
    stdout.flush()

def process_quit(signum, frame):
    for i in range(10):
        write(""Q"")
        sleep(0.5)

def process_tstp(signum, frame):
    for i in range(10):
        write(""Z"")
        sleep(0.5)

signal(SIGQUIT, process_quit)
signal(SIGTSTP, process_tstp)

while 1:
    write('.')
    sleep(0.5)
</code></pre>
"
110378,2592,2008-09-21T06:15:13Z,42,Change the width of form elements created with ModelForm in Django,"<p>How can i change the width of a textarea form element if i used ModelForm to create it?</p>

<p>Here is my product class:</p>

<pre><code>class ProductForm(ModelForm):
    long_desc = forms.CharField(widget=forms.Textarea)
    short_desc = forms.CharField(widget=forms.Textarea)
    class Meta:
        model = Product
</code></pre>

<p>And the template code...</p>

<pre><code>{% for f in form %}
    {{ f.name }}:{{ f }}
{% endfor %}
</code></pre>

<p><code>f</code> is the actual form element...</p>
"
110498,2168,2008-09-21T07:49:10Z,24,Is there an easy way to request a URL in python and NOT follow redirects?,"<p>Looking at the source of urllib2 it looks like the easiest way to do it would be to subclass HTTPRedirectHandler and then use build_opener to override the default HTTPRedirectHandler, but this seems like a lot of (relatively complicated) work to do what seems like it should be pretty simple.</p>
"
110760,13565,2008-09-21T10:55:46Z,3,Report generation,"<p>I am writing a web app using TurboGears, and in that app the users must be able to generate different reports.
The data the reports need is stored in a database (MySQL).
The reports must be returned either as a easily printable html document, or a pdf file.</p>

<p>I have previously used jasper and iReport for creating the documents, but if I can avoid having to fire up Java to create the report I would be happy.</p>

<p>Ideally I would like to specify reports in a easily readable markup language and then just feed the template data with some kind of library that produces the report.</p>

<p>I gladly accept any kind of hints on how I should go about generating these reports!</p>
"
110774,2592,2008-09-21T11:05:29Z,8,Re-ordering entries in a model using drag-and-drop,"<p>Say I have a blogging app in Django. How can i re-order the posts using a draggable table in the default admin?</p>

<p>It would be best if i didn't have to add any extra fields to the model, but if i really have to i can.</p>
"
110803,7437,2008-09-21T11:27:24Z,26,Dirty fields in django,"<p>In my app i need to save changed values (old and new) when model gets saved. Any examples or working code?</p>

<p>I need this for premoderation of content. For example, if user changes something in model, then administrator can see all changes in separate table and then decide to apply them or not.</p>
"
110923,10577,2008-09-21T12:40:04Z,32,Close a tkinter window?,"<p>How do I end a Tkinter program? Let's say I have this code:</p>

<pre><code>from Tkinter import *

def quit():
    # code to exit

root = Tk()
Button(root, text=""Quit"", command=quit).pack()
root.mainloop()
</code></pre>

<p>How should I define the <code>quit</code> function?</p>
"
111155,10577,2008-09-21T14:46:20Z,43,How do I handle the window close event in Tkinter?,"<p>How do I handle the window close event (user clicking the 'X' button) in a Python Tkinter program?</p>
"
111234,9951,2008-09-21T15:34:32Z,170,"What is a ""callable"" in Python?","<p>Now that it's clear <a href=""http://stackoverflow.com/questions/100003/what-is-a-metaclass-in-python"">what a metaclass is</a>, there is an associated concept that I use all the time without knowing what it really means. </p>

<p>I suppose everybody made once a mistake with parenthesis, resulting  in an ""object is not callable"" exception. What's more, using <code>__init__</code> and <code>__new__</code> lead to wonder what this bloody <code>__call__</code> can be used for.</p>

<p>Could you give me some explanations, including examples with the magic method ?</p>
"
111934,10577,2008-09-21T20:08:56Z,3,How do I find out the size of a canvas item in Python/Tkinter?,"<p>I want to create some text in a canvas:</p>

<pre><code>myText = self.canvas.create_text(5, 5, anchor=NW, text=""TEST"")
</code></pre>

<p>Now how do I find the width and height of myText?</p>
"
111945,161922,2008-09-21T20:11:05Z,166,Is there any way to do HTTP PUT in python,"<p>I need to upload some data to a server using HTTP <code>PUT</code> in python. From my brief reading of the urllib2 docs, it only does HTTP <code>POST</code>. Is there any way to do an HTTP <code>PUT</code> in python?</p>
"
111954,432,2008-09-21T20:13:18Z,35,"Using Python's ftplib to get a directory listing, portably","<p>You can use ftplib for full FTP support in Python. However the preferred way of getting a directory listing is:</p>

<pre><code># File: ftplib-example-1.py

import ftplib

ftp = ftplib.FTP(""www.python.org"")
ftp.login(""anonymous"", ""ftplib-example-1"")

data = []

ftp.dir(data.append)

ftp.quit()

for line in data:
    print ""-"", line
</code></pre>

<p>Which yields:</p>

<pre><code>$ python ftplib-example-1.py
- total 34
- drwxrwxr-x  11 root     4127         512 Sep 14 14:18 .
- drwxrwxr-x  11 root     4127         512 Sep 14 14:18 ..
- drwxrwxr-x   2 root     4127         512 Sep 13 15:18 RCS
- lrwxrwxrwx   1 root     bin           11 Jun 29 14:34 README -&gt; welcome.msg
- drwxr-xr-x   3 root     wheel        512 May 19  1998 bin
- drwxr-sr-x   3 root     1400         512 Jun  9  1997 dev
- drwxrwxr--   2 root     4127         512 Feb  8  1998 dup
- drwxr-xr-x   3 root     wheel        512 May 19  1998 etc
...
</code></pre>

<p>I guess the idea is to parse the results to get the directory listing. However this listing is directly dependent on the FTP server's way of formatting the list. It would be very messy to write code for this having to anticipate all the different ways FTP servers might format this list.</p>

<p>Is there a portable way to get an array filled with the directory listing?</p>

<p>(The array should only have the folder names.)</p>
"
111983,16584,2008-09-21T20:23:02Z,27,python.array versus numpy.array,"<p>If you are creating a 1d array in Python is there any benefit to using the NumPy package?</p>
"
112263,10577,2008-09-21T21:45:05Z,2,How do I overlap widgets with the Tkinter pack geometry manager?,"<p>I want to put a <code>Canvas</code> with an image in my window, and then I want to <em>pack</em> widgets on top of it, so the Canvas acts as a background. </p>

<p>Is it possible to have two states for the <code>pack</code> manager: one for one set of widgets and another for another set?</p>
"
112483,NA,2008-09-21T23:10:42Z,1,"Does anyone know of a widget for a desktop toolkit(GTK, Qt, WX) for displaying a map of US states?","<p>I'm specifically looking for one that lets me display a map of US states with each one as it's own ""object"" in the sense that I can control the color, on click, and on mouseover of each one individually.  GTK is my personal preference, but at this point I'd settle for just about anything.  The application itself will be written in Python, FWIW.</p>
"
112532,1615,2008-09-21T23:28:06Z,7,List all words in a dictionary that start with <user input>,"<p>How would a go about making a program where the user enters a string, and the program generates a list of words beginning with that string?</p>

<p>Ex:<br />
User: ""abd""<br />
Program:abdicate, abdomen, abduct...</p>

<p>Thanks!</p>

<p><hr /></p>

<p>Edit:  I'm using python, but I assume that this is a fairly language-independent problem.</p>
"
112564,18866,2008-09-21T23:37:58Z,3,How do I use genshi.builder to programmatically build an HTML document?,"<p>I recently discovered the genshi.builder module. It reminds me of Divmod Nevow's Stan module. How would one use genshi.builder.tag to build an HTML document with a particular doctype? Or is this even a good thing to do? If not, what is the <em>right</em> way?</p>
"
112698,13009,2008-09-22T00:49:12Z,112,py2exe - generate single executable file,"<p>I thought I heard that <a href=""http://www.py2exe.org/"">py2exe</a> was able to do this, but I never figured it out.  Has anyone successfully done this?  Can I see your setup.py file, and what command line options you used?</p>

<p>Basically I'm thinking of it giving me a single executable file that does something like unzips itself to maybe /temp and runs.</p>
"
112768,NA,2008-09-22T01:28:57Z,2,"How would one log into a phpBB3 forum through a Python script using urllib, urllib2 and ClientCookie?","<p>(ClientCookie is a module for (automatic) cookie-handling: <a href=""http://wwwsearch.sourceforge.net/ClientCookie"" rel=""nofollow"">http://wwwsearch.sourceforge.net/ClientCookie</a>)</p>

<pre><code># I encode the data I'll be sending:
data = urllib.urlencode({'username': 'mandark', 'password': 'deedee'})

# And I send it and read the page:
page = ClientCookie.urlopen('http://www.forum.com/ucp.php?mode=login', data)
output = page.read()
</code></pre>

<p>The script doesn't log in, but rather seems to get redirected back to the same login page asking it for a username and password. What am I doing wrong?</p>

<p>Any help would be greatly appreciated! Thanks!</p>
"
112970,13009,2008-09-22T03:04:14Z,119,Python - When to use file vs open,"<p>What's the difference between file and open in Python?  When should I use which one?  (Say I'm in 2.5)</p>
"
113007,115,2008-09-22T03:15:31Z,9,Writing to the windows logs in Python,"<p>Is it possible to write to the windows logs in python?</p>
"
113170,NA,2008-09-22T04:25:22Z,3,What are the Python equivalents of the sighold and sigrelse functions found in C?,"<p>It appears the Python signal module doesn't have anything similar to the sighold and sigrelse functions found in C, using signal.h. Are there Python equivalents of <em>any</em> sort?</p>

<p>Many thanks!</p>
"
113185,3715,2008-09-22T04:30:19Z,9,How do I use owfs to read an iButton temperature logger?,"<p>I've installed <a href=""http://www.owfs.org/"" rel=""nofollow""><code>owfs</code></a> and am trying to read the data off a <a href=""http://www.maxim-ic.com/quick_view2.cfm/qv_pk/4088"" rel=""nofollow"">iButton temperature logger</a>.</p>

<p><code>owfs</code> lets me mount the iButton as a fuse filesystem and I can see all the data.  I'm having trouble figuring out what is the best way to access the data though.  I can get individual readings by <code>cat</code>ting the files, e.g. <code>cat onewire/{deviceid}/log/temperature.1</code>, but the <code>onewire/{deviceid}/log/temperature.ALL</code> file is ""broken"" (possible too large, as <code>histogram/temperature.ALL</code> work fine).  </p>

<p>A python script to read all files seems to work but takes a very long time.  Is there a better way to do it?  Does anyone have any examples?</p>

<p>I'm using Ubuntu 8.04 and couldn't get the java ""one wire viewer"" app to run.</p>

<p><strong>Update</strong>: Using <a href=""http://owfs.sourceforge.net/owpython.html"" rel=""nofollow""><code>owpython</code></a> (installed with owfs), I can get the current temperature but can't figure out how to get access to the recorded logs:</p>

<pre><code>&gt;&gt;&gt; import ow
&gt;&gt;&gt; ow.init(""u"") # initialize USB
&gt;&gt;&gt; ow.Sensor(""/"").sensorList()
[Sensor(""/81.7FD921000000""), Sensor(""/21.C4B912000000"")]
&gt;&gt;&gt; x = ow.Sensor(""/21.C4B912000000"")
&gt;&gt;&gt; print x.type, x.temperature
DS1921           22
</code></pre>

<p><code>x.log</code> gives an <code>AttributeError</code>.</p>
"
113341,18676,2008-09-22T05:49:00Z,2,Python-passing variable between classes,"<p>I'm trying to create a character generation wizard for a game. In one class I calculate the attributes of the character. In a different class, I'm displaying to the user which specialties are available based on the attributes of the character. However, I can't remember how to pass variables between different classes.</p>

<p>Here is an example of what I have:</p>

<pre><code>class BasicInfoPage(wx.wizard.WizardPageSimple):            
    def __init__(self, parent, title):
         wiz.WizardPageSimple.__init__(self, parent)
         self.next = self.prev = None
         self.sizer = makePageTitle(self, title)

                    &lt;---snip---&gt;

         self.intelligence = self.genAttribs()

class MOS(wx.wizard.WizardPageSimple):
     def __init__(self, parent, title):
         wiz.WizardPageSimple.__init__(self, parent)
         self.next = self.prev = None
         self.sizer = makePageTitle(self, title)
      def eligibleMOS(self, event):
          if self.intelligence &gt;= 12: 
               self.MOS_list.append(""Analyst"")
</code></pre>

<p>The problem is that I can't figure out how to use the ""intelligence"" variable from the BasicInfoPage class to the MOS class. I've tried several different things from around the Internet but nothing seems to work. What am I missing?</p>

<p><strong>Edit</strong> I realized after I posted this that I didn't explain it that well. I'm trying to create a computer version of the Twilight 2000 RPG from the 1980s.</p>

<p>I'm using wxPython to create a wizard; the parent class of my classes is the Wizard from wxPython. That wizard will walk a user through the creation of a character, so the Basic Information page (class BasicInfoPage) lets the user give the character's name and ""roll"" for the character's attributes. That's where the ""self.intelligence"" comes from.</p>

<p>I'm trying to use the attributes created her for a page further on in the wizard, where the user selects the speciality of the character. The specialities that are available depend on the attributes the character has, e.g. if the intelligence is high enough, the character can be an Intel Anaylst.</p>

<p>It's been several years since I've programmed, especially with OOP ideas. That's why I'm confused on how to create what's essentially a global variable with classes and methods. </p>
"
113534,20211,2008-09-22T07:02:04Z,12,Is there a function in Python to split a string without ignoring the spaces?,"<p>Is there a function in Python to split a string without ignoring the spaces in the resulting list? </p>

<p>E.g:</p>

<pre><code>s=""This is the string I want to split"".split()
</code></pre>

<p>gives me</p>

<pre><code>&gt;&gt;&gt; s
['This', 'is', 'the', 'string', 'I', 'want', 'to', 'split']
</code></pre>

<p>I want something like</p>

<pre><code>['This',' ','is',' ', 'the',' ','string', ' ', .....]
</code></pre>
"
113655,20211,2008-09-22T07:40:50Z,41,Is there a function in python to split a word into a list?,"<p>Is there a function in python to split a word into a list of single letters? e.g:</p>

<pre><code>s=""Word to Split""
</code></pre>

<p>to get</p>

<pre><code>wordlist=['W','o','r','d','','t','o' ....]
</code></pre>
"
114112,2592,2008-09-22T10:11:48Z,12,Deploying Django: How do you do it?,"<p>I have tried following guides like <a href=""http://docs.djangoproject.com/en/dev/howto/deployment/modpython/"">this one</a> but it just didnt work for me.</p>

<p><strong>So my question is this:</strong> What is a good guide for deploying Django, and how do you deploy your Django.</p>

<p>I keep hearing that capastrano is pretty nifty to use, but i have no idea as to how to work it or what it does (apart from automation of deploying code), or even if i want/need to use it or not.</p>
"
114214,16070,2008-09-22T10:49:43Z,190,"Class method differences in Python: bound, unbound and static","<p>What is the difference between the following class methods?</p>

<p>Is it that one is static and the other is not?</p>

<pre><code>class Test(object):
  def method_one(self):
    print ""Called method_one""

  def method_two():
    print ""Called method_two""

a_test = Test()
a_test.method_one()
a_test.method_two()
</code></pre>
"
114283,5357,2008-09-22T11:11:12Z,7,Where can a save confirmation page be hooked into the Django admin? (similar to delete confirmation),"<p>I want to emulate the delete confirmation page behavior before saving 
certain models in the admin.  In my case if I change one object, 
certain others should be deleted as they depend upon the object's now 
out-of-date state. </p>

<p>I understand where to implement the actual cascaded updates (inside 
the parent model's save method), but I don't see a quick way to ask 
the user for confirmation (and then rollback if they decide not to 
save). I suppose I could implement some weird confirmation logic 
directly inside the save method (sort of a two phase save) but that 
seems...ugly. </p>

<p>Any thoughts, even general pointers into the django codebase? </p>

<p>Thanks!</p>
"
114597,5179,2008-09-22T12:36:53Z,5,What is the fastest way to scale and display an image in Python?,"<p>I am required to display a two dimensional numpy.array of int16 at 20fps or so. Using Matplotlib's imshow chokes on anything above 10fps. There obviously are some issues with scaling and interpolation. I should add that the dimensions of the array are not known, but will probably be around thirty by four hundred. </p>

<p>These are data from a sensor that are supposed to have a real-time display, so the data has to be re-sampled on the fly.</p>
"
114830,11575,2008-09-22T13:22:28Z,88,Is a Python dictionary an example of a hash table?,"<p>One of the basic data structures in Python is the dictionary, which allows one to record ""keys"" for looking up ""values"" of any type.  Is this implemented internally as a hash table?  If not, what is it?</p>
"
115316,2183,2008-09-22T14:58:53Z,102,How can I consume a WSDL (SOAP) web service in Python?,"<p>I want to use a WSDL SOAP based web service in Python. I have looked at the <a href=""http://diveintopython.net/soap_web_services/"">Dive Into Python</a> code but the SOAPpy module does not work under Python 2.5.</p>

<p>I have tried using <a href=""https://fedorahosted.org/suds"">suds</a> which works partly, but breaks with certain types (suds.TypeNotFound: Type not found: 'item').</p>

<p>I have also looked at <a href=""http://trac.optio.webfactional.com/wiki"">Client</a> but this does not appear to support WSDL.</p>

<p>And I have looked at <a href=""http://pywebsvcs.sourceforge.net/zsi.html"">ZSI</a> but it looks very complex. Does anyone have any sample code for it?</p>

<p>The WSDL is <a href=""https://ws.pingdom.com/soap/PingdomAPI.wsdl"">https://ws.pingdom.com/soap/PingdomAPI.wsdl</a> and works fine with the PHP 5 SOAP client.</p>
"
115744,20545,2008-09-22T16:01:52Z,5,What is the simplest way to offer/consume web services in jython?,"<p>I have an application for Tomcat which needs to offer/consume web services. Since Java web services are a nightmare (xml, code generation, etc.) compared with what is possible in Python, I would like to learn from your experience using jython instead of java for offerring/consuming web services.</p>

<p>What I have done so far involves adapting <a href=""http://pywebsvcs.sourceforge.net/"">http://pywebsvcs.sourceforge.net/</a> to <a href=""http://www.jython.org"">Jython</a>. I still get errors (namespaces, types and so), although some of it is succesful for the simplest services.</p>
"
115764,2900,2008-09-22T16:03:41Z,3,"Which is more pythonic, factory as a function in a module, or as a method on the class it creates?","<p>I have some Python code that creates a Calendar object based on parsed VEvent objects from and iCalendar file.</p>

<p>The calendar object just has a method that adds events as they get parsed.</p>

<p>Now I want to create a factory function that creates a calendar from a file object, path, or URL.</p>

<p>I've been using the <a href=""http://codespeak.net/icalendar/"" rel=""nofollow"">iCalendar python module</a>, which implements a factory function as a class method directly on the Class that it returns an instance of:</p>

<pre><code>cal = icalendar.Calendar.from_string(data)
</code></pre>

<p>From what little I know about Java, this is a common pattern in Java code, though I seem to find more references to a factory method being on a different class than the class you actually want to instantiate instances from.</p>

<p>The question is, is this also considered Pythonic ? Or is it considered more pythonic to just create a module-level method as the factory function ?</p>
"
115773,852,2008-09-22T16:04:54Z,15,How do I configure the ip address with CherryPy?,"<p>I'm using python and CherryPy to create a simple internal website that about 2 people use. I use the built in webserver with CherryPy.quickstart and never messed with the config files. I recently changed machines so I installed the latest Python and cherrypy and when I run the site I can access it from localhost:8080 but not through the IP or the windows machine name. It could be a machine configuration difference or a newer version of CherryPy or Python. Any ideas how I can bind to the correct IP address?</p>

<p>Edit: to make it clear, I currently don't have a config file at all.</p>
"
115866,NA,2008-09-22T16:22:16Z,6,Convert mysql timestamp to epoch time in python,"<p>Convert mysql timestamp to epoch time in python - is there an easy way to do this?</p>
"
115974,14262,2008-09-22T16:39:09Z,10,What would be the simplest way to daemonize a python script in Linux?,"<p>What would be the simplest way to daemonize a python script in Linux ? I need that this works with every flavor of Linux, so it should only use python based tools. </p>
"
115977,3446,2008-09-22T16:39:34Z,89,Using Pylint with Django,"<p>I would very much like to integrate <a href=""http://www.logilab.org/857"">pylint</a> into the build process for
my python projects, but I have run into one show-stopper:  One of the
error types that I find extremely useful--:<code>E1101: *%s %r has no %r
member*</code>--constantly reports errors when using common django fields,
for example:</p>

<pre><code>E1101:125:get_user_tags: Class 'Tag' has no 'objects' member
</code></pre>

<p>which is caused by this code:</p>

<pre><code>def get_user_tags(username):
   """"""
   Gets all the tags that username has used.

   Returns a query set.
   """"""
   return Tag.objects.filter(  ## This line triggers the error.
       tagownership__users__username__exact=username).distinct()

# Here is the Tag class, models.Model is provided by Django:
class Tag(models.Model):
   """"""
   Model for user-defined strings that help categorize Events on
   on a per-user basis.
   """"""
   name = models.CharField(max_length=500, null=False, unique=True)

   def __unicode__(self):
       return self.name
</code></pre>

<p>How can I tune Pylint to properly take fields such as objects into account?  (I've also looked into the Django source, and I have been unable to find the implementation of <code>objects</code>, so I suspect it is not ""just"" a class field.  On the other hand, I'm fairly new to python, so I may very well have overlooked something.)</p>

<p><strong>Edit:</strong> The only way I've found to tell pylint to not warn about these warnings is by blocking all errors of the type (E1101) which is not an acceptable solution, since that is (in my opinion) an extremely useful error.  If there is another way, without augmenting the pylint source, please point me to specifics :)</p>

<p>See <a href=""http://creswick.github.io/blog/2008/09/05/wrestling-python/"">here</a> for a summary of the problems I've had with <code>pychecker</code> and <code>pyflakes</code> -- they've proven to be far to unstable for general use.  (In pychecker's case, the crashes originated in the pychecker code -- not source it was loading/invoking.)</p>
"
116139,372664,2008-09-22T17:08:12Z,40,How can I search a word in a Word 2007 .docx file?,"<p>I'd like to search a Word 2007 file (.docx) for a text string, e.g., ""some special phrase"" that could/would be found from a search within Word.  </p>

<p>Is there a way from Python to see the text?  I have no interest in formatting - I just want to classify documents as having or not having ""some special phrase"".</p>
"
116494,17160,2008-09-22T18:10:41Z,3,python regular expression to split paragraphs,"<p>How would one write a regular expression to use in python to split paragraphs?</p>

<p>A paragraph is defined by 2 linebreaks (\n). But one can have any ammount of spaces/tabs together with the line breaks, and it still should be considered as a paragraph.</p>

<p>I am using python so the solution can use python's <a href=""http://docs.python.org/lib/re-syntax.html"" rel=""nofollow"" title=""Python re syntax"">regular expression syntax</a> which is extended. (can make use of <code>(?P...)</code> stuff)</p>

<h1>Examples:</h1>

<pre><code>the_str = 'paragraph1\n\nparagraph2'
# splitting should yield ['paragraph1', 'paragraph2']

the_str = 'p1\n\t\np2\t\n\tstill p2\t   \n     \n\tp3'
# should yield ['p1', 'p2\t\n\tstill p2', 'p3']

the_str = 'p1\n\n\n\tp2'
# should yield ['p1', '\n\tp2']
</code></pre>

<p>The best I could come with is: <code>r'[ \t\r\f\v]*\n[ \t\r\f\v]*\n[ \t\r\f\v]*'</code> but that is ugly. Anything better?</p>

<p><strong>EDIT</strong>:</p>

<h1>Suggestions rejected:</h1>

<p><code>r'\s*?\n\s*?\n\s*?'</code> -> That would make example 2 and 3 fail, since <code>\s</code> includes <code>\n</code>, so it would allow paragraph breaks with more than 2 <code>\n</code>s.</p>
"
116657,19435,2008-09-22T18:35:28Z,23,How do you create an osx application/dmg from a python package?,"<p>I want to create a mac osx application from python package and then put it in a disk image. </p>

<p>Because I load some resources out of the package, the package should <strong>not</strong> reside in a zip file.</p>

<p>The resulting disk image should display the background picture to ""drag here -> applications"" for installation.</p>
"
116894,19031,2008-09-22T19:18:21Z,3,Best practices for manipulating database result sets in Python?,"<p>I am writing a simple Python web application that consists of several pages of business data formatted for the iPhone. I'm comfortable programming Python, but I'm not very familiar with Python ""idiom,"" especially regarding classes and objects. Python's object oriented design differs somewhat from other languages I've worked with. So, even though my application is working, I'm curious whether there is a better way to accomplish my goals.</p>

<p>Specifics: How does one typically implement the request-transform-render database workflow in Python? Currently, I am using pyodbc to fetch data, copying the results into attributes on an object, performing some calculations and merges using a list of these objects, then rendering the output from the list of objects. (Sample code below, SQL queries redacted.) Is this sane? Is there a better way? Are there any specific ""gotchas"" I've stumbled into in my relative ignorance of Python? I'm particularly concerned about how I've implemented the list of rows using the empty ""Record"" class.</p>

<pre><code>class Record(object):
    pass

def calculate_pnl(records, node_prices):
    for record in records:
        try:
            # fill RT and DA prices from the hash retrieved above
            if hasattr(record, 'sink') and record.sink:
                record.da = node_prices[record.sink][0] - node_prices[record.id][0]
                record.rt = node_prices[record.sink][1] - node_prices[record.id][1]
            else:
                record.da = node_prices[record.id][0]
                record.rt = node_prices[record.id][1]

            # calculate dependent values: RT-DA and PNL
            record.rtda = record.rt - record.da
            record.pnl = record.rtda * record.mw
        except:
            print sys.exc_info()

def map_rows(cursor, mappings, callback=None):
    records = []
    for row in cursor:
        record = Record()
        for field, attr in mappings.iteritems():
            setattr(record, attr, getattr(row, field, None))
        if not callback or callback(record):
            records.append(record)

    return records

def get_positions(cursor):
    # get the latest position time
    cursor.execute(""SELECT latest data time"")
    time = cursor.fetchone().time
    hour = eelib.util.get_hour_ending(time)

    # fetch the current positions
    cursor.execute(""SELECT stuff FROM atable"", (hour))

    # read the rows
    nodes = {}
    def record_callback(record):
        if abs(record.mw) &gt; 0:
            if record.id: nodes[record.id] = None
            return True
        else:
            return False
    records = util.map_rows(cursor, {
        'id': 'id',
        'name': 'name',
        'mw': 'mw'
    }, record_callback)

    # query prices
    for node_id in nodes:
        # RT price
        row = cursor.execute(""SELECT price WHERE ? ? ?"", (node_id, time, time)).fetchone()
        rt5 = row.lmp if row else None

        # DA price
        row = cursor.execute(""SELECT price WHERE ? ? ?"", (node_id, hour, hour)).fetchone()
        da = row.da_lmp if row else None

        # update the hash value
        nodes[node_id] = (da, rt5)

    # calculate the position pricing
    calculate_pnl(records, nodes)

    # sort
    records.sort(key=lambda r: r.name)

    # return the records
    return records
</code></pre>
"
117014,NA,2008-09-22T19:36:32Z,18,How to Retrieve name of current Windows User (AD or local) using Python?,"<p>How can I retrieve the name of the currently logged in user, using a python script? The function should work regardless of whether it is a domain/ad user or a local user.</p>
"
117127,15842,2008-09-22T19:52:44Z,2,What is the scope for imported classes in python?,"<p>Please excuse the vague title.  If anyone has a suggestion, please let me know!  Also please retag with more appropriate tags!</p>

<p><strong>The Problem</strong></p>

<p>I want to have an instance of an imported class be able to view things in the scope (globals, locals) of the importer.  Since I'm not sure of the exact mechanism at work here, I can describe it much better with snippets than words.</p>

<pre><code>## File 1
def f1():  print ""go f1!""

class C1(object):
    def do_eval(self,x):  # maybe this should be do_evil, given what happens
        print ""evaling""
        eval(x)
        eval(x,globals(),locals())
</code></pre>

<p>Then run this code from an iteractive session, there there will be lots of <code>NameErrors</code></p>

<pre><code>## interactive
class C2(object):
    def do_eval(self,x):  # maybe this should be do_evil, given what happens
        print ""evaling""
        eval(x)
        eval(x,globals(),locals())

def f2():
    print ""go f2!""

from file1 import C1
import file1

C1().do_eval('file1.f1()')
C1().do_eval('f1()')
C1().do_eval('f2()')

file1.C1().do_eval('file1.f1()')
file1.C1().do_eval('f1()')
file1.C1().do_eval('f2()')

C2().do_eval('f2()')
C2().do_eval('file1.f1()')
C2().do_eval('f1()')
</code></pre>

<p>Is there a common idiom / pattern for this sort of task?  Am I barking up the wrong tree entirely?  </p>
"
117167,1384652,2008-09-22T19:57:37Z,4,Python and POST data,"<p>In PHP I simply write:</p>

<pre><code>$bob = $_POST['bob'];
</code></pre>

<p>How do I do the same in Python?</p>

<p>And yes, I do normally check that it exists etc, I'm just stripping it down specifically to the functionality I am after.</p>

<p><hr>
Edit: I am not using a framework</p>
"
117211,3051,2008-09-22T20:02:38Z,2,How to update a Tix.ComboBox's text?,"<p>I have a Tix.ComboBox with an editable text field. How do I force the variable holding the value for the text to update?</p>

<p>Let me give a more concrete explanation. I have a combo box and a button. When I click the button, it pops up a message box with the value of the combo box. Let's say the combo box text field currently has the value ""thing1"". If I type ""new"" into the box and then click on the button with my mouse, it will pops up the message ""thing1"". If I type ""new"" in the box and then tab focus away from the combo box and then click the button the pop up message says ""new"".</p>

<p>Ho do I force the combo box to update it's value to new without requiring that I tab away from the combo box?</p>

<p>I have included sample code.</p>

<pre><code>import Tix
import tkMessageBox

class App(object):
    def __init__(self, window):
        window.winfo_toplevel().wm_title(""test"")
        self.window = window

        self.combo = Tix.ComboBox(window)
        self.combo.insert(Tix.END, 'thing1')
        self.combo.insert(Tix.END, 'thing2')
        self.combo.entry['state'] = ""normal""
        self.combo['editable'] = True
        self.combo.pack()

        button = Tix.Button(window)
        button['text'] = ""Go""
        button['command'] = self.go
        button.pack()

    def go(self):
        tkMessageBox.showinfo('info', self.combo['value'])


if __name__ == '__main__':
    root = Tix.Tk()
    App(root)
    root.mainloop()
</code></pre>
"
117250,4872,2008-09-22T20:06:16Z,31,How do I get a decimal value when using the division operator in Python?,"<p>For example, the standard division symbol '/' rounds to zero:</p>

<pre><code>&gt;&gt;&gt; 4 / 100
0
</code></pre>

<p>However, I want it to return 0.04. What do I use?</p>
"
117477,19990,2008-09-22T20:39:11Z,10,What's the Name of the Python Module that Formats arbitrary Text to nicely looking HTML?,"<p>A while ago I came across a Python library that formats regular text to HTML similar to Markdown, reStructuredText and Textile, just that it had no syntax at all.  It detected indentatations, quotes, links and newlines/paragraphs only.</p>

<p>Unfortunately I lost the name of the library and was unable to Google it.  Anyone any ideas?</p>

<p><strong>Edit:</strong> reStructuredText aka rst == docutils.  That's not what I'm looking for :)</p>
"
117514,9338,2008-09-22T20:44:39Z,37,How do I use timezones with a datetime object in python?,"<p>How do I properly represent a different timezone in my timezone? The below example only works because I know that EDT is one hour ahead of me, so I can uncomment the subtraction of myTimeZone()</p>

<pre><code>import datetime, re
from datetime import tzinfo

class myTimeZone(tzinfo):
    """"""docstring for myTimeZone""""""
    def utfoffset(self, dt):
    	return timedelta(hours=1)

def myDateHandler(aDateString):
    """"""u'Sat,  6 Sep 2008 21:16:33 EDT'""""""
    _my_date_pattern = re.compile(r'\w+\,\s+(\d+)\s+(\w+)\s+(\d+)\s+(\d+)\:(\d+)\:(\d+)')
    day, month, year, hour, minute, second = _my_date_pattern.search(aDateString).groups()
    month = [
    		'JAN', 'FEB', 'MAR', 
    		'APR', 'MAY', 'JUN', 
    		'JUL', 'AUG', 'SEP', 
    		'OCT', 'NOV', 'DEC'
    ].index(month.upper()) + 1
    dt = datetime.datetime(
    	int(year), int(month), int(day), 
    	int(hour), int(minute), int(second)
    )					
    # dt = dt - datetime.timedelta(hours=1)
    # dt = dt - dt.tzinfo.utfoffset(myTimeZone())
    return (dt.year, dt.month, dt.day, dt.hour, dt.minute, dt.second, 0, 0, 0)

def main():
    print myDateHandler(""Sat,  6 Sep 2008 21:16:33 EDT"")

if __name__ == '__main__':
    main()
</code></pre>
"
117732,42219,2008-09-22T21:24:00Z,4,Can you do LINQ-like queries in a language like Python or Boo?,"<p>Take this simple C# LINQ query, and imagine that 'db.Numbers' is an SQL table with one column, Number:</p>

<p>var result = 
    from n in db.Numbers
        where n.Number &lt; 5
        select n.Number;</p>

<p>This will run very efficiently in C#, because it generates an SQL query something like ""select Number from Numbers where Number &lt; 5"".  What it <em>doesn't</em> do is select <em>all</em> the numbers from the database, and then filter them in C#, as it might appear to do at first.</p>

<p>Python supports a similar syntax:</p>

<p>result = [n.Number for n in Numbers if n.Number &lt; 5]</p>

<p>But it the ""if"" clause here does the filtering on the client side, rather than the server side, which is much less efficient.</p>

<p>Is there something as efficient as LINQ in Python?  (I'm currently evaluating Python vs. IronPython vs. Boo, so an answer that works in any of those languages is fine.)</p>
"
117986,720,2008-09-22T22:22:18Z,1,Debug/Monitor middleware for python wsgi applications,"<p>I'm searching a wsgi middleware which I can warp around a wsgi applications and which lets me monitor incoming and outgoing http requests and header fields.</p>

<p>Something like firefox live headers, but for the server side.</p>
"
118096,18866,2008-09-22T22:54:10Z,19,How can i parse a comma delimited string into a list (caveat)?,"<p>I need to be able to take a string like:</p>

<pre><code>'''foo, bar, ""one, two"", three four'''
</code></pre>

<p>into:</p>

<pre><code>['foo', 'bar', 'one, two', 'three four']
</code></pre>

<p>I have an feeling (with hints from #python) that the solution is going to involve the shlex module.</p>
"
118138,13564,2008-09-22T23:04:07Z,7,"How do I develop and create a self-contained PyGTK application bundle for MacOS, with native-looking widgets?","<p>I have read that it is possible to <a href=""http://developer.imendio.com/projects/gtk-macosx/build-instructions"" rel=""nofollow"">build GTK+ on MacOS X</a>.  I know that it's possible to create a <a href=""http://developer.imendio.com/projects/gtk-macosx/creating-app-bundles"" rel=""nofollow"">bundle of a GTK+ application on MacOS</a>.  I also know that it's possible to create widgets <a href=""http://people.imendio.com/richard/archives/2008/02/native_mac_them_1.html"" rel=""nofollow"">that look sort of native</a>.  However, searching around I am not really clear on how to create a bundle that includes the native theme stuff, and uses Python rather than its own C main-point.  There are also rumors <a href=""http://developer.imendio.com/node/175"" rel=""nofollow"">that it's possible to build PyGTK</a>, but it sounds like there might still be some wrinkles in that process.</p>

<p>However, there is no step-by-step guide that explains how one can set up an environment where an application might be run from Python source, then built and deployed in an app bundle.  How can I go about doing that?</p>
"
118143,1384652,2008-09-22T23:06:02Z,3,Python Regex vs PHP Regex,"<p>No not a competition, it is instead me trying to find why a certain regex works in one but not the other.</p>

<pre><code>(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)
</code></pre>

<p>That's my Regex and I'm trying to run it on</p>

<pre><code>127.255.0.0
</code></pre>

<p>Using Pythons regex I get nothing, using PHP I match it, below are the two calls I am making (just incase it's something to do with that). Essentially I am trying to work out why it works in PHP but not Python.</p>

<pre><code>re.findall(regex, string)
preg_match_all($regex, $string, $matches);
</code></pre>

<p><hr>
Solution found, it was due to the way that I was iterating through the results, this regex turned them into groups and then it didn't want to print them out in the same way etc etc. Thank you all for your help, it's really appreciated :)</p>
"
118221,9161,2008-09-22T23:28:37Z,2,What's the best dispatcher/callback library in Python?,"<p>I need to allow other Python applications to register callback functions for events in my application.  These need to have priorities associated with them (so a callback with a priority of 10 runs before a callback with a priority of 1) and callback functions need to be able to signal errors to the dispatcher.</p>

<p>These are all lightweight callbacks running in the same process, so I don't need to send signals across process boundaries.</p>

<p>Is there a good Python library to handle this, or do I need to write my own?</p>
"
118260,5113,2008-09-22T23:44:21Z,43,How to start IDLE (Python editor) without using the shortcut on Windows Vista?,"<p>I'm trying to teach Komodo to fire up <a href=""http://en.wikipedia.org/wiki/IDLE%5F%28Python%29"">IDLE</a> when I hit the right keystrokes.  I can use the exact path of the shortcut in start menu in the Windows Explorer location bar to launch IDLE so I was hoping Komodo would be able to use it as well.  But, giving this path to Komodo causes it to say that 1 is returned.  This appears to be a failure as IDLE doesn't start up.</p>

<p>I thought I'd avoid the shortcut and just use the exact path.  I go to the start menu, find the shortcut for IDLE, right click to look at the properties.  The target is grayed out, but says ""Python 2.5.2"".  The ""Start in"" is set to, ""C:\Python25\"".  The ""Open File Location"" button is also grayed out.</p>

<p>How do I find out where this shortcut is really pointing?  I have tried starting python.exe and pythonw.exe both in C:\Python25, but neither starts up IDLE.</p>
"
118370,15677,2008-09-23T00:17:09Z,114,How do you use the ellipsis slicing syntax in Python?,"<p>This came up in  <a href=""http://stackoverflow.com/questions/101268/hidden-features-of-python"">Hidden features of Python</a>, but I can't see good documentation or examples that explain how the feature works.</p>
"
118458,18866,2008-09-23T00:41:25Z,6,How can I join a list into a string (caveat)?,"<p>Along the lines of my previous <a href=""http://stackoverflow.com/questions/118096/how-can-i-parse-a-comma-delimited-string-into-a-list-caveat"">question</a>, how can i join a list of strings into a string such that values get quoted cleanly. Something like:</p>

<pre><code>['a', 'one ""two"" three', 'foo, bar', """"""both""'""""""]
</code></pre>

<p>into:</p>

<pre><code>a, 'one ""two"" three', ""foo, bar"", ""both\""'""
</code></pre>

<p>I suspect that the csv module will come into play here, but i'm not sure how to get the output I want.</p>
"
118467,2183,2008-09-23T00:46:14Z,2,How do I create a non-standard type with SOAPpy?,"<p>I am calling <a href=""http://www.pingdom.com/services/api-documentation/"" rel=""nofollow"">a WSDL web service</a> from Python using <a href=""http://pywebsvcs.sourceforge.net/"" rel=""nofollow"">SOAPpy</a>. The call I need to make is to the method <a href=""http://www.pingdom.com/services/api-documentation/operation_login"" rel=""nofollow"">Auth_login</a>. This has 2 arguments - the first, a string being the API key; the second, a <a href=""http://www.pingdom.com/services/api-documentation/class_CredentialsData"" rel=""nofollow"">custom type containing username and password</a>. The custom type is called Auth_credentialsData which contains 2 values as stings - one for the username and one for the password. How can I create this custom type using SOAPpy? I tried passing a list and a dictionary, none of which work.</p>

<p>Code so far:</p>

<pre><code>from SOAPpy import WSDL

wsdlUrl = 'https://ws.pingdom.com/soap/PingdomAPI.wsdl'
client = WSDL.Proxy(wsdlUrl)
</code></pre>

<p>Tried both:</p>

<pre><code>credentials = ['email@example.com', 'password']
client.Auth_login('key', credentials)
</code></pre>

<p>and</p>

<pre><code>credentials = {'username': 'email@example.com', 'password': 'passsword'}
client.Auth_login('key', credentials)
</code></pre>

<p>both of which give an authentication failed error.</p>
"
118516,NA,2008-09-23T00:58:09Z,10,How do I read an Excel file into Python using xlrd? Can it read newer Office formats?,"<p>My issue is below but would be interested comments from anyone with experience with xlrd.</p>

<p>I just found xlrd and it looks like the perfect solution but I'm having a little problem getting started. I am attempting to extract data programatically from an Excel file I pulled from Dow Jones with current components of the Dow Jones Industrial Average (link: <a href=""http://www.djindexes.com/mdsidx/?event=showAverages"">http://www.djindexes.com/mdsidx/?event=showAverages</a>)</p>

<p>When I open the file unmodified I get a nasty BIFF error (binary format not recognized)</p>

<p>However you can see in this screenshot that Excel 2008 for Mac thinks it is in 'Excel 1997-2004' format (screenshot: <a href=""http://skitch.com/alok/ssa3/componentreport-dji.xls-properties"">http://skitch.com/alok/ssa3/componentreport-dji.xls-properties</a>)</p>

<p>If I instead open it in Excel manually and save as 'Excel 1997-2004' format explicitly, then open in python usig xlrd, everything is wonderful. Remember, Office thinks the file is already in 'Excel 1997-2004' format. All files are .xls</p>

<p>Here is a pastebin of an ipython session replicating the issue: <a href=""http://pastie.textmate.org/private/jbawdtrvlrruh88mzueqdq"">http://pastie.textmate.org/private/jbawdtrvlrruh88mzueqdq</a></p>

<p>Any thoughts on:
How to trick xlrd into recognizing the file so I can extract data?
How to use python to automate the explicit 'save as' format to one that xlrd will accept?
Plan B?</p>
"
118540,NA,2008-09-23T01:04:10Z,0,What is wrong with my snap to grid code?,"<p>First of all, I'm fairly sure snapping to grid is fairly easy, however I've run into some odd trouble in this situation and my maths are too weak to work out specifically what is wrong.</p>

<p>Here's the situation</p>

<p>I have an abstract concept of a grid, with Y steps exactly Y_STEP apart (the x steps are working fine so ignore them for now)</p>

<p>The grid is in an abstract coordinate space, and to get things to line up I've got a magic offset in there, let's call it Y_OFFSET</p>

<p>to snap to the grid I've got the following code (python)</p>

<pre><code>def snapToGrid(originalPos, offset, step):
    index = int((originalPos - offset) / step) #truncates the remainder away
    return index * gap + offset
</code></pre>

<p>so I pass the cursor position, Y_OFFSET and Y_STEP into that function and it returns me the nearest floored y position on the grid</p>

<p>That appears to work fine in the original scenario, however when I take into account the fact that the view is scrollable things get a little weird.</p>

<p>Scrolling is made as basic as I can get it, I've got a viewPort that keeps count of the distance scrolled along the Y Axis and just offsets everything that goes through it.</p>

<p>Here's a snippet of the cursor's mouseMotion code:</p>

<pre><code>def mouseMotion(self, event):
    pixelPos = event.pos[Y]
    odePos = Scroll.pixelPosToOdePos(pixelPos)
    self.tool.positionChanged(odePos)
</code></pre>

<p>So there's two things to look at there, first the Scroll module's translation from pixel position to the abstract coordinate space, then the tool's positionChanged function which takes the abstract coordinate space value and snaps to the nearest Y step.</p>

<p>Here's the relevant Scroll code</p>

<pre><code>def pixelPosToOdePos(pixelPos):
    offsetPixelPos = pixelPos - self.viewPortOffset
    return pixelsToOde(offsetPixelPos)

def pixelsToOde(pixels):
    return float(pixels) / float(pixels_in_an_ode_unit)
</code></pre>

<p>And the tools update code</p>

<pre><code>def positionChanged(self, newPos):
    self.snappedPos = snapToGrid(originalPos, Y_OFFSET, Y_STEP)
</code></pre>

<p>The last relevant chunk is when the tool goes to render itself.  It goes through the Scroll object, which transforms the tool's snapped coordinate space position into an onscreen pixel position, here's the code:</p>

<pre><code>#in Tool
def render(self, screen):
    Scroll.render(screen, self.image, self.snappedPos)

#in Scroll
def render(self, screen, image, odePos):
    pixelPos = self.odePosToPixelPos(odePos)
    screen.blit(image, pixelPos) # screen is a surface from pygame for the curious

def odePosToPixelPos(self.odePos):
    offsetPos = odePos + self.viewPortOffset
    return odeToPixels(offsetPos)

def odeToPixels(odeUnits):
    return int(odeUnits * pixels_in_an_ode_unit)
</code></pre>

<p>Whew, that was a long explanation.  Hope you're still with me... </p>

<p>The problem I'm now getting is that when I scroll up the drawn image loses alignment with the cursor.<br />
It starts snapping to the Y step exactly 1 step below the cursor.
Additionally it appears to phase in and out of allignment.<br />
At some scrolls it is out by 1 and other scrolls it is spot on.<br />
It's never out by more than 1 and it's always snapping to a valid grid location.</p>

<p>Best guess I can come up with is that somewhere I'm truncating some data in the wrong spot, but no idea where or how it ends up with this behavior.</p>

<p>Anyone familiar with coordinate spaces, scrolling and snapping?</p>
"
118591,11596,2008-09-23T01:15:54Z,1,How to express this Bash command in pure Python,"<p>I have this line in a useful Bash script that I haven't managed to translate into Python, where 'a' is a user-input number of days' worth of files to archive:</p>

<pre><code>find ~/podcasts/current -mindepth 2 -mtime '+`a`+' -exec mv {} ~/podcasts/old \;
</code></pre>

<p>I am familiar with the os.name and getpass.getuser for the most general cross-platform elements.  I also have this function to generate a list of the full names of all the files in the equivalent of ~/podcasts/current:</p>

<pre><code>def AllFiles(filepath, depth=1, flist=[]):
    fpath=os.walk(filepath)
    fpath=[item for item in fpath]
    while depth &lt; len(fpath):
    	for item in fpath[depth][-1]:
    		flist.append(fpath[depth][0]+os.sep+item)
    	depth+=1
    return flist
</code></pre>

<p>First off, there must be a better way to do that, any suggestion welcome.  Either way, for example, ""AllFiles('/users/me/music/itunes/itunes music/podcasts')"" gives the relevant list, on Windows.  Presumably I should be able to go over this list and call os.stat(list_member).st_mtime and move all the stuff older than a certain number in days to the archive; I am a little stuck on that bit.</p>

<p>Of course, anything with the concision of the bash command would also be illuminating.</p>
"
118643,14744,2008-09-23T01:33:13Z,73,Is there a way to convert indentation in Python code to braces?,"<p>I am a totally blind programmer who would like to learn Python. Unfortunately the fact that code blocks are represented with different levels of indentation is a major stumbling block. I was wondering if there were any tools available that would allow me to write code using braces or some other code block delimiter and then convert that format into a properly indented representation that the Python interpreter could use?</p>
"
118654,7883,2008-09-23T01:37:48Z,20,"Iron python, beautiful soup, win32 app","<p>Does beautiful soup work with iron python?
If so with which version of iron python?
How easy is it to distribute a windows desktop app on .net 2.0 using iron python (mostly c# calling some python code for parsing html)? </p>
"
118813,6013,2008-09-23T02:38:04Z,18,How do I uninstall python from OSX Leopard so that I can use the MacPorts version?,"<p>I want to use the macports version of python instead of the one that comes with Leopard.</p>
"
119167,3935,2008-09-23T04:41:18Z,67,Adding code to __init__.py,"<p>I'm taking a look at how the model system in django works and I noticed something that I don't understand.</p>

<p>I know that you create an empty <code>__init__.py</code> file to specify that the current directory is a package.  And that you can set some variable in <code>__init__.py</code> so that import * works properly.</p>

<p>But django adds a bunch of from ... import ... statements and defines a bunch of classes in <code>__init__.py</code>.  Why?  Doesn't this just make things look messy?  Is there a reason that requires this code in <code>__init__.py</code>?</p>
"
119198,14752,2008-09-23T04:53:13Z,2,Is it good to switch from c# to python?,"<p>Currently I am developing in the .Net environment using C# but I want to know whether it is worth learning python. I'm thinking of learning the Django framework. What is better?</p>
"
119404,9440,2008-09-23T06:33:14Z,13,time length of an mp3 file,"<p>What is the simplest way to determine the length (in seconds) of a given mp3 file, <strong>without using outside libraries</strong>? (python source highly appreciated)</p>
"
119562,13565,2008-09-23T07:26:00Z,207,Tabs versus spaces in Python programming,"<p>I have always used tabs for indentation when I do Python programming. But then I came across a question here on SO where someone pointed out that most Python programmers use spaces instead of tabs to minimize editor-to-editor mistakes.</p>

<p>How does that make a difference? Are there other reasons why one would use spaces instead of tabs for Python? Or is it simply not true?</p>

<p>Should I switch my editor to insert spaces instead of tabs right away or keep on going like I used to?</p>
"
119651,15109,2008-09-23T07:46:02Z,1,Find matching sequences in two binary files,"<p>Let me start off with a bit of background.</p>

<p>This morning one of our users reported that Testuff's setup file has been reported as infected with a virus by the CA antivirus. Confident that this was a false positive, I looked on the web and found that users of another program (SpyBot) have reported the same problem.</p>

<p>A now, for the actual question.</p>

<p>Assuming the antivirus is looking for a specific binary signature in the file, I'd like to find the matching sequences in both files and hopefully find a way to tweak the setup script to prevent that sequence from appearing.</p>

<p>I tried the following in Python, but it's been running for a long time now and I was wondering if there was a better or faster way.</p>

<pre><code>from difflib import SequenceMatcher

spybot = open(""spybotsd160.exe"", ""rb"").read()
testuff = open(""TestuffSetup.exe"", ""rb"").read()

s = SequenceMatcher(None, spybot, testuff)
print s.find_longest_match(0, len(spybot), 0, len(testuff))
</code></pre>

<p>Is there a better library for Python or for another language that can do this?
A completely different way to tackle the problem is welcome as well.</p>
"
119684,20954,2008-09-23T07:53:50Z,14,Parse DICOM files in native Python,"<p>What is the simplest and most-pythonic way to parse a DICOM file?</p>

<p>A native Python implementation without the use of non-Python libraries would be much preferred. DICOM is the standard file format in digital medical imaging (look <a href=""http://en.wikipedia.org/wiki/Digital_Imaging_and_Communications_in_Medicine"">here</a> for more information). </p>

<p>There are some C/C++ libraries that support reading (a subset) of DICOM files. Two or three of them even have Python bindings. A native Python parser would serve two purposes for me: </p>

<ol>
<li>No need to build any external C/C++ libraries.</li>
<li>Learn about the DICOM file format.</li>
</ol>
"
119802,3355,2008-09-23T08:19:44Z,11,Using **kwargs with SimpleXMLRPCServer in python,"<p>I have a class that I wish to expose as a remote service using pythons SimpleXMLRPCServer. The server startup looks like this:</p>

<pre><code>server = SimpleXMLRPCServer((serverSettings.LISTEN_IP,serverSettings.LISTEN_PORT))

service = Service()

server.register_instance(service)
server.serve_forever()
</code></pre>

<p>I then have a ServiceRemote class that looks like this:</p>

<pre><code>def __init__(self,ip,port):
    self.rpcClient = xmlrpclib.Server('http://%s:%d' %(ip,port))

def __getattr__(self, name):
    # forward all calls to the rpc client
    return getattr(self.rpcClient, name)
</code></pre>

<p>So all calls on the ServiceRemote object will be forwarded to xmlrpclib.Server, which then forwards it to the remote server. The problem is a method in the service that takes named varargs:</p>

<pre><code>@useDb
def select(self, db, fields, **kwargs):
    pass
</code></pre>

<p>The @useDb decorator wraps the function, creating the db before the call and opening it, then closing it after the call is done before returning the result.</p>

<p>When I call this method, I get the error ""<strong>call</strong>() got an unexpected keyword argument 'name'"". So, is it possible to call methods taking variable named arguments remotely? Or will I have to create an override for each method variation I need.</p>

<hr>

<p>Thanks for the responses. I changed my code around a bit so the question is no longer an issue. However now I know this for future reference if I indeed do need to implement positional arguments and support remote invocation. I think a combination of Thomas and praptaks approaches would be good. Turning kwargs into positional args on the client through xmlrpclient, and having a wrapper on methods serverside to unpack positional arguments.</p>
"
119941,20955,2008-09-23T08:55:24Z,1,Dynamically create variables inside function,"<p>I want to create variables inside function from dictionary.</p>

<p>Lets say I have a dictionary</p>

<pre><code>bar = {'a': 1, 'b': 2, 'c': 3}
</code></pre>

<p>and function</p>

<pre><code>def foo():
  pass
</code></pre>

<p>What I want to do is to create inside function ""foo"" variables with names of each dictionary item name and values as dictionary item values</p>

<p>So in the end it should be similar to</p>

<pre><code>def foo():
  a = 1
  b = 2
  c = 3
</code></pre>

<p>Is it possible at all? And if it does, how to do such thing?</p>
"
120061,20999,2008-09-23T09:37:21Z,35,Fetch a Wikipedia article with Python,"<p>I try to fetch a Wikipedia article with Python's urllib:</p>

<pre><code>f = urllib.urlopen(""http://en.wikipedia.org/w/index.php?title=Albert_Einstein&amp;printable=yes"")           
s = f.read()
f.close()
</code></pre>

<p>However instead of the html page I get the following response: Error - Wikimedia Foundation:</p>

<pre><code>Request: GET http://en.wikipedia.org/w/index.php?title=Albert_Einstein&amp;printable=yes, from 192.35.17.11 via knsq1.knams.wikimedia.org (squid/2.6.STABLE21) to ()
Error: ERR_ACCESS_DENIED, errno [No Error] at Tue, 23 Sep 2008 09:09:08 GMT 
</code></pre>

<p>Wikipedia seems to block request which are not from a standard browser.</p>

<p>Anybody know how to work around this?</p>
"
120250,21029,2008-09-23T10:35:09Z,10,Short Integers in Python,"<p>Python allocates integers automatically based on the underlying system architecture. Unfortunately I have a huge dataset which needs to be fully loaded into memory. </p>

<p>So, is there a way to force Python to use only 2 bytes for some integers (equivalent of C++ 'short')?</p>
"
120584,8450,2008-09-23T12:13:14Z,17,SVG rendering in a PyGame application,"<p>In a <a href=""http://www.pygame.org/"">pyGame</a> application, I would like to render resolution-free GUI widgets described in SVG.</p>

<p>What tool and/or library can I use to reach this goal ?</p>

<p>(I like the <a href=""http://ocemp.sourceforge.net/gui.html"">OCEMP GUI</a> toolkit but it seems to be bitmap dependent for its rendering)</p>
"
120656,17693,2008-09-23T12:28:19Z,413,Directory listing in Python,"<p>How do I get a list of all files (and directories) in a given directory in Python?</p>
"
120657,16035,2008-09-23T12:28:39Z,3,Python subprocess issue with ampersands,"<p>I'm currently having a major issue with a python script. The script runs arbitrary commands through a handler to convert incorrect error reporting into correct error reporting.</p>

<p>The issue I'm having is getting the script to work correctly on windows with a command that contains ampersands in it's path. I've attempted quoting the command, escaping the ampersand with ^ and neither works. I'm now out of ideas. Any suggestions?</p>

<p>To clarify from current responses:</p>

<ol>
<li>I am using the subprocess module</li>
<li>I am passing the command line + arguments in as a list</li>
<li>The issue is with the path to the command itself, not any of the arguments</li>
<li>I've tried quoting the command. It causes a <code>[Error 123] The filename, directory name, or volume label syntax is incorrect</code> error</li>
<li>I'm using no shell argument (so <code>shell=false</code>) </li>
<li>In case it matters, I'm grabbing a pipe to stderr for processing it, but ignoring stdout and stdin</li>
<li>It is only for use on Windows currently, and works as expected in all other cases that I've tested so far.</li>
<li>The command that is failing is:  </li>
</ol>

<blockquote>
  <p>p = subprocess.Popen(prog, stderr = subprocess.PIPE, bufsize=-1)</p>
</blockquote>

<p>when the first element of the list 'prog' contains any ampersands. Quoting this first string does not work.</p>
"
120926,4834,2008-09-23T13:20:34Z,90,Why does Python pep-8 strongly recommend spaces over tabs for indentation?,"<p>I see on Stack Overflow and <a href=""http://www.python.org/dev/peps/pep-0008/"">PEP 8</a> that the recommendation is to use spaces only for indentation in Python programs.  I can understand the need for consistent indentation and I have felt that pain.</p>

<p>Is there an underlying reason for spaces to be preferred?  I would have thought that tabs were far easier to work with.</p>
"
120951,13523,2008-09-23T13:23:50Z,55,How can I normalize a URL in python,"<p>I'd like to know do I normalize a URL in python. </p>

<p>For example, If I have a url string like : ""http://www.example.com/foo goo/bar.html""</p>

<p>I need a library in python that will transform the extra space (or any other non normalized character) to a proper URL.</p>
"
121396,452521,2008-09-23T14:35:00Z,89,Accessing object memory address,"<p>When you call the <code>object.__repr__()</code> method in python you get something like this back: <code>&lt;__main__.Test object at 0x2aba1c0cf890&gt;</code>, is there any way to get a hold of the memory address if you overload <code>__repr__()</code>, other then calling <code>super(Class, obj).__repr__()</code> and regexing it out? </p>
"
121439,10040,2008-09-23T14:39:35Z,18,How do I include a stacktrace in my Django 500.html page?,"<p>I'm running <code>Django 1.0</code> and I'm close to deploying my app.  As such, I'll be changing the DEBUG setting to False.</p>

<p>With that being said, I'd still like to include the stacktrace on my 500.html page when errors occur.  By doing so, users can copy-and-paste the errors and easily email them to the developers.</p>

<p>Any thoughts on how best to approach this issue?</p>
"
122033,781,2008-09-23T16:10:42Z,7,"How do I write this in Ruby/Python? Or, can you translate my LINQ to Ruby/Python?","<p>Yesterday, I asked <a href=""http://stackoverflow.com/questions/119107/how-do-i-generate-a-list-of-n-unique-random-numbers-in-ruby"">this</a> question and never really got an answer I was really happy with. I really would like to know how to generate a list of N unique random numbers using a functional language such as Ruby without having to be extremely imperative in style.</p>

<p>Since I didn't see anything I really liked, I've written the solution I was looking for in LINQ:   </p>

<pre><code>
       static void Main(string[] args)
    	{
    		var temp = from q in GetRandomNumbers(100).Distinct().Take(5) select q;
    	}

    	private static IEnumerable GetRandomNumbers(int max)
    	{
    		Random r = new Random();
    		while (true)
    		{
    			yield return r.Next(max);
    		}
    	}
</code></pre>

<p>Can you translate my LINQ to Ruby? Python? Any other functional programming language?</p>

<p><strong>Note:</strong> Please try not to use too many loops and conditionals - otherwise the solution is trivial. Also, I'd rather see a solution where you don't have to generate an array much bigger than N so you can then just remove the duplicates and trim it down to N.</p>

<p>I know I'm being picky, but I'd really like to see some elegant solutions to this problem.
Thanks!</p>

<p><strong>Edit:</strong><br />
Why all the downvotes? </p>

<p>Originally my code sample had the Distinct() after the Take() which, as many pointed out, could leave me with an empty list. I've changed the order in which those methods are called to reflect what I meant in the first place.</p>

<p><strong>Apology:</strong><br />
I've been told this post came across as rather snobbish. I wasn't trying to imply that LINQ is better than Ruby/Python; or that my solution is much better than everyone else's. My intent is just to learn how to do this (with certain constraints) in Ruby. I'm sorry if I came across as a jerk.</p>
"
122277,20789,2008-09-23T16:55:18Z,35,How do you translate this regular-expression idiom from Perl into Python?,"<p>I switched from Perl to Python about a year ago and haven't looked back.  There is only <i>one</i> idiom that I've ever found I can do more easily in Perl than in Python:</p>

<pre><code>if ($var =~ /foo(.+)/) {
  # do something with $1
} elsif ($var =~ /bar(.+)/) {
  # do something with $1
} elsif ($var =~ /baz(.+)/) {
  # do something with $1
}
</code></pre>

<p>The corresponding Python code is not so elegant since the if statements keep getting nested:</p>

<pre><code>m = re.search(r'foo(.+)', var)
if m:
  # do something with m.group(1)
else:
  m = re.search(r'bar(.+)', var)
  if m:
    # do something with m.group(1)
  else:
    m = re.search(r'baz(.+)', var)
    if m:
      # do something with m.group(2)
</code></pre>

<p>Does anyone have an elegant way to reproduce this pattern in Python?  I've seen anonymous function dispatch tables used, but those seem kind of unwieldy to me for a small number of regular expressions...</p>
"
122327,4766,2008-09-23T17:04:43Z,396,How do I find the location of my Python site-packages directory?,"<p>How do I find the location of my site-packages directory?</p>
"
122524,1179,2008-09-23T17:39:32Z,2,Is there an Eclipse add-on to build a python executable for distribution?,"<p>I want to build an executable to distribute to people without python installed on their machines. </p>

<p>Is there an add-on to Eclipse that allows this? I couldn't find one. </p>

<p>If not, do you have a builder that you recommend that would make it easy to go to my python project directory created in Eclipse, and bundle it all up? </p>

<p>Thanks,
Mark</p>
"
122763,18866,2008-09-23T18:19:25Z,6,Need to create a layered dict from a flat one,"<p>I have a dict, that looks like this:</p>

<pre><code>{
    'foo': {
        'opt1': 1,
        'opt2': 2,
        },
    'foo/bar': {
        'opt3': 3,
        'opt4': 4,
        },
    'foo/bar/baz': {
        'opt5': 5,
        'opt6': 6,
        }
    }
</code></pre>

<p>And I need to get it to look like:</p>

<pre><code>{
    'foo': {
        'opt1': 1,
        'opt2': 2,
        'bar': {
            'opt3': 3,
            'opt4': 4,
            'baz': {
                'opt5': 5,
                'opt6': 6,
                }
            }
        }
    }
</code></pre>

<p>I should point out that there can and will be multiple top-level keys ('foo' in this case). I could probably throw something together to get what i need, but I was hoping that there is a solution that's more efficient.</p>
"
123198,17693,2008-09-23T19:23:48Z,819,How do I copy a file in python?,"<p>How do I copy a file in Python? I couldn't find anything under <a href=""https://docs.python.org/2/library/os.html""><code>os</code></a>.</p>
"
123499,19435,2008-09-23T20:05:07Z,6,Passing apache2 digest authentication information to a wsgi script run by mod_wsgi,"<p>I've got the directive</p>

<pre><code>&lt;VirtualHost *&gt;
    &lt;Location /&gt;
        AuthType Digest
        AuthName ""global""
        AuthDigestDomain /
        AuthUserFile /root/apache_users
        &lt;Limit GET&gt;
            Require valid-user
        &lt;/Limit&gt;
    &lt;/Location&gt;
    WSGIScriptAlias / /some/script.wsgi
    WSGIDaemonProcess mywsgi user=someuser group=somegroup processes=2 threads=25
    WSGIProcessGroup mywsgi
    ServerName some.example.org
&lt;/VirtualHost&gt;
</code></pre>

<p>I'd like to know in the /some/script.wsgi</p>

<pre><code>def application(environ, start_response):
    start_response('200 OK', [
        ('Content-Type', 'text/plain'),
    ])
    return ['Hello']
</code></pre>

<p>What user is logged in.</p>

<p>How do I do that?</p>
"
123958,3051,2008-09-23T21:19:37Z,5,How to get/set logical directory path in python,"<p>In python is it possible to get or set a logical directory (as opposed to an absolute one).</p>

<p>For example if I have:</p>

<pre><code>/real/path/to/dir
</code></pre>

<p>and I have</p>

<pre><code>/linked/path/to/dir
</code></pre>

<p>linked to the same directory.</p>

<p>using os.getcwd and os.chdir will always use the absolute path</p>

<pre><code>&gt;&gt;&gt; import os
&gt;&gt;&gt; os.chdir('/linked/path/to/dir')
&gt;&gt;&gt; print os.getcwd()
/real/path/to/dir
</code></pre>

<p>The only way I have found to get around this at all is to launch 'pwd' in another process and read the output. However, this only works until you call os.chdir for the first time.</p>
"
124108,1227001,2008-09-23T21:47:35Z,1,Passing around urls between applications in the same project,"<p>I am trying to mock-up an API and am using separate apps within Django to represent different web services. I would like App A to take in a link that corresponds to App B and parse the <code>json</code> response. </p>

<p>Is there a way to dynamically construct the url to App B so that I can test the code in development and not change to much before going into production? The problem is that I can't use localhost as part of a link. </p>

<p>I am currently using urllib, but eventually I would like to do something less hacky and better fitting with the web services <code>REST</code> paradigm.</p>
"
124171,20310,2008-09-23T21:57:11Z,8,Comparison of Python and Perl solutions to Wide Finder challenge,"<p>I'd be very grateful if you could compare the winning <a href=""http://www.cs.ucsd.edu/~sorourke/wf.pl"" rel=""nofollow"">O’Rourke's Perl solution</a> to <a href=""http://effbot.org/zone/wide-finder.htm"" rel=""nofollow"">Lundh's Python solution</a>, as I don't know Perl good enough to understand what's going on there. More specifically I'd like to know what gave Perl version 3x advantage: algorithmic superiority, quality of C extensions, other factors?</p>

<p><a href=""http://www.tbray.org/ongoing/When/200x/2007/10/30/WF-Results"" rel=""nofollow"">Wide Finder: Results</a></p>
"
124692,18866,2008-09-24T00:16:34Z,16,What is the intended use of the DEFAULT section in config files used by ConfigParser?,"<p>I've used ConfigParser for quite a while for simple configs. One thing that's bugged me for a long time is the DEFAULT section. I'm not really sure what's an appropriate use. I've read the documentation, but I would really like to see some clever examples of its use and how it affects other sections in the file (something that really illustrates the kind of things that are possible).</p>
"
125034,14028,2008-09-24T02:15:21Z,8,"What is the easiest, most concise way to make selected attributes in an instance be readonly?","<p>In Python, I want to make <strong>selected</strong> instance attributes of a class be readonly to code outside of the class. I want there to be no way outside code can alter the attribute, except indirectly by invoking methods on the instance. I want the syntax to be concise. What is the best way? (I give my current best answer below...)</p>
"
125102,9106,2008-09-24T02:37:49Z,1,Adding New Element to Text Substring,"<p>Say I have the following string:</p>

<pre><code>""I am the most foo h4ck3r ever!!""
</code></pre>

<p>I'm trying to write a makeSpecial(foo) function where the foo substring would be wrapped in a new span element, resulting in:</p>

<pre><code>""I am the most &lt;span class=""special""&gt;foo&gt;&lt;/span&gt; h4ck3r ever!!""
</code></pre>

<p>BeautifulSoup seemed like the way to go, but I haven't been able to make it work.</p>

<p>I could also pass this to the browser and do it with javascript, but that doesn't seem like a great idea.</p>

<p>Some advice for this would be really useful, especially in python. </p>
"
125222,21480,2008-09-24T03:15:13Z,22,extracting text from MS word files in python,"<p>for working with MS word files in python, there is python win32 extensions, which can be used in windows. How do I do the same in linux?
Is there any library?</p>
"
125703,NA,2008-09-24T06:30:56Z,125,How do I modify a text file in Python?,"<p>I'm using Python, and would like to insert a string into a text file without deleting or copying the file. How can I do that?</p>
"
126131,1448,2008-09-24T09:05:57Z,16,Python library for rendering HTML and javascript,"<p>Is there any python module for rendering a HTML page with javascript and get back a DOM object?</p>

<p>I want to parse a page which generates almost all of its content using javascript. </p>
"
126356,NA,2008-09-24T10:14:07Z,2,Example Facebook Application using TurboGears -- pyFacebook,"<p>I have a TurboGears application I'd like to run through Facebook, and am looking for an example TurboGears project using pyFacebook or minifb.py.  pyFacebook is Django-centric, and I can probably figure it out, but this is, after all, the lazy web.</p>
"
126364,6583,2008-09-24T10:16:00Z,0,"""cannot find -lpq"" when trying to install psycopg2","<p><strong>Intro</strong>: I'm trying to migrate our Trac SQLite to a PostgreSQL backend, to do that I need psycopg2. After clicking past the embarrassing rant on www.initd.org I downloaded the latest version and tried running <code>setup.py install</code>. This didn't work, telling me I needed mingw. So I downloaded and installed mingw.</p>

<p><strong>Problem</strong>: I now get the following error when running <code>setup.py build_ext --compiler=mingw32 install</code>:</p>

<pre><code>running build_ext
building 'psycopg2._psycopg' extension
writing build\temp.win32-2.4\Release\psycopg\_psycopg.def
C:\mingw\bin\gcc.exe -mno-cygwin -shared -s build\temp.win32-2.4\Release\psycopg
\psycopgmodule.o build\temp.win32-2.4\Release\psycopg\pqpath.o build\temp.win32-
2.4\Release\psycopg\typecast.o build\temp.win32-2.4\Release\psycopg\microprotoco
ls.o build\temp.win32-2.4\Release\psycopg\microprotocols_proto.o build\temp.win3
2-2.4\Release\psycopg\connection_type.o build\temp.win32-2.4\Release\psycopg\con
nection_int.o build\temp.win32-2.4\Release\psycopg\cursor_type.o build\temp.win3
2-2.4\Release\psycopg\cursor_int.o build\temp.win32-2.4\Release\psycopg\lobject_
type.o build\temp.win32-2.4\Release\psycopg\lobject_int.o build\temp.win32-2.4\R
elease\psycopg\adapter_qstring.o build\temp.win32-2.4\Release\psycopg\adapter_pb
oolean.o build\temp.win32-2.4\Release\psycopg\adapter_binary.o build\temp.win32-
2.4\Release\psycopg\adapter_asis.o build\temp.win32-2.4\Release\psycopg\adapter_
list.o build\temp.win32-2.4\Release\psycopg\adapter_datetime.o build\temp.win32-
2.4\Release\psycopg\_psycopg.def -LC:\Python24\libs -LC:\Python24\PCBuild -Lc:/P
ROGRA~1/POSTGR~1/8.3/lib -lpython24 -lmsvcr71 -lpq -lmsvcr71 -lws2_32 -ladvapi32
 -o build\lib.win32-2.4\psycopg2\_psycopg.pyd
C:\mingw\bin\..\lib\gcc\mingw32\3.4.5\..\..\..\..\mingw32\bin\ld.exe: cannot fin
d -lpq
collect2: ld returned 1 exit status
error: command 'gcc' failed with exit status 1
</code></pre>

<p><strong>What I've tried</strong> - I noticed the forward slashes in the -L option, so I manually entered my PostgreSQL lib directory in the library_dirs option in the setup.cfg, to no avail (the call then had a -L option with backslashes, but the error message stayed the same).</p>
"
126524,37141,2008-09-24T11:08:52Z,133,Iterate a list with indexes in Python,"<p>I could swear I've seen the function (or method) that takes a list, like this <code>[3, 7, 19]</code> and makes it into iterable list of tuples, like so: <code>[(0,3), (1,7), (2,19)]</code> to use it instead of:</p>

<pre><code>for i in range(len(name_of_list)):
    name_of_list[i] = something
</code></pre>

<p>but I can't remember the name and googling ""iterate list"" gets nothing.</p>
"
126738,20894,2008-09-24T12:12:04Z,0,How can i move an object drawn in device context python,"<p>I have drawn an image in the device context using python, and i want to move it somothly/animate either vertically or horizontally? What algorithm should i use? </p>

<p>Where can i get info for this kind of tasks in python?</p>
"
126787,7883,2008-09-24T12:21:02Z,1,Checking for code changes in all imported python modules,"<p>Almost every Python web framework has a simple server that runs a wsgi application and automatically reloads the imported modules every time the source gets changed. I know I can look at the code and see how it's done, but that may take some time and I'm asking just out of curiosity. Does anyone have any idea how this is implemented?</p>
"
127055,7581,2008-09-24T13:14:50Z,16,Find out number of capture groups in Python regular expressions,"<p>Is there a way to determine how many capture groups there are in a given regular expression?</p>

<p>I would like to be able to do the follwing:</p>

<pre><code>def groups(regexp, s):
    """""" Returns the first result of re.findall, or an empty default

    &gt;&gt;&gt; groups(r'(\d)(\d)(\d)', '123')
    ('1', '2', '3')
    &gt;&gt;&gt; groups(r'(\d)(\d)(\d)', 'abc')
    ('', '', '')
    """"""
    import re
    m = re.search(regexp, s)
    if m:
        return m.groups()
    return ('',) * num_of_groups(regexp)
</code></pre>

<p>This allows me to do stuff like:</p>

<pre><code>first, last, phone = groups(r'(\w+) (\w+) ([\d\-]+)', 'John Doe 555-3456')
</code></pre>

<p>However, I don't know how to implement <code>num_of_groups</code>. (Currently I just work around it.)</p>

<p><strong>EDIT:</strong> Following the <a href=""http://stackoverflow.com/questions/127055/find-out-number-of-capture-groups-in-python-regular-expressions/127089#127089"">advice from rslite</a>, I replaced <code>re.findall</code> with <code>re.search</code>. </p>

<p><code>sre_parse</code> seems like the most robust and comprehensive solution, but requires tree traversal and appears to be a bit heavy.</p>

<p>MizardX's regular expression seems to cover all bases, so I'm going to go with that.</p>
"
127454,21674,2008-09-24T14:20:06Z,10,Contributing to Python,"<p>I'm a pretty inexperienced programmer (can make tk apps, text processing, sort of understand oop), but Python is so awesome that I would like to help the community.  What's the best way for a beginner to contribute?</p>
"
127606,1489,2008-09-24T14:44:45Z,8,Editing XML as a dictionary in python?,"<p>I'm trying to generate customized xml files from a template xml file in python. </p>

<p>Conceptually, I want to read in the template xml, remove some elements, change some text attributes, and write the new xml out to a file.  I wanted it to work something like this:</p>

<pre><code>conf_base = ConvertXmlToDict('config-template.xml')
conf_base_dict = conf_base.UnWrap()
del conf_base_dict['root-name']['level1-name']['leaf1']
del conf_base_dict['root-name']['level1-name']['leaf2']

conf_new = ConvertDictToXml(conf_base_dict)
</code></pre>

<p>now I want to write to file, but I don't see how to get to 
ElementTree.ElementTree.write() </p>

<pre><code>conf_new.write('config-new.xml') 
</code></pre>

<p>Is there some way to do this, or can someone suggest doing this a different way? </p>
"
127736,17663,2008-09-24T15:08:50Z,2,How to implement a Decorator with non-local equality?,"<p>Greetings, currently I am refactoring one of my programs, and I found an interesting problem.</p>

<p>I have Transitions in an automata. Transitions always have a start-state and an end-state. Some Transitions have a label, which encodes a certain Action that must be performed upon traversal. No label means no action. Some transitions have a condition, which must be fulfilled in order to traverse this condition, if there is no condition, the transition is basically an epsilon-transition in an NFA and will be traversed without consuming an input symbol.</p>

<p>I need the following operations:  </p>

<ul>
<li>check if the transition has a label</li>
<li>get this label</li>
<li>add a label to a transition</li>
<li>check if the transition has a condition </li>
<li>get this condition</li>
<li>check for equality</li>
</ul>

<p>Judging from the first five points, this sounds like a clear decorator, with a base transition and two decorators: Labeled and Condition. However, this approach has a problem: two transitions are considered equal if their start-state and end-state are the same, the labels at both transitions are equal (or not-existing) and both conditions are the same (or not existing). With a decorator, I might have two transitions Labeled(""foo"", Conditional(""bar"", Transition(""baz"", ""qux""))) and Conditional(""bar"", Labeled(""foo"", Transition(""baz"", ""qux""))) which need a non-local equality, that is, the decorators would need to collect all the data and the Transition must compare this collected data on a set-base:</p>

<pre><code>class Transition(object):
    def __init__(self, start, end):
        self.start = start
        self.end = end
    def get_label(self):
        return None
    def has_label(self):
        return False
    def collect_decorations(self, decorations):
        return decorations
    def internal_equality(self, my_decorations, other):
        try:
            return (self.start == other.start
                    and self.end == other.end
                    and my_decorations = other.collect_decorations())
    def __eq__(self, other):
        return self.internal_equality(self.collect_decorations({}), other)

class Labeled(object):
    def __init__(self, label, base):
        self.base = base
        self.label = label
    def has_label(self):
        return True
    def get_label(self):
        return self.label
    def collect_decorations(self, decorations):
        assert 'label' not in decorations
        decorations['label'] = self.label
        return self.base.collect_decorations(decorations)
    def __getattr__(self, attribute):
        return self.base.__getattr(attribute)
</code></pre>

<p>Is this a clean approach? Am I missing something?</p>

<p>I am mostly confused, because I can solve this - with longer class names - using cooperative multiple inheritance:</p>

<pre><code>class Transition(object):
    def __init__(self, **kwargs):
        # init is pythons MI-madness ;-)
        super(Transition, self).__init__(**kwargs)
        self.start = kwargs['start']
        self.end = kwargs['end']
    def get_label(self):
        return None
    def get_condition(self):
        return None
    def __eq__(self, other):
        try:
            return self.start == other.start and self.end == other.end
        except AttributeError:
            return False

class LabeledTransition(Transition):
    def __init__(self, **kwargs):
        super(LabeledTransition).__init__(**kwargs)
        self.label = kwargs['label']
    def get_label(self):
        return self.label
    def __eq__(self):
        super_result = super(LabeledTransition, self).__eq__(other)
        try:
            return super_result and self.label == other.label
        except AttributeError:
            return False

class ConditionalTransition(Transition):
    def __init__(self, **kwargs):
        super(ConditionalTransition, self).__init__(**kwargs)
        self.condition = kwargs['condition']

    def get_condition(self):
        return self.condition

    def __eq__(self, other):
        super_result = super(ConditionalTransition, self).__eq__(other)
        try:
            return super_result and self.condition = other.condition
        except AttributeError:
            return False

# ConditionalTransition about the same, with get_condition
class LabeledConditionalTransition(LabeledTransition, ConditionalTransition):
    pass
</code></pre>

<p>the class LabledConditionalTransition behaves exactly as expected - and having no code in there is appealing and I do not thing MI is confusing at this size.</p>

<p>Of course, the third option would be to just hammer everything into a single transition class with a bunch of in has_label/has_transition.</p>

<p>So... I am confused. Am I missing something? Which implementation looks better? How do you handle similar cases, that is, objects which look like a Decorator could handle them, but then, such a non-local method comes around?</p>

<p><em>EDIT</em>:
Added the ConditionalTransition-class. Basically, this kinda behaves like the decorator, minus the order created by the order of creating the decorators, the transition checks for start and end being correct, the LabeledTransition-class checks for label being correct and ConditionalTransition checks for condition being correct.</p>
"
127803,70293,2008-09-24T15:17:00Z,311,How to parse an ISO 8601-formatted date in Python?,"<p>I need to parse <a href=""https://tools.ietf.org/html/rfc3339"">RFC 3339</a> strings like <code>""2008-09-03T20:56:35.450686Z""</code> into Python's <code>datetime</code> type.</p>

<p>I have found <a href=""https://docs.python.org/library/datetime.html#datetime.datetime.strptime""><code>strptime</code></a> in the Python standard library, but it is not very convenient.</p>

<p>What is the best way to do this?</p>
"
128259,14107,2008-09-24T16:39:08Z,4,What is the best way to store set data in Python?,"<p>I have a list of data in the following form:</p>

<p><code>[(id\__1_, description, id\_type), (id\__2_, description, id\_type), ... , (id\__n_, description, id\_type))</code></p>

<p>The data are loaded from files that belong to the same group. In each group there could be multiples of the same id, each coming from different files. I don't care about the duplicates, so I thought that a nice way to store all of this would be to throw it into a Set type. But there's a problem.</p>

<p>Sometimes for the same id the descriptions can vary slightly, as follows:</p>

<p>IPI00110753</p>

<ul>
<li>Tubulin alpha-1A chain</li>
<li>Tubulin alpha-1 chain</li>
<li>Alpha-tubulin 1</li>
<li>Alpha-tubulin isotype M-alpha-1</li>
</ul>

<p>(Note that this example is taken from the <a href=""http://www.uniprot.org/uniprot/P68369"" rel=""nofollow"">uniprot protein database</a>.) </p>

<p>I don't care if the descriptions vary. I cannot throw them away because there is a chance that the protein database I am using will not contain a listing for a certain identifier. If this happens I will want to be able to display the human readable description to the biologists so they know roughly what protein they are looking at.</p>

<p>I am currently solving this problem by using a dictionary type. However I don't really like this solution because it uses a lot of memory (I have a lot of these ID's). This is only an intermediary listing of them. There is some additional processing the ID's go through before they are placed in the database so I would like to keep my data-structure smaller.</p>

<p>I have two questions really. First, will I get a smaller memory footprint using the Set type (over the dictionary type) for this, or should I use a sorted list where I check every time I insert into the list to see if the ID exists, or is there a third solution that I haven't thought of? Second, if the Set type is the better answer how do I key it to look at just the first element of the tuple instead of the whole thing? </p>

<p>Thank you for reading my question, <br>
Tim</p>

<p><strong>Update</strong></p>

<p>based on some of the comments I received let me clarify a little. Most of what I do with data-structure is insert into it. I only read it twice, once to annotate it with additional information,* and once to do be inserted into the database. However down the line there may be additional annotation that is done before I insert into the database. Unfortunately I don't know if that will happen at this time. </p>

<p>Right now I am looking into storing this data in a structure that is not based on a hash-table (ie. a dictionary). I would like the new structure to be fairly quick on insertion, but reading it can be linear since I only really do it twice. I am trying to move away from the hash table to save space. Is there a better structure or is a hash-table about as good as it gets?</p>

<p>*The information is a list of Swiss-Prot protein identifiers that I get by querying uniprot.</p>
"
128466,8002,2008-09-24T17:19:38Z,7,What's the best way to upgrade from Django 0.96 to 1.0?,"<p>Should I try to actually upgrade my existing app, or just rewrite it mostly from scratch, saving what pieces (templates, etc) I can?</p>
"
128478,15676,2008-09-24T17:21:47Z,202,Should Python import statements always be at the top of a module?,"<p><a href=""http://www.python.org/dev/peps/pep-0008/"">PEP 08</a> states:</p>

<blockquote>
  <p>Imports are always put at the top of the file, just after any module comments and docstrings, and before module globals and constants.</p>
</blockquote>

<p>However if the class/method/function that I am importing is only used in rare cases, surely it is more efficient to do the import when it is needed?</p>

<p>Isn't this:</p>

<pre><code>class SomeClass(object):

    def not_often_called(self)
        from datetime import datetime
        self.datetime = datetime.now()
</code></pre>

<p>more efficient than this?</p>

<pre><code>from datetime import datetime

class SomeClass(object):

    def not_often_called(self)
        self.datetime = datetime.now()
</code></pre>
"
128573,9940,2008-09-24T17:37:11Z,104,Using property() on classmethods,"<p>I have a class with two class methods (using the classmethod() function) for getting and setting what is essentially a static variable.  I tried to use the property() function with these, but it results in an error.  I was able to reproduce the error with the following in the interpreter:</p>

<pre><code>&gt;&gt;&gt; class foo(object):
...     _var=5
...     def getvar(cls):
...             return cls._var
...     getvar=classmethod(getvar)
...     def setvar(cls,value):
...             cls._var=value
...     setvar=classmethod(setvar)
...     var=property(getvar,setvar)
...
&gt;&gt;&gt; f.getvar()
5
&gt;&gt;&gt; f.setvar(4)
&gt;&gt;&gt; f.getvar()
4
&gt;&gt;&gt; f.var
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in ?
TypeError: 'classmethod' object is not callable
&gt;&gt;&gt; f.var=5
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in ?
TypeError: 'classmethod' object is not callable
</code></pre>

<p>Is it possible to use the property() function with classmethod decorated functions?</p>
"
128689,8679,2008-09-24T17:53:29Z,3,Doing CRUD in Turbogears,"<p>Are there any good packages or methods for doing extensive CRUD (create-retrieve-update-delete) interfaces in the Turbogears framework. The FastDataGrid widget is too much of a black box to be useful and CRUDTemplate looks like more trouble than rolling my own. Ideas? Suggestions?</p>
"
128815,736,2008-09-24T18:09:14Z,1,Does Django support multi-value cookies?,"<p>I'd like to set a cookie via Django with that has several different values to it, similar to .NET's <a href=""http://msdn.microsoft.com/en-us/library/system.web.httpcookie_members(VS.80).aspx"" rel=""nofollow"">HttpCookie.Values</a> property. Looking at the <a href=""http://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpResponse.set_cookie"" rel=""nofollow"">documentation</a>, I can't tell if this is possible. It looks like it just takes a string, so is there another way?</p>

<p>I've tried passing it an array (<code>[10, 20, 30]</code>) and dictionary (<code>{'name': 'Scott', 'id': 1}</code>) but they just get converted to their string format. My current solution is to just use an arbitrary separator and then parse it when reading it in, which feels icky. If multi-values aren't possible, is there a better way? I'd rather not use lots of cookies, because that would get annoying.</p>
"
128933,2346,2008-09-24T18:30:36Z,3,Perl or Python script to remove user from group,"<p>I am putting together a Samba-based server as a Primary Domain Controller, and ran into a cute little problem that should have been solved many times over.  But a number of searches did not yield a result.  I need to be able to remove an existing user from an existing group with a command line script.  It appears that the usermod easily allows me to add a user to a supplementary group with this command:</p>

<pre><code>usermod -a -G supgroup1,supgroup2 username
</code></pre>

<p>Without the ""-a"" option, if the user is currently a member of a group which is not listed, the user will be removed from the group.  Does anyone have a perl (or Python) script that allows the specification of a user and group for removal?  Am I missing an obvious existing command, or well-known solution forthis?  Thanks in advance!</p>

<p>Thanks to J.J. for the pointer to the Unix::Group module, which is part of Unix-ConfigFile.  It looks like the command deluser would do what I want, but was not in any of my existing repositories.  I went ahead and wrote the perl script using the Unix:Group Module.  Here is the script for your sysadmining pleasure.</p>

<pre><code>#!/usr/bin/perl
#
# Usage:   removegroup.pl login group
# Purpose: Removes a user from a group while retaining current primary and
#          supplementary groups.
# Notes:   There is a Debian specific utility that can do this called deluser,
#          but I did not want any cross-distribution dependencies
#
# Date:   25 September 2008

# Validate Arguments (correct number, format etc.)
if ( ($#ARGV &lt; 1) || (2 &lt; $#ARGV) ) {
  print ""\nUsage: removegroup.pl login group\n\n"";
  print ""EXIT VALUES\n"";
  print ""     The removeuser.pl script exits with the following values:\n\n"";
  print ""     0 success\n\n"";
  print ""     1 Invalid number of arguments\n\n"";
  print ""     2 Login or Group name supplied greater than 16 characters\n\n"";
  print ""     3 Login and/or Group name contains invalid characters\n\n"";
  exit 1;
}

# Check for well formed group and login names
if ((16 &lt; length($ARGV[0])) ||(16 &lt; length($ARGV[1])))
{
  print ""Usage: removegroup.pl login group\n"";
  print ""ERROR: Login and Group names must be less than 16 Characters\n"";
  exit 2;
}

if ( ( $ARGV[0] !~ m{^[a-z_]+[a-z0-9_-]*$}) || ( $ARGV[0] !~ m{^[a-z_]+[a-z0-9_-]*$} ) )
{
  print ""Usage: removegroup.pl login group\n"";
  print ""ERROR: Login and/or Group name contains invalid characters\n"";
  exit 3;
}

# Set some variables for readability
$login=$ARGV[0];
$group=$ARGV[1];

# Requires the GroupFile interface from perl-Unix-Configfile
use Unix::GroupFile;

$grp = new Unix::GroupFile ""/etc/group"";
$grp-&gt;remove_user(""$group"", ""$login"");
$grp-&gt;commit();
undef $grp;
exit 0;
</code></pre>
"
129144,9241,2008-09-24T19:00:47Z,21,"Generic Exception Handling in Python the ""Right Way""","<p>Sometimes I find myself in the situation where I want to execute several sequential commands like such:</p>

<pre><code>try:
    foo(a, b)
except Exception, e:
    baz(e)
try:
    bar(c, d)
except Exception, e:
    baz(e)
...
</code></pre>

<p>This same pattern occurs when exceptions simply need to be ignored.</p>

<p>This feels redundant and the excessive syntax causes it to be surprisingly difficult to follow when reading code.</p>

<p>In C, I would have solved this type of problem easily with a macro, but unfortunately, this cannot be done in straight python.</p>

<p>Question: How can I best reduce the code footprint and increase code readability when coming across this pattern?</p>
"
129507,4766,2008-09-24T20:00:35Z,285,How do you test that a Python function throws an exception?,"<p>How does one write a unittest that fails only if a function doesn't throw an expected exception?</p>
"
129912,10577,2008-09-24T20:54:21Z,0,Getting Python to use the ActiveTcl libraries,"<p>Is there any way to get Python to use my ActiveTcl installation instead of having to copy the ActiveTcl libraries into the Python/tcl directory?</p>
"
130074,2900,2008-09-24T21:24:04Z,17,Is there an inverse function for time.gmtime() that parses a UTC tuple to seconds since the epoch?,"<p>python's time module seems a little haphazard.  For example, here is a list of methods in there, from the docstring:</p>

<pre><code>time() -- return current time in seconds since the Epoch as a float
clock() -- return CPU time since process start as a float
sleep() -- delay for a number of seconds given as a float
gmtime() -- convert seconds since Epoch to UTC tuple
localtime() -- convert seconds since Epoch to local time tuple
asctime() -- convert time tuple to string
ctime() -- convert time in seconds to string
mktime() -- convert local time tuple to seconds since Epoch
strftime() -- convert time tuple to string according to format specification
strptime() -- parse string to time tuple according to format specification
tzset() -- change the local timezone
</code></pre>

<p>Looking at localtime() and its inverse mktime(), why is there no inverse for gmtime() ?</p>

<p>Bonus questions: what would you name the method ? How would you implement it ?</p>
"
130262,5222,2008-09-24T22:08:57Z,16,How do I efficiently filter computed values within a Python list comprehension?,"<p>The Python list comprehension syntax makes it easy to filter values within a comprehension.  For example:</p>

<pre><code>result = [x**2 for x in mylist if type(x) is int]
</code></pre>

<p>Will return a list of the squares of integers in mylist.  However, what if the test involves some (costly) computation and you want to filter on the result?  One option is:</p>

<pre><code>result = [expensive(x) for x in mylist if expensive(x)]
</code></pre>

<p>This will result in a list of non-""false"" expensive(x) values, however expensive() is called twice for each x.  Is there a comprehension syntax that allows you to do this test while only calling expensive once per x?</p>
"
130587,10559,2008-09-24T23:28:24Z,2,"How to pass all Visual Studio 2008 ""Macros"" to Python script?","<p><em>[NOTE: This questions is similar to but <strong>not the same</strong> as <a href=""http://stackoverflow.com/questions/128634/how-to-use-system-environment-variables-in-vs-2008-post-build-events"">this one</a>.]</em></p>

<p>Visual Studio defines several dozen ""Macros"" which are sort of simulated environment variables (completely unrelated to C++ macros) which contain information about the build in progress.  Examples:</p>

<pre>
    ConfigurationName  Release
    TargetPath         D:\work\foo\win\Release\foo.exe
    VCInstallDir       C:\ProgramFiles\Microsoft Visual Studio 9.0\VC\
</pre>

<p>Here is the complete set of 43 built-in Macros that I see (yours may differ depending on which version of VS you use and which tools you have enabled):</p>

<pre>
    ConfigurationName  IntDir           RootNamespace      TargetFileName
    DevEnvDir          OutDir           SafeInputName      TargetFramework
    FrameworkDir       ParentName       SafeParentName     TargetName
    FrameworkSDKDir    PlatformName     SafeRootNamespace  TargetPath
    FrameworkVersion   ProjectDir       SolutionDir        VCInstallDir
    FxCopDir           ProjectExt       SolutionExt        VSInstallDir
    InputDir           ProjectFileName  SolutionFileName   WebDeployPath
    InputExt           ProjectName      SolutionName       WebDeployRoot
    InputFileName      ProjectPath      SolutionPath       WindowsSdkDir
    InputName          References       TargetDir          WindowsSdkDirIA64
    InputPath          RemoteMachine    TargetExt             
</pre>

<p>Of these, only four (<code>FrameworkDir</code>, <code>FrameworkSDKDir</code>, <code>VCInstallDir</code> and <code>VSInstallDir</code>) are set in the environment used for build-events.</p>

<p>As Brian mentions, user-defined Macros can be defined such as to be set in the environment in which build tasks execute.  My problem is with the built-in Macros.</p>

<p>I use a Visual Studio Post-Build Event to run a python script as part of my build process.  I'd like to pass the entire set of Macros (built-in and user-defined) to my script in the environment but I don't know how.  Within my script I can access regular environment variables (e.g., Path, SystemRoot) but NOT these ""Macros"".  All I can do now is pass them on-by-one as named options which I then process within my script.  For example, this is what my Post-Build Event command line looks like:</p>

<pre>
    postbuild.py --t=""$(TargetPath)"" --c=""$(ConfigurationName)""
</pre>

<p>Besides being a pain in the neck, there is a limit on the size of Post-Build Event command line so I can't pass dozens Macros using this method even if I wanted to because the command line is truncated.</p>

<p>Does anyone know if there is a way to pass the entire set of Macro names and values to a command that does NOT require switching to MSBuild (which I believe is not available for native VC++) or some other make-like build tool?</p>
"
130618,20794,2008-09-24T23:34:31Z,57,Python Date Comparisons,"<p>I would like to find out if a particular python datetime object is older than X hours or minutes. I am trying to do something similar to:  </p>

<pre><code>if (datetime.now() - self.timestamp) &gt; 100
# Where 100 is either seconds or minutes
</code></pre>

<p>This generates a type error. </p>

<p>What is the proper way to do date time comparison in python? I already looked at <a href=""http://wiki.python.org/moin/WorkingWithTime"">WorkingWithTime</a> which is close but not exactly what I want. I assume I just want the datetime object represented in seconds so that I can do a normal int comparison. </p>

<p>Please post lists of datetime best practices.</p>
"
130763,10559,2008-09-25T00:22:26Z,49,Request UAC elevation from within a Python script?,"<p>I want my Python script to copy files on Vista. When I run it from a normal <code>cmd.exe</code> window, no errors are generated, yet the files are NOT copied. If I run <code>cmd.exe</code> ""as administator"" and then run my script, it works fine.</p>

<p>This makes sense since User Account Control (UAC) normally prevents many file system actions.</p>

<p>Is there a way I can, from within a Python script, invoke a UAC elevation request (those dialogs that say something like ""such and such app needs admin access, is this OK?"")</p>

<p>If that's not possible, is there a way my script can at least detect that it is not elevated so it can fail gracefully?</p>
"
131327,3912,2008-09-25T03:25:52Z,1,Style - When to serialize a Django model Instance: signals vs model's save method,"<p>I plan to serialize a Django model to XML when it's saved or updated.  (The XML's going to be imported into a flash movie).  Is it better to listen for a    post_save() or       pre_save() signal and then perform the serialization, or to just handle it in the model's    save() methon</p>
"
131449,2598,2008-09-25T04:14:34Z,3,Do I have to cause an ValueError in Python,"<p>I have this code:</p>

<pre><code>chars = #some list

try:
    indx = chars.index(chars)
except ValueError:
    #doSomething
else:
   #doSomethingElse
</code></pre>

<p>I want to be able to do this because I don't like knowfully causing Exceptions:</p>

<pre><code>chars = #some list

indx = chars.index(chars)

if indx == -1:
    #doSomething
else:
   #doSomethingElse
</code></pre>

<p>Is there a way I can do this?</p>
"
132058,189,2008-09-25T08:06:06Z,250,Showing the stack trace from a running Python application,"<p>I have this Python application that gets stuck from time to time and I can't find out where.</p>

<p>Is there any way to signal Python interpreter to show you the exact code that's running? </p>

<p>Some kind of on-the-fly stacktrace?</p>

<p><strong><em>Related questions:</em></strong></p>

<ul>
<li><a href=""http://stackoverflow.com/questions/1156023/print-current-call-stack-from-a-method-in-python-code"">Print current call stack from a method in Python code</a></li>
<li><a href=""http://stackoverflow.com/questions/6849138/check-what-a-running-process-is-doing-print-stack-trace-of-an-uninstrumented-py"">Check what a running process is doing: print stack trace of an uninstrumented Python program</a></li>
</ul>
"
132411,20310,2008-09-25T09:56:43Z,8,Translate algorithmic C to Python,"<p>I would like to translate some C code to Python code or bytecode. The C code in question is what i'd call purely algorithmic: platform independent, no I/O, just algorithms and in-memory data structures.</p>

<p>An example would be a regular expression library. Translation tool would process library source code and produce a functionally equivalent Python module that can be run in a <strong>sandboxed</strong> environment.</p>

<p>What specific approaches, tools and techniques can you recommend?</p>

<p><hr /></p>

<p><em>Note: Python C extension or ctypes is <strong>not an option</strong> because the environment is sandboxed.</em></p>

<p><em>Another note</em>: looks like there is a <a href=""http://www.axiomsol.com/"" rel=""nofollow"">C-to-Java-bytecode compiler</a>, they even compiled libjpeg to Java. Is Java bytecode+VM too different from CPython bytecode+VM?</p>
"
132488,1448,2008-09-25T10:23:33Z,5,Regex to remove conditional comments,"<p>I want a regex which can match conditional comments in a HTML source page so I can remove only those. I want to preserve the regular comments.</p>

<p>I would also like to avoid using the .*? notation if possible. </p>

<p>The text is </p>

<pre><code>foo

&lt;!--[if IE]&gt;

&lt;style type=""text/css""&gt;

ul.menu ul li{
    font-size: 10px;
    font-weight:normal;
    padding-top:0px;
}

&lt;/style&gt;

&lt;![endif]--&gt;

bar
</code></pre>

<p>and I want to remove everything in <code>&lt;!--[if IE]&gt;</code> and <code>&lt;![endif]--&gt;</code></p>

<p><strong>EDIT:</strong> It is because of BeautifulSoup I want to remove these tags. BeautifulSoup fails to parse and gives an incomplete source</p>

<p><strong>EDIT2:</strong> [if IE] isn't the only condition. There are lots more and I don't have any list of all possible combinations.</p>

<p><strong>EDIT3:</strong> Vinko Vrsalovic's solution works, but the actual problem why beautifulsoup failed was because of a rogue comment within the conditional comment. Like</p>

<pre><code>&lt;!--[if lt IE 7.]&gt;
&lt;script defer type=""text/javascript"" src=""pngfix_253168.js""&gt;&lt;/script&gt;&lt;!--png fix for IE--&gt;
&lt;![endif]--&gt;
</code></pre>

<p>Notice the <code>&lt;!--png fix for IE--&gt;</code> comment?</p>

<p>Though my problem was solve, I would love to get a regex solution for this.</p>
"
132988,61,2008-09-25T12:27:09Z,299,Is there a difference between `==` and `is` in Python?,"<p>My <a href=""http://en.wiktionary.org/wiki/Google-fu"">Google-fu</a> has failed me.</p>

<p>In Python, are the following two tests for equality equivalent (ha!)?</p>

<pre><code>n = 5
# Test one.
if n == 5:
    print 'Yay!'

# Test two.
if n is 5:
    print 'Yay!'
</code></pre>

<p>Does this hold true for objects where you would be comparing instances (a <code>list</code> say)?</p>

<p>Okay, so this kind of answers my question:</p>

<pre><code>L = []
L.append(1)
if L == [1]:
    print 'Yay!'
# Holds true, but...

if L is [1]:
    print 'Yay!'
# Doesn't.
</code></pre>

<p>So <code>==</code> tests value where <code>is</code> tests to see if they are the same object?</p>
"
133774,16148,2008-09-25T14:40:55Z,2,Concurrent Access to RRD (RRDTool),"<p>I am using RRDTool (<a href=""http://oss.oetiker.ch/rrdtool/"" rel=""nofollow"">http://oss.oetiker.ch/rrdtool/</a>) as a graphing back-end for storing performance metrics.  This is done via the RRDTool CLI from a Python script.</p>

<p>My problem is that the script is multithreaded and each thread updates the RRD at a pretty rapid pace.  Sometimes an update fails because one thread is accessing the RRD file while another one tries to access it also.</p>

<p>I was under the impression that this is OK to try since RRDTool uses its own locking mechanism, but I guess that isn't true.</p>

<p>Does anyone have a good approach for concurrent access to an RRD?</p>

<p>I can think of a few ways to go:</p>

<ol>
<li><p>have 1 thread create a queue and only feed the RRD from a single thread.</p></li>
<li><p>create my own locking mechanism inside the Python script. (how would I do this?)</p></li>
</ol>

<p>got anything better or have you run into this issue before?</p>
"
133860,140995,2008-09-25T15:05:26Z,6,Running subversion under apache and mod_python,"<p>My Apache server runs on some non-default (not-root) account. When it tries to run a python script which in turn executes a subversion check-out command, 'svn checkout' fails with the following error message:</p>

<pre><code>svn: Can't open file '/root/.subversion/servers': Permission denied
</code></pre>

<p>At the same time running that python script with subversion checkout command inside from command line under the same user account goes on perfectly well.</p>

<p>Apache server 2.2.6 with mod_python 3.2.8 runs on Fedora Core 6 machine.</p>

<p>Can anybody help me out? Thanks a lot.</p>
"
133886,8206,2008-09-25T15:10:05Z,13,Efficiently match multiple regexes in Python,"<p>Lexical analyzers are quite easy to write when you have regexes. Today I wanted to write a simple general analyzer in Python, and came up with:</p>

<pre><code>import re
import sys

class Token(object):
    """""" A simple Token structure.
        Contains the token type, value and position. 
    """"""
    def __init__(self, type, val, pos):
        self.type = type
        self.val = val
        self.pos = pos

    def __str__(self):
        return '%s(%s) at %s' % (self.type, self.val, self.pos)


class LexerError(Exception):
    """""" Lexer error exception.

        pos:
            Position in the input line where the error occurred.
    """"""
    def __init__(self, pos):
        self.pos = pos


class Lexer(object):
    """""" A simple regex-based lexer/tokenizer.

        See below for an example of usage.
    """"""
    def __init__(self, rules, skip_whitespace=True):
        """""" Create a lexer.

            rules:
                A list of rules. Each rule is a `regex, type`
                pair, where `regex` is the regular expression used
                to recognize the token and `type` is the type
                of the token to return when it's recognized.

            skip_whitespace:
                If True, whitespace (\s+) will be skipped and not
                reported by the lexer. Otherwise, you have to 
                specify your rules for whitespace, or it will be
                flagged as an error.
        """"""
        self.rules = []

        for regex, type in rules:
            self.rules.append((re.compile(regex), type))

        self.skip_whitespace = skip_whitespace
        self.re_ws_skip = re.compile('\S')

    def input(self, buf):
        """""" Initialize the lexer with a buffer as input.
        """"""
        self.buf = buf
        self.pos = 0

    def token(self):
        """""" Return the next token (a Token object) found in the 
            input buffer. None is returned if the end of the 
            buffer was reached. 
            In case of a lexing error (the current chunk of the
            buffer matches no rule), a LexerError is raised with
            the position of the error.
        """"""
        if self.pos &gt;= len(self.buf):
            return None
        else:
            if self.skip_whitespace:
                m = self.re_ws_skip.search(self.buf[self.pos:])

                if m:
                    self.pos += m.start()
                else:
                    return None

            for token_regex, token_type in self.rules:
                m = token_regex.match(self.buf[self.pos:])

                if m:
                    value = self.buf[self.pos + m.start():self.pos + m.end()]
                    tok = Token(token_type, value, self.pos)
                    self.pos += m.end()
                    return tok

            # if we're here, no rule matched
            raise LexerError(self.pos)

    def tokens(self):
        """""" Returns an iterator to the tokens found in the buffer.
        """"""
        while 1:
            tok = self.token()
            if tok is None: break
            yield tok


if __name__ == '__main__':
    rules = [
        ('\d+',             'NUMBER'),
        ('[a-zA-Z_]\w+',    'IDENTIFIER'),
        ('\+',              'PLUS'),
        ('\-',              'MINUS'),
        ('\*',              'MULTIPLY'),
        ('\/',              'DIVIDE'),
        ('\(',              'LP'),
        ('\)',              'RP'),
        ('=',               'EQUALS'),
    ]

    lx = Lexer(rules, skip_whitespace=True)
    lx.input('erw = _abc + 12*(R4-623902)  ')

    try:
        for tok in lx.tokens():
            print tok
    except LexerError, err:
        print 'LexerError at position', err.pos
</code></pre>

<p>It works just fine, but I'm a bit worried that it's too inefficient. Are there any regex tricks that will allow me to write it in a more efficient / elegant way ? </p>

<p>Specifically, is there a way to avoid looping over all the regex rules linearly to find one that fits?</p>
"
134387,1566663,2008-09-25T16:34:14Z,10,Run Pylons controller as separate app?,"<p>I have a Pylons app where I would like to move some of the logic to a separate batch process.   I've been running it under the main app for testing, but it is going to be doing a lot of work in the database, and I'd like it to be a separate process that will be running in the background constantly.   The main pylons app will submit jobs into the database, and the new process will do the work requested in each job.</p>

<p>How can I launch a controller as a stand alone script?</p>

<p>I currently have:</p>

<pre><code>from warehouse2.controllers import importServer
importServer.runServer(60)
</code></pre>

<p>and in the controller file, but not part of the controller class:</p>

<pre><code>def runServer(sleep_secs):
    try:
        imp = ImportserverController()
        while(True):
            imp.runImport()
            sleepFor(sleep_secs)

    except Exception, e:
        log.info(""Unexpected error: %s"" % sys.exc_info()[0])
        log.info(e)
</code></pre>

<p>But starting ImportServer.py on the command line results in:</p>

<pre><code>2008-09-25 12:31:12.687000 Could not locate a bind configured on mapper Mapper|I
mportJob|n_imports, SQL expression or this Session
</code></pre>
"
134626,4872,2008-09-25T17:15:03Z,58,Which is more preferable to use in Python: lambda functions or nested functions ('def')?,"<p>I mostly use lambda functions but sometimes use nested functions that seem to provide the same behavior. </p>

<p>Here are some trivial examples where they functionally do the same thing if either were found within another function:</p>

<p><strong>Lambda function</strong></p>

<pre><code>&gt;&gt;&gt; a = lambda x : 1 + x
&gt;&gt;&gt; a(5)
6
</code></pre>

<p><strong>Nested function</strong></p>

<pre><code>&gt;&gt;&gt; def b(x): return 1 + x

&gt;&gt;&gt; b(5)
6
</code></pre>

<p>Is there advantages to using one over the other? (Performance? Readability? Limitations? Consistency? etc.) Does it even matter? If doesn't then does that violate the Pythonic principle: <a href=""http://en.wikipedia.org/wiki/Python_(programming_language)#Philosophy"">“There should be one—and preferably only one—obvious way to do it”</a>.</p>
"
134629,20578,2008-09-25T17:15:23Z,7,How do I use django.core.urlresolvers.reverse with a function reference instead of a named URL pattern?,"<p>In my <code>urls.py</code> file, I have:</p>

<pre><code>from myapp import views
...
(r'^categories/$', views.categories)
</code></pre>

<p>Where <code>categories</code> is a view function inside <code>myapp/views.py</code>. No other URLconf lines reference <code>views.categories</code>.</p>

<p>In a unit test file, I’m trying to grab this URL using <code>django.core.urlresolvers.reverse()</code>, instead of just copying '/categories/' (DRY and all that). So, I have:</p>

<pre><code>from django.core.urlresolvers import reverse
from myapp import views
...

url = reverse(views.categories)
</code></pre>

<p>When I run my tests, I get a <code>NoReverseMatch</code> error:</p>

<pre><code>NoReverseMatch: Reverse for '&lt;function categories at 0x1082f30&gt;' with arguments '()' and keyword arguments '{}' not found.
</code></pre>

<p>It matches just fine if I make the URL pattern a named pattern, like this:</p>

<pre><code>url(r'^categories/$', views.categories, 'myapp-categories')
</code></pre>

<p>And use the pattern name to match it:</p>

<pre><code>url = reverse('myapp-categories')
</code></pre>

<p>But as far as I can tell from <a href=""http://docs.djangoproject.com/en/dev/topics/http/urls/#reverse"">the <code>reverse</code> documentation</a>, I shouldn’t need to make it a named URL pattern just to use <code>reverse</code>.</p>

<p>Any ideas what I’m doing wrong?</p>
"
134934,22306,2008-09-25T18:06:06Z,356,Display number with leading zeros,"<p>Given:</p>

<pre><code>a = 1
b = 10
c = 100
</code></pre>

<p>I want to display a leading zero for all numbers with less than 2 digits, i.e.:</p>

<pre><code>01
10
100
</code></pre>
"
135035,19784,2008-09-25T18:23:50Z,30,Python Library Path,"<p>In ruby the library path is provided in $:, in perl it's in @INC - how do you get the list of paths that Python searches for modules when you do an import?</p>
"
135041,18446,2008-09-25T18:24:37Z,375,Should you always favor xrange() over range()?,"<p>Why or why not?</p>
"
135246,16363,2008-09-25T18:59:41Z,2,Reading 32bit Packed Binary Data On 64bit System,"<p>I'm attempting to write a Python C extension that reads packed binary data (it is stored as  structs of structs) and then parses it out into Python objects.  Everything works as expected on a 32 bit machine (the binary files are always written on 32bit architecture), but not on a 64 bit box.  Is there a ""preferred"" way of doing this?</p>

<p><hr /></p>

<p>It would be a lot of code to post but as an example:</p>

<pre><code>struct
{
	WORD	version;
	BOOL	upgrade;
	time_t	time1;
            time_t  time2;
} apparms;

File *fp;
fp = fopen(filePath, ""r+b"");
fread(&amp;apparms, sizeof(apparms), 1, fp);
return Py_BuildValue(""{s:i,s:l,s:l}"",
  ""sysVersion"",apparms.version,
  ""powerFailTime"", apparms.time1,
  ""normKitExpDate"", apparms.time2
 );
</code></pre>

<p>Now on a 32 bit system this works great, but on a 64 bit my time_t sizes are different (32bit vs 64 bit longs).</p>

<p><hr /></p>

<p>Damn, you people are fast.  </p>

<p>Patrick, I originally started using the struct package but found it just way to slow for my needs.  Plus I was looking for an excuse to write a Python Extension.</p>

<p>I know this is a stupid question but what types do I need to watch out for?</p>

<p>Thanks.</p>
"
135303,20133,2008-09-25T19:06:03Z,8,How can I closely achieve ?: from C++/C# in Python?,"<p>In C# I could easily write the following:</p>

<pre><code>string stringValue = string.IsNullOrEmpty( otherString ) ? defaultString : otherString;
</code></pre>

<p>Is there a quick way of doing the same thing in Python or am I stuck with an 'if' statement?</p>
"
135664,4279,2008-09-25T20:04:09Z,13,How many bytes per element are there in a Python list (tuple)?,"<p>For example, how much memory is required to store a list of one million (32-bit) integers?</p>

<pre><code>alist = range(1000000) # or list(range(1000000)) in Python 3.0
</code></pre>
"
135834,14028,2008-09-25T20:29:27Z,45,Python: SWIG vs ctypes,"<p>In python, under what circumstances is SWIG a better choice than ctypes for calling entry points in shared libraries? Let's assume you don't already have the SWIG interface file(s). <br><br>What are the performance metrics of the two?</p>
"
136069,13203,2008-09-25T20:59:49Z,18,Python web development - with or without a framework,"<p>I am planning on porting a PHP application over to Python.  The application is mostly about data collection and processing.  The main application runs as a stand alone command line application.  There is a web interface to the application which is basically a very light weight reporting interface.  </p>

<p>I did not use a framework in the PHP version, but being new to Python, I am wondering if it would be advantageous to use something like Django or at the very least Genshi.  The caveat is I do not want my application distribution to be overwhelmed by the framework parts I would need to distribute with the application.  </p>

<p>Is using only the cgi import in Python the best way to go in this circumstance?  I would tend to think a framework is too much overhead, but perhaps I'm not thinking in a very ""python"" way about them.  What suggestions do you have in this scenario?</p>
"
136097,4766,2008-09-25T21:01:57Z,1583,What is the difference between @staticmethod and @classmethod in Python?,"<p>What is the difference between a function decorated with <a href=""http://docs.python.org/library/functions.html#staticmethod""><code>@staticmethod</code></a> and one decorated with <a href=""http://docs.python.org/library/functions.html#classmethod""><code>@classmethod</code></a>?</p>
"
136168,19990,2008-09-25T21:11:11Z,122,"Get last n lines of a file with Python, similar to tail","<p>I'm writing a log file viewer for a web application and for that I want to paginate through the lines of the log file.  The items in the file are line based with the newest item on the bottom.</p>

<p>So I need a <code>tail()</code> method that can read <code>n</code> lines from the bottom and supports an offset.  What I came up with looks like this:</p>

<pre><code>def tail(f, n, offset=0):
    """"""Reads a n lines from f with an offset of offset lines.""""""
    avg_line_length = 74
    to_read = n + offset
    while 1:
        try:
            f.seek(-(avg_line_length * to_read), 2)
        except IOError:
            # woops.  apparently file is smaller than what we want
            # to step back, go to the beginning instead
            f.seek(0)
        pos = f.tell()
        lines = f.read().splitlines()
        if len(lines) &gt;= to_read or pos == 0:
            return lines[-to_read:offset and -offset or None]
        avg_line_length *= 1.3
</code></pre>

<p>Is this a reasonable approach?  What is the recommended way to tail log files with offsets?</p>
"
136207,18866,2008-09-25T21:18:09Z,10,How do you manage your custom modules?,"<p>I write tons of python scripts, and I find myself reusing lots code that I've written for other projects. My solution has been to make sure the code is separated into logical modules/packages (this one's a given). I then make them setuptools-aware and publish them on PyPI. This allows my other scripts to always have the most up-to-date code, I get a warm fuzzy feeling because I'm not repeating myself, and my development, in general, is made less complicated. I also feel good that there MAY be someone out there that finds my code handy for something they're working on, but it's mainly for selfish reasons :)</p>

<p>To all the pythonistas, how do you handle this? Do you use PyPI or setuptools (easy_install)? or something else?</p>
"
136734,115,2008-09-25T22:58:01Z,13,Key Presses in Python,"<p>Is it possible to make it appear to a system that a key was pressed, for example I need to  make <kbd>A</kbd> key be pressed thousands of times, and it is much to time consuming to do it manually, I would like to write something to do it for me, and the only thing I know well enough is Python.</p>

<p>A better way to put it, I need to emulate a key press, I.E. not capture a key press.</p>

<p>More Info (as requested):
I am running windows XP and need to send the keys to another application.</p>
"
136739,20654,2008-09-25T22:59:10Z,6,Python language API,"<p>I'm starting with Python coming from java. </p>

<p>I was wondering if there exists something similar to JavaDoc API where I can find the class, its methods and and example of how to use it.</p>

<p>I've found very helpul to use <em>help( thing )</em> from the Python ( command line ) </p>

<p>I have found this also:</p>

<p><a href=""http://docs.python.org/2/"" rel=""nofollow"">http://docs.python.org/2/</a></p>

<p><a href=""https://docs.python.org/2/py-modindex.html"" rel=""nofollow"">https://docs.python.org/2/py-modindex.html</a></p>

<p>But it seems to help when you already have the class name  you are looking for. In JavaDoc API I have all the classes so if I need something I scroll down to  a class that ""sounds like"" what I need. Or some times I just browse all the classes to see what they do, and when I need a feature my brain recalls me   <em>We saw something similar in the javadoc remember!?</em> </p>

<p>But I don't seem to find the similar in Python ( yet ) and that why I'm posting this questin. </p>

<p>BTW I know that I would eventually will read this:</p>

<p><a href=""https://docs.python.org/2/library/"" rel=""nofollow"">https://docs.python.org/2/library/</a></p>

<p>But, well, I think it is not today.</p>
"
136789,15245,2008-09-25T23:12:50Z,4,How do you make Python / PostgreSQL faster?,"<p>Right now I have a log parser reading through 515mb of plain-text files (a file for each day over the past 4 years). My code currently stands as this: <a href=""http://gist.github.com/12978"" rel=""nofollow"">http://gist.github.com/12978</a>. I've used psyco (as seen in the code) and I'm also compiling it and using the compiled version. It's doing about 100 lines every 0.3 seconds. The machine is a standard 15"" MacBook Pro (2.4ghz C2D, 2GB RAM)</p>

<p>Is it possible for this to go faster or is that a limitation on the language/database?</p>
"
137580,18866,2008-09-26T03:20:19Z,3,How can I perform a HEAD request with the mechanize library?,"<p>I know how to do a HEAD request with httplib, but I have to use mechanize for this site. </p>

<p>Essentially, what I need to do is grab a value from the header (filename) without actually downloading the file.</p>

<p>Any suggestions how I could accomplish this?</p>
"
138029,680,2008-09-26T06:26:17Z,1,Get Bound Event Handler in Tkinter,"<p>After a bind a method to an event of a Tkinter element is there a way to get the method back?</p>

<pre><code>&gt;&gt;&gt; root = Tkinter.Tk()
&gt;&gt;&gt; frame = Tkinter.Frame(root, width=100, height=100)
&gt;&gt;&gt; frame.bind('&lt;Button-1&gt;', lambda e: pprint('Click')) # function needed
&gt;&gt;&gt; frame.pack()
&gt;&gt;&gt; bound_event_method = frame.???
</code></pre>
"
138045,22562,2008-09-26T06:35:30Z,12,Is there something like Python's getattr() in C#?,"<p>Is there something like <a href=""http://effbot.org/zone/python-getattr.htm"">Python's getattr()</a> in C#? I would like to create a window by reading a list which contains the names of controls to put on the window.</p>
"
138250,2592,2008-09-26T08:10:50Z,63,How can I read the RGB value of a given pixel in Python?,"<p>If I open an image with <code>open(""image.jpg"")</code>, how can I get the RGB values of a pixel, if I have the coordinates of the pixel?</p>

<p>Then how can I do the reverse of this? Starting with a blank graphic, 'write' a pixel with a certain RGB value?</p>

<p>It would be so much better if I didn't have to download any additional libraries.</p>
"
138353,18676,2008-09-26T08:54:37Z,1,Dynamic radio button creation,"<p>In wxPython, if I create a list of radio buttons and place the list initially, is it possible to change the contents in that list later?</p>

<p>For example, I have a panel that uses a boxSizer to place the widgets initially. One of those widgets is a list of radio buttons (I have also tried a normal radiobox). I would like to dynamically change the list based on variables from another class.</p>

<p>However, once the list is placed in the sizer, it's effectively ""locked""; I can't just modify the list and have the changes appear. If I try re-adding the list to the sizer, it just gets put in the top left corner of the panel.</p>

<p>I'm sure I could hide the original list and manually place the new list in the same position but that feels like a kludge. I'm sure I'm making this harder than it is.  I'm probably using the wrong widgets for this, much less the wrong approach, but I'm building this as a learning experience.</p>

<pre><code>    class Job(wiz.WizardPageSimple):
    """"""Character's job class.""""""

    def __init__(self, parent, title, attribs):
        wiz.WizardPageSimple.__init__(self, parent)
        self.next = self.prev = None
        self.sizer = makePageTitle(self, title)
        self.charAttribs = attribs

#---Create widgets
        self.Job_list = [""Aircraft Mechanic"", ""Vehicle Mechanic"", ""Electronics Specialist""]

        box1_title = wx.StaticBox( self, -1, """" )
        box1 = wx.StaticBoxSizer( box1_title, wx.VERTICAL )
        grid1 = wx.BoxSizer(wx.VERTICAL)
        for item in self.Job_list:
            radio = wx.RadioButton(self, -1, item)
            grid1.Add(radio)

##Debugging
        self.btn = wx.Button(self, -1, ""click"")
        self.Bind(wx.EVT_BUTTON, self.eligibleJob, self.btn)

#---Place widgets
        self.sizer.Add(self.Job_intro)
        self.sizer.Add(self.btn)
        box1.Add(grid1)
        self.sizer.Add(box1)        

    def eligibleJob(self, event):
        """"""Determine which Jobs a character is eligible for.""""""

        if self.charAttribs.intelligence &gt;= 12:
            skillList = [""Analyst"", ""Interrogator"", ""Fire Specialist"", ""Aircraft Pilot""]
            for skill in skillList:
                self.Job_list.append(skill)
            print self.Job_list ##Debugging
        #return self.Job_list
</code></pre>
"
138502,22610,2008-09-26T09:43:43Z,19,Pure Python XSLT library,"<p>Is there an XSLT library that is pure Python?</p>

<p>Installing libxml2+libxslt or any similar C libraries is a problem on some of the platforms I need to support.</p>

<p>I really only need basic XSLT support, and speed is not a major issue.</p>
"
138521,22610,2008-09-26T09:51:51Z,93,Is it feasible to compile Python to machine code?,"<p>How feasible would it be to compile Python (possibly via an intermediate C representation) into machine code?</p>

<p>Presumably it would need to link to a Python runtime library, and any parts of the Python standard library which were Python themselves would need to be compiled (and linked in) too.</p>

<p>Also, you would need to bundle the Python interpreter if you wanted to do dynamic evaluation of expressions, but perhaps a subset of Python that didn't allow this would still be useful.</p>

<p>Would it provide any speed and/or memory usage advantages?  Presumably the startup time of the Python interpreter would be eliminated (although shared libraries would still need loading at startup).</p>
"
138552,11545,2008-09-26T10:00:10Z,7,Can Regex be used for this particular string manipulation?,"<p>I need to replace character (say) <strong>x</strong> with character (say) <strong>P</strong> in a string, but only if it is contained in a quoted substring.
An example makes it clearer:</p>

<pre><code>axbx'cxdxe'fxgh'ixj'k  -&gt; axbx'cPdPe'fxgh'iPj'k
</code></pre>

<p>Let's assume, for the sake of simplicity, that quotes always come in pairs. </p>

<p>The obvious way is to just process the string one character at a time (a simple state machine approach);<br />
however, I'm wondering if regular expressions can be used to do all the processing in one go.</p>

<p>My target language is C#, but I guess my question pertains to any language having builtin or library support for regular expressions.</p>
"
138680,22623,2008-09-26T10:45:57Z,10,Vim extension (via Python)?,"<p>is it possible to extend vim functionality via custom extension (preferably, written in Python)?</p>

<p>What I need ideally is custom command when in command mode. E.g.</p>

<p>ESC</p>

<p>:do_this</p>

<p>:do_that</p>
"
138851,7603,2008-09-26T11:23:51Z,6,How do I test a django database schema?,"<p>I want to write tests that can show whether or not the database is in sync with my models.py file. Actually I have already written them, only to find out that django creates a new database each time the tests are run based on the models.py file. 
Is there any way I can make the <strong>models.py test</strong> use the existing database schema? The one that's in mysql/postgresql, and not the one that's in /myapp/models.py ?</p>

<p>I don't care about the data that's in the database, I only care about it's <strong>schema</strong> i.e. I want my tests to notice if a table in the database has less fields than the schema in my models.py file. </p>

<p>I'm using the unittest framework (actually the django extension to it) if this has any relevance.</p>

<p>thanks</p>
"
139005,10710,2008-09-26T12:05:29Z,0,PyQt - QScrollBar,"<p>Dear Stacktoverflow, can you show me an example of how to use a QScrollBar? Thanks.</p>
"
139180,6527,2008-09-26T12:38:52Z,164,listing all functions in a python module,"<p>I have a python module installed on my system and I'd like to be able to see what functions/classes/methods are available in it.   </p>

<p>I want to call the doc function on each one. In ruby I can do something like ClassName.methods to get a list of all the methods available on that class. Is there something similar in python?</p>

<p>eg. something like:</p>

<pre><code>from somemodule import foo
print foo.methods # or whatever is the correct method to call
</code></pre>
"
139212,17583,2008-09-26T12:45:01Z,2,Adding Cookie to ZSI Posts,"<p>I've added cookie support to SOAPpy by overriding HTTPTransport.  I need functionality beyond that of SOAPpy, so I was planning on moving to ZSI, but I can't figure out how to put the Cookies on the ZSI posts made to the service.  Without these cookies, the server will think it is an unauthorized request and it will fail.</p>

<p>How can I add cookies from a Python CookieJar to ZSI requests?</p>
"
139819,4279,2008-09-26T14:19:48Z,9,Why results of map() and list comprehension are different?,"<p>The following test fails:</p>

<pre><code>#!/usr/bin/env python
def f(*args):
    """"""
    &gt;&gt;&gt; t = 1, -1
    &gt;&gt;&gt; f(*map(lambda i: lambda: i, t))
    [1, -1]
    &gt;&gt;&gt; f(*(lambda: i for i in t)) # -&gt; [-1, -1]
    [1, -1]
    &gt;&gt;&gt; f(*[lambda: i for i in t]) # -&gt; [-1, -1]
    [1, -1]
    """"""
    alist = [a() for a in args]
    print(alist)

if __name__ == '__main__':
    import doctest; doctest.testmod()
</code></pre>

<p>In other words:</p>

<pre><code>&gt;&gt;&gt; t = 1, -1
&gt;&gt;&gt; args = []
&gt;&gt;&gt; for i in t:
...   args.append(lambda: i)
...
&gt;&gt;&gt; map(lambda a: a(), args)
[-1, -1]
&gt;&gt;&gt; args = []
&gt;&gt;&gt; for i in t:
...   args.append((lambda i: lambda: i)(i))
...
&gt;&gt;&gt; map(lambda a: a(), args)
[1, -1]
&gt;&gt;&gt; args = []
&gt;&gt;&gt; for i in t:
...   args.append(lambda i=i: i)
...
&gt;&gt;&gt; map(lambda a: a(), args)
[1, -1]
</code></pre>
"
140026,12030,2008-09-26T14:56:05Z,5,Writing a Domain Specific Language for selecting rows from a table,"<p>I'm writing a server that I expect to be run by many different people, not all of whom I will have direct contact with. The servers will communicate with each other in a cluster. Part of the server's functionality involves selecting a small subset of rows from a potentially very large table. The exact choice of what rows are selected will need some tuning, and it's important that it's possible for the person running the cluster (eg, myself) to update the selection criteria without getting each and every server administrator to deploy a new version of the server.</p>

<p>Simply writing the function in Python isn't really an option, since nobody is going to want to install a server that downloads and executes arbitrary Python code at runtime.</p>

<p>What I need are suggestions on the simplest way to implement a Domain Specific Language to achieve this goal. The language needs to be capable of simple expression evaluation, as well as querying table indexes and iterating through the returned rows. Ease of writing and reading the language is secondary to ease of implementing it. I'd also prefer not to have to write an entire query optimiser, so something that explicitly specifies what indexes to query would be ideal.</p>

<p>The interface that this will have to compile against will be similar in capabilities to what the App Engine datastore exports: You can query for sequential ranges on any index on the table (eg, less-than, greater-than, range and equality queries), then filter the returned row by any boolean expression. You can also concatenate multiple independent result sets together.</p>

<p>I realise this question sounds a lot like I'm asking for SQL. However, I don't want to require that the datastore backing this data be a relational database, and I don't want the overhead of trying to reimplement SQL myself. I'm also dealing with only a single table with a known schema. Finally, no joins will be required. Something much simpler would be far preferable.</p>

<p>Edit: Expanded description to clear up some misconceptions.</p>
"
140182,293,2008-09-26T15:22:06Z,1,Regular expressions but for writing in the match,"<p>When using regular expressions we generally, if not always use them to extract some kind of information. What I need is to replace the match value with some other value... </p>

<p>Right now I'm doing this...</p>

<pre><code>def getExpandedText(pattern, text, replaceValue):
    """"""
        One liner... really ugly but it's only used in here.
    """"""

    return text.replace(text[text.find(re.findall(pattern, text)[0]):], replaceValue) + \
            text[text.find(re.findall(pattern, text)[0]) + len(replaceValue):]
</code></pre>

<p>so if I do sth like</p>

<pre><code>&gt;&gt;&gt; getExpandedText(""aaa(...)bbb"", ""hola aaaiiibbb como estas?"", ""ooo"")
'hola aaaooobbb como estas?'
</code></pre>

<p>It changes the (...) with 'ooo'.</p>

<p>Do you guys know whether with python regular expressions we can do this?</p>

<p>thanks a lot guys!!</p>
"
140295,5442,2008-09-26T15:38:00Z,2,Using locale.setlocale in embedded Python without breaking file parsing in C thread,"<p>We're using a third-party middleware product that allows us to write code in an embedded Python interpreter, and which exposes an API that we can call into. Some of these API calls allow us to load various kinds of file, and the loading code is implemented in C. File loading happens in a separate thread, and calls back into Python when the data is available. So far, all well and dandy.</p>

<p>We've been i14ing (heh) our product, and one thing we'd like to do is format user-facing numerical output according to the user's locale settings. So, from Python, we do this:</p>

<pre><code>import locale
locale.setLocale( locale.LC_ALL, '' )
</code></pre>

<p>Now, this works (in that the user-facing numbers are formatted correctly for their locale). However, if the user's locale differs from the default C locale, any files that are subsequently loaded will return incorrect data, presumably because all string-to-float conversion has been affected, right down to the metal.</p>

<p>We can't work around this by implementing locale aware file loading, so our current workaround is to only set the locale when formatting output for the user, and then set it back again afterwards. That is, something like:</p>

<pre><code>import locale
currentLocale = locale.getLocale( locale.LC_ALL )
locale.setLocale( locale.LC_ALL, '' )
displayNumbersToTheUser()
locale.setlocale( locale.LC_ALL, currentLocale )
</code></pre>

<p>This seems a bit clunky, and I was wondering whether this is a common approach to formatting locale-aware output for the user? My other concern is that this is obviously not thread safe, so we'll presumably still get problems if any file parsing occurs in a separate thread when the locale is changed.</p>

<p>Any information on best practice is appreciated - I don't have much experience with this sort of thing.</p>
"
140439,4319,2008-09-26T16:08:11Z,70,Authenticating against active directory using python + ldap,"<p>How do I authenticate against AD using Python + LDAP. I'm currently using the python-ldap library and all it is producing is tears.</p>

<p>I can't even bind to perform a simple query:</p>

<pre><code>import sys
import ldap


Server = ""ldap://my-ldap-server""
DN, Secret, un = sys.argv[1:4]

Base = ""dc=mydomain,dc=co,dc=uk""
Scope = ldap.SCOPE_SUBTREE
Filter = ""(&amp;(objectClass=user)(sAMAccountName=""+un+""))""
Attrs = [""displayName""]

l = ldap.initialize(Server)
l.protocol_version = 3
print l.simple_bind_s(DN, Secret)

r = l.search(Base, Scope, Filter, Attrs)
Type,user = l.result(r,60)
Name,Attrs = user[0]
if hasattr(Attrs, 'has_key') and Attrs.has_key('displayName'):
  displayName = Attrs['displayName'][0]
  print displayName

sys.exit()
</code></pre>

<p>Running this with <code>myusername@mydomain.co.uk password username</code> gives me one of two errors:</p>

<p><code>Invalid Credentials</code> - When I mistype or intentionally use wrong credentials it fails to authenticate.</p>

<blockquote>
  <p>ldap.INVALID_CREDENTIALS: {'info': '80090308: LdapErr: DSID-0C090334, comment: AcceptSecurityContext error, data 52e, vece', 'desc': 'Invalid credentials'}</p>
</blockquote>

<p>Or </p>

<blockquote>
  <p>ldap.OPERATIONS_ERROR: {'info': '00000000: LdapErr: DSID-0C090627, comment: In order to perform this operation a successful bind must be completed on the connection., data 0, vece', 'desc': 'Operations error'}</p>
</blockquote>

<p>What am I missing out to bind properly?</p>

<p>I am getting the same errors on fedora and windows.</p>
"
140758,2598,2008-09-26T17:20:14Z,10,Looking for File Traversal Functions in Python that are Like Java's,"<p>In Java you can do <code>File.listFiles()</code> and receive all of the files in a directory.  You can then easily recurse through directory trees.</p>

<p>Is there an analogous way to do this in Python?</p>
"
141291,10708,2008-09-26T19:01:06Z,68,How to list only top level directories in Python?,"<p>I want to be able to list only the directories inside some folder.
This means I don't want filenames listed, nor do I want additional sub-folders.</p>

<p>Let's see if an example helps. In the current directory we have:</p>

<pre><code>&gt;&gt;&gt; os.listdir(os.getcwd())
['cx_Oracle-doc', 'DLLs', 'Doc', 'include', 'Lib', 'libs', 'LICENSE.txt', 'mod_p
ython-wininst.log', 'NEWS.txt', 'pymssql-wininst.log', 'python.exe', 'pythonw.ex
e', 'README.txt', 'Removemod_python.exe', 'Removepymssql.exe', 'Scripts', 'tcl',
 'Tools', 'w9xpopen.exe']
</code></pre>

<p>However, I don't want filenames listed. Nor do I want sub-folders such as \Lib\curses. Essentially what I want works with the following:</p>

<pre><code>&gt;&gt;&gt; for root, dirnames, filenames in os.walk('.'):
...     print dirnames
...     break
...
['cx_Oracle-doc', 'DLLs', 'Doc', 'include', 'Lib', 'libs', 'Scripts', 'tcl', 'Tools']
</code></pre>

<p>However, I'm wondering if there's a simpler way of achieving the same results. I get the impression that using os.walk only to return the top level is inefficient/too much.</p>
"
141351,9585,2008-09-26T19:13:14Z,27,How do I find what is using memory in a Python process in a production system?,"<p>My production system occasionally exhibits a memory leak I have not been able to reproduce in a development environment.  I've used a <a href=""http://stackoverflow.com/questions/110259/python-memory-profiler"">Python memory profiler</a> (specifically, Heapy) with some success in the development environment, but it can't help me with things I can't reproduce, and I'm reluctant to instrument our production system with Heapy because it takes a while to do its thing and its threaded remote interface does not work well in our server.</p>

<p>What I think I want is a way to dump a snapshot of the production Python process (or at least gc.get_objects), and then analyze it offline to see where it is using memory.  <a href=""http://stackoverflow.com/questions/141802/how-do-i-dump-an-entire-python-process-for-later-debugging-inspection"">How do I get a core dump of a python process like this?</a>  Once I have one, how do I do something useful with it?</p>
"
141432,2183,2008-09-26T19:29:48Z,8,How can I create a status bar item with Cocoa and Python (PyObjC)?,"<p>I have created a brand new project in XCode and have the following in my AppDelegate.py file:</p>

<pre><code>from Foundation import *
from AppKit import *

class MyApplicationAppDelegate(NSObject):
    def applicationDidFinishLaunching_(self, sender):
    	NSLog(""Application did finish launching."")

    	statusItem = NSStatusBar.systemStatusBar().statusItemWithLength_(NSVariableStatusItemLength)
    	statusItem.setTitle_(u""12%"")
    	statusItem.setHighlightMode_(TRUE)
    	statusItem.setEnabled_(TRUE)
</code></pre>

<p>However, when I launch the application no status bar item shows up. All the other code in main.py and main.m is default.</p>
"
141449,4766,2008-09-26T19:33:55Z,49,How do I wrap a string in a file in Python?,"<p>How do I create a file-like object (same duck type as File) with the contents of a string?</p>
"
141487,22306,2008-09-26T19:40:57Z,20,Is there an easy way to populate SlugField from CharField?,"<pre><code>class Foo(models.Model):
    title = models.CharField(max_length=20)
    slug = models.SlugField()
</code></pre>

<p>Is there a built-in way to get the slug field to autopopulate based on the title? Perhaps in the Admin and outside of the Admin.</p>
"
141545,1179,2008-09-26T19:49:46Z,186,overloading __init__ in python,"<p>Let's say I have a class that has a member called data which is a list.  </p>

<p>I want to be able to initialize the class with, for example, a filename (which contains data to initialize the list) or with an actual list.</p>

<p>What's your technique for doing this?</p>

<p>Do you just check the type by looking at <code>__class__</code>?</p>

<p>Is there some trick I might be missing?</p>

<p>I'm used to C++ where overloading by argument type is easy. </p>

<p>Thanks.</p>
"
141642,4279,2008-09-26T20:06:41Z,40,What limitations have closures in Python compared to language X closures?,"<p>Where X is any programming language (C#, Javascript, Lisp, Perl, Ruby, Scheme, etc) which supports some flavour of closures.  </p>

<p>Some limitations are mentioned in the <a href=""http://ivan.truemesh.com/archives/000411.html"">Closures in Python</a> (compared to Ruby's closures), but the article is old and many limitations do not exist in modern Python any more.</p>

<p>Seeing a code example for a concrete limitation would be great.</p>

<p><strong>Related questions</strong>:</p>

<ul>
<li><a href=""http://stackoverflow.com/questions/13857/can-you-explain-closures-as-they-relate-to-python"">Can you explain closures (as they relate to Python)?</a></li>
<li><a href=""http://stackoverflow.com/questions/36636/what-is-a-closure"">What is a ‘Closure’?</a></li>
<li><a href=""http://stackoverflow.com/questions/111102/how-does-a-javascript-closure-work"">How does a javascript closure work ?</a></li>
</ul>
"
141647,22834,2008-09-26T20:07:55Z,1,Socket programming for mobile phones in Python,"<p>I've written code for communication between my phone and comp thru TCP sockets. When I type out the code line by line in the interactive console it works fine. However, when i try running the script directly through filebrowser.py it just wont work. I'm using Nokia N95. Is there anyway I can run this script directly without using filebrowser.py?
Am new to Python for mobile phones, so any suggestions would be appreciated.
Thanks</p>
"
141802,9585,2008-09-26T20:34:19Z,17,How do I dump an entire Python process for later debugging inspection?,"<p>I have a Python application in a strange state.  I don't want to do live debugging of the process.  Can I dump it to a file and examine its state later?  I know I've restored corefiles of C programs in gdb later, but I don't know how to examine a Python application in a useful way from gdb.</p>

<p>(This is a variation on my question about <a href=""http://stackoverflow.com/questions/141351/how-do-i-find-what-is-using-memory-in-a-python-process-in-a-production-system"">debugging memleaks in a production system</a>.)</p>
"
141973,96,2008-09-26T21:05:25Z,1,How do I get the key value of a db.ReferenceProperty without a database hit?,"<p>Is there a way to get the key (or id) value of a db.ReferenceProperty, without dereferencing the actual entity it points to?  I have been digging around - it looks like the key is stored as the property name preceeded with an _, but I have been unable to get any code working.  Examples would be much appreciated.  Thanks.</p>

<p>EDIT:  Here is what I have unsuccessfully tried:</p>

<pre><code>class Comment(db.Model):
    series = db.ReferenceProperty(reference_class=Series);

    def series_id(self):
        return self._series
</code></pre>

<p>And in my template:</p>

<pre><code>&lt;a href=""games/view-series.html?series={{comment.series_id}}#comm{{comment.key.id}}""&gt;more&lt;/a&gt;
</code></pre>

<p>The result:</p>

<pre><code>&lt;a href=""games/view-series.html?series=#comm59""&gt;more&lt;/a&gt;
</code></pre>
"
142545,22897,2008-09-26T23:59:47Z,82,Python: How to make a cross-module variable?,"<p>The <code>__debug__</code> variable is handy in part because it affects every module. If I want to create another variable that works the same way, how would I do it?</p>

<p>The variable (let's be original and call it 'foo') doesn't have to be truly global, in the sense that if I change foo in one module, it is updated in others. I'd be fine if I could set foo before importing other modules and then they would see the same value for it.</p>
"
142764,NA,2008-09-27T02:15:03Z,8,How do I upgrade python 2.5.2 to python 2.6rc2 on ubuntu linux 8.04?,"<p>I'd like to how to upgrade the default python installation(2.5.2) supplied with ubuntu 8.04 to python 2.6rc2. I'd like to make 2.6 the default python version on the system and migrate all the other useful installed python libraries installed on 2.5.2 to python 2.6rc2. Please let me know how I can achieve this.</p>

<p>Thanks
Dirk</p>
"
142812,10471,2008-09-27T02:47:40Z,34,Does Python have a bitfield type?,"<p>I need a compact representation of an array of booleans, does Python have a builtin bitfield type or will I need to find an alternate solution?</p>
"
142844,4859,2008-09-27T03:02:30Z,37,Drag and drop onto Python script in Windows Explorer,"<p>I would like to drag and drop my data file onto a Python script and have it process the file and generate output. The Python script accepts the name of the data file as a command-line parameter, but Windows Explorer doesn't allow the script to be a drop target.</p>

<p>Is there some kind of configuration that needs to be done somewhere for this work?</p>
"
143515,12344,2008-09-27T12:12:32Z,3,OCSP libraries for python / java / c?,"<p>Going back to my previous question on OCSP, does anybody know of ""reliable"" OCSP libraries  for Python, Java and C?</p>

<p>I need ""client"" OCSP functionality, as I'll be checking the status of Certs against an OCSP responder, so responder functionality is not that important.</p>

<p>Thanks</p>
"
143632,12344,2008-09-27T13:15:33Z,5,Crypto/X509 certificate parsing libraries for Python,"<p>Any recommended crypto libraries for Python. I know I've asked something similar in <a href=""http://stackoverflow.com/questions/143523/"">x509 certificate parsing libraries for Java</a>, but I should've split the question in two.</p>

<p>What I need is the ability to parse X.509 Certificates to extract the information contained in them.</p>

<p>Looking around, I've found two options:</p>

<ul>
<li>Python OpenSSL Wrappers (<a href=""http://sourceforge.net/projects/pow"" rel=""nofollow"" title=""Python OpenSSL Wrappers"">http://sourceforge.net/projects/pow</a>)</li>
<li><a href=""https://github.com/pyca/pyopenssl"" rel=""nofollow"">pyOpenSSL</a></li>
</ul>

<p>Of the two, pyOpenSSL seems to be the most ""maintained"", but I'd like some feedback on anybody who might have experience with them?</p>
"
144201,1367022,2008-09-27T18:28:42Z,22,Has anyone found a good set of python plugins for vim -- specifically module completion?,"<p>I'm looking for a suite of plugins that can help me finally switch over to vim full-time.</p>

<p>Right now I'm using Komodo with some good success, but their vim bindings have enough little errors that I'm tired of it.</p>

<p>What I do love in Komodo, though, is the code completion. So, here's what I'm looking for (ordered by importance).</p>

<ul>
<li>Code completion, meaning: the ability to code complete modules/functions/etc. in <em>any</em> module that's on the pythonpath, <strong>not just system modules</strong>. Bonus points for showing docstrings when completing.</li>
<li>Jump-to a class definition. I'm guessing CTAGS will do this, so how do you all manage automatically updating your tags files?</li>
<li>Project type management for managing buffers: ideally the ability to grep for a filename in a directory structure to open it. Bonus for showing an index of class definitions while a buffer is open.</li>
<li>Bzr integration. Not super important, since most of it I can just drop to the shell to do.</li>
</ul>
"
144218,2147,2008-09-27T18:47:54Z,4,Significant figures in the decimal module,"<p>So I've decided to try to solve my physics homework by writing some python scripts to solve problems for me.  One problem that I'm running into is that significant figures don't always seem to come out properly.  For example this handles significant figures properly:</p>

<pre><code>from decimal import Decimal
&gt;&gt;&gt; Decimal('1.0') + Decimal('2.0')
Decimal(""3.0"")
</code></pre>

<p>But this doesn't:</p>

<pre><code>&gt;&gt;&gt; Decimal('1.00') / Decimal('3.00')
Decimal(""0.3333333333333333333333333333"")
</code></pre>

<p>So two questions:</p>

<ol>
<li>Am I right that this isn't the expected amount of significant digits, or do I need to brush up on significant digit math?</li>
<li>Is there any way to do this without having to set the decimal precision manually?  Granted, I'm sure I can use numpy to do this, but I just want to know if there's a way to do this with the decimal module out of curiosity.</li>
</ol>
"
144448,20883,2008-09-27T20:55:04Z,20,Python PostgreSQL modules. Which is best?,"<p>I've seen a number of postgresql modules for python like pygresql, pypgsql, psyco. Most of them are Python DB API 2.0 compliant, some are not being actively developed anymore.
Which module do you recommend? Why?</p>
"
145155,3176,2008-09-28T03:39:35Z,2,Something like Explorer's icon grid view in a Python GUI,"<p>I am making a Python gui project that needs to duplicate the look of a Windows gui environment (ie Explorer).  I have my own custom icons to draw but they should be selectable by the same methods as usual; click, ctrl-click, drag box etc.  Are any of the gui toolkits going to help with this or will I have to implement it all myself.  If there aren't any tools to help with this advice would be greatly appreciated.</p>

<p><em>edit</em> I am not trying to recreate explorer, that would be madness.  I simply want to be able to take icons and lay them out in a scrollable window.  Any number of them may be selected at once.  It would be great if there was something that could select/deselect them in the same (appearing at least) way that Windows does.  Then all I would need is a list of all the selected icons.</p>
"
145270,9611,2008-09-28T05:34:20Z,270,Calling C/C++ from python?,"<p>What would be the quickest way to construct a python binding to a C or C++ library?</p>

<p>(using windows if this matters)</p>
"
145607,3834,2008-09-28T10:12:25Z,42,Text difference algorithm,"<p>I need an algorithm that can compare two text files and highlight their difference and  ( even better!) can compute their difference in a meaningful way (like two similar files should have a similarity score higher than two dissimilar files, with the word ""similar"" defined in the normal terms). It sounds easy to implement, but it's not.</p>

<p>The implementation can be in c# or python.</p>

<p>Thanks.</p>
"
146522,20578,2008-09-28T19:15:15Z,8,How do I successfully pass a function reference to Django’s reverse() function?,"<p>I’ve got a brand new Django project. I’ve added one minimal view function to <code>views.py</code>, and one URL pattern to <code>urls.py</code>, passing the view by function reference instead of a string:</p>

<pre><code># urls.py
# -------

# coding=utf-8

from django.conf.urls.defaults import *

from myapp import views


urlpatterns = patterns('',
    url(r'^myview/$', views.myview),
)


# views.py
----------

# coding=utf-8

from django.http import HttpResponse


def myview(request):
    return HttpResponse('MYVIEW LOL',  content_type=""text/plain"")
</code></pre>

<p>I’m trying to use <code>reverse()</code> to get the URL, by passing it a function reference. But I’m not getting a match, despite confirming that the view function I’m passing to reverse is the exact same view function I put in the URL pattern:</p>

<pre><code>&gt;&gt;&gt; from django.core.urlresolvers import reverse
&gt;&gt;&gt; import urls
&gt;&gt;&gt; from myapp import views

&gt;&gt;&gt; urls.urlpatterns[0].callback is views.myview
True

&gt;&gt;&gt; reverse(views.myview)
Traceback (most recent call last):
  File ""&lt;console&gt;"", line 1, in &lt;module&gt;
  File ""/Library/Python/2.5/site-packages/django/core/urlresolvers.py"", line 254, in reverse
    *args, **kwargs)))
  File ""/Library/Python/2.5/site-packages/django/core/urlresolvers.py"", line 243, in reverse
    ""arguments '%s' not found."" % (lookup_view, args, kwargs))
NoReverseMatch: Reverse for '&lt;function myview at 0x6fe6b0&gt;' with arguments '()' and keyword arguments '{}' not found.
</code></pre>

<p>As far as I can tell from the documentation, function references should be fine in both the URL pattern and <code>reverse()</code>.</p>

<ul>
<li><a href=""http://docs.djangoproject.com/en/dev/topics/http/urls/#passing-callable-objects-instead-of-strings"">URL patterns with function references</a></li>
<li><a href=""http://docs.djangoproject.com/en/dev/topics/http/urls/?from=olddocs#reverse""><code>reverse</code> with function references</a></li>
</ul>

<p>I’m using the Django trunk, revision 9092.</p>
"
146607,19207,2008-09-28T20:03:14Z,7,I'm using Python regexes in a criminally inefficient manner,"<p>My goal here is to create a very simple template language. At the moment, I'm working on replacing a variable with a value, like this:</p>

<p>This input:</p>

<blockquote>
  <p>&lt;%""TITLE""=""This Is A Test Variable""%>The Web &lt;%""TITLE""%></p>
</blockquote>

<p>Should produce this output:</p>

<blockquote>
  <p>The Web This Is A Test Variable</p>
</blockquote>

<p>I've got it working. But looking at my code, I'm running multiple identical regexes on the same strings -- that just offends my sense of efficiency. There's got to be a better, more Pythonic way. (It's the two ""while"" loops that really offend.)</p>

<p>This does pass the unit tests, so if this is silly premature optimization, tell me -- I'm willing to let this go. There may be dozens of these variable definitions and uses in a document, but not hundreds. But I suspect there's obvious (to other people) ways of improving this, and I'm curious what the StackOverflow crowd will come up with.</p>

<pre><code>def stripMatchedQuotes(item):
    MatchedSingleQuotes = re.compile(r""'(.*)'"", re.LOCALE)
    MatchedDoubleQuotes = re.compile(r'""(.*)""', re.LOCALE)
    item = MatchedSingleQuotes.sub(r'\1', item, 1)
    item = MatchedDoubleQuotes.sub(r'\1', item, 1)
    return item




def processVariables(item):
    VariableDefinition = re.compile(r'&lt;%(.*?)=(.*?)%&gt;', re.LOCALE)
    VariableUse = re.compile(r'&lt;%(.*?)%&gt;', re.LOCALE)
    Variables={}

    while VariableDefinition.search(item):
        VarName, VarDef = VariableDefinition.search(item).groups()
        VarName = stripMatchedQuotes(VarName).upper().strip()
        VarDef = stripMatchedQuotes(VarDef.strip())
        Variables[VarName] = VarDef
        item = VariableDefinition.sub('', item, 1)

    while VariableUse.search(item):
        VarName = stripMatchedQuotes(VariableUse.search(item).group(1).upper()).strip()
        item = VariableUse.sub(Variables[VarName], item, 1)

    return item
</code></pre>
"
146789,19212,2008-09-28T21:31:21Z,8,"In Django, where is the best place to put short snippets of HTML-formatted data?","<p>This question is related to (but perhaps not quite the same as):</p>

<p><a href=""http://stackoverflow.com/questions/61451/does-django-have-html-helpers"">http://stackoverflow.com/questions/61451/does-django-have-html-helpers</a></p>

<p>My problem is this: In Django, I am constantly reproducing the basic formatting for low-level database objects. Here's an example:</p>

<p>I have two classes, Person and Address. There are multiple Addresses for each Person, setup likeso (in their respective <strong>models.py</strong>)</p>

<pre><code>class Person(models.Model):
  ...

class Address(models.Model):
  contact = models.ForeignKey(Person)
</code></pre>

<p>Now, whenever I look at a Person, I want to see all their Addresses. So suppose <strong>Persons/views.py</strong> has something likeso:</p>

<pre><code>def detail(request, person_id):
   person = get_object_or_404( Person, pk=person_id )
   return render_to_response('persons/details.html',
      { 'title' : unicode(person), 'addresses': person.address_set.all() } )
</code></pre>

<p>And, I have a template, <strong>persons/details.html</strong>, with code, for example, like-so:</p>

<pre><code>{% extends ""base.html"" %}

{% for address in addresses %}
&lt;b&gt;{{ address.name }}&lt;/b&gt;
  {{ address.type }} &lt;br&gt;
  {{ address.street_1 }}&lt;br&gt;
  {{ address.street_2 }}&lt;br&gt;
  {{ address.city }} {{ address.stateprov }} {{ address.postalcode }}&lt;br&gt;
  {{ address.country }}
  &lt;hr&gt;
{{ endfor }}
</code></pre>

<p>I am repeating this code quite a bit, often with minor variations, such when it's in a table, and then &lt; br > must be substituted by &lt; /td >&lt; td >. Other times, I don't want a street_2 to display (or the &lt; br > after it). All to say, there is fundamental logic that I want to express, that I am even more loath to tote around with block-and-copy!</p>

<p>What I want is a <strong>persons/details.html</strong> with, for example, the following: </p>

<pre><code>{% extends ""base.html"" %}
{% for address in addresses %} 
  {% address.as_html4 %}
{% endfor %}
</code></pre>

<p>And if I want inline table, something likeso (I guess!):</p>

<pre><code>{% extends ""base.html"" %}
&lt;table&gt;&lt;tr&gt;
{% for address in addresses %}
  &lt;tr&gt;&lt;td&gt; {% address.as_html4 &lt;/td&gt;&lt;td&gt; %} &lt;/td&gt;&lt;/tr&gt;
{% endfor %}
&lt;/table&gt;
</code></pre>

<p>The question is, then: Where is the best place to put the formatting? The logic?</p>

<p>Django seem to have the following (plausible) options:</p>

<ol>
<li><p>Put the formatting in models.py</p></li>
<li><p>Put the logic/formatting in views.py</p></li>
<li><p>Put the logic/formatting in some other sub-class of Person or Address (i.e.  addresses/html4.py)</p></li>
<li><p>Create custom tags</p></li>
</ol>

<p>Help / insight much appreciated!</p>
"
147437,3834,2008-09-29T03:41:45Z,2,"Difflib.SequenceMatcher isjunk optional parameter query: how to ignore whitespaces, tabs, empty lines?","<p>I am trying to use Difflib.SequenceMatcher to compute the similarities between two files. These two files are almost identical except that one contains some extra whitespaces, empty lines and other doesn't. I am trying to use</p>

<pre><code>s=difflib.SequenceMatcher(isjunk,text1,text2)
ratio =s.ratio()
</code></pre>

<p>for this purpose.</p>

<p>So, the question is how to write the lambda expression for this isjunk method so the SequenceMatcher method will discount all the whitespaces, empty lines etc. I tried to use the parameter lambda x: x=="" "", but the result isn't as great. For two closely similar text, the ratio is very low. This is highly counter intuitive. </p>

<p>For testing purpose, here are the two strings that you can use on testing:</p>

<blockquote>
  <p>What Motivates jwovu to do your Job
  Well? OK, this is an entry trying to
  win $100 worth of software development
  books despite the fact that I don‘t
  read </p>
  
  <p>programming books. In order to win the
  prize you have to write an entry and<br />
  what motivatesfggmum to do your job
  well. Hence this post. First
  motivation </p>
  
  <p>money. I know, this doesn‘t sound like
  a great inspiration to many, and
  saying that money is one of the
  motivation factors might just blow my
  chances away. </p>
  
  <p>As if money is a taboo in programming
  world. I know there are people who
  can‘t be motivated by money.   Mme, on
  the other hand, am living in a real
  world, </p>
  
  <p>with house mortgage to pay, myself to
  feed and bills to cover. So I can‘t
  really exclude money from my
  consideration. If I can get a large
  sum of money for </p>
  
  <p>doing a good job, then   definitely
  boost my morale. I won‘t care whether
  I am using an old workstation, or
  forced to share rooms or cubicle with
  other </p>
  
  <p>people, or have to put up with an
  annoying boss, or whatever. The fact
  that at the end of the day I will walk
  off with a large pile of money itself
  is enough </p>
  
  <p>for me to overcome all the obstacles,
  put up with all the hard feelings and
  hurt egos, tolerate a slow computer
  and even endure</p>
</blockquote>

<p>And here's another string</p>

<blockquote>
  <p>What Motivates You to do your Job
  Well? OK, this is an entry trying to
  win $100 worth of software development
  books, despite the fact that I don't
  read programming books. In order to
  win the prize you have to write an
  entry and describes what motivates you
  to do your job well. Hence this post.</p>
  
  <p>First motivation, money. I know, this
  doesn't sound like a great inspiration
  to many, and saying that money is one
  of the motivation factors might just
  blow my chances away. As if money is a
  taboo in programming world. I know
  there are people who can't be
  motivated by money. Kudos to them. Me,
  on the other hand, am living in a real
  world, with house mortgage to pay,
  myself to feed and bills to cover. So
  I can't really exclude money from my
  consideration.</p>
  
  <p>If I can get a large sum of money for
  doing a good job, then thatwill
  definitely boost my morale. I won't
  care whether I am using an old
  workstation, or forced to share rooms
  or cubicle with other people, or have
  to put up with an annoying boss, or
  whatever. The fact that at the end of
  the day I will walk off with a large
  pile of money itself is enough for me
  to overcome all the obstacles, put up
  with all the hard feelings and hurt
  egos, tolerate a slow computer and
  even endure</p>
</blockquote>

<p>I ran the above command, and set the isjunk to lambda x:x=="" "", the ratio is only 0.36. </p>
"
147507,19212,2008-09-29T04:28:41Z,14,"How does one do the equivalent of ""import * from module"" with Python's __import__ function?","<p>Given a string with a module name, how do you import everything in the module as if you had called:</p>

<pre><code>from module import *
</code></pre>

<p>i.e. given string S=""module"", how does one get the equivalent of the following:</p>

<pre><code>__import__(S, fromlist=""*"")
</code></pre>

<p>This doesn't seem to perform as expected (as it doesn't import anything).</p>

<p>Thanks!</p>
"
147627,11674,2008-09-29T05:25:00Z,4,Django VMware appliance,"<p>Does anyone know of a Django 1.0 + postgresql + apache + mod_python VMware appliance? A ""vanilla"" Django 1.0 appliance where postgresql can be installed manually would also do.</p>
"
147650,18338,2008-09-29T05:41:00Z,11,Debug Pylons application through Eclipse,"<p>I have Eclipse setup with PyDev and love being able to debug my scripts/apps.  I've just started playing around with Pylons and was wondering if there is a way to start up the paster server through Eclipse so I can debug my webapp?</p>
"
147713,16144,2008-09-29T06:31:27Z,24,How do I manipulate bits in Python?,"<p>In C I could, for example, zero out bit #10 in a 32 bit unsigned value like so:</p>

<pre><code>unsigned long value = 0xdeadbeef;
value &amp;= ~(1&lt;&lt;10);
</code></pre>

<p>How do I do that in Python ?</p>
"
147741,3834,2008-09-29T06:47:47Z,60,Character reading from file in Python,"<p>In a text file, there is a string ""I don't like this"".</p>

<p>However, when I read it into a string, it becomes ""I don\xe2\x80\x98t like this"". I understand that \u2018 is the unicode representation of ""'"". I use </p>

<pre><code>f1 = open (file1, ""r"")
text = f1.read()
</code></pre>

<p>command to do the reading.</p>

<p>Now, is it possible to read the string in such a way that when it is read into the string, it is ""I don't like this"", instead of ""I don\xe2\x80\x98t like this like this""?</p>

<p>Second edit: I have seen some people use mapping to solve this problem, but really, is there no built-in conversion that does this kind of ANSI to unicode ( and vice versa) conversion?</p>
"
147752,23366,2008-09-29T06:53:13Z,36,In Django is there a way to display choices as checkboxes?,"<p>In the admin interface and newforms there is the brilliant helper of being able to define choices. You can use code like this:</p>

<pre><code>APPROVAL_CHOICES = (
    ('yes', 'Yes'),
    ('no', 'No'),
    ('cancelled', 'Cancelled'),
)

client_approved = models.CharField(choices=APPROVAL_CHOICES)
</code></pre>

<p>to create a drop down box in your form and force the user to choose one of those options.</p>

<p>I'm just wondering if there is a way to define a set of choices where multiple can be chosen using checkboxes? (Would also be nice to be able to say that the user can select a maximum number of them.) It seems like it's a feature that is probably implemented, it's just I can't seem to find it in the documentation.</p>
"
147816,1163767,2008-09-29T07:32:55Z,71,Preserving signatures of decorated functions,"<p>Suppose I have written a decorator that does something very generic. For example, it might convert all arguments to a specific type, perform logging, implement memoization, etc.</p>

<p>Here is an example:</p>

<pre><code>def args_as_ints(f):
    def g(*args, **kwargs):
        args = [int(x) for x in args]
        kwargs = dict((k, int(v)) for k, v in kwargs.items())
        return f(*args, **kwargs)
    return g

@args_as_ints
def funny_function(x, y, z=3):
    """"""Computes x*y + 2*z""""""
    return x*y + 2*z

&gt;&gt;&gt; funny_function(""3"", 4.0, z=""5"")
22
</code></pre>

<p>Everything well so far. There is one problem, however. The decorated function does not retain the documentation of the original function:</p>

<pre><code>&gt;&gt;&gt; help(funny_function)
Help on function g in module __main__:

g(*args, **kwargs)
</code></pre>

<p>Fortunately, there is a workaround:</p>

<pre><code>def args_as_ints(f):
    def g(*args, **kwargs):
        args = [int(x) for x in args]
        kwargs = dict((k, int(v)) for k, v in kwargs.items())
        return f(*args, **kwargs)
    g.__name__ = f.__name__
    g.__doc__ = f.__doc__
    return g

@args_as_ints
def funny_function(x, y, z=3):
    """"""Computes x*y + 2*z""""""
    return x*y + 2*z
</code></pre>

<p>This time, the function name and documentation are correct:</p>

<pre><code>&gt;&gt;&gt; help(funny_function)
Help on function funny_function in module __main__:

funny_function(*args, **kwargs)
    Computes x*y + 2*z
</code></pre>

<p>But there is still a problem: the function signature is wrong. The information ""*args, **kwargs"" is next to useless.</p>

<p>What to do? I can think of two simple but flawed workarounds:</p>

<p>1 -- Include the correct signature in the docstring:</p>

<pre><code>def funny_function(x, y, z=3):
    """"""funny_function(x, y, z=3) -- computes x*y + 2*z""""""
    return x*y + 2*z
</code></pre>

<p>This is bad because of the duplication. The signature will still not be shown properly in automatically generated documentation. It's easy to update the function and forget about changing the docstring, or to make a typo. [<i>And yes, I'm aware of the fact that the docstring already duplicates the function body. Please ignore this; funny_function is just a random example.</i>]</p>

<p>2 -- Not use a decorator, or use a special-purpose decorator for every specific signature:</p>

<pre><code>def funny_functions_decorator(f):
    def g(x, y, z=3):
        return f(int(x), int(y), z=int(z))
    g.__name__ = f.__name__
    g.__doc__ = f.__doc__
    return g
</code></pre>

<p>This works fine for a set of functions that have identical signature, but it's useless in general. As I said in the beginning, I want to be able to use decorators entirely generically.</p>

<p>I'm looking for a solution that is fully general, and automatic.</p>

<p>So the question is: is there a way to edit the decorated function signature after it has been created?</p>

<p>Otherwise, can I write a decorator that extracts the function signature and uses that information instead of ""*kwargs, **kwargs"" when constructing the decorated function? How do I extract that information? How should I construct the decorated function -- with exec?</p>

<p>Any other approaches?</p>
"
148042,18676,2008-09-29T09:12:24Z,3,Using OR comparisons with IF statements,"<p>When using IF statements in Python, you have to do the following to make the ""cascade"" work correctly.</p>

<pre><code>if job == ""mechanic"" or job == ""tech"":
        print ""awesome""
elif job == ""tool"" or job == ""rock"":
        print ""dolt""
</code></pre>

<p>Is there a way to make Python accept multiple values when checking for ""equals to""? For example,</p>

<pre><code>if job == ""mechanic"" or ""tech"":
    print ""awesome""
elif job == ""tool"" or ""rock"":
    print ""dolt""
</code></pre>
"
148853,17865,2008-09-29T14:17:13Z,11,Caching in urllib2?,"<p>Is there an easy way to cache things when using urllib2 that I am over-looking, or do I have to roll my own?</p>
"
148963,8206,2008-09-29T14:37:32Z,11,Keeping GUIs responsive during long-running tasks,"<p>Keeping the GUI responsive while the application does some CPU-heavy processing is one of the challenges of effective GUI programming.</p>

<p><a href=""http://wiki.wxpython.org/LongRunningTasks"">Here's a good discussion</a> of how to do this in wxPython. To summarize, there are 3 ways:</p>

<ol>
<li>Use threads</li>
<li>Use wxYield</li>
<li>Chunk the work and do it in the IDLE event handler</li>
</ol>

<p>Which method have <em>you</em> found to be the most effective ? Techniques from other frameworks (like Qt, GTK or Windows API) are also welcome.</p>
"
149040,22306,2008-09-29T14:55:55Z,3,Is there a way to define which fields in the model are editable in the admin app?,"<p>Assume the following:</p>

<p><em>models.py</em></p>

<pre><code>class Entry(models.Model):
    title = models.CharField(max_length=50)
    slug = models.CharField(max_length=50, unique=True)
    body = models.CharField(max_length=200)
</code></pre>

<p><em>admin.py</em></p>

<pre><code>class EntryAdmin(admin.ModelAdmin):
    prepopulated_fields = {'slug':('title',)}
</code></pre>

<p>I want the slug to be pre-populated by the title, but I dont want the user to be able to edit it from the admin. I assumed that adding the fields=[] to the admin object and not including the slug would have worked, but it didnt. I also tried setting editable=False in the model, but that also didnt work (infact, stops the page from rendering).</p>

<p>Thoughts? </p>
"
149307,NA,2008-09-29T15:48:55Z,6,Background tasks on appengine,"<p>How to run background tasks on appengine ?</p>
"
149559,18676,2008-09-29T16:44:21Z,2,Python desktop widgets,"<p>I'm interested in making desktop widgets, similar to Apple's Dashboard or what Vista has. I'd like to make them cross-platform, if possible. Opera's widgets are cross-platform but require the user to have Opera installed, so that's a big limitation.</p>

<p>I know most widgets are made with HTML/XML, CSS, and Javascript. Is there a way to create them using Python?</p>

<p><hr /></p>

<p><strong>Update</strong>: I did find a site talking about <a href=""http://advogato.org/article/981.html"" rel=""nofollow"">Pyjamas</a>. Does anyone have experience with it and, if so, what are its capabilities/limitations?</p>
"
149585,17865,2008-09-29T16:49:50Z,18,BeautifulSoup's Python 3 compatibility,"<p>Does BeautifulSoup work with Python 3? </p>

<p>If not, how soon will there be a port? Will there be a port at all?</p>

<p>Google doesn't turn up anything to me (Maybe it's 'coz I'm looking for the wrong thing?)</p>
"
150284,3051,2008-09-29T19:31:50Z,9,What is the difference between __reduce__ and __reduce_ex__?,"<p>I understand that these methods are for pickling/unpickling and have no relation to the reduce built-in function, but what's the difference between the 2 and why do we need both?</p>
"
150375,4766,2008-09-29T19:55:12Z,19,How do you break into the debugger from Python source code?,"<p>What do you insert into Python source code to have it break into pdb (when execution gets to that spot)? </p>
"
150517,23582,2008-09-29T20:31:37Z,7,Send file using POST from a Python script,"<p>This is an almost-duplicate of <a href=""http://stackoverflow.com/questions/68477/send-file-using-post-from-a-python-script"">http://stackoverflow.com/questions/68477/send-file-using-post-from-a-python-script</a>, but I'd like to add a caveat: I need something that properly handles the encoding of fields and attached files. The solutions I've been able to find blow up when you throw unicode strings containing non-ascii characters into the mix. Also, most of the solutions don't base64-encode data to keep things 7-bit clean.</p>
"
150532,2598,2008-09-29T20:37:34Z,8,How Does One Read Bytes from File in Python,"<p>Similar to <a href=""http://stackoverflow.com/questions/5415/convert-bytes-to-floating-point-numbers-in-python"">this</a> question, I am trying to read in an ID3v2 tag header and am having trouble figuring out how to get individual bytes in python.</p>

<p>I first read all ten bytes into a string.  I then want to parse out the individual pieces of information.</p>

<p>I can grab the two version number chars in the string, but then I have no idea how to take those two chars and get an integer out of them.</p>

<p>The struct package seems to be what I want, but I can't get it to work.</p>

<p>Here is my code so-far (I am very new to python btw...so take it easy on me):</p>

<pre><code>def __init__(self, ten_byte_string):
        self.whole_string = ten_byte_string
        self.file_identifier = self.whole_string[:3]
        self.major_version = struct.pack('x', self.whole_string[3:4]) #this 
        self.minor_version = struct.pack('x', self.whole_string[4:5]) # and this
        self.flags = self.whole_string[5:6]
        self.len = self.whole_string[6:10]
</code></pre>

<p>Printing out any value except is obviously crap because they are not formatted correctly.</p>
"
150705,23609,2008-09-29T21:15:09Z,1,Is there any Visual Library alternative to wxPython that supports CSS/Style Sheets?,"<p>I've developed a program that extensively uses wxPython - the wxWindow port for python. </p>

<p>Even though it is as mature library it is still very primitive and very programming oriented. Which is time consuming and not flexible at all.</p>

<p>I would love to see if there is something like Flex/Action Script where all the visual dimensions are configured by style sheets. </p>

<p>Any thoughts? </p>

<p>Thanks </p>
"
151199,4872,2008-09-29T23:36:25Z,193,How do I calculate number of days betwen two dates using Python?,"<p>If I have two dates (ex. <code>'8/18/2008'</code> and <code>'9/26/2008'</code>) what is the best way to get the difference measured in days?</p>
"
151846,3176,2008-09-30T05:20:27Z,7,Get other running processes window sizes in Python,"<p>This isn't as malicious as it sounds, I want to get the current size of their windows, not look at what is in them.  The purpose is to figure out that if every other window is fullscreen then I should start up like that too.  Or if all the other processes are only 800x600 despite there being a huge resolution then that is probably what the user wants.  Why make them waste time and energy resizing my window to match all the others they have?  I am primarily a Windows devoloper but it wouldn't upset me in the least if there was a cross platform way to do this.</p>
"
151929,8206,2008-09-30T06:03:47Z,6,Errors with Python's mechanize module,"<p>I'm using the <code>mechanize</code> module to execute some web queries from Python. I want my program to be error-resilient and handle all kinds of errors (wrong URLs, 403/404 responsese) gracefully. However, I can't find in mechanize's documentation the errors / exceptions it throws for various errors.</p>

<p>I just call it with:</p>

<pre><code>    self.browser = mechanize.Browser()
    self.browser.addheaders = [('User-agent', browser_header)]

    self.browser.open(query_url)
    self.result_page = self.browser.response().read()
</code></pre>

<p>How can I know what errors / exceptions can be thrown here and handle them ?</p>
"
152068,985,2008-09-30T07:24:25Z,3,Is it OK to inspect properties beginning with underscore?,"<p>I've been working on a very simple crud generator for pylons. I came up with something that inspects </p>

<pre><code>SomeClass._sa_class_manager.mapper.c
</code></pre>

<p>Is it ok to inspect this (or to call methods begining with underscore)? I always kind of assumed this is legal though frowned upon as it relies heavily on the internal structure of a class/object. But hey, since python does not really have interfaces in the Java sense maybe it is OK.</p>
"
152218,21716,2008-09-30T08:23:05Z,1,"Looking for a regular expression including aplhanumeric + ""&"" and "";""","<p>Here's the problem:</p>

<p>split=re.compile('\W*')</p>

<p>works fine when dealing with regular words, but there are occasions where I need the expression to include words like <strong>k&amp;auml;ytt&amp;auml;j&aml;auml;</strong>.</p>

<p>What should I add to the regex to include the &amp; and ; characters?</p>
"
152344,2183,2008-09-30T09:17:36Z,0,NSWindow launched from statusItem menuItem does not appear as active window,"<p>I have a statusItem application written in PyObjC. The statusItem has a menuItem which is supposed to launch a new window when it is clicked:</p>

<pre><code># Create statusItem
statusItem = NSStatusBar.systemStatusBar().statusItemWithLength_(NSVariableStatusItemLength)
statusItem.setHighlightMode_(TRUE)
statusItem.setEnabled_(TRUE)
statusItem.retain()

# Create menuItem
menu = NSMenu.alloc().init()
menuitem = NSMenuItem.alloc().initWithTitle_action_keyEquivalent_('Preferences', 'launchPreferences:', '')
menu.addItem_(menuitem)
statusItem.setMenu_(menu)
</code></pre>

<p>The launchPreferences: method is:</p>

<pre><code>def launchPreferences_(self, notification):
    preferences = Preferences.alloc().initWithWindowNibName_('Preferences')
    preferences.showWindow_(self)
</code></pre>

<p>Preferences is an NSWindowController class:</p>

<pre><code>class Preferences(NSWindowController):
</code></pre>

<p>When I run the application in XCode (Build &amp; Go), this works fine. However, when I run the built .app file externally from XCode, the statusItem and menuItem appear as expected but when I click on the Preferences menuItem the window does not appear. I have verified that the launchPreferences code is running by checking console output. </p>

<p>Further, if I then double click the .app file again, the window appears but if I change the active window away by clicking, for example, on a Finder window, the preferences window disappears. This seems to me to be something to do with the active window. </p>

<p><strong>Update 1</strong>
I have tried <a href=""http://stackoverflow.com/questions/152344/nswindow-launched-from-statusitem-menuitem-does-not-appear-as-active-window#152399"">these</a> <a href=""http://stackoverflow.com/questions/152344/nswindow-launched-from-statusitem-menuitem-does-not-appear-as-active-window#152409"">two</a> answers but neither work. If I add in to the launchPreferences method:</p>

<pre><code>preferences.makeKeyAndOrderFront_()
</code></pre>

<p>or</p>

<pre><code>preferences.setLevel_(NSNormalWindowLevel)
</code></pre>

<p>then I just get an error:</p>

<blockquote>
  <p>'Preferences' object has no attribute</p>
</blockquote>
"
152580,14102,2008-09-30T11:00:10Z,588,What's the canonical way to check for type in python?,"<p>What is the best way to check whether a given object is of a given type? How about checking whether the object inherits from a given type?</p>

<p>Let's say I have an object <code>o</code>. How do I check whether it's a <code>str</code>?</p>
"
153221,3653,2008-09-30T14:17:08Z,5,Runnning a Python web server as a service in Windows,"<p>I have a small web server application I've written in Python that goes and gets some data from a database system and returns it to the user as XML. That part works fine - I can run the Python web server application from the command line and I can have clients connect to it and get data back. At the moment, to run the web server I have to be logged in to our server as the administrator user and I have to manually start the web server. I want to have the web server automatically start on system start as a service and run in the background.</p>

<p>Using code from <a href=""http://code.activestate.com/recipes/576451/"" rel=""nofollow"">ActiveState</a>'s site and <a href=""http://stackoverflow.com/questions/32404/can-i-run-a-python-script-as-a-service-in-windows-how"">StackOverflow</a>, I have a pretty good idea of how to go about creating a service, and I think I've got that bit sorted - I can install and start my web server as a Windows service. I can't, however, figure out how to stop the service again. My web server is created from a BaseHTTPServer:</p>

<pre><code>server = BaseHTTPServer.HTTPServer(('', 8081), SIMSAPIServerHandler)
server.serve_forever()
</code></pre>

<p>The serve_forever() call, naturally enough, makes the web server sit in an infinite loop and wait for HTTP connections (or a ctrl-break keypress, not useful for a service). I get the idea from the example code above that your main() function is supposed to sit in an infinite loop and only break out of it when it comes accross a ""stop"" condition. My main calls serve_forever(). I have a SvcStop function:</p>

<pre><code>def SvcStop(self):
    self.ReportServiceStatus(win32service.SERVICE_STOP_PENDING)
    exit(0)
</code></pre>

<p>Which seems to get called when I do ""python myservice stop"" from the command line (I can put a debug line in there that produces output to a file) but doesn't actually exit the whole service - subsequent calls to ""python myservice start"" gives me an error:</p>

<blockquote>
  <p>Error starting service: An instance of
  the service is already running.</p>
</blockquote>

<p>and subsequent calls to stop gives me:</p>

<blockquote>
  <p>Error stopping service: The service
  cannot accept control messages at this
  time. (1061)</p>
</blockquote>

<p>I think I need either some replacement for serve_forever (serve_until_stop_received, or whatever) or I need some way of modifying SvcStop so it stops the whole service.</p>

<p>Here's a full listing (I've trimmed includes/comments to save space):</p>

<pre><code>class SIMSAPIServerHandler(BaseHTTPServer.BaseHTTPRequestHandler):
    def do_GET(self):
        try:
            reportTuple = self.path.partition(""/"")
            if len(reportTuple) &lt; 3:
                return
            if reportTuple[2] == """":
                return
            os.system(""C:\\Programs\\SIMSAPI\\runCommandReporter.bat "" + reportTuple[2])
            f = open(""C:\\Programs\\SIMSAPI\\out.xml"", ""rb"")
            self.send_response(200)
            self.send_header('Content-type', ""application/xml"")
            self.end_headers()
            self.wfile.write(f.read())
            f.close()
            # The output from CommandReporter is simply dumped to out.xml, which we read, write to the user, then remove.
            os.unlink(""C:\\Programs\\SIMSAPI\\out.xml"")
            return
        except IOError:
            self.send_error(404,'File Not Found: %s' % self.path)



class SIMSAPI(win32serviceutil.ServiceFramework):
    _svc_name_ = ""SIMSAPI""
    _svc_display_name_ = ""A simple web server""
    _svc_description_ = ""Serves XML data produced by SIMS CommandReporter""

    def __init__(self, args):
        win32serviceutil.ServiceFramework.__init__(self, args)
        self.hWaitStop = win32event.CreateEvent(None, 0, 0, None)           

    def SvcStop(self):
            self.ReportServiceStatus(win32service.SERVICE_STOP_PENDING)
            exit(0)

    def SvcDoRun(self):
        import servicemanager
        servicemanager.LogMsg(servicemanager.EVENTLOG_INFORMATION_TYPE,servicemanager.PYS_SERVICE_STARTED,(self._svc_name_, '')) 

        self.timeout = 3000

        while 1:
            server = BaseHTTPServer.HTTPServer(('', 8081), SIMSAPIServerHandler)
            server.serve_forever()

def ctrlHandler(ctrlType):
    return True

if __name__ == '__main__':
    win32api.SetConsoleCtrlHandler(ctrlHandler, True)
    win32serviceutil.HandleCommandLine(SIMSAPI)
</code></pre>
"
153227,11828,2008-09-30T14:18:14Z,1,Extension functions and 'help',"<p>When I call</p>

<pre><code>help(Mod.Cls.f)
</code></pre>

<p>(Mod is a C extension module), I get the output</p>

<pre>Help on method_descriptor:

f(...)
    doc_string</pre>

<p>What do I need to do so that the help output is of the form</p>

<pre>Help on method f in module Mod:

f(x, y, z)
    doc_string</pre>

<p>like it is for random.Random.shuffle, for example?</p>

<p>My PyMethodDef entry is currently:</p>

<pre><code>{ ""f"", f, METH_VARARGS, ""doc_string"" }
</code></pre>
"
153584,473,2008-09-30T15:35:22Z,40,"How to iterate over a timespan after days, hours, weeks and months in Python?","<p>How do I iterate over a timespan after days, hours, weeks or months?</p>

<p>Something like:</p>

<pre><code>for date in foo(from_date, to_date, delta=HOURS):
    print date
</code></pre>

<p>Where foo is a function, returning an iterator. I've been looking at the calendar module, but that only works for one specific year or month, not between dates.</p>
"
153773,15992,2008-09-30T16:11:23Z,4,What is the preferred way to redirect a request in Pylons without losing form data?,"<p>I'm trying to redirect/forward a Pylons request.  The problem with using redirect_to is that form data gets dropped.  I need to keep the POST form data intact as well as all request headers.</p>

<p>Is there a simple way to do this?</p>
"
153956,4381,2008-09-30T16:50:38Z,11,Python GUI Application redistribution,"<p>I need to develop a small-medium sized desktop GUI application, preferably with Python as a language of choice because of time constraints.</p>

<p>What GUI library choices do I have which allow me to redistribute my application standalone, assuming that the users don't have a working Python installation and obviously don't have the GUI libraries I'm using either?</p>

<p>Also, how would I go about packaging everything up in binaries of <em>reasonable</em> size for each target OS? (my main targets are Windows and Mac OS X)</p>

<p><em>Addition:</em>
I've been looking at WxPython, but I've found plenty of horror stories of packaging it with cx_freeze and getting 30mb+ binaries, and no real advice on how to <em>actually</em> do the packaging and how trust-worthy it is.</p>
"
154443,1476,2008-09-30T18:55:59Z,204,How to avoid .pyc files?,"<p>Can I run the python interpreter without generating the compiled .pyc files?</p>
"
154504,20310,2008-09-30T19:12:46Z,29,Is timsort general-purpose or Python-specific?,"<blockquote>
  <p>Timsort is an adaptive, stable,
  natural mergesort. It has supernatural
  performance on many kinds of partially
  ordered arrays (less than lg(N!)
  comparisons needed, and as few as
  N-1), yet as fast as Python's previous
  highly tuned samplesort hybrid on
  random arrays.</p>
</blockquote>

<p>Have you seen <a href=""http://svn.python.org/projects/python/trunk/Objects/listsort.txt"">timsort</a> used outside of CPython? Does it make sense?</p>
"
154592,19212,2008-09-30T19:32:59Z,26,Python module for wiki markup,"<p>Is there a <code>Python</code> module for converting <code>wiki markup</code> to other languages (e.g. <code>HTML</code>)?</p>

<p>A similar question was asked here, <a href=""http://stackoverflow.com/questions/45991/whats-the-easiest-way-to-convert-wiki-markup-to-html"">What's the easiest way to convert wiki markup to html</a>, but no <code>Python</code> modules are mentioned.</p>

<p>Just curious. :) Cheers.</p>
"
155029,16401,2008-09-30T20:47:35Z,0,SQLAlchemy and kinterbasdb in separate apps under mod_wsgi,"<p>I'm trying to develop an app using turbogears and sqlalchemy.
There is already an existing app using kinterbasdb directly under mod_wsgi on the same server.
When both apps are used, neither seems to recognize that kinterbasdb is already initialized
Is there something non-obvious I am missing about using sqlalchemy and kinterbasdb in separate apps?  In order to make sure only one instance of kinterbasdb gets initialized and both apps use that instance, does anyone have suggestions?</p>
"
155822,18243,2008-10-01T01:16:38Z,2,Programmatically focusing a hippo.CanvasEntry?,"<p>Consider this Python program which uses PyGtk and Hippo Canvas to display a clickable text label.  Clicking the text label replaces it with a Hippo CanvasEntry widget which contains the text of the label.</p>

<pre><code>import pygtk
pygtk.require('2.0')
import gtk, hippo

def textClicked(text, event, row):
    input = hippo.CanvasEntry()
    input.set_property('text', text.get_property('text'))
    parent = text.get_parent()
    parent.insert_after(input, text)
    parent.remove(text)

def main():
    canvas = hippo.Canvas()
    root = hippo.CanvasBox()
    canvas.set_root(root)

    text = hippo.CanvasText(text=u'Some text')
    text.connect('button-press-event', textClicked, text)
    root.append(text)

    window = gtk.Window()
    window.connect('destroy', lambda ignored: gtk.main_quit())
    window.add(canvas)

    canvas.show()
    window.show()

    gtk.main()

if __name__ == '__main__':
    main()
</code></pre>

<p>How can the CanvasEntry created when the text label is clicked be automatically focused at creation time?</p>
"
156230,9940,2008-10-01T04:25:33Z,41,Python Dependency Injection Framework,"<p>Is there a framework equivalent to Guice (<a href=""http://code.google.com/p/google-guice"">http://code.google.com/p/google-guice</a>) for Python?</p>
"
156330,432,2008-10-01T05:24:38Z,40,Get timer ticks in Python,"<p>I'm just trying to time a piece of code. The pseudocode looks like:</p>

<pre><code>start = get_ticks()
do_long_code()
print ""It took "" + (get_ticks() - start) + "" seconds.""
</code></pre>

<p>How does this look in Python?</p>

<p>More specifically, how do I get the number of ticks since midnight (or however Python organizes that timing)?</p>
"
156360,8206,2008-10-01T05:40:06Z,9,Get all items from thread Queue,"<p>I have one thread that writes results into a Queue.</p>

<p>In another thread (GUI), I periodically (in the IDLE event) check if there are results in the queue, like this:</p>

<pre><code>def queue_get_all(q):
    items = []
    while 1:
        try:
            items.append(q.get_nowait())
        except Empty, e:
            break
    return items
</code></pre>

<p>Is this a good way to do it ? </p>

<p><strong>Edit:</strong></p>

<blockquote>
  <p>I'm asking because sometimes the
  waiting thread gets stuck for a few
  seconds without taking out new
  results.</p>
</blockquote>

<p>The ""stuck"" problem turned out to be because I was doing the processing in the idle event handler, without making sure that such events are actually generated by calling <code>wx.WakeUpIdle</code>, as is recommended.</p>
"
156504,985,2008-10-01T06:56:35Z,0,How to skip the docstring using regex,"<p>I'm trying to insert some import lines into a python source file, but i would ideally like to place them right after the initial docstring. Let's say I load the file into the lines variable like this:</p>

<pre><code>lines = open('filename.py').readlines()
</code></pre>

<p>How to find the line number, where the docstring ends?</p>
"
156873,9941,2008-10-01T09:35:36Z,7,Customized command line parsing in Python,"<p>I'm writing a shell for a project of mine, which by design parses commands that looks like this:</p>

<p>COMMAND_NAME ARG1=""Long Value"" ARG2=123 ARG3=me@me.com</p>

<p>My problem is that Python's command line parsing libraries (getopt and optparse) forces me to use '-' or '--' in front of the arguments. This behavior doesn't match my requirements.</p>

<p>Any ideas how can this be solved? Any existing library for this?</p>
"
156951,2592,2008-10-01T10:09:42Z,1,.order_by() isn't working how it should / how I expect it to,"<p>In my Django project I am using <code>Product.objects.all().order_by('order')</code> in a view, but it doesn't seem to be working properly.</p>

<p>This is it's output:</p>

 
     
         
            Product Name 
            Sort 
         
     

     

             
                Evolution 
                2 
             

             
                Polarity 
                1 
             

             
                Jumbulaya 
                3 
             

             
                Kalidascope 
                4 
             

                


<p>It should look like this:</p>

 
     
         
            Product Name 
            Sort 
         
     

     
         
                Polarity 
                1 
            

             
                Evolution 
                2 
             



             
                Jumbulaya 
                3 
             

             
                Kalidascope 
                4 
             

                


<p><br/>
But it doesn't. Any ideas?</p>

<p>My view (for that output):</p>

<pre><code>def debug(request):
    order = Product.objects.all().order_by('order')
    return render_to_response('cms/debug.html', {'order' : order, 'name' : name})
</code></pre>

<p>And the view responsible for saving the order field:</p>

<pre><code>def manage_all(request):

if request.method == 'POST':
    PostEntries = len(request.POST)
    x = 1       
    while x &lt; PostEntries:
        p = Product.objects.get(pk=x)
        p.order = int(request.POST.get(str(x),''))
        print ""Itr: "" + str(x)
        x = x + 1
    p.save()
    print ""Product Order saved""     
    return HttpResponse(""Saved"")
</code></pre>

<p>And the model (without the boring bits):</p>

<pre><code>class Product(models.Model):
    name = models.CharField(max_length=100)
    order = models.IntegerField(blank = True, null = True
</code></pre>

<p>Here is a 'live' example of the page <a href=""http://massiveatom.com:8080/debug/"" rel=""nofollow"">http://massiveatom.com:8080/debug/</a> Please note that that is only running on the dev server, so it may not always be up.</p>

<p>I have asked in #django and they didn't seem to know what was going on. One thought was that the database/Django was being confused by the SQL command it is generating (<code>select * from table where 1 order by 'order'</code>), but I would prefer not to change the order field in the model.</p>

<p>And I know there should be back-ticks surrounding order in the above SQL command, but the syntax parsing thingy kinda hated on it...</p>

<p><strong>Edit:</strong> Each object has the correct value, so I don't really know why it isn't sorting it properly.</p>

<p><strong>Edit 2:</strong> I don't know what was going on, but it turns out putting p.save() in the loop fixed it all...</p>
"
157018,712,2008-10-01T10:29:22Z,34,Emacs and Python,"<p>I recently started learning <a href=""http://www.gnu.org/software/emacs/"">Emacs</a>. I went through the tutorial, read some introductory articles, so far so good.</p>

<p>Now I want to use it for Python development. From what I understand, there are two separate Python modes for Emacs: python-mode.el, which is part of the Python project; and python.el, which is part of Emacs 22.</p>

<p>I read all information I could find but most of it seems fairly outdated and I'm still confused. </p>

<p>The questions:</p>

<ol>
<li>What is their difference?</li>
<li>Which mode should I install and use? </li>
<li>Are there other Emacs add-ons that are essential for Python development?</li>
</ol>

<p>Relevant links:</p>

<ul>
<li><a href=""http://wiki.python.org/moin/EmacsEditor"">EmacsEditor</a> @ wiki.python.org</li>
<li><a href=""http://www.emacswiki.org/cgi-bin/wiki/PythonMode"">PythonMode</a> @ emacswiki.org</li>
</ul>
"
157039,2010,2008-10-01T10:37:20Z,13,Most pythonic way of counting matching elements in something iterable,"<p>I have an iterable of entries on which I would like to gather some simple statistics, say the count of all numbers divisible by two and the count of all numbers divisible by three.</p>

<p>My first alternative, While only iterating through the list once and avoiding the list expansion (and keeping the <a href=""http://www.refactoring.com/catalog/splitLoop.html"">split loop</a> refactoring in mind), looks rather bloated:</p>

<p>(alt 1)</p>

<pre><code>r = xrange(1, 10)

twos = 0
threes = 0

for v in r:
  if v % 2 == 0:
    twos+=1
  if v % 3 == 0:
    threes+=1

print twos
print threes
</code></pre>

<p>This looks rather nice, but has the drawback of expanding the expression to a list:</p>

<p>(alt 2)</p>

<pre><code>r = xrange(1, 10)

print len([1 for v in r if v % 2 == 0])
print len([1 for v in r if v % 3 == 0])
</code></pre>

<p>What I would really like is something like a function like this:</p>

<p>(alt 3)</p>

<pre><code>def count(iterable):
  n = 0
  for i in iterable:
    n += 1
  return n

r = xrange(1, 10)

print count(1 for v in r if v % 2 == 0)
print count(1 for v in r if v % 3 == 0)
</code></pre>

<p>But this looks a lot like something that could be done without a function. The final variant is this:</p>

<p>(alt 4)</p>

<pre><code>r = xrange(1, 10)

print sum(1 for v in r if v % 2 == 0)
print sum(1 for v in r if v % 3 == 0)
</code></pre>

<p>and while the smallest (and in my book probably the most elegant) it doesn't feel like it expresses the intent very well.</p>

<p>So, my question to you is:</p>

<p>Which alternative do you like best to gather these types of stats? Feel free to supply your own alternative if you have something better.</p>

<p>To clear up some confusion below:</p>

<ul>
<li>In reality my filter predicates are more complex than just this simple test.</li>
<li>The objects I iterate over are larger and more complex than just numbers</li>
<li>My filter functions are more different and hard to parameterize into one predicate</li>
</ul>
"
157116,6899,2008-10-01T11:02:43Z,0,Date change notification in a Tkinter app (win32),"<p>Does anyone know if it is possible (and if yes, how) to bind an event (Python + Tkinter on MS Windows) to a system date change?</p>

<p>I know I can have .after events checking once in a while; I'm asking if I can somehow have an event fired whenever the system date/time changes, either automatically (e.g. for daylight saving time) or manually.</p>

<p>MS Windows sends such events to applications and Tkinter does receive them; I know, because if I have an .after timer waiting and I set the date/time after the timer's expiration, the timer event fires instantly.</p>
"
157313,22176,2008-10-01T12:20:23Z,1,Template Lib (Engine) in Python running with Jython,"<p>Im searching a Template Lib or Template Engine for generating HTML (XML) that runs under Jython (Jython 2.5 Alpha is ok).</p>
"
157359,15369,2008-10-01T12:36:17Z,12,Accurate timestamping in Python,"<p>I've been building an error logging app recently and was after a way of accurately timestamping the incoming data. When I say accurately I mean each timestamp should be accurate relative to each other (no need to sync to an atomic clock or anything like that).</p>

<p>I've been using datetime.now() as a first stab, but this isn't perfect:</p>

<pre><code>&gt;&gt;&gt; for i in range(0,1000):
...     datetime.datetime.now()
...
datetime.datetime(2008, 10, 1, 13, 17, 27, 562000)
datetime.datetime(2008, 10, 1, 13, 17, 27, 562000)
datetime.datetime(2008, 10, 1, 13, 17, 27, 562000)
datetime.datetime(2008, 10, 1, 13, 17, 27, 562000)
datetime.datetime(2008, 10, 1, 13, 17, 27, 578000)
datetime.datetime(2008, 10, 1, 13, 17, 27, 578000)
datetime.datetime(2008, 10, 1, 13, 17, 27, 578000)
datetime.datetime(2008, 10, 1, 13, 17, 27, 578000)
datetime.datetime(2008, 10, 1, 13, 17, 27, 578000)
datetime.datetime(2008, 10, 1, 13, 17, 27, 609000)
datetime.datetime(2008, 10, 1, 13, 17, 27, 609000)
datetime.datetime(2008, 10, 1, 13, 17, 27, 609000)
etc.
</code></pre>

<p>The changes between clocks for the first second of samples looks like this:</p>

<pre><code>uSecs    difference
562000  
578000  16000
609000  31000
625000  16000
640000  15000
656000  16000
687000  31000
703000  16000
718000  15000
750000  32000
765000  15000
781000  16000
796000  15000
828000  32000
843000  15000
859000  16000
890000  31000
906000  16000
921000  15000
937000  16000
968000  31000
984000  16000
</code></pre>

<p>So it looks like the timer data is only updated every ~15-32ms on my machine. The problem comes when we come to analyse the data because sorting by something other than the timestamp and then sorting by timestamp again can leave the data in the wrong order (chronologically). It would be nice to have the time stamps accurate to the point that any call to the time stamp generator gives a unique timestamp.</p>

<p>I had been considering some methods involving using a time.clock() call added to a starting datetime, but would appreciate a solution that would work accurately across threads on the same machine. Any suggestions would be very gratefully received.</p>
"
157424,NA,2008-10-01T12:50:19Z,14,Python 2.5 dictionary 2 key sort,"<p>I have a dictionary of 200,000 items (the keys are strings and the values are integers).</p>

<p>What is the best/most pythonic way to print the items sorted by descending value then ascending key (i.e. a 2 key sort)?</p>

<pre><code> a={ 'keyC':1, 'keyB':2, 'keyA':1 }
b = a.items()
b.sort( key=lambda a:a[0])
b.sort( key=lambda a:a[1], reverse=True )
print b
&gt;&gt;&gt;[('keyB', 2), ('keyA', 1), ('keyC', 1)]
</code></pre>
"
157662,6311,2008-10-01T13:45:12Z,6,What is the best way to sample/profile a PyObjC application?,"<p>Sampling with Activity Monitor/Instruments/Shark will show stack traces full of C functions for the Python interpreter. I would be helpful to see the corresponding Python symbol names. Is there some DTrace magic that can do that? Python's cProfile module can be useful for profiling individual subtrees of Python calls, but not so much for getting a picture of what's going on with the whole application in response to user events.</p>
"
157938,3056,2008-10-01T14:37:17Z,75,Hiding a password in a (python) script,"<p>I have got a python script which is creating an ODBC connection. The ODBC connection is generated with a connection string. In this connection string I have to include the username and password for this connection.  </p>

<p>Is there an easy way to obscure this password in the file (just that nobody can read the password when I'm editing the file) ? </p>
"
158268,6266,2008-10-01T15:38:58Z,15,Python module dependency,"<p>Ok I have two modules, each containing a class, the problem is their classes reference each other.</p>

<p>Lets say for example I had a room module and a person module containing CRoom and CPerson.</p>

<p>The CRoom class contains infomation about the room, and a CPerson list of every one in the room.</p>

<p>The CPerson class however sometimes needs to use the CRoom class for the room its in, for example to find the door, or too see who else is in the room.</p>

<p>The problem is with the two modules importing each other I just get an import error on which ever is being imported second :(</p>

<p>In c++ I could solve this by only including the headers, and since in both cases the classes just have pointers to the other class, a forward declaration would suffice for the header eg:</p>

<pre><code>class CPerson;//forward declare
class CRoom
{
    std::set&lt;CPerson*&gt; People;
    ...
</code></pre>

<p>Is there anyway to do this in python, other than placing both classes in the same module or something like that?</p>

<p>edit: added python example showing problem using above classes</p>

<p>error:</p>

<blockquote>
  <p>Traceback (most recent call last):<br>
   File ""C:\Projects\python\test\main.py"", line 1, in <br>
     from room import CRoom<br>
   File ""C:\Projects\python\test\room.py"", line 1, in <br>
     from person import CPerson<br>
   File ""C:\Projects\python\test\person.py"", line 1, in <br>
     from room import CRoom<br>
  ImportError: cannot import name CRoom<br>
  room.py</p>
</blockquote>

<pre><code>from person import CPerson

class CRoom:
    def __init__(Self):
        Self.People = {}
        Self.NextId = 0

    def AddPerson(Self, FirstName, SecondName, Gender):
        Id = Self.NextId
        Self.NextId += 1#

        Person = CPerson(FirstName,SecondName,Gender,Id)
        Self.People[Id] = Person
        return Person

    def FindDoorAndLeave(Self, PersonId):
        del Self.People[PeopleId]
</code></pre>

<p>person.py</p>

<pre><code>from room import CRoom

class CPerson:
    def __init__(Self, Room, FirstName, SecondName, Gender, Id):
        Self.Room = Room
        Self.FirstName = FirstName
        Self.SecondName = SecondName
        Self.Gender = Gender
        Self.Id = Id

    def Leave(Self):
        Self.Room.FindDoorAndLeave(Self.Id)
</code></pre>
"
158546,24208,2008-10-01T16:37:08Z,4,Best way to store and use a large text-file in python,"<p>I'm creating a networked server for a boggle-clone I wrote in python, which accepts users, solves the boards, and scores the player input.  The dictionary file I'm using is 1.8MB (the ENABLE2K dictionary), and I need it to be available to several game solver classes.  Right now, I have it so that each class iterates through the file line-by-line and generates a hash table(associative array), but the more solver classes I instantiate, the more memory it takes up.</p>

<p>What I would like to do is import the dictionary file once and pass it to each solver instance as they need it.  But what is the best way to do this?  Should I import the dictionary in the global space, then access it in the solver class as globals()['dictionary']?  Or should I import the dictionary then pass it as an argument to the class constructor?  Is one of these better than the other?  Is there a third option?</p>
"
159137,9940,2008-10-01T18:51:36Z,68,Getting MAC Address,"<p>I need a cross platform method of determining the MAC address of a computer at run time.  For windows the 'wmi' module can be used and the only method under Linux I could find was to run ifconfig and run a regex across its output.  I don't like using a package that only works on one OS, and parsing the output of another program doesn't seem very elegant not to mention error prone. </p>

<p>Does anyone know a cross platform method (windows and linux) method to get the MAC address?    If not, does anyone know any more elegant methods then those I listed above?</p>
"
159541,2933,2008-10-01T20:26:12Z,10,Nginx + fastcgi truncation problem,"<p>I'm running a Django site using the fastcgi interface to nginx. However, some pages are being served truncated (i.e. the page source just stops, sometimes in the middle of a tag). How do I fix this (let me know what extra information is needed, and I'll post it)</p>

<p>Details:</p>

<p>I'm using flup, and spawning the fastcgi server with the following command:</p>

<pre><code>python ./manage.py runfcgi umask=000 maxchildren=5 maxspare=1 minspare=0 method=prefork socket=/path/to/runfiles/django.sock pidfile=/path/to/runfiles/django.pid
</code></pre>

<p>The nginx config is as follows:</p>

<pre><code># search and replace this: {project_location}
pid /path/to/runfiles/nginx.pid;
worker_processes  2;
error_log /path/to/runfiles/error_log;
events {
    worker_connections  1024;
    use epoll;
}
http {
    # default nginx location
    include        /etc/nginx/mime.types;
    default_type    application/octet-stream;
    log_format main
        '$remote_addr - $remote_user [$time_local] '
            '""$request"" $status $bytes_sent '
        '""$http_referer"" ""$http_user_agent"" '
        '""$gzip_ratio""';
    client_header_timeout  3m;
    client_body_timeout    3m;
    send_timeout           3m;
    connection_pool_size        256;
    client_header_buffer_size    1k;
    large_client_header_buffers    4 2k;
    request_pool_size        4k;
    output_buffers   4 32k;
    postpone_output  1460;
    sendfile        on;
    tcp_nopush             on;
    keepalive_timeout      75 20;
    tcp_nodelay            on;
    client_max_body_size       10m;
    client_body_buffer_size    256k;
    proxy_connect_timeout      90;
    proxy_send_timeout         90;
    proxy_read_timeout         90;
    client_body_temp_path      /path/to/runfiles/client_body_temp;
    proxy_temp_path            /path/to/runfiles/proxy_temp;
    fastcgi_temp_path            /path/to/runfiles/fastcgi_temp;
    gzip on;
    gzip_min_length  1100;
    gzip_buffers     4 32k;
    gzip_types       text/plain text/html application/x-javascript text/xml text/css;
    ignore_invalid_headers    on;
    server {
        listen 80;
        server_name alpha2.sonyalabs.com;
        index index.html;
        root   /path/to/django-root/static;
        # static resources
        location ~* ^/static/.*$
        {
    	root   /path/to/django-root;
                expires 30d;
                break;
        }
        location / {
            # host and port to fastcgi server
            fastcgi_pass unix:/path/to/runfiles/django.sock;
            fastcgi_param PATH_INFO $fastcgi_script_name;
            fastcgi_param REQUEST_METHOD $request_method;
            fastcgi_param QUERY_STRING $query_string;
            fastcgi_param CONTENT_TYPE $content_type;
            fastcgi_param CONTENT_LENGTH $content_length;
            fastcgi_pass_header Authorization;
            fastcgi_intercept_errors off;
        }
        location /403.html {
                root   /usr/local/nginx;
                access_log   off;
        }
        location /401.html {
                root   /usr/local/nginx;
                access_log   off;
        }
        location /404.html {
                root   /usr/local/nginx;
                access_log   off;
        }
        location = /_.gif {
                    empty_gif;
                access_log   off;
        }
            access_log    /path/to/runfiles/localhost.access_log main;
            error_log    /path/to/runfiles/localhost.error_log;
        }
}
</code></pre>
"
159720,4872,2008-10-01T21:01:16Z,326,What is the naming convention in Python for variable and function names?,"<p>Coming from a C# background the naming convention for variables and method names are usually either CamelCase or Pascal Case:</p>

<pre><code>// C# example
string thisIsMyVariable = ""a""
public void ThisIsMyMethod()
</code></pre>

<p>In Python, I have seen the above but I have also seen underscores being used:</p>

<pre><code># python example
this_is_my_variable = 'a'
def this_is_my_function():
</code></pre>

<p>Is there a more preferable, definitive coding style for Python?</p>
"
159802,2351,2008-10-01T21:18:26Z,3,Python Web Services,"<p>Elementree has become the accepted standard for interacting with xml.  What is the prevalent web service/SOAP library in use today?</p>
"
159990,2242,2008-10-01T22:09:16Z,6,"What is the difference between Ruby and Python versions of""self""?","<p>I've done some Python but have just now starting to use Ruby<br />
I could use a good explanation of the difference between ""self"" in these two languages.  </p>

<p><strong>Obvious on first glance:</strong><br />
Self is not a keyword in Python, but there is a ""self-like"" value no matter what you call it.<br />
Python methods receive self as an explicit argument, whereas Ruby does not.<br />
Ruby sometimes has methods explicitly defined as part of self using dot notation.</p>

<p><strong>Initial Googling reveals</strong><br />
<a href=""http://rubylearning.com/satishtalim/ruby_self.html"">http://rubylearning.com/satishtalim/ruby_self.html</a><br />
<a href=""http://www.ibiblio.org/g2swap/byteofpython/read/self.html"">http://www.ibiblio.org/g2swap/byteofpython/read/self.html</a>  </p>
"
160009,16342,2008-10-01T22:14:36Z,10,Model limit_choices_to={'user': user},"<p>I went to all the documentation, also I went to the IRC channel (BTW a great community) and they told me that is not possible to create a model and limit choices in a field where the 'current user' is in a ForeignKey.
I will try to explain this with an example:</p>

<pre><code>class Project(models.Model):
  name = models.CharField(max_length=100)
  employees = models.ManyToManyField(Profile, limit_choices_to={'active': '1'})

class TimeWorked(models.Model):
  project = models.ForeignKey(Project, limit_choices_to={'user': user})
  hours = models.PositiveIntegerField()
</code></pre>

<p>Of course that code doesn't work because there is no 'user' object, but that was my idea and I was trying to send the object 'user' to the model to just limit the choices where the current user has projects, I don't want to see projects where I'm not in.</p>

<p>Thank you very much if you can help me or give me any advice, I don't want to you write all the app, just a tip how to deal with that. I have 2 days with this in my head and I can't figure it out :(</p>

<p><strong>UPDATE</strong>: The solution is here: <a href=""http://collingrady.wordpress.com/2008/07/24/useful-form-tricks-in-django/"" rel=""nofollow"">http://collingrady.wordpress.com/2008/07/24/useful-form-tricks-in-django/</a> sending <code>request.user</code> to a model.</p>
"
160245,7883,2008-10-01T23:37:06Z,2,Which is the best way to get a list of running processes in unix with python?,"<p>I'm trying:</p>

<pre><code>import commands
print commands.getoutput(""ps -u 0"")
</code></pre>

<p>But it doesn't work on os x.
os instead of commands gives the same output:
USER   PID %CPU %MEM      VSZ    RSS   TT  STAT STARTED      TIME COMMAND</p>

<p>nothing more</p>
"
160298,19212,2008-10-01T23:59:52Z,5,Django/Python - Grouping objects by common set from a many-to-many relationships,"<p>This is a part algorithm-logic question (how to do it), part implementation question (how to do it best!). I'm working with Django, so I thought I'd share with that.</p>

<p>In Python, it's worth mentioning that the problem is somewhat related to <a href=""http://stackoverflow.com/questions/773/how-do-i-use-pythons-itertoolsgroupby"">how-do-i-use-pythons-itertoolsgroupby</a>.</p>

<p>Suppose you're given two Django Model-derived classes:</p>

<pre><code>from django.db import models

class Car(models.Model):
    mods = models.ManyToManyField(Representative)
</code></pre>

<p>and</p>

<pre><code>from django.db import models

class Mods(models.Model):
   ...
</code></pre>

<p>How does one get a list of Cars, grouped by Cars with a common set of Mods?</p>

<p>I.e. I want to get a class likeso:</p>

<pre><code>Cars_by_common_mods = [ 
  { mods: { 'a' }, cars: { 'W1', 'W2' } },
  { mods: { 'a', 'b' }, cars: { 'X1', 'X2', 'X3' }, },
  { mods: { 'b' }, cars: { 'Y1', 'Y2' } },
  { mods: { 'a', 'b', 'c' }, cars: { 'Z1' } },
]
</code></pre>

<p>I've been thinking of something like:</p>

<pre><code>def cars_by_common_mods():
  cars = Cars.objects.all()

  mod_list = []      

  for car in cars:
    mod_list.append( { 'car': car, 'mods': list(car.mods.all()) } 

  ret = []

  for key, mods_group in groupby(list(mods), lambda x: set(x.mods)):
    ret.append(mods_group)

  return ret
</code></pre>

<p>However, that doesn't work because (perhaps among other reasons) the groupby doesn't seem to group by the mods sets. I guess the mod_list has to be sorted to work with groupby. All to say, I'm confident there's something simple and elegant out there that will be both enlightening and illuminating.</p>

<p><em>Cheers &amp; thanks!</em></p>
"
160834,2168,2008-10-02T03:55:22Z,6,Are there any other good alternatives to zc.buildout and/or virtualenv for installing non-python dependencies?,"<p>I am a member of a team that is about to launch a beta of a python (Django specifically) based web site and accompanying suite of backend tools.  The team itself has doubled in size from 2 to 4 over the past few weeks and we expect continued growth for the next couple of months at least.  One issue that has started to plague us is getting everyone up to speed in terms of getting their development environment configured and having all the right eggs installed, etc.</p>

<p>I'm looking for ways to simplify this process and make it less error prone.  Both zc.buildout and virtualenv look like they would be good tools for addressing this problem but both seem to concentrate primarily on the python-specific issues.  We have a couple of small subprojects in other languages (Java and Ruby specifically) as well as numerous python extensions that have to be compiled natively (lxml, MySQL drivers, etc).  In fact, one of the biggest thorns in our side has been getting some of these extensions compiled against appropriate versions of the shared libraries so as to avoid segfaults, malloc errors and all sorts of similar issues.  It doesn't help that out of 4 people we have 4 different development environments -- 1 leopard on ppc, 1 leopard on intel, 1 ubuntu and 1 windows.</p>

<p>Ultimately what would be ideal would be something that works roughly like this, from the dos/unix prompt:</p>

<p>$ git clone [repository url]
...
$ python setup-env.py
...</p>

<p>that then does what zc.buildout/virtualenv does (copy/symlink the python interpreter, provide a clean space to install eggs) then installs all required eggs, including installing any native shared library dependencies, installs the ruby project, the java project, etc.</p>

<p>Obviously this would be useful for both getting development environments up as well as deploying on staging/production servers.</p>

<p>Ideally I would like for the tool that accomplishes this to be written in/extensible via python, since that is (and always will be) the lingua franca of our team, but I am open to solutions in other languages.</p>

<p>So, my question then is: does anyone have any suggestions for better alternatives or any experiences they can share using one of these solutions to handle larger/broader install bases?</p>
"
160859,15073,2008-10-02T04:14:01Z,9,"What is ""lambda binding"" in Python?","<p>I understand what are lambda functions in Python, but I can't find what is the meaning of ""lambda binding"" by searching the Python docs.
A link to read about it would be great.
A trivial explained example would be even better.
Thank you.</p>
"
160889,24382,2008-10-02T04:34:06Z,4,Emulation of lex like functionality in Perl or Python,"<p>Here's the deal. Is there a way to have strings tokenized in a line based on multiple regexes?</p>

<p>One example:</p>

<p>I have to get all href tags, their corresponding text and some other text based on a different regex.
So I have 3 expressions and would like to tokenize the line and extract tokens of text matching every expression.</p>

<p>I have actually done this using flex (not to be confused with Adobe), which is an implementation of the good old lex. lex provides
an elegant way to do this by executing ""actions"" based on expressions. One can control the way
lex reading a file too (block / line based read).</p>

<p>The problem is that flex actually produces C/ C++ code which actually does the tokenizing job. I have a 
make file which wraps all these things.
I was wondering if perl /python can in some way do the same thing. Its just that I would like to do everything
I like in a single programming language itself.</p>

<p>Tokenizing is just one of the things that I want to do as part of my application.</p>

<p>Apart from perl or python can any language (functional also) do this?</p>

<p>I did read about PLY and ANTLR here (<a href=""http://stackoverflow.com/questions/34081/parsing-where-can-i-learn-about-it#34085"">http://stackoverflow.com/questions/34081/parsing-where-can-i-learn-about-it#34085</a>).</p>

<p>But is there a way to do it naturally in python itself? pardon my ignorance, but are these tools used in any popular products / services?</p>

<p>Thank you.</p>
"
160905,736,2008-10-02T04:43:28Z,3,Django admin site not displaying ManyToManyField relationship,"<p>I'm working on what I think is a pretty standard django site, but am having trouble getting my admin section to display the proper fields.</p>

<p>Here's my models.py:</p>

<pre><code>class Tech(models.Model):
    name = models.CharField(max_length = 30)

class Project(models.Model):
    title = models.CharField(max_length = 50)
    techs = models.ManyToManyField(Tech)
</code></pre>

<p>In other words, a Project can have different Tech objects and different tech objects can belong to different Projects (Project X was created with Python and Django, Project Y was C# and SQL Server)</p>

<p>However, the admin site doesn't display any UI for the Tech objects. Here's my admin.py:</p>

<pre><code>class TechInline(admin.TabularInline):
    model = Tech
    extra = 5

class ProjectAdmin(admin.ModelAdmin):
    fields = ['title']
    inlines = []
    list_display = ('title')

admin.site.register(Project, ProjectAdmin)
</code></pre>

<p>I've tried adding the <code>TechInline</code> class to the <code>inlines</code> list, but that causes a </p>

<pre><code>&lt;class 'home.projects.models.Tech'&gt; has no ForeignKey to &lt;class 'home.projects.models.Project'&gt;
</code></pre>

<p>Error. Also tried adding <code>techs</code> to the <code>fields</code> list, but that gives a </p>

<blockquote>
  <p>no such table: projects_project_techs</p>
</blockquote>

<p>Error. I verified, and there is no <code>projects_project_techs</code> table, but there is a <code>projects_tech</code> one. Did something perhaps get screwed up in my syncdb? </p>

<p>I am using Sqlite as my database if that helps.</p>
"
161367,3497,2008-10-02T08:35:39Z,0,Library for converting a traceback to its exception?,"<p><br />
Just a curiosity: is there an already-coded way to convert a printed traceback back to the exception that generated it? :) Or to a sys.exc_info-like structure?</p>
"
161755,974,2008-10-02T11:00:56Z,3,How would you implement ant-style patternsets in python to select groups of files?,"<p>Ant has a nice way to select groups of files, most handily using ** to indicate a directory tree. E.g.</p>

<pre><code>**/CVS/*            # All files immediately under a CVS directory.
mydir/mysubdir/**   # All files recursively under mysubdir
</code></pre>

<p>More examples can be seen here:</p>

<p><a href=""http://ant.apache.org/manual/dirtasks.html"" rel=""nofollow"">http://ant.apache.org/manual/dirtasks.html</a></p>

<p>How would you implement this in python, so that you could do something like:</p>

<pre><code>files = get_files(""**/CVS/*"")
for file in files:
    print file

=&gt;
CVS/Repository
mydir/mysubdir/CVS/Entries
mydir/mysubdir/foo/bar/CVS/Entries
</code></pre>
"
162656,720,2008-10-02T14:38:43Z,1,Interface to versioned dictionary,"<p>I have an versioned document store which I want to access through an dict like interface.
Common usage is to access the latest revision (get, set, del), but one should be able to access specific revisions too (keys are always str/unicode or int).</p>

<pre><code>from UserDict import DictMixin
class VDict(DictMixin):   
    def __getitem__(self, key):
        if isinstance(key, tuple):
            docid, rev = key
        else:
            docid = key
            rev = None  # set to tip rev

        print docid, rev
        # return ...

In [1]: d = VDict()

In [2]: d[2]
2 None

In [3]: d[2, 1]
2 1
</code></pre>

<p>This solution is a little bit tricky and I'm not sure if it is a clean, understandable interface. Should I provide a function </p>

<pre><code>def getrev(self, docid, rev):
   ...
</code></pre>

<p>instead?</p>
"
162798,18909,2008-10-02T14:59:18Z,1,Subclassing a class with private members,"<p>One of the really nice things about python is the simplicity with which you can name variables that have the same name as the accessor:</p>

<pre><code>self.__value = 1

def value():
    return self.__value
</code></pre>

<p>Is there a simple way of providing access to the private members of a class that I wish to subclass? Often I wish to simply work with the raw data objects inside of a class without having to use accessors and mutators all the time.</p>

<p>I know this seems to go against the general idea of private and public, but usually the class I am trying to subclass is one of my own which I am quite happy to expose the members from to a subclass but not to an instance of that class. Is there a clean way of providing this distinction?</p>
"
162808,3326,2008-10-02T15:00:00Z,5,Django and Python 2.6,"<p>I'm just starting to get into Django, and of course as of last night one of the two new Python versions went final (2.6 obviously ;)) so I'm wondering if 2.6 plus Django is ready for actual use or do the Django team need more time to finish with tweaks/cleanup?  </p>

<p>All the google searches I did were inconclusive, I saw bits about some initial test runs on beta 2 but nothing more recent seemed to show up.</p>

<p>Edit: <a href=""http://groups.google.com/group/django-developers/browse_thread/thread/a48f81d916f24a04"" rel=""nofollow"">http://groups.google.com/group/django-developers/browse_thread/thread/a48f81d916f24a04</a></p>

<p>They've confirmed here 1.0 w/2.6 works fine as far as they know.</p>
"
163009,6007,2008-10-02T15:27:04Z,24,urllib2 file name,"<p>If I open a file using urllib2, like so:</p>

<pre><code>remotefile = urllib2.urlopen('http://example.com/somefile.zip')
</code></pre>

<p>Is there an easy way to get the file name other then parsing the original URL?</p>

<p>EDIT: changed openfile to urlopen... not sure how that happened.</p>

<p>EDIT2: I ended up using:</p>

<pre><code>filename = url.split('/')[-1].split('#')[0].split('?')[0]
</code></pre>

<p>Unless I'm mistaken, this should strip out all potential queries as well.</p>
"
163542,4766,2008-10-02T17:25:23Z,175,Python - How do I pass a string into subprocess.Popen (using the stdin argument)?,"<p>If I do the following:</p>

<pre><code>import subprocess
from cStringIO import StringIO
subprocess.Popen(['grep','f'],stdout=subprocess.PIPE,stdin=StringIO('one\ntwo\nthree\nfour\nfive\nsix\n')).communicate()[0]
</code></pre>

<p>I get:</p>

<pre><code>Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in ?
  File ""/build/toolchain/mac32/python-2.4.3/lib/python2.4/subprocess.py"", line 533, in __init__
    (p2cread, p2cwrite,
  File ""/build/toolchain/mac32/python-2.4.3/lib/python2.4/subprocess.py"", line 830, in _get_handles
    p2cread = stdin.fileno()
AttributeError: 'cStringIO.StringI' object has no attribute 'fileno'
</code></pre>

<p>Apparently a cStringIO.StringIO object doesn't quack close enough to a file duck to suit subprocess.Popen.  How do I work around this?</p>
"
163603,1694,2008-10-02T17:40:38Z,4,Apache sockets not closing?,"<p>I have a web application written using CherryPy, which is run locally on <code>127.0.0.1:4321</code>.  We use mod-rewrite and mod-proxy to have Apache act as a reverse proxy; Apache also handles our SSL encryption and may eventually be used to transfer all of our static content.</p>

<p>This all works just fine for small workloads.  However, I recently used <code>urllib2</code> to write a stress-testing script that would simulate a workload of 100 clients.  After some time, each client gets a 503 error from Apache, indicating that Apache cannot connect to <code>127.0.0.1:4321</code>.  CherryPy is functioning properly, but my Apache error log reveals lines like the following:</p>

<p><code>[Thu Oct 02 12:55:44 2008] [error] (OS 10048)Only one usage of each socket address (protocol/network address/port) is normally permitted.  : proxy: HTTP: attempt to connect to 127.0.0.1:4321 (*) failed</code></p>

<p>Googling for this error reveals that Apache has probably run out of socket file descriptors.  Since I only have 100 clients running, this implies that the connections are not being closed, either between my <code>urllib2</code> connection and Apache (I am definitely calling <code>.close()</code> on the return value of <code>urlopen</code>), or between Apache and CherryPy.</p>

<p>I've confirmed that my <code>urllib2</code> request is sending an HTTP <code>Connection: close</code> header, although Apache is configured with <code>KeepAlive On</code> if that matters.</p>

<p>In case it matters, I'm using Python 2.5, Apache 2.2, CherryPy 3.0.3, and the server is running on Windows Server 2003.</p>

<p>So what's my next step to stop this problem?</p>
"
163823,10040,2008-10-02T18:26:19Z,150,"Can ""list_display"" in a Django ModelAdmin display attributes of ForeignKey fields?","<p>I have a Person model that has a foreign key relationship to Book.  Book has a number of fields, but I'm most concerned about ""author"" (a standard CharField).</p>

<p>With that being said, in my PersonAdmin model, I'd like to display ""book.author"" using ""list_display"".  I've tried all of the obvious methods for doing so (see below), but nothing seems to work.  Any suggestions?</p>

<pre><code>class PersonAdmin(admin.ModelAdmin):
  list_display = ['book.author',]
</code></pre>
"
163881,23609,2008-10-02T18:35:16Z,4,WPF Alternative for python,"<p>Is there any alternative for WPF (windows presentation foundation) in python? </p>

<p><a href=""http://msdn.microsoft.com/en-us/library/aa970268.aspx#Programming_with_WPF"">http://msdn.microsoft.com/en-us/library/aa970268.aspx#Programming_with_WPF</a> </p>
"
164137,1638,2008-10-02T19:31:51Z,28,How do I deploy a Python desktop application?,"<p>I have started on a personal python application that runs on the desktop. I am using wxPython as a GUI toolkit. Should there be a demand for this type of application, I would possibly like to commercialize it.</p>

<p>I have no knowledge of deploying ""real-life"" Python applications, though I have used <a href=""http://www.py2exe.org/""><code>py2exe</code></a> in the past with varied success. How would I obfuscate the code? Can I somehow deploy only the bytecode?</p>

<p>An ideal solution would not jeopardize my intellectual property (source code), would not require a direct installation of Python (though I'm sure it will need to have some embedded interpreter), and would be cross-platform (Windows, Mac, and Linux). Does anyone know of any tools or resources in this area?</p>

<p>Thanks.</p>
"
164427,24630,2008-10-02T20:30:09Z,38,Change Django Templates Based on User-Agent,"<p>I've made a Django site, but I've drank the Koolaid and I want to make an <em>IPhone</em> version.  After putting much thought into I've come up with two options:</p>

<ol>
<li>Make a whole other site, like i.xxxx.com.  Tie it into the same database using Django's sites framework.</li>
<li>Find some time of middleware that reads the user-agent, and changes the template directories dynamically.</li>
</ol>

<p>I'd really prefer option #2, however; I have some reservations, mainly because the Django documentation <a href=""http://docs.djangoproject.com/en/dev/topics/settings/"">discourages changing settings on the fly</a>.  I found a <a href=""http://www.djangosnippets.org/snippets/1098/"">snippet</a> that would do the what I'd like.  My main issue is having it as seamless as possible, I'd like it to be automagic and transparent to the user.</p>

<p>Has anyone else come across the same issue?  Would anyone care to share about how they've tackled making IPhone versions of Django sites?</p>

<p><strong>Update</strong></p>

<p>I went with a combination of middleware and tweaking the template call.</p>

<p>For the middleware, I used <a href=""http://code.google.com/p/minidetector/"">minidetector</a>.  I like it because it detects a <a href=""http://www.youtube.com/watch?v=b6E682C7Jj4"">plethora</a> of mobile user-agents.  All I have to do is check request.mobile in my views.</p>

<p>For the template call tweak:</p>

<pre><code> def check_mobile(request, template_name):
     if request.mobile:
         return 'mobile-%s'%template_name
     return template_name
</code></pre>

<p>I use this for any view that I know I have both versions.</p>

<p><strong>TODO:</strong></p>

<ul>
<li>Figure out how to access <em>request.mobile</em> in an extended version of render_to_response so I don't have to use check_mobile('template_name.html')</li>
<li>Using the previous automagically fallback to the regular template if no mobile version exists.</li>
</ul>
"
164460,11176,2008-10-02T20:36:02Z,7,Programmatically launching standalone Adobe flashplayer on Linux/X11,"<p>The standalone flashplayer takes no arguments other than a .swf file when you launch it from the command line. I need the player to go full screen, no window borders and such. This can be accomplished by hitting ctrl+f once the program has started. I want to do this programmatically as I need it to launch into full screen without any human interaction.</p>

<p>My guess is that I need to some how get a handle to the window and then send it an event that looks like the ""ctrl+f"" keystroke. </p>

<p>If it makes any difference, it looks like flashplayer is a gtk application and I have python with pygtk installed.</p>

<p><b>UPDATE</b> (the solution I used... thanks to ypnos' answer):</p>

<pre><code>./flashplayer http://example.com/example.swf &amp; sleep 3 &amp;&amp; ~/xsendkey -window ""Adobe Flash Player 10"" Control+F
</code></pre>
"
164901,2592,2008-10-02T22:27:56Z,30,How would I package and sell a Django app?,"<p>Currently I am hosting a Django app I developed myself for my clients, but I am now starting to look at selling it to people for them to host themselves.</p>

<p>My question is this: How can I package up and sell a Django app, while protecting its code from pirating or theft? Distributing a bunch of .py files doesn't sound like a good idea as the people I sell it to too could just make copies of them and pass them on.</p>

<p>I think for the purpose of this problem it would be safe to assume that everyone who buys this would be running the same (LAMP) setup.</p>
"
165495,24718,2008-10-03T02:51:44Z,13,Detecting Mouse clicks in windows using python,"<p>How can I detect mouse clicks regardless of the window the mouse is in?</p>

<p>Perferabliy in python, but if someone can explain it in any langauge I might be able to figure it out.</p>

<p>I found this on microsoft's site:
<a href=""http://msdn.microsoft.com/en-us/library/ms645533(VS.85).aspx"">http://msdn.microsoft.com/en-us/library/ms645533(VS.85).aspx</a></p>

<p>But I don't see how I can detect or pick up the notifications listed.</p>

<p>Tried using pygame's pygame.mouse.get_pos() function as follows:</p>

<pre><code>import pygame
pygame.init()
while True:
    print pygame.mouse.get_pos()
</code></pre>

<p>This just returns 0,0.
I'm not familiar with pygame, is something missing?</p>

<p>In anycase I'd prefer a method without the need to install a 3rd party module.
(other than pywin32 <a href=""http://sourceforge.net/projects/pywin32/"">http://sourceforge.net/projects/pywin32/</a> )</p>
"
165883,8206,2008-10-03T06:18:37Z,22,Python object attributes - methodology for access,"<p>Suppose I have a class with some attributes. How is it best (in the Pythonic-OOP) sense to access these attributes ? Just like <code>obj.attr</code> ? Or perhaps write get accessors ? 
What are the accepted naming styles for such things ?</p>

<p><strong>Edit:</strong>
Can you elaborate on the best-practices of naming attributes with a single or double leading underscore ? I see in most modules that a single underscore is used.</p>

<p><hr /></p>

<p>If this question has already been asked (and I have a hunch it has, though searching didn't bring results), please point to it - and I will close this one.</p>
"
166044,2193,2008-10-03T09:10:29Z,129,Sleeping in a batch file,"<p>When writing a batch file to automate something on a Windows box, I've needed to pause its execution for several seconds (usually in a test/wait loop, waiting for a process to start). At the time, the best solution I could find uses ping (I kid you not) to achieve the desired effect. I've found a better write-up of it <a href=""http://malektips.com/dos0017.html"">here</a>, which describes a callable ""wait.bat"", implemented as follows:</p>

<pre><code>@ping 127.0.0.1 -n 2 -w 1000 &gt; nul
@ping 127.0.0.1 -n %1% -w 1000&gt; nul
</code></pre>

<p>You can then include calls to wait.bat in your own batch file, passing in the number of seconds to sleep.</p>

<p><a href=""http://malektips.com/xp_dos_0002.html"">Apparently the Windows 2003 Resource Kit provides a Unix-like sleep command</a> (at last!). In the meantime, for those of us still using Windows&nbsp;XP, Windows 2000 or (sadly) <a href=""http://en.wikipedia.org/wiki/Windows_NT"">Windows NT</a>, is there a better way?</p>

<p>I modified the <code>sleep.py</code> script in the <a href=""http://stackoverflow.com/questions/166044/sleeping-in-a-dos-batch-file#166290"">accepted answer</a>, so that it defaults to one second if no arguments are passed on the command line:</p>

<pre class=""lang-py prettyprint-override""><code>import time, sys

time.sleep(float(sys.argv[1]) if len(sys.argv) &gt; 1 else 1)
</code></pre>
"
166198,15369,2008-10-03T10:11:16Z,6,How can I capture all exceptions from a wxPython application?,"<p>I'm writing a little debug app for a bit of kit we're developing and I'd like to roll it out to a few users to see if they can provoke any crashes. Does anyone know a way of effectively wrapping a wxPython app to catch any and all unhandled exceptions that would cause the app to crash?</p>

<p>Ideally I'd want to capture all output (not just errors) and log it to a file. Any unhandled exceptions ought to log to the current file and then allow the exception to pass on as per usual (i.e. the logging process ought to be transparent).</p>

<p>I'm sure someone must have done something along these lines before, but I've not managed to turn up anything that looks useful via google.</p>
"
166334,473,2008-10-03T10:57:44Z,17,How to build and deploy Python web applications,"<p>I have a Python web application consisting of several Python packages. What is the best way of building and deploying this to the servers?</p>

<p>Currently I'm deploying the packages with Capistrano, installing the packages into a virtualenv with bash, and configuring the servers with puppet, but I would like to go for a more Python based solution.</p>

<p>I've been looking a bit into zc.buildout, but it's not clear for me what I can/should use it for.</p>
"
166364,3355,2008-10-03T11:10:04Z,1,"Django, mod_python, apache and wacky sessions","<p>I am running a Django through mod_python on Apache on a linux box. I have a custom authentication backend, and middleware that requires authentication for all pages, except static content.</p>

<p>My problem is that after I log in, I will still randomly get the log in screen now and again. It seems to me that each apache process has it's own python process, which in turn has it's own internals. So as long as I get served by the same process I logged in to, everything is fine and dandy. But if my request gets served by a different apache process, I am no longer authenticated.</p>

<p>I have checked the HTTP headers I send with FireBug, and they are the same each time, ie. same cookie.</p>

<p>Is this a known issue and are there workarounds/fixes?</p>

<p>Edit: I have a page that displays a lot of generated images. Some off these will not display. This is because they are too behind the authenticating middleware, so they will randomly put up a login image. However, refreshing this page enough times, and it will eventually work, meaning all processes recognize my session.</p>
"
166431,18909,2008-10-03T11:37:23Z,7,Clearing a list,"<p>I find it annoying that I can't clear a list. In this example:</p>

<pre><code>a = []
a.append(1)
a.append(2)

a = []
</code></pre>

<p>The second time I initialize a to a blank list, it creates a new instance of a list, which is in a different place in memory, so I can't use it to reference the first, not to mention it's inefficient.</p>

<p>The only way I can see of retaining the same pointer is doing something like the following:</p>

<pre><code>for i in range(len(a)):
    a.pop()
</code></pre>

<p>This seems pretty long-winded though, is there a better way of solving this?</p>
"
166506,115,2008-10-03T12:03:36Z,290,Finding local IP addresses using Python's stdlib,"<p>How can I find local IP addresses (i.e. 192.168.x.x or 10.0.x.x) in Python platform independently and using only the standard library?</p>
"
166545,115,2008-10-03T12:20:07Z,14,Finding a public facing IP address in Python?,"<p>How can I find the public facing IP for my net work in Python?</p>
"
166944,2999,2008-10-03T13:44:41Z,55,Calling Python in PHP,"<p>I have a Python script I recently wrote that I call using the command line with some options. I now want a very thin web interface to call this script locally on my Mac.</p>

<p>I don't want to go through the minor trouble of installing mod_python or mod_wsgi on my Mac, so I was just going to do a system() or popen() from PHP to call the Python script.</p>

<p>Any better ideas? Thanks in advance!</p>
"
167120,18909,2008-10-03T14:24:35Z,5,Removing a subset of a dict from within a list,"<p>This is really only easy to explain with an example, so to remove the intersection of a list from within a dict I usually do something like this:</p>

<pre><code>a = {1:'', 2:'', 3:'', 4:''}
exclusion = [3, 4, 5]

# have to build up a new list or the iteration breaks
toRemove = []
for var in a.iterkeys():
    if var in exclusion:
        toRemove.append(var)

for var in toRemove:
    del a[var]
</code></pre>

<p>This might seem like an unusual example, but it's surprising the number of times I've had to do something like this. Doing this with sets would be much nicer, but I clearly want to retain the 'values' for the dict.</p>

<p>This method is annoying because it requires two loops and an extra array. Is there a cleaner and more efficient way of doing this.</p>
"
167426,NA,2008-10-03T15:28:36Z,1,Problem With Python Sockets: How To Get Reliably POSTed data whatever the browser?,"<p>I wrote small Python+Ajax programs (listed at the end) with socket module to study the COMET concept of asynchronous communications.<br/>
The idea is to allow browsers to send messages real time each others via my python program.<br/>
The trick is to let the ""GET messages/..."" connexion opened waiting for a message to answer back.<br/>
My problem is mainly on the reliability of what I have via socket.recv...<br/>
When I POST from Firefox, it is working well.<br/>
When I POST from Chrome or IE, the ""data"" I get in Python is empty.</p>

<p>Does anybody know about this problem between browsers?<br/>
Are some browsers injecting some EOF or else characters killing the receiving of ""recv""?<br/>
Is there any solution known to this problem?</p>

<p>Thanks for your help,</p>

<p>J.</p>

<p>The server.py in Python:</p>

<pre><code> import socket
connected={}
def inRequest(text):
   content=''
   if text[0:3]=='GET':
      method='GET'
   else:
      method='POST'
      k=len(text)-1
      while k&gt;0 and text[k]!='\n' and text[k]!='\r':
         k=k-1
      content=text[k+1:]
   text=text[text.index(' ')+1:]
   url=text[:text.index(' ')]
   return {""method"":method,""url"":url,""content"":content}

mySocket = socket.socket ( socket.AF_INET, socket.SOCK_STREAM )
mySocket.bind ( ( '', 80 ) )
mySocket.listen ( 10 )
while True:
   channel, details = mySocket.accept()
   data=channel.recv(4096)
   req=inRequest(data)
   url=req[""url""]
   if url==""/client.html"" or url==""/clientIE.html"":
      f=open('C:\\async\\'+url)
      channel.send ('HTTP/1.1 200 OK\n\n'+f.read())
      f.close()
      channel.close()
   elif '/messages' in url:
      if req[""method""]=='POST':
         target=url[10:]
         if target in connected:
            connected[target].send(""HTTP/1.1 200 OK\n\n""+req[""content""])
            print req[""content""]+"" sent to ""+target
            connected[target].close()
            channel.close()
      elif req[""method""]=='GET':
         user=url[10:]
         connected[user]=channel
         print user+' is connected'
</code></pre>

<p>The client.html in HTML+Javascript:</p>

<pre><code>&lt;html&gt;
&lt;head&gt;
    &lt;script&gt;
    	var user=''
    	function post(el) {
    		if (window.XMLHttpRequest) {
    			var text=el.value;
    			var req=new XMLHttpRequest();
    			el.value='';
    			var target=document.getElementById('to').value
    		}
    		else if (window.ActiveXObject) {
    			var text=el.content;
    			var req=new ActiveXObject(""Microsoft.XMLHTTP"");
    			el.content='';
    		}
    		else 
    			return;
    		req.open('POST','messages/'+target,true)
    		req.send(text);
    	}
    	function get(u) {
    		if (user=='')
    			user=u.value
    		var req=new XMLHttpRequest()
    		req.open('GET','messages/'+user,true)
    		req.onload=function() {
    			var message=document.createElement('p');
    			message.innerHTML=req.responseText;
    			document.getElementById('messages').appendChild(message);
    			get(user);
    		}
    		req.send(null)
    	}
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;span&gt;From&lt;/span&gt;
&lt;input id=""user""/&gt;
&lt;input type=""button"" value=""sign in"" onclick=""get(document.getElementById('user'))""/&gt;
&lt;span&gt;To&lt;/span&gt;
&lt;input id=""to""/&gt;
&lt;span&gt;:&lt;/span&gt;
&lt;input id=""message""/&gt;

&lt;input type=""button"" value=""post"" onclick=""post(document.getElementById('message'))""/&gt;
&lt;div id=""messages""&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
"
167439,20578,2008-10-03T15:30:59Z,5,How do I enter a pound sterling character (£) into the Python interactive shell on Mac OS X?,"<p><strong>Update:</strong> Thanks for the suggestions guys. After further research, I’ve reformulated the question here: <a href=""http://stackoverflow.com/questions/217020/pythoneditline-on-os-x-163-sign-seems-to-be-bound-to-ed-prev-word"">Python/editline on OS X: £ sign seems to be bound to ed-prev-word</a></p>

<p>On Mac OS X I can’t enter a pound sterling sign (£) into the Python interactive shell.</p>

<ul>
<li>Mac OS X 10.5.5</li>
<li>Python 2.5.1 (r251:54863, Jan 17 2008, 19:35:17)</li>
<li>European keyboard (£ is shift-3)</li>
</ul>

<p>When I type “£” (i.e. press shift-3) at an empty Python shell, nothing appears.</p>

<p>If I’ve already typed some characters, e.g.</p>

<pre><code>&gt;&gt;&gt; 1234567890 1234567890 1234567890
</code></pre>

<p>... then pressing shift-3 will make the cursor position itself after the most recent space, or the start of the line if there are no spaces left between the cursor and the start of the line.</p>

<p>In a normal bash shell, pressing shift-3 types a “£” as expected.</p>

<p>Any idea how I can type a literal “£” in the Python interactive shell?</p>
"
167923,4527,2008-10-03T17:13:37Z,2,What is best way to remove duplicate lines matching regex from string using Python?,"<p>This is a pretty straight forward attempt. I haven't been using python for too long. Seems to work but I am sure I have much to learn. Someone let me know if I am way off here. Needs to find patterns, write the first line which matches, and then add a summary message for remaining consecutive lines which match pattern and return modified string.</p>

<p>Just to be clear...regex <code>.*Dog.*</code> would take </p>

<pre><code>Cat
Dog
My Dog
Her Dog
Mouse
</code></pre>

<p>and return </p>

<pre><code>Cat
Dog
::::: Pattern .*Dog.* repeats 2 more times.
Mouse


#!/usr/bin/env python
#

import re
import types

def remove_repeats (l_string, l_regex):
   """"""Take a string, remove similar lines and replace with a summary message.

   l_regex accepts strings and tuples.
   """"""

   # Convert string to tuple.
   if type(l_regex) == types.StringType:
      l_regex = l_regex,


   for t in l_regex:
      r = ''
      p = ''
      for l in l_string.splitlines(True):
         if l.startswith('::::: Pattern'):
            r = r + l
         else:
            if re.search(t, l): # If line matches regex.
                m += 1
                if m == 1: # If this is first match in a set of lines add line to file.
                   r = r + l
                elif m &gt; 1: # Else update the message string.
                   p = ""::::: Pattern '"" + t + ""' repeats "" + str(m-1) +  ' more times.\n'
            else:
                if p: # Write the message string if it has value.
                   r = r + p
                   p = ''
                m = 0
                r = r + l

      if p: # Write the message if loop ended in a pattern.
          r = r + p
          p = ''

      l_string = r # Reset string to modified string.

   return l_string
</code></pre>
"
168022,NA,2008-10-03T17:37:47Z,1,Naming conventions in a Python library,"<p>I'm implementing a search algorithm (let's call it MyAlg) in a python package. Since the algorithm is super-duper complicated, the package has to contain an auxiliary class for algorithm options. Currently I'm developing the entire package by myself (and I'm not a programmer), however I expect 1-2 programmers to join the project later. This would be my first project that will involve external programmers. Thus, in order to make their lifes easier, how should I name this class: Options, OptionsMyAlg, MyAlgOptions or anything else?</p>

<p>What would you suggest me to read in this topic except for <a href=""http://www.joelonsoftware.com/articles/Wrong.html"" rel=""nofollow"">http://www.joelonsoftware.com/articles/Wrong.html</a> ?</p>

<p>Thank you
Yuri 
[cross posted from here: <a href=""http://discuss.joelonsoftware.com/default.asp?design.4.684669.0"" rel=""nofollow"">http://discuss.joelonsoftware.com/default.asp?design.4.684669.0</a> will update the answers in both places]</p>
"
168113,736,2008-10-03T17:58:05Z,6,Django: How do I create a generic url routing to views?,"<p>I have a pretty standard django app, and am wondering how to set the url routing so that I don't have to explicitly map each url to a view. </p>

<p>For example, let's say that I have the following views: <code>Project, Links, Profile, Contact</code>. I'd rather not have my <code>urlpatterns</code> look like this:</p>

<pre><code>(r'^Project/$', 'mysite.app.views.project'),
(r'^Links/$', 'mysite.app.views.links'),
(r'^Profile/$', 'mysite.app.views.profile'),
(r'^Contact/$', 'mysite.app.views.contact'),
</code></pre>

<p>And so on. In <a href=""http://www.pylonshq.com"">Pylons</a>, it would be as simple as:</p>

<pre><code>map.connect(':controller/:action/:id')
</code></pre>

<p>And it would automatically grab the right controller and function. Is there something similar in Django?</p>
"
168167,1694,2008-10-03T18:16:08Z,2,Initializing cherrypy.session early,"<p>I love CherryPy's API for sessions, except for one detail.  Instead of saying <code>cherrypy.session[""spam""]</code> I'd like to be able to just say <code>session[""spam""]</code>.</p>

<p>Unfortunately, I can't simply have a global <code>from cherrypy import session</code> in one of my modules, because the <code>cherrypy.session</code> object isn't created until the first time a page request is made.  Is there some way to get CherryPy to initialize its session object immediately instead of on the first page request?</p>

<p>I have two ugly alternatives if the answer is no:</p>

<p>First, I can do something like this</p>

<pre><code>def import_session():
    global session
    while not hasattr(cherrypy, ""session""):
        sleep(0.1)
    session = cherrypy.session

Thread(target=import_session).start()
</code></pre>

<p>This feels like a big kludge, but I really hate writing <code>cherrypy.session[""spam""]</code> every time, so to me it's worth it.</p>

<p>My second solution is to do something like</p>

<pre><code>class SessionKludge:
    def __getitem__(self, name):
        return cherrypy.session[name]
    def __setitem__(self, name, val):
        cherrypy.session[name] = val

session = SessionKludge()
</code></pre>

<p>but this feels like an even bigger kludge and I'd need to do more work to implement the other dictionary functions such as <code>.get</code></p>

<p>So I'd definitely prefer a simple way to initialize the object myself.  Does anyone know how to do this?</p>
"
168273,4766,2008-10-03T18:38:40Z,2,How do I build and install P4Python for Mac OS X?,"<p>I've been unable to build <a href=""http://www.perforce.com/perforce/loadsupp.html#api"" rel=""nofollow"">P4Python</a> for an Intel Mac OS X 10.5.5.</p>

<p>These are my steps:</p>

<ol>
<li>I downloaded p4python.tgz (from
<a href=""http://filehost.perforce.com/perforce/r07.3/tools/"" rel=""nofollow"">http://filehost.perforce.com/perforce/r07.3/tools/</a>) and expanded
it into ""P4Python-2007.3"".</li>
<li>I downloaded p4api.tar (from
<a href=""http://filehost.perforce.com/perforce/r07.3/bin.macosx104x86/"" rel=""nofollow"">http://filehost.perforce.com/perforce/r07.3/bin.macosx104x86/</a>)
and expanded it into ""p4api-2007.3.143793"".</li>
<li>I placed ""p4api-2007.3.143793"" into ""P4Python-2007.3"" and edited
setup.cfg to set ""p4_api=./p4api-2007.3.143793"".</li>
<li><p>I added the line 'extra_link_args = [""-framework"", ""Carbon""]' to
setup.py after:</p>

<pre><code>elif unameOut[0] == ""Darwin"":
    unix = ""MACOSX""
    release = ""104""
    platform = self.architecture(unameOut[4])
</code></pre></li>
<li><p>I ran <code>python setup.py build</code> and got:</p></li>
</ol>

<p>$ python setup.py build</p>

<pre><code>API Release 2007.3
running build
running build_py
running build_ext
building 'P4API' extension
gcc -fno-strict-aliasing -Wno-long-double -no-cpp-precomp -mno-fused-madd -DNDEBUG -g -O3 -Wall -Wstrict-prototypes -DID_OS=""MACOSX104X86"" -DID_REL=""2007.3"" -DID_PATCH=""151416"" -DID_API=""2007.3"" -DID_Y=""2008"" -DID_M=""04"" -DID_D=""09"" -I./p4api-2007.3.143793 -I./p4api-2007.3.143793/include/p4 -I/build/toolchain/mac32/python-2.4.3/include/python2.4 -c P4API.cpp -o build/temp.darwin-9.5.0-i386-2.4/P4API.o -DOS_MACOSX -DOS_MACOSX104 -DOS_MACOSXX86 -DOS_MACOSX104X86
cc1plus: warning: command line option ""-Wstrict-prototypes"" is valid for C/ObjC but not for C++
P4API.cpp: In function âint P4Adapter_init(P4Adapter*, PyObject*, PyObject*)â:
P4API.cpp:105: error: âPy_ssize_tâ was not declared in this scope
P4API.cpp:105: error: expected `;' before âposâ
P4API.cpp:107: error: âposâ was not declared in this scope
P4API.cpp: In function âPyObject* P4Adapter_run(P4Adapter*, PyObject*)â:
P4API.cpp:177: error: âPy_ssize_tâ was not declared in this scope
P4API.cpp:177: error: expected `;' before âiâ
P4API.cpp:177: error: âiâ was not declared in this scope
error: command 'gcc' failed with exit status 1
</code></pre>

<p><code>which gcc</code> returns /usr/bin/gcc and <code>gcc -v</code> returns:</p>

<pre><code>Using built-in specs.
Target: i686-apple-darwin9
Configured with: /var/tmp/gcc/gcc-5465~16/src/configure
--disable-checking -enable-werror --prefix=/usr --mandir=/share/man
--enable-languages=c,objc,c++,obj-c++
--program-transform-name=/^[cg][^.-]*$/s/$/-4.0/
--with-gxx-include-dir=/include/c++/4.0.0 --with-slibdir=/usr/lib
--build=i686-apple-darwin9 --with-arch=apple --with-tune=generic
--host=i686-apple-darwin9 --target=i686-apple-darwin9
Thread model: posix
gcc version 4.0.1 (Apple Inc. build 5465)
</code></pre>

<p><code>python -V</code> returns Python 2.4.3.</p>
"
168409,24953,2008-10-03T19:10:08Z,52,How do you get a directory listing sorted by creation date in python?,"<p>What is the best way to get a list of all files in a directory, sorted by date [created | modified], using python, on a windows machine?</p>
"
168559,4766,2008-10-03T19:41:04Z,41,"Python - How do I convert ""an OS-level handle to an open file"" to a file object?","<p><a href=""http://www.python.org/doc/2.5.2/lib/module-tempfile.html"">tempfile.mkstemp()</a> returns:</p>

<blockquote>
  <p>a tuple containing an OS-level handle to an open file (as would be returned by os.open()) and the absolute pathname of that file, in that order.</p>
</blockquote>

<p>How do I convert that OS-level handle to a file object?</p>

<p>The <a href=""http://www.python.org/doc/2.5.2/lib/os-fd-ops.html"">documentation for os.open()</a> states: </p>

<blockquote>
  <p>To wrap a file descriptor in a ""file
  object"", use fdopen().</p>
</blockquote>

<p>So I tried:</p>

<pre><code>&gt;&gt;&gt; import tempfile
&gt;&gt;&gt; tup = tempfile.mkstemp()
&gt;&gt;&gt; import os
&gt;&gt;&gt; f = os.fdopen(tup[0])
&gt;&gt;&gt; f.write('foo\n')
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in ?
IOError: [Errno 9] Bad file descriptor
</code></pre>
"
168727,8669,2008-10-03T20:23:12Z,9,"Now that Python 2.6 is out, what modules currently in the language should every programmer know about?","<p>A lot of useful features in Python are somewhat ""hidden"" inside modules. Named tuples (new in <a href=""http://docs.python.org/whatsnew/2.6.html"" rel=""nofollow"">Python 2.6</a>), for instance, are found in the <a href=""http://docs.python.org/library/collections.html"" rel=""nofollow"">collections</a> module. </p>

<p>The <a href=""http://docs.python.org/library/"" rel=""nofollow"">Library Documentation page</a> will give you all the modules in the language, but newcomers to Python are likely to find themselves saying ""Oh, I didn't know I could have done it <em>this way</em> using Python!"" unless the important features in the language are pointed out by the experienced developers.</p>

<p>I'm <strong>not</strong> specifically looking for new modules in Python 2.6, but modules that can be found in this latest release.</p>
"
169070,4766,2008-10-03T22:04:01Z,19,Python - How do I write a decorator that restores the cwd?,"<p>How do I write a decorator that restores the current working directory to what it was before the decorated function was called?  In other words, if I use the decorator on a function that does an os.chdir(), the cwd will not be changed after the function is called.</p>
"
169362,8359,2008-10-03T23:53:35Z,7,How can I compress a folder and email the compressed file in Python?,"<p>I would like to compress a folder and all its sub-folders/files, and email the zip file as an attachment. What would be the best way to achieve this with Python? </p>
"
169810,22897,2008-10-04T05:36:23Z,6,2D animation in Python,"<p>I'm writing a simulator in Python, and am curious about options and opinions regarding basic 2D animations. By animation, I'm referring to rendering on the fly, not displaying prerendered images.</p>

<p>I'm currently using matplotlib (Wxagg backend), and it's possible that I'll be able to continue using it, but I suspect it won't be able to sufficiently scale in terms of performance or capabilities.</p>

<p>Requirements are:</p>

<ul>
<li>Cross-platform (Linux, MacOS X,
Windows)</li>
<li>Low complexity overhead</li>
<li>Plays well with wxpython (at least won't step on each other's toes unduly)</li>
<li>Interactivity. Detect when objects are clicked on, moused over, etc. </li>
</ul>

<p>Note that high performance isn't on the list, but the ability to handle ~100 bitmap objects on the screen would be good.</p>

<p>Your thoughts?</p>
"
169897,25077,2008-10-04T07:08:05Z,10,How to package Twisted program with py2exe?,"<p>I tried to package a Twisted program with py2exe, but once I run the exe file I built, I got a ""No module named resource"" error. </p>

<p>And I found the py2exe said:</p>

<blockquote>
  <p>The following modules appear to be missing ['FCNTL', 'OpenSSL', 'email.Generator', 'email.Iterators', 'email.Utils', 'pkg_resources', 'pywintypes', 'resource', 'win32api', 'win32con', 'win32event', 'win32file', 'win32pipe', 'win32process', 'win32security']</p>
</blockquote>

<p>So how do I solve this problem?</p>

<p>Thanks.</p>
"
170278,4250,2008-10-04T12:45:46Z,4,USB Driver Development on a Mac using Python,"<p>I would like to write a driver to talk to my Suunto t3 watch in Python on a Mac. My day job is doing basic web work in C# so my familiarity with Python and developing on a Mac is limited.</p>

<p>Can you suggest how one would start doing driver development in general and then more specifically on a Mac. I.e. how to easily see what data is being transmitted to the device? I have Python 2.5 (MacPorts) up and running.</p>
"
170337,24630,2008-10-04T13:37:12Z,49,Django signals vs. overriding save method,"<p>I'm having trouble wrapping my head around this.  Right now I have some models that looks kind of like this:</p>

<pre><code> def Review(models.Model)
    ...fields...
    overall_score = models.FloatField(blank=True)

def Score(models.Model)
    review = models.ForeignKey(Review)
    question = models.TextField()
    grade = models.IntegerField()
</code></pre>

<p>A Review is has several ""scores"", the overall_score is the average of the scores.  When a review or a score is saved, I need to recalculate the overall_score average.  Right now I'm using a overridden save method.  Would there be any benefits to using Django's signal dispatcher?</p>
"
170353,24039,2008-10-04T13:46:06Z,2,How do I write to a log from mod_python under apache?,"<p>I seem to only be able to write to the Apache error log via stderr.  Anyone know of a more structured logging architecture that I could use from my python web project, like commons?</p>
"
171267,14739,2008-10-05T00:42:54Z,10,UNIX shell written in a reasonable language?,"<p>Has anyone ever heard of a UNIX shell written in a reasonable language, like Python?</p>
"
171277,25205,2008-10-05T00:49:51Z,6,Sorting music,"<p>So over the years, I've bought music off iTunes, Urge, and Rhapsody and all these files are lying mixed with my non-DRM'd MP3 files that I've ripped off my CDs. Now some of these files have licenses that have expired, and some of them have valid licenses.</p>

<p>I want to sort my music by various DRM/license restrictions that they have on them. This will make it easier for my to delete the music that I don't have subscription to, and all know which files I can carry on which music player.</p>

<p>Does anyone know if this is possible in .NET/Perl/Python i.e. are there any libraries available that will help me do this?</p>
"
171512,10942,2008-10-05T04:51:11Z,2,How would I implement a Python bit map?,"<p>I wish to implement a 2d bit map class in Python. The class would have the following requirements:</p>

<ol>
<li><p>Allow the creating of arbitrarily sized 2d bitmaps. i.e. to create an 8 x 8 bitmap (8 bytes), something like:</p>

<pre><code>bitmap = Bitmap(8,8)
</code></pre></li>
<li><p>provide an API to access the bits in this 2d map as boolean or even integer values, i.e.:</p>

<pre><code>if bitmap[1, 2] or bitmap.get(0, 1)
</code></pre></li>
<li><p>Able to retrieve the data as packed Binary data. Essentially it would be each row of the bit map concatenated and returned as Binary data. It may be padded to the nearest byte or something similar.</p>

<pre><code>bitmap.data()
</code></pre></li>
<li><p>Be able to create new maps from the binary data retrieved:</p>

<pre><code>new_bitmap = Bitmap(8, 8, bitmap.data())
</code></pre></li>
</ol>

<p>I know Python is able to perform binary operations, but I'd like some suggestions as how best to use them to implement this class.</p>
"
171662,18676,2008-10-05T08:09:52Z,11,Formatting a list of text into columns,"<p>I'm trying to output a list of string values into a 2 column format. The standard way of making a list of strings into ""normal text"" is by using the <strong>string.join</strong> method. However, it only takes 2 arguments so I can only make a single column using ""\n"". I thought trying to make a loop that would simply add a tab between columns would do it but the logic didn't work correctly.</p>

<p>I found an <a href=""http://code.activestate.com/recipes/302380/"">ActiveState page</a> that has a fairly complicated way of doing it but it's from 4 years ago. Is there an easy way to do it nowadays?</p>

<p><hr /></p>

<p><strong>Edit</strong> Here is the list that I want to use.</p>

<pre><code>skills_defs = [""ACM:Aircraft Mechanic"", ""BC:Body Combat"", ""BIO:Biology"",
    ""CBE:Combat Engineer"", ""CHM:Chemistry"", ""CMP:Computers"", 
    ""CRM:Combat Rifeman"", ""CVE:Civil Engineer"", ""DIS:Disguise"",
    ""ELC:Electronics"",""EQ:Equestrian"", ""FO:Forward Observer"",
    ""FOR:Forage"", ""FRG:Forgery"", ""FRM:Farming"", ""FSH:Fishing"",
    ""GEO:Geology"", ""GS:Gunsmith"", ""HW:Heavy Weapons"", ""IF:Indirect Fire"",
    ""INS:Instruction"", ""INT:Interrogation"", ""JP:Jet Pilot"", ""LB:Longbow"",
    ""LAP:Light Aircraft Pilot"", ""LCG:Large Caliber Gun"", ""LNG:Language"",
    ""LP:Lockpick"", ""MC:Melee Combat"", ""MCY:Motorcycle"", ""MEC:Mechanic"",
    ""MED:Medical"", ""MET:Meterology"", ""MNE:Mining Engineer"",
    ""MTL:Metallurgy"", ""MTN:Mountaineering"", ""NWH:Nuclear Warhead"",
    ""PAR:Parachute"", ""PST:Pistol"", ""RCN:Recon"", ""RWP:Rotary Wing Pilot"",
    ""SBH:Small Boat Handling"",""SCD:Scuba Diving"", ""SCR:Scrounging"",
    ""SWM:Swimming"", ""TW:Thrown Weapon"", ""TVD:Tracked Vehicle Driver"",
    ""WVD:Wheeled Vehicle Driver""]
</code></pre>

<p>I just want to output this list into a simple, 2 column format to reduce space. Ideally there should be a standard amount of space between the columns but I can work with it.</p>

<pre><code>ACM:Aircraft Mechanic   	 BC:Body Combat 
BIO:Biology 		CBE:Combat Engineer 
CHM:Chemistry   	CMP:Computers
CRM:Combat Rifeman  	CVE:Civil Engineer 
DIS:Disguise    		ELC:Electronics 
EQ:Equestrian   		FO:Forward Observer
FOR:Forage  		FRG:Forgery 
FRM:Farming     		FSH:Fishing
GEO:Geology     		GS:Gunsmith 
HW:Heavy Weapons    	IF:Indirect Fire
INS:Instruction     		INT:Interrogation 
JP:Jet Pilot    		LB:Longbow
 LAP:Light Aircraft Pilot   	LCG:Large Caliber Gun 
LNG:Language    		LP:Lockpick 
MC:Melee Combat     	MCY:Motorcycle 
MEC:Mechanic    		MED:Medical 
MET:Meterology  	MNE:Mining Engineer
MTL:Metallurgy  	MTN:Mountaineering 
NWH:Nuclear Warhead 	PAR:Parachute 
PST:Pistol  		RCN:Recon 
RWP:Rotary Wing Pilot   	SBH:Small Boat Handling 
SCD:Scuba Diving    	SCR:Scrounging
SWM:Swimming    	TW:Thrown Weapon 
TVD:Tracked Vehicle Driver  WVD:Wheeled Vehicle Driver
</code></pre>
"
171694,18676,2008-10-05T08:27:57Z,3,Applying a common font scheme to multiple objects in wxPython,"<p>Many times I will use the same font scheme for static text in a wxPython application. Currently I am making a <strong>SetFont()</strong> call for each static text object but that seems like a lot of unnecessary work. However, the wxPython demo and <em>wxPython In Action</em> book don't discuss this.</p>

<p>Is there a way to easily apply the same SetFont() method to all these text objects without making separate calls each time?</p>
"
171765,21384,2008-10-05T09:48:58Z,62,What is the best way to get all the divisors of a number?,"<p>Here's the very dumb way:</p>

<pre><code>def divisorGenerator(n):
    for i in xrange(1,n/2+1):
        if n%i == 0: yield i
    yield n
</code></pre>

<p>The result I'd like to get is similar to this one, but I'd like a smarter algorithm (this one it's too much slow and dumb :-)</p>

<p>I can find prime factors and their multiplicity fast enough. 
I've an generator that generates factor in this way:</p>

<p>(factor1, multiplicity1)<br />
(factor2, multiplicity2)<br />
(factor3, multiplicity3)<br />
and so on...</p>

<p>i.e. the output of </p>

<pre><code>for i in factorGenerator(100):
    print i
</code></pre>

<p>is:</p>

<pre><code>(2, 2)
(5, 2)
</code></pre>

<p>I don't know how much is this useful for what I want to do (I coded it for other problems), anyway I'd like a smarter way to make</p>

<pre><code>for i in divisorGen(100):
    print i
</code></pre>

<p>output this:</p>

<pre><code>1
2
4
5
10
20
25
50
100
</code></pre>

<p><hr /></p>

<p><strong>UPDATE:</strong> Many thanks to Greg Hewgill and his ""smart way"" :)
Calculating all divisors of 100000000 took 0.01s with his way against the 39s that the dumb way took on my machine, very cool :D</p>

<p><strong>UPDATE 2:</strong> Stop saying this is a duplicate of <a href=""http://stackoverflow.com/questions/110344/algorithm-to-calculate-the-number-of-divisors-of-a-given-number"">this</a> post. Calculating the number of divisor of a given number doesn't need to calculate all the divisors. It's a different problem, if you think it's not then look for ""Divisor function"" on wikipedia. Read the questions and the answer before posting, if you do not understand what is the topic just don't add not useful and already given answers.</p>
"
172040,1039,2008-10-05T14:08:42Z,34,How do you develop against OpenID locally,"<p>I'm developing a website (in Django) that uses OpenID to authenticate users. As I'm currently only running on my local machine I can't authenticate using one of the OpenID providers on the web. So I figure I need to run a local OpenID server that simply lets me type in a username and then passes that back to my main app.</p>

<p>Does such an OpenID dev server exist? Is this the best way to go about it?</p>
"
172066,25274,2008-10-05T14:29:56Z,1,Django UserProfile... without a password,"<p>I'd like to create a subset of Users that don't have a login... basically as a way to add a photographer field to photos without having a full blown account associated with that person (since in many cases, they'll never actually log in to the site). A caveat is that I'd also like to be able to enable an account for them later.</p>

<p>So, I think the question becomes what's the best way to set up a ""People"" table that ties to the User table without actually extending the User table with UserProfile.</p>
"
172306,2147,2008-10-05T17:08:30Z,49,How are you planning on handling the migration to Python 3?,"<p>I'm sure this is a subject that's on most python developers' minds considering that Python 3 is coming out soon.  Some questions to get us going in the right direction:</p>

<ol>
<li><p>Will you have a python 2 and python 3 version to be maintained concurrently or will you simply have a python 3 version once it's finished?</p></li>
<li><p>Have you already started or plan on starting soon?  Or do you plan on waiting until the final version comes out to get into full swing?</p></li>
</ol>
"
172392,2260,2008-10-05T18:23:19Z,5,What symmetric cypher to use for encrypting messages?,"<p>I haven't a clue about encryption at all. But I need it. How?</p>

<p>Say you have a system of nodes communicating with each other on a network via asynchronous messages. The nodes do not maintain session information about other nodes (this is a design restriction).</p>

<p>Say you want to make sure only your nodes can read the messages being sent. I believe encryption is the sollution to that.</p>

<p>Since the nodes are not maintaining a session and communication must work in a stateless, connectionless fashion, I am guessing that asymmetric encryption is ruled out.</p>

<p>So here is what I would like to do:</p>

<ul>
<li>messages are sent as UDP datagrams</li>
<li>each message contains a timestamp to make messages differ (counter replay attacks)</li>
<li>each message is encrypted with a shared secret symmetric key and sent over the network</li>
<li>other end can decrypt with shared secret symmetric key</li>
</ul>

<p>Keys can obviously be compromised by compromising any single node. At the same time, in this scenario, access to any single compromised node reveals all interesting information anyway, so the key is not the weakest link.</p>

<p>What cypher should I use for this encryption? What key length?</p>

<p>I would prefer to use something supported by <a href=""http://www.freenet.org.nz/ezPyCrypto/"" rel=""nofollow"">ezPyCrypto</a>.</p>

<p>Assuming, as most point out, I go with AES. What modes should I be using?</p>

<p>I couldn't figure out how to do it with ezPyCrypto, <a href=""http://www.dlitz.net/software/pycrypto/"" rel=""nofollow"">PyCrypto</a> seems to be hung on a moderator swap and googles <a href=""http://www.keyczar.org/"" rel=""nofollow"">keyczar</a> does not explain how to set this up - I fear if I don't just <em>get</em> it, then I run a risk of introducing insecurity. So barebones would be better. <a href=""http://www.josh-davis.org/pythonAES"" rel=""nofollow"">This guy</a> claims to have a nice module for AES in python, but he also asserts that this is his first python project - Allthough he is probably loads smarter than I, maybe he got tripped up?</p>

<p><strong>EDIT:</strong> I moved the search for the python implementation to <a href=""http://stackoverflow.com/questions/172486/what-pure-python-library-to-use-for-aes-256-encryption"">another question</a> to stop clobber...</p>
"
172439,1546,2008-10-05T18:46:27Z,137,How do I split a multi-line string into multiple lines?,"<p>I have a multi-line string literal that I want to do an operation on each line, like so:</p>

<pre><code>inputString = """"""Line 1
Line 2
Line 3""""""
</code></pre>

<p>I want to do something like the following:</p>

<pre><code>for line in inputString:
    doStuff()
</code></pre>
"
172720,145,2008-10-05T21:46:00Z,39,Speeding Up Python,"<p>This is really two questions, but they are so similar, and to keep it simple, I figured I'd just roll them together:</p>

<ul>
<li><p><strong>Firstly</strong>: Given an established python project, what are some decent ways to speed it up beyond just plain in-code optimization?</p></li>
<li><p><strong>Secondly</strong>:  When writing a program from scratch in python, what are some good ways to greatly improve performance?</p></li>
</ul>

<p>For the first question, imagine you are handed a decently written project and you need to improve performance, but you can't seem to get much of a gain through refactoring/optimization.  What would you do to speed it up in this case short of rewriting it in something like C?</p>
"
173246,18406,2008-10-06T05:07:19Z,12,"Parsing and generating Microsoft Office 2007 files (.docx, .xlsx, .pptx)","<p>I have a web project where I must import text and images from a user-supplied document, and one of the possible formats is Microsoft Office 2007. There's also a need to generate documents in this format.</p>

<p>The server runs CentOS 5.2 and has PHP/Perl/Python installed. I can execute local binaries and shell scripts if I must. We use Apache 2.2 but will be switching over to Nginx once it goes live. </p>

<p>What are my options? Anyone had experience with this?</p>
"
173278,2168,2008-10-06T05:40:13Z,33,Is there a way to prevent a SystemExit exception raised from sys.exit() from being caught?,"<p>The docs say that calling sys.exit() raises a SystemExit exception which can be caught in outer levels.  I have a situation in which I want to definitively and unquestionably exit from inside a test case, however the unittest module catches SystemExit and prevents the exit.  This is normally great, but the specific situation I am trying to handle is one where our test framework has detected that it is configured to point to a non-test database.  In this case I want to exit and prevent any further tests from being run.  Of course since unittest traps the SystemExit and continues happily on it's way, it is thwarting me.</p>

<p>The only option I have thought of so far is using ctypes or something similar to call   exit(3) directly but this seems like a pretty fugly hack for something that should be really simple.</p>
"
173290,17085,2008-10-06T05:53:32Z,17,python dictionary update method,"<p>I have a list string tag.</p>

<p>I am trying to initialize a dictionary with the key as the tag string and values as the array index.</p>

<pre><code>for i, ithTag in enumerate(tag):
    tagDict.update(ithTag=i)
</code></pre>

<p>The above returns me {'ithTag': 608}  <em>608 is the 608th index</em></p>

<p>My problem is that while the i is being interpreted as a variable, Python is treating the ""ithTag"" as a string instead of a variable.</p>

<p>I'm confused, it is kind of hard to google these kind of specific questions.  I hope I worded the title of this question correctly,</p>

<p>Thanks!</p>
"
173484,24039,2008-10-06T07:37:30Z,10,Does anyone have experience with PyS60 mobile development,"<p>I am in the position of having to make a technology choice early in a project which is targetted at mobile phones.  I saw that there is a python derivative for S60 and wondered whether anyone could share experiences, good and bad, and suggest appropriate IDE's and emulators.</p>

<p>Please don't tell me that I should be developing on Windows Mobile, I have already decided not to do that so will mark those answers down.</p>
"
173687,18676,2008-10-06T09:31:40Z,23,Is it possible to pass arguments into event bindings?,"<p>I haven't found an answer elsewhere and this doesn't appear to have been asked yet on SO.</p>

<p>When creating an event binding in wxPython, is it possible to pass additional arguments to the event? For example, this is the normal way:</p>

<pre><code>b = wx.Button(self, 10, ""Default Button"", (20, 20))
        self.Bind(wx.EVT_BUTTON, self.OnClick, b)
def OnClick(self, event):
        self.log.write(""Click! (%d)\n"" % event.GetId())
</code></pre>

<p>But is it possible to have another argument passed to the method? Such that the method can tell if more than one widget is calling it but still return the same value? </p>

<p>It would greatly reduce copy &amp; pasting the same code but with different callers.</p>
"
173905,25454,2008-10-06T11:11:05Z,4,How do I blink/control Macbook keyboard LEDs programmatically?,"<p>Do you know how I can switch on/off (blink) Macbook keyboard led (caps lock,numlock) under Mac OS X (preferably Tiger)?</p>

<p>I've googled for this, but have got no results, so I am asking for help.</p>

<p>I would like to add this feature as notifications (eg. new message received on Adium, new mail received).</p>

<p>I would prefer applescript, python, but if it's impossible, any code would be just fine.</p>

<p>I will appreciate any kind of guidance.</p>
"
174170,15539,2008-10-06T13:02:03Z,7,Python - Py2exe can't build .exe using the 'email' module,"<p>py2exe does not work with the standard email module</p>

<p>Hello. I am trying to use py2exe for converting a script into an exe. The build process shows this:</p>

<p><hr /></p>

<p>The following modules appear to be missing</p>

<h2>['email.Encoders', 'email.Generator', 'email.Iterators', 'email.MIMEBase', 'email.MIMEMultipart', 'email.MIMEText', 'email.Utils', 'email.base64MIME']</h2>

<p>The executable does not work. The referenced modules are not included. I researched this on the Internet and I found out that py2exe has a problem with the Lazy import used in the standard lib email module. Unfortunately I have not succeeded in finding a workaround for this problem. Can anyone help?</p>

<p>Thank you,</p>

<p>P.S.
Imports in the script look like this:</p>

<p>Code: Select all
    import string,time,sys,os,smtplib
    from email.MIMEMultipart import MIMEMultipart
    from email.MIMEBase import MIMEBase
    from email.MIMEText import MIMEText
    from email import Encoders</p>
"
174853,140995,2008-10-06T15:47:59Z,8,What is the best way to run multiple subprocesses via fork()?,"<p>A python script need to spawn multiple sub-processes via fork(). All of those child processes  should run simultaneously and the parent process should be waiting for all of them to finish. Having an ability to set some timeout on a ""slow"" child would be nice.
The parent process goes on processing the rest of the script after all kids are collected.</p>

<p>What is the best way to work it out? Thanks. </p>
"
174890,15109,2008-10-06T15:56:07Z,26,How to output CDATA using ElementTree,"<p>I've discovered that cElementTree is about 30 times faster than <code>xml.dom.minidom</code> and I'm rewriting my XML encoding/decoding code. However, I need to output XML that contains CDATA sections and there doesn't seem to be a way to do that with ElementTree.</p>

<p>Can it be done?</p>
"
175240,4872,2008-10-06T17:11:30Z,18,How do I convert a file's format from Unicode to ASCII using Python?,"<p>I use a 3rd party tool that outputs a file in Unicode format.  However, I prefer it to be in ASCII. The tool does not have settings to change the file format.</p>

<p>What is the best way to convert the entire file format using Python?</p>
"
175544,25587,2008-10-06T18:21:53Z,2,writing optimization function,"<p>I'm trying to write a tennis reservation system and I got stucked with this problem.
Let's say you have players with their prefs regarding court number, day and hour.
Also every player is ranked so if there is day/hour slot and there are several players
with preferences for this slot the one with top priority should be chosen.
I'm thinking about using some optimization algorithms to solve this problem but I'am not sure what would be the best cost function and/or algorithm to use.
Any advice? 
One more thing I would prefer to use Python but some language-agnostic advice would be welcome also.
Thanks!</p>

<p>edit:</p>

<p>some clarifications-</p>

<p>the one with better priority wins and loser is moved to nearest slot,
rather flexible time slots question
yes, maximizing the number of people getting their most highly preffered times </p>
"
176011,16148,2008-10-06T20:17:43Z,195,Python List vs. Array - when to use?,"<p>If you are creating a 1d array, you can implement it as a List, or else use the 'array' module in the standard library.  I have always used Lists for 1d arrays.</p>

<p>What is the reason or circumstance where I would want to use the array module instead?</p>

<p>Is it for performance and memory optimization, or am I missing something obvious?</p>
"
176179,20321,2008-10-06T21:03:55Z,4,"Writing a reliable, totally-ordered multicast system in Python","<p>I have to write a reliable, totally-ordered multicast system from scratch in Python. I can't use any external libraries.  I'm allowed to use a central sequencer.</p>

<p>There seems to be two immediate approaches:</p>

<ol>
<li>write an efficient system, attaching a unique id to each multicasted message,
having the sequencer multicast sequence numbers for the message id's it receives,
and sending back and forth ACK's and NACK's.</li>
<li>write an inefficient flooding system, where each multicaster simply re-sends each
message it receives once (unless it was sent by that particular multicaster.)</li>
</ol>

<p>I'm allowed to use the second option, and am inclined to do so.</p>

<p>I'm currently multicasting UDP messages (which seems to be the only option,) but that means that some messages might get lost. That means I have to be able to uniquely identify each sent UDP message, so that it can be re-sent according to #2.  Should I really generate unique numbers (e.g. using the sender address and a counter) and pack them into each and every UDP message sent? How would I go about doing that?  And how do I receive a single UDP message in Python, and not a stream of data (i.e. <code>socket.recv</code>)?</p>
"
176213,23034,2008-10-06T21:10:44Z,7,Building a full text search engine: where to start,"<p>I want to write a web application using <a href=""http://code.google.com/appengine/"">Google App Engine</a> (so the reference language would be <strong>Python</strong>). My application needs a simple search engine, so the users would be able to find data specifying keywords.</p>

<p>For example, if I have one table with those rows:</p>

<blockquote>
  <p>1 Office space<br> 2 2001: A space
  odyssey<br> 3 Brazil</p>
</blockquote>

<p>and the user queries for ""space"", rows 1 and 2 would be returned. If the user queries for ""office space"", the result should be rows 1 and 2 too (row 1 first).</p>

<p>What are the technical guidelines/algorithms to do this in a simple way?<br>
Can you give me good pointers to the theory behind this?<br></p>

<p>Thanks.</p>

<p><em>Edit</em>: I'm not looking for anything complex here (say, indexing tons of data).</p>
"
176918,25680,2008-10-07T01:39:38Z,1222,Finding the index of an item given a list containing it in Python,"<p>For a list <code>[""foo"", ""bar"", ""baz""]</code> and an item in the list <code>""bar""</code>, what's the cleanest way to get its index (1) in Python?</p>
"
176955,2025531,2008-10-07T01:53:38Z,3,Offline access to MoinMoin wiki using Google Gears,"<p>How to add offline access functionality to <a href=""http://moinmo.in"" rel=""nofollow"">MoinMoin wiki</a>?</p>

<p>As a minimum, I would love to have browsing access to all pages on a server-based wiki  (while being offline). Search and other things, which do not modify the content, are secondary. An added bonus would be if this solution allowed to update wiki content while offline and push it back to the wiki when online.</p>

<p>Google Gears looks like a good candidate for trying to solve this, but other solutions are also welcome.</p>

<p>An interesting property of MoinMoin is that it keeps content in regular files instead of the database. This can make it easier to port wiki content from one location to another, but I don't know if that can play any role in answering this question.</p>

<p>Note: if you see a good reply please rate it up. i'd love to do that, but the site does not let me do ratings yet.</p>
"
177284,11596,2008-10-07T05:06:31Z,1,SQL Absolute value across columns,"<p>I have a table that looks something like this:</p>

<pre>
word        big   expensive   smart   fast

dog         9     -10         -20     4
professor   2     4           40      -7
ferrari     7     50          0       48
alaska      10    0           1       0
gnat        -3    0           0       0
</pre>

<p>The + and - values are associated with the word, so professor is smart and dog is not smart.  Alaska is big, as a proportion of the total value associated with its entries, and the opposite is true of gnat.</p>

<p>Is there a good way to get the absolute value of the number farthest from zero, and some token whether absolute value =/= value?  Relatedly, how might I calculate whether the results for a given value are proportionately large with respect to the other values?  I would write something to format the output to the effect of: ""dog: not smart, probably not expensive; professor smart; ferrari: fast, expensive; alaska: big; gnat: probably small."" (The formatting is not a question, just an illustration, I am stuck on the underlying queries.)  </p>

<p>Also, the rest of the program is python, so if there is any python solution with normal dbapi modules or a more abstract module, any help appreciated.</p>
"
177287,115,2008-10-07T05:08:36Z,16,Alert boxes in Python?,"<p>Is it possible to produce an alert similar to JavaScript's alert(""message"") in python, with an application running as a daemon.</p>

<p>This will be run in Windows, Most likely XP but 2000 and Vista are also very real possibilities.</p>

<p>Update:<br />
This is intended to run in the background and alert the user when certain conditions are met, I figure that the easiest way to alert the user would be to produce a pop-up, as it needs to be handled immediately, and other options such as just logging, or sending an email are not efficient enough.</p>
"
177389,115,2008-10-07T06:30:19Z,17,Testing socket connection in Python,"<p>This question will expand on: <a href=""http://stackoverflow.com/questions/68774/best-way-to-open-a-socket-in-python"">http://stackoverflow.com/questions/68774/best-way-to-open-a-socket-in-python</a><br />
When opening a socket how can I test to see if it has been established, and that it did not timeout, or generally fail.
<br /><br />
Edit:
I tried this:</p>

<pre><code>try:
    s.connect((address, '80'))
except:
    alert('failed' + address, 'down')
</code></pre>

<p>but the alert function is called even when that connection should have worked.</p>
"
177492,9622,2008-10-07T07:33:58Z,5,Keeping filters in Django Admin,"<p>What I would like to achive is: </p>

<ul>
<li>I go to admin site, apply some filters to the list of objects</li>
<li>I click and object edit, edit, edit, hit 'Save'</li>
<li>Site takes me to the list of objects... unfiltered. I'd like to have the filter from step 1 remembered and applied.</li>
</ul>

<p>Is there an easy way to do it?</p>
"
177910,5821,2008-10-07T10:43:22Z,4,Accessing python egg's own metadata,"<p>I've produced a python egg using setuptools and would like to access it's metadata at runtime. I currently got working this:</p>

<pre><code>import pkg_resources
dist = pkg_resources.get_distribution(""my_project"")
print(dist.version)
</code></pre>

<p>but this would probably work incorrectly if I had multiple versions of the same egg installed. And if I have both installed egg and development version, then running this code from development version would pick up version of the installed egg. </p>

<p>So, how do I get metadata for <em>my</em> egg not some random matching egg installed on my system? </p>
"
178199,115,2008-10-07T12:25:25Z,13,Python: can I have a list with named indices?,"<p>In PHP I can name my array indicies so that I may have something like:</p>

<pre><code>$shows = Array(0 =&gt; Array('id' =&gt; 1, 'name' =&gt; 'Sesaeme Street'), 
               1 =&gt; Array('id' =&gt; 2, 'name' =&gt; 'Dora The Explorer'));
</code></pre>

<p>Is this possible in Python?</p>
"
178300,11563,2008-10-07T12:56:40Z,0,Paver 0.8.1 compatibility with python 2.6,"<p>Does anyone manage to bootstrap its development area using paver with python 2.6 ?</p>

<p>I have install python 2.6, install paver with easy_install-2.6, everything looks fine.
But when I try to launch the bootstrap method it raises an urllib2.HTTPError (: HTTP Error 404: Not Found) while trying to download <a href=""http://pypi.python.org/packages/2.6/s/setuptools/setuptools-0.6c8-py2.6.egg"" rel=""nofollow"">http://pypi.python.org/packages/2.6/s/setuptools/setuptools-0.6c8-py2.6.egg</a>.
I have tryed to add the correct setuptools EGG file (which is 0.6c9) in the support-files directory, bootstrap.py find the EGG file, but doesn't seem to use it because it still try to download the 0.6c8 version which is no more available.</p>

<p>Any ideas how to solve this issue ?</p>

<p>Thanks in advance </p>

<p>Bertrand</p>
"
178458,12126,2008-10-07T13:34:42Z,10,"Python, unit-testing and mocking imports","<p>I am in a project where we are starting refactoring some massive code base. One problem that immediately sprang up is that each file imports a lot of other files. How do I in an elegant way mock this in my unit test without having to alter the actual code so I can start to write unit-tests?</p>

<p>As an example: The file with the functions I want to test, imports ten other files which is part of our software and not python core libs.</p>

<p>I want to be able to run the unit tests as separately as possible and for now I am only going to test functions that does not depend on things from the files that are being imported.</p>

<p>Thanks for all the answers. </p>

<p>I didn't really know what I wanted to do from the start but now I think I know. </p>

<p>Problem was that some imports was only possible when the whole application was running because of some third-party auto-magic. So I had to make some stubs for these modules in a directory which I pointed out with sys.path</p>

<p>Now I can import the file which contains the functions I want to write tests for in my unit-test file without complaints about missing modules.</p>
"
179026,17732,2008-10-07T15:24:59Z,9,How do I perform an IMAP search in Python (using Gmail and imaplib)?,"<p>In Gmail, I have a bunch of labeled messages.</p>

<p>I'd like to use an IMAP client to get those messages, but I'm not sure what the search incantation is.</p>

<pre><code>c = imaplib.IMAP4_SSL('imap.gmail.com')
c.list()
('OK', [..., '(\\HasNoChildren) ""/"" ""GM""', ...])
c.search(???)
</code></pre>

<p>I'm not finding many examples for this sort of thing.</p>
"
179287,4872,2008-10-07T16:23:52Z,4,What is the best way to change text contained in an XML file using Python?,"<p>Let's say I have an existing trivial XML file named 'MyData.xml' that contains the following:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8"" ?&gt;
&lt;myElement&gt;foo&lt;/myElement&gt;
</code></pre>

<p>I want to change the text value of 'foo' to 'bar' resulting in the following:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8"" ?&gt;
&lt;myElement&gt;bar&lt;/myElement&gt;
</code></pre>

<p>Once I am done, I want to save the changes.  </p>

<p>What is the easiest and simplest way to accomplish all this?</p>
"
179716,1155,2008-10-07T18:18:48Z,2,Average difference between dates in Python,"<p>I have a series of datetime objects and would like to calculate the average delta between them.</p>

<p>For example, if the input was <code>(2008-10-01 12:15:00, 2008-10-01 12:25:00, 2008-10-01 12:35:00)</code>, then the average delta would be exactly 00:10:00, or 10 minutes.</p>

<p>Any suggestions on how to calculate this using Python?</p>
"
179985,267,2008-10-07T19:34:13Z,1,Python class factory ... or?,"<p>We have a database library in C# that we can use like this:</p>

<pre><code>DatabaseConnection conn = DatabaseConnection.FromConnectionString(""..."");
</code></pre>

<p>This library hides many of the differences between different database engines, like SQL function names, parameter names and specifications, etc.</p>

<p>Internally, the <code>DatabaseConnection</code> class is an abstract class implementing some of the basic methods, but the <code>FromConnectionString</code> method runs through a list of registered specialized types that handles the actual differences, and constructs an object of the right class. In other words, I don't get a DatabaseConnection object back, I get a MSSQLDatabaseConnection or OracleDatabaseConnection object back instead, which of course inherit from DatabaseConnection.</p>

<p>The connection string contains information about what kind of database engine and version this connection is for.</p>

<p>I'd like to create a similar library in Python. Is the right approach to make something that can be constructed like this?</p>

<pre><code>conn = DatabaseConnection(""..."")
</code></pre>

<p>or using a class method?</p>

<pre><code>conn = DatabaseConnection.FromConnectionString(""..."")
</code></pre>

<p>is the first even possible, that is... constructing an object like this and getting back something else, a specialized object, depending on data in the passed string?</p>

<p>Ok, let me ask a different question... What is the <em>pythonic</em> way of doing this?</p>

<p>I basically want to have the DatabaseConnection base class in Python as well, implementing the common methods, and specialize in derived classes, and have a method or function somewhere that based on the connection string constructs and returns the right type of object.</p>
"
180095,24208,2008-10-07T19:53:53Z,40,How to handle a broken pipe (SIGPIPE) in python?,"<p>I've written a simple multi-threaded game server in python that creates a new thread for each client connection.  I'm finding that every now and then, the server will crash because of a broken-pipe/SIGPIPE error.  I'm pretty sure it is happening when the program tries to send a response back to a client that is no longer present.</p>

<p>What is a good way to deal with this?  My preferred resolution would simply close the server-side connection to the client and move on, rather than exit the entire program.</p>

<p>PS: <a href=""http://stackoverflow.com/questions/108183/how-to-prevent-sigpipes-or-handle-them-properly"">This</a> question/answer deals with the problem in a generic way; how specifically should I solve it?</p>
"
180606,19074,2008-10-07T21:51:01Z,31,How do I convert a list of ascii values to a string in python?,"<p>I've got a list in a Python program that contains a series of numbers, which are themselves ASCII values.  How do I convert this into a ""regular"" string that I can echo to the screen?</p>
"
180809,23366,2008-10-07T23:23:11Z,40,"In the Django admin interface, is there a way to duplicate an item?","<p>Just wondering if there is an easy way to add the functionality to duplicate an existing listing in the admin interface?</p>

<p>In data entry we have run into a situation where a lot of items share generic data with another item, and to save time it would be very nice to quickly duplicate an existing listing and only alter the changed data. Using a better model structure would be one way of reducing the duplication of the data, but there may be situation where the duplicated data needs to be changed on an individual basis in the future.</p>
"
180986,4766,2008-10-08T00:51:36Z,189,What is the difference between Python's re.search and re.match?,"<p>What is the difference between the <code>search()</code> and <code>match()</code> functions in the <a href=""http://docs.python.org/2/library/re.html"">Python <code>re</code> module</a>?</p>

<p>I've read the <a href=""http://www.python.org/doc/2.5.2/lib/matching-searching.html"">documentation</a> (<a href=""http://docs.python.org/2/library/re.html?highlight=matching%20searching#search-vs-match"">current documentation</a>), but I never seem to remember it.  I keep having to look it up and re-learn it.  I'm hoping that someone will answer it clearly with examples so that (perhaps) it will stick in my head.  Or at least I'll have a better place to return with my question and it will take less time to re-learn it.</p>
"
181530,8206,2008-10-08T06:19:07Z,270,Python style: multiple-line conditions in IFs,"<p>Sometimes I break long conditions in IFs to several lines. The most obvious way to do this is:</p>

<pre><code>  if (cond1 == 'val1' and cond2 == 'val2' and
      cond3 == 'val3' and cond4 == 'val4'):
      do_something
</code></pre>

<p>Isn't very very appealing visually, because the action blends with the conditions. However, it is the natural way using correct Python indentation of 4 spaces.</p>

<p>For the moment I'm using:</p>

<pre><code>  if (    cond1 == 'val1' and cond2 == 'val2' and
          cond3 == 'val3' and cond4 == 'val4'):
      do_something
</code></pre>

<p>But this isn't very pretty. :-)</p>

<p>Can you recommend an alternative way ?</p>
"
181543,24530,2008-10-08T06:27:12Z,47,What is the problem with reduce()?,"<p>There seems to be a lot of heated discussion on the net about the changes to the reduce() function in python 3.0 and how it should be removed. I am having a little difficulty understanding why this is the case; I find it quite reasonable to use it in a variety of cases. If the contempt was simply subjective, I cannot imagine that such a large number of people would care about it. </p>

<p>What am I missing? What is the problem with reduce()?</p>
"
181556,8206,2008-10-08T06:34:21Z,4,py2exe including MSVC DLLs in the .exe,"<p>When using py2exe to distribute Python applications with wxPython, some MSVC DLLs are usually needed to make the .exe work on freshly installed machines. In particular, the two most common DLLs are msvcp71.dll and msvcr71.dll</p>

<p>The former can be included in the .exe using <a href=""http://www.py2exe.org/index.cgi/OverridingCriteraForIncludingDlls"" rel=""nofollow"">this tip</a>. However, the latter is just placed in the <code>dist</code> dir by py2exe and not into the executable, even if I specifically ask to include it.</p>

<p>Any idea how to cause py2exe to include both inside the .exe ?</p>
"
181573,11596,2008-10-08T06:41:18Z,2,wxPython: displaying multiple widgets in same frame,"<p>I would like to be able to display <code>Notebook</code> and a <code>TxtCtrl</code> wx widgets in a single frame.  Below is an example adapted from the wxpython wiki; is it possible to change their layout (maybe with something like <code>wx.SplitterWindow</code>) to display the text box below the <code>Notebook</code> in the same frame?</p>

<pre><code>import wx
import wx.lib.sheet as sheet

class MySheet(sheet.CSheet):
    def __init__(self, parent):
        sheet.CSheet.__init__(self, parent)

        self.SetLabelBackgroundColour('#CCFF66')
        self.SetNumberRows(50)
        self.SetNumberCols(50)


class Notebook(wx.Frame):
    def __init__(self, parent, id, title):
        wx.Frame.__init__(self, parent, id, title, size=(600, 600))
        menubar = wx.MenuBar()
        file = wx.Menu()
        file.Append(101, 'Quit', '' )
        menubar.Append(file, ""&amp;File"")
        self.SetMenuBar(menubar)
        wx.EVT_MENU(self, 101, self.OnQuit)
        nb = wx.Notebook(self, -1, style=wx.NB_BOTTOM)
        self.sheet1 = MySheet(nb)
        self.sheet2 = MySheet(nb)
        self.sheet3 = MySheet(nb)
        nb.AddPage(self.sheet1, ""Sheet1"")
        nb.AddPage(self.sheet2, ""Sheet2"")
        nb.AddPage(self.sheet3, ""Sheet3"")
        self.sheet1.SetFocus()
        self.StatusBar()

    def StatusBar(self):
        self.statusbar = self.CreateStatusBar()

    def OnQuit(self, event):
        self.Close()


class MyFrame(wx.Frame):
    def __init__(self, parent, id, title):
        wx.Frame.__init__(self, parent, id, title, wx.DefaultPosition, wx.Size(450, 400))
        self.text = wx.TextCtrl(self, -1, style = wx.TE_MULTILINE)
        self.Center()

class MyApp(wx.App):
    def OnInit(self):
        frame = Notebook(None, -1, 'notebook.py')
        frame.Show(True)
        frame.Center()
        frame2 = MyFrame(None, -1, '')
        frame2.Show(True)
        self.SetTopWindow(frame2)
        return True


app = MyApp(0)
app.MainLoop()
</code></pre>
"
181648,3355,2008-10-08T07:21:19Z,3,Problem opening berkeley db in python,"<p>I have problems opening a berkeley db in python using bdtables. As bdtables is used by the library I am using to access the database, I need it to work.</p>

<p>The problem seems to be that the db environment I am trying to open (I got a copy of the database to open), is version 4.4 while libdb is version 4.6. I get the following error using bsddb.dbtables.bsdTableDB([dbname],[folder]):</p>

<pre><code>(-30972, ""DB_VERSION_MISMATCH: Database environment version mismatch -- Program version 4.6 doesn't match environment version 4.4"")
</code></pre>

<p>However, bsddb.btopen([dbname]) works.</p>

<p>I have also tried installing db4.4-util, db4.5-util and db4.6-util. Trying to use db4.6_verify results in:</p>

<pre><code>db4.6_verify: Program version 4.6 doesn't match environment version 4.4
db4.6_verify: DB_ENV-&gt;open: DB_VERSION_MISMATCH: Database environment version mismatchs
</code></pre>

<p>db4.4_verify results in the computer just hanging, and nothing happening.</p>

<p>Finally, if I run db4.4_recover on the database, that works. However, afterwards I get the following error 'No such file or directory' in python.</p>
"
181724,18676,2008-10-08T07:49:01Z,5,When to use the Python debugger,"<p>Since Python is a dynamic, interpreted language you don't have to compile your code before running it. Hence, it's very easy to simply write your code, run it, see what problems occur, and fix them. Using hotkeys or macros can make this incredibly quick.</p>

<p>So, because it's so easy to immediately see the output of your program and any errors that may occur, I haven't uses a debugger tool yet. What situations may call for using a real debugger vs. the method I currently use?</p>

<p>I'd like to know before I get into a situation and get frustrated because I don't know how to fix the problem.</p>
"
181818,15371,2008-10-08T08:26:14Z,3,How do I turn an RSS feed back into RSS?,"<p>According to the <a href=""http://feedparser.org/docs/introduction.html"" rel=""nofollow"">feedparser documentation</a>, I can turn an RSS feed into a parsed object like this:</p>

<pre><code>import feedparser
d = feedparser.parse('http://feedparser.org/docs/examples/atom10.xml')
</code></pre>

<p>but I can't find anything showing how to go the other way; I'd like to be able do manipulate 'd' and then output the result as XML:</p>

<pre><code>print d.toXML()
</code></pre>

<p>but there doesn't seem to be anything in feedparser for going in that direction.  Am I going to have to loop through d's various elements, or is there a quicker way?</p>
"
181994,4966,2008-10-08T09:59:55Z,1,Code to verify updates from the Google Safe Browsing API,"<p>In order to verify the data coming from the <a href=""http://code.google.com/apis/safebrowsing/developers_guide.html"" rel=""nofollow"">Google Safe Browsing API</a>, you can calculate a Message Authentication Code (MAC) for each update.  The instructions to do this (from Google) are:</p>

<blockquote>
  <p>The MAC is computed from an MD5 Digest
  over the following information:
  client_key|separator|table
  data|separator|client_key. The
  separator is the string:coolgoog: -
  that is a colon followed by ""coolgoog""
  followed by a colon. The resulting
  128-bit MD5 digest is websafe base-64
  encoded.</p>
</blockquote>

<p>There's also example data to check against:</p>

<pre><code>client key: ""8eirwN1kTwCzgWA2HxTaRQ==""
</code></pre>

<p>response:</p>

<pre><code>[goog-black-hash 1.180 update][mac=dRalfTU+bXwUhlk0NCGJtQ==]
+8070465bdf3b9c6ad6a89c32e8162ef1   
+86fa593a025714f89d6bc8c9c5a191ac
+bbbd7247731cbb7ec1b3a5814ed4bc9d
*Note that there are tabs at the end of each line.
</code></pre>

<p>I'm unable to get a match.  Please either point out where I'm going wrong, or just write the couple of lines of Python code necessary to do this!</p>

<p>FWIW, I expected to be able to do something like this:</p>

<pre><code>&gt;&gt;&gt; s = ""+8070465bdf3b9c6ad6a89c32e8162ef1\t\n+86fa593a025714f89d6bc8c9c5a191ac\t\n+bbbd7247731cbb7ec1b3a5814ed4bc9d\t""
&gt;&gt;&gt; c = ""8eirwN1kTwCzgWA2HxTaRQ==""
&gt;&gt;&gt; hashlib.md5(""%s%s%s%s%s"" % (c, "":coolgoog:"", s, "":coolgoog:"", c)).digest().encode(""base64"")
'qfb50mxpHrS82yTofPkcEg==\n'
</code></pre>

<p>But as you can see, 'qfb50mxpHrS82yTofPkcEg==\n' != 'dRalfTU+bXwUhlk0NCGJtQ=='.</p>
"
182053,NA,2008-10-08T10:29:28Z,3,Setup Python enviroment on windows,"<p>How do I setup a Python enviroment on windows computer so I can start writing and running Python scripts, is there an install bundle?  Also which database should i use?</p>

<p>Thanks</p>

<p><hr /></p>

<p>Sorry I should of mentioned that I am using this for web based applications. Does it require apache? or does it use another http server? What is the standard setup for Python running web apps?</p>
"
182197,15369,2008-10-08T11:12:55Z,197,How do I watch a file for changes using Python?,"<p>I have a log file being written by another process which I want to watch for changes. Each time a change occurrs I'd like to read the new data in to do some processing on it.</p>

<p>What's the best way to do this? I was hoping there'd be some sort of hook from the PyWin32 library. I've found the <code>win32file.FindNextChangeNotification</code> function but have no idea how to ask it to watch a specific file.</p>

<p>If anyone's done anything like this I'd be really grateful to hear how...</p>

<p><strong>[Edit]</strong> I should have mentioned that I was after a solution that doesn't require polling.</p>

<p><strong>[Edit]</strong> Curses! It seems this doesn't work over a mapped network drive. I'm guessing windows doesn't 'hear' any updates to the file the way it does on a local disk.</p>
"
182229,15616,2008-10-08T11:23:54Z,7,What do I need to import to gain access to my models?,"<p>I'd like to run a script to populate my database. I'd like to access it through the Django database API.</p>

<p>The only problem is that I don't know what I would need to import to gain access to this.</p>

<p>How can this be achieved?</p>
"
182253,9951,2008-10-08T11:32:16Z,5,Os.path : can you explain this behavior?,"<p>I love Python because it comes batteries included, and I use built-in functions, a lot, to do the dirty job for me.</p>

<p>I have always been using happily the os.path module to deal with file path but recently I ended up with unexpected results on Python 2.5 under Ubuntu linux, while dealing with string that represent windows file paths :</p>

<pre><code>filepath = r""c:\ttemp\FILEPA~1.EXE""
print os.path.basename(filepath)
'c:\\ttemp\\FILEPA~1.EXE']
print os.path.splitdrive(filepath)
('', 'c:\ttemp\\FILEPA~1.EXE')
</code></pre>

<p>WTF ?</p>

<p>It ends up the same way with filepath = u""c:\ttemp\FILEPA~1.EXE"" and filepath = ""c:\ttemp\FILEPA~1.EXE"".</p>

<p>Do you have a clue ? Ubuntu use UTF8 but I don't feel like it has something to do with it. Maybe my Python install is messed up but I did not perform any particular tweak on it that I can remember.</p>
"
183042,7883,2008-10-08T14:26:20Z,26,How can I use UUIDs in SQLAlchemy?,"<p>Is there a way to define a column (primary key) as a <a href=""https://en.wikipedia.org/wiki/Universally_unique_identifier"">UUID</a> in <a href=""http://www.sqlalchemy.org/"">SQLAlchemy</a> if using <a href=""http://www.postgresql.org/"">PostgreSQL</a> (Postgres)?</p>
"
183480,26196,2008-10-08T15:50:21Z,13,Is this the best way to get unique version of filename w/ Python?,"<p>Still 'diving in' to Python, and want to make sure I'm not overlooking something. I wrote a script that extracts files from several zip files, and saves the extracted files together in one directory. To prevent duplicate filenames from being over-written, I wrote this little function - and I'm just wondering if there is a better way to do this?
Thanks!</p>

<pre><code>def unique_filename(file_name):
counter = 1
file_name_parts = os.path.splitext(file_name) # returns ('/path/file', '.ext')
while os.path.isfile(file_name): 
    file_name = file_name_parts[0] + '_' + str(counter) + file_name_parts[1]
    counter += 1
return file_name
</code></pre>

<p>I really <em>do</em> require the files to be in a single directory, and numbering duplicates is definitely acceptable in my case, so I'm not looking for a more robust method (tho' I suppose any pointers are welcome), but just to make sure that what this accomplishes is getting done the right way.</p>
"
183853,4872,2008-10-08T17:16:35Z,144,"In Python, what is the difference between '/' and '//' when used for division?","<p>Is there a benefit to using one over the other? They both seem to return the same results.</p>

<pre><code>&gt;&gt;&gt; 6/3
2
&gt;&gt;&gt; 6//3
2
</code></pre>
"
184049,26235,2008-10-08T18:07:42Z,2,Framework/Language for new web 2.0 sites (2008 and 2009),"<p>I know I'll get a thousand ""Depends on what you're trying to do"" answers, but seriously, there really is no solid information about this online yet.  Here are my assumptions - I think they're similar for alot of people right now:</p>

<ol>
<li>It is now October 2008.  I want to start writing an application for January 2009.  I am willing to use beta code and such but by January, I'd like a site that doesn't have 'strange' problems.  With that said, if a language is simply 10% slower than another, I don't care about those things as long as the issue is linear.  My main concern is developer productivity.</li>
<li>I'll be using Linux, Apache, MySQL for the application.</li>
<li>I want the power to do things like run scp and ftp client functions with stable libraries (I only picked those two because they're not web-related but at the same time represent pretty common network protocols that any larger app might use).  Technologies like OpenID and Oauth will be used as well.</li>
<li>Experienced web developers are readily available (i.e. I don't have to find people from financial companies and such).</li>
<li>Whatever the choice is is common and will be around for a while.</li>
<li>Here's a kicker.  I'd like to be able to use advanced presentation layer tools/languages similar to HAML, SASS.  I definitively want to use JQuery.</li>
<li>I will be creating a Facebook app and at some point doing things like dealing with SMS messages, iPhone apps, etc...</li>
</ol>

<p>At this point, the choices for language are PHP (Cake,Symfony,Zend), Python (Django), Ruby (Merb).  I'm really between Django and Merb at this point mostly because everybody else seems to be going that way.  </p>

<p>Please don't put any technologies in here that aren't made for mainstream.  I know Merb is untested mostly, but their stated goal is a solid platform and it has alot of momentum behind it so I'm confident that it's workable.  Please don't answer with how great Perl is or .Net.</p>

<p>For Future References - these choices were already made:</p>

<ul>
<li>Debian (Lenny) - For converting CPU cycles into something useful. Trac</li>
<li>0.11 - For Project Management Gliffy - For wireframes and such </li>
<li>Google Docs/Apps - For documentation, hosted email, etc... </li>
<li>Amazon ec2/S3 - For hosting, storage.</li>
</ul>

<p>Cheers,
Adam   </p>
"
184187,852,2008-10-08T18:33:08Z,13,How do I check out a file from perforce in python?,"<p>I would like to write some scripts in python that do some automated changes to source code. If the script determines it needs to change the file I would like to first check it out of perforce. I don't care about checking in because I will always want to build and test first. </p>
"
185378,4872,2008-10-08T23:42:27Z,9,Regular expression to match start of filename and filename extension,"<p>What is the regular expression to match strings (in this case, file names) that start with 'Run' and have a filename extension of '.py'?</p>

<p>The regular expression should match any of the following:</p>

<pre><code>RunFoo.py
RunBar.py
Run42.py
</code></pre>

<p>It should not match:</p>

<pre><code>myRunFoo.py
RunBar.py1
Run42.txt
</code></pre>

<p>The SQL equivalent of what I am looking for is <code>... LIKE 'Run%.py' ...</code>.</p>
"
185389,22404,2008-10-08T23:46:30Z,2,MVC model structure in Python,"<p>I'm having problems structuring classes in the Model part of an MVC pattern in my Python app. No matter how I turn things, I keep running into circular imports. Here's what I have:</p>

<p><strong>Model/__init__p.y</strong></p>

<ul>
<li>should hold all Model class names so
I can do a ""from Model import User""
e.g. from a Controller or a unit
test case</li>
</ul>

<p><strong>Model/Database.py</strong> </p>

<ul>
<li>holds Database class</li>
<li>needs to import all Model classes to do ORM</li>
<li>initialization should be performed on first module import, i.e. no extra init calls or instantiations (all methods on Database class are @classmethods)</li>
</ul>

<p><strong>Model/User.py</strong></p>

<ul>
<li>contains User model class</li>
<li>needs access to Database class to do queries</li>
<li>should inherit from base class common to all Model classes to share functionality (database persistency methods, parameter validation code etc.)</li>
</ul>

<p>I have yet to see a real world Python app employing MVC, so my approach is probably un-Pythonic (and possibly a language-agnostic mess on top of that...) - any suggestions on how to solve this?</p>

<p>Thanks, Simon</p>
"
185936,115,2008-10-09T04:22:33Z,171,Delete Folder Contents in Python,"<p>How can I delete the contents of a local folder in Python?</p>

<p>The current project is for Windows but I would like to see *nix also.</p>
"
186131,8206,2008-10-09T06:28:26Z,2,Extracting unique items from a list of mappings,"<p>He're an interesting problem that looks for the most Pythonic solution. Suppose I have a list of mappings <code>{'id': id, 'url': url}</code>. Some <code>id</code>s in the list are duplicate, and I want to create a new list, with all the duplicates removed. I came up with the following function:</p>

<pre><code>def unique_mapping(map):
    d = {}
    for res in map:
        d[res['id']] = res['url']

    return [{'id': id, 'url': d[id]} for id in d]
</code></pre>

<p>I suppose it's quite efficient. But is there a ""more Pythonic"" way ? Or perhaps a more efficient way ?</p>
"
186202,19166,2008-10-09T06:58:54Z,29,What is the best way to open a file for exclusive access in Python?,"<p>What is the most elegant way to solve this:</p>

<ul>
<li>open a file for reading, but only if it is not already opened for writing</li>
<li>open a file for writing, but only if it is not already opened for reading or writing</li>
</ul>

<p>The built-in functions work like this</p>

<pre><code>&gt;&gt;&gt; path = r""c:\scr.txt""
&gt;&gt;&gt; file1 = open(path, ""w"")
&gt;&gt;&gt; print file1
&lt;open file 'c:\scr.txt', mode 'w' at 0x019F88D8&gt;
&gt;&gt;&gt; file2 = open(path, ""w"")
&gt;&gt;&gt; print file2
&lt;open file 'c:\scr.txt', mode 'w' at 0x02332188&gt;
&gt;&gt;&gt; file1.write(""111"")
&gt;&gt;&gt; file2.write(""222"")
&gt;&gt;&gt; file1.close()
</code></pre>

<p>scr.txt now contains '111'.</p>

<pre><code>&gt;&gt;&gt; file2.close()
</code></pre>

<p>scr.txt was overwritten and now contains '222' (on Windows, Python 2.4).</p>

<p>The solution should work inside the same process (like in the example above) as well as when another process has opened the file.<br />
It is preferred, if a crashing program will not keep the lock open.</p>
"
186316,20010,2008-10-09T07:54:12Z,5,Python - How to use Conch to create a Virtual SSH server,"<p>I'm looking at creating a server in python that I can run, and will work as an SSH server. This will then let different users login, and act as if they'd logged in normally, but only had access to one command.</p>

<p>I want to do this so that I can have a system where I can add users to without having to create a system wide account, so that they can then, for example, commit to a VCS branch, or similar.</p>

<p>While I can work out how to do this with conch to get it to a ""custom"" shell... I can't figure out how to make it so that the SSH stream works as if it were a real one (I'm preferably wanting to limit to /bin/bzr so that bzr+ssh will work.</p>

<p>It needs to be in python (which i can get to do the authorisation) but don't know how to do the linking to the app. </p>

<p>This needs to be in python to work within the app its designed for, and to be able to be used for those without access to add new users</p>
"
186472,3594,2008-10-09T09:04:34Z,7,'from X import a' versus 'import X; X.a',"<p>I've seen some Python programmers use the following style fairly consistently (we'll call it style 1):</p>

<pre><code>import some_module
# Use some_module.some_identifier in various places.
</code></pre>

<p>For support of this style, you can cite the <a href=""http://www.python.org/dev/peps/pep-0020/"" rel=""nofollow"">""explicit is better than implicit""</a> maxim. I've seen other programmers use this style (style 2):</p>

<pre><code>from some_module import some_identifier
# Use some_identifier in various places.
</code></pre>

<p>The primary benefit that I see in style 2 is maintainability -- especially with <a href=""http://en.wikipedia.org/wiki/Duck_typing"" rel=""nofollow"">duck typing</a> ideals I may want to swap some_module for some_other_module. I also feel style 2 wins points with the <a href=""http://www.python.org/dev/peps/pep-0020/"" rel=""nofollow"">""readability counts""</a> maxim. Although I tend to disagree, one can always argue that search-and-replace is just as good an option when using the first style.</p>

<p><strong>Addendum:</strong> It was noted that you could use <code>as</code> to solve the switch from <code>some_module</code> to <code>some_other_module</code> in style 1. I forgot to mention that it is also common to decide to implement <code>some_identifier</code> in your <em>current</em> module, which makes creation of an equivalent <code>some_module</code> container slightly awkward.</p>
"
186857,267,2008-10-09T11:38:22Z,56,"Splitting a semicolon-separated string to a dictionary, in Python","<p>I have a string that looks like this:</p>

<pre><code>""Name1=Value1;Name2=Value2;Name3=Value3""
</code></pre>

<p>Is there a built-in class/function in Python that will take that string and construct a dictionary, as though I had done this:</p>

<pre><code>dict = {
    ""Name1"": ""Value1"",
    ""Name2"": ""Value2"",
    ""Name3"": ""Value3""
}
</code></pre>

<p>I have looked through the modules available but can't seem to find anything that matches.</p>

<p><hr /></p>

<p>Thanks, I do know how to make the relevant code myself, but since such smallish solutions are usually mine-fields waiting to happen (ie. someone writes: Name1='Value1=2';) etc. then I usually prefer some pre-tested function.</p>

<p>I'll do it myself then.</p>
"
186916,15622,2008-10-09T11:55:48Z,25,Configuration file with list of key-value pairs in python,"<p>I have a python script that analyzes a set of error messages and checks for each message if it matches a certain pattern (regular expression) in order to group these messages. For example ""file x does not exist"" and ""file y does not exist"" would match ""file .* does not exist"" and be accounted as two occurrences of ""file not found"" category.  </p>

<p>As the number of patterns and categories is growing, I'd like to put these couples ""regular expression/display string"" in a configuration file, basically a dictionary serialization of some sort.</p>

<p>I would like this file to be editable by hand, so I'm discarding any form of binary serialization, and also I'd rather not resort to xml serialization to avoid problems with characters to escape (&amp; &lt;> and so on...).</p>

<p>Do you have any idea of what could be a good way of accomplishing this?</p>

<p>Update: thanks to Daren Thomas and Federico Ramponi, but I cannot have an external python file with possibly arbitrary code.</p>
"
187273,15842,2008-10-09T13:38:32Z,4,Base-2 (Binary) Representation Using Python,"<p>Building on <a href=""http://stackoverflow.com/questions/1476/how-do-you-express-binary-literals-in-python#13107"">How Do You Express Binary Literals in Python</a>, I was thinking about sensible, intuitive ways to do that Programming 101 chestnut of displaying integers in base-2 form.  This is the best I came up with, but I'd like to replace it with a better algorithm, or at least one that should have screaming-fast performance.  </p>

<pre><code>def num_bin(N, places=8):
    def bit_at_p(N, p):
        ''' find the bit at place p for number n '''
        two_p = 1 &lt;&lt; p   # 2 ^ p, using bitshift, will have exactly one
                         # bit set, at place p
        x = N &amp; two_p    # binary composition, will be one where *both* numbers
                         # have a 1 at that bit.  this can only happen 
                         # at position p.  will yield  two_p if  N has a 1 at 
                         # bit p
        return int(x &gt; 0)

    bits =  ( bit_at_p(N,x) for x in xrange(places))
    return """".join( (str(x) for x in bits) )

    # or, more consisely 
    # return """".join([str(int((N &amp; 1 &lt;&lt; x)&gt;0)) for x in xrange(places)])
</code></pre>
"
187434,13990,2008-10-09T14:09:05Z,1,How to make parts of a website under SSL and the rest not?,"<p>I need to create a cherrypy main page that has a login area.  I want the login area to be secure, but the rest of the page should not be so.  How can I do this in CherryPy?</p>

<p>Ideally, any suggestions will be compatible with <a href=""http://tools.cherrypy.org/wiki/AuthenticationAndAccessRestrictions"" rel=""nofollow"">http://tools.cherrypy.org/wiki/AuthenticationAndAccessRestrictions</a></p>

<p>Thanks.</p>
"
187455,115,2008-10-09T14:12:55Z,64,Counting array elements in Python,"<p>How can I count the number of elements in an array, because contrary to logic array.count(string) does not count all the elements in the array, it just searches for the number of occurrences of string.</p>
"
187552,2906,2008-10-09T14:36:02Z,11,How do I capture an mp3 stream with python,"<p>What's the best way of capturing an mp3 stream coming off of http and saving it to disk with python?</p>

<p>Thus far I've tried</p>

<pre><code>target = open(target_path, ""w"")
conn = urllib.urlopen(stream_url)
while True:
    target.write(conn.read(buf_size))
</code></pre>

<p>This gives me data but its garbled or wont play in mp3 players.</p>
"
187621,3045,2008-10-09T14:55:02Z,61,"How to make a python, command-line program autocomplete arbitrary things NOT interpreter","<p>I am aware of how to setup autocompletion of python objects in the python interpreter (on unix).  </p>

<ul>
<li>Google shows many hits for explanations on how to do this.</li>
<li>Unfortunately, there are so many references to that it is difficult to find what I need to do, which is slightly different.</li>
</ul>

<p>I need to know how to enable, tab/auto completion of arbitrary items in a command-line program written in python.</p>

<p>My specific use case is a command-line python program that needs to send emails.  I want to be able to autocomplete email addresses (I have the addresses on disk) when the user types part of it (and optionally presses the TAB key).</p>

<p>I do not need it to work on windows or mac, just linux.</p>
"
188417,5821,2008-10-09T17:58:56Z,0,How to run included tests on deployed pylons application,"<p>I have installed pylons based application from egg, so it sits somewhere under /usr/lib/python2.5/site-packages. I see that the tests are packaged too and I would like to run them (to catch a problem that shows up on deployed application but not on development version). </p>

<p>So how do I run them? Doing ""nosetests"" from directory containing only test.ini and development.ini gives an error about nonexistent test.ini under site-packages.</p>
"
188444,115,2008-10-09T18:06:51Z,15,Reading/Writing MS Word files in Python,"<p>Is it possible to read and write Word (2003 and 2007) files in Python without using a COM object?<br />
I know that I can:</p>

<pre><code>f = open('c:\file.doc', ""w"")
f.write(text)
f.close()
</code></pre>

<p>but Word will read it as an HTML file not a native .doc file.</p>
"
188451,NA,2008-10-09T18:08:53Z,6,Django admin interface inlines placement,"<p>I want to be able to place an inline inbetween two different fields in a fieldset. You can already do this with foreignkeys, I figured that inlining the class I wanted and defining it to get extra forms would do the trick, but apparently I get a:<br />
    ""class x"" has no ForeignKey to ""class y""<br />
error. Is this not something that is supported in Django 1.0? If so, how would I go about fixing the problem, if there isn't a pre-existing solution? </p>

<p>in models.py  </p>

<pre><code>class Place(models.Model):
    name = models.CharField(max_length=50)
    address = models.CharField(max_length=80)

class Owner(models.Model):
    name = models.CharField(max_length=100)
    place = models.ForeignKey(Place)
    background = models.TextField()
    license_expiration = models.DateTimeField('license expiration')
</code></pre>

<p>in admin.py</p>

<pre><code>class PlaceInline(admin.TabularInline):  
    model = Place  
    extra = 5  

class OwnerAdmin(admin.ModelAdmin):  
    fieldsets = [  
        (None,    {'fields': ['background','place', 'license_expiration']}),  
    ]  
    inlines = [PlaceInline]
</code></pre>
"
189087,25680,2008-10-09T20:32:13Z,22,"How can I, in python, iterate over multiple 2d lists at once, cleanly?","<p>If I'm making a simple grid based game, for example, I might have a few 2d lists. One might be for terrain, another might be for objects, etc. Unfortunately, when I need to iterate over the lists and have the contents of a square in one list affect part of another list, I have to do something like this.</p>

<pre><code>for i in range(len(alist)):
    for j in range(len(alist[i])):
        if alist[i][j].isWhatever:
            blist[i][j].doSomething()
</code></pre>

<p>Is there a nicer way to do something like this?</p>
"
189555,26668,2008-10-09T23:14:43Z,126,How to use Python to login to a webpage and retrieve cookies for later usage?,"<p>I want to download and parse webpage using python, but to access it I need a couple of cookies set. Therefore I need to login over https to the webpage first. The login moment involves sending two POST params (username, password) to /login.php. During the login request I want to retrieve the cookies from the response header and store them so I can use them in the request to download the webpage /data.php.</p>

<p>How would I do this in python (preferably 2.6)? If possible I only want to use builtin modules.</p>
"
189645,15537,2008-10-10T00:02:01Z,226,How to break out of multiple loops in Python?,"<p>Given the following code (that doesn't work):</p>

<pre><code>while True:
    #snip: print out current state
    while True:
        ok = get_input(""Is this ok? (y/n)"")
        if ok == ""y"" or ok == ""Y"": break 2 #this doesn't work :(
        if ok == ""n"" or ok == ""N"": break
    #do more processing with menus and stuff
</code></pre>

<p>Is there a way to make this work? Or do I have do one check to break out of the input loop, then another, more limited, check in the outside loop to break out all together if the user is satisfied?</p>

<p><strong>Edit-FYI:</strong> get_input is a short function I wrote that supports showing a prompt and default values and all that fanciness and returns <code>stdin.readline().strip()</code></p>
"
189751,26683,2008-10-10T00:51:00Z,35,Google App Engine and 404 error,"<p>I've setup a static website on GAE using hints found elsewhere, but can't figure out how to return a 404 error. My app.yaml file looks like</p>

<pre><code>- url: (.*)/
  static_files: static\1/index.html
  upload: static/index.html

- url: /
  static_dir: static
</code></pre>

<p>with all the static html/jpg files stored under the static directory. The above works for files that exist, but returns a null length file if they don't. The answer is probably to write a python script to return a 404 error, but how do you set things up to serve the static files that exist but run the script for files that don't?</p>

<p>Here is the log from fetching a non-existent file (nosuch.html) on the development application server:</p>

<pre><code>ERROR    2008-11-25 20:08:34,084 dev_appserver.py] Error encountered reading file ""/usr/home/ctuffli/www/tufflinet/static/nosuch.html"":
[Errno 2] No such file or directory: '/usr/home/ctuffli/www/tufflinet/static/nosuch.html'
INFO     2008-11-25 20:08:34,088 dev_appserver.py] ""GET /nosuch.html HTTP/1.1"" 404 -
</code></pre>
"
189861,4527,2008-10-10T01:55:27Z,1,What property returns the regular expression used when re.compile was called?,"<pre><code>def foo ():
   x = re.compile('^abc')

   foo2(x)

def foo2(x):

   # How do I get x to return '^abc'?
   logging.info('x is ' + x.???)
</code></pre>
"
189943,20498,2008-10-10T02:39:33Z,88,How can I quantify difference between two images?,"<p>Here's what I would like to do:</p>

<p>I'm taking pictures with a webcam at regular intervals.  Sort of like a time lapse thing.  However, if nothing has really changed, that is, the picture pretty much <em>looks</em> the same, I don't want to store the latest snapshot.</p>

<p>I imagine there's some way of quantifying the difference, and I would have to empirically determine a threshold.  </p>

<p>I'm looking for simplicity rather than perfection.
I'm using python.</p>
"
190010,16148,2008-10-10T03:24:07Z,104,Daemon Threads Explanation,"<p>In the <a href=""https://docs.python.org/2/library/threading.html#thread-objects"">Python documentation</a>
it says:</p>

<blockquote>
  <p>A thread can be flagged as a ""daemon thread"". The significance of this
  flag is that the entire Python program exits when only daemon threads
  are left. The initial value is inherited from the creating thread.</p>
</blockquote>

<p>Does anyone have a clearer explanation of what that means or a practical example showing where you would want to set threads as <code>daemonic</code>?</p>

<hr>

<p>To clarify for me:</p>

<p>so the only time you <strong>wouldn't</strong> set threads as daemonic is if you wanted them to continue running after the main thread exits?</p>
"
190115,NA,2008-10-10T04:19:19Z,1,IDLE does't start in python 3.0,"<p>If I have no connection to internet, does that mean I can't start <strong>IDLE</strong> (which comes with <strong>python 3.0</strong>)?</p>
"
190675,26763,2008-10-10T09:56:47Z,1,Read colors of image with Python (GAE),"<p>How can I read the colors of an image with python using google app engine?</p>

<p><strong>Example:</strong> I like to build a function to determine the most striking colors of an image to set a harmonic background color for it.</p>
"
190967,985,2008-10-10T11:58:40Z,17,Getting the pattern back from a compiled re?,"<p>Assume I have created a compiled re:</p>

<pre><code>x = re.compile('^\d+$')
</code></pre>

<p>Is there a way to extract the pattern string (^\d+$) back from the x?</p>
"
191010,985,2008-10-10T12:18:32Z,152,How to get a complete list of object's methods and attributes?,"<pre><code>dir(re.compile(pattern)) 
</code></pre>

<p>does not return pattern as one of the lists's elements. Namely it returns:</p>

<pre><code>['__copy__', '__deepcopy__', 'findall', 'finditer', 'match', 'scanner', 'search', 'split', 'sub', 'subn']
</code></pre>

<p>According to the manual, it is supposed to contain </p>

<blockquote>
  <p>the object's attributes' names, the
  names of its class's attributes, and
  recursively of the attributes of its
  class's base classes.</p>
</blockquote>

<p>It says also that</p>

<blockquote>
  <p>The list is not necessarily complete.</p>
</blockquote>

<p>Is there a way to get the <strong>complete</strong> list? I always assumed that dir returns a complete list but apparently it does not...</p>

<p>Also: is there a way to list only attributes? Or only methods?</p>

<p><em>Edit: this is actually a bug in python -> supposedly it is fixed in the 3.0 branch (and perhaps also in 2.6)</em></p>
"
191062,NA,2008-10-10T12:40:08Z,10,Python Webframework Confusion,"<p>Could someone please explain to me how the current python webframworks fit together?</p>

<p>The three I've heard of are CherryPy, TurboGears and Pylons. However I'm confused because TurboGears seems to use CherryPy as the 'Controller' (although isn't CherryPy a framework in in it's own right?), and TurbGears 2 is going to be built on top of Pylons (which I thought did the same thing?).</p>
"
191359,2797,2008-10-10T13:50:26Z,35,How to convert a file to utf-8 in Python?,"<p>I need to convert a bunch of files to utf-8 in Python, and I have trouble with the ""converting the file"" part.</p>

<p>I'd like to do the equivalent of:</p>

<pre><code>iconv -t utf-8 $file &gt; converted/$file # this is shell code
</code></pre>

<p>Thanks!</p>
"
191536,22491,2008-10-10T14:19:44Z,82,Converting XML to JSON using Python?,"<p>I've seen a fair share of ungainly XML->JSON code on the web, and having interacted with Stack's users for a bit, I'm convinced that this crowd can help more than the first few pages of Google results can.</p>

<p>So, we're parsing a weather feed, and we need to populate weather widgets on a multitude of web sites.  We're looking now into Python-based solutions.</p>

<p>This public <a href=""http://rss.weather.com/weather/rss/local/14607?cm_ven=LWO&amp;cm_cat=rss&amp;par=LWO_rss"" rel=""nofollow"">weather.com RSS feed</a> is a good example of what we'd be parsing (<em>our actual weather.com feed contains additional information because of a partnership w/them</em>).</p>

<p>In a nutshell, how should we convert XML to JSON using Python?</p>
"
191644,13380,2008-10-10T14:39:01Z,7,How do you get output parameters from a stored procedure in Python?,"<p>I've googled around a bit, but maybe I didn't put the correct magik incantation into the search box. </p>

<p>Does anyone know how to get output parameters from a stored procedure in Python? I'm using pymssql to call a stored procedure, and I'm not sure of the correct syntax to get the output parameter back. I don't think I can use any other db modules since I'm running this from a Linux box to connect to a mssql database on a MS Server.</p>

<pre><code>import pymssql

con = pymssql.connect(host='xxxxx',user='xxxx',password='xxxxx',database='xxxxx')

cur = con.cursor()

query = ""EXECUTE blah blah blah""

cur.execute(query)
con.commit()
con.close()
</code></pre>
"
191700,24798,2008-10-10T14:52:04Z,2,Configuring python,"<p>I am new to python and struggling to find how to control the amount of memory a python process can take? I am running python on a Cento OS machine with more than 2 GB of main memory size. Python is taking up only 128mb of this and I want to allocate it more. I tried to search all over the internet on this for last half an hour and found absolutely nothing! Why is it so difficult to find information on python related stuff :(</p>

<p>I would be happy if someone could throw some light on how to configure python for various things like allowed memory size, number of threads etc.</p>

<p>A link to a site where most controllable parameters of python are described would be appreciated well.</p>
"
192109,10708,2008-10-10T16:19:27Z,446,Is there a function in Python to print all the current properties and values of an object?,"<p>So what I'm looking for here is something like <a href=""http://us2.php.net/print_r"">PHP's print_r</a> function. This is so I can debug my scripts by seeing what's the state of the object in question.</p>
"
192261,26905,2008-10-10T17:02:08Z,24,How do I log an exception at warning- or info-level with trace back using the python logging framework?,"<p>Using something like this:</p>

<pre><code>
try:
   #Something...
except BaseException, excep:
   logger = logging.getLogger(""componet"")
   logger.warning(""something raised an exception: "" + excep)
   logger.info(""something raised an exception: "" + excep)


</code></pre>

<p>I would rather not have it on the error-level cause in my special case it is not an error. At least not in that python-process.</p>
"
192345,12682,2008-10-10T17:24:23Z,7,Pylons with Elixir,"<p>I would like to use Pylons with Elixir, however, I am not sure what is the best way to get about doing this. There are several blog posts (<a href=""http://cleverdevil.org/computing/68/"" rel=""nofollow"" title=""cleverdevil's technique"">cleverdevil</a>, <a href=""http://beachcoder.wordpress.com/2007/05/11/using-elixir-with-pylons/"" rel=""nofollow"" title=""beachcoder's technique"">beachcoder</a>, <a href=""http://hoscilo.pypla.net/2007/03/19/sqlalchemy-elixir-and-pylons-round-one/"" rel=""nofollow"" title=""adam hoscilo's technique"">adam hoscilo</a>) and even an <a href=""http://code.google.com/p/tesla-pylons-elixir/"" rel=""nofollow"" title=""tesla"">entire new framework</a> about how to go about doing this; however, I am not certain about the differences between them. Which one is the best to use? Am I going to run into issues using one over the other? </p>

<p>I would prefer not to have to use SQLAlchemy directly because of its verbosity and repetitiveness. </p>
"
192367,10825,2008-10-10T17:27:35Z,14,In Django how do I notify a parent when a child is saved in a foreign key relationship?,"<p>I have the following two models:</p>

<pre><code>class Activity(models.Model):
    name = models.CharField(max_length=50, help_text='Some help.')
    entity = models.ForeignKey(CancellationEntity)
    ...


class Cancellation(models.Model):
    activity = models.ForeignKey(Activity)
    date = models.DateField(default=datetime.now().date())
    description = models.CharField(max_length=250)
    ...
</code></pre>

<p>I would like the Activity model to be aware when a Cancellation related to it is saved (both inserted or updated).</p>

<p>What is the best way to go about this? Thanks in advance.</p>
"
192579,NA,2008-10-10T18:36:02Z,11,TFS Webservice Documentation,"<p>We use a lot of of python to do much of our deployment and would be handy to connect to our TFS server to get information on iteration paths, tickets etc. I can see the webservice but unable to find any documentation. Just wondering if anyone knew of anything?</p>
"
192649,5304,2008-10-10T18:56:12Z,39,Can you monkey patch methods on core types in python?,"<p>Ruby can add methods to the Number class and other core types to get effects like:</p>

<pre>
1.should_equal(1)
</pre>

<p>But it seems like python cannot do this. Is this true? And if so, why? Does it have something to do with the fact that <em>type</em> can't be modified?</p>

<p><em>Update: Rather than talking about different definitions of monkey patching, I would like to just focus on the example above. I have already concluded that it cannot be done as a few of you have answered. But I would like a more detailed explanation of why it cannot be done, and maybe what feature, if available in python, would allow this.</em></p>

<p>To answer some of you: The reason I <em>might</em> want to do this is simply aesthetics/readability. </p>

<pre>
item.price.should_equal(19.99)
</pre>

<p>reads more like English and clearly indicates which is the tested value and which is the expected value, as supposed to:</p>

<pre>
should_equal(item.price, 19.99)
</pre>

<p>This concept is what <a href=""http://rspec.info/"">Rspec</a> and some other Ruby frameworks are based on.</p>
"
192907,16148,2008-10-10T20:22:24Z,54,XML parsing - ElementTree vs SAX and DOM,"<p>Python has several ways to parse XML...</p>

<p>I understand the very basics of parsing with <strong>SAX</strong>.  It functions as a stream parser, with an event-driven API.</p>

<p>I understand the <strong>DOM</strong> parser also.  It reads the XML into memory and coverts it to objects that can be accessed with Python.</p>

<p>Generally speaking, it was easy to choose between the 2 depending on what you needed to do, memory constraints, performance, etc.</p>

<p>(hopefully I'm correct so far).</p>

<p>Since Python 2.5, we also have <strong>ElementTree</strong>. How does this compare to DOM and SAX? Which is it more similar to? Why is it better than the previous parsers?</p>
"
193077,18770,2008-10-10T21:26:26Z,27,Standalone Python applications in Linux,"<p>How can I distribute a standalone Python application in Linux?</p>

<p>I think I can take for granted the presence of a recent Python interpreter in any modern distribution. The problem is dealing with those libraries that do not belong to the standard library, i.e. wxPython, scipy, python cryptographic toolkit, reportlab, and so on.</p>

<p>Is there a working Linux counterpart to, say, py2exe (which, by the way, I have never tried)?
Is there a free, opensource one?</p>
"
193161,13402,2008-10-10T21:50:34Z,405,What is the best project structure for a Python application?,"<p>Imagine that you want to develop a non-trivial end-user desktop (not web) application in Python. What is the best way to structure the project's folder hierarchy?</p>

<p>Desirable features are ease of maintenance, IDE-friendliness, suitability for source control branching/merging, and easy generation of install packages.</p>

<p>In particular:</p>

<ol>
<li>Where do you put the source?</li>
<li>Where do you put application startup scripts?</li>
<li>Where do you put the IDE project cruft?</li>
<li>Where do you put the unit/acceptance tests?</li>
<li>Where do you put non-Python data such as config files?</li>
<li>Where do you put non-Python sources such as C++ for pyd/so binary extension modules?</li>
</ol>
"
193701,24215,2008-10-11T05:34:54Z,3,What are best practices for developing consistent libraries?,"<p>I am working on developing a pair of libraries to work with a REST API.  Because I need to be able to use the API in very different settings I'm currently planning to have a version in PHP (for web applications) and a second version in Python (for desktop applications, and long running processes).  Are there any best practices to follow in the development of the libraries to help maintain my own sanity?</p>
"
193789,115,2008-10-11T07:06:48Z,10,Microphone access in Python,"<p>Can I access a users microphone in Python?</p>

<p>Sorry I forgot not everyone is a mind reader:
Windows at minimum XP but Vista support would be VERY good.</p>
"
193919,24039,2008-10-11T09:59:35Z,60,What are good rules of thumb for Python imports?,"<p>I am a little confused by the multitude of ways in which you can import modules in Python.  </p>

<pre><code>import X
import X as Y
from A import B
</code></pre>

<p>I have been reading up about scoping and namespaces, but I would like some practical advice on what is the best strategy, under which circumstances and why.  Should imports happen at a module level or a method/function level?  In the <code>__init__.py</code> or in the module code itself?</p>

<p>My question is not really answered by ""<a href=""http://stackoverflow.com/questions/45122/python-packages-import-by-class-not-file"">Python packages - import by class, not file</a>"" although it is obviously related.</p>
"
194289,27081,2008-10-11T16:34:31Z,8,Recommended data format for describing the rules of chess,"<p>I'm going to be writing a chess server and one or more clients for chess and I want to describe the rules of chess (e.g. allowable moves based on game state, rules for when a game is complete) in a programming language independant way. This is a bit tricky since some of the chess rules (e.g. King Castling, en passent, draws based on 3 or more repeated moves) are based not only on the board layout but also on the history of moves.</p>

<p>I would prefer the format to be:</p>

<ul>
<li>textual</li>
<li>human readable</li>
<li>based on a standard (e.g. YAML, XML)</li>
<li>easily parsable in a variety of languages</li>
</ul>

<p>But I am willing to sacrifice any of these for a suitable solution.</p>

<p>My main question is: How can I build algorithms of such a complexity that operate on such complex state from a data format?</p>

<p>A followup queston is: Can you provide an example of a similar problem solved in a similar manner that can act as a starting point?</p>

<p><strong>Edit:</strong> In response to a request for clarity -- consider that I will have a server written in Python, one client written in C# and another client written in Java. I would like to avoid specifying the rules (e.g. for allowable piece movement, circumstances for check, etc.) in each place. I would prefer to specify these rules once in a language independant manner.</p>
"
194339,8482,2008-10-11T17:21:05Z,8,Python Code Organization Question : Eggs + Packages + Buildout + Unit Tests + SVN,"<p>I have several python projects that share common modules. Until now, I've been ... ahem ... keeping multiple copies of the common code and synchronizing by hand. But I'd clearly prefer to do something else.</p>

<p>It looks to me now, as if zc.Buildout maybe what I need. I guess that what I should be doing is putting each reusable component of my system into a separate egg, and then using buildout to assemble them into projects.</p>

<p>I'm also thinking that for any particular module, I should put the unit-tests into a separate package or egg, so that I'm not also installing copies of the component's  unit-tests in every project. I only want to unit-test in a place where my library is developed, not where it's just being used.</p>

<p>So maybe I want something like this</p>

<pre><code>projects
  lib1
    tests
    code
  lib2
    tests
    code
  app1
    tests 
    appcode
  app2
    tests
    appcode
</code></pre>

<p>etc.</p>

<p>Where both app1 and app2 are independent applications with their own code and tests, but are also including and using both lib1 and lib2. And lib1/test, lib1/code, lib2/test, lib2code, app1, app2 are separate eggs. Does this sound right?</p>

<p>However, I now get confused. I assume that when I develop app1, I want buildout to pull copies of lib1, lib2 and app1 into a separate working directory rather than put copies of these libraries under app1 directly. But how does this work with my SVN source-control? If the working directory is dynamically constructed with buildout, it can't be a live SVN directory from which I can check the changes back into the repository?</p>

<p>Have I misunderstood how buildout is meant to be used? Would I be better going for a completely different approach? How do you mix source-control with module-reuse between projects?</p>

<p>Update : thanks to the two people who've currently answered this question. I'm experimenting more with this.</p>
"
195101,27163,2008-10-12T04:36:49Z,5,Running a web app in Grails vs Django,"<p>I'm currently in the planning stage for a web application and I find myself trying to decide on using Grails or Django.  From an operation perspective:</p>

<ol>
<li><p>Which ecosystem is easier to maintain (migrations, backup, disaster recovery etc.)?  If using grails it'll probably be a typical tomcat + mysql on linux.  If django it'll be apache + mysql on linux.</p></li>
<li><p>Does django or grails have a better choice of cheap and flexible hosting?  Initially it'll probably be low bandwidth requirements.  I'm not sure about the exact specs required, but from what I've been reading it seems like django would require far less server resources (even 256MB server is ok) than grails.</p></li>
</ol>
"
195109,115,2008-10-12T04:46:16Z,7,Running compiled python (py2exe) as administrator in Vista,"<p>Is it possible to programaticly run compiled Python (comiled via py2exe) as administrator in Vista?</p>

<p>Some more clarification:<br />
I have written a program that modifies the windows hosts file (c:\Windows\system32\drivers\etc\hosts) in Vista the program will not run and will fail with an exception unless you right-click and run as administrator even when the user has administrator privileges, unlike in XP where it will run if the user has administration rights, so I need a way to elevate it to the correct privileges programaticly.</p>
"
195116,52490,2008-10-12T05:03:05Z,13,Python Decimal,"<p>Does anyone know of a faster decimal implementation in python.  As example below demonstrates, standard python decimal is ~100 times slower than float.</p>

<pre><code>from  timeit import Timer

def run(val, the_class):
    test = the_class(1)
    for c in xrange(10000):
        d = the_class(val)
        d + test
        d - test
        d * test
        d / test
        d ** test
        str(d)
        abs(d)    

if __name__ == ""__main__"":
    a = Timer(""run(123.345, float)"", ""from decimal_benchmark import run"")
    print ""FLOAT"", a.timeit(1)
    a = Timer(""run('123.345', Decimal)"", ""from decimal_benchmark import run; from decimal import Decimal"")
    print ""DECIMAL"", a.timeit(1)

FLOAT 0.040635041427
DECIMAL 3.39666790146
</code></pre>

<p>Thanks,
Maksim</p>
"
195534,NA,2008-10-12T14:14:19Z,56,"In production, Apache + mod_wsgi or Nginx + mod_wsgi?","<p>What to use for a medium to large python WSGI application, Apache + mod_wsgi or Nginx + mod_wsgi?<br /><br />
Which combination will need more memory and CPU time?<br />
Which one is faster?<br/>
Which is known for being more stable than the other?<br /><br />
I am also thinking to use CherryPy's WSGI server but I hear it's not very suitable for a very high-load application, what do you know about this?
<br /><br />
<strong><em>Note</strong>: I didn't use any Python Web Framework, I just wrote the whole thing from scratch.</em><br />
<strong><em>Note'</strong>: Other suggestions are also welcome.</em>
<br /></p>
"
195625,21000,2008-10-12T15:58:59Z,16,What is the time complexity of popping elements from list in Python?,"<p>I wonder what is the time complexity of pop method of list objects in Python (in CPython particulary). Also does the value of N for list.pop(N) affects the complexity?  </p>
"
195626,1925263,2008-10-12T15:59:48Z,6,How to avoid computation every time a python module is reloaded,"<p>I have a python module that makes use of a huge dictionary global variable, currently I put the computation code in the top section, every first time import or reload of the module takes more then one minute which is totally unacceptable. How can I save the computation result somewhere so that the next import/reload doesn't have to compute it? I tried cPickle, but loading the dictionary variable from a file(1.3M) takes approximately the same time as computation.</p>

<p>To give more information about my problem, </p>

<pre><code>FD = FreqDist(word for word in brown.words()) # this line of code takes 1 min
</code></pre>
"
195771,9789,2008-10-12T17:49:09Z,3,What's the easiest way/best tutorials to get familiar with SQLAlchemy?,"<p>What are best resources/tutorials for starting up with SQLAlchemy?
Maybe some simple step by step stuff like creating a simple table and using it and going up from there.</p>
"
196217,844,2008-10-12T22:27:58Z,2,MySQLdb execute timeout,"<p>Sometimes in our production environment occurs situation when connection between service (which is python program that uses MySQLdb) and mysql server is flacky, some packages are lost, some black magic happens and .execute() of MySQLdb.Cursor object never ends (or take great amount of time to end). </p>

<p>This is very bad because it is waste of service worker threads. Sometimes it leads to exhausting of workers pool and service stops responding at all.</p>

<p>So the question is: Is there a way to interrupt MySQLdb.Connection.execute operation after given amount of time?</p>
"
196345,3504,2008-10-13T00:13:40Z,120,How to check if a string in Python is in ASCII?,"<p>I want to I check whether a string is in ASCII or not.</p>

<p>I am aware of <code>ord()</code>, however when I try <code>ord('é')</code>, I have <code>TypeError: ord() expected a character, but string of length 2 found</code>. I understood it is caused by the way I built Python (as explained in <a href=""http://docs.python.org/library/functions.html#ord""><code>ord()</code>'s documentation</a>). </p>

<p>Is there another way to check?</p>
"
196755,18770,2008-10-13T05:03:47Z,3,How can I search through Stack Overflow questions from a script?,"<p>Given a string of keywords, such as ""Python best practices"", I would like to obtain the first 10 Stack Overflow questions that contain that keywords, sorted by relevance (?), say from a Python script. My goal is to end up with a list of tuples (title, URL).</p>

<p>How can I accomplish this? Would you consider querying Google instead? (How would you do it from Python?)</p>
"
196771,3528,2008-10-13T05:20:56Z,2,What is the best way to escape Python strings in PHP?,"<p>I have a PHP application which needs to output a python script, more specifically a bunch of variable assignment statements, eg.</p>

<pre><code>subject_prefix = 'This String From User Input'
msg_footer = """"""This one too.""""""
</code></pre>

<p>The contents of subject_prefix et al need to be written to take user input; as such, I need to escape the contents of the strings. Writing something like the following isn't going to cut it; we're stuffed as soon as someone uses a quote or newline or anything else that I'm not aware of that could be hazardous:</p>

<pre><code>echo ""subject_prefix = '"".$subject_prefix.""'\n"";
</code></pre>

<p>So. Any ideas?</p>

<p>(Rewriting the app in Python isn't possible due to time constraints. :P )</p>

<p><strong>Edit, years later:</strong></p>

<p>This was for integration between a web-app (written in PHP) and Mailman (written in Python). I couldn't modify the install of the latter, so I needed to come up with a way to talk in its language to manage its configuration.</p>

<p>This was also a <em>really</em> bad idea.</p>
"
196776,422,2008-10-13T05:25:29Z,2,Which AES library to use in Ruby/Python?,"<p>I need to be able to send encrypted data between a Ruby client and a Python server (and vice versa) and have been having trouble with the <a href=""http://rubyforge.org/projects/ruby-aes"" rel=""nofollow"">ruby-aes</a> gem/library. The library is very easy to use but we've been having trouble passing data between it and the pyCrypto AES library for Python. These libraries seem to be fine when they're the only one being used, but they don't seem to play well across language boundaries. Any ideas?</p>

<p>Edit: We're doing the communication over SOAP and have also tried converting the binary data to base64 to no avail. Also, it's more that the encryption/decryption is almost but not exactly the same between the two (e.g., the lengths differ by one or there is extra garbage characters on the end of the decrypted string)</p>
"
196841,16034,2008-10-13T06:25:29Z,8,How do I emulate Python's named printf parameters in Ruby?,"<p>In Python, you can do this:</p>

<pre><code>print ""Hi!  I'm %(name)s, and I'm %(age)d years old."" % ({""name"":""Brian"",""age"":30})
</code></pre>

<p>What's the closest, simplest Ruby idiom to replicate this behavior?  (No monkeypatching the String class, please.)</p>

<p><strong>EDIT:</strong> One of the really excellent benefits of this is that you can store the pre-processed string in a variable and use it as a ""template"", like so:</p>

<pre><code>template = ""Hi!  I'm %(name)s, and I'm %(age)d years old.""
def greet(template,name,age):
    print template % ({""name"":name,""age"":age})
</code></pre>

<p>This is obviously a trivial example, but there is a lot of utility in being able to store such a string for later use.  Ruby's <code>""Hi!  I'm #{name}""</code> convention is cursorily similar, but the immediate evaluation makes it less versatile.</p>

<p>Please don't downvote answers suggesting the <code>#{var}</code> technique, as they came from before this edit.  (Random idea kernel: Perhaps answers should be protected from votes if a question author marks them as ""outdated""...?)</p>
"
196924,1925263,2008-10-13T07:32:12Z,9,How to ensure user submit only english text,"<p>I am building a project involving natural language processing, since the nlp module currently only deal with english text, so I have to make sure the user submitted content (not long, only several words) is in english. Are there established ways to achieve this? Python or Javascript way preferred.</p>
"
196930,18745,2008-10-13T07:35:14Z,24,How to check if OS is Vista in Python?,"<p>How, in the simplest possible way, distinguish between Windows XP and Windows Vista, using Python and <a href=""http://python.net/crew/mhammond/win32/Downloads.html"">pywin32</a> or <a href=""http://www.wxpython.org/"">wxPython</a>?</p>

<p>Essentially, I need a function that called will return True iff current OS is Vista:</p>

<pre><code>&gt;&gt;&gt; isWindowsVista()
True
</code></pre>
"
196960,745,2008-10-13T07:55:18Z,64,Can you list the keyword arguments a Python function receives?,"<p>I have a dict, which I need to pass key/values as keyword arguments.. For example..</p>

<pre><code>d_args = {'kw1': 'value1', 'kw2': 'value2'}
example(**d_args)
</code></pre>

<p>This works fine, <em>but</em> if there are values in the d_args dict that are not accepted by the <code>example</code> function, it obviously dies.. Say, if the example function is defined as <code>def example(kw2):</code></p>

<p>This is a problem since I don't control either the generation of the <code>d_args</code>, or the <code>example</code> function.. They both come from external modules, and <code>example</code> only accepts some of the keyword-arguments from the dict..</p>

<p>Ideally I would just do</p>

<pre><code>parsed_kwargs = feedparser.parse(the_url)
valid_kwargs = get_valid_kwargs(parsed_kwargs, valid_for = PyRSS2Gen.RSS2)
PyRSS2Gen.RSS2(**valid_kwargs)
</code></pre>

<p>I will probably just filter the dict, from a list of valid keyword-arguments, but I was wondering: <strong>Is there a way to programatically list the keyword arguments the a specific function takes?</strong></p>
"
197009,140995,2008-10-13T08:29:20Z,2,How to find out whether subversion working directory is locked by svn?,"<p>A python script is running two parallel python processes ( created via os.fork() ) each of which eventually tries to check out a subversion repository leaf into the same working copy dir.</p>

<p>Before running 'svn co ...' command in a sub-process ( via python subprocess module ) the parent python code checks if the working copy dir already exists. </p>

<pre><code>  if os.path.isdir(checkout_dir):
     # working copy dir already exists
     return checkout_dir
</code></pre>

<p>So that if it does there shouldn't be any 'svn co' running, but rather immediate return from the parent function.</p>

<p>Nevertheless some collision happened and one of the python processes failed on 'svn co ..' with the following error.</p>

<pre><code>checked-out failed: svn: Working copy '/tmp/qm_23683' locked
svn: run 'svn cleanup' to remove locks (type 'svn help cleanup' for details)**
</code></pre>

<p>So the first question is why the working copy dir existence check didn't work and the second - is there a way to find out that a working copy dir is locked by svn and loop until it is unlocked?</p>

<p>Thanks.</p>
"
197387,985,2008-10-13T12:24:04Z,20,Docstrings for data?,"<p>Is there a way to describe the module's data in a similar way that a docstring describes a module or a funcion?</p>

<pre><code>class MyClass(object):
    def my_function():
        """"""This docstring works!""""""
        return True
    my_list = []
    """"""This docstring does not work!""""""
</code></pre>
"
197759,27059,2008-10-13T14:26:10Z,9,Dealing with a string containing multiple character encodings,"<p>I'm not exactly sure how to ask this question really, and I'm no where close to finding an answer, so I hope someone can help me. </p>

<p>I'm writing a Python app that connects to a remote host and receives back byte data, which I unpack using Python's built-in struct module. My problem is with the strings, as they include multiple character encodings. Here is an example of such a string:</p>

<p>""^LThis is an example ^Gstring with multiple ^Jcharacter encodings""</p>

<p>Where the different encoding starts and ends is marked using special escape chars:</p>

<ul>
<li>^L - Latin1</li>
<li>^E - Central Europe</li>
<li>^T - Turkish</li>
<li>^B - Baltic</li>
<li>^J - Japanese</li>
<li>^C - Cyrillic</li>
<li>^G - Greek</li>
</ul>

<p>And so on... I need a way to convert this sort of string into Unicode, but I'm really not sure how to do it. I've read up on Python's codecs and string.encode/decode, but I'm none the wiser really. I should mention as well, that I have no control over how the strings are outputted by the host.</p>

<p>I hope someone can help me with how to get started on this.</p>
"
198465,9940,2008-10-13T18:09:06Z,1,Get File Object used by a CSV Reader/Writer Object,"<p>Is there any way to access the file object used by a CSV writer/reader object after it has been instantiated?  I openned up the csv module, and it appears it's contest are builtin.  I also tried setting the file object as a property but I get the following error:</p>

<pre><code>AttributeError: '_csv.writer' object has no attribute 'fileobj'
</code></pre>
"
198692,19074,2008-10-13T19:11:13Z,25,Can I pickle a python dictionary into a sqlite3 text field?,"<p>Any gotchas I should be aware of?  Can I store it in a text field, or do I need to use a blob?
(I'm not overly familiar with either pickle or sqlite, so I wanted to make sure I'm barking up the right tree with some of my high-level design ideas.)</p>
"
199059,19074,2008-10-13T21:16:40Z,8,I'm looking for a pythonic way to insert a space before capital letters,"<p>I've got a file whose format I'm altering via a python script.  I have several camel cased strings in this file where I just want to insert a single space before the capital letter - so ""WordWordWord"" becomes ""Word Word Word"".</p>

<p>My limited regex experience just stalled out on me - can someone think of a decent regex to do this, or (better yet) is there a more pythonic way to do this that I'm missing?</p>
"
199180,1367022,2008-10-13T22:08:26Z,9,Is there any way to get python omnicomplete to work with non-system modules in vim?,"<p>The only thing I can get python omnicomplete to work with are system modules. I get nothing for help with modules in my site-packages or modules that I'm currently working on.</p>
"
199556,26294,2008-10-14T00:23:28Z,4,"How can I port a legacy Java/J2EE website to a modern scripting language (PHP,Python/Django, etc)?","<p>I want to move a legacy Java web application (J2EE) to a scripting language - any scripting language - in order to improve programming efficiency.</p>

<p>What is the easiest way to do this? Are there any automated tools that can convert the bulk of the business logic?</p>
"
200020,23845,2008-10-14T04:31:49Z,87,Get last answer,"<p>In many symbolic math systems, such as Matlab or Mathematica, you can use a variable like <code>Ans</code> or <code>%</code> to retrieve the last computed value. Is there a similar facility in the Python shell?</p>
"
200250,11324,2008-10-14T07:27:21Z,5,How do I remove a cookie that I've set on someone's computer?,"<p>I've got a web system where users log in, and it stores a cookie of their session. When they log in as someone else or log out I want to remove that original cookie that I stored. What's the best way to do that?
I'm using Python and Apache, though I suppose the answer will remain the same for most languages.</p>
"
200373,17451,2008-10-14T08:25:09Z,-1,fast filter method in python,"<p>I want to filter two list with any fastest method in python script. I have used the built-in <code>filter()</code> method for this purpose. but it is quite slow and taking too much time because I have very big list, I think more than 5 million item in each list or may be more. 
I do not know how I will make it. Please if anybody have idea or write small function for it. </p>
"
200447,13440,2008-10-14T09:01:54Z,5,Tracd Realm,"<p>I am trying to setup tracd for the project I am currently working on.
After creating a password file with the python script given in the <a href=""http://trac.edgewall.org/wiki/TracStandalone"">site</a> I am trying to start the server with authentication on. But it throws up warning saying No users found in the realm. What actually is a realm - I tried using trac as the value and also tried leaving it empty. I am using Windows XP.  I am using Tracd Standalone server.</p>

<p>The Command Line sent was: tracd --port 8000 --auth=My_Test_Project,D:\My_Test_Project\Documents\Trac\digest.txt,Trac  D:\My_Test_Project\Documents\Trac</p>

<p>The Warning message was - 'Warning: found no users in realm: trac'</p>

<p>Thanks...</p>
"
200599,11324,2008-10-14T10:04:46Z,7,Store simple user settings in Python,"<p>I am programming a website in which users will have a number of settings, such as their choice of colour scheme, etc. I'm happy to store these as plain text files, and security is not an issue.</p>

<p>The way I currently see it is: there is a dictionary, where all the keys are users and the values are dictionaries with the users' settings in them.</p>

<p>For example, userdb[""bob""][""colour_scheme""] would have the value ""blue"".</p>

<p>What is the best way to store it on file? Pickling the dictionary?</p>

<p>Are there better ways of doing what I am trying to do?</p>
"
200738,2183,2008-10-14T11:08:07Z,5,How can I unpack binary hex formatted data in Python?,"<p>Using the PHP <a href=""http://www.php.net/pack"" rel=""nofollow"">pack()</a> function, I have converted a string into a binary hex representation:</p>

<pre><code>$string = md5(time); // 32 character length
$packed = pack('H*', $string);
</code></pre>

<p>The H* formatting means ""Hex string, high nibble first"".</p>

<p>To unpack this in PHP, I would simply use the <a href=""http://www.php.net/unpack"" rel=""nofollow"">unpack()</a> function with the H* format flag.</p>

<p>How would I unpack this data in Python?</p>
"
201461,27736,2008-10-14T14:46:15Z,70,Shortest Sudoku Solver in Python - How does it work?,"<p>I was playing around with my own Sudoku solver and was looking for some pointers to good and fast design when I came across this:</p>

<pre><code>def r(a):i=a.find('0');~i or exit(a);[m
in[(i-j)%9*(i/9^j/9)*(i/27^j/27|i%9/3^j%9/3)or a[j]for
j in range(81)]or r(a[:i]+m+a[i+1:])for m in'%d'%5**18]
from sys import*;r(argv[1])
</code></pre>

<p>My own implementation solves Sudokus the same way I solve them in my head but how does this cryptic algorithm work?</p>

<p><a href=""http://scottkirkwood.blogspot.com/2006/07/shortest-sudoku-solver-in-python.html"">http://scottkirkwood.blogspot.com/2006/07/shortest-sudoku-solver-in-python.html</a></p>
"
201515,1694,2008-10-14T14:57:41Z,10,urllib.urlopen works but urllib2.urlopen doesn't,"<p>I have a simple website I'm testing.  It's running on localhost and I can access it in my web browser.  The index page is simply the word ""running"".  <code>urllib.urlopen</code> will successfully read the page but <code>urllib2.urlopen</code> will not.  Here's a script which demonstrates the problem (this is the actual script and not a simplification of a different test script):</p>

<pre><code>import urllib, urllib2
print urllib.urlopen(""http://127.0.0.1"").read()  # prints ""running""
print urllib2.urlopen(""http://127.0.0.1"").read() # throws an exception
</code></pre>

<p>Here's the stack trace:</p>

<pre><code>Traceback (most recent call last):
  File ""urltest.py"", line 5, in &lt;module&gt;
    print urllib2.urlopen(""http://127.0.0.1"").read()
  File ""C:\Python25\lib\urllib2.py"", line 121, in urlopen
    return _opener.open(url, data)
  File ""C:\Python25\lib\urllib2.py"", line 380, in open
    response = meth(req, response)
  File ""C:\Python25\lib\urllib2.py"", line 491, in http_response
    'http', request, response, code, msg, hdrs)
  File ""C:\Python25\lib\urllib2.py"", line 412, in error
    result = self._call_chain(*args)
  File ""C:\Python25\lib\urllib2.py"", line 353, in _call_chain
    result = func(*args)
  File ""C:\Python25\lib\urllib2.py"", line 575, in http_error_302
    return self.parent.open(new)
  File ""C:\Python25\lib\urllib2.py"", line 380, in open
    response = meth(req, response)
  File ""C:\Python25\lib\urllib2.py"", line 491, in http_response
    'http', request, response, code, msg, hdrs)
  File ""C:\Python25\lib\urllib2.py"", line 418, in error
    return self._call_chain(*args)
  File ""C:\Python25\lib\urllib2.py"", line 353, in _call_chain
    result = func(*args)
  File ""C:\Python25\lib\urllib2.py"", line 499, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
urllib2.HTTPError: HTTP Error 504: Gateway Timeout
</code></pre>

<p>Any ideas?  I might end up needing some of the more advanced features of <code>urllib2</code>, so I don't want to just resort to using <code>urllib</code>, plus I want to understand this problem.</p>
"
201846,9789,2008-10-14T16:17:23Z,2,python name a file same as a lib,"<p>i have the following script</p>

<pre><code>import getopt, sys
opts, args = getopt.getopt(sys.argv[1:], ""h:s"")
for key,value in opts:
    print key, ""=&gt;"", value
</code></pre>

<p>if i name this getopt.py and run it doesn't work as it tries to import itself</p>

<p>is there a way around this, so i can keep this filename but specify on import that i want the standard python lib and not this file?  </p>

<p>Solution based on Vinko's answer:</p>

<pre><code>import sys
sys.path.reverse()
from getopt import getopt

opts, args = getopt(sys.argv[1:], ""h:s"")

for key,value in opts:
    print key, ""=&gt;"", value
</code></pre>
"
202939,4697,2008-10-14T21:35:15Z,9,which python framework to use?,"<p>I'm looking for a framework which is appropriate for beginners (in Python and web development).</p>

<p>I already found out about Django and web.py. 
I think that one of the most important things for me is good documentation.</p>

<p>Thanks for the help,
Dan</p>
"
203487,5646,2008-10-15T02:00:27Z,19,Creating self-contained python applications,"<p>I'm trying to create a self-contained version of <a href=""http://www.htmltopdf.org/"">pisa</a> (html to pdf converter, <a href=""http://pypi.python.org/pypi/pisa/3.0.27"">latest version</a>), but I can't succeed due to several errors. I've tried <code>py2exe</code>, <code>bb-freeze</code> and <code>cxfreeze</code>.</p>

<p>This has to be in windows, which makes my life a bit harder. I remember that a couple of months ago the author had a zip file containing the install, but now it's gone, leaving me only with the python dependent way.</p>

<p>How would you work this out?</p>
"
203758,115,2008-10-15T04:55:33Z,2,Receive socket size limits good?,"<p>I am writing a program in Python that will act as a server and accept data from a client, is it a good idea to impose a hard limit as to the amount of data, if so why?</p>

<p>More info:
So certain chat programs limit the amount of text one can send per send (i.e. per time user presses send) so the question comes down to is there a legit reason for this and if yes, what is it?</p>
"
203859,432,2008-10-15T06:22:22Z,2,"How do I get python-markdown to additionally ""urlify"" links when formatting plain text?","<p>Markdown is a great tool for formatting plain text into pretty html, but it doesn't turn plain-text links into URLs automatically. Like this one:</p>

<p><a href=""http://www.google.com/"" rel=""nofollow"">http://www.google.com/</a></p>

<p>How do I get markdown to add  tags to URLs when I format a block of text?</p>
"
203912,20211,2008-10-15T06:59:50Z,60,Does python support multiprocessor/multicore programming?,"<p>What is the difference between multiprocessor programming and multicore programming?
preferably show examples in python how to write a small program for multiprogramming &amp; multicore programming</p>
"
204017,267,2008-10-15T08:24:28Z,206,How do I execute a program from python? os.system fails due to spaces in path,"<p>I have a python script that needs to execute an external program, but for some reason fails.</p>

<p>If I have the following script:</p>

<pre><code>import os;
os.system(""C:\\Temp\\a b c\\Notepad.exe"");
raw_input();
</code></pre>

<p>Then it fails with the following error:</p>

<pre><code>'C:\Temp\a' is not recognized as an internal or external command, operable program or batch file.
</code></pre>

<p>If I escape the program with quotes:</p>

<pre><code>import os;
os.system('""C:\\Temp\\a b c\\Notepad.exe""');
raw_input();
</code></pre>

<p>Then it works. However, if I add a parameter, it stops working again:</p>

<pre><code>import os;
os.system('""C:\\Temp\\a b c\\Notepad.exe"" ""C:\\test.txt""');
raw_input();
</code></pre>

<p>What is the right way to execute a program and wait for it to complete? I do not need to read output from it, as it is a visual program that does a job and then just exits, but I need to wait for it to complete.</p>

<p>Also note, moving the program to a non-spaced path is not an option either.</p>

<p><hr /></p>

<p><strong>Edit</strong> This does not work either:</p>

<pre><code>import os;
os.system(""'C:\\Temp\\a b c\\Notepad.exe'"");
raw_input();
</code></pre>

<p>Note the swapped single/double quotes.</p>

<p>with or without a parameter to notepad here, it fails with the error message</p>

<pre><code>The filename, directory name, or volume label syntax is incorrect.
</code></pre>
"
204062,115,2008-10-15T08:42:43Z,3,Alert Popups from service in Python,"<p>I have been using win32api.MessageBox to do alerts, and this works for apps running from the interactive prompt and normally executed code, however when I built a Python service when a MessageBox is triggered I can hear the 'beep' but the box does not display.  Is it possible to display alerts from services?</p>
"
204308,7136,2008-10-15T10:54:18Z,23,Checking for member existence in Python,"<p>I regularly want to check if an object has a member or not. An example is the creation of a singleton in a function. For that purpose, you can use <code>hasattr</code> like this:</p>

<pre><code>class Foo(object):
    @classmethod
    def singleton(self):
        if not hasattr(self, 'instance'):
            self.instance = Foo()
        return self.instance
</code></pre>

<p>But you can also do this:</p>

<pre><code>class Foo(object):
    @classmethod
    def singleton(self):
        try:
            return self.instance
        except AttributeError:
            self.instance = Foo()
            return self.instance
</code></pre>

<p>Is one method better of the other?</p>

<p><strong>Edit:</strong> Added the <code>@classmethod</code> ... But note that the question is <em>not</em> about how to make a singleton but how to check the presence of a member in an object.</p>

<p><strong>Edit:</strong> For that example, a typical usage would be:</p>

<pre><code>s = Foo.singleton()
</code></pre>

<p>Then <code>s</code> is an object of type <code>Foo</code>, the same each time. And, typically, the method is called many times.</p>
"
204427,140995,2008-10-15T11:47:27Z,2,Failed to get separate instances of a class under mod_python,"<p>I'm trying to run some python code under Apache 2.2 / mod_python 3.2.8. Eventually the code does os.fork() and spawns 2 separate long-run processes. Each of those processes has to create a separate instance of a class in order to avoid any possible collision in the parallel flow. </p>

<pre><code>class Foo(object):
   pass

kidprocs = []

for kid in ('kid1', 'kid2'):

  pid = os.fork()
  if pid:
    # parent
    kidprocs.append(pid)
    time.sleep(5)
  else:
    # child

    fooobj = Foo() 
    print ""Starting %s in sub-process %s"" % (kid, os.getpid())
    print ""Kid fooobj: %s"" % repr(fooobj) 
    os._exit(0)

for kidproc in kidprocs:
  os.waitpid(kidproc, 0)
</code></pre>

<p>Those print outputs look like this:</p>

<pre><code>Starting kid1 in sub-process 20906
    foo obj: &lt;__main__.Foo instance at 0xb7da5fec&gt;

Starting kid2 in sub-process 20909
    foo obj: &lt;__main__.Foo instance at 0xb7da5fec&gt;
</code></pre>

<p>As you can see I got the same object for both sub-processes. 
Do you have an idea why it's going like this under mod_python and is there a way to get separate instances anyway?
Thanks a lot.</p>
"
204570,9951,2008-10-15T12:48:02Z,0,Any experience with the Deliverance system?,"<p>My new boss went to a speech where Deliverance, a kind of proxy allowing to add skin to any html output on the fly, was presented. He decided to use it right after that, no matter how young it is.</p>

<p>More here :</p>

<p><a href=""http://www.openplans.org/projects/deliverance/introduction"" rel=""nofollow"">http://www.openplans.org/projects/deliverance/introduction</a></p>

<p>In theory, the system sounds great when you want a newbie to tweak your plone theme without having to teach him all the complex mechanisms behind the zope products. And apply the same theme on a Drupal web site in one row.</p>

<p>But I don't believe in theory, and would like to know if anybody tried this out in the real world :-)</p>
"
204802,9789,2008-10-15T13:57:23Z,7,What would you recommend for a high traffic ajax intensive website?,"<p>For a website like reddit with lots of up/down votes and lots of comments per topic what should I go with?</p>

<p>Lighttpd/Php or Lighttpd/CherryPy/Genshi/SQLAlchemy?</p>

<p>and for database what would scale better / be fastest MySQL ( 4.1 or 5 ? ) or PostgreSQL?</p>
"
204829,15842,2008-10-15T14:05:55Z,7,"Capture the contents of a regex and delete them, efficiently","<p>Situation:</p>

<ul>
<li>text:  a string</li>
<li>R:  a regex that matches part of the string.  This might be expensive to calculate.  </li>
</ul>

<p>I want to both delete the R-matches from the text, and see what they actually contain.  Currently, I do this like:</p>

<pre><code>import re
ab_re = re.compile(""[ab]"")
text=""abcdedfe falijbijie bbbb laifsjelifjl""
ab_re.findall(text)
# ['a', 'b', 'a', 'b', 'b', 'b', 'b', 'b', 'a']
ab_re.sub('',text)
# 'cdedfe flijijie  lifsjelifjl'
</code></pre>

<p>This runs the regex twice, near as I can tell.  Is there a technique to do it all on pass, perhaps using re.split?  It seems like with split based solutions I'd need to do the regex at least twice as well.  </p>
"
205062,28275,2008-10-15T15:02:09Z,13,Is it possible to compile Python natively (beyond pyc byte code)?,"<p>I wonder if it is possible to create an executable module from a Python script. I need to have the most performance and the flexibility of Python script, without needing to run in the Python environment. I would use this code to load on demand user modules to customize my application.</p>
"
205136,1694,2008-10-15T15:19:50Z,1,Sometimes can't delete an Oracle database row using Django,"<p>I have a unit test which contains the following line of code</p>

<pre><code>Site.objects.get(name=""UnitTest"").delete()
</code></pre>

<p>and this has worked just fine until now.  However, that statement is currently hanging.  It'll sit there forever trying to execute the delete.  If I just say</p>

<pre><code>print Site.objects.get(name=""UnitTest"")
</code></pre>

<p>then it works, so I know that it can retrieve the site.  No other program is connected to Oracle, so it's not like there are two developers stepping on each other somehow.  I assume that some sort of table lock hasn't been released.</p>

<p>So short of shutting down the Oracle database and bringing it back up, how do I release that lock or whatever is blocking me?  I'd like to not resort to a database shutdown because in the future that may be disruptive to some of the other developers.</p>

<p>EDIT: Justin suggested that I look at the <code>DBA_BLOCKERS</code> and <code>DBA_WAITERS</code> tables.  Unfortunately, I don't understand these tables at all, and I'm not sure what I'm looking for.  So here's the information that seemed relevant to me:</p>

<p>The <code>DBA_WAITERS</code> table has 182 entries with lock type ""DML"".  The <code>DBA_BLOCKERS</code> table has 14 entries whose session ids all correspond to the username used by our application code.</p>

<p>Since this needs to get resolved, I'm going to just restart the web server, but I'd still appreciate any suggestions about what to do if this problem repeats itself.  I'm a real novice when it comes to Oracle administration and have mostly just used MySQL in the past, so I'm definitely out of my element.</p>

<p>EDIT #2: It turns out that despite what I thought, another programmer was indeed accessing the database at the same time as me.  So what's the best way to detect this in the future?  Perhaps I should have shut down my program and then queried the <code>DBA_WAITERS</code> and <code>DBA_BLOCKERS</code> tables to make sure they were empty.</p>
"
205204,26905,2008-10-15T15:37:16Z,1,Starting a new database driven python web application would you use a javascript widget framework? If so which framework?,"<p>I am starting a new web application project. I want to use python as I am using it at my bread-and-butter-job.</p>

<p>However I don't want to reinvent the wheel. Some things I have thought about:</p>

<ul>
<li><p>AJAX would be nice if it’s not too much of a hazzle. </p></li>
<li><p>It is best if the licensing allows commercialization but is not crucial at this point.</p></li>
<li><p>It could also be funny to try out the Google App Engine if the tools will let me.</p></li>
</ul>

<p>Should I be using a javascript UI framework or should I go for standard HTML forms? </p>

<p>Which framework would you recommend?</p>
"
205704,4872,2008-10-15T17:46:12Z,14,How can I check the syntax of Python code in Emacs without actually executing it?,"<p>Python's IDLE has 'Check Module' (Alt-X) to check the syntax which can be called without needing to run the code. Is there an equivalent way to do this in Emacs instead of running and executing the code?</p>
"
206040,13990,2008-10-15T19:17:49Z,3,Any good team-chat websites?,"<p>Are there any good team-chat websites, preferably in Python, ideally with CherryPy or Trac?</p>

<p>This is similar to <a href=""http://stackoverflow.com/questions/46612/whats-a-good-freeware-collaborative-ie-multiuser-instant-messenger#46660"">http://stackoverflow.com/questions/46612/whats-a-good-freeware-collaborative-ie-multiuser-instant-messenger#46660</a>, but a few primary differences:</p>

<p>1) I very much want to host the server.</p>

<p>2) I don't care if Smileys are included or not in the client.</p>

<p>3) I'd like two options for the users:<br />
   a) Ability to host a private IRC like chat on my Trac page (or link to such a page),<br />
   b) allow remote clients to also interact.  </p>
"
206245,20955,2008-10-15T20:16:33Z,2,variables as parameters in field options,"<p>I want to create a model, that will set editable=False on creation, and editable=True on editing item. I thought it should be something like this: </p>

<pre><code> home = models.ForeignKey(Team, editable=lambda self: True if self.id else False)
</code></pre>

<p>But it doesn't work. Maybe something with overriding the <strong>init</strong> can help me, but i don't sure what can do the trick. I know i can check for self.id in save() method, but is too late, i want this kind of logic in admin app when im filling the fields.</p>
"
206734,745,2008-10-15T22:18:00Z,16,Why do attribute references act like this with Python inheritance?,"<p>The following seems strange.. Basically, the somedata attribute seems shared between all the classes that inherited from <code>the_base_class</code>.</p>

<pre><code>class the_base_class:
    somedata = {}
    somedata['was_false_in_base'] = False


class subclassthing(the_base_class):
    def __init__(self):
            print self.somedata


first = subclassthing()
{'was_false_in_base': False}
first.somedata['was_false_in_base'] = True
second = subclassthing()
{'was_false_in_base': True}
&gt;&gt;&gt; del first
&gt;&gt;&gt; del second
&gt;&gt;&gt; third = subclassthing()
{'was_false_in_base': True}
</code></pre>

<p>Defining <code>self.somedata</code> in the <code>__init__</code> function is obviously the correct way to get around this (so each class has it's own <code>somedata</code> dict) - but when is such behavior desirable?</p>
"
206823,14260,2008-10-15T22:49:36Z,8,Ruby to Python bridge,"<p>I am interested in getting some Python code talking to some Ruby code on Windows, Linux and possibly other platforms. Specificlly I would like to access classes in Ruby from Python and call their methods, access their data, create new instances and so on.</p>

<p>An obvious way to do this is via something like XML-RPC or maybe CORBA but I would be interested in any other approaches.</p>

<p>What have other people done to get code from Python and Ruby communicating with one another, either locally on the same system or remotely accross a network?</p>

<p>Thanks in advance.</p>
"
206855,7864,2008-10-15T23:04:13Z,12,Scrape a dynamic website,"<p>What is the best method to scrape a dynamic website where most of the content is generated by what appears to be ajax requests?  I have previous experience with a Mechanize, BeautifulSoup, and python combo, but I am up for something new.</p>

<p>--Edit--
For more detail: I'm trying to scrape the CNN <a href=""http://www.cnn.com/ELECTION/2008/primaries/results/state/"">primary database</a>.  There is a wealth of information there, but there doesn't appear to be an api.</p>
"
206916,NA,2008-10-15T23:35:52Z,1,Help with <key> event in python Entry widget,"<p>I'm writing some code in python and I'm having trouble when trying to retrieve content of an Entry widget.
The thing is: I want to limit the characters that can be typed, so I'm trying to clear the Entry widget when I reach the specific number of characters (2 in this case), but it looks like I always miss the last typed character. I added the lost character in a print to show.</p>

<p>Here's the sample code:</p>

<pre><code>from Tkinter import *
class sampleFrame:
    def __init__(self, master):
        self.__frame = Frame(master)
        self.__frame.pack()
    def get_frame(self):
        return self.__frame


class sampleClass:
    def __init__(self, master):
        self.__aLabel = Label(master,text=""aLabel"", width=10)
        self.__aLabel.pack(side=LEFT)
        self.__aEntry = Entry (master, width=2)
        self.__aEntry.bind('&lt;Key&gt;', lambda event: self.callback(event, self.__aEntry))
        self.__aEntry.pack(side=LEFT)

    def callback(self, event, widgetName):
        self.__value = widgetName.get()+event.char
        print self.__value
        if len(self.__value)&gt;2:
            widgetName.delete(2,4)





root = Tk()
aSampleFrame = sampleFrame(root)
aSampleClass = sampleClass(aSampleFrame.get_frame())
root.mainloop()
</code></pre>

<p>Any help will be much appreciated!</p>

<p>Thanks in advance</p>
"
207000,22897,2008-10-16T00:23:41Z,84,Python: Difference between class and instance attributes,"<p>Is there any meaningful distinction between:</p>

<pre><code>class A(object):
    foo = 5   # some default value
</code></pre>

<p>vs.</p>

<pre><code>class B(object):
    def __init__(self, foo=5):
        self.foo = foo
</code></pre>

<p>If you're creating a lot of instances, is there any difference in performance or space requirements for the two styles? When you read the code, do you consider the meaning of the two styles to be significantly different?</p>
"
207230,20879,2008-10-16T02:30:34Z,1,Hooking up GUI interface with asynchronous (s)ftp operation,"<p>Trying to implement a progress dialog window for file uploads that look like a cross between <a href=""http://www.codinghorror.com/blog/images/ie6-download-ui.png"" rel=""nofollow"">IE download dialog</a> and <a href=""http://www.codinghorror.com/blog/images/firefox2-download-ui.png"" rel=""nofollow"">Firefox download dialog</a> with a python GUI library on Windows.</p>

<ol>
<li>What asynchronous (S)FTP libraries are there for python? Ideally I should be able to do file upload resumes and track the progress of each parallel file uploads.</li>
<li>If I'm running each file upload in a separate process each, how would I get the upload status and display it in a progress bar dialog?</li>
</ol>
"
207234,2592,2008-10-16T02:32:33Z,23,List of IP addresses/hostnames from local network in Python,"<p>How can I get a list of the IP addresses or host names from a local network easily in Python?</p>

<p>It would be best if it was multi-platform, but it needs to work on Mac OS X first, then others follow.</p>

<p><strong>Edit:</strong> By local I mean all <strong>active</strong> addresses within a local network, such as <code>192.168.xxx.xxx</code>.</p>

<p>So, if the IP address of my computer (within the local network) is <code>192.168.1.1</code>, and I have three other connected computers, I would want it to return the IP addresses <code>192.168.1.2</code>, <code>192.168.1.3</code>, <code>192.168.1.4</code>, and possibly their hostnames.</p>
"
207290,13871,2008-10-16T03:02:27Z,1,extracting a parenthesized Python expression from a string,"<p>I've been wondering about how hard it would be to write some Python code to search a string for the index of a substring of the form <code>${</code><em>expr</em><code>}</code>, for example, where <em>expr</em> is meant to be a Python expression or something resembling one.  Given such a thing, one could easily imagine going on to check the expression's syntax with <code>compile()</code>, evaluate it against a particular scope with <code>eval()</code>, and perhaps even substitute the result into the original string.  People must do very similar things all the time.</p>

<p>I could imagine solving such a problem using a third-party parser generator [oof], or by hand-coding some sort of state machine [eek], or perhaps by convincing Python's own parser to do the heavy lifting somehow [hmm].  Maybe there's a third-party templating library somewhere that can be made to do exactly this.  Maybe restricting the syntax of <em>expr</em> is likely to be a worthwhile compromise in terms of simplicity or execution time or cutting down on external dependencies -- for example, maybe all I really need is something that matches any <em>expr</em> that has balanced curly braces.</p>

<p>What's your sense?</p>

<h2>Update:</h2>

<p>Thanks very much for your responses so far!  Looking back at what I wrote yesterday, I'm not sure I was sufficiently clear about what I'm asking.  Template substitution is indeed an interesting problem, and probably much more useful to many more people than the expression extraction subproblem I'm wondering about, but I brought it up only as a simple example of how the answer to my question might be useful in real life.  Some other potential applications might include passing the extracted expressions to a syntax highlighter; passing the result to a real Python parser and looking at or monkeying with the parse tree; or using the sequence of extracted expressions to build up a larger Python program, perhaps in conjunction with some information taken from the surrounding text.</p>

<p>The <code>${</code><em>expr</em><code>}</code> syntax I mentioned is also intended as an example, and in fact I wonder if I shouldn't have used <code>$(</code><em>expr</em><code>)</code> as my example instead, because it makes the potential drawbacks of the obvious approach, along the lines of <code>re.finditer(r'$\{([^}]+)\}', s)</code>, a bit easier to see.  Python expressions can (and often do) contain the <code>)</code> (or <code>}</code>) character.  It seems possible that handling any of those cases might be much more trouble than it's worth, but I'm not convinced of that yet.  Please feel free to try to make this case!</p>

<p>Prior to posting this question, I spent quite a bit of time looking at Python template engines hoping that one might expose the sort of low-level functionality I'm asking about -- namely, something that can find expressions in a variety of contexts and tell me where they are rather than being limited to finding expressions embedded using a single hard-coded syntax, always evaluating them, and always substituting the results back into the original string.  I haven't figured out how to use any of them to solve my problem yet, but I do very much appreciate the suggestions regarding more to look at (can't believe I missed that wonderful list on the wiki!).  The API documentation for these things tends to be pretty high-level, and I'm not too familiar with the internals of any of them, so I'm sure I could use help looking at those and figuring out how to get them to do this sort of thing.</p>

<p>Thanks for your patience!</p>
"
207763,416,2008-10-16T08:21:22Z,6,Are there any IDE's that support Python 3 syntax?,"<p>I recently saw an announcement and <a href=""http://www.linux.com/feature/150399"" rel=""nofollow"">article</a> outlining the release of the first <a href=""http://www.python.org/download/releases/3.0/"" rel=""nofollow"">Python 3.0</a> release candidate. I was wondering whether there were any commercial, free, open source etc. IDE's that support its syntax.</p>
"
207939,10171,2008-10-16T09:33:39Z,9,Python module that implements ftps,"<p>I was wondering if anybody could point me towards a free ftps module for python.</p>

<p>I am a complete newbie to python, but this is something I need for a work project. I need an ftps client to connect to a 3rd party ftps server.</p>

<p>thanks,</p>

<p>David.</p>
"
207981,140995,2008-10-16T09:56:05Z,30,How to enable MySQL client auto re-connect with MySQLdb?,"<p>I came across PHP way of doing the trick:</p>

<pre><code>my_bool reconnect = 1;
mysql_options(&amp;mysql, MYSQL_OPT_RECONNECT, &amp;reconnect);
</code></pre>

<p>but no luck with MySQLdb (python-mysql).</p>

<p>Can anybody please give a clue? Thanks.</p>
"
208085,140995,2008-10-16T10:52:00Z,2,How to make Apache/mod_python process collect its zombies?,"<pre><code>Apache/2.2.6 (Unix) DAV/2 mod_python/3.2.8 Python/2.4.4 configured ...
</code></pre>

<p>One of apache processes spawns some long-running python script asynchronously, and apparently doesn't seem to collect its child process table entry. After that long-run-in-subprocess python script finishes - defunct python process has been left.</p>

<pre><code># ps -ef | grep httpd
root     23911     1  0 Oct15 ?        00:00:01 /usr/sbin/httpd
...
qa       23920 23911  0 Oct15 ?        00:00:00 /usr/sbin/httpd


# ps -ef | grep python
...
qa       28449 23920  0 12:38 ?        00:00:00 [python] &lt;defunct&gt;
</code></pre>

<p>What is the way to make the Apache process to collect its children? Is it possible to do the job via a mod_python request handler ( like PythonCleanupHandler for example)?</p>

<p>Thanks.</p>
"
208120,17451,2008-10-16T11:06:36Z,4,How to read and write multiple files?,"<p>I want to write a program for this: In a folder I have <em>n</em> number of files; first read one file and perform some operation then store result in a separate file. Then read 2nd file, perform operation again and save result in new 2nd file. Do the same procedure for <em>n</em> number of files. The program reads all files one by one and stores results of each file separately. Please give examples how I can do it.</p>
"
208894,825,2008-10-16T14:54:49Z,6,How to base64 encode a PDF file in Python,"<p>How should I base64 encode a PDF file for transport over XML-RPC in Python?</p>
"
209023,3834,2008-10-16T15:27:38Z,3,Django template with jquery: Ajax update on existing page,"<p>I have a Google App Engine that has a form. When the  user clicks on the submit button, AJAX operation will be called, and the server will output something to append to the end of the very page where it comes from. How, I have a Django template, and I intend to use jquery. I have the following view:</p>

<pre><code>&lt;html&gt;
&lt;head&gt;
&lt;title&gt;&lt;/title&gt;
&lt;script type=""text/javascript"" src=""scripts/jquery.js""&gt;&lt;/script&gt;
&lt;script type=""text/javascript"" src=""scripts/scripts.js""&gt;&lt;/script&gt;

&lt;/head&gt;
&lt;body&gt;
welcome
&lt;form id=""SubmitForm"" action=""/"" method=""POST""&gt; 
&lt;input type=""file"" name=""vsprojFiles"" /&gt;
&lt;br/&gt;
&lt;input type=""submit"" id=""SubmitButton""/&gt;
&lt;/form&gt;

&lt;div id=""Testing""&gt;
{{thebest}}
&lt;/div&gt;

&lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>Here's the script in scripts.js:</p>

<pre><code>$(function() {
    $(""#SubmitForm"").click(submitMe);
});

var submitMe = function(){
    //alert('no way');
    var f = $('#SubmitForm');
    var action = f.attr(""action"");
    var serializedForm = f.serialize();
  $.ajax( {
        type: 'post',
        data: serializedForm,
        url:  form_action,
        success: function( result ) {
          $('#SubmitForm').after( ""&lt;div&gt;&lt;tt&gt;"" +
                                     result +
                                     ""&lt;/tt&gt;&lt;/div&gt;"" );
        }
      } );

    };
</code></pre>

<p>And here's my controller code:</p>

<pre><code>from google.appengine.api import users
from google.appengine.ext import webapp
from google.appengine.ext import db
from google.appengine.ext.webapp import template
from google.appengine.api.urlfetch_errors import *
import cgi
import wsgiref.handlers
import os
import sys
import re
import urllib
from django.utils import simplejson

class MainPage(webapp.RequestHandler):
    def get(self):
        path = os.path.join(os.path.dirname(__file__), 'Index.html')
        template_values={'thebest': 'thebest'}
        tmplRender =template.render(path, template_values)
        self.response.out.write(tmplRender)
        pass

    def Post(self):
        print &gt;&gt;sys.__stderr__,'me posting'
        result = 'grsgres'
        self.response.out.write(simplejson.dumps(result))
</code></pre>

<p>As you can see, when the user clicks on the submitbutton, the controller method Mainpage.post will be called.</p>

<p>Now I want to display the content of the 'result' variable right after the form, how can I do it?</p>
"
209429,173,2008-10-16T16:58:43Z,1,Why do I receive an ImportError when running one of the CherryPy tutorials,"<p>I have installed CherryPy 3.1.0,. Here is what happens when I try to run tutorial 9:</p>

<pre><code>$ cd /Library/Python/2.5/site-packages/cherrypy/tutorial/
$ python tut09_files.py
Traceback (most recent call last):
  File ""tut09_files.py"", line 48, in &lt;module&gt;
    from cherrypy.lib import static
ImportError: cannot import name static
</code></pre>

<p>The previous line in the file:</p>

<pre><code>import cherrypy
</code></pre>

<p>passes without error, so it appears that it can find cherrypy on the path. What am I missing?</p>
"
209470,27074,2008-10-16T17:11:37Z,207,Can I use Python as a Bash replacement?,"<p>I currently do my textfile manipulation through a bunch of badly remembered AWK, sed, Bash and a tiny bit of Perl.</p>

<p>I've seen mentioned a few places that python is good for this kind of thing, I know a little and I would like to know more. Is Python a good choice for this, and is there a good book or guide to learning how to use Python to replace shell scripting, AWK, sed and friends?</p>
"
209484,3045,2008-10-16T17:16:34Z,6,Howto do python command-line autocompletion but NOT only at the beginning of a string,"<p>Python, through it's readline bindings allows for great command-line autocompletion (as described in <a href=""http://stackoverflow.com/questions/187621/how-to-make-a-python-command-line-program-autocomplete-arbitrary-things-not-int"">here</a>).</p>

<p>But, the completion only seems to work at the beginning of strings.  If you want to match the middle or end of a string readline doesn't work.</p>

<p>I would like to autocomplete strings, in a command-line python program by matching what I type with any of the strings in a list of available strings.  </p>

<ul>
<li>A good example of the type of autocompletion I would like to have is the type that happens in GMail when you type in the To field.  If you type one of your contacts' last name, it will come up just as well as if you typed her first name.  </li>
<li>Some use of the up and down arrows or some other method to select from the matched strings may be needed (and not needed in the case of readline) and that is fine in my case.</li>
<li>My particular use case is a command-line program that sends emails.</li>
<li>Specific code examples would be very helpful.</li>
</ul>

<p>Using terminal emulators like curses would be fine.  It only has to run on linux, not Mac or Windows.</p>

<p>Here is an example:
Say I have the following three strings in a list </p>

<pre><code>['Paul Eden &lt;paul@domain.com&gt;', 
'Eden Jones &lt;ejones@domain.com&gt;', 
'Somebody Else &lt;somebody@domain.com&gt;']
</code></pre>

<p>I would like some code that will autocomplete the first two items in the list after I type 'Eden' and then allow me to pick one of them (all through the command-line using the keyboard).</p>
"
209513,17693,2008-10-16T17:28:03Z,414,Convert hex string to int in Python,"<p>How do I convert a hex string to an int in Python? </p>

<p>I may have it as ""<code>0xffff</code>"" or just ""<code>ffff</code>"".</p>
"
209840,12388,2008-10-16T19:05:47Z,435,Map two lists into a dictionary in Python,"<p>Imagine that you have:</p>

<pre><code>keys = ('name', 'age', 'food')
values = ('Monty', 42, 'spam')
</code></pre>

<p>What is the simplest way to produce the following dictionary ?</p>

<pre><code>dict = {'name' : 'Monty', 'age' : 42, 'food' : 'spam'}
</code></pre>

<p>This code works, but I'm not really proud of it :</p>

<pre><code>dict = {}
junk = map(lambda k, v: dict.update({k: v}), keys, values)
</code></pre>
"
210067,2599,2008-10-16T20:03:39Z,1,Advanced Python FTP - can I control how ftplib talks to a server?,"<p>I need to send a very specific (non-standard) string to an FTP server:</p>

<pre><code>dir ""SYS:\IC.ICAMA.""
</code></pre>

<p>The case is critical, as are the style of quotes and their content.</p>

<p>Unfortunately, ftplib.dir() seems to use the 'LIST' command rather than 'dir' (and it uses the wrong case for this application).</p>

<p>The FTP server is actually a telephone switch and it's a very non-standard implementation.</p>

<p>I tried using ftplib.sendcmd(), but it also sends 'pasv' as part of the command sequence.</p>

<p>Is there an easy way of issuing specific commands to an FTP server?</p>
"
210344,23002,2008-10-16T21:13:29Z,1,"py3k RC-1: ""LookupError: unknown encoding: uft-8""","<p>I just installed the first release candidate of Python 3.0 and got this error after typing:</p>

<pre><code>&gt;&gt;&gt; help('modules foo')
</code></pre>

<pre>[...]
LookupError: unknown encoding: uft-8</pre>

<p>Notice that it says <strong>uft</strong>-8 and not <strong>utf</strong>-8</p>

<p>Is this a py3k specific bug or a misconfiguration on my part? I do not have any other versions of Python installed on this French locale Windows XP SP3 machine.</p>

<p><strong>Edit</strong></p>

<p>A <a href=""http://bugs.python.org/issue4135?@ok_message=msg%2074871%20created%3Cbr%3Eissue%204135%20created&amp;@template=item"" rel=""nofollow"">bug</a> has been filled by <a href=""http://stackoverflow.com/users/22899/alex-coventry"">Alex Coventry</a> on October 16th.</p>
"
210461,3653,2008-10-16T22:00:41Z,5,Distributing a stand-alone Python web-based application to non-technical users,"<p>I'm writing a web application in Python, intended for use by teachers and pupils in a classroom. It'll run from a hosted website, but I also want people to be able to download a self-contained application they can install locally if they want more performance or they simply won't have an Internet connection available in the classroom.</p>

<p>The users aren't going to be able to manage instructions like ""first install Python, then install dependencies, download the .tar.gz archive and type these commands into the command line..."". I need to be able to create an all-in-one type installer that can potentially install Python, dependencies (Python-LDAP), some Python code, and register a Python-based web server as a Windows Service.</p>

<p>I've had a look through previous questions, but none quite seem relevant. I'm not concerned about the security of source code (my application will be open source, I'll sell content to go with it), I just need non-technical Windows users to be able to download and use my application with no fuss.</p>

<p>My current thoughts are to use <a href=""http://nsis.sourceforge.net/Main_Page"" rel=""nofollow"">NSIS</a> to create an installer that includes Python and Python-LDAP as MSIs, then registers my own simple Python-based web server as a Windows service and puts a shortcut in the start menu / on the desktop linking to <a href=""http://localhost"" rel=""nofollow"">http://localhost</a>. Is this doable with NSIS - can NSIS check for currently installed copies of Python, for instance? Is there a better way of doing this - is there a handy framework available that lets me shove my code in a folder and bundle it up to make an installer?</p>
"
210522,NA,2008-10-16T22:29:13Z,0,I need some help with cursor event handling in python+Tkinter,"<p>I'm building a code in which I'd like to be able to generate an event when the user changes the focus of the cursor from an Entry widget to anywhere, for example another entry widget, a button...</p>

<p>So far i only came out with the idea to bind to TAB and mouse click, although if i bind the mouse click to the Entry widget i only get mouse events when inside the Entry widget.</p>

<p>How can i accomplish to generate events for when a widget loses cursor focus?</p>

<p>Any help will be much appreciated!</p>

<p>Thanks in advance!</p>

<p>William.</p>
"
210629,18770,2008-10-16T23:25:31Z,24,Python: unsigned 32 bit bitwise arithmetic,"<p>Trying to answer to another post whose solution deals with IP addresses and netmasks, I got stuck with plain bitwise arithmetic.</p>

<p>Is there a standard way, in Python, to carry on bitwise AND, OR, XOR, NOT operations assuming that the inputs are ""32 bit"" (maybe negative) integers or longs, and that the result must be a long in the range [0, 2**32]?</p>

<p>In other words, I need a working Python counterpart to the C bitwise operations between  unsigned longs.</p>

<p>EDIT: the specific issue is this:</p>

<pre><code>&gt;&gt;&gt; m = 0xFFFFFF00   # netmask 255.255.255.0
&gt;&gt;&gt; ~m
-4294967041L         # wtf?! I want 255
</code></pre>
"
210978,28804,2008-10-17T03:04:38Z,6,Using os.execvp in Python,"<p>I have a question about using <code>os.execvp</code> in Python. I have the following bit of code that's used to create a list of arguments:</p>

<pre>
args = [ ""java""
       , classpath
       , ""-Djava.library.path="" + lib_path()
       , ea
       , ""-Xmx1000m""
       , ""-server""
       , ""code_swarm""
       , params
       ]
</pre>

<p>When I output a string using <code>"" "".join(args)</code> and paste that into my shell prompt, the JVM launches fine, and everything works. Everything works if I use <code>os.system("" "".join(args))</code> in my Python script, too.</p>

<p><em>But</em> the following bit of code does not work:</p>

<pre>os.execvp(""java"", args)</pre>

I get the following error:

<pre>
Unrecognized option: -classpath [and then the classpath I created, which looks okay]
Could not create the Java virtual machine.
</pre>

<p>So what gives? Why does copying/pasting into the shell or using <code>os.system()</code> work, but not <code>os.execvp()</code>?</p>
"
211046,15055,2008-10-17T04:07:42Z,0,Create an icon in memory with win32 in python,"<p>What's a good way to generate an icon in-memory in python? Right now I'm forced to use pygame to draw the icon, then I save it to disk as an .ico file, and then I load it from disk as an ICO resource...</p>

<p>Something like this:</p>

<pre><code>    if os.path.isfile(self.icon):
        icon_flags = win32con.LR_LOADFROMFILE | win32con.LR_DEFAULTSIZE
        hicon = win32gui.LoadImage(hinst,
                                   self.icon,
                                   win32con.IMAGE_ICON,
                                   0,
                                   0,
                                   icon_flags)
</code></pre>

<p>...where self.icon is the filename of the icon I created.</p>

<p>Is there any way to do this in memory? EDIT: All I want to do is create an icon with a 2-digit number displayed on it (weather-taskbar style.</p>
"
211100,3119,2008-10-17T04:46:08Z,40,Python's __import__ doesn't work as expected,"<p>When using <code>__import__</code> with a dotted name, something like: <code>somepackage.somemodule</code>, the module returned isn't <code>somemodule</code>, whatever is returned seems to be mostly empty! what's going on here?</p>
"
211118,28809,2008-10-17T04:57:22Z,4,"How to build ""Tagging"" support using CouchDB?","<p>I'm using the following view function to iterate over all items in the database (in order to find a tag), but I think the performance is very poor if the dataset is large.
Any other approach?</p>

<pre><code>def by_tag(tag):
return  '''
        function(doc) {
            if (doc.tags.length &gt; 0) {
                for (var tag in doc.tags) {
                    if (doc.tags[tag] == ""%s"") {
                        emit(doc.published, doc)
                    }
                }
            }
        };
        ''' % tag
</code></pre>
"
211160,15055,2008-10-17T05:30:49Z,50,Python Inverse of a Matrix,"<p>How do I get the inverse of a matrix in python? I've implemented it myself, but it's pure python, and I suspect there are faster modules out there to do it.</p>
"
211483,23402,2008-10-17T08:55:21Z,0,arguments to cryptographic functions,"<p>I'm a bit confused that the argument to crypto functions is a string. Should I simply wrap non-string arguments with str() e.g.</p>

<pre><code>hashlib.sha256(str(user_id)+str(expiry_time))
hmac.new(str(random.randbits(256)))
</code></pre>

<p>(ignore for the moment that random.randbits() might not be cryptographically good).
edit: I realise that the hmac example is silly because I'm not storing the key anywhere!</p>
"
211501,18676,2008-10-17T09:02:12Z,13,Using SQLite in a Python program,"<p>I have created a Python module that creates and populates several SQLite tables. Now, I want to use it in a program but I don't really know how to call it properly. All the tutorials I've found are essentially ""inline"", i.e. they walk through using SQLite in a linear fashion rather than how to actually use it in production.</p>

<p>What I'm trying to do is have a method check to see if the database is already created. If so, then I can use it. If not, an exception is raised and the program will create the database. (Or use if/else statements, whichever is better).</p>

<p>I created a test script to see if my logic is correct but it's not working. When I create the try statement, it just creates a new database rather than checking if one already exists. The next time I run the script, I get an error that the table already exists, even if I tried catching the exception. (I haven't used try/except before but figured this is a good time to learn).</p>

<p>Are there any good tutorials for using SQLite operationally or any suggestions on how to code this? I've looked through the pysqlite tutorial and others I found but they don't address this.</p>
"
211695,24478,2008-10-17T10:47:49Z,9,What is an easy way to create a trivial one-off Python object?,"<p>I would like to create a trivial one-off Python object to hold some command-line options.  I would like to do something like this:</p>

<pre><code>options = ??????
options.VERBOSE = True
options.IGNORE_WARNINGS = False

# Then, elsewhere in the code...
if options.VERBOSE:
    ...
</code></pre>

<p>Of course I could use a dictionary, but <code>options.VERBOSE</code> is more readable and easier to type than <code>options['VERBOSE']</code>.</p>

<p>I <em>thought</em> that I should be able to do</p>

<pre><code>options = object()
</code></pre>

<p>, since <code>object</code> is the base type of all class objects and therefore should be something like a class with no attributes.  But it doesn't work, because an object created using <code>object()</code> doesn't have a <code>__dict__</code> member, and so one cannot add attributes to it:</p>

<pre><code>options.VERBOSE = True
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
AttributeError: 'object' object has no attribute 'VERBOSE'
</code></pre>

<p>What is the simplest ""pythonic"" way to create an object that can be used this way, preferably without having to create an extra helper class?</p>
"
212125,305,2008-10-17T13:34:03Z,3,Turning a GqlQuery result set into a python dictionary,"<p>Let's say I have a model like this</p>

<pre><code>class Foo(db.Model):
    id = db.StringProperty()
    bar = db.StringProperty()
    baz = db.StringProperty()
</code></pre>

<p>And I'm going a GqlQuery like this</p>

<pre><code>foos = db.GqlQuery(""SELECT * FROM Foo"")
</code></pre>

<p><strong>I want to take the results of the GqlQuery and turn into some sort of JSON string that I can manipulate from different languages.</strong></p>

<p><hr /></p>

<p>Here's how I'm doing it now</p>

<ol>
<li><p>Add a method to the <strong>Foo</strong> class that converts it into a dictionary</p>

<pre><code>def toDict(self):
    return {
         'id': self.id,
         'bar': self.bar,
         'baz': self'baz
       }
</code></pre></li>
<li><p>Loop through the GqlQuery results and manually add each Foo instance to a dictionary</p>

<pre><code>fooDict = {}


for foo in foos:
    fooDict[foo.id] = foo.toDict()


return simplejson.dumps(fooDict)
</code></pre></li>
</ol>

<p><hr /></p>

<p>My approach above works but it feels kind of gross.</p>

<p>Is there a cleaner, more ""Pythonic"" way to handle this?</p>

<p><strong>The end format doesn't have to be exactly what I've done above.  It just has to be something that converts nicely to JSON so I can deal with it from Javascript/PHP/whatever.</strong></p>
"
212358,15682,2008-10-17T14:23:17Z,129,Binary search (bisection) in Python,"<p>Is there a library function that performs binary search on a list/tuple and return the position of the item if found and 'False' (-1, None, etc.) if not?</p>

<p>I found the functions bisect_left/right in the <a href=""http://docs.python.org/library/bisect.html"">bisect module</a>, but they still return a position even if the item is not in the list. That's perfectly fine for their intended usage, but I just want to know if an item is in the list or not (don't want to insert anything).</p>

<p>I thought of using <code>bisect_left</code> and then checking if the item at that position is equal to what I'm searching, but that seems cumbersome (and I also need to do bounds checking if the number can be larger than the largest number in my list). If there is a nicer method I'd like to know about it.</p>

<p><strong>Edit</strong> To clarify what I need this for: I'm aware that a dictionary would be very well suited for this, but I'm trying to keep the memory consumption as low as possible. My intended usage would be a sort of double-way look-up table. I have in the table a list of values and I need to be able to access the values based on their index. And also I want to be able to find the index of a particular value or None if the value is not in the list.</p>

<p>Using a dictionary for this would be the fastest way, but would (approximately) double the memory requirements.</p>

<p>I was asking this question thinking that I may have overlooked something in the Python libraries. It seems I'll have to write my own code, as Moe suggested.</p>
"
212715,28984,2008-10-17T15:47:40Z,12,Opening a handle to a device in Python on Windows,"<p>I'm trying to use the giveio.sys driver which requires a ""file"" to be opened before you can access protected memory.  I'm looking at a C example from WinAVR/AVRdude that uses the syntax:</p>



<pre class=""lang-c prettyprint-override""><code> #define DRIVERNAME      ""\\\\.\\giveio""
 HANDLE h = CreateFile(DRIVERNAME,
            GENERIC_READ,
            0,
            NULL,
            OPEN_EXISTING,
            FILE_ATTRIBUTE_NORMAL,
            NULL);
</code></pre>

<p>but this does not seem to work in Python - I just get a ""The specified path is invalid"" error, for both</p>

<pre><code>f = os.open(""\\\\.\\giveio"", os.O_RDONLY)
</code></pre>

<p>and </p>

<pre><code>f = os.open(""//./giveio"", os.O_RDONLY)
</code></pre>

<p>Why doesn't this do the same thing?</p>

<p><strong>Edited</strong> to hopefully reduce confusion of ideas (thanks Will).
I did verify that the device driver is running via the batch files that come with AVRdude.</p>

<p><strong>Further edited</strong> to clarify SamB's bounty.</p>
"
212797,2010,2008-10-17T16:10:51Z,11,Keyboard interruptable blocking queue in Python,"<p>It seems</p>

<pre><code>import Queue

Queue.Queue().get(timeout=10)
</code></pre>

<p>is keyboard interruptible (ctrl-c) whereas</p>

<pre><code>import Queue

Queue.Queue().get()
</code></pre>

<p>is not. I could always create a loop;</p>

<pre><code>import Queue
q = Queue()

while True:
    try:
        q.get(timeout=1000)
    except Queue.Empty:
        pass
</code></pre>

<p>but this seems like a strange thing to do.</p>

<p>So, is there a way of getting an indefinitely waiting but keyboard interruptible Queue.get()?</p>
"
212941,2351,2008-10-17T16:53:23Z,20,Using django-rest-interface,"<p>I have a django application that I'd like to add some rest interfaces to.  I've seen <a href=""http://code.google.com/p/django-rest-interface/"">http://code.google.com/p/django-rest-interface/</a> but it seems to be pretty simplistic.  For instance it doesn't seem to have a way of enforcing security.  How would I go about limiting what people can view and manipulate through the rest interface?  Normally I'd put this kind of logic in my views.  Is this the right place or should I be moving some more logic down into the model?  Alternatively is there a better library out there or do I need to roll my own?</p>
"
213237,19212,2008-10-17T18:16:07Z,0,"In Django, how could one use Django's update_object generic view to edit forms of inherited models?","<p>In Django, given excerpts from an application <em>animals</em> likeso:</p>

<p>A <em>animals/models.py</em> with: </p>

<pre><code>from django.db import models
from django.contrib.contenttypes.models import ContentType

class Animal(models.Model):
  content_type = models.ForeignKey(ContentType,editable=False,null=True)
  name = models.CharField()

class Dog(Animal):
  is_lucky = models.BooleanField()

class Cat(Animal):
  lives_left = models.IntegerField()
</code></pre>

<p>And an <em>animals/urls.py</em>:</p>

<pre><code>from django.conf.urls.default import *

from animals.models import Animal, Dog, Cat

dict = { 'model' : Animal }

urlpatterns = (
  url(r'^edit/(?P&lt;object_id&gt;\d+)$', 'create_update.update_object', dict),
)
</code></pre>

<p>How can one use generic views to edit Dog and/or Cat using the same form?</p>

<p>I.e. The <em>form</em> object that is passed to *animals/animal_form.html* will be Animal, and thus won't contain any of the specifics for the derived classes Dog and Cat. How could I have Django automatically pass a form for the child class to *animal/animals_form.html*?</p>

<p>Incidentally, I'm using <a href=""http://www.djangosnippets.org/snippets/1031/"" rel=""nofollow"">Djangosnippets #1031</a> for ContentType management, so Animal would have a method named *as_leaf_class* that returns the derived class.</p>

<p>Clearly, one could create forms for each derived class, but that's quite a lot of unnecessary duplication (as the templates will all be generic -- essentially {{ form.as_p }}).</p>

<p>Incidentally, it's best to assume that Animal will probably be one of several unrelated base classes with the same problem, so an ideal solution would be generic.</p>

<p>Thank you in advance for the help.</p>
"
213455,24798,2008-10-17T19:05:20Z,9,python threadsafe object cache,"<p>I have implemented a python webserver. Each http request spawns a new thread.
I have a requirement of caching objects in memory and since its a webserver, I want the cache to be thread safe. Is there a standard implementatin of a thread safe object cache in python? I found the following </p>

<p><a href=""http://freshmeat.net/projects/lrucache/"">http://freshmeat.net/projects/lrucache/</a></p>

<p>This does not look to be thread safe. Can anybody point me to a good implementation of thread safe cache in python?</p>

<p>Thanks!</p>
"
213483,24798,2008-10-17T19:12:38Z,13,A good multithreaded python webserver?,"<p>I am looking for a python webserver which is multithreaded instead of being multi-process (as in case of mod_python for apache). I want it to be multithreaded because I want to have an in memory object cache that will be used by various http threads. My webserver does a lot of expensive stuff and computes some large arrays which needs to be cached in memory for future use to avoid recomputing. This is not possible in a multi-process web server environment. Storing this information in memcache is also not a good idea as the arrays are large and storing them in memcache would lead to deserialization of data coming from memcache apart from the additional overhead of IPC.</p>

<p>I implemented a simple webserver using BaseHttpServer, it gives good performance but it gets stuck after a few hours time. I need some more matured webserver. Is it possible to configure apache to use mod_python under a thread model so that I can do some object caching?</p>
"
213628,17498,2008-10-17T19:58:07Z,7,How to convert a C string (char array) into a Python string when there are non-ASCII characters in the string?,"<p>I have embedded a Python interpreter in a C program.  Suppose the C program reads some bytes from a file into a char array and learns (somehow) that the bytes represent text with a certain encoding (e.g., ISO 8859-1, Windows-1252, or UTF-8).  How do I decode the contents of this char array into a Python string?</p>

<p>The Python string should in general be of type <code>unicode</code>—for instance, a <code>0x93</code> in Windows-1252 encoded input becomes a <code>u'\u0201c'</code>.</p>

<p>I have attempted to use <code>PyString_Decode</code>, but it always fails when there are non-ASCII characters in the string.  Here is an example that fails:</p>

<pre><code>#include &lt;Python.h&gt;
#include &lt;stdio.h&gt;

int main(int argc, char *argv[])
{
     char c_string[] = { (char)0x93, 0 };
     PyObject *py_string;

     Py_Initialize();

     py_string = PyString_Decode(c_string, 1, ""windows_1252"", ""replace"");
     if (!py_string) {
          PyErr_Print();
          return 1;
     }
     return 0;
}
</code></pre>

<p>The error message is <code>UnicodeEncodeError: 'ascii' codec can't encode character u'\u201c' in position 0: ordinal not in range(128)</code>, which indicates that the <code>ascii</code> encoding is used even though we specify <code>windows_1252</code> in the call to <code>PyString_Decode</code>.</p>

<p>The following code works around the problem by using <code>PyString_FromString</code> to create a Python string of the undecoded bytes, then calling its <code>decode</code> method:</p>

<pre><code>#include &lt;Python.h&gt;
#include &lt;stdio.h&gt;

int main(int argc, char *argv[])
{
     char c_string[] = { (char)0x93, 0 };
     PyObject *raw, *decoded;

     Py_Initialize();

     raw = PyString_FromString(c_string);
     printf(""Undecoded: "");
     PyObject_Print(raw, stdout, 0);
     printf(""\n"");
     decoded = PyObject_CallMethod(raw, ""decode"", ""s"", ""windows_1252"");
     Py_DECREF(raw);
     printf(""Decoded: "");
     PyObject_Print(decoded, stdout, 0);
     printf(""\n"");
     return 0;
}
</code></pre>
"
213798,1512,2008-10-17T20:48:26Z,20,Would Python make a good substitute for the Windows command-line/batch scripts?,"<p>I've got some experience with <a href=""http://en.wikipedia.org/wiki/Bash_%28Unix_shell%29"">Bash</a>, which I don't mind, but now that I'm doing a lot of Windows development I'm needing to do basic stuff/write basic scripts using 
the Windows command-line language. For some reason said language really irritates me, so I was considering learning Python and using that instead.</p>

<p>Is Python suitable for such things? Moving files around, creating scripts to do things like unzipping a backup and restoring a SQL database, etc.</p>
"
213838,13990,2008-10-17T21:02:43Z,3,How to improve Trac's performance,"<p>I have noticed that my particular instance of Trac is not running quickly and has big lags.  This is at the very onset of a project, so not much is in Trac (except for plugins and code loaded into SVN).</p>

<p><strong>Setup Info:</strong> This is via a SELinux system hosted by WebFaction.  It is behind Apache, and connections are over SSL.  Currently the .htpasswd file is what I use to control access.</p>

<p>Are there any recommend ways to improve the performance of Trac?</p>
"
214059,7598,2008-10-17T22:32:58Z,2,How can I write a wrapper around ngrep that highlights matches?,"<p>I just learned about <a href=""http://ngrep.sourceforge.net/"" rel=""nofollow"">ngrep</a>, a cool program that lets you easily sniff packets that match a particular string.</p>

<p>The only problem is that it can be hard to see the match in the big blob of output. I'd like to write a wrapper script to highlight these matches -- it could use ANSI escape sequences:</p>

<pre><code>echo -e 'This is \e[31mRED\e[0m.'
</code></pre>

<p>I'm most familiar with Perl, but I'm perfectly happy with a solution in Python or any other language. The simplest approach would be something like:</p>

<pre><code>while (&lt;STDIN&gt;) {
   s/$keyword/\e[31m$keyword\e[0m/g;
   print;
}
</code></pre>

<p>However, this isn't a nice solution, because ngrep prints out hash marks without newlines whenever it receives a non-matching packet, and the code above will suppress the printing of these hashmarks until the script sees a newline.</p>

<p>Is there any way to do the highlighting without inhibiting the instant appearance of the hashmarks?</p>
"
214430,52490,2008-10-18T02:29:02Z,1,Using trellis as a framework for managing UI interaction rules,"<p>Does anyone have experience with <a href=""http://pypi.python.org/pypi/Trellis"" rel=""nofollow"">trellis</a>?  Looking at it as a framework for defining rules for field interaction and validation in grids and data entry screens.</p>
"
214536,2147,2008-10-18T03:56:06Z,5,Python templates for web designers,"<p>What are some good templating engines for web designers?  I definitely have my preferences as to what I'd prefer to work with as a programmer.  But web designers seem to have a different way of thinking about things and thus may prefer a different system.</p>

<p>So:</p>

<ul>
<li>Web designers:  what templating engine do you prefer to work with?</li>
<li>programmers:  what templating engines have you worked with that made working with web designers easy?</li>
</ul>
"
214549,17498,2008-10-18T04:03:35Z,7,How to create a numpy record array from C,"<p>On the Python side, I can create new numpy record arrays as follows:</p>

<pre><code>numpy.zeros((3,), dtype=[('a', 'i4'), ('b', 'U5')])
</code></pre>

<p>How do I do the same from a C program?  I suppose I have to call <code>PyArray_SimpleNewFromDescr(nd, dims, descr)</code>, but how do I construct a <code>PyArray_Descr</code> that is appropriate for passing as the third argument to <code>PyArray_SimpleNewFromDescr</code>?</p>
"
214777,10708,2008-10-18T08:53:02Z,18,How do you convert YYYY-MM-DDTHH:mm:ss.000Z time format to MM/DD/YYYY time format in Python?,"<p>For example, I'm trying to convert 2008-09-26T01:51:42.000Z to 09/26/2008. What's the simplest way of accomplishing this?</p>
"
214852,6266,2008-10-18T10:17:58Z,11,python module dlls,"<p>Is there a way to make a python module load a dll in my application directory rather than the version that came with the python installation, without making changes to the python installation (which would then require I made an installer, and be careful I didn't break other apps for people by overwrting python modules and changing dll versions globaly...)?</p>

<p>Specifically I would like python to use my version of the sqlite3.dll, rather than the version that came with python (which is older and doesn't appear to have the fts3 module).</p>
"
214881,745,2008-10-18T10:47:21Z,72,Can you add new statements to Python's syntax?,"<p>Can you add new statements (like <code>print</code>, <code>raise</code>, <code>with</code>) to Python's syntax?</p>

<p>Say, to allow..</p>

<pre><code>mystatement ""Something""
</code></pre>

<p>Or,</p>

<pre><code>new_if True:
    print ""example""
</code></pre>

<p>Not so much if you <em>should</em>, but rather if it's possible (short of modifying the python interpreters code)</p>
"
215052,29219,2008-10-18T13:36:15Z,3,Efficient Image Thumbnail Control for Python?,"<p>What is the best choice for a Python GUI application to display large number of thumbnails, e.g. 10000 or more? For performance reasons such thumbnail control must support virtual items, i.e. request application for those thumbnails only which are currently visible to user. </p>
"
215132,6266,2008-10-18T15:02:48Z,2,wxpython - Expand list control vertically not horizontally,"<p>I have a ListCtrl that displays a list of items for the user to select. This works fine except that when the ctrl is not large enough to show all the items, I want it to expand downwards with a vertical scoll bar rather than using a horizontal scroll bar as it expands to the right.</p>

<p>The ListCtrl's creation:</p>

<pre><code>self.subjectList = wx.ListCtrl(self, self.ID_SUBJECT, style = wx.LC_LIST | wx.LC_SINGLE_SEL | wx.LC_VRULES)
</code></pre>

<p>Items are inserted using wx.ListItem:</p>

<pre><code>item = wx.ListItem()
item.SetText(subject)
item.SetData(id)
item.SetWidth(200)
self.subjectList.InsertItem(item)
</code></pre>
"
215267,10116,2008-10-18T16:51:02Z,1,How do you fix a Trac installation that begins giving errors relating to PYTHON_EGG_CACHE?,"<p>We've been using Trac for task/defect tracking and things were going well enough, but this morning it started serving up a 500 error. Looking in the Apache error_log, I get a stack trace that culminates in:</p>

<pre>
PythonHandler trac.web.modpython_frontend:
  ExtractionError: Can't extract file(s) to egg cache

The following error occurred while trying to extract file(s) to the Python egg
cache:

  [Errno 13] Permission denied: '/.python-eggs'

The Python egg cache directory is currently set to:

  /.python-eggs

Perhaps your account does not have write access to this directory?  You can
change the cache directory by setting the PYTHON_EGG_CACHE environment
variable to point to an accessible directory
</pre>

<p>So I explicitly set PYTHON_EGG_CACHE to /srv/trac/plugin-cache. I restarted Apache. Yet I get the same error (it still says ""egg cache directory current set to: \n\n /.python_eggs."")</p>

<p>How should I proceed? Is the simplest thing to do to reinstall Trac? If I go that route, what steps do I need to take to ensure that I don't lose existing data?</p>
"
215542,14540,2008-10-18T20:38:57Z,7,What's a good library to manipulate Apache2 config files?,"<p>I'd like to create a script to manipulate Apache2 configuration directly, reading and writing its properties (like adding a new VirtualHost, changing settings of one that already exists).</p>

<p>Are there any libs out there, for Perl, Python or Java that automates that task?</p>
"
215570,10708,2008-10-18T21:12:07Z,10,What's the difference between a parent and a reference property in Google App Engine?,"<p>From what I understand, the parent attribute of a db.Model (typically defined/passed in the constructor call) allows you to define hierarchies in your data models. As a result, this increases the size of the entity group. However, it's not very clear to me why we would want to do that. Is this strictly for ACID compliance? I would like to see scenarios where each is best suited or more appropriate.</p>
"
215581,14732,2008-10-18T21:18:46Z,44,What is the purpose of the colon before a block in Python?,"<p>What is the purpose of the colon before a block in Python?</p>

<p>Example:</p>

<pre><code>if n == 0:
    print ""The end""
</code></pre>
"
215667,NA,2008-10-18T22:37:05Z,2,How do I find all cells with a particular attribute in BeautifulSoup?,"<p>Hi
I am trying to develop a script to pull some data from a large number of html tables.  One problem is that the number of rows that contain the information to create the column headings is indeterminate.  I have discovered that the last row of the set of header rows has the attribute border-bottom for each cell with a value.  Thus I decided to find those cells with the attribute border-bottom.  As you can see I initialized a list.  I intended to find the parent of each of the cells that end up in the borderCells list.  However, when I run this code only one cell, that is the first cell in allCells with the attribute border-bottom is added to the list borderCells.  For your information allCells has 193 cells, 9 of them have the attr border-bottom.  Thus I was expecting nine members in the borderCells list.  Any help is appreciated.</p>

<pre><code>borderCells=[]
for each in allCells:
if each.find(attrs={""style"": re.compile(""border-bottom"")}):
	borderCells.append(each)
</code></pre>
"
215689,8482,2008-10-18T23:07:28Z,13,Why Python decorators rather than closures?,"<p>I still haven't got my head around decorators in Python.</p>

<p>I've already started using a lot of closures to do things like customize functions and classes in my coding.</p>

<p>Eg.</p>

<pre><code>class Node :
    def __init__(self,val,children) :
        self.val = val
        self.children = children

def makeRunner(f) :
    def run(node) :
        f(node)
        for x in node.children :
            run(x)
    return run

tree=Node(1,[Node(2,[]),Node(3,[Node(4,[]),Node(5,[])])])

def pp(n) : print ""%s,"" % n.val
printTree = makeRunner(pp)
printTree(tree)
</code></pre>

<p>As far as I can see, decorators are just a different syntax for doing something similar. </p>

<p>Instead of </p>

<pre><code>def pp(n) : print ""%s,"" % n.val
printTree = makeRunner(pp)
</code></pre>

<p>I would write :</p>

<pre><code>@makeRunner
def printTree(n) : print ""%s,"" % n.val
</code></pre>

<p>Is this all there is to decorators? Or is there a fundamental difference that I've missed? </p>
"
215702,NA,2008-10-18T23:17:38Z,1,How can you use BeautifulSoup to get colindex numbers?,"<p>I had a problem a week or so ago.  Since I think the solution was cool I am sharing it here while I am waiting for an answer to the question I posted earlier.  I need to know the relative position for the column headings in a table so I know how to match the column heading up with the data in the rows below.  I found some of my tables had the following row as the first row in the table</p>

<pre><code>&lt;!-- Table Width Row --&gt;
&lt;TR style=""font-size: 1pt"" valign=""bottom""&gt;
&lt;TD width=""60%""&gt;&amp;nbsp;&lt;/TD&gt; &lt;!-- colindex=01 type=maindata --&gt;
&lt;TD width=""1%""&gt;&amp;nbsp;&lt;/TD&gt;  &lt;!-- colindex=02 type=gutter --&gt;
&lt;TD width=""1%"" align=""right""&gt;&amp;nbsp;&lt;/TD&gt;    &lt;!-- colindex=02 type=lead --&gt;
&lt;TD width=""9%"" align=""right""&gt;&amp;nbsp;&lt;/TD&gt;    &lt;!-- colindex=02 type=body --&gt;
&lt;TD width=""1%"" align=""left""&gt;&amp;nbsp;&lt;/TD&gt; &lt;!-- colindex=02 type=hang1 --&gt;

&lt;TD width=""3%""&gt;&amp;nbsp;&lt;/TD&gt;  &lt;!-- colindex=03 type=gutter --&gt;
&lt;TD width=""1%"" align=""right""&gt;&amp;nbsp;&lt;/TD&gt;    &lt;!-- colindex=03 type=lead --&gt;
&lt;TD width=""4%"" align=""right""&gt;&amp;nbsp;&lt;/TD&gt;    &lt;!-- colindex=03 type=body --&gt;
&lt;TD width=""1%"" align=""left""&gt;&amp;nbsp;&lt;/TD&gt; &lt;!-- colindex=03 type=hang1 --&gt;
&lt;TD width=""3%""&gt;&amp;nbsp;&lt;/TD&gt;  &lt;!-- colindex=04 type=gutter --&gt;
&lt;TD width=""1%"" align=""right""&gt;&amp;nbsp;&lt;/TD&gt;    &lt;!-- colindex=04 type=lead --&gt;

&lt;TD width=""4%"" align=""right""&gt;&amp;nbsp;&lt;/TD&gt;    &lt;!-- colindex=04 type=body --&gt;
&lt;TD width=""1%"" align=""left""&gt;&amp;nbsp;&lt;/TD&gt; &lt;!-- colindex=04 type=hang1 --&gt;
&lt;TD width=""3%""&gt;&amp;nbsp;&lt;/TD&gt;  &lt;!-- colindex=05 type=gutter --&gt;
&lt;TD width=""1%"" align=""right""&gt;&amp;nbsp;&lt;/TD&gt;    &lt;!-- colindex=05 type=lead --&gt;
&lt;TD width=""5%"" align=""right""&gt;&amp;nbsp;&lt;/TD&gt;    &lt;!-- colindex=05 type=body --&gt;
&lt;TD width=""1%"" align=""left""&gt;&amp;nbsp;&lt;/TD&gt; &lt;!-- colindex=05 type=hang1 --&gt;

 &lt;/TR&gt;
</code></pre>

<p>I thought wow, this will be easy because the data is in the column below type=body.  Counting down I knew that in the data rows I would need to get the values in columns [3, 7, 11, 15].  So I set out to accomplish that using this code:</p>

<pre><code>indexComment = souptoGetColIndex.findAll(text=re.compile(""type=body""))
indexRow=indexComment[0].findParent()
indexCells=indexRow.findAll(text=re.compile(""type=body""))
for each in range(len(indexCells)):
    collist.append(tdlist.index(indexCells[each].previousSibling.previousSibling))
</code></pre>

<p>what I got back was collist=[0, 3, 7, 7, 15]</p>

<p>It turns out I think that because cells in the 7th and 11th position looked exactly alike the same index position was returned.  I was trying to figure out how to deal with this, clearly I had to make them look different.  So what I did was make them look different by first using a readlines to read each line of the file in and change the blank spaces to a random integer.</p>

<pre><code>for each in toGetColIndex:
   newlt.append(each.replace(r""&amp;nbsp;"",str(random.randint(1,14567))))
</code></pre>

<p>a friend pointed out that I could lower overhead by using this instead</p>

<pre><code>for each in toGetColIndex:
   newlt.append(each.replace(r""&amp;nbsp;"",str(toGetColIndex.index(each))))
</code></pre>

<p>Nonetheless, each of these approaches gets me a list with the colindex for the location of my headers for each column and to use on the data rows.  Note that replace function is missing the blank space since I guess the html is causing it to disappear the actual code uses r""&amp;.n.b.s.p;"" without the periods</p>
"
215752,25287,2008-10-18T23:59:37Z,11,Python embedded in CPP: how to get data back to CPP,"<p>While working on a C++ project, I was looking for a third party library for something that is not my core business. I found a really good library, doing exactly what's needed, but it is written in Python. I decided to experiment with embedding Python code in C++, using the Boost.Python library.</p>

<p>The C++ code looks something like this:</p>

<pre><code>#include &lt;string&gt;
#include &lt;iostream&gt;
#include &lt;boost/python.hpp&gt;

using namespace boost::python;

int main(int, char **) 
{
    Py_Initialize();

    try 
    {
    	object module((handle&lt;&gt;(borrowed(PyImport_AddModule(""__main__"")))));

    	object name_space = module.attr(""__dict__"");
    	object ignored = exec(""from myModule import MyFunc\n""
    		              ""MyFunc(\""some_arg\"")\n"",
    		              name_space);

    	std::string res = extract&lt;std::string&gt;(name_space[""result""]);
    } 
    catch (error_already_set) 
    {
    	PyErr_Print();
    }

    Py_Finalize();
    return 0;
}
</code></pre>

<p>A (very) simplified version of the Python code looks like this:</p>

<pre><code>import thirdparty

def MyFunc(some_arg):
    result = thirdparty.go()
    print result
</code></pre>

<p>Now the problem is this: 
'MyFunc' executes fine, i can see the print of 'result'.
What i cannot do is read 'result' back from the C++ code. The extract command never finds 'result' in any namespace.
I tried defining 'result' as a global, i even tried returning a tuple, but i cannot get it to work.</p>
"
216093,24608,2008-10-19T06:07:28Z,7,How do I coherently organize modules for a PyGTK desktop application?,"<p>I am working on a desktop application in PyGTK and seem to be bumping up against some limitations of my file organization.  Thus far I've structured my project this way:</p>

<ul>
<li>application.py - holds the primary application class (most functional routines)</li>
<li>gui.py - holds a loosely coupled GTK gui implementation.  Handles signal callbacks, etc.</li>
<li>command.py - holds command line automation functions not dependent on data in the application class</li>
<li>state.py - holds the state data persistence class</li>
</ul>

<p>This has served fairly well so far, but at this point application.py is starting to get rather long.  I have looked at numerous other PyGTK applications and they seem to have similar structural issues.  At a certain point the primary module starts to get very long and there is not obvious way of breaking the code out into narrower modules without sacrificing clarity and object orientation.</p>

<p>I have considered making the GUI the primary module and having seperate modules for the toolbar routines, the menus routines, etc, but at that point I believe I will lose most of the benefits of OOP and end up with an everything-references-everything scenario.</p>

<p>Should I just deal with having a very long central module or is there a better way of structuring the project so that I don't have to rely on the class browser so much?</p>

<p><strong>EDIT I</strong></p>

<p>Ok, so point taken regarding all the MVC stuff.  I do have a rough approximation of MVC in my code, but admittedly I could probably gain some mileage by further segregating the model and controller.  However, I am reading over python-gtkmvc's documentation (which is a great find by the way, thank you for referencing it) and my impression is that its not going to solve my problem so much as just formalize it.  My application is a single glade file, generally a single window. So no matter how tightly I define the MVC roles of the modules I'm still going to have one controller module doing most everything, which is pretty much what I have now. Admittedly I'm a little fuzzy on proper MVC implementation and I'm going to keep researching, but it doesn't look to me like this architecture is going to get any more stuff out of my main file, its just going to rename that file to controller.py.</p>

<p>Should I be thinking about separate Controller/View pairs for seperate sections of the window (the toolbar, the menus, etc)? Perhaps that is what I'm missing here.  It seems that this is what S. Lott is referring to in his second bullet point.</p>

<p>Thanks for the responses so far.</p>
"
216119,11324,2008-10-19T06:56:01Z,0,How do I reverse a list using recursion in Python?,"<p>I want to have a function that will return the reverse of a list that it is given -- using recursion. How can I do that?</p>
"
216141,15055,2008-10-19T07:38:32Z,2,Smart Sudoku Golf,"<p>The point of this question is to create the shortest <b>not abusively slow</b> Sudoku solver. This is defined as: <b>don't recurse when there are spots on the board which can only possibly be one digit</b>.</p>

<p>Here is the shortest I have so far in python:</p>

<pre><code>r=range(81)
s=range(1,10)
def R(A):
    bzt={}
    for i in r:
        if A[i]!=0: continue; 
        h={}
        for j in r:
            h[A[j]if(j/9==i/9 or j%9==i%9 or(j/27==i/27)and((j%9/3)==(i%9/3)))else 0]=1
        bzt[9-len(h)]=h,i
    for l,(h,i)in sorted(bzt.items(),key=lambda x:x[0]):
        for j in s:
            if j not in h:
                A[i]=j
                if R(A):return 1
        A[i]=0;return 0
    print A;return 1

R(map(int, ""080007095010020000309581000500000300400000006006000007000762409000050020820400060""))
</code></pre>

<p>The last line I take to be part of the cmd line input, it can be changed to:</p>

<pre><code>import sys; R(map(int, sys.argv[1]);
</code></pre>

<p>This is similar to other sudoku golf challenges, except that I want to eliminate unnecessary recursion. Any language is acceptable. The challenge is on!</p>
"
216489,2147,2008-10-19T14:45:47Z,5,How close are development webservers to production webservers?,"<p>Most python frameworks will have a development webserver of some kind that will have a warning that it isn't for use as production servers.  How much different do they tend to be from their production equivalents?</p>

<p>I haven't quite decided which framework to go with, much less what production server to use, so it's kinda difficult for me to pin this down to a ""compare development server x to production server y.""  So with that said, let me make the question a little bit more precise:  In your past experience with a python framework, how much time did you have to spend getting your application up and running with a production system once its been developed on a development server?  Or did you skip the development server and develop your app on a server that's more like what you will use in production?</p>
"
216657,1448,2008-10-19T16:52:44Z,1,Group by date in a particular format in SQLAlchemy,"<p>I have a table called logs which has a datetime field. 
I want to select the date and count of rows based on a particular date format. </p>

<p>How do I do this using SQLAlchemy?</p>
"
216972,11324,2008-10-19T21:08:23Z,109,"In Python, what does it mean if an object is subscriptable or not?","<p>Which types of objects fall into the domain of ""subscriptable""?</p>
"
217020,20578,2008-10-19T21:33:45Z,0,Python/editline on OS X: £ sign seems to be bound to ed-prev-word,"<p>On Mac OS X I can’t enter a pound sterling sign (£) into the Python interactive shell.</p>

<pre><code>* Mac OS X 10.5.5
* Python 2.5.1 (r251:54863, Jan 17 2008, 19:35:17)
* European keyboard (£ is shift-3)
</code></pre>

<p>When I type shift-3 in the Python interactive shell, I seem to invoke the previous word function, i.e. the cursor will move to the start of the last “word” (i.e. space-delimited item) typed on the line. When I’m back in the bash shell, typing shift-3 just produces a £, as expected.</p>

<p>This version of Python apparently uses editline for its interactive shell, as opposed to readline. I’m guessing that one of the default editline key bindings binds shift-3 (or whatever editline sees when I type shift-3) to the ed-prev-word command.</p>

<p>I’ve tried a few things in my ~/.editrc file to remove this binding, and they don’t have any effect:</p>

<ul>
<li><code>bind -r £</code></li>
<li><code>bind -r \243</code></li>
<li><code>bind -r \156</code></li>
</ul>

<p>And another that causes a bus error:</p>

<ul>
<li><code>bind £ \243</code></li>
</ul>

<p>Any ideas?</p>
"
217157,13564,2008-10-19T23:25:08Z,15,"How can I determine the display idle time from Python in Windows, Linux, and MacOS?","<p>I would like to know how long it's been since the user last hit a key or moved the mouse - not just in my application, but on the whole ""computer"" (i.e. display), in order to guess whether they're still at the computer and able to observe notifications that pop up on the screen.</p>

<p>I'd like to do this purely from (Py)GTK+, but I am amenable to calling platform-specific functions.  Ideally I'd like to call functions which have already been wrapped from Python, but if that's not possible, I'm not above a little bit of C or <code>ctypes</code> code, as long as I know what I'm actually looking for.</p>

<p>On Windows I think the function I want is <a href=""http://msdn.microsoft.com/en-us/library/ms646302.aspx""><code>GetLastInputInfo</code></a>, but that doesn't seem to be wrapped by pywin32; I hope I'm missing something.</p>
"
217666,20879,2008-10-20T06:46:22Z,5,Troubleshooting py2exe packaging problem,"<p>I've written a setup.py script for py2exe, generated an executable for my python GUI application and I have a whole bunch of files in the dist directory, including the app, w9xopen.exe and MSVCR71.dll. When I try to run the application, I get an error message that just says ""see the logfile for details"". The only problem is, the log file is empty. </p>

<p>The closest error I've seen is ""The following modules appear to be missing"" but I'm not using any of those modules as far as I know (especially since they seem to be of databases I'm not using) but digging up on Google suggests that these are relatively benign warnings.</p>

<p>I've written and packaged a console application as well as a wxpython one with py2exe and both applications have compiled and run successfully. I am using a new python toolkit called dabo, which in turn makes uses of wxpython modules so I can't figure out what I'm doing wrong. Where do I start investigating the problem since obviously the log file hasn't been too useful?   </p>

<p><b>Edit 1:</b> 
The python version is 2.5. py2exe is 0.6.8. There were no significant build errors. The only one was the bit about ""The following modules appear to be missing..."" which were non critical errors since the packages listed were ones I was definitely not using and shouldn't stop the execution of the app either. Running the executable produced a logfile which was completely empty. Previously it had an error about locales which I've since fixed but clearly something is wrong as the executable wasn't running. The setup.py file is based quite heavily on the original setup.py generated by running their ""app wizard"" and looking at the example that Ed Leafe and some others posted. Yes, I have a log file and it's not printing anything for me to use, which is why I'm asking if there's any other troubleshooting avenue I've missed which will help me find out what's going on. </p>

<p>I have even written a bare bones test application which simply produces a bare bones GUI - an empty frame with some default menu options. The code written itself is only 3 lines and the rest is in the 3rd party toolkit. Again, that compiled into an exe (as did my original app) but simply did not run. There were no error output in the run time log file either. </p>

<p><b>Edit 2:</b>
It turns out that switching from ""windows"" to ""console"" for initial debugging purposes was insightful. I've now got a basic running test app and on to compiling the real app! </p>

<p><i>The test app:</i></p>

<pre>
import dabo
app = dabo.dApp()
app.start()
</pre>

<p><i>The setup.py for test app:</i></p>

<pre>
import os
import sys
import glob
from distutils.core import setup
import py2exe
import dabo.icons
daboDir = os.path.split(dabo.__file__)[0]

# Find the location of the dabo icons:
iconDir = os.path.split(dabo.icons.__file__)[0]
iconSubDirs = []
def getIconSubDir(arg, dirname, fnames):
    if "".svn"" not in dirname and dirname[-1] != ""\\"":
    	icons = glob.glob(os.path.join(dirname, ""*.png""))
    	if icons:
    		subdir = (os.path.join(""resources"", dirname[len(arg)+1:]), icons)
    		iconSubDirs.append(subdir)
os.path.walk(iconDir, getIconSubDir, iconDir)

# locales:
localeDir = ""%s%slocale"" % (daboDir, os.sep)
locales = []
def getLocales(arg, dirname, fnames):
  if "".svn"" not in dirname and dirname[-1] != ""\\"":
    mo_files = tuple(glob.glob(os.path.join(dirname, ""*.mo"")))
    if mo_files:
      subdir = os.path.join(""dabo.locale"", dirname[len(arg)+1:])
      locales.append((subdir, mo_files))
os.path.walk(localeDir, getLocales, localeDir)

data_files=[(""resources"", glob.glob(os.path.join(iconDir, ""*.ico""))),
    	(""resources"", glob.glob(""resources/*""))]
data_files.extend(iconSubDirs)
data_files.extend(locales)

setup(name=""basicApp"",
        version='0.01',
        description=""Test Dabo Application"",
        options={""py2exe"": {
                ""compressed"": 1, ""optimize"": 2, ""bundle_files"": 1,
                ""excludes"": [""Tkconstants"",""Tkinter"",""tcl"", 
                ""_imagingtk"", ""PIL._imagingtk"",
                ""ImageTk"", ""PIL.ImageTk"", ""FixTk"", ""kinterbasdb"", 
                ""MySQLdb"", 'Numeric', 'OpenGL.GL', 'OpenGL.GLUT',
                'dbGadfly', 'email.Generator', 
                'email.Iterators', 'email.Utils', 'kinterbasdb', 
                'numarray', 'pymssql', 'pysqlite2', 'wx.BitmapFromImage'], 
                ""includes"": [""encodings"", ""locale"", ""wx.gizmos"",""wx.lib.calendar""]}},
        zipfile=None,
        windows=[{'script':'basicApp.py'}], 
        data_files=data_files
)
</pre>
"
217881,18909,2008-10-20T09:27:08Z,0,String Simple Substitution,"<p>What's the easiest way of me converting the simpler regex format that most users are used to into the correct re python regex string?</p>

<p>As an example, I need to convert this:</p>

<pre><code>string = ""*abc+de?""
</code></pre>

<p>to this:</p>

<pre><code>string = "".*abc.+de.?""
</code></pre>

<p>Of course I could loop through the string and build up another string character by character, but that's surely an inefficient way of doing this?</p>
"
217900,17451,2008-10-20T09:36:51Z,3,how to generate unit test code for methods,"<p>i want to write code for unit test to test my application code. I have different methods and now want to test these methods one by one in python script.
but i do not how to i write. can any one give me example of small code for unit testing in python.
i am thankful </p>
"
218616,3355,2008-10-20T14:22:02Z,131,Getting method parameter names in python,"<p>Given the python function:</p>

<pre><code>def aMethod(arg1, arg2):
    pass
</code></pre>

<p>How can I extract the number and names of the arguments. Ie. given that I have a reference to func, I want the func.[something] to return (""arg1"", ""arg2"")</p>

<p>The usage scenario for this is that I have a decorator, and I wish to use the method arguments in the same order that they appear for the actual function as a key. Ie. how would the decorator look that printed ""a,b"" when I call aMethod(""a"",""b"")</p>
"
218935,NA,2008-10-20T15:57:05Z,10,How do you share data between a parent and forked child process in Python?,"<p>I'm pretty sure one would do this using the os.plock(op) function, but I have no idea how. Also, if there's a better way, I'd be grateful to find out. Code snippets are very welcome. </p>
"
218987,22176,2008-10-20T16:09:36Z,9,how can i use sharepoint (via soap?) from python?,"<p>I want to use Sharepoint with python (C-Python)</p>

<p>Has anyone tried this before ?</p>
"
219110,8206,2008-10-20T16:43:57Z,127,"How Python web frameworks, WSGI and CGI fit together","<p>I have a <a href=""http://en.wikipedia.org/wiki/Bluehost"">Bluehost</a> account where I can run Python scripts as CGI. I guess it's the simplest CGI, because to run I have to define the following in <code>.htaccess</code>:</p>

<pre><code>Options +ExecCGI
AddType text/html py
AddHandler cgi-script .py
</code></pre>

<p>Now, whenever I look up web programming with Python, I hear a lot about WSGI and how most frameworks use it. But I just don't understand how it all fits together, especially when my web server is given (Apache running at a host's machine) and not something I can really play with (except defining <code>.htaccess</code> commands).</p>

<p>How are <a href=""http://en.wikipedia.org/wiki/Web_Server_Gateway_Interface"">WSGI</a>, CGI, and the frameworks all connected? What do I need to know, install, and do if I want to run a web framework (say <a href=""http://webpy.org/"">web.py</a> or <a href=""http://en.wikipedia.org/wiki/CherryPy"">CherryPy</a>) on my basic CGI configuration? How to install WSGI support?</p>
"
219215,21778,2008-10-20T17:19:57Z,3,How do I use Tkinter with Python on Windows Vista?,"<p>I installed Python 2.6 for one user on Windows Vista.  Python works okay, but when I try: <code>import Tkinter</code>, it says the side-by-side configuration has errors.  I've tried tinkering with the Visual Studio runtime, with no good results.  Any ideas on how to resolve this?</p>
"
219329,NA,2008-10-20T18:05:22Z,8,"django,fastcgi: how to manage a long running process?","<p>I have inherited a django+fastcgi application which needs to be modified to perform a lengthy computation (up to half an hour or more). What I want to do is run the computation in the background and return a ""your job has been started"" -type response. While the process is running, further hits to the url should return ""your job is still running"" until the job finishes at which point the results of the job should be returned. Any subsequent hit on the url should return the cached result. </p>

<p>I'm an utter novice at django and haven't done any significant web work in a decade so I don't know if there's a built-in way to do what I want. I've tried starting the process via subprocess.Popen(), and that works fine except for the fact it leaves a defunct entry in the process table. I need a clean solution that can remove temporary files and any traces of the process once it has finished.</p>

<p>I've also experimented with fork() and threads and have yet to come up with a viable solution. Is there a canonical solution to what seems to me to be a pretty common use case? FWIW this will only be used on an internal server with very low traffic.</p>
"
219547,452521,2008-10-20T19:19:45Z,2,I’m stunned: weird problem with python and sockets + threads,"<p>I have a python script that is a http-server: <a href=""http://paste2.org/p/89701"" rel=""nofollow"">http://paste2.org/p/89701</a>, when benchmarking it against ApacheBench (ab) with a concurrency level (-c switch) that is lower then or equal to the value i specified in the socket.listen()-call in the sourcecode everything works fine, but as soon as put the concurrency level in apache bench above the value in the socket.listen()-call performance drops through the floor, some example:</p>

<ul>
<li>socket.listen(<strong>10</strong>) and ab -n 50 -c <strong>10</strong> <a href=""http://localhost/"" rel=""nofollow"">http://localhost/</a> = <strong>1200req/s</strong></li>
<li>socket.listen(<strong>10</strong>) and ab -n 50 -c <strong>11</strong> <a href=""http://localhost/"" rel=""nofollow"">http://localhost/</a> = <strong>40req/s</strong></li>
<li>socket.listen(<strong>100</strong>) and ab -n 5000 -c <strong>100</strong> <a href=""http://localhost/"" rel=""nofollow"">http://localhost/</a> = <strong>1000req/s</strong></li>
<li>socket.listen(<strong>100</strong>) and ab -n 5000 -c <strong>101</strong> <a href=""http://localhost/"" rel=""nofollow"">http://localhost/</a> = <strong>32req/s</strong></li>
</ul>

<p>Nothing changes in the code between the two calls, I can’t figure out what is wrong - been at this problem for one day now. Also note that: The multiplexing version of the same code (I wrote to compare to the threaded version) works FINE no matter what socket.listen() is set to or what the concurrency (-c switch) in apache is set to.</p>

<p><em>I've spent a day on IRC/python docs, posted on comp.lang.python and on my blog - I can't find ANYONE that even has an idea what could be wrong. Help me!</em></p>
"
220525,29825,2008-10-21T01:58:30Z,28,Ensure a single instance of an application in Linux,"<p>I'm working on a GUI application in WxPython, and I am not sure how I can ensure that only one copy of my application is running at any given time on the machine. Due to the nature of the application, running more than once doesn't make any sense, and will fail quickly. Under Win32, I can simply make a named mutex and check that at startup. Unfortunately, I don't know of any facilities in Linux that can do this. </p>

<p>I'm looking for something that will automatically be released should the application crash unexpectedly. I don't want to have to burden my users with having to manually delete lock files because I crashed.</p>
"
220777,20879,2008-10-21T04:40:57Z,9,Including PYDs/DLLs in py2exe builds,"<p>One of the modules for my app uses functions from a .pyd file. There's an option to exclude dlls (exclude_dlls) but is there one for including them? The build process doesn't seem to be copying the .pyd in my module despite copying the rest of the files (.py). I also need to include a .dll.  How do I get py2exe to include both .pyd and .dll files?</p>
"
220902,20654,2008-10-21T05:57:08Z,2,load dll from python,"<p>I'm building a python application from some source code I've found <a href=""http://code.google.com/p/enso"" rel=""nofollow"">Here</a></p>

<p>I've managed to compile and fix some problems by searching the web, but I'm stuck at this point:</p>

<p>When running the application this message appears.</p>

<p><img src=""http://img511.imageshack.us/img511/4481/loadfr0.png"" alt=""alt text"" /></p>

<p>This python app, usues swig to link to c/c++ code.</p>

<p>I have VC++2005 express edition which I used to compile along with scons
and Python 2.5 ( and tried 2.4 too ) </p>

<p>The dlls that are attempting to load is ""msvcr80.dll""  because before the message was ""msvcr80.dll"" cannot be found or something like that, so I got it and drop it in window32 folder.</p>

<p>For what I've read in here:
<a href=""http://msdn.microsoft.com/en-us/library/ms235591"" rel=""nofollow"">http://msdn.microsoft.com/en-us/library/ms235591</a>(VS.80).aspx</p>

<p>The solution is to run MT with the manifest and the dll file. I did it already and doesn't work either.</p>

<p>Could anyone point me to the correct direction?</p>

<p>This is the content of the manifest fie:</p>

<pre><code>&lt;?xml version='1.0' encoding='UTF-8' standalone='yes'?&gt;
&lt;assembly xmlns='urn:schemas-microsoft-com:asm.v1' manifestVersion='1.0'&gt;
  &lt;dependency&gt;
    &lt;dependentAssembly&gt;
      &lt;assemblyIdentity type='win32' name='Microsoft.VC80.CRT' version='8.0.50608.0' processorArchitecture='x86' publicKeyToken='1fc8b3b9a1e18e3b' /&gt;
    &lt;/dependentAssembly&gt;
  &lt;/dependency&gt;
&lt;/assembly&gt;
</code></pre>

<p>I'm going to try Python 2.6 now, I'm not quite sure of understanding the problem, but Python 2.5 and Python 2.5 .exe had the string ""MSVCR71.dll"" inside the .exe file. But probably this has nothing to do.</p>

<p>ps. if only  everything was as easy as jar files :( </p>

<p>This is the stack trace for completeness</p>

<pre><code>None
INFO:root:Skipping provider enso.platform.osx.
INFO:root:Skipping provider enso.platform.linux.
INFO:root:Added provider enso.platform.win32.
Traceback (most recent call last):
  File ""scripts\run_enso.py"", line 24, in &lt;module&gt;
    enso.run()
  File ""C:\oreyes\apps\enso\enso-read-only\enso\__init__.py"", line 40, in run
    from enso.events import EventManager
  File ""C:\oreyes\apps\enso\enso-read-only\enso\events.py"", line 60, in &lt;module&gt;
    from enso import input
  File ""C:\oreyes\apps\enso\enso-read-only\enso\input\__init__.py"", line 3, in &lt;module&gt;
    _input = enso.providers.getInterface( ""input"" )
  File ""C:\oreyes\apps\enso\enso-read-only\enso\providers.py"", line 137, in getInterface
    interface = provider.provideInterface( name )
  File ""C:\oreyes\apps\enso\enso-read-only\enso\platform\win32\__init__.py"", line 48, in provideInterface
    import enso.platform.win32.input
  File ""C:\oreyes\apps\enso\enso-read-only\enso\platform\win32\input\__init__.py"", line 3, in &lt;module&gt;
    from InputManager import *
  File ""C:\oreyes\apps\enso\enso-read-only\enso\platform\win32\input\InputManager.py"", line 7, in &lt;module&gt;
    import _InputManager
ImportError: DLL load failed: Error en una rutina de inicializaci¾n de biblioteca de vÝnculos dinßmicos (DLL).
</code></pre>
"
221097,21537,2008-10-21T07:56:33Z,3,What is the best way on python 2.3 for windows to execute a program like ghostscript with multiple arguments and spaces in paths?,"<p>Surely there is some kind of abstraction that allows for this?</p>

<p>This is essentially the command</p>

<blockquote>
  <blockquote>
    <p>cmd = self._ghostscriptPath + 'gswin32c -q -dNOPAUSE -dBATCH -sDEVICE=tiffg4 -r196X204 -sPAPERSIZE=a4 -sOutputFile=""' + tifDest + "" "" + pdfSource + '""'</p>
    
    <p>os.popen(cmd)</p>
  </blockquote>
</blockquote>

<p>this way looks really dirty to me, there must be some pythonic way</p>
"
221328,5865,2008-10-21T09:49:04Z,2,How can I write a method within a Django model to retrieve related objects?,"<p>I have two models. We'll call them object A and object B. Their design looks something like this:</p>

<pre><code>class Foo(models.Model):
     name = models.CharField()

class Bar(models.Model):
     title = models.CharField()
     Foo= models.ForeignKey('myapp.Foo')
</code></pre>

<p>Now, suppose I want to make a method within Foo that returns all Bar objects that reference that instance of Foo. How do I do this?</p>

<pre><code>class Foo(models.Model):
     name = models.CharField()
     def returnBars(self):
         ????
</code></pre>
"
221339,745,2008-10-21T09:54:58Z,20,Is it possible to implement Python code-completion in TextMate?,"<p><a href=""http://github.com/orestis/pysmell/tree/master"" rel=""nofollow"">PySmell</a> seems like a good starting point.</p>

<p>I think it should be possible, PySmell's <code>idehelper.py</code> does a majority of the complex stuff, it should just be a case of giving it the current line, offering up the completions (the bit I am not sure about) and then replacing the line with the selected one.</p>

<pre><code>&gt;&gt;&gt; import idehelper
&gt;&gt;&gt; # The path is where my PYSMELLTAGS file is located:
&gt;&gt;&gt; PYSMELLDICT = idehelper.findPYSMELLDICT(""/Users/dbr/Desktop/pysmell/"")
&gt;&gt;&gt; options = idehelper.detectCompletionType("""", """" 1, 2, """", PYSMELLDICT)
&gt;&gt;&gt; completions = idehelper.findCompletions(""proc"", PYSMELLDICT, options)
&gt;&gt;&gt; print completions
[{'dup': '1', 'menu': 'pysmell.pysmell', 'kind': 'f', 'word': 'process', 'abbr': 'process(argList, excluded, output, verbose=False)'}]
</code></pre>

<p>It'll never be perfect, but it would be extremely useful (even if just for completing the stdlib modules, which should never change, so you wont have to constantly regenerate the PYSMELLTAGS file whenever you add a function)</p>

<p><hr /></p>

<p>Progressing! I have the utter-basics of completion in place - barely works, but it's close..</p>

<p>I ran <code>python pysmells.py /System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/*.py -O /Library/Python/2.5/site-packages/pysmell/PYSMELLTAGS</code></p>

<p>Place the following in a TextMate bundle script, set ""input: entire document"", ""output: insert as text"", ""activation: key equivalent: alt+esc"", ""scope selector: source.python""</p>

<pre><code>#!/usr/bin/env python

import os
import sys
from pysmell import idehelper

CUR_WORD = os.environ.get(""TM_CURRENT_WORD"")

cur_file = os.environ.get(""TM_FILEPATH"")
orig_source = sys.stdin.read()
line_no = int(os.environ.get(""TM_LINE_NUMBER""))
cur_col = int(os.environ.get(""TM_LINE_INDEX""))

# PYSMELLS is currently in site-packages/pysmell/
PYSMELLDICT = idehelper.findPYSMELLDICT(""/Library/Python/2.5/site-packages/pysmell/blah"")
options = idehelper.detectCompletionType(cur_file, orig_source, line_no, cur_col, """", PYSMELLDICT)
completions = idehelper.findCompletions(CUR_WORD, PYSMELLDICT, options)

if len(completions) &gt; 0:
    new_word = completions[0]['word']
    new_word = new_word.replace(CUR_WORD, """", 1) # remove what user has already typed
    print new_word
</code></pre>

<p>Then I made a new python document, typed ""import urll"" and hit alt+escape, and it completed it to ""import urllib""!</p>

<p>As I said, it's entirely a work-in-progress, so don't use it yet..</p>

<p><hr /></p>

<p><em>Last update:</em></p>

<p>orestis has integrated this into the PySmell project's code! Any further fiddling will happen <a href=""http://github.com/orestis/pysmell/tree/master"" rel=""nofollow"">on github</a></p>
"
221376,11677,2008-10-21T10:15:16Z,11,Putting Copyright Symbol into a Python File,"<p>I need to include a copyright statement at the top of every Python source file I produce:</p>

<pre><code>#   Copyright: © 2008 etc.
</code></pre>

<p>However, when I then run such a file I get this message:</p>

<p>SyntaxError: Non-ASCII character '\xa9' in file MyFile.py on line 3, but no encoding declared; see <a href=""http://www.python.org/peps/pep-0263.html"" rel=""nofollow"">http://www.python.org/peps/pep-0263.html</a> for details.</p>

<p>Apparently Python isn't happy about the copyright symbol because it assumes the source file is all in ASCII. Either I need to make my first line be:</p>

<pre><code># -*- coding: iso-8859-1 -*-
</code></pre>

<p>to tell Python I'm using Latin encoding, or I can change the copyright statement to: </p>

<pre><code>#   Copyright: \xa9 2008 etc.
</code></pre>

<p>which just possibly doesn't have the same legal standing.</p>

<p>Is there a more elegant solution?</p>
"
221386,29908,2008-10-21T10:21:46Z,3,Removing a sequence of characters from a large binary file using python,"<p>I would like to trim long sequences of the same value from a binary file in python. A simple way of doing it is simply reading in the file and using re.sub to replace the unwanted sequence. This will of course not work on large binary files. Can it be done in something like numpy?</p>
"
221745,20572,2008-10-21T12:56:32Z,8,Is it possible to set a timeout on a socket in Twisted?,"<p>I realize I'm probably just dumb and missing something big and important, but I can't figure out how to specify a timeout in twisted using reactor.listenUDP. My goal is to be able to specify a timeout, and after said amount of time, if DatagramProtocol.datagramReceived has not been executed, have it execute a callback or something that I can use to call reactor.stop(). Any help or advice is appreciated. Thanks</p>
"
222133,7341,2008-10-21T14:41:54Z,6,Best approach with dynamic classes using Python globals(),"<p>I'm working on a web application that will return a variable set of modules depending on user input. Each module is a Python class with a constructor that accepts a single parameter and has an '.html' property that contains the output.</p>

<p>Pulling the class dynamically from the global namespace works:</p>

<pre><code>result = globals()[classname](param).html
</code></pre>

<p>And it's certainly more succinct than:</p>

<pre><code>if classname == 'Foo':
    result = Foo(param).html
elif classname == 'Bar':
    ...
</code></pre>

<p>What is considered the best way to write this, stylistically? Are there risks or reasons not to use the global namespace?</p>
"
222375,4960,2008-10-21T15:52:51Z,34,ElementTree XPath - Select Element based on attribute,"<p>I am having trouble using the attribute XPath Selector in ElementTree, which I should be able to do according to the <a href=""http://effbot.org/zone/element-xpath.htm"">Documentation</a></p>

<p>Here's some sample code</p>

<p><strong>XML</strong></p>

<pre><code>&lt;root&gt;
 &lt;target name=""1""&gt;
    &lt;a&gt;&lt;/a&gt;
    &lt;b&gt;&lt;/b&gt;
 &lt;/target&gt;
 &lt;target name=""2""&gt;
    &lt;a&gt;&lt;/a&gt;
    &lt;b&gt;&lt;/b&gt;
 &lt;/target&gt;
&lt;/root&gt;
</code></pre>

<p><strong>Python</strong></p>

<pre><code>def parse(document):
    root = et.parse(document)
    for target in root.findall(""//target[@name='a']""):
        print target._children
</code></pre>

<p>I am receiving the following Exception:</p>

<pre><code>expected path separator ([)
</code></pre>
"
222450,10559,2008-10-21T16:08:55Z,7,How to script Visual Studio 2008 from Python?,"<p>I'd like to write Python scripts that drive Visual Studio 2008 and Visual C++ 2008.  All the examples I've found so far use <code>win32com.client.Dispatch</code>.  This works fine for Excel 2007 and Word 2007 but fails for Visual Studio 2008:</p>

<pre><code>import win32com.client
app1 = win32com.client.Dispatch( 'Excel.Application' ) # ok
app2 = win32com.client.Dispatch( 'Word.Application' )  # ok
app3 = win32com.client.Dispatch( 'MSDev.Application' ) # error
</code></pre>

<p>Any ideas?  Does Visual Studio 2008 use a different string to identify itself?  Is the above method out-dated?</p>
"
222536,30019,2008-10-21T16:29:51Z,4,What is the meaning of '(?i)password' in python regular expression?,"<p>Pexpect can be used to automate tasks in python (does not need TCL to be installed). One of the simplest routines of this class is the 'run()' routine. It accepts a dictionary of expected question patterns as keys and the responses as values. For example</p>

<p>pexpect.run ('scp foo myname@host.example.com:.', events={'(?i)password': mypassword})</p>

<p>I know that usually '?' is used to indicate 0 or 1 occurrences of previous literal in the string (for regular expressions that is). However, over here, this does not seem to be the meaning. </p>

<p>Can experts comment on what is it?</p>
"
222736,24798,2008-10-21T17:33:26Z,2,cherrypy not closing the sockets,"<p>I am using cherrypy as a webserver. It gives good performance for my application but there is a very big problem with it. cherrypy crashes after couple of hours stating that it could not create a socket as there are too many files open:</p>

<pre><code>[21/Oct/2008:12:44:25] ENGINE HTTP Server 
cherrypy._cpwsgi_server.CPWSGIServer(('0.0.0.0', 8080)) shut down    
[21/Oct/2008:12:44:25] ENGINE Stopped thread '_TimeoutMonitor'.    
[21/Oct/2008:12:44:25] ENGINE Stopped thread 'Autoreloader'.    
[21/Oct/2008:12:44:25] ENGINE Bus STOPPED    
[21/Oct/2008:12:44:25] ENGINE Bus EXITING    
[21/Oct/2008:12:44:25] ENGINE Bus EXITED    
Exception in thread HTTPServer Thread-3:    
Traceback (most recent call last):    
  File ""/usr/lib/python2.3/threading.py"", line 436, in __bootstrap    
    self.run()    
  File ""/usr/lib/python2.3/threading.py"", line 416, in run   
    self.__target(*self.__args, **self.__kwargs)    
  File ""/usr/lib/python2.3/site-packages/cherrypy/process/servers.py"", line 73, in 
_start_http_thread    
    self.httpserver.start()    
  File ""/usr/lib/python2.3/site-packages/cherrypy/wsgiserver/__init__.py"", line 1388, in start
    self.tick()    
  File ""/usr/lib/python2.3/site-packages/cherrypy/wsgiserver/__init__.py"", line 1417, in tick    
    s, addr = self.socket.accept()    
  File ""/usr/lib/python2.3/socket.py"", line 167, in accept    
    sock, addr = self._sock.accept()    
error: (24, 'Too many open files')    
[21/Oct/2008:12:44:25] ENGINE Waiting for child threads to terminate..
</code></pre>

<p>I tried to figure out what was happening. My application does not open any file or any socket etc. My file only opens couple of berkeley dbs. I investigated this issue further. I saw the file descriptors used by my cherrypy process with id 4536  in /proc/4536/fd/
Initially there were new sockets created and cleaned up properly but after an hour I found that it had about 509 sockets that were not cleaned. All the sockets were in CLOSE_WAIT state. I got this information using the following command:</p>

<pre><code>netstat -ap | grep ""4536"" | grep CLOSE_WAIT | wc -l
</code></pre>

<p>CLOSE_WAIT state means that the remote client has closed the connection. Why is cherrypy then not closing the socket and free the file descriptors? What can I do to resolve the problem? </p>

<p>I tried to play with the following:</p>

<pre><code>cherrypy.config.update({'server.socketQueueSize': '10'})
</code></pre>

<p>I thought that this would restrict the number of sockets open at any time to 10 but it was not effective at all. This is the only config I have set, so , rest of the configs hold their default values.</p>

<p>Could somebody throw light on this? Do you think its a bug in cherrypy? How can I resolve it? Is there a way I can close these sockets myself?</p>

<p>Following is my systems info:</p>

<p>CherryPy-3.1.0</p>

<p>python 2.3.4 </p>

<p>Red Hat Enterprise Linux ES release 4 (Nahant Update 7)</p>

<p>Thanks in advance!</p>
"
222752,10040,2008-10-21T17:40:51Z,12,Sorting a tuple that contains tuples,"<p>I have the following tuple, which contains tuples:</p>

<pre><code>MY_TUPLE = (
    ('A','Apple'),
    ('C','Carrot'),
    ('B','Banana'),
)
</code></pre>

<p>I'd like to sort this tuple based upon the <strong>second</strong> value contained in inner-tuples (i.e., sort Apple, Carrot, Banana rather than A, B, C).</p>

<p>Any thoughts?</p>
"
222877,25785,2008-10-21T18:13:15Z,221,How to use 'super' in Python?,"<p>Can someone explain to me the difference between doing:</p>

<pre><code>class Child(SomeBaseClass):
    def __init__(self):
        super(Child, self).__init__()
</code></pre>

<p>and this:</p>

<pre><code>class Child(SomeBaseClass):
    def __init__(self):
        SomeBaseClass.__init__(self)
</code></pre>

<p>I've seen <code>super</code> being used quite a lot in classes with only single inheritance. I can see why you'd use it in multiple inheritance but am unclear as to what the advantages are of using it in this kind of situation.</p>
"
223328,30105,2008-10-21T20:16:13Z,6,How do you get the text from an HTML 'datacell' using BeautifulSoup,"<p>I have been trying to strip out some data from HTML files.  I have the logic coded to get the right cells.  Now I am struggling to get the actual contents of the 'cell':</p>

<p>here is my htm snip</p>

<p>headerRows[0][10].contents</p>

<pre><code>  [&lt;font size=""+0""&gt;&lt;font face=""serif"" size=""1""&gt;&lt;b&gt;Apples Produced&lt;/b&gt;&lt;font size=""3""&gt;       
  &lt;/font&gt;&lt;/font&gt;&lt;/font&gt;]
</code></pre>

<p>Note that this is a list item from Python [].</p>

<p>I need the value Apples Produced but can't get to it.</p>

<p>Any suggestions would be appreciated</p>

<p>Suggestions on a good book that explains this would earn my eternal gratitude</p>

<hr>

<p>Thanks for that answer.  However-isn't there a more general answer.  What happens if my cell doesn't have a bold attribute</p>

<p>say it is:</p>

<pre><code> [&lt;font size=""+0""&gt;&lt;font face=""serif"" size=""1""&gt;&lt;I&gt;Apples Produced&lt;/I&gt;&lt;font size=""3""&gt;       
  &lt;/font&gt;&lt;/font&gt;&lt;/font&gt;]
</code></pre>

<p><I>Apples Produced</I><br>
      </p>

<p>I am trying to learn to read/understand the documentation and your response will help</p>

<p>I really appreciate this help. The best thing about these answers is that it is a lot easier to generalize from them then I have been able to do so from the BeautifulSoup documentation. I learned to program in the Fortran era and I while I am enjoying learning python and am amzed at its power-BeautifulSoup is an example. making a cohernet whole of the documentation is tough for me.</p>

<p>Cheers</p>
"
223356,20955,2008-10-21T20:23:02Z,2,When does urllib2 actually download a file from a url?,"<pre><code>url = ""http://example.com/file.xml""
data = urllib2.urlopen(url)
data.read()
</code></pre>

<p>The question is, when exactly will the file be downloaded from the internet? When i do urlopen or .read()? On my network interface I see high traffic both times. </p>
"
223559,577,2008-10-21T21:24:24Z,27,Using Variables for Class Names in Python?,"<p>I want to know how to use variables for objects and function names in Python. In PHP, you can do this:</p>

<pre><code>$className = ""MyClass"";

$newObject = new $className();
</code></pre>

<p>How do you do this sort of thing in Python? Or, am I totally not appreciating some fundamental difference with Python, and if so, what is it?</p>
"
223866,2178,2008-10-21T23:00:20Z,19,Elegant structured text file parsing,"<p>I need to parse a transcript of a live chat conversation. My first thought on seeing the file was to throw regular expressions at the problem but I was wondering what other approaches people have used. </p>

<p>I put elegant in the title as i've previously found that this type of task has a danger of getting hard to maintain just relying on regular expressions.</p>

<p>The transcripts are being generated by www.providesupport.com and emailed to an account, I then extract a plain text transcript attachment from the email.</p>

<p>The reason for parsing the file is to extract the conversation text for later but also to identify visitors and operators names so that the information can be made available via a CRM.</p>

<p>Here is an example of a transcript file:</p>

<pre><code>Chat Transcript

Visitor: Random Website Visitor 
Operator: Milton
Company: Initech
Started: 16 Oct 2008 9:13:58
Finished: 16 Oct 2008 9:45:44

Random Website Visitor: Where do i get the cover sheet for the TPS report?
* There are no operators available at the moment. If you would like to leave a message, please type it in the input field below and click ""Send"" button
* Call accepted by operator Milton. Currently in room: Milton, Random Website Visitor.
Milton: Y-- Excuse me. You-- I believe you have my stapler?
Random Website Visitor: I really just need the cover sheet, okay?
Milton: it's not okay because if they take my stapler then I'll, I'll, I'll set the building on fire...
Random Website Visitor: oh i found it, thanks anyway.
* Random Website Visitor is now off-line and may not reply. Currently in room: Milton.
Milton: Well, Ok. But… that's the last straw.
* Milton has left the conversation. Currently in room:  room is empty.

Visitor Details
---------------
Your Name: Random Website Visitor
Your Question: Where do i get the cover sheet for the TPS report?
IP Address: 255.255.255.255
Host Name: 255.255.255.255
Referrer: Unknown
Browser/OS: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.2; .NET CLR 1.1.4322; InfoPath.1; .NET CLR 2.0.50727)
</code></pre>
"
223990,11527,2008-10-21T23:55:57Z,50,How do I perform query filtering in django templates,"<p>I need to perform a filtered query from within a django template, to get a set of objects equivalent to python code within a view:</p>

<pre><code>queryset = Modelclass.objects.filter(somekey=foo)
</code></pre>

<p>In my template I would like to do</p>

<pre><code>{% for object in data.somekey_set.FILTER %}
</code></pre>

<p>but I just can't seem to find out how to write FILTER.</p>
"
224026,13055,2008-10-22T00:08:01Z,25,Javascript style dot notation for dictionary keys unpythonic?,"<p>I've started to use constructs like these:</p>

<pre><code>class DictObj(object):
    def __init__(self):
        self.d = {}
    def __getattr__(self, m):
        return self.d.get(m, None)
    def __setattr__(self, m, v):
        super.__setattr__(self, m, v)
</code></pre>

<p>Update: based on this thread, I've revised the DictObj implementation to:</p>

<pre><code>class dotdict(dict):
    def __getattr__(self, attr):
        return self.get(attr, None)
    __setattr__= dict.__setitem__
    __delattr__= dict.__delitem__

class AutoEnum(object):
    def __init__(self):
        self.counter = 0
        self.d = {}
    def __getattr__(self, c):
        if c not in self.d:
            self.d[c] = self.counter
            self.counter += 1        
        return self.d[c]
</code></pre>

<p>where DictObj is a dictionary that can be accessed via dot notation:</p>

<pre><code>d = DictObj()
d.something = 'one'
</code></pre>

<p>I find it more aesthetically pleasing than <code>d['something']</code>. Note that accessing an undefined key returns None instead of raising an exception, which is also nice.</p>

<p>Update: Smashery makes a good point, which mhawke expands on for an easier solution. I'm wondering if there are any undesirable side effects of using <strong>dict</strong> instead of defining a new dictionary; if not, I like mhawke's solution a lot.</p>

<p>AutoEnum is an auto-incrementing Enum, used like this:</p>

<pre><code>CMD = AutoEnum()

cmds = {
    ""peek"":  CMD.PEEK,
    ""look"":  CMD.PEEK,
    ""help"":  CMD.HELP,
    ""poke"":  CMD.POKE,
    ""modify"": CMD.POKE,
}
</code></pre>

<p>Both are working well for me, but I'm feeling unpythonic about them. </p>

<p>Are these in fact bad constructs?</p>
"
224145,19741,2008-10-22T01:19:39Z,2,What would be a better implementation of all combinations in lexicographic order of a jagged list?,"<p>I was put in a position today in which I needed to enumerate all possible combinations of jagged list. For instance, a naive approach would be:</p>

<pre><code>for a in [1,2,3]:
    for b in [4,5,6,7,8,9]:
        for c in [1,2]:
            yield (a,b,c)
</code></pre>

<p>This is functional, but not general in terms of the number of lists that can be used. Here is a more generalized approach:</p>

<pre><code>from numpy import zeros, array, nonzero, max

make_subset = lambda x,y: [x[i][j] for i,j in enumerate(y)]

def combinations(items):
    num_items = [len(i) - 1 for i in items]
    state = zeros(len(items), dtype=int)
    finished = array(num_items, dtype=int)
    yield grab_items(items, state)
    while True:
        if state[-1] != num_items[-1]:
            state[-1] += 1
            yield make_subset(items, state)
        else:
            incrementable = nonzero(state != finished)[0]
            if not len(incrementable):
                raise StopIteration
            rightmost = max(incrementable)
            state[rightmost] += 1
            state[rightmost+1:] = 0
            yield make_subset(items, state)
</code></pre>

<p>Any recommendations on a better approach or reasons against the above approach?</p>
"
224337,18676,2008-10-22T02:54:17Z,3,Alternatives to a wizard,"<p>I'm making a program that fits the wizard concept ideally; the user is walked through the steps to create a character for a game.</p>

<p>However, I'm realizing that the limitations of the wizard are making it difficult to design ""elegant"" logic flow. For example, because all pages of the wizard are initalized at the same time, I can't have the values entered in one page available to the next one. I have to put a button on each page to get the values from a previous page rather than simply having fields auto-populated.</p>

<p>I've thought about alternatives to using the wizard. I think the best idea is to have some buttons on one panel that change the information on another panel, e.g. a splitter window.</p>

<p>However, I can't find any documentation in wxPython on how to dynamically change the panel. Everything I've found so far is really pretty static, hence the use of the wizard. Even the ""wxPython in Action"" book doesn't mention it.</p>

<p>Are there any tutorials for making ""dynamic panels"" or better management of a wizard?</p>
"
224660,21537,2008-10-22T06:26:33Z,1,Incoming poplib refactoring using windows python 2.3,"<p>Hi Guys could you please help me refactor this so that it is sensibly pythonic.</p>

<pre><code>import sys
import poplib
import string
import StringIO, rfc822
import datetime
import logging

def _dump_pop_emails(self):
    self.logger.info(""open pop account %s with username: %s"" % (self.account[0], self.account[1]))
    self.popinstance = poplib.POP3(self.account[0])
    self.logger.info(self.popinstance.getwelcome()) 
    self.popinstance.user(self.account[1])
    self.popinstance.pass_(self.account[2])
    try:
        (numMsgs, totalSize) = self.popinstance.stat()
        for thisNum in range(1, numMsgs+1):
            (server_msg, body, octets) = self.popinstance.retr(thisNum)
            text = string.join(body, '\n')
            mesg = StringIO.StringIO(text)                               
            msg = rfc822.Message(mesg)
            name, email = msg.getaddr(""From"")
            emailpath = str(self._emailpath + self._inboxfolder + ""\\"" + email + ""_"" + msg.getheader(""Subject"") + "".eml"")
            emailpath = self._replace_whitespace(emailpath)
            file = open(emailpath,""wb"")
            file.write(text)
            file.close()
            self.popinstance.dele(thisNum)
    finally:
        self.logger.info(self.popinstance.quit())

def _replace_whitespace(self,name):
    name = str(name)
    return name.replace("" "", ""_"")
</code></pre>

<p>Also in the _replace_whitespace method I would like to have some kind of cleaning routine which takes out all illegal characters which could cause processing.</p>

<p>Basically I want to write the email to the inbox directory in a standard way.</p>

<p>Am i doing something wrong here?</p>
"
224735,14351,2008-10-22T07:16:23Z,6,Open Source Profiling Frameworks?,"<p>Have you ever wanted to test and quantitatively show whether your application would perform better as a static build or shared build, stripped or non-stripped, upx or no upx, gcc -O2 or gcc -O3, hash or btree, etc etc. If so this is the thread for you. There are hundreds of ways to tune an application, but how do we collect, organize, process, visualize the consequences of each experiment. </p>

<p>I have been looking for several months for an open source application performance engineering/profiling framework similar in concept to Mozilla's <a href=""http://graphs.mozilla.org"" rel=""nofollow"">Perftastic</a> where I can develop/build/test/profile hundreds of incarnations of different tuning experiments. </p>

<p>Some requirements:</p>

<h2>Platform</h2>

<p>SUSE32 and SUSE64</p>

<h2>Data Format</h2>

<p>Very flexible, compact, simple, hierarchical. There are several possibilities including</p>

<ul>
<li>Custom <a href=""http://en.wikipedia.org/wiki/Comma-separated_values"" rel=""nofollow"">CSV</a></li>
<li><a href=""http://en.wikipedia.org/wiki/RRDtool"" rel=""nofollow"">RRD</a></li>
<li><a href=""http://en.wikipedia.org/wiki/Protocol_buffers"" rel=""nofollow"">Protocol Buffers</a></li>
<li><a href=""http://en.wikipedia.org/wiki/Json"" rel=""nofollow"">JSON</a></li>
<li>No XML. There is lots of data and XML is tooo verbose</li>
</ul>

<h2>Data Acquisition</h2>

<p>Flexible and Customizable plugins. There is lots of data to collect from the application including performance data from /proc, sys time, wall time, cpu utilization, memory profile, leaks, valgrind logs, arena fragmentation, I/O, localhost sockets, binary size, open fds, etc. And some from the host system. My language of choice for this is Python, and I would develop these plugins to monitor and/or parse data in all different formats and store them in the data format of the framework.</p>

<h2>Tagging</h2>

<p>All experiments would be tagged including data like GCC version and compile options, platform, host, app options, experiment, build tag, etc.</p>

<h2>Graphing</h2>

<p>History, Comparative, Hierarchical, Dynamic and Static.</p>

<ul>
<li>The application builds are done by a custom CI sever which releases a new app version several times per day the last 3 years straight. This is why we need a continuous trend analysis. When we add new features, make bug fixes, change build options, we want to automatically gather profiling data and see the trend. This is where generating various static builds is needed. </li>
<li>For analysis <a href=""http://graphs.mozilla.org"" rel=""nofollow"">Mozilla dynamic graphs</a> are great for doing comparative graphing. It would be great to have comparative graphing between different tags. For example compare N build versions, compare platforms, compare build options, etc. </li>
<li>We have a test suite of 3K tests, data will be gathered per test, and grouped from inter-test data, to per test, to per tagged group, to complete regression suite. </li>
<li>Possibilities include <a href=""http://oss.oetiker.ch/rrdtool/index.en.html"" rel=""nofollow"">RRDTool</a>, <a href=""http://www.orcaware.com/orca/example_sites.html"" rel=""nofollow"">Orca</a>, <a href=""http://graphite.wikidot.com/screen-shots"" rel=""nofollow"">Graphite</a></li>
</ul>

<h2>Analysis on a grouping basis</h2>

<ul>
<li>Min</li>
<li>Max</li>
<li>Median</li>
<li>Avg</li>
<li>Standard Deviation</li>
<li>etc</li>
</ul>

<h2>Presentation</h2>

<p>All of this would be presented and controlled through a app server, preferably Django or TG would be best.</p>

<h2>Inspiration</h2>

<ul>
<li><a href=""http://www.centreon.com/Product/Pre-requisits-Centreon-2.x.html"" rel=""nofollow"">Centreon</a></li>
<li><a href=""http://cactiusers.org/index.php"" rel=""nofollow"">Cacti</a></li>
</ul>
"
224771,17451,2008-10-22T07:41:50Z,0,How do you use the cursor for reading multiple files in database in python,"<p>In python how do you read multiple files from a mysql database using the cursor or loop one by one and store the output in a separate table?</p>
"
224796,11527,2008-10-22T08:02:06Z,6,"How can I generate a report file (ODF, PDF) from a django view","<p>I would like to generate a report file from a view&amp;template in django.
Preferred file formats would be OpenOffice/ODF or PDF.</p>

<p>What is the best way to do this?</p>

<p>I do want to reuse the page layout defined in the template, possibly by redefining some blocks in a derived template.</p>

<p>Ideally, the report should be inserted into an existing template file so I can provide the overall page layout, headers and footer in the generated output format.</p>
"
225086,7779,2008-10-22T09:59:21Z,45,RFC 1123 Date Representation in Python?,"<p>Is there a fairly easy way to convert a datetime object into an RFC 1123 (HTTP/1.1) date/time string, i.e. a string with the format</p>

<pre><code>Sun, 06 Nov 1994 08:49:37 GMT
</code></pre>

<p>Using <code>strftime</code> does not work, since the strings are locale-dependant. Do I have to build the string by hand?</p>
"
225274,11324,2008-10-22T11:09:20Z,8,Parsing different date formats from feedparser in python?,"<p>I'm trying to get the dates from entries in two different RSS feeds through <a href=""http://feedparser.org"">feedparser</a>.</p>

<p>Here is what I'm doing:</p>

<pre><code>import feedparser as fp
reddit = fp.parse(""http://www.reddit.com/.rss"")
cc = fp.parse(""http://contentconsumer.com/feed"")
print reddit.entries[0].date
print cc.entries[0].date
</code></pre>

<p>And here's how they come out:</p>

<pre><code>2008-10-21T22:23:28.033841+00:00

Wed, 15 Oct 2008 10:06:10 +0000
</code></pre>

<p>I want to get to the point where I can find out which is newer easily.</p>

<p>I've tried using the datetime module of Python and searching through the feedparser documentation, but I can't get past this problem. Any help would be much appreciated.</p>
"
225598,745,2008-10-22T12:49:54Z,112,"""Pretty"" Continuous Integration for Python","<p>This is a slightly.. vain question, but BuildBot's output isn't particularly nice to look at..</p>

<p>For example, compared to..</p>

<ul>
<li><a href=""http://phpundercontrol.org/about.html"">phpUnderControl</a></li>
<li><a href=""http://jenkins-ci.org/content/about-jenkins-ci"">Jenkins</a>
<ul>
<li><a href=""http://blogs.oracle.com/arungupta/entry/top_10_features_of_hudson"">Hudson</a></li>
</ul></li>
<li><a href=""http://cruisecontrolrb.thoughtworks.com/"">CruiseControl.rb</a></li>
</ul>

<p>..and others, <a href=""http://buildbot.python.org/stable/"">BuildBot</a> looks rather.. archaic</p>

<p>I'm currently playing with Hudson, but it is very Java-centric (although with <a href=""http://redsolo.blogspot.com/2007/11/hudson-embraces-python.html"">this guide</a>, I found it easier to setup than BuildBot, and produced more info)</p>

<p>Basically: is there any Continuous Integration systems aimed at python, that produce lots of shiny graphs and the likes?</p>

<hr>

<p><strong>Update:</strong> Since this time the Jenkins project has replaced Hudson as the community version of the package. The original authors have moved to this project as well. Jenkins is now a standard package on Ubuntu/Debian, RedHat/Fedora/CentOS, and others. The following update is still essentially correct. The starting point to do this with <a href=""http://jenkins-ci.org"">Jenkins</a> is different.</p>

<p><strong><em>Update:</em></strong> After trying a few alternatives, I think I'll stick with Hudson. <a href=""http://integrityapp.com/"">Integrity</a> was nice and simple, but quite limited. I think <a href=""http://buildbot.net/trac"">Buildbot</a> is better suited to having numerous build-slaves, rather than everything running on a single machine like I was using it.</p>

<p>Setting Hudson up for a Python project was pretty simple:</p>

<ul>
<li>Download Hudson from <a href=""http://hudson-ci.org/"">http://hudson-ci.org/</a></li>
<li>Run it with <code>java -jar hudson.war</code></li>
<li>Open the web interface on the default address of <code>http://localhost:8080</code></li>
<li>Go to Manage Hudson, Plugins, click ""Update"" or similar</li>
<li>Install the Git plugin (I had to set the <code>git</code> path in the Hudson global preferences)</li>
<li>Create a new project, enter the repository, SCM polling intervals and so on</li>
<li>Install <code>nosetests</code> via <code>easy_install</code> if it's not already</li>
<li>In the a build step, add <code>nosetests --with-xunit --verbose</code></li>
<li>Check ""Publish JUnit test result report"" and set ""Test report XMLs"" to <code>**/nosetests.xml</code></li>
</ul>

<p>That's all that's required. You can setup email notifications, and <a href=""http://wiki.hudson-ci.org/display/HUDSON/Plugins"">the plugins</a> are worth a look. A few I'm currently using for Python projects:</p>

<ul>
<li><a href=""http://wiki.hudson-ci.org/display/HUDSON/SLOCCount+Plugin"">SLOCCount plugin</a> to count lines of code (and graph it!) - you need to install <a href=""http://www.dwheeler.com/sloccount/"">sloccount</a> separately</li>
<li><a href=""http://wiki.hudson-ci.org/display/HUDSON/Violations"">Violations</a> to parse the PyLint output (you can setup warning thresholds, graph the number of violations over each build)</li>
<li><a href=""http://wiki.hudson-ci.org/display/HUDSON/Cobertura+Plugin"">Cobertura</a> can parse the coverage.py output. Nosetest can gather coverage while running your tests, using <code>nosetests --with-coverage</code> (this writes the output to <code>**/coverage.xml</code>)</li>
</ul>
"
225675,15842,2008-10-22T13:15:08Z,6,Unexpected list comprehension behaviour in Python,"<p>I believe I'm getting bitten by some combination of nested scoping rules and list comprehensions.  <a href=""http://www.python.org/~jeremy/weblog/040204.html"">Jeremy Hylton's blog post</a> is suggestive about the causes, but I don't really understand CPython's implementation well-enough to figure out how to get around this. </p>

<p>Here is an (overcomplicated?) example.  If people have a simpler one that demos it, I'd like to hear it.   The issue:  the list comprehensions using next() are filled with the result from the last iteration.  </p>

<p><strong>edit</strong>: The Problem:</p>

<p>What exactly is going on with this, and how do I fix this?  Do I have to use a standard for loop? Clearly the function is running the correct number of times, but the list comprehensions end up with the <em>final</em> value instead of the result of each loop.</p>

<p>Some hypotheses:</p>

<ul>
<li>generators?</li>
<li>lazy filling of list comprehensions?</li>
</ul>

<p><strong>code</strong></p>

<pre><code>import itertools
def digit(n):
    digit_list = [ (x,False) for x in xrange(1,n+1)]
    digit_list[0] = (1,True)
    return itertools.cycle ( digit_list)
</code></pre>

<pre>
>>> D = digit(5)
>>> [D.next() for x in range(5)]
## This list comprehension works as expected
[(1, True), (2, False), (3, False), (4, False), (5, False)]
</pre>

<pre><code>class counter(object):
    def __init__(self):
        self.counter = [ digit(4) for ii in range(2) ] 
        self.totalcount=0
        self.display = [0,] * 2
    def next(self):
        self.totalcount += 1
        self.display[-1] = self.counter[-1].next()[0]
        print self.totalcount, self.display
        return self.display

    def next2(self,*args):
        self._cycle(1)
        self.totalcount += 1
        print self.totalcount, self.display
        return self.display

    def _cycle(self,digit):
        d,first = self.counter[digit].next()
        #print digit, d, first
        #print self._display
        self.display[digit] = d
        if first and digit &gt; 0:
            self._cycle(digit-1)


C = counter()
[C.next() for x in range(5)]
[C.next2() for x in range(5)]
</code></pre>

<p><strong>OUTPUT</strong></p>

<pre>
In [44]: [C.next() for x in range(6)]
1 [0, 1]
2 [0, 2]
3 [0, 3]
4 [0, 4]
5 [0, 1]
6 [0, 2]
Out[44]: [[0, 2], [0, 2], [0, 2], [0, 2], [0, 2], [0, 2]]

In [45]: [C.next2() for x in range(6)]
7 [0, 3]
8 [0, 4]
9 [1, 1]
10 [1, 2]
11 [1, 3]
12 [1, 4]
Out[45]: [[1, 4], [1, 4], [1, 4], [1, 4], [1, 4], [1, 4]]

# this should be:  [[0,3],[0,4]....[1,4]] or similar
</pre>
"
225735,11760,2008-10-22T13:33:23Z,55,Batch Renaming of Files in a Directory,"<p>Is there an easy way to rename a group of files already contained in a directory, using Python?</p>

<p><strong>Example:</strong>   I have a directory full of *.doc files and I want to rename them in a consistent way.</p>

<blockquote>
  <p>X.doc -> ""new(X).doc""</p>
  
  <p>Y.doc -> ""new(Y).doc""</p>
</blockquote>
"
226279,11542,2008-10-22T15:25:00Z,3,Decoding a WBXML SyncML message from an S60 device,"<p>I'm trying to decode a WBXML encoded SyncML message from a Nokia N95.
My first attempt was to use the python pywbxml module which wraps calls to libwbxml. Decoding the message with this gave a lot of &lt;unknown&gt; tags and a big chunk of binary within a &lt;Collection&gt; tag. I tried running the contents of the &lt;Collection&gt; through by itself but it failed. Is there something I'm missing?</p>

<p>Also, does anyone know of a pure python implementation of a wbxml parser? Failing that a command line or online tool to decode these messages would be useful -- it would make it a lot easier for me to write my own...</p>
"
226510,13009,2008-10-22T16:10:03Z,16,Django Forms - How to Use Prefix Parameter,"<p>Say I have a form like:</p>

<pre><code>class GeneralForm(forms.Form):
    field1 = forms.IntegerField(required=False)
    field2 = forms. IntegerField(required=False)
</code></pre>

<p>And I want to show it twice on a page within one form tag each time with a different prefix e.g.,:</p>

<pre><code>rest of page ...
&lt;form ..&gt;
GeneralForm(data,prefix=""form1"").as_table()
GeneralForm(data,prefix=""form2"").as_table()
&lt;input type=""submit"" /&gt;
&lt;/form&gt;
rest of page ...
</code></pre>

<p>When the user submits this, how do I get the submitted form back into two separate forms to do validation, and redisplay it?</p>

<p><a href=""http://docs.djangoproject.com/en/dev/ref/forms/api/#prefixes-for-forms"">This was the only documentation</a> I could find and it's peckish.</p>
"
226528,19212,2008-10-22T16:14:40Z,17,How does one put a link / url to the web-site's home page in Django?,"<p>In Django templates, is there a variable in the context (e.g. <code>{{ BASE\_URL }}</code>, <code>{{ ROOT\_URL }}</code>, or <code>{{ MEDIA\_URL }}</code> that one can use to link to the <code>home</code> url of a project?</p>

<p>I.e. if Django is running in the root of a project, the variable (let's call it R) <code>{{ R }}</code> in a template would be <code>/</code>. If the root url is a sub-folder <code>http://host/X/</code> the variable <code>{{ R }}</code> would be <code>/X/</code> (or <code>http://host/X/</code>).</p>

<p>It seems painfully simple, but I can't find an answer. :) Thank you!</p>
"
226693,15055,2008-10-22T17:00:11Z,34,Python Disk-Based Dictionary,"<p>I was running some dynamic programming code (trying to brute-force disprove the Collatz conjecture =P) and I was using a dict to store the lengths of the chains I had already computed. Obviously, it ran out of memory at some point. Is there any easy way to use some variant of a <code>dict</code> which will page parts of itself out to disk when it runs out of room? Obviously it will be slower than an in-memory dict, and it will probably end up eating my hard drive space, but this could apply to other problems that are not so futile.</p>

<p>I realized that a disk-based dictionary is pretty much a database, so I manually implemented one using sqlite3, but I didn't do it in any smart way and had it look up every element in the DB one at a time... it was about 300x slower.</p>

<p>Is the smartest way to just create my own set of dicts, keeping only one in memory at a time, and paging them out in some efficient manner?</p>
"
227222,29238,2008-10-22T19:33:34Z,6,How can you extract Hardware ID using Python?,"<p>How do you extract an HD and Bios Unique ID, using python script?</p>
"
227279,12419,2008-10-22T19:48:33Z,16,How do you create a simple Google Talk Client using the Twisted Words Python library?,"<p>I am interested in making a Google Talk client using Python and would like to use the Twisted libraries Words module.  I have looked at the examples, but they don't work with the current implementation of Google Talk.</p>

<p>Has anybody had any luck with this?  Would you mind documenting a brief tutorial?</p>

<p>As a simple task, I'd like to create a client/bot that tracks the Online time of my various Google Talk accounts so that I can get an aggregate number.  I figure I could friend the bot in each account and then use the XMPP presence information to keep track of the times that I can then aggregate.</p>

<p>Thanks.</p>
"
227282,1266,2008-10-22T19:48:55Z,3,Solving an inequality for minimum value,"<p>I'm working on a programming problem which boils down to a set of an equation and inequality:</p>

<pre><code>x[0]*a[0] + x[1]*a[1] + ... x[n]*a[n] &gt;= D
x[0]*b[0] + x[1]*b[1] + ... x[n]*b[n] =  C
</code></pre>

<p>I want to solve for the values of <code>X</code> that will give the absolute minimum of <code>C</code>, given the input <code>D</code> and lists and <code>A</code> and <code>B</code> consisting of <code>a[0 - n]</code> and <code>b[0 - n ]</code>.</p>

<p>I'm doing the problem at the moment in Python, but the problem in general is language-agnostic.</p>

<p>CLARIFICATION UPDATE: the coefficients <code>x[0 - n]</code> are restricted to the set of non-negative integers.</p>
"
227459,17693,2008-10-22T20:39:57Z,548,ASCII value of a character in Python,"<p>How do I get the <a href=""http://en.wikipedia.org/wiki/ASCII"">ASCII</a> value of a character as an int in <a href=""http://en.wikipedia.org/wiki/Python_%28programming_language%29"">Python</a>?</p>
"
227461,8206,2008-10-22T20:40:00Z,13,"Open file, read it, process, and write back - shortest method in Python","<p>I want to do some basic filtering on a file. Read it, do processing, write it back. </p>

<p>I'm not looking for ""golfing"", but want the simplest and most elegant method to achieve this. I came up with:</p>

<pre><code>from __future__ import with_statement

filename = ""..."" # or sys.argv...

with open(filename) as f:
    new_txt = # ...some translation of f.read() 

open(filename, 'w').write(new_txt)
</code></pre>

<p>The <code>with</code> statement makes things shorter since I don't have to explicitly open and close the file.</p>

<p>Any other ideas ?</p>
"
227790,5625,2008-10-22T22:38:49Z,12,Passing a list while retaining the original,"<p>So I'm teaching myself Python, and I'm having an issue with lists. I want to pass my function a list and pop items off it while retaining the original list. How do I make python ""instance"" the passed list rather that passing a pointer to the original one?</p>

<p>Example:</p>

<pre><code>def burninate(b):
    c = []
    for i in range(3):
    	c.append(b.pop())
    return c

a = range(6)
d = burninate(a)
print a, d
</code></pre>

<p>Output: [0, 1, 2] [5, 4, 3]<br>
Desired output: [0, 1, 2, 3, 4, 5] [5, 4, 3]</p>

<p>Thanks!</p>
"
227928,20654,2008-10-22T23:38:30Z,17,What's win32con module in python? Where can I find it?,"<p>I'm building an open source project that uses python and c++ in Windows.
I came to the following error message:</p>

<pre><code> ImportError: No module named win32con
</code></pre>

<p>The same happened in a ""prebuilt"" code that it's working ( except in my computer :P ) </p>

<p>I think this is kind of ""popular"" module in python because I've saw several messages in other forums but none that could help me.</p>

<p>I have Python2.6, should I have that module already installed?
Is that something of VC++?</p>

<p>Thank you for the help.</p>

<p>I got this url <a href=""http://sourceforge.net/projects/pywin32/"">http://sourceforge.net/projects/pywin32/</a>  but I'm not sure what to do with the executable :S</p>
"
228642,NA,2008-10-23T05:35:32Z,25,Python debugger: Stepping into a function that you have called interactively,"<p>Python is quite cool, but unfortunately, its debugger is not as good as perl -d.  </p>

<p>One thing that I do very commonly when experimenting with code is to call a function from within the debugger, and step into that function, like so:</p>

<pre><code># NOTE THAT THIS PROGRAM EXITS IMMEDIATELY WITHOUT CALLING FOO()
~&gt; cat -n /tmp/show_perl.pl
1  #!/usr/local/bin/perl
2
3  sub foo {
4      print ""hi\n"";
5      print ""bye\n"";
6  }
7
8  exit 0;

~&gt; perl -d /tmp/show_perl.pl

Loading DB routines from perl5db.pl version 1.28
Editor support available.

Enter h or `h h' for help, or `man perldebug' for more help.

main::(/tmp/show_perl.pl:8):    exit 0;

# MAGIC HAPPENS HERE -- I AM STEPPING INTO A FUNCTION THAT I AM CALLING INTERACTIVELY
  DB&lt;1&gt; s foo() 
main::((eval 6)[/usr/local/lib/perl5/5.8.6/perl5db.pl:628]:3):
3:      foo();


  DB&lt;&lt;2&gt;&gt; s
main::foo(/tmp/show_perl.pl:4):     print ""hi\n"";


  DB&lt;&lt;2&gt;&gt; n
hi
main::foo(/tmp/show_perl.pl:5):     print ""bye\n"";


  DB&lt;&lt;2&gt;&gt; n
bye


  DB&lt;2&gt; n
Debugged program terminated.  Use q to quit or R to restart,
  use O inhibit_exit to avoid stopping after program termination,
  h q, h R or h O to get additional info.  

  DB&lt;2&gt; q
</code></pre>

<p>This is incredibly useful when trying to step through a function's handling of various different inputs to figure out why it fails.  However, it does not seem to work in either pdb or pydb (I'd show an equivalent python example to the one above but it results in a large exception stack dump).</p>

<p>So my question is twofold:</p>

<ol>
<li>Am I missing something?</li>
<li>Is there a python debugger that would indeed let me do this?</li>
</ol>

<p>Obviously I could put the calls in the code myself, but I love working interactively, eg. not having to start from scratch when I want to try calling with a slightly different set of arguments.</p>
"
228702,23648,2008-10-23T06:14:02Z,7,How to get hex string from signed integer,"<p>Say I have the classic 4-byte signed integer, and I want something like
<p> print hex(-1)
<p> to give me something like
<p>>> 0xffffffff
<p> In reality, the above gives me -0x1. I'm dawdling about in some lower level language, and python commandline is quick n easy. 
<p> So.. is there a way to do it?</p>
"
228730,1512,2008-10-23T06:32:30Z,39,How do I iterate through a string in Python?,"<p>As an example, lets say I wanted to list the frequency of each letter of the alphabet in a string. What would be the easiest way to do it?</p>

<p>This is an example of what I'm thinking of... the question is how to make allTheLetters equal to said letters without something like allTheLetters = ""abcdefg...xyz"". In many other languages I could just do letter++ and increment my way through the alphabet, but thus far I haven't come across a way to do that in python.</p>

<pre><code>def alphCount(text):
  lowerText = text.lower()
  for letter in allTheLetters:  
    print letter + "":"", lowertext.count(letter)
</code></pre>
"
228912,18676,2008-10-23T08:13:36Z,45,SQLite parameter substitution problem,"<p>Using SQLite3 with Python 2.5, I'm trying to iterate through a list and pull the weight of an item from the database based on the item's name.</p>

<p>I tried using the ""?"" parameter substitution suggested to prevent SQL injections but it doesn't work. For example, when I use:</p>

<pre><code>for item in self.inventory_names:
    self.cursor.execute(""SELECT weight FROM Equipment WHERE name = ?"", item)
    self.cursor.close()
</code></pre>

<p>I get the error:</p>

<blockquote>
  <p>sqlite3.ProgrammingError: Incorrect number of bindings supplied. The current statement uses 1, and there are 8 supplied.</p>
</blockquote>

<p>I believe this is somehow caused by the initial creation of the database; the module I made that actually creates the DB does have 8 bindings.</p>

<pre><code>cursor.execute(""""""CREATE TABLE Equipment 
    (id INTEGER PRIMARY KEY, 
    name TEXT,
    price INTEGER, 
    weight REAL, 
    info TEXT, 
    ammo_cap INTEGER, 
    availability_west TEXT,
    availability_east TEXT)"""""")
</code></pre>

<p>However, when I use the less-secure ""%s"" substitution for each item name, it works just fine. Like so:</p>

<pre><code>for item in self.inventory_names:
    self.cursor.execute(""SELECT weight FROM Equipment WHERE name = '%s'"" % item)
    self.cursor.close()
</code></pre>

<p>I can't figure out why it thinks I have 8 bindins when I'm only calling one. How can I fix it?</p>
"
229186,21537,2008-10-23T10:03:59Z,50,os.walk without digging into directories below,"<p>How do I limit <code>os.walk</code> to only return files in the directory I provide it?</p>

<pre><code>def _dir_list(self, dir_name, whitelist):
    outputList = []
    for root, dirs, files in os.walk(dir_name):
        for f in files:
            if os.path.splitext(f)[1] in whitelist:
                outputList.append(os.path.join(root, f))
            else:
                self._email_to_(""ignore"")
    return outputList
</code></pre>
"
229352,NA,2008-10-23T11:15:42Z,2,Python Find Question,"<p>I am using Python to extract the filename from a link using rfind like below:</p>

<pre><code>url = ""http://www.google.com/test.php""

print url[url.rfind(""/"") +1 : ]
</code></pre>

<p>This works ok with links without a / at the end of them and returns ""test.php"".  I have encountered links with / at the end like so ""http://www.google.com/test.php/"".  I am have trouble getting the page name when there is a ""/"" at the end, can anyone help?</p>

<p>Cheers</p>
"
229756,422,2008-10-23T13:41:31Z,6,Python - Library Problems,"<p>I'm relatively new to Python and am having problems programming with Scapy, the Python network manipulation tool. However, I can't tell if it's as much a Scapy problem as it is a being-a-Python-newbie problem. On the <a href=""http://www.secdev.org/projects/scapy/build_your_own_tools.html"">scapy site</a>, they give a sample program which I'm not able to run on my own machine:</p>

<pre><code>#! /usr/bin/env python

import sys
from scapy import sr1,IP,ICMP

p=sr1(IP(dst=sys.argv[1])/ICMP())
if p:
    p.show()
</code></pre>

<p>To which I get:</p>

<pre><code>Traceback (most recent call last):
  File ""test.py"", line 4, in &lt;module&gt;
    from scapy import sr1,IP,ICMP
ImportError: cannot import name sr1
</code></pre>

<p>So my question then is: when installing Python libraries, do I need to change my path or anything similar? Also, is there something I can run in the interpreter to tell me the contents of the scapy package? I can run <code>from scapy import *</code> just fine, but since I have no idea what's inside it, it's hard to use it.</p>
"
230310,13990,2008-10-23T15:59:07Z,3,"Any good ""contact us"" recipes for Cherrypy?","<p>I'm looking to implement a ""Contact Us"" form with Cherrypy and was wondering: Is there a good recipe (or a BSD licensed set of code) that I could use instead of reinventing the wheel?</p>

<p>Ideally, this would be Cherrpy 3.1 compatible.</p>
"
230751,8835,2008-10-23T17:59:39Z,605,How to flush output of Python print?,"<p>How do I force Python's print function to output to the screen?</p>
"
230845,7949,2008-10-23T18:22:33Z,5,Make python enter password when running a csh script,"<p>I'm writing a python script that executes a csh script in Solaris 10. The csh script prompts the user for the root password (which I know) but I'm not sure how to make the python script answer the prompt with the password. Is this possible? Here is what I'm using to execute the csh script:</p>

<pre><code>import commands

commands.getoutput('server stop')
</code></pre>
"
230896,4766,2008-10-23T18:33:51Z,13,"Given a list of variable names in Python, how do I a create a dictionary with the variable names as keys (to the variables' values)?","<p>I have a list of variable names, like this:</p>

<pre><code>['foo', 'bar', 'baz']
</code></pre>

<p>(I originally asked how I convert a list of variables.  See Greg Hewgill's answer below.)</p>

<p>How do I convert this to a dictionary where the keys are the variable names (as strings) and the values are the values of the variables?</p>

<pre><code>{'foo': foo, 'bar': bar, 'baz': baz}
</code></pre>

<p>Now that I'm re-asking the question, I came up with:</p>

<pre><code>d = {}
for name in list_of_variable_names:
    d[name] = eval(name)
</code></pre>

<p>Can that be improved upon?</p>

<p><strong>Update</strong>, responding to the question (in a comment) of why I'd want to do this:</p>

<p>I often find myself using the % operator to strings with a dictionary of names and values to interpolate.  Often the names in the string is just the names of local variables.  So (with the answer below) I can do something like this:</p>

<pre><code>message = '''Name: %(name)s
ZIP: %(zip)s

Dear %(name)s,
...''' % dict((x, locals()[x]) for x in ['name', 'zip'])
</code></pre>
"
231767,18300,2008-10-23T22:21:11Z,5524,"What does the ""yield"" keyword do?","<p>What is the use of the <code>yield</code> keyword in Python? What does it do?</p>

<p>For example, I'm trying to understand this code<sup><strong>1</strong></sup>:</p>

<pre><code>def _get_child_candidates(self, distance, min_dist, max_dist):
    if self._leftchild and distance - max_dist &lt; self._median:
        yield self._leftchild
    if self._rightchild and distance + max_dist &gt;= self._median:
        yield self._rightchild  
</code></pre>

<p>And this is the caller:</p>

<pre><code>result, candidates = list(), [self]
while candidates:
    node = candidates.pop()
    distance = node._get_dist(obj)
    if distance &lt;= max_dist and distance &gt;= min_dist:
        result.extend(node._values)
    candidates.extend(node._get_child_candidates(distance, min_dist, max_dist))
return result
</code></pre>

<p>What happens when the method <code>_get_child_candidates</code> is called?
A list is returned? A single element is returned? Is it called again? When will subsequent calls stop?</p>

<hr>

<p><sub>
1. The code comes from Jochen Schulz (jrschulz), who made a great Python library for metric spaces. This is the link to the complete source: <a href=""http://well-adjusted.de/~jrschulz/mspace/"">Module mspace</a>.</sub></p>
"
231839,17523,2008-10-23T22:40:55Z,21,Python inheritance - how to disable a function,"<p>In C++ you can disable a function in parent's class by declaring it as private in the child class. How can this be done in Python? I.E. How can I hide parent's function from child's public interface?</p>
"
231924,31011,2008-10-23T23:20:38Z,14,What's the best python soap stack for consuming Amazon Web Services WSDL?,"<p>Python has a <a href=""http://stackoverflow.com/questions/206154/whats-the-best-soap-client-library-for-python-and-where-is-the-documentation-fo"">number of soap stacks</a>; as near as I can tell, all have substantial defects.</p>

<p>Has anyone had luck consuming <i>and</i> using WSDL for S3, EC2, and SQS in python?</p>

<p>My experience is that suds fails when constructing a Client object; after some wrangling, ZSI generates client code that doesn't work; etc.</p>

<p>Finally, I'm aware of <a href=""http://code.google.com/p/boto/"" rel=""nofollow"">boto</a> but as it is a hand-rolled wrapper around AWS, it is (1) incomplete and (2) never up-to-date with the latest AWS WSDL.</p>
"
232008,10583,2008-10-23T23:50:15Z,12,Will Django be a good choice for a permissions based web-app?,"<p>I've been exploring the details of Django for about a week now and like what I see. However I've come upon some.. negativity in relation to fine-grained control of permissions to the CRUD interface.</p>

<p>What I'm writing is an Intranet client management web-app. The organisation is about 6 tiers, and I need to restrict access to client groups based on tiers. Continually expanding. I have a fairly good idea how I'm going to do this, but am not sure if I'll be able to integrate it well into the pre-built admin interface. </p>

<p>I've done absolutely zero Django development otherwise I'd probably have a better idea on whether this would work or not. I probably won't use Django if the generated admin interface is going to be useless to this project - but like I said, there is a heavy reliance on fine-grained custom permissions.</p>

<p>Will Django let me build custom permissions/rules and integrate it seamlessly into the admin CRUD interface?</p>

<p>Update One: I want to use the admin app to minimise the repitition of generating CRUD interfaces, so yes I consider it a must have.</p>

<p>Update Two:</p>

<p>I want to describe the permissions required for this project.</p>

<p>A client can belong to one or many 'stores'. Full time employees should only be able to edit clients at their store (even if they belong to another store). However, they should not be able to see/edit clients at another store. Casuals should only be able to view clients based on what store they are rostered too (or if the casual is logged in as the store user - more likely).</p>

<p>Management above them need to be able to see all employees for the stores they manage, nothing more.</p>

<p>Senior management should be able to edit ALL employees and grant permissions below themselves.</p>

<p>After reading the django documentation, it says you can't (autmoatically) set permissions for a sub-set of a group. Only the entire group. Is it easy enough to mock up your own permissions for this purpose?</p>
"
232162,10471,2008-10-24T01:09:24Z,7,How to do Makefile dependencies for python code,"<p>I have a bunch of C files that are generated by a collection of python programs that have a number of shared python modules and I need to account for this in my make system.</p>

<p>It is easy enough to enumerate which python program need to be run to generate each C file. What I can't find a good solution for is determining which other python files those programs depend on. I need this so make will know what needs regenerating if one of the shared python files changes.</p>

<p>Is there a good system for producing make style dependency rules from a collection of python sources?</p>
"
232435,25521,2008-10-24T03:52:50Z,33,How do I restrict foreign keys choices to related objects only in django,"<p>I have a two way foreign relation similar to the following</p>

<pre><code>class Parent(models.Model):
  name = models.CharField(max_length=255)
  favoritechild = models.ForeignKey(""Child"", blank=True, null=True)

class Child(models.Model):
  name = models.CharField(max_length=255)
  myparent = models.ForeignKey(Parent)
</code></pre>

<p>How do I restrict the choices for Parent.favoritechild to only children whose parent is itself?  I tried</p>

<pre><code>class Parent(models.Model):
  name = models.CharField(max_length=255)
  favoritechild = models.ForeignKey(""Child"", blank=True, null=True, limit_choices_to = {""myparent"": ""self""})
</code></pre>

<p>but that causes the admin interface to not list any children.</p>
"
233320,3404,2008-10-24T12:33:24Z,10,Cannot import SQLite with Python 2.6,"<p>I'm running Python 2.6 on Unix and when I run the interactive prompt (<a href=""http://en.wikipedia.org/wiki/SQLite"">SQLite</a> is supposed to be preinstalled) I get:</p>

<pre><code>[root@idev htdocs]# python
Python 2.6 (r26:66714, Oct 23 2008, 16:25:34)
[GCC 3.2.2 20030222 (Red Hat Linux 3.2.2-5)] on linux2
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt; import sqlite
Traceback (most recent call last):
File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
ImportError: No module named sqlite
&gt;&gt;&gt;
</code></pre>

<p>How do I resolve this?</p>
"
233673,8206,2008-10-24T14:08:25Z,113,Lexical closures in Python,"<p>While I was investigating a problem I had with lexical closures in Javascript code, I came along this problem in Python:</p>

<pre><code>flist = []

for i in xrange(3):
    def func(x): return x * i
    flist.append(func)

for f in flist:
    print f(2)
</code></pre>

<p>Note that this example mindfully avoids <code>lambda</code>. It prints ""4 4 4"", which is surprising. I'd expect ""0 2 4"". </p>

<p>This equivalent Perl code does it right:</p>

<pre><code>my @flist = ();

foreach my $i (0 .. 2)
{
    push(@flist, sub {$i * $_[0]});
}

foreach my $f (@flist)
{
    print $f-&gt;(2), ""\n"";
}
</code></pre>

<p>""0 2 4"" is printed.</p>

<p>Can you please explain the difference ?</p>

<p><hr /></p>

<p>Update: </p>

<p>The problem <strong>is not</strong> with <code>i</code> being global. This displays the same behavior:</p>

<pre><code>flist = []

def outer():
    for i in xrange(3):
        def inner(x): return x * i
        flist.append(inner)

outer()
#~ print i   # commented because it causes an error

for f in flist:
    print f(2)
</code></pre>

<p>As the commented line shows, <code>i</code> is unknown at that point. Still, it prints ""4 4 4"".</p>
"
234512,31256,2008-10-24T17:33:41Z,6,Splitting strings in python,"<p>I have a string which is like this:</p>

<p>this is [bracket test] ""and quotes test ""</p>

<p>I'm trying to write something in Python to split it up by space while ignoring spaces within square braces and quotes. The result I'm looking for is:</p>

<p>['this','is','bracket test','and quotes test '] </p>
"
234590,9859,2008-10-24T17:47:21Z,2,Solving the shared-server security problem for Python,"<p>So my group is trying to set up a shared-server environment for various and sundry web services.  I think we've settled on setting <code>disable_functions</code> and <code>disable_classes</code> site wide in <code>php.ini</code> and <code>php_admin_value</code> to force <code>open_basedir</code> in each app's <code>httpd.conf</code>
 for php scripts, and passenger's <a href=""http://www.modrails.com/documentation/Users%20guide.html#user_switching"" rel=""nofollow"">user switching</a> for ruby scripts.  </p>

<p>We still need to find something for python though.  Passenger does support python, but not for per-application security for specific sub-directories (it's all or nothing at the domain level).  </p>

<p>Any suggestions?</p>

<p>(And if any of the previous doesn't make sense - well, I'm the guy who's supposed to set up the python support, not the guy who set up the php or ruby support, so there's still some ""and then some magic happens"" steps in there from my perspective).</p>
"
234695,24730,2008-10-24T18:12:00Z,3,Default parameters to actions with Django,"<p>Is there a way to have a default parameter passed to a action in the case where the regex didnt match anything using django?</p>

<pre><code>
urlpatterns = patterns('',(r'^test/(?P&lt;name&gt;.*)?$','myview.displayName'))

#myview.py
def displayName(request,name):
      # write name to response or something
</code></pre>

<p>I have tried setting the third parameter in the urlpatterns to a dictionary containing ' and giving the name parameter a default value on the method, none of which worked. the name parameter always seems to be None. I really dont want to code a check for None if i could set a default value.</p>

<p>Clarification: here is an example of what i was changing it to.</p>

<pre><code>
def displayName(request,name='Steve'):
      return HttpResponse(name)
#i also tried

urlpatterns = patterns('',
      (r'^test/(?P&lt;name&gt;.*)?$',
        'myview.displayName',
        dict(name='Test')
      )
)
</code></pre>

<p>when i point my browser at the view it displays the text
'None'</p>

<p>Any ideas?</p>
"
235191,12981,2008-10-24T20:42:08Z,7,Trailing slashes in Pylons Routes,"<p>What is the best way to make trailing slashes not matter in the latest version of Routes (1.10)? I currently am using the clearly non-DRY:</p>

<pre><code>map.connect('/logs/', controller='logs', action='logs')
map.connect('/logs', controller='logs', action='logs')
</code></pre>

<p>I think that turning minimization on would do the trick, but am under the impression that it was disabled in the newer versions of Routes for a reason. Unfortunately documentation doesn't seem to have caught up with Routes development, so I can't find any good resources to go to. Any ideas?</p>
"
235416,2900,2008-10-24T22:07:57Z,2,how do I implement a custom code page used by a serial device so I can convert text to it in Python?,"<p>I have a scrolling LED sign that takes messages in either ASCII or (using some specific code) characters from a custom code page.</p>

<p>For example, the euro sign should be sent as</p>

<pre><code>&lt;U00&gt;
</code></pre>

<p>and ä is</p>

<pre><code>&lt;U64&gt;
</code></pre>

<p>(You can find the full code page in the <a href=""http://www.domoticaforum.eu/uploaded/Jfn/20082291593_RGB%20ledbar%20conrad.pdf"" rel=""nofollow"">documentation</a>)</p>

<p>My question is, what is the most pythonic way to implement this custom code page, and to have a codec that can convert UTF strings to my custom code page ?</p>
"
235435,9241,2008-10-24T22:13:54Z,12,Environment Variables in Python on Linux,"<p>Python's access to environment variables does not accurately reflect the operating system's view of the processes environment.</p>

<p>os.getenv and os.environ do not function as expected in particular cases.</p>

<p>Is there a way to properly get the running process' environment?</p>

<p><hr /></p>

<p>To demonstrate what I mean, take the two roughly equivalent programs (the first in C, the other in python):</p>

<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;unistd.h&gt;
int main(int argc, char *argv[]){
    char *env;
    for(;;){
        env = getenv(""SOME_VARIABLE"");
        if(env)
            puts(env);
        sleep(5);
    }
}
</code></pre>

<p><hr /></p>

<pre><code>import os
import time
while True:
    env = os.getenv(""SOME_VARIABLE"")
    if env is not None:
        print env
    time.sleep(5)
</code></pre>

<p><hr /></p>

<p>Now, if we run the C program and attach to the running process with gdb and forcibly change the environment under the hood by doing something like this:</p>

<pre><code>(gdb) print setenv(""SOME_VARIABLE"", ""my value"", 1)
[Switching to Thread -1208600896 (LWP 16163)]
$1 = 0
(gdb) print (char *)getenv(""SOME_VARIABLE"")
$2 = 0x8293126 ""my value""
</code></pre>

<p>then the aforementioned C program will start spewing out ""my value"" once every 5 seconds. The aforementioned python program, however, will not.</p>

<p>Is there a way to get the python program to function like the C program in this case?</p>

<p>(Yes, I realize this is a very obscure and potentially damaging action to perform on a running process)</p>

<p>Also, I'm currently using python 2.4, this may have been fixed in a later version of python.</p>
"
236205,9789,2008-10-25T10:30:57Z,3,Are there any web based email clients written in python?,"<p>I need to integrate a email client in my current python web app.
Anything available?</p>

<p>L.E.: I'm building my app on top of CherryPy</p>
"
236359,2900,2008-10-25T12:54:37Z,1,"What is your convention to distinguish between object methods to be called by the outside, and object methods to be called by a subclass?","<p>I know most of the ins and outs of Python's approach to private variables/members/functions/...</p>

<p>However, I can't make my mind up on how to distinguish between methods for external use or subclassing use.</p>

<p>Consider the following example:</p>

<pre><code>class EventMixin(object):
    def subscribe(self, **kwargs):
        '''kwargs should be a dict of event -&gt; callable, to be specialized in the subclass'''

    def event(self, name, *args, **kwargs):
        ...

    def _somePrivateMethod(self):
        ...
</code></pre>

<p>In this example, I want to make it clear that subscribe is a method to be used by external users of the class/object, while event is a method that should not be called from the outside, but rather by subclass implementations.</p>

<p>Right now, I consider both part of the public API, hence don't use any underscores.  However, for this particular situation, it would feel cleaner to, for example, use no underscores for the external API, one underscore for the subclassable API, and two underscores for the private/internal API.  However, that would become unwieldy because then the internal API would need to be invoked as</p>

<pre><code>self._EventMixin__somePrivateMethod()
</code></pre>

<p>So, what are your conventions, coding-wise, documentationwise, or otherwise ?</p>
"
236407,31157,2008-10-25T13:30:27Z,50,How can I use Python for large scale development?,"<p>I would be interested to learn about large scale development in Python and especially in how do you maintain a large code base?</p>

<ul>
<li><p>When you make incompatibility changes to the signature of a method, how do you find all the places where that method is being called. In C++/Java the compiler will find it for you, how do you do it in Python?</p></li>
<li><p>When you make changes deep inside the code, how do you find out what operations an instance provides, since you don't have a static type to lookup?</p></li>
<li><p>How do you handle/prevent typing errors (typos)?</p></li>
<li><p>Are UnitTest's used as a substitute for static type checking?</p></li>
</ul>

<p>As you can guess I almost only worked with statically typed languages (C++/Java), but I would like to try my hands on Python for larger programs. But I had a very bad experience, a long time ago, with the clipper (dBase) language, which was also dynamically typed.</p>
"
236692,2900,2008-10-25T17:00:09Z,11,How do I convert any image to a 4-color paletted image using the Python Imaging Library?,"<p>I have a device that supports 4-color graphics (much like CGA in the old days).</p>

<p>I wanted to use <a href=""http://www.pythonware.com/products/pil/"">PIL</a> to read the image and convert it using my 4-color palette (of red, green, yellow, black), but I can't figure out if it's even possible at all.  I found some mailing list archive posts that seem to suggest other people have tried to do so and failed.</p>

<p>A simple python example would be much appreciated!</p>

<p>Bonus points if you add something that then converts the image to a byte string where each byte represents 4 pixels of data (with each two bits representing a color from 0 to 3)</p>
"
236859,9789,2008-10-25T19:12:33Z,5,Any python libs for parsing Bind zone files?,"<p>Any python libs for parsing Bind zone files? 
Basically something that will aid in adding/removing zones and records.
This needs to work even if someone modifies the zone file by hand so overwriting the zone files every time is not a solution.  </p>
"
237079,305,2008-10-25T21:54:56Z,478,How to get file creation & modification date/times in Python?,"<p>I have a script that needs to do some stuff based on file creation &amp; modification dates but has to run on Linux &amp; Windows.</p>

<p>What's the best <strong>cross-platform</strong> way to get file creation &amp; modification date/times in Python?</p>
"
237128,10708,2008-10-25T22:37:03Z,169,Is there a reason Python strings don't have a string length method?,"<p>I know that python has a <code>len()</code> function that is used to determine the size of a string, but I was wondering why its not a method of the string object.</p>

<h2><strong>Update</strong></h2>

<p>Ok, I realized I was embarrassingly mistaken. <code>__len__()</code> is actually a method of a string object. It just seems weird to see object oriented code in Python using the len function on string objects. Furthermore, it's also weird to see <code>__len__</code> as the name instead of just len.</p>
"
237155,2908,2008-10-25T22:54:43Z,15,Multiple mouse pointers?,"<p>Is there a way to accept input from more than one mouse separately? I'm interested in making a multi-user application and I thought it would be great if I could have 2 or more users holding wireless mice each interacting with the app individually with a separate mouse arrow.</p>

<p>Is this something I should try to farm out to some other application/driver/os_magic? or is there a library I can use to accomplish this? Language isn't a <em>HUGE</em> deal, but C, C++, and Python are preferrable.</p>

<p>Thanks :)</p>

<p>edit:</p>

<p>Found this multi-pointer toolkit for linux (it's actually a multi-pointer x server):
<a href=""http://wearables.unisa.edu.au/mpx/"" rel=""nofollow"">http://wearables.unisa.edu.au/mpx/</a></p>
"
237209,9789,2008-10-25T23:36:52Z,8,Any python libs for parsing apache config files?,"<p>Any python libs for parsing apache config files or if not python anyone aware of such thing in other languages (perl, php, java, c#)?
As i'll be able to rewrite them in python.</p>
"
237211,18388,2008-10-25T23:41:52Z,6,How do you programmatically reorder children of an ATFolder subclass?,"<p>I have Plone product that uses a custom folder type for containing a set of custom content objects.  The folder type was created by subclassing BaseFolder and it has a schema with a couple of text fields.  Currently, when custom objects are added to the custom folder, the objects are sorted alphabetically by their id.  How can I override this behavior and allow my users to sort the custom folders manually, say through the ""Contents"" view?</p>
"
237235,26592,2008-10-26T00:09:08Z,13,How to disable HTML encoding when using Context in django,"<p>In my django application I am using a template to construct email body, one of the parameters is url, note there are two parametes separated by ampersand in the url.</p>

<pre><code>t = loader.get_template(""sometemplate"")
c = Context({
   'foo': 'bar',
   'url': 'http://127.0.0.1/test?a=1&amp;b=2',
})
print t.render(c)
</code></pre>

<p>After rendering it produces: <code>http://127.0.0.1/test?a=1&amp;amp;amp;b=2</code></p>

<p>Note the ampersand is HTML encoded as ""&amp;amp;"". One way around the problem is to pass each parameter separately to my template and construct the url in the template, however I'd like to avoid doing that.</p>

<p>Is there a way to disable HTML encoding of context parameters or at the very least avoid encoding of ampersands?</p>
"
237432,720,2008-10-26T02:49:09Z,49,python properties and inheritance,"<p>I have a base class with a property which (the get method) I want to overwrite in the subclass. My first thought was something like:</p>

<pre><code>class Foo(object):
    def _get_age(self):
        return 11

    age = property(_get_age)


class Bar(Foo):
    def _get_age(self):
        return 44
</code></pre>

<p>This does not work (subclass bar.age returns 11). I found a solution with an lambda expression which works:</p>

<pre><code>age = property(lambda self: self._get_age())
</code></pre>

<p>So is this the right solution for using properties and overwrite them in a subclass, or are there other preferred ways to do this?</p>
"
237699,1512,2008-10-26T07:42:17Z,2,How do I parse a listing of files to get just the filenames in python?,"<p>So lets say I'm using Python's <a href=""http://www.python.org/doc/2.5.2/lib/module-ftplib.html"" rel=""nofollow"">ftplib</a> to retrieve a list of log files from an FTP server. How would I parse that list of files to get just the file names (the last column) inside a list? See the link above for example output.</p>
"
237731,2900,2008-10-26T08:26:31Z,1,Daylight savings time change affecting the outcome of saving and loading an icalendar file?,"<p>I have some unit tests that started failing today after a switch in daylight savings time.</p>

<p>We're using the <a href=""http://codespeak.net/icalendar/"" rel=""nofollow"">iCalendar python module</a> to load and save ics files.</p>

<p>The following script is a simplified version of our test.  The script works fine in 'summer' and fails in 'winter', as of this morning.  The failure can be reproduced by setting the clock back manually.  Here's the output of the script:</p>

<pre><code>[root@ana icalendar]# date 10250855
Sat Oct 25 08:55:00 CEST 2008
[root@ana icalendar]# python dst.py
DTSTART should represent datetime.datetime(2015, 4, 4, 8, 0, tzinfo=tzfile('/usr/share/zoneinfo/Europe/Brussels')) Brussels time
DTSTART should represent datetime.datetime(2015, 4, 4, 6, 0, tzinfo=&lt;icalendar.prop.UTC object at 0x956b5cc&gt;) UTC
DTSTART represents datetime.datetime(2015, 4, 4, 6, 0, tzinfo=&lt;icalendar.prop.UTC object at 0x956b5cc&gt;) Brussels time
[root@ana icalendar]# date 10260855
Sun Oct 26 08:55:00 CET 2008
[root@ana icalendar]# python dst.py
DTSTART should represent datetime.datetime(2015, 4, 4, 8, 0, tzinfo=tzfile('/usr/share/zoneinfo/Europe/Brussels')) Brussels time
DTSTART should represent datetime.datetime(2015, 4, 4, 6, 0, tzinfo=&lt;icalendar.prop.UTC object at 0x96615cc&gt;) UTC
DTSTART represents datetime.datetime(2015, 4, 4, 7, 0, tzinfo=&lt;icalendar.prop.UTC object at 0x96615cc&gt;) Brussels time
Traceback (most recent call last):
  File ""dst.py"", line 58, in &lt;module&gt;
    start.dt, startUTCExpected)
AssertionError: calendar's datetime.datetime(2015, 4, 4, 7, 0, tzinfo=&lt;icalendar.prop.UTC object at 0x96615cc&gt;) != expected datetime.datetime(2015, 4, 4, 6, 0, tzinfo=&lt;icalendar.prop.UTC object at 0x96615cc&gt;)
</code></pre>

<p>And here is the <a href=""https://thomas.apestaart.org/thomas/trac/browser/tests/icalendar/dst.py"" rel=""nofollow"">whole script</a>.</p>

<p>So, questions:
 - why would my current time (and which part of DST I'm in) affect the loading/saving/parsing of timestamps ? I would expect it not to.
 - how would you unit test this kind of bug, if it is a bug ? Obviously, I don't want my unit tests to reset the clock on my computer.</p>
"
237859,18676,2008-10-26T10:50:34Z,2,Formatting dict.items() for wxPython,"<p>I have a text box in wxPython that takes the output of dictionary.items() and displays it to the user as items are added to the dictionary. However, the raw data is very ugly, looking like </p>

<pre><code>[(u'BC',45)
(u'CHM',25)
(u'CPM',30)]
</code></pre>

<p>I know dictionary.items() is a list of tuples, but I can't seem to figure out how to make a nice format that is also compatible with the SetValue() method of wxPython.</p>

<p>I've tried iterating through the list and tuples. If I use a <em>print</em> statement, the output is fine. But when I replace the <em>print</em> statement with SetValue(), it only seems to get the last value of each tuple, rather than both items in the tuple.</p>

<p>I've also tried creating a string and passing that string to SetValue() but, again, I can only get one item in the tuple or the other, not both.</p>

<p>Any suggestions?</p>

<p><hr /></p>

<p><strong>Edit:</strong> Yes, I am passing the results of the dictionary.items() to a text field in a wxPython application. Rather than having the results like above, I'm simply looking for something like:</p>

<pre><code>BC 45
CHM 25
CMP 30
</code></pre>

<p>Nothing special, just simply pulling each value from each tuple and making a visual list.</p>

<p>I have tried making a string format and passing that to SetValue() but it gets hung up on the two values in the tuple. It will either double print each string and add the integers together or it simply returns the integer, depending on how I format it.</p>
"
237876,18676,2008-10-26T11:08:32Z,1,"Refactoring ""to hit"" values for a game","<p>I'm making a game and one of the methods calculates a character's base hit numbers based on skill values. The method currently calculates each value individually, since each skill can be used at short, medium, and long range.</p>

<p>I originally thought I could combine the skills into a tuple and iterate over it, dynamically creating each hit number. But I don't know if it's actually possible, since I currently have each hit number assigned to it's own variable.</p>

<p>I also thought about creating a method for each range, and passing the tuple as an argument. I could create a new tuple or list with the resulting values and then assign them to the individual variables, but I don't see how it would be any better than do it this way, except that it won't look so copy &amp; pasted.</p>

<p>Here's what I currently have:</p>

<pre><code>    def calcBaseHitNumbers(self, dict):
        """"""Calculate character's base hit numbers depending on skill level.""""""

        self.skill_dict = dict

        self.rifle = self.skill_dict.get('CRM', 0)
        self.pistol = self.skill_dict.get('PST', 0)
        self.big_gun = self.skill_dict.get('LCG', 0)
        self.heavy_weapon = self.skill_dict.get('HW', 0)
        self.bow = self.skill_dict.get('LB', 0)
        #self.skill_tuple = (self.rifle, self.pistol, self.big_gun, self.heavy_weapon,
        #    self.bow)

#---Short range
##        for skill in self.skill_tuple:
##            self.base_hit_short = skill * 0.6
        self.charAttribs.bhCRM_short = self.rifle * 0.6
        self.charAttribs.bhPST_short = self.pistol * 0.6
        self.charAttribs.bhHW_short = self.heavy_weapon * 0.6
        self.charAttribs.bhLCG_short = self.big_gun * 0.6
        self.charAttribs.bhLB_short = self.bow * 0.6
#---Med range
        self.charAttribs.bhCRM_med = self.rifle * 0.3
        self.charAttribs.bhPST_med = self.pistol * 0.3
        self.charAttribs.bhHW_med = self.heavy_weapon * 0.3
        self.charAttribs.bhLCG_med = self.big_gun * 0.3
        self.charAttribs.bhLB_med = self.bow * 0.3
#---Long range
        self.charAttribs.bhCRM_long = self.rifle * 0.1
        self.charAttribs.bhPST_long = self.pistol * 0.1
        self.charAttribs.bhHW_long = self.heavy_weapon * 0.1
        self.charAttribs.bhLCG_long = self.big_gun * 0.1
        self.charAttribs.bhLB_long = self.bow * 0.1
</code></pre>

<p>How would you refactor this so it's more dynamic?</p>

<p><hr /></p>

<p><strong>Edit:</strong> I guess what I want to do is something like this:
Have a tuple (like the one I commented out) and iterate over it 3 times, each time making a new value (for each skill) based on the modifier for each particular range. The resulting value is then automatically assigned to it's respective variable.</p>

<p>In my head, it makes sense. But when I actually try to code it, I get lost. The problem, I think, is that this is the first ""real"" program I've written; all I've done before are small scripts.</p>

<p>This is only the 0.1 version of my program, so it's not critical to refactor it now. However, it seems very un-Pythonic to do this manually and I also want to ""future-proof"" this in case things change down the road.</p>
"
238081,4172,2008-10-26T14:37:42Z,139,How do you log server errors on django sites,"<p>So, when playing with the development I can just set <code>settings.DEBUG</code> to <code>True</code> and if an error occures I can see it nicely formatted, with good stack trace and request information.</p>

<p>But on kind of production site I'd rather use <code>DEBUG=False</code> and show visitors some standard error 500 page with information that I'm working on fixing this bug at this moment ;)<br />
At the same time I'd like to have some way of logging all those information (stack trace and request info) to a file on my server - so I can just output it to my console and watch errors scroll, email the log to me every hour or something like this.</p>

<p>What logging solutions would you recomend for a django-site, that would meet those simple requirements? I have the application running as <code>fcgi</code> server and I'm using apache web server as frontend (although thinking of going to lighttpd).</p>
"
238102,28804,2008-10-26T14:50:40Z,31,Pattern matching of lists in Python,"<p>I want to do some pattern matching on lists in Python. For example, in Haskell, I can do something like the following:</p>

<pre><code>fun (head : rest) = ...
</code></pre>

<p>So when I pass in a list, <code>head</code> will be the first element, and <code>rest</code> will be the trailing elements.</p>

<p>Likewise, in Python, I can automatically unpack tuples:</p>

<pre><code>(var1, var2) = func_that_returns_a_tuple()
</code></pre>

<p>I want to do something similar with lists in Python. Right now, I have a function that returns a list, and a chunk of code that does the following:</p>

<pre><code>ls = my_func()
(head, rest) = (ls[0], ls[1:])
</code></pre>

<p>I wondered if I could somehow do that in one line in Python, instead of two.</p>
"
238151,22158,2008-10-26T15:39:36Z,1,Is there a windows implementation to python libsvn?,"<p>Because windows is case-insensitive and because SVN is case-sensitive and because VS2005 tends to rename files giving them the lower-case form which messes my repositories' history, I've tried to add the pre-commit hook script from <a href=""http://svn.collab.net/repos/svn/trunk/contrib/hook-scripts/case-insensitive.py"" rel=""nofollow"">http://svn.collab.net/repos/svn/trunk/contrib/hook-scripts/case-insensitive.py</a>.
Sure enough, the script uses classes from python's libsvn (""from svn import repos, fs"") which I fail to find compiled for Windows.
Is there an alternative? To libsvn or to the hook script?</p>
"
238223,21711,2008-10-26T16:35:07Z,4,Match unicode in ply's regexes,"<p>I'm matching identifiers, but now I have a problem: my identifiers are allowed to contain unicode characters. Therefore the old way to do things is not enough:</p>

<pre><code>t_IDENTIFIER = r""[A-Za-z](\\.|[A-Za-z_0-9])*""
</code></pre>

<p>In <a href=""http://freehg.org/u/cheery/aml/"" rel=""nofollow"">my markup language</a> parser I match unicode characters by allowing all the characters except those I explicitly use, because my markup language only has two or three of characters I need to escape that way.</p>

<p>How do I match all unicode characters with python regexs and ply? Also is this a good idea at all?</p>

<p>I'd want to let people use identifiers like Ω » « ° foo² väli π as an identifiers (variable names and such) in their programs. Heck! I want that people could write programs in their own language if it's practical! Anyway unicode is supported nowadays in wide variety of places, and it should spread.</p>

<p>Edit: POSIX character classes doesnt seem to be recognised by python regexes.</p>

<pre><code>&gt;&gt;&gt; import re
&gt;&gt;&gt; item = re.compile(r'[[:word:]]')
&gt;&gt;&gt; print item.match('e')
None
</code></pre>

<p>Edit: To explain better what I need. I'd need a regex -thing that matches all the unicode printable characters but not ASCII characters at all.</p>

<p>Edit: r""\w"" does a bit stuff what I want, but it does not match « », and I also need a regex that does not match numbers.</p>
"
238600,NA,2008-10-26T20:52:35Z,8,How can I support wildcards in user-defined search strings in Python?,"<p>Is there a simple way to support wildcards (""*"") when searching strings - without using RegEx?</p>

<p>Users are supposed to enter search terms using wildcards, but should not have to deal with the complexity of RegEx:</p>

<pre><code>""foo*""   =&gt;  str.startswith(""foo"")
""*foo""   =&gt;  str.endswith(""foo"")
""*foo*""  =&gt;  ""foo"" in str
</code></pre>

<p>(it gets more complicated when there are multiple search terms though, e.g. ""foo*bar*baz"")</p>

<p>This seems like a common issue, so I wonder whether there's a ready-made solution for it.</p>

<p>Any help would be greatly appreciated!</p>
"
238697,NA,2008-10-26T22:00:16Z,4,XPath search with ElementTree,"<p>New to xml. Looking for XPath to search a  xml file with python ElementTree format</p>

<pre><code>&lt;root&gt;
&lt;child&gt;One&lt;/child&gt;
&lt;child&gt;Two&lt;/child&gt;
&lt;child&gt;Three&lt;/child&gt;
&lt;/root&gt;
</code></pre>

<p>to do search for child with ""Two"" and return true/false</p>

<p>if it was started off like </p>

<pre><code>from elementtree import ElementTree
root = ElementTree.parse(open(PathFile)).getroot()
</code></pre>

<p>how can this be achieved</p>
"
238882,19922,2008-10-27T01:03:40Z,1,How do I install plpython on MacOs X 10.5?,"<p>I have just installed PostgreSQL 8.3.4 on Mac OS X 10.5 (using ports), but I cannot figure out how to enable PL/Python. When I run the <code>CREATE LANGUAGE plpythonu</code> I get the following errors:</p>

<pre><code>ERROR:  could not access file ""$libdir/plpython"": No such file or directory
STATEMENT:  CREATE LANGUAGE plpythonu;
psql:&lt;stdin&gt;:18: ERROR:  could not access file ""$libdir/plpython"": No such file or directory
</code></pre>

<p>How can I fix it? Ideally I would prefer to avoid compiling Postgres without <code>port</code> or something like that.</p>

<p>Thia the output of running pg_config:</p>

<pre><code>BINDIR = /opt/local/lib/postgresql83/bin
DOCDIR = 
INCLUDEDIR = /opt/local/include/postgresql83
PKGINCLUDEDIR = /opt/local/include/postgresql83
INCLUDEDIR-SERVER = /opt/local/include/postgresql83/server
LIBDIR = /opt/local/lib/postgresql83
PKGLIBDIR = /opt/local/lib/postgresql83
LOCALEDIR = 
MANDIR = /opt/local/share/man
SHAREDIR = /opt/local/share/postgresql83
SYSCONFDIR = /opt/local/etc/postgresql83
PGXS = /opt/local/lib/postgresql83/pgxs/src/makefiles/pgxs.mk
CONFIGURE = '--prefix=/opt/local' '--sysconfdir=/opt/local/etc/postgresql83' '--bindir=/opt/local/lib/postgresql83/bin' '--libdir=/opt/local/lib/postgresql83' '--includedir=/opt/local/include/postgresql83' '--datadir=/opt/local/share/postgresql83' '--mandir=/opt/local/share/man' '--without-docdir' '--with-includes=/opt/local/include' '--with-libraries=/opt/local/lib' '--with-openssl' '--with-bonjour' '--with-readline' '--with-zlib' '--with-libxml' '--with-libxslt' '--enable-thread-safety' '--enable-integer-datetimes' '--with-ossp-uuid' 'CC=/usr/bin/gcc-4.0' 'CFLAGS=-O2' 'CPPFLAGS=-I/opt/local/include -I/opt/local/include/ossp' 'CPP=/usr/bin/cpp-4.0' 'LDFLAGS=-L/opt/local/lib'
CC = /usr/bin/gcc-4.0 -no-cpp-precomp
CPPFLAGS = -I/opt/local/include -I/opt/local/include/ossp -I/opt/local/include/libxml2 -I/opt/local/include
CFLAGS = -O2 -Wall -Wmissing-prototypes -Wpointer-arith -Winline -Wdeclaration-after-statement -Wendif-labels -fno-strict-aliasing -fwrapv
CFLAGS_SL = 
LDFLAGS = -L/opt/local/lib -L/opt/local/lib -L/opt/local/lib
LDFLAGS_SL = 
LIBS = -lpgport -lxslt -lxml2 -lssl -lcrypto -lz -lreadline -lm 
VERSION = PostgreSQL 8.3.4
</code></pre>

<p>(I've just switched from Linux to Mac a couple of days ago... In Ubuntu stuff like that used to <em>just work</em>, so I am pretty lost.)</p>
"
239009,21537,2008-10-27T03:32:24Z,0,getting pywin32 to work inside open office 2.4 built in python 2.3 interpreter,"<p>I need to update data to a mssql 2005 database so I have decided to use adodbapi, which is supposed to come built into the standard installation of python 2.1.1 and greater.</p>

<p>It needs pywin32 to work correctly and the open office python 2.3 installation does not have pywin32 built into it. It also seems like this built int python installation does not have adodbapi, as I get an error when I go import adodbapi. </p>

<p>Any suggestions on how to get both pywin32 and adodbapi installed into this open office 2.4 python installation?</p>

<p>thanks </p>

<p><hr /></p>

<p>oh yeah I tried those ways. annoyingly nothing. So i have reverted to jython, that way I can access Open Office for its conversion capabilities along with decent database access.</p>

<p>Thanks for the help.</p>
"
239020,14860,2008-10-27T03:42:07Z,9,How can I call a DLL from a scripting language?,"<p>I have a third-party product, a terminal emulator, which provides a DLL that can be linked to a C program to basically automate the driving of this product (send keystrokes, detect what's on the screen and so forth).</p>

<p>I want to drive it from a scripting language (I'm comfortable with Python and slightly less so with Perl) so that we don't have to compile and send out executables to our customers whenever there's a problem found.</p>

<p>We also want the customers to be able to write their own scripts using ours as baselines and they won't entertain the idea of writing and compiling C code.</p>

<p>What's a good way of getting Python/Perl to interface to a Windows DLL. My first thought was to write a server program and have a Python script communicate with it via TCP but there's got to be an easier solution.</p>
"
239258,26763,2008-10-27T07:13:11Z,7,"Python: DISTINCT on GQuery result set (GQL, GAE)","<p>Imagine you got an entity in the Google App Engine datastore, storing links for anonymous users. 
You would like to perform the following SQL query, which is not supported:</p>

<pre><code>SELECT DISTINCT user_hash FROM links
</code></pre>

<p>Instead you could use:</p>

<pre><code>user = db.GqlQuery(""SELECT user_hash FROM links"")
</code></pre>

<p>How to use Python <strong>most efficiently</strong> to filter the result, so it returns a DISTINCT result set?
How to count the DISTINCT result set?</p>
"
240031,31801,2008-10-27T14:18:54Z,1,"WindowsError: priveledged instruction when saving a FreeImagePy Image in script, works in IDLE","<p>I'm working on a program to do some image wrangling in Python for work.  I'm using FreeImagePy because PIL doesn't support multi-page TIFFs.  Whenever I try to save a file with it from my program I get this error message (or something similar depending on which way I try to save):</p>

<pre><code>Error returned.  TIFF FreeImage_Save: failed to open file C:/OCRtmp/ocr page0
Traceback (most recent call last):
  File ""C:\Python25\Projects\OCRPageUnzipper\PageUnzipper.py"", line 102, in &lt;mod
ule&gt; OCRBox.convertToPages(""C:/OCRtmp/ocr page"",FIPY.FIF_TIFF)
  File ""C:\Python25\lib\site-packages\FreeImagePy\FreeImagePy\FreeImagePy.py"", l
ine 2080, in convertToPages self.Save(FIF, dib, fileNameOut, flags)
  File ""C:\Python25\lib\site-packages\FreeImagePy\FreeImagePy\FreeImagePy.py"", l
ine 187, in Save return self.__lib.Save(typ, bitmap, fileName, flags)
WindowsError: exception: priviledged instruction
</code></pre>

<p>When I try and do the same things from IDLE, it works fine.</p>
"
240178,11677,2008-10-27T14:57:22Z,227,"Python list of lists, changes reflected across sublists unexpectedly","<p>I needed to create a list of lists in Python, so I typed the following:  </p>

<pre><code>myList = [[1] * 4] * 3
</code></pre>

<p>The list looked like this:  </p>

<pre><code>[[1, 1, 1, 1], [1, 1, 1, 1], [1, 1, 1, 1]]  
</code></pre>

<p>Then I changed one of the innermost values:  </p>

<pre><code>myList[0][0] = 5
</code></pre>

<p>Now my list looks like this:  </p>

<pre><code>[[5, 1, 1, 1], [5, 1, 1, 1], [5, 1, 1, 1]]  
</code></pre>

<p>which is not what I wanted or expected. Can someone please explain what's going on, and how to get around it?</p>
"
240659,7437,2008-10-27T17:09:41Z,5,post_save signal on m2m field,"<p>I have a pretty generic Article model, with m2m relation to Tag model. I want to keep count of each tag usage, i think the best way would be to denormalise count field on Tag model and update it each time Article being saved. How can i accomplish this, or maybe there's a better way?</p>
"
241007,29009,2008-10-27T18:43:41Z,18,Possible to integrate Google AppEngine and Google Code for continuous integration?,"<p>Anyone have any thoughts on how/if it is possible to integrate Google Code commits to cause a Google AppEngine deployment of the most recent code?</p>

<p>I have a simple Google AppEngine project's source hosted on Google Code and would love if everytime I committed to Subversion, that AppEngine would reflect the latest commit.  I don't mind if things are broken on the live site since the project is for personal use mainly and for learning.</p>

<p>Anyone have any thoughts on how to tie into the subversion commit for the Code repository and/or how to kickoff the deployment to AppEngine? Ideally the solution would not require anything manual from me nor any type of server/listener software on my machine.</p>
"
241141,52490,2008-10-27T19:32:52Z,14,Python lazy list,"<p>I would like create my own collection that has all the attributes of python list and also knows how to save/load itself into/from a database.  Also I want to make the load implicit and lazy, as in it doesn't happen at the point of creation of the list, but waits until its first used.</p>

<p>Is there a single<code>__xxx__</code>method I can override to load the list on first usage of any list property  (such as<code>len</code>,<code>getitem</code>,<code>iter</code>...etc) without having to override them all?</p>
"
241250,1227001,2008-10-27T20:18:08Z,15,Single Table Inheritance in Django,"<p>Is there explicit support for Single Table Inheritance in Django? Last I heard, the feature was still under development and debate. </p>

<p>Are there libraries/hacks I can use in the meantime to capture the basic behavior? I have a hierarchy that mixes different objects. The canonical example of a corporation structure with an Employee class, subclasses for types of employees, and a manager_id (parent_id) would be a good approximation of the problem I am solving. </p>

<p>In my case, I would like to represent the idea that an employee can manage other employees while being managed by a different employee. There are not separate classes for Manager and Worker, which makes this hard to spread across tables. Sub-classes would represent types of employees-programmers, accountants, sales, etc and would be independent of who supervises who (OK, I guess it's no longer a typical corporation in some respect). </p>
"
241327,26251,2008-10-27T20:47:24Z,32,Python snippet to remove C and C++ comments,"<p>I'm looking for Python code that removes C and C++ comments from a string. (Assume the string contains an entire C source file.)</p>

<p>I realize that I could .match() substrings with a Regex, but that doesn't solve nesting <code>/*</code>, or having a <code>//</code> inside a <code>/* */</code>.</p>

<p>Ideally, I would prefer a non-naive implementation that properly handles awkward cases.</p>
"
241503,401510,2008-10-27T21:46:19Z,4,Reading collections of extended elements in an RSS feed with Universal Feed Parser,"<p>Is there any way to read a collection of extension elements with <a href=""http://www.feedparser.org/"" rel=""nofollow"">Universal Feed Parser</a>?</p>

<p>This is just a short snippet from Kuler RSS feed:</p>

<pre><code>&lt;channel&gt;
  &lt;item&gt;
    &lt;!-- snip: regular RSS elements --&gt;
    &lt;kuler:themeItem&gt;
      &lt;kuler:themeID&gt;123456&lt;/kuler:themeID&gt;
      &lt;!-- snip --&gt;
      &lt;kuler:themeSwatches&gt;
        &lt;kuler:swatch&gt;
          &lt;kuler:swatchHexColor&gt;FFFFFF&lt;/kuler:swatchHexColor&gt;
          &lt;!-- snip --&gt;
        &lt;/kuler:swatch&gt;
        &lt;kuler:swatch&gt;
          &lt;kuler:swatchHexColor&gt;000000&lt;/kuler:swatchHexColor&gt;
          &lt;!-- snip --&gt;
        &lt;/kuler:swatch&gt;
      &lt;/kuler:themeSwatches&gt;
    &lt;/kuler:themeItem&gt;
  &lt;/item&gt;
&lt;/channel&gt;
</code></pre>

<p>I tried the following:</p>

<pre><code>&gt;&gt;&gt; feed = feedparser.parse(url)
&gt;&gt;&gt; feed.channel.title
u'kuler highest rated themes'
&gt;&gt;&gt; feed.entries[0].title
u'Foobar'
&gt;&gt;&gt; feed.entries[0].kuler_themeid
u'123456'
&gt;&gt;&gt; feed.entries[0].kuler_swatch
u''
</code></pre>

<p><code>feed.entries[0].kuler_swatchhexcolor</code> returns only last <code>kuler:swatchHexColor</code>. Is there any way to retrieve all elements with <code>feedparser</code>?</p>

<p>I have already worked around the issue by using minidom, but I would like to use Universal Feed Parser if possible (due to very simple API). Can it be extended? I haven't found anything about that in the documentation, so if someone has more experience with the library, please, advise me.</p>
"
241533,NA,2008-10-27T22:03:06Z,4,I want a program that writes every possible combination to a different line of a text file,"<p>I want to write a program that would print every combination of a set of variables to a text file, creating a word list. Each answer should be written on a separate line and write all of the results for 1 digit, 2 digits, and 3 digits to a single text file.</p>

<p>Is there a simple way I can write a python program that can accomplish this? Here is an example of the output I am expecting when printing all the binary number combinations possible for 1, 2, and 3 digits:</p>

<pre><code>Output:
0  
1

00  
01  
10  
11

000  
001  
010  
011  
100  
101  
110  
111
</code></pre>
"
241892,18138,2008-10-28T00:52:41Z,18,SUDS - programmatic access to methods and types,"<p>I'm investigating SUDS as a SOAP client for python.  I want to inspect the methods available from a specified service, and the types required by a specified method.</p>

<p>The aim is to generate a user interface, allowing users to select a method, then fill in values in a dynamically generated form.</p>

<p>I can get some information on a particular method, but am unsure how to parse it:</p>

<pre><code>client = Client(url)
method = client.sd.service.methods['MyMethod']
</code></pre>

<p>I am unable to <strong>programmaticaly</strong>  figure out what object type I need to create to be able to call the service</p>

<pre><code>obj = client.factory.create('?')

res = client.service.MyMethod(obj, soapheaders=authen)
</code></pre>

<p>Does anyone have some sample code?</p>
"
241995,2168,2008-10-28T01:46:37Z,9,Is there any way to get a REPL in pydev?,"<p>I would like to be able to drop to the python REPL from the debugger -- if this is not possible is there an easier way to evaluate python expressions in the context of the  current breakpoint other than manually adding them all as watch expressions?</p>
"
242059,1925,2008-10-28T02:29:24Z,15,OpenGl with Python,"<p>I am currently in a course that is using OpenGL and I have been using C for all the programs so far. I have Python installed on Fedora as well as OpenGL, however the minute I call an OpenGL command in my Python code, I get a <strong>segmentation fault</strong>. I have no idea why this is.</p>

<p>Just to avoid the ""just use C"" comments, here is why I want to use Python:</p>

<p>There are a couple reasons I am wanting to switch from C to Python, but the main one is because we are about to start writing a raytracer and I would like to use classes to make it easier on me. Since I hate classes in C++ and structs in C seems a little crazy, I thought I would give Python a try at it. I have also been looking for a reason to use Python again as it has been a while.</p>

<p>Thanks for any help.</p>
"
242065,20824,2008-10-28T02:34:19Z,2,Python + Leopard + Fink + Mac Ports + Python.org + Idiot = broken Python - fresh start?,"<p>I have been enjoying learning the basics of python, but before I started reading things I tried to install various python versions and modules clumsily. Now that I have some ideas of what I want to do and how to do it I'm finding that various aspects are broken. For instance, 2.6 IDLE won't launch, and when I try to import modules they usually don't work.</p>

<p>My question is, how would you recommend I clean this up and start fresh? I have read information about modifying the 2.6 install, but I still can't get it to work.</p>

<p>IDLE 2.4 works, and when I launch python from the terminal I am running python 2.4.4.</p>
"
242295,19212,2008-10-28T05:10:33Z,3,How does one add a svn repository build number to Python code?,"<blockquote>
  <p><strong>EDIT</strong>: This question duplicates <a href=""http://stackoverflow.com/questions/110175/how-to-access-the-current-subversion-build-number#111173"">http://stackoverflow.com/questions/110175/how-to-access-the-current-subversion-build-number#111173</a> (Thanks for the heads up, Charles!)</p>
</blockquote>

<p>Hi there,</p>

<p>This question is similar to <a href=""http://stackoverflow.com/questions/16248/getting-the-subversion-repository-number-into-code"">http://stackoverflow.com/questions/16248/getting-the-subversion-repository-number-into-code</a></p>

<p>The differences being:</p>

<ol>
<li><p>I would like to add the revision number to Python</p></li>
<li><p>I want the revision of the repository (not the checked out file)</p></li>
</ol>

<p>I.e. I would like to extract the Revision number from the return from 'svn info', likeso:</p>

<p>$ svn info</p>

<pre><code>Path: .
URL: svn://localhost/B/trunk
Repository Root: svn://localhost/B
Revision: 375
Node Kind: directory
Schedule: normal
Last Changed Author: bmh
Last Changed Rev: 375
Last Changed Date: 2008-10-27 12:09:00 -0400 (Mon, 27 Oct 2008)
</code></pre>

<p>I want a variable with 375 (the Revision). It's easy enough with put $Rev$ into a variable to keep track of changes on a file. However, I would like to keep track of the repository's version, and I understand (and it seems based on my tests) that $Rev$ only updates when the file changes.</p>

<p>My initial thoughts turn to using the svn/libsvn module built in to Python, though I can't find any documentation on or examples of how to use them.</p>

<p>Alternatively, I've thought calling 'svn info' and regex'ing the code out, though that seems rather brutal. :)</p>

<p>Help would be most appreciated.</p>

<p>Thanks &amp; Cheers.</p>
"
242485,24530,2008-10-28T07:37:15Z,106,Starting python debugger automatically on error,"<p>This is a question I have wondered about for quite some time, yet I have never found a suitable solution. If I run a script and I come across, let's say an IndexError, python prints the line, location and quick description of the error and exits. Is it possible to automatically start pdb when an error is encountered? I am not against having an extra import statement at the top of the file, nor a few extra lines of code.</p>
"
243060,2007483,2008-10-28T12:17:35Z,14,How to set the PYTHONPATH in Emacs?,"<p>Emacs does not recognize my correct python path. I think it is a general problem with emacs not recognizing my environment variables. I have GNU Emacs 22.1.1 (i386-apple-darwin8.9.1, Carbon Version 1.6.0) of 2007-06-17 installed.</p>

<p>I have set the PYTHONPATH in my ~/.bashrc. Maybe I should set it somewhere else?</p>
"
243375,27478,2008-10-28T13:46:35Z,2,Including a dynamic image in a web page using POST?,"<p>I have written a CGI script that creates an image dynamically using GET data. To include this image in my webpage, I am using the following code:</p>

<pre><code>&lt;img src=""image.py?text=xxxxxxxxxxxxxx""&gt;
</code></pre>

<p>The problem is that I expect in the future the ""text"" field will get very long and the URL will become too large. From Googling around there doesn't seem to be a fixed limit on URL length (ie. depends on the browser, server, proxy, etc.) Is there a better way to do this? </p>

<p>If it matters, I am working with Django and Python and I cannot use any client-side scripting (ie. JavaScript).</p>

<p>Cheers,
Ben</p>
"
243831,7581,2008-10-28T15:56:18Z,5,Unicode block of a character in python,"<p>Is there a way to get the Unicode Block of a character in python? The <a href=""http://www.python.org/doc/2.5.2/lib/module-unicodedata.html"" rel=""nofollow"">unicodedata</a> module doesn't seem to have what I need, and I couldn't find an external library for it.</p>

<p>Basically, I need the same functionality as <a href=""http://java.sun.com/javase/6/docs/api/java/lang/Character.UnicodeBlock.html#of(char)"" rel=""nofollow""><code>Character.UnicodeBlock.of()</code></a> in java.</p>
"
243836,3497,2008-10-28T15:58:11Z,21,"How to copy all properties of an object to another object, in Python?","<p>Is there a library method to copy all the properties between two (already present) instances of the same class, in Python?
I mean, something like Apache Commons' PropertyUtilsBean.copyProperties()</p>

<p>Thanks!</p>
"
243864,1386292,2008-10-28T16:06:33Z,16,What is the OCaml idiom equivalent to Python's range function?,"<p>I want to create a list of integers from 1 to n. I can do this in Python using range(1, n+1), and in Haskell using: take n (iterate (1+) 1). </p>

<p>What is the right OCaml idiom for this?</p>
"
243865,18950,2008-10-28T16:07:12Z,16,How do I merge two python iterators?,"<p>I have two iterators, a <code>list</code> and an <code>itertools.count</code> object (i.e. an infinite value generator). I would like to merge these two into a resulting iterator that will alternate yield values between the two:</p>

<pre><code>&gt;&gt;&gt; import itertools
&gt;&gt;&gt; c = itertools.count(1)
&gt;&gt;&gt; items = ['foo', 'bar']
&gt;&gt;&gt; merged = imerge(items, c)  # the mythical ""imerge""
&gt;&gt;&gt; merged.next()
'foo'
&gt;&gt;&gt; merged.next()
1
&gt;&gt;&gt; merged.next()
'bar'
&gt;&gt;&gt; merged.next()
2
&gt;&gt;&gt; merged.next()
Traceback (most recent call last):
    ...
StopIteration
</code></pre>

<p>What is the simplest, most concise way to do this?</p>
"
243962,23423,2008-10-28T16:33:20Z,52,Which Eclipse package to download for pydev?,"<p>I'm getting started with python, eclipse and pydev. Which Eclipse package should I choose? Nothing on the eclipse homepage tells me what to choose and python documentation assumes I have eclipse installed. Does which package I choose matter?</p>
"
244138,2915,2008-10-28T17:27:32Z,6,"With Lua and Python embeddable, is there a place for Basic?","<p>I started off programming in Basic on the <a href=""http://en.wikipedia.org/wiki/ZX81"" rel=""nofollow"">ZX81</a>, then <a href=""http://en.wikipedia.org/wiki/IBM_BASICA"" rel=""nofollow"">BASICA</a>, <a href=""http://en.wikipedia.org/wiki/GW-BASIC"" rel=""nofollow"">GW-BASIC</a>, and <a href=""http://en.wikipedia.org/wiki/QBasic"" rel=""nofollow"">QBasic</a>.  I moved on to C (Ah, Turbo C 3.1, I hardly knew ye...)</p>

<p>When I got started in microcontrollers I regressed with the <a href=""http://en.wikipedia.org/wiki/BASIC_Stamp"" rel=""nofollow"">BASIC Stamp</a> from Parallax.  However, BASIC is/was awesome because it was so easy to understand and so hard to make a mistake.  I moved on to assembly and C eventually because I needed the additional power (speed, capacity, resources, etc.), but I know that if the bar was much higher many people would never get into programming microcontrollers.</p>

<p>I keep getting an itch to make my own on-chip BASIC interpretor, but I wonder if there's need for BASIC now that Lua and Python are easily embeddable, and just as approachable as BASIC.</p>

<ul>
<li>What, if any, are the advantages BASIC has over other languages? </li>
<li>Why is it still around?  </li>
<li>If I decide to make a general purpose microcontroller board with an interpreter, is there any reason to make a version of BASIC?</li>
</ul>

<p>Plenty of other languages are considered dead, but BASIC just keeps hanging on.</p>
"
244438,12388,2008-10-28T19:06:54Z,6,Map two lists into one single list of dictionaries,"<p>Imagine I have these python lists:</p>

<pre><code>keys = ['name', 'age']
values = ['Monty', 42, 'Matt', 28, 'Frank', 33]
</code></pre>

<p>Is there a direct or at least a simple way to produce the following list of dictionaries ?</p>

<pre><code>[
    {'name': 'Monty', 'age': 42},
    {'name': 'Matt',  'age': 28},
    {'name': 'Frank', 'age': 33}
]
</code></pre>
"
244720,19435,2008-10-28T20:25:55Z,1,opengl set texture color with vertex color,"<p>Because I need to display a <a href=""http://codeflow.org/ubuntu.png"" rel=""nofollow"">huge number of labels</a> that <a href=""http://www.youtube.com/watch?v=A_ah-SE-cNY"" rel=""nofollow"">move independently</a>, I need to render a label in <a href=""http://pyglet.org"" rel=""nofollow"">pyglet</a> to a texture (otherwise updating the vertex list for each glyph is too slow).</p>

<p>I have a solution to do this, but my problem is that the texture that contains the glyphs is black, but I'd like it to be red. See the example below:</p>

<pre><code>from pyglet.gl import *

def label2texture(label):
    vertex_list = label._vertex_lists[0].vertices[:]
    xpos = map(int, vertex_list[::8])
    ypos = map(int, vertex_list[1::8])
    glyphs = label._get_glyphs()

    xstart = xpos[0]
    xend = xpos[-1] + glyphs[-1].width
    width = xend - xstart

    ystart = min(ypos)
    yend = max(ystart+glyph.height for glyph in glyphs)
    height = yend - ystart

    texture = pyglet.image.Texture.create(width, height, pyglet.gl.GL_RGBA)

    for glyph, x, y in zip(glyphs, xpos, ypos):
        data = glyph.get_image_data()
        x = x - xstart
        y =  height - glyph.height - y + ystart
        texture.blit_into(data, x, y, 0)

    return texture.get_transform(flip_y=True)

window = pyglet.window.Window()
label = pyglet.text.Label('Hello World!', font_size = 36)
texture = label2texture(label)

@window.event
def on_draw():
    hoff = (window.width / 2) - (texture.width / 2)
    voff = (window.height / 2) - (texture.height / 2)

    glClear(GL_COLOR_BUFFER_BIT)
    glEnable(GL_BLEND)
    glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA)
    glClearColor(0.0, 1.0, 0.0, 1.0)
    window.clear()
    glEnable(GL_TEXTURE_2D);

    glBindTexture(GL_TEXTURE_2D, texture.id)
    glColor4f(1.0, 0.0, 0.0, 1.0) #I'd like the font to be red
    glBegin(GL_QUADS);
    glTexCoord2d(0.0,1.0); glVertex2d(hoff,voff);
    glTexCoord2d(1.0,1.0); glVertex2d(hoff+texture.width,voff);
    glTexCoord2d(1.0,0.0); glVertex2d(hoff+texture.width,voff+texture.height);
    glTexCoord2d(0.0,0.0); glVertex2d(hoff, voff+texture.height);
    glEnd();

pyglet.app.run()
</code></pre>

<p>Any idea how I could color this?</p>
"
244750,7735,2008-10-28T20:32:24Z,8,AJAX console window with ANSI/VT100 support?,"<p>I'm planning to write gateway web application, which would need ""terminal window"" with VT100/ANSI escape code support. Are there any AJAX based alternatives for such a task?</p>

<p>I'm thinking something like this: <a href=""http://tryruby.hobix.com/"">http://tryruby.hobix.com/</a></p>

<p>My preferred backend for the system is Python/Twisted/Pylons, but since I'm just planning, I will explore every option.</p>
"
244803,21384,2008-10-28T20:44:25Z,3,Porting MATLAB functions to Scilab. How do I use symbolic?,"<p>I'm porting some <a href=""http://en.wikipedia.org/wiki/MATLAB"" rel=""nofollow"">MATLAB</a> functions to <a href=""https://en.wikipedia.org/wiki/Scilab"" rel=""nofollow"">Scilab</a>. The cool thing is that there is a <a href=""http://ralyx.inria.fr/2004/Raweb/scilab/uid96.html"" rel=""nofollow"">conversion toolbox</a> that make things very easy.</p>

<p>The problem is I did not find the counterpart to the <strong>syms</strong> function, and the symbolic toolbox in general. (I'd like a port of the <em>Control System Toolbox</em> too, amd I'm still searching for some functions I'd may need).</p>

<p>The only thing about symbolic toolbox I've found is <a href=""http://www.cert.fr/dcsd/idco/perso/Magni/s_sym/doc/index.html"" rel=""nofollow"">this</a>, but it was a little trcky and not so easy (actually I was not able to set up it correctly in 30&nbsp;minutes, and I gave up for now. I'm going to try later), and it needs Maxima to be installed. Does anyone know anything about that?</p>

<p>Scilab is not exactly a must. The project aims to give a more <em>free</em> and <em>open source</em> alternative to MATLAB. I saw there is <a href=""http://code.google.com/p/sympy/"" rel=""nofollow"">SymPy</a> for <a href=""http://en.wikipedia.org/wiki/Python_%28programming_language%29"" rel=""nofollow"">Python</a>, and I just could use it with <a href=""http://www.scipy.org/"" rel=""nofollow"">SciPy</a>, but I'd lost the <a href=""http://ralyx.inria.fr/2004/Raweb/scilab/uid96.html"" rel=""nofollow"">conversion toolbox</a> thing :\</p>

<p>That said, what should be better? Get SciLab and Maxima work together or move to Python &amp; co.? This is the start of the project, so the earlier I choose this, the better.</p>
"
245094,8482,2008-10-28T22:20:23Z,3,Upgrading Google Application Engine program to use unicode,"<p>I have a simple Google App Engine app, that I wrote using ordinary strings. I realize I want to make it handle unicode. Are there any gotchas with this? I'm thinking of all the strings that I currently already have in the live database. (From real users who I don't want to upset.)</p>
"
245192,18770,2008-10-28T22:58:47Z,85,"What are ""first class"" objects?","<p>When are objects or something else said to be ""first class"" in a given programming language, and why? In what do they differ from languages where they are not?</p>

<p>EDIT. When one says ""everything is an object"" (like in Python), does he indeed mean that ""everything is first-class""?</p>
"
245225,17732,2008-10-28T23:11:54Z,7,Which library should I use to write an XLS from Linux / Python?,"<p>I'd love a <em>good</em> native Python library to write XLS, but it doesn't seem to exist.  Happily, Jython does.</p>

<p>So I'm trying to decide between jexcelapi and Apache HSSF:
<a href=""http://www.andykhan.com/jexcelapi/tutorial.html#writing"">http://www.andykhan.com/jexcelapi/tutorial.html#writing</a>
<a href=""http://poi.apache.org/hssf/quick-guide.html"">http://poi.apache.org/hssf/quick-guide.html</a></p>

<p>(I can't use COM automation because I'm not on Windows, and even if I was, I couldn't afford Office licenses.)</p>

<p>My initial thoughts are that POI/HSSF is very thorough, but also very Java-- everything seems a bit harder than it needs to be.  Good documentation, but my head hurts trying to bridge the gap between what it describes and what I need to accomplish.</p>

<p>jexcepapi seems to have a simpler, nicer (for me) interface, but doesn't have very good documentation or community.</p>

<p>Which would you use, and why?</p>
"
245237,9789,2008-10-28T23:16:23Z,20,Running Django with FastCGI or with mod_python,"<p>which would you recommend?
which is faster, reliable?
apache mod_python or nginx/lighttpd FastCGI?</p>
"
245304,4766,2008-10-28T23:52:09Z,36,How do I get the name of a function or method from within a Python function or method?,"<p>I feel like I should know this, but I haven't been able to figure it out...</p>

<p>I want to get the name of a method--which happens to be an integration test--from inside it so it can print out some diagnostic text.  I can, of course, just hard-code the method's name in the string, but I'd like to make the test a little more DRY if possible.</p>
"
245447,20498,2008-10-29T01:04:48Z,15,How do I draw text at an angle using python's PIL?,"<p>Using Python I want to be able to draw text at different angles using PIL.</p>

<p>For example, imagine you were drawing the number around the face of a clock.  The number <strong>3</strong> would appear as expected whereas <strong>12</strong> would we drawn rotated counter-clockwise 90 degrees.</p>

<p>Therefore, I need to be able to draw many different strings at many different angles.</p>
"
245725,85,2008-10-29T03:45:09Z,1,Upload a file in Django and then send it somewhere else through REST?,"<p>I am building a simple Django app that will use scribd to display documents. I would like to have a page where the administrator can upload documents to scribd through the website, since I need to know a few things about it before it gets to scribd. What is the best/easiest way to do this, display an upload page and then take the file that is uploaded and send it to scribd through the <a href=""http://www.scribd.com/publisher/api?method_name=docs.upload"" rel=""nofollow"">docs.upload</a> method of their api? I'm a little new at this Python/Django/REST API thing, so sorry if this is too many questions at once.</p>
"
245792,18950,2008-10-29T04:25:02Z,55,When is not a good time to use python generators?,"<p>This is rather the inverse of <a href=""http://stackoverflow.com/questions/102535/what-can-you-use-python-generator-functions-for"">What can you use Python generator functions for?</a>: python generators, generator expressions, and the <code>itertools</code> module are some of my favorite features of python these days. They're especially useful when setting up chains of operations to perform on a big pile of data--I often use them when processing DSV files.</p>

<p><strong>So when is it <em>not</em> a good time to use a generator, or a generator expression, or an <code>itertools</code> function?</strong></p>

<ul>
<li>When should I prefer <code>zip()</code> over <code>itertools.izip()</code>, or</li>
<li><code>range()</code> over <code>xrange()</code>, or</li>
<li><code>[x for x in foo]</code> over <code>(x for x in foo)</code>?</li>
</ul>

<p>Obviously, we eventually need to ""resolve"" a generator into actual data, usually by creating a list or iterating over it with a non-generator loop. Sometimes we just need to know the length. This isn't what I'm asking.</p>

<p>We use generators so that we're not assigning new lists into memory for interim data. This especially makes sense for large datasets. Does it make sense for small datasets too? Is there a noticeable memory/cpu trade-off?</p>

<p>I'm especially interested if anyone has done some profiling on this, in light of the eye-opening discussion of <a href=""http://www.gossamer-threads.com/lists/python/python/76267"">list comprehension performance vs. map() and filter()</a>. (<a href=""https://mail.python.org/pipermail//python-list/2001-December/096256.html"">alt link</a>)</p>
"
246123,29402,2008-10-29T08:29:59Z,1,HTTP compliance testing,"<p>What would you use to perform a compliance testing of an HTTP proxy? I've seen two projects so far:</p>

<ul>
<li><a href=""http://www.web-polygraph.org/"" rel=""nofollow"">Web Polygraph</a> (the feedback I got from a coworker is mostly negative)</li>
<li><a href=""http://funkload.nuxeo.com/"" rel=""nofollow"">Funkload</a></li>
</ul>
"
246137,9951,2008-10-29T08:40:36Z,2,Can I call and set the Python gettext module in a library and a module using it at the same time?,"<p>Im a coding a library inluding textual feedback that I need to translate.</p>

<p>I put the following lines in a _config.py module that I import everywhere in my app :</p>

<pre><code>import gettext, os, sys
pathname = os.path.dirname(sys.argv[0])
localdir = os.path.abspath(pathname) + ""/locale""
gettext.install(""messages"", localdir)
</code></pre>

<p>I have the *.mo files in ./locale/lang_LANG/LC_MESSAGES and I apply the _() function to all the strings that need to be translated.</p>

<p>Now I just added a feature for the user, supposedly a programmer, to be able to create his own messages. I don't want him to care about the underlying implementation, so I want him to be apple to make it something straightforward like :</p>

<pre><code>lib_object.message = ""My message""
</code></pre>

<p>I used properties to make it clean, but what if my user whats to translate his own code (that uses mine) and does something like :</p>

<pre><code>import gettext, os, sys
pathname = os.path.dirname(sys.argv[0])
localdir = os.path.abspath(pathname) + ""/locale""
gettext.install(""user_app"", localdir)

lib_object.message = _(""My message"")
</code></pre>

<p>Is it a problem ? What can I do to avoid troubles without bothering my user ?</p>
"
246525,20498,2008-10-29T11:59:08Z,11,How can I draw a bezier curve using Python's PIL?,"<p>I'm using Python's Imaging Library and I would like to draw some bezier curves.
I guess I could calculate pixel by pixel but I'm hoping there is something simpler.</p>
"
246725,22306,2008-10-29T13:09:10Z,55,How do I add tab completion to the Python shell?,"<p>When starting a django application using <code>python manage.py shell</code>, I get an InteractiveConsole shell - I can use tab completion, etc.</p>

<pre><code>Python 2.5.1 (r251:54863, Apr 15 2008, 22:57:26) 
[GCC 4.0.1 (Apple Inc. build 5465)] on darwin
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
(InteractiveConsole)
</code></pre>

<p>When just starting a python interpreter using <code>python</code>, it doesn't offer tab completion.</p>

<p>Can someone tell me what django is doing to give me an interactive console, or what I need to do to start an interactive console without a django app?</p>
"
247724,4872,2008-10-29T17:40:12Z,11,How can I launch an instance of an application using Python?,"<p>I am creating a Python script where it does a bunch of tasks and one of those tasks is to launch and open an instance of Excel. What is the ideal way of accomplishing that in my script?</p>
"
247770,21711,2008-10-29T17:52:40Z,351,Retrieving python module path,"<p>I want to detect whether module has changed. Now, using inotify is simple, you just need to know the directory you want to get notifications from.</p>

<p>How do I retrieve a module's path in python?</p>
"
247922,10040,2008-10-29T18:38:46Z,0,"Is it possible to get the value of an item contained in Django's ""changed_data"" list?","<p>I have the following code in my Django application:</p>

<pre><code>if 'book' in authorForm.changed_data:
   #Do something here...
</code></pre>

<p>I realize Django can tell me which values have changed in my form by utilizing the ""changed_data"" list object, but I'd like to know the new values of the fields that have changed.</p>

<p>Any thoughts?</p>
"
248730,29825,2008-10-29T23:02:30Z,3,Is there something between a normal user account and root?,"<p>I'm developing an application that manages network interfaces on behalf of the user and it calls out to several external programs (such as ifconfig) that requires root to make changes. (Specifically, changing the IP address of a local interface, etc.) During development, I have been running the IDE as root (ugh) and the debugger as root (double-ugh). Is there a nice way for the end-user to run these under a non-root account? I strongly dislike the size of the attack surface presented by GTK, wxPython, Python, and my application when it runs as root.</p>

<p>I have looked into capabilities, but they look half-baked and I'm not sure if I'd be able to use them in Python, especially if they are on a thread basis. The only option I haven't explored is a daemon that has the setuid bit set and does all the root-type stuff on behalf of the UI. I'm hesitant to introduce that complexity this early in the project, as running as root is not a dealbreaker for the users.</p>
"
248830,18770,2008-10-29T23:45:56Z,79,Python: using a recursive algorithm as a generator,"<p>Recently I wrote a function to generate certain sequences with nontrivial constraints. The problem came with a natural recursive solution. Now it happens that, even for relatively small input, the sequences are several thousands, thus I would prefer to use my algorithm as a generator instead of using it to fill a list with all the sequences.</p>

<p>Here is an example. Suppose we want to compute all the permutations of a string with a recursive function. The following naive algorithm takes an extra argument 'storage' and appends a permutation to it whenever it finds one:</p>

<pre><code>def getPermutations(string, storage, prefix=""""):
   if len(string) == 1:
      storage.append(prefix + string)   # &lt;-----
   else:
      for i in range(len(string)):
         getPermutations(string[:i]+string[i+1:], storage, prefix+string[i])

storage = []
getPermutations(""abcd"", storage)
for permutation in storage: print permutation
</code></pre>

<p>(Please don't care about inefficiency, this is only an example.)</p>

<p>Now I want to turn my function into a generator, i.e. to yield a permutation instead of appending it to the storage list:</p>

<pre><code>def getPermutations(string, prefix=""""):
   if len(string) == 1:
      yield prefix + string             # &lt;-----
   else:
      for i in range(len(string)):
         getPermutations(string[:i]+string[i+1:], prefix+string[i])

for permutation in getPermutations(""abcd""):
   print permutation
</code></pre>

<p>This code does <em>not</em> work (the function behaves like an empty generator).</p>

<p>Am I missing something?
Is there a way to turn the above recursive algorithm into a generator <em>without replacing it with an iterative one</em>?</p>
"
249064,31307,2008-10-30T01:59:48Z,10,I need a really good reason to use Python,"<p>I have been trying to make a case for using Python at my work. We use C# and ASP.NET for basically all of our development. 80% or more of our projects are web applications. It seems natural that we would look at some of the nice dynamic web languages (Ruby, Python, etc), and with things like <a href=""http://en.wikipedia.org/wiki/Ironruby"" rel=""nofollow"">IronRuby</a> and <a href=""http://en.wikipedia.org/wiki/Ironpython"" rel=""nofollow"">IronPython</a>, I started seriously investigating.</p>

<p>I love Python. It's a beautiful, expressive language. It's a joy to code in, for sure. The multitude of python modules and frameworks make it very appealing. Problem is, I cannot think of any specific problems, any specific hurdles that would <b>require</b> a language like Python. ASP.NET gives us RAD, it gives us a full-featured framework and all that good stuff. Also, we all already know C# and have lots of projects in C#, learning a new language just <i>because</i> doesn't quite work. </p>

<p>Can you guys help me think of something to finally convince my boss to really learn Python and start using it on projects?</p>

<p>Edit: I know that no problem requires only one language, I just meant, are there any specific problems in which dynamic languages excel over static languages.</p>

<p>Edit again: Let me also mention that my boss prompted ME to investigate this. He has put aside hours to research these languages, find a good one, learn it, and then figure out how we can use it. I'm at the last step here, I do not need a lecture on why I should consider my motivation for changing something my company does because they do it for a reason. </p>
"
249110,32638,2008-10-30T02:18:32Z,16,Django: Arbitrary number of unnamed urls.py parameters,"<p>I have a Django model with a large number of fields and 20000+ table rows.  To facilitate human readable URLs and the ability to break down the large list into arbitrary sublists, I would like to have a URL that looks like this:</p>

<pre><code>/browse/&lt;name1&gt;/&lt;value1&gt;/&lt;name2&gt;/&lt;value2&gt;/ .... etc ....
</code></pre>

<p>where 'name' maps to a model attribute and 'value' is the search criteria for that attribute.  Each ""name"" will be treated like a category to return subsets of the model instances where the categories match.</p>

<p>Now, this could be handled with GET parameters, but I prefer more readable URLs for both the user's sake and the search engines.  These URLs subsets will be embedded on each page that displays this model, so it seems worth the effort to make pretty URLs.</p>

<p>Ideally each name/value pair will be passed to the view function as a parameter named <code>name1</code>, <code>name2</code>, etc.  However, I don't believe it's possible to defined named patterns via a regex's matched text.  Am I wrong there?</p>

<p>So, it seems I need to do something like this:</p>

<pre><code>urlpatterns = patterns('',
    url(r'^browse/(?:([\w]+)/([\w]+)/)+$', 'app.views.view', name=""model_browse""),
)
</code></pre>

<p>It seems this should match any sets of two name/value pairs.  While it matches it successfully, it only passes the last name/value pair as parameters to the view function.  My guess is that each match is overwriting the previous match.  Under the guess that the containing (?:...)+ is causing it, I tried a simple repeating pattern instead:</p>

<pre><code>urlpatterns = patterns('',
    url(r'^browse/([\w]+/)+$', 'app.views.view', name=""model_browse""),
)
</code></pre>

<p>... and got the same problem, but this time <code>*args</code> only includes the last matched pattern.</p>

<p>Is this a limitation of Django's url dispatcher, and/or Python's regex support?  It seems either of these methods should work.  Is there a way to achieve this without hardcoding each possible model attribute in the URL as an optional (.*) pattern?</p>
"
249262,21537,2008-10-30T04:22:08Z,0,"Jython 2.2.1, howto move a file? shutils.move is non-existant!","<pre><code>'''use Jython'''

import shutil

print dir(shutil)
</code></pre>

<p>There is no, shutil.move, how does one move a file with Jython?
and while we at it, how does one delete a file with Jython?</p>
"
249283,18866,2008-10-30T04:32:52Z,24,Virtualenv on Ubuntu with no site-packages,"<p>I've been using virtualenv lately while developing in python. I like the idea of a segregated development environment using the --no-site-packages option, but doing this while developing a PyGTK app can be a bit tricky. The PyGTK modules are installed on Ubuntu by default, and I would like to make a virtualenv (with --no-site-packages) aware of specific modules that are located elsewhere on the system.</p>

<p>What's the best way to do this? Or should I just suck it up and drop the --no-site-packages option?</p>
"
249330,1804,2008-10-30T05:07:18Z,0,Translate SVN path to local file system path in Python,"<p>I'm writing a utility in Python that will attach changed files in Subversion to an email and send it when a subset of folders that are under source control in SVN have been changed.  I am using the pysvn library to access the repository.</p>

<p>I have a copy of the files on my local file system and I do an update to check if the files have changed since the last time the utility was run.</p>

<p>I am at the point where I am translating the path names in SVN to the path names on my local copy.</p>

<p>Currently I have written the following to do the job:</p>

<pre><code>def formatPaths(self, paths):
    newPaths = list()
    for path in paths:
        path = path[len(self.basePath):]
        path = path.replace(""/"", ""\\"")
        newPaths.append(path)
    return newPaths
</code></pre>

<p>self.basePath would be something like ""/trunk/project1"" and I'm looking to just get the relative path of a subset of folders (I.e. folder1 under ""/trunk/project1"").</p>

<p>Is this a good way to solve this problem or is there some magical function I missed?</p>
"
249388,20824,2008-10-30T06:00:14Z,3,Python with PIL and Libjpeg on Leopard,"<p>I'm having trouble getting pictures supported with PIL - it throws me this:</p>

<pre><code>IOError: decoder jpeg not available
</code></pre>

<p>I installed PIL from binary, not realizing I needed libjpeg.</p>

<p>I installed libjpeg and freetype2 through fink. </p>

<p>I tried to reinstall PIL using instructions from <a href=""http://timhatch.com/"" rel=""nofollow"">http://timhatch.com/</a> (bottom of the page)</p>

<ul>
<li>Download PIL 1.1.6 source package and have the Developer Tools already installed</li>
<li><p>Patch setup.py with this patch so it can find the Freetype you already have.</p>

<p><code>patch -p0 &lt; leopard_freetype2.diff</code></p></li>
<li>sudo apt-get install libjpeg if you have fink (otherwise, build by hand and adjust paths)</li>
</ul>

<p>But I'm still getting the same error. </p>

<p>I'm on Leopard PPC. </p>
"
249775,745,2008-10-30T10:45:42Z,6,How to determine if a directory is on same partition,"<p>Say I have an input file, and a target directory. How do I determine if the input file is on the same hard-drive (or partition) as the target directory?</p>

<p>What I want to do is the copy a file if it's on a different, but move it if it's the same. For example:</p>

<pre><code>target_directory = ""/Volumes/externalDrive/something/""
input_foldername, input_filename = os.path.split(input_file)
if same_partition(input_foldername, target_directory):
    copy(input_file, target_directory)
else:
    move(input_file, target_directory)
</code></pre>

<p><hr /></p>

<p>Thanks to CesarB's answer, the <code>same_partition</code> function implemented:</p>

<pre><code>import os
def same_partition(f1, f2):
    return os.stat(f1).st_dev == os.stat(f2).st_dev
</code></pre>
"
249785,745,2008-10-30T10:50:32Z,1,OS X: Determine Trash location for a given path,"<p>Simply moving the file to <code>~/.Trash/</code> will not work, as if the file os on an external drive, it will move the file to the main system drive..</p>

<p>Also, there are other conditions, like files on external drives get moved to <code>/Volumes/.Trash/501/</code> (or whatever the current user's ID is)</p>

<p>Given a file or folder path, what is the correct way to determine the trash folder? I imagine the language is pretty irrelevant, but I intend to use Python</p>
"
250038,32617,2008-10-30T12:42:10Z,30,How can I add post-install scripts to easy_install / setuptools / distutils?,"<p>I would like to be able to add a hook to my setup.py that will be run post-install (either when easy_install'ing or when doing python setup.py install).</p>

<p>In my project, <a href=""http://code.google.com/p/pysmell"">PySmell</a>, I have some support files for Vim and Emacs. When a user installs PySmell the usual way, these files get copied in the actual egg, and the user has to fish them out and place them in his .vim or .emacs directories. What I want is either asking the user, post-installation, where would he like these files copied, or even just a message printing the location of the files and what should he do with them.</p>

<p>What is the best way to do this?</p>

<p>Thanks</p>

<p>My setup.py looks like so:</p>

<pre><code>#!/usr/bin/env python
# -*- coding: UTF-8 -*-
from setuptools import setup

version = __import__('pysmell.pysmell').pysmell.__version__

setup(
    name='pysmell',
    version = version,
    description = 'An autocompletion library for Python',
    author = 'Orestis Markou',
    author_email = 'orestis@orestis.gr',
    packages = ['pysmell'],
    entry_points = {
        'console_scripts': [ 'pysmell = pysmell.pysmell:main' ]
    },
    data_files = [
        ('vim', ['pysmell.vim']),
        ('emacs', ['pysmell.el']),
    ],
    include_package_data = True,
    keywords = 'vim autocomplete',
    url = 'http://code.google.com/p/pysmell',
    long_description =
""""""\
PySmell is a python IDE completion helper. 

It tries to statically analyze Python source code, without executing it,
and generates information about a project's structure that IDE tools can
use.

The first target is Vim, because that's what I'm using and because its
completion mechanism is very straightforward, but it's not limited to it.
"""""",
    classifiers = [
        'Development Status :: 5 - Production/Stable',
        'Environment :: Console',
        'Intended Audience :: Developers',
        'License :: OSI Approved :: BSD License',
        'Operating System :: OS Independent',
        'Programming Language :: Python',
        'Topic :: Software Development',
        'Topic :: Utilities',
        'Topic :: Text Editors',
    ]


)
</code></pre>

<p>EDIT:</p>

<p>Here's a stub which demonstrates the <code>python setup.py install</code>:</p>

<pre><code>from setuptools.command.install import install as _install

class install(_install):
    def run(self):
        _install.run(self)
        print post_install_message

setup(
    cmdclass={'install': install},
    ...
</code></pre>

<p>No luck with the easy_install route yet.</p>
"
250151,32756,2008-10-30T13:21:41Z,33,Lua as a general-purpose scripting language?,"<p>When I see Lua, the only thing I ever read is ""great for embedding"", ""fast"", ""lightweight"" and more often than anything else: ""World of Warcraft"" or in short ""WoW"".</p>

<p>Why is it limited to embedding the whole thing into another application? Why not write general-purpose scripts like you do with Python or Perl?</p>

<p>Lua seems to be doing great in aspects like speed and memory-usage (The fastest scripting language afaik) so why is it that I never see Lua being used as a ""Desktop scripting-language"" to automate tasks? For example:</p>

<ul>
<li>Renaming a bunch of files</li>
<li>Download some files from the web</li>
<li>Webscraping</li>
</ul>

<p>Is it the lack of the standard library?</p>
"
250209,9094,2008-10-30T13:40:19Z,5,How can I optimize this Google App Engine code?,"<p>I'm relatively new to the python world, but this seems very straight forward.</p>

<p>Google is yelling at me that this code needs to be optimized:</p>

<pre><code>class AddLinks(webapp.RequestHandler):
     def post(self):
          # Hash the textarea input to generate pseudo-unique value
          hash = md5.new(self.request.get('links')).hexdigest()

          # Seperate the input by line
          allLinks = self.request.get('links').splitlines()

          # For each line in the input, add to the database
          for x in allLinks:
               newGroup = LinkGrouping()
               newGroup.reference = hash
               newGroup.link = x
               newGroup.put()

          # testing vs live
          #baseURL = 'http://localhost:8080'
          baseURL = 'http://linkabyss.appspot.com'

          # Build template parameters
          template_values = {
               'all_links': allLinks,
               'base_url': baseURL,
               'reference': hash,
          }

          # Output the template
          path = os.path.join(os.path.dirname(__file__), 'addLinks.html')
          self.response.out.write(template.render(path, template_values))
</code></pre>

<p>The dashboard is telling me that this is using a ton of CPU.</p>

<p>Where should I look for improvements?</p>
"
250271,13009,2008-10-30T14:04:33Z,50,Python Regex - How to Get Positions of Matches,"<p>How can I get the start and end positions of all matches using the <code>re</code> module? For example given the pattern <code>r'[a-z]'</code> and the string <code>'a1b2c3d4'</code> I'd want to get the positions where it finds each letter (ideally I'd like to get the text of the match back too).</p>
"
250283,4105,2008-10-30T14:09:21Z,97,How to scp in python?,"<p>What's the most pythonic way to scp a file in Python?  The only route I'm aware of is </p>

<pre><code>os.system('scp ""%s"" ""%s:%s""' % (localfile, remotehost, remotefile) )
</code></pre>

<p>which is a hack, and which doesn't work outside linux-like systems, and which needs help from the Pexpect module to avoid password prompts unless you already have passwordless SSH set up to the remote host.</p>

<p>I'm aware of Twisted's <code>conch</code>, but I'd prefer to avoid implementing scp myself via low-level ssh modules.</p>

<p>I'm aware of <code>paramiko</code>, a Python module that supports ssh and sftp; but it doesn't support scp.</p>

<p>Background: I'm connecting to a router which doesn't support sftp but does support ssh/scp, so sftp isn't an option.</p>

<p><strong>EDIT</strong>:
This is a duplicate of <a href=""http://stackoverflow.com/questions/68335/how-do-i-copy-a-file-to-a-remote-server-in-python-using-scp-or-ssh"">http://stackoverflow.com/questions/68335/how-do-i-copy-a-file-to-a-remote-server-in-python-using-scp-or-ssh</a>.  <strong>However</strong>, that question doesn't give an scp-specific answer that deals with keys from within python.  I'm hoping for a way to run code kind of like</p>

<pre><code>import scp

client = scp.Client(host=host, user=user, keyfile=keyfile)
# or
client = scp.Client(host=host, user=user)
client.use_system_keys()
# or
client = scp.Client(host=host, user=user, password=password)

# and then
client.transfer('/etc/local/filename', '/etc/remote/filename')
</code></pre>
"
250357,24998,2008-10-30T14:32:20Z,31,Truncate a string without ending in the middle of a word,"<p>I am looking for a way to truncate a string in Python that will not cut off the string in the middle of a word.</p>

<p>For example:</p>

<pre>
Original:          ""This is really awesome.""
""Dumb"" truncate:   ""This is real...""
""Smart"" truncate:  ""This is really...""
</pre>

<p>I'm looking for a way to accomplish the ""smart"" truncate from above.</p>
"
250397,9789,2008-10-30T14:41:38Z,6,What do you like about Django?,"<p>I started to learn Django a few days ago, and as i dive into it it seems that I'm starting to like it even more.<br />
Trying to migrate from other language. 
I won't say which one, as the purpose of this question is not to bash anything.</p>

<p>So i would like to know your opinion about Django.  </p>

<p>What do you like about it?<br />
What made you switch/use it?<br />
What features you would like it to have that aren't there?<br />
What would make you switch to it?<br />
How fast is it in production?<br />
How hard is it to master it?  </p>
"
250398,3497,2008-10-30T14:41:50Z,3,How to specify relations using SQLAlchemy declarative syntax?,"<p>I can't find any proper documentation on how to specify relations
using the declarative syntax of SQLAlchemy.. Is it unsupported? That is, should I use the ""traditional"" syntax?<br />
I am looking for a way to specify relations at a higher level, avoiding having to mess with foreign keys etc.. I'd like to just declare ""addresses = OneToMany(Address)"" and let the framework handle the details.. I know that Elixir can do that, but I was wondering if ""plain"" SQLA could do it too.<br />
Thanks for your help!</p>
"
250700,7949,2008-10-30T15:50:51Z,5,Is it possible to communicate with a sub subprocess with subprocess.Popen?,"<p>I'm trying to write a python script that packages our software. This script needs to build our product, and package it. Currently we have other scripts that do each piece individually which include csh, and perl scripts. One such script is run like:</p>

<pre><code>sudo mod args
</code></pre>

<p>where mod is a perl script; so in python I would do </p>

<pre><code>proc = Popen(['sudo', 'mod', '-p', '-c', 'noresource', '-u', 'dtt', '-Q'], stderr=PIPE, stdout=PIPE, stdin=PIPE)
</code></pre>

<p>The problem is that this mod script needs a few questions answered. For this I thought that the traditional </p>

<pre><code>(stdout, stderr) = proc.communicate(input='y')
</code></pre>

<p>would work. I don't think it's working because the process that Popen is controlling is sudo, not the mod script that is asking the question. Is there any way to communicate with the mod script and still run it through sudo?</p>
"
251464,11452,2008-10-30T19:38:24Z,306,How to get a function name as a string in Python?,"<p>In Python, how do I get a function name as a string without calling the function?</p>

<pre><code>def my_function():
    pass

print get_function_name_as_string(my_function) # my_function is not in quotes
</code></pre>

<p>should output <code>""my_function""</code>.</p>

<p>Is this available in python? If not, any idea how to write <code>get_function_name_as_string</code> in Python?</p>
"
251506,32867,2008-10-30T19:48:59Z,3,script languages on windows mobile - something similar to python @ nokia s60,"<p>I try to find something similar to nokia's <strong>python for windows mobile</strong> based devices - a script interpreter [in this case also able to create standalone apps] with easy access to all phone interfaces - ability to make a phone call, send SMS, make a photo, send a file over GPRS, etc...</p>

<p>While there is 2.5 <strong>pythonce</strong> available for windows mobile it is pure python interpreter and what I look for are all those ""libraries"" that nokia's python has like ""import camera"", ""import messaging"", ability to control the phone programatically. Also the bluetooth console of nokia python is great.</p>

<p>I do not want to use .NET CF as even there (AFAIK) to control camera you need to use some indirect methods (for example: <a href=""http://blogs.msdn.com/marcpe/archive/2006/03/03/542941.aspx"" rel=""nofollow"">http://blogs.msdn.com/marcpe/archive/2006/03/03/542941.aspx</a>). </p>

<p>Appreciate any help you can provide, thanks in advance.</p>

<p>I hope there is something I was unable to locate via google. </p>
"
252035,85,2008-10-30T22:47:20Z,3,What is the best way to serve static web pages from within a Django application?,"<p>I am building a relatively simple <a href=""http://en.wikipedia.org/wiki/Django_%28web_framework%29"" rel=""nofollow"">Django</a> application and apart from the main page where most of the dynamic parts of the application are, there are a few pages that I will need that will not be dynamic at all (<em>About</em>, <em>FAQ</em>, etc.). What is the best way to integrate these into Django, idealing still using the Django template engine? Should I just create a template for each and then have a view that simply renders that template?</p>
"
252221,28486,2008-10-31T00:14:12Z,11,Possible Google Riddle?,"<p>My friend was given this free google website optimizer tshirt and came to me to try and figure out what the front logo meant.</p>

<p><a href=""http://2.bp.blogspot.com/_iQVgmEEAit4/SPkKHA3e8fI/AAAAAAAAAB8/ugUerJjuBw8/s1600-h/GWO-tshirt.jpg"" rel=""nofollow"">t-shirt</a></p>

<p>So, I have a couple of guesses as to what it means, but I was just wondering if there is something more.</p>

<p>My first guess is that each block represents a page layout, and the logo ""You should test that"" just means that you should use google website optimizer to test which is the best layout.  I hope that this isn't the answer, it just seems to simple and unsatisfying.</p>

<p>Well, I've spent the past hour trying to figure out if there is any deeper meaning, but to no avail.  So, I'm here hoping that someone might be able to help.</p>

<p>I did though write a program to see if the blocks represent something in binary.  I'll post the code below.  My code tests every permutation of reading a block as 4 bits, and then tries to interpret these bits as letters, hex, and ip addresses.</p>

<p>I hope someone knows better.</p>

<pre><code>#This code interprets the google t-shirt as a binary code, each box 4 bits.
# I try every permutation of counting the bits and then try to interpret these
# interpretations as letters, or hex numbers, or ip addresses.

# I need more interpretations, maybe one will find a pattern

import string

#these represent the boxes binary codes from left to right top to bottom
boxes = ['1110', '1000', '1111', '0110', '0011', '1011', '0001', '1001']

#changing the ordering
permutations = [""1234"", ""1243"", ""1324"", ""1342"", ""1423"", ""1432"", 
                ""2134"", ""2143"", ""2314"", ""2341"", ""2413"", ""2431"",
                ""3124"", ""3142"", ""3214"", ""3241"", ""3412"", ""3421"", 
                ""4123"", ""4132"", ""4213"", ""4231"",""4312"", ""4321""]

#alphabet hashing where 0 = a
alphabet1 = {'0000':'a', '0001':'b', '0010':'c', '0011':'d',
             '0100':'e', '0101':'f', '0110':'g', '0111':'h',
             '1000':'i', '1001':'j', '1010':'k', '1011':'l',
             '1100':'m', '1101':'n', '1110':'o', '1111':'p'}

#alphabet hasing where 1 = a
alphabet2 = {'0000':'?', '0001':'a', '0010':'b', '0011':'c',
             '0100':'d', '0101':'e', '0110':'f', '0111':'g',
             '1000':'h', '1001':'i', '1010':'j', '1011':'k',
             '1100':'l', '1101':'m', '1110':'n', '1111':'o'}

hex       = {'0000':'0', '0001':'1', '0010':'2', '0011':'3',
             '0100':'4', '0101':'5', '0110':'6', '0111':'7',
             '1000':'8', '1001':'9', '1010':'a', '1011':'b',
             '1100':'c', '1101':'d', '1110':'e', '1111':'f'} 

#code to convert from a string of ones and zeros(binary) to decimal number
def bin_to_dec(bin_string):
    l = len(bin_string)
    answer = 0
    for index in range(l):
        answer += int(bin_string[l - index - 1]) * (2**index)
    return answer        

#code to try and ping ip addresses
def ping(ipaddress):
    #ping the network addresses 
    import subprocess

    # execute the code and pipe the result to a string, wait 5 seconds
    test = ""ping -t 5 "" + ipaddress
    process = subprocess.Popen(test, shell=True, stdout=subprocess.PIPE)

    # give it time to respond
    process.wait()

    # read the result to a string
    result_str = process.stdout.read()

    #For now, need to manually check if the ping worked, fix later
    print result_str   

#now iterate over the permuation and then the boxes to produce the codes
for permute in permutations:
    box_codes = []
    for box in boxes:
        temp_code = """"
        for index in permute:
            temp_code += box[int(index) - 1]
        box_codes.append(temp_code)

    #now manipulate the codes using leter translation, network, whatever

    #binary
    print string.join(box_codes, """")

    #alphabet1
    print string.join( map(lambda x: alphabet1[x], box_codes), """")

    #alphabet2
    print string.join( map(lambda x: alphabet2[x], box_codes), """")

    #hex
    print string.join( map(lambda x: hex[x], box_codes), """")

    #ipaddress, call ping and see who is reachable
    ipcodes = zip(box_codes[0:8:2], box_codes[1:8:2])
    ip = """"
    for code in ipcodes:
        bin = bin_to_dec(code[0] + code[1])
        ip += repr(bin) + "".""
    print ip[:-1]
    #ping(ip[:-1])
    print
    print
</code></pre>

<p><a href=""http://2.bp.blogspot.com/_iQVgmEEAit4/SPkKHA3e8fI/AAAAAAAAAB8/ugUerJjuBw8/s1600-h/GWO-tshirt.jpg"" rel=""nofollow"">t-shirt</a>.</p>
"
252287,15154,2008-10-31T00:54:55Z,3,Bizarre python ImportError,"<p>Here's my setup: a Mac, running OS X Tiger.  Windows XP running in a virtual machine (Parallels).  Windows XP has my Mac home directory mapped as a network drive.</p>

<p>I have two files in a directory of my Mac home directory:</p>

<h3>foo.py</h3>

<pre><code>pass
</code></pre>

<h3>test.py</h3>

<pre><code>import foo
</code></pre>

<p>If I run test.py from within my virtual machine by typing 'python test.py', I get this:</p>

<pre><code>Traceback (most recent call last):
  File ""test.py"", line 1, in &lt;module&gt;
    import foo
ImportError: No module named foo
</code></pre>

<p>If I try to import foo from the console (running python under Windows from the same directory), all is well:</p>

<pre><code>Python 2.5.1 (r251:54863, Apr 18 2007, 08:51:08) [MSC v.1310 32 bit (Intel)] on win32
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt; import foo
&gt;&gt;&gt;
</code></pre>

<p>If I run test.py with Mac python, all is well.</p>

<p>If I copy test.py and foo.py to a different directory, I can run test.py under Windows without problems.</p>

<p>There is an <strong>init</strong>.py in the original directory, but it is empty.  Furthermore, copying it with the other files doesn't break anything in the previous paragraph.</p>

<p>There are no python-related environment variables set.</p>

<p>Any ideas?</p>
"
252417,6839,2008-10-31T02:01:48Z,105,How can I use a DLL file from Python?,"<p>What is the easiest way to use a DLL file from within Python?</p>

<p>Specifically, how can this be done <em>without</em> writing any additional wrapper C++ code to expose the functionality to Python?</p>

<p>Native Python functionality is strongly preferred over using a third-party library.</p>
"
252531,10583,2008-10-31T03:35:19Z,5,Why won't Django 1.0 admin application work?,"<p>I've just started playing with Django and am loosely following the tutorial with my own set of basic requirements. The models I've sketched out so far are a lot more comprehensive than the tutorial, but they compile fine. Otherwise, everything should have been the same.</p>

<p>My problem is with the admin application. I can log into it, and view the editable models, but when I click on a model or any of the change/add buttons, I get a 404.</p>

<p>This is the exact error I get:</p>

<pre><code>Page not found (404)
Request Method:     GET
Request URL:    http://localhost:8000/admin/auth/user/add/

App u'', model u'auth', not found.
</code></pre>

<p>These are the relevant files and what is in them:</p>

<p>urls.py</p>

<pre><code>from django.conf.urls.defaults import *

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
# Example:
# (r'^daso/', include('daso.foo.urls')),

# Uncomment the admin/doc line below and add 'django.contrib.admindocs' 
# to INSTALLED_APPS to enable admin documentation:
#(r'^admin/doc/', include('django.contrib.admindocs.urls')),

# Uncomment the next line to enable the admin:
    (r'^admin(.*)', admin.site.root)
)
</code></pre>

<p>admin.py</p>

<pre><code>from daso.clients.models import Person, Client, Contact
from django.contrib import admin

admin.site.register(Person)
admin.site.register(Client)
admin.site.register(Contact)
</code></pre>

<p>models.py - I'll just show one model</p>

<pre><code>class Client(Person):
relationships = models.ManyToManyField(""Contact"", through=""Relationship"", null=True)
disabilities = models.ManyToManyField(""Disability"", related_name=""disability"", null=True)
medical_issues = models.ManyToManyField(""MedicalIssue"", related_name=""medical_issue"", null=True)
medicare_num = models.CharField(max_length=15, blank=True)
insurance = models.OneToOneField(""Insurance"", null=True, blank=True)
medications = models.ManyToManyField(""Medication"", through=""Medication_Details"", null=True)

def __unicode__(self):
	client = u""[Client[id: "", self.id, "" name: "", self.first_name, "" "", self.last_name, ""]""
	return client
</code></pre>

<p>settings.py</p>

<pre><code>INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.admin',
    'daso.clients',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
)
</code></pre>

<p>Those should be the relevant files/sections of files. If anyone has an idea about WHY I'm getting a 404, please enlighten me?</p>

<p>Note, when pasting in here, installed apps had the last 2 apps tabbed instead of spaced*4, and when reloading the admin page it worked for half a second then 404'd again. Strange. Ideas?</p>
"
252703,15055,2008-10-31T05:55:36Z,1581,append vs. extend,"<p>What's the difference between the list methods <code>append()</code> and <code>extend()</code>?</p>
"
252951,15622,2008-10-31T09:24:45Z,1,Finding invocations of a certain function in a c++ file using python,"<p>I need to find all occurrences of a function call in a c++ file using python, and extract the arguments for each call.<br />
I'm playing with the <a href=""http://www.language-binding.net/pygccxml/pygccxml.html"" rel=""nofollow"">pygccxml</a> package, and extracting the arguments given a string with the function call is extremely easy:</p>

<pre><code>from pygccxml.declarations import call_invocation

def test_is_call_invocation(call):
    if call_invocation.is_call_invocation(call):
        print call_invocation.name(call)
        for arg in call_invocation.args(call):
            print ""   "",arg
    else:
        print ""not a function invocation""
</code></pre>

<p>What I couldn't find is a way of getting the calls parsing a file:  </p>

<pre><code>from pygccxml import parser
from pygccxml import declarations

decls = parser.parse( ['main.cpp'] )
# ...
</code></pre>

<p>Is there a way to find the calls to a certain function using the pygccxml package?<br />
Or maybe that package is an overkill for what I'm trying to do :) and there's a much simpler way? Finding the function calls with a regular expression is, I'm afraid, much trickier than it might look at a first sight...</p>
"
253018,11677,2008-10-31T10:08:50Z,3,How to configure the import path in Visual Studio IronPython projects,"<p>I have built the IronPythonIntegration solution that comes with the Visual Studio 2005 SDK (as explained at <a href=""http://www.izume.com/2007/10/13/integrating-ironpython-with-visual-studio-2005"" rel=""nofollow"">http://www.izume.com/2007/10/13/integrating-ironpython-with-visual-studio-2005</a>), and I can now use IronPython projects inside Visual Studio 2005. However, to let a Python file import from the standard library I need to include these two lines first:  </p>

<pre><code>import sys
sys.path.append('c:\Python24\lib')
</code></pre>

<p>and similarly for any other folders I want to be able to import from.  </p>

<p>Does anyone know a way to set up import paths so that all IronPython projects automatically pick them up?</p>
"
253375,19215,2008-10-31T12:51:14Z,13,What Python bindings are there for CVS or SVN?,"<p>I once did a cursory search and found no good CVS bindings for Python.  I wanted to be able to write helper scripts to do some fine-grained manipulation of the repository and projects in it.  I had to resort to using <code>popen</code> and checking <code>stdout</code> and <code>stderr</code> and then parsing those.  It was messy and error-prone.</p>

<p>Are there any good quality modules for CVS integration for Python?  Which module do you prefer and why?</p>

<p>While I am at it, is there a good Subversion integration module for Python?  My understanding is that Subversion has a great API for such things.</p>
"
253761,NA,2008-10-31T14:42:28Z,0,Looking a generic Python script to add a field and populate the field with conditions,"<p>I am looking for a script to allow users to add a text field to a .dbf table(e.g. landuse categories) and allow them to input/update the rows basing on what values in the GRIDCODE (numeric categories) field they think should be assigned into text categories.i.e.  if GRIDCODE value is 4, the corresponding field value of landuse/landclass is “forest” etc.</p>

<p>Is there such a script in existence?</p>

<p>Or, do you have something similar that I can customise to create a new script?</p>

<p>The script will accept users' interactive input as parameters passed into the script.</p>

<p>Sincerely, David</p>
"
254350,9328,2008-10-31T17:47:39Z,29,"In Python, is there a concise way of comparing whether the contents of two text files are the same?","<p>I don't care what the differences are.  I just want to know whether the contents are different.</p>
"
254635,32756,2008-10-31T19:20:30Z,8,Tiny python executable?,"<p>I plan to use PyInstaller to create a stand-alone python executable. PythonInstaller comes with built-in support for UPX and uses it to compress the executable but they are still really huge (about 2,7 mb).</p>

<p>Is there any way to create even smaller Python executables? For example using a shrinked python.dll or something similiar?</p>
"
254895,11452,2008-10-31T20:45:04Z,2,How to embed a tag within a url templatetag in a django template?,"<p>How do I embed a tag within a <a href=""http://docs.djangoproject.com/en/dev/ref/templates/builtins/#url"" rel=""nofollow"" title=""url templatetag"">url templatetag</a> in a django template?</p>

<p>Django 1.0 , Python 2.5.2</p>

<p>In views.py</p>

<pre><code>def home_page_view(request):
    NUP={""HOMEPAGE"": ""named-url-pattern-string-for-my-home-page-view""}    
    variables = RequestContext(request, {'NUP':NUP})
    return render_to_response('home_page.html', variables)
</code></pre>

<p>In home_page.html, the following</p>

<pre><code>NUP.HOMEPAGE = {{ NUP.HOMEPAGE }}
</code></pre>

<p>is displayed as </p>

<pre><code>NUP.HOMEPAGE = named-url-pattern-string-for-my-home-page-view
</code></pre>

<p>and the following url named pattern works ( as expected ),</p>

<pre><code>url template tag for NUP.HOMEPAGE = {% url named-url-pattern-string-for-my-home-page-view %}
</code></pre>

<p>and is displayed as </p>

<pre><code>url template tag for NUP.HOMEPAGE = /myhomepage/
</code></pre>

<p>but when <code>{{ NUP.HOMEPAGE }}</code> is embedded within a <code>{% url ... %}</code> as follows</p>

<pre><code>url template tag for NUP.HOMEPAGE = {% url {{ NUP.HOMEPAGE }} %}
</code></pre>

<p>this results in a template syntax error</p>

<pre><code>TemplateSyntaxError at /myhomepage/
Could not parse the remainder: '}}' from '}}'
Request Method: GET
Request URL:    http://localhost:8000/myhomepage/
Exception Type: TemplateSyntaxError
Exception Value:    
Could not parse the remainder: '}}' from '}}'
Exception Location: C:\Python25\Lib\site-packages\django\template\__init__.py in __init__, line 529
Python Executable:  C:\Python25\python.exe
Python Version: 2.5.2
</code></pre>

<p>I was expecting <code>{% url {{ NUP.HOMEPAGE }} %}</code> to resolve to <code>{% url named-url-pattern-string-for-my-home-page-view %}</code>  at runtime and be displayed as <code>/myhomepage/</code>.</p>

<p>Are embedded tags not supported in django? </p>

<p>is it possible to write a custom url template tag with embedded tags support to make this work?</p>

<p><code>{% url {{ NUP.HOMEPAGE }} %}</code></p>
"
255035,2147,2008-10-31T21:38:02Z,36,Converting datetime to POSIX time,"<p>How do I convert a datetime or date object into a POSIX timestamp in python?  There are methods to create a datetime object out of a timestamp, but I don't seem to find any obvious ways to do the operation the opposite way.</p>
"
255147,4343,2008-10-31T22:33:21Z,169,How do I keep Python print from adding newlines or spaces?,"<p>In python, if I say</p>

<pre><code>print 'h'
</code></pre>

<p>I get the letter h and a newline.  If I say </p>

<pre><code>print 'h',
</code></pre>

<p>I get the letter h and no newline.  If I say</p>

<pre><code>print 'h',
print 'm',
</code></pre>

<p>I get the letter h, a space, and the letter m.  How can I prevent Python from printing the space?</p>

<p>The print statements are different iterations of the same loop so I can't just use the + operator.</p>
"
255157,5304,2008-10-31T22:37:00Z,1,How to override HTTP request verb in GAE,"<p>In the context of a Google App Engine Webapp framework application:</p>

<p>I want to changed the request verb of a request in the case a
parameter _method is provided, for example if a POST request comes in
with a parameter _method=PUT, I need to change the request to call the
put method of the handler. This is to cope with the way prototype.js
works with verbs like PUT and DELETE(workaround for IE). Here is my
first attempt:</p>

<pre>
class MyRequestHandler(webapp.RequestHandler):
   def initialize(self, request, response):
       m = request.get('_method')
       if m:
           request.method = m.upper()
       webapp.RequestHandler.initialize(self, request, response)
</pre>

<p>The problem is, for some reason whenever the redirect is done, the
self.request.params are emptied by the time the handling method(put or
delete) is called, even though they were populated when initialize was
called. Anyone have a clue why this is? As a workaround I thought I
could clone the params at initialize() time, but .copy() did not work,
and I haven't found a way to do that either.</p>

<p><em>Update: I received a very helpful response from Arachnid. The solution I ended up with uses a metaclass. It is found below.</em></p>
"
255263,22312,2008-10-31T23:42:20Z,4,Storage transactions in Redland's Python bindings?,"<p>I've currently skimming through the Python-bindings for Redland and haven't found a clean way to do transactions on the storage engine via it. I found some model-transactions within the low-level Redland module:</p>

<pre><code>import RDF, Redland

storage = RDF.Storage(...)
model = RDF.Model(storage)
Redland.librdf_model_transaction_start(model._model)
try:
    # Do something
    Redland.librdf_model_transaction_commit(model._model)
    model.sync()
except:
    Redland.librdf_model_transaction_rollback(model._model)
</code></pre>

<p>Do these also translate down to the storage layer?</p>

<p>Thanks :-)</p>
"
255332,3594,2008-11-01T00:41:54Z,8,Python re.findall with groupdicts,"<p>I kind of wish that there were a version of <code>re.findall</code> that returned <code>groupdict</code>s instead of just <code>group</code>s. Am I missing some simple way to accomplish the same result? (Does anybody know of a reason that this function doesn't exist?)</p>
"
255429,24730,2008-11-01T02:23:27Z,10,Determine if a named parameter was passed,"<p>I would like to know if it is possible to determine if a function parameter with a default value was passed in Python.
For example, how does dict.pop work?</p>

<pre><code>&gt;&gt;&gt; {}.pop('test')
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
KeyError: 'pop(): dictionary is empty'
&gt;&gt;&gt; {}.pop('test',None)
&gt;&gt;&gt; {}.pop('test',3)
3
&gt;&gt;&gt; {}.pop('test',NotImplemented)
NotImplemented
</code></pre>

<p>How does the pop method determine that the first time a default return value was not passed? Is this something that can only be done in C?</p>

<p>Thanks</p>
"
255476,18676,2008-11-01T03:25:09Z,22,Browser-based application or stand-alone GUI app?,"<p>I'm sure this has been asked before, but I can't find it. </p>

<p>What are the benefits/limitations of using a browser-based interface for a stand-alone application vs. using a normal GUI framework?</p>

<p>I'm working on a Python program currently implement with wxPython for the GUI. The application is simply user-entry forms and dialogs. I am considering moving to PyQt because of the widgets it has (for future expansion), then I realized I could probably just use a browser to do much of the same stuff.</p>

<p>The application currently doesn't require Internet access, though it's a possibility in the future. I was thinking of using <a href=""http://karrigell.sourceforge.net/"">Karrigell</a> for the web framework if I go browser-based.</p>

<p><hr /></p>

<p><strong>Edit</strong> For clarification, as of right now the application would be browser-based, not web-based. All the information would be stored locally on the client computer; no server calls would need to be made and no Internet access required (it may come later though). It would simply be a browser GUI instead of a wxPython/PyQt GUI. Hope that makes sense.</p>
"
255700,26763,2008-11-01T15:50:30Z,9,How to implement Google Suggest in your own web application (e.g. using Python),"<p>In my website, users have the possibility to store links.</p>

<p>During typing the internet address into the designated field I would like to display a suggest/autocomplete box similar to Google Suggest or the Chrome Omnibar.</p>

<p>Example:</p>

<p>User is typing as URL:</p>

<pre><code>http://www.sta
</code></pre>

<p>Suggestions which would be displayed:</p>

<pre><code>http://www.staples.com
http://www.starbucks.com
http://www.stackoverflow.com
</code></pre>

<p>How can I achieve this while not reinventing the wheel? :)</p>
"
256021,30105,2008-11-01T19:52:08Z,2,Can I Use Python to Make a Delete Button in a 'web page',"<p>I have written a script that goes through a bunch of files and snips out a portion of the files for further processing. The script creates a new directory and creates new files for each snip that is taken out.  I have to now evaluate each of the files that were created to see if it is what I needed.  The script also creates an html index file with links to each of the snips.  So I can click the hyperlink to see the file, make a note in a spreadsheet to  indicate if the file is correct or not and then use the back button in the browser to take me back to the index list.  </p>

<p>I was sitting here wondering if I could somehow create a delete button in the browser next to the hyperlink.  My thought is I would click the hyperlink, make a judgment about the file and if it is not one I want to keep then when I get back to the main page I just press the delete button and it is gone from the directory.   </p>

<p>Does anyone have any idea if this is possible.  I am writing this in python but clearly the issue is is there a way to create an htm file with a delete button-I would just use Python to write the commands for the deletion button.</p>
"
256222,3594,2008-11-01T23:02:36Z,235,Which exception should I raise on bad/illegal argument combinations in Python?,"<p>I was wondering about the best practices for indicating invalid argument combinations in Python. I've come across a few situations where you have a function like so:</p>

<pre><code>def import_to_orm(name, save=False, recurse=False):
    """"""
    :param name: Name of some external entity to import.
    :param save: Save the ORM object before returning.
    :param recurse: Attempt to import associated objects as well. Because you
        need the original object to have a key to relate to, save must be
        `True` for recurse to be `True`.
    :raise BadValueError: If `recurse and not save`.
    :return: The ORM object.
    """"""
    pass
</code></pre>

<p>The only annoyance with this is that every package has its own, usually slightly differing <code>BadValueError</code>. I know that in Java there exists <code>java.lang.IllegalArgumentException</code> -- is it well understood that everybody will be creating their own <code>BadValueError</code>s in Python or is there another, preferred method?</p>
"
256417,18866,2008-11-02T02:26:20Z,52,Python packages and egg-info directories,"<p>Can someone explain how egg-info directories are tied to their respective modules? For example, I have the following:</p>

<pre><code>/usr/local/lib/python2.5/site-packages/quodlibet/
/usr/local/lib/python2.5/site-packages/quodlibet-2.0.egg-info/
</code></pre>

<p>I'm assuming the egg-info directory is to make the corresponding module visible to setuptools (easy_install), right? If so, how does setuptools tie the egg-info directory to the module directory?</p>

<p>Assuming that I'm on the right track, and for the sake of example... If I wanted to make an existing package of mine visible to setuptools, could I just symlink the module directory and the egg-info directory to the site-packages directory? I would have just tried this myself, but I'm not sure how to test if the package is visible to setuptools. Bonus points if you can also tell me how to test this :)</p>

<p>The main reason I'm trying to understand all this is because I would like to symlink some of my modules into site-packages so that I can make changes to them and have the changes visible to the scripts that use them without having to reinstall the egg from PyPI after each change.</p>
"
256564,33383,2008-11-02T05:38:48Z,3,Putting a pyCurl XML server response into a variable (Python),"<p>I'm a Python novice, trying to use pyCurl. The project I am working on is creating a Python wrapper for the twitpic.com API (<a href=""http://twitpic.com/api.do"" rel=""nofollow"">http://twitpic.com/api.do</a>). For reference purposes, check out the code (<a href=""http://pastebin.com/f4c498b6e"" rel=""nofollow"">http://pastebin.com/f4c498b6e</a>) and the error I'm getting (<a href=""http://pastebin.com/mff11d31"" rel=""nofollow"">http://pastebin.com/mff11d31</a>).</p>

<p>Pay special attention to line 27 of the code, which contains ""xml = server.perform()"". After researching my problem, I discovered that unlike I had previously thought, .perform() does not return the xml response from twitpic.com, but None, when the upload succeeds (duh!).</p>

<p>After looking at the error output further, it seems to me like the xml input that I want stuffed into the ""xml"" variable is instead being printed to ether standard output or standard error (not sure which). I'm sure there is an easy way to do this, but I cannot seem to think of it at the moment. If you have any tips that could point me in the right direction, I'd be very appreciative. Thanks in advance.</p>
"
257398,2220518,2008-11-02T21:22:30Z,6,Message Box in Python,"<p>Is there a UI library to create a message box or input box in python?</p>
"
257409,2220518,2008-11-02T21:31:00Z,33,Download image file from the HTML page source using python?,"<p>I am writing a scraper that downloads all the image files from a HTML page and saves them to a specific folder. all the images are the part of the HTML page.</p>
"
257481,9789,2008-11-02T22:22:25Z,10,What's the difference between scgi and wsgi?,"<p>What's the difference between these two?
Which is better/faster/reliable?</p>
"
257563,33512,2008-11-02T23:26:35Z,2,Python MySQL Statement returning Error,"<p>hey, I'm very new to all this so please excuse stupidity :)</p>

<pre><code>import os
import MySQLdb
import time

db = MySQLdb.connect(host=""localhost"", user=""root"", passwd=""********"", db=""workspace"")
cursor = db.cursor()

tailoutputfile = os.popen('tail -f syslog.log')
while 1:
        x = tailoutputfile.readline()  
        if len(x)==0:
                break
        y = x.split()
        if y[2] == 'BAD':
                timestring = time.strftime(""%Y-%m-%d %H:%M:%S"", time.localtime(time.time()))
                cursor.execute(""INSERT INTO releases (date, cat, name) values (timestring, y[4], y[7]"")
        if y[2] == 'GOOD':
                print y[4] + '\t' + y[7]
</code></pre>

<p>so i run the program and this is the error message I am getting</p>

<pre><code>user@machine:~/$ python reader.py
Traceback (most recent call last):
  File ""reader.py"", line 17, in ?
    cursor.execute(""INSERT INTO releases (date, cat, name) values (timestring, y[4], y[7]"")
  File ""/usr/lib/python2.4/site-packages/MySQLdb/cursors.py"", line 163, in execute
    self.errorhandler(self, exc, value)
  File ""/usr/lib/python2.4/site-packages/MySQLdb/connections.py"", line 35, in defaulterrorhandler
    raise errorclass, errorvalue
_mysql_exceptions.ProgrammingError: (1064, ""You have an error in your SQL syntax; check the manual that corresponds to                                                              your MySQL server version for the right syntax to use near '[4], y[7]' at line 1"")
user@machine:~/$
</code></pre>

<p>So i'm assuming that the error is obviously coming from the SQL Statement </p>

<pre><code>cursor.execute(""INSERT INTO releases (date, cat, name) values (timestring, y[4], y[7]"")
</code></pre>

<p>Here is an example of what y[4] and y[7] will look like. </p>

<pre><code>YES      Mail.Sent.To.User:user@work.com.11.2.2008:23.17
</code></pre>

<p>Is this error happening because I should be escaping those values before I try and Insert them into the Database?
Or am I completely missing the point??</p>

<p>Any help would be appreciated!
thanks in advance. </p>
"
257655,2592,2008-11-03T00:42:46Z,0,'Snippit' based django semi-CMS,"<p>I remember reading somewhere on the internets about a half-assed tiny django CMS app, which was basically built on 'snippets' of text.</p>

<p>The idea was, that in the admin, you make a snippet (say a description of a product), give it a name (such as 'google_desc') and call it in a template with something like {% snippet google_desc %} and bam!</p>

<p>I <em>think</em> it was <a href=""http://www.b-list.org"" rel=""nofollow"">this</a> guy that made it, but im not quite sure.</p>

<p>Would anyone know where i could find this piece of awesomeness?</p>

<p><strong>Edit:</strong> I was after an app or something to plug into my project. Not, an existing website/service.</p>

<p><strong>Edit 2:</strong> insin got it. I was after <a href=""http://code.google.com/p/django-chunks/"" rel=""nofollow"">django-chunks</a></p>
"
257658,1452,2008-11-03T00:45:10Z,9,"How can I make a fake ""active session"" for gconf?","<p>I've automated my Ubuntu installation - I've got Python code that runs automatically (after a clean install, but before the first user login - it's in a temporary /etc/init.d/ script) that sets up everything from Apache &amp; its configuration to my personal Gnome preferences. It's the latter that's giving me trouble.</p>

<p>This worked fine in Ubuntu 8.04 (Hardy), but when I use this with 8.10 (Intrepid), the first time I try to access gconf, I get this exception:</p>

<p>Failed to contact configuration server; some possible causes are that you need to enable TCP/IP networking for ORBit, or you have stale NFS locks due to a system crash. See <a href=""http://www.gnome.org/projects/gconf/"" rel=""nofollow"">http://www.gnome.org/projects/gconf/</a> for information. (Details -  1: <strong>Not running within active session</strong>)</p>

<p>Yes, right, there's no Gnome session when this is running, because the user hasn't logged in yet - however, this worked before; this appears to be new with Intrepid's Gnome (2.24?).</p>

<p>Short of modifying the gconf's XML files directly, is there a way to make some sort of proxy Gnome session? Or, any other suggestions?</p>

<p>(More details: this is python code that runs as root, but setuid's &amp; setgid's to be me before setting my preferences using the ""gconf"" module from the python-gconf package.)</p>
"
257956,6013,2008-11-03T04:52:36Z,1,Java equivalent to pyftpdlib?,"<p>Is there a good Java alternative to pyftpdlib? I am looking for an easy to setup and run embedded ftp server.</p>
"
258119,116,2008-11-03T08:23:10Z,6,Python: wrapping method invocations with pre and post methods,"<p>I am instantiating a class A (which I am importing from somebody
else, so I can't modify it) into my class X.</p>

<p>Is there a way I can intercept or wrape calls to methods in A?
I.e., in the code below can I call</p>

<pre><code>x.a.p1()
</code></pre>

<p>and get the output</p>

<pre><code>X.pre
A.p1
X.post
</code></pre>

<p>Many TIA!</p>

<pre><code>class A:
    # in my real application, this is an imported class
    # that I cannot modify
    def p1(self): print 'A.p1'

class X:
    def __init__(self):
        self.a=A()
    def pre(self): print 'X.pre'
    def post(self): print 'X.post'

x=X()
x.a.p1()
</code></pre>
"
258228,9951,2008-11-03T09:46:03Z,11,Why are Exceptions iterable?,"<p>I have been bitten by something unexpected recently. I wanted to make something like that:</p>

<pre><code>try :
     thing.merge(iterable) # this is an iterable so I add it to the list
except TypeError :
     thing.append(iterable) # this is not iterable, so I add it
</code></pre>

<p>Well, It was working fine until I passed an object inheriting from Exception which was supposed to be added.</p>

<p>Unfortunetly, an Exception is iterable. The following code does not raise any <code>TypeError</code>:</p>

<pre><code>for x in Exception() :
    print 1
</code></pre>

<p>Does anybody know why?</p>
"
258296,4172,2008-11-03T10:38:54Z,33,Django models - how to filter number of ForeignKey objects,"<p>I have a models <code>A</code> and <code>B</code>, that are like this:</p>

<pre><code>class A(models.Model):
  title = models.CharField(max_length=20)
  (...)

class B(models.Model):
  date = models.DateTimeField(auto_now_add=True)
  (...)
  a = models.ForeignKey(A)
</code></pre>

<p>Now I have some <code>A</code> and <code>B</code> objects, and I'd like to get a query that selects all <code>A</code> objects that have less then 2 <code>B</code> pointing at them.</p>

<p>A is something like a pool thing, and users (the B) join pool. if there's only 1 or 0 joined, the pool shouldn't be displayed at all.</p>

<p>Is it possible with such model design? Or should I modify that a bit?</p>
"
258390,30786,2008-11-03T11:34:18Z,5,Python filter/remove URLs from a list,"<p>I have a text file of URLs, about 14000.  Below is a couple of examples:</p>

<p><a href=""http://www.domainname.com/pagename?CONTENT_ITEM_ID=100&amp;param2=123"" rel=""nofollow"">http://www.domainname.com/pagename?CONTENT_ITEM_ID=100&amp;param2=123</a><br />
<a href=""http://www.domainname.com/images?IMAGE_ID=10"" rel=""nofollow"">http://www.domainname.com/images?IMAGE_ID=10</a><br />
<a href=""http://www.domainname.com/pagename?CONTENT_ITEM_ID=101&amp;param2=123"" rel=""nofollow"">http://www.domainname.com/pagename?CONTENT_ITEM_ID=101&amp;param2=123</a><br />
<a href=""http://www.domainname.com/images?IMAGE_ID=11"" rel=""nofollow"">http://www.domainname.com/images?IMAGE_ID=11</a><br />
<a href=""http://www.domainname.com/pagename?CONTENT_ITEM_ID=102&amp;param2=123"" rel=""nofollow"">http://www.domainname.com/pagename?CONTENT_ITEM_ID=102&amp;param2=123</a><br /></p>

<p>I have loaded the text file into a Python list and I am trying to get all the URLs with CONTENT_ITEM_ID separated off into a list of their own.  What would be the best way to do this in Python?</p>

<p>Cheers</p>
"
258746,30786,2008-11-03T14:22:13Z,8,Slicing URL with Python,"<p>I am working with a huge list of URL's. Just a quick question I have trying to slice a part of the URL out, see below:</p>

<pre><code>http://www.domainname.com/page?CONTENT_ITEM_ID=1234&amp;param2&amp;param3
</code></pre>

<p>How could I slice out:</p>

<pre><code>http://www.domainname.com/page?CONTENT_ITEM_ID=1234
</code></pre>

<p>Sometimes there is more than two parameters after the CONTENT_ITEM_ID and the ID is different each time, I am thinking it can be done by finding the first &amp; and then slicing off the chars before that &amp;, not quite sure how to do this tho.</p>

<p>Cheers</p>
"
258767,23191,2008-11-03T14:27:08Z,3,Django: Overriding verbose_name for AutoField without dropping the model,"<p>I am using <strong>0.97-pre-SVN-unknown</strong> release of Django.</p>

<p>I have a model for which I have not given any primary_key. Django, consequently, automatically provides an AutoField that is called ""id"". Everything's fine with that. But now, I have to change the ""verbose_name"" of that AutoField to something other than ""id"". I cannot override the ""id"" field the usual way, because that would require dropping/resetting the entire model and its data (which is strictly not an option). I cannot find another way around it. Does what I want even possible to achieve? If you may suggest any alternatives that would get me away with what I want without having to drop the model/table, I'd be happy.</p>

<p>Many Thanks.</p>
"
258775,3497,2008-11-03T14:28:03Z,8,"How to find out if a lazy relation isn't loaded yet, with SQLAlchemy?","<p>With SQLAlchemy, is there a way to know beforehand whether a relation would be lazy-loaded?<br />
For example, given a lazy parent->children relation and an instance X of ""parent"", I'd like to know if ""X.children"" is already loaded, without triggering the query.</p>
"
259234,33061,2008-11-03T16:46:57Z,0,"python, functions running from a list and adding to a list through functions","<p>How do I run a function on a loop so all the results go straight into a list and is there a way to run a function which acts on all the values in a list?</p>
"
259314,2908,2008-11-03T17:09:05Z,-1,python smtplib,"<p>Hey I have a windows server running python CGI scripts and I'm having a little trouble with smtplib. The server is running python 2.1 (unfortunately and I can not upgrade it). Anyway I have the following code:</p>

<p><code><pre>
    session = smtplib.SMTP(""smtp-auth.ourhosting.com"", 587)
    session.login(smtpuser, smtppass)
</pre></code></p>

<p>and it's giving me this error:</p>

<pre>exceptions.AttributeError :  SMTP instance has no attribute 'login' :  </pre>

<p>I'm assuming this is because the login() method was added after python 2.1. so how do I fix this? </p>

<p>I have to either add the module by uploading the files to the same directory as the cgi script (though I believe smtplib is written in C and needs to be compiled which we can't do on this server)</p>

<p>OR</p>

<p>Do it whatever way is expected by the libsmtp in python 2.1</p>

<p>Thanks so much!</p>
"
259451,NA,2008-11-03T18:07:45Z,2,How to extract frequency information from an input audio stream (using PortAudio)?,"<p>I want to record sound (voice) using PortAudio (PyAudio) and output the corresponding sound wave on the screen. Hopeless as I am, I am unable to extract the frequency information from the audio stream so that I can draw it in Hz/time form.</p>

<p><hr /></p>

<p>Here's an example code snippet that records and plays recorded audio for five seconds, in case it helps any:</p>

<pre><code>p = pyaudio.PyAudio()

chunk = 1024
seconds = 5

stream = p.open(format=pyaudio.paInt16,
                channels=1,
                rate=44100,
                input=True,
                output=True)

for i in range(0, 44100 / chunk * seconds):
    data = stream.read(chunk)
    stream.write(data, chunk)
</code></pre>

<p>I wish to extract the needed information from the above variable ""data"". (Or use some other high-level approach with PortAudio or another library with Python bindings.)</p>

<p><hr /></p>

<p>I'd be very grateful for any help! Even vaguely related tidbits of audio-analyzing wisdom are appreciated. :)</p>
"
259491,24489,2008-11-03T18:22:17Z,13,Credit card payments and notifications on the Google App Engine,"<p>I ported gchecky to the google app engine. you can <a href=""http://web2py.appspot.com/plugin_checkout"" rel=""nofollow"">try it here</a></p>

<p>It implements both level 1 (cart submission) and level 2 (notifications from google checkout).</p>

<p>Is there any other payment option that works on the google app engine (paypal for example) and supports level 2 (notifications)?</p>
"
259578,2147,2008-11-03T18:54:04Z,7,Is it safe to make an old-style class into a new-style class using Multiple Inheritance?,"<p>In a program that I'm writing, I wanted to make a ConfigParser that's read only so that it can safely be used globally.  I didn't realize this, but apparently the SafeConfigParser is an old-style class, thus I had to subclass it like this:</p>

<pre><code>class ConstParser(SafeConfigParser, object):
     """"""This is a implementation of the SafeConfigParser that can't
        write any values.  This is to ensure that it can only be filled
        once and won't get messy with multiple modules writing to it.""""""
    def __init__(self, files, defaults={}):
        super(ConstParser, self).__init__(defaults)
        self.read(files)
    def set(self, *args, **argd):
        raise NotImplementedError()
    def write(self, *args, **argd):
        raise NotImplementedError()
    def remove_option(self, *args, **argd):
        raise NotImplementedError()
    def remove_section(self, *args, **argd):
        raise NotImplementedError()
</code></pre>

<p>If I didn't use object as a mixin, the call to SafeConfigParser's <code>__init__</code> method didn't work.  Now, I'm sure that there are better ways to do what I want to do, but now I'm curious:  is this ok to do in general?</p>

<p>I mean, I can't think of any reason why this would be a bad thing, but it still gives me bad feelings.  Are they justified, or am I just being paranoid?</p>
"
259634,NA,2008-11-03T19:19:09Z,17,Splitting a person's name into forename and surname,"<p>ok so basically I am asking the question of their name
I want this to be one input rather than Forename and Surname.</p>

<p>Now is there any way of splitting this name? and taking just the last word from the ""Sentence"" e.g.</p>

<pre><code>name = ""Thomas Winter""
print name.split()
</code></pre>

<p>and what would be output is just ""Winter""</p>
"
259782,10040,2008-11-03T20:14:00Z,3,Does Python 2.5 include a package to natively transform an XML document?,"<p>In my Python app, I have an XML document that I'd like to transform using my XSL file.  I'm currently using xml.etree to generate the XML document, but I haven't found anything within Python 2.5 that will allow me to natively transform my XML document.</p>

<p>I've already found one library (<a href=""http://xmlsoft.org/XSLT/"" rel=""nofollow"">libxslt</a>) which can execute the transformation, but I figured Python would have a native library that achieves the desired result.</p>

<p>Any thoughts?</p>
"
260056,33775,2008-11-03T21:39:38Z,18,Hashtable/dictionary/map lookup with regular expressions,"<p>I'm trying to figure out if there's a reasonably efficient way to perform a lookup in a dictionary (or a hash, or a map, or whatever your favorite language calls it) where the keys are regular expressions and strings are looked up against the set of keys.  For example (in Python syntax):</p>

<pre><code>&gt;&gt;&gt; regex_dict = { re.compile(r'foo.') : 12, re.compile(r'^FileN.*$') : 35 }
&gt;&gt;&gt; regex_dict['food']
12
&gt;&gt;&gt; regex_dict['foot in my mouth']
12
&gt;&gt;&gt; regex_dict['FileNotFoundException: file.x does not exist']
35
</code></pre>

<p>(Obviously the above example won't work as written in Python, but that's the sort of thing I'd like to be able to do.)</p>

<p>I can think of a naive way to implement this, in which I iterate over all of the keys in the dictionary and try to match the passed in string against them, but then I lose the O(1) lookup time of a hash map and instead have O(n), where n is the number of keys in my dictionary.  This is potentially a big deal, as I expect this dictionary to grow very large, and I will need to search it over and over again (actually I'll need to iterate over it for every line I read in a text file, and the files can be hundreds of megabytes in size).</p>

<p>Is there a way to accomplish this, without resorting to O(n) efficiency?</p>

<p>Alternatively, if you know of a way to accomplish this sort of a lookup in a database, that would be great, too.</p>

<p>(Any programming language is fine -- I'm using Python, but I'm more interested in the data structures and algorithms here.)</p>

<p>Someone pointed out that more than one match is possible, and that's absolutely correct.  Ideally in this situation I'd like to return a list or tuple containing all of the matches.  I'd settle for the first match, though.</p>

<p>I can't see O(1) being possible in that scenario; I'd settle for anything less than O(n), though.  Also, the underlying data structure could be anything, but the basic behavior I'd like is what I've written above: lookup a string, and return the value(s) that match the regular expression keys.</p>
"
260273,1057,2008-11-03T23:01:50Z,29,Most efficient way to search the last x lines of a file in python,"<p>I have a file and I don't know how big it's going to be (it could be quite large, but the size will vary greatly).  I want to search the last 10 lines or so to see if any of them match a string.  I need to do this as quickly and efficiently as possible and was wondering if there's anything better than:</p>

<pre><code>s = ""foo""
last_bit = fileObj.readlines()[-10:]
for line in last_bit:
    if line == s:
        print ""FOUND""
</code></pre>
"
260738,2592,2008-11-04T03:11:03Z,63,Play audio with Python,"<p>How can I play audio (it would be like a 1 second sound) from a Python script?</p>

<p>It would be best if it was platform independent, but firstly it needs to work on a Mac.</p>

<p>I know I could just execute the <code>afplay file.mp3</code> command from within Python, but is it possible to do it in raw Python? I would also be better if it didn't rely on external libraries.</p>
"
261500,9589,2008-11-04T10:46:43Z,7,How to build Python C extension modules with autotools,"<p>Most of the documentation available for building Python extension modules
uses distutils, but I would like to achieve this by using the appropriate
python autoconf &amp; automake macros instead.</p>

<p>I'd like to know if there is an open source project out there that does
exactly this. Most of the ones I've found end up relying on a setup.py file.
Using that approach works, but unfortunately ends up rebuilding the entire
source tree any time I make a modification to the module source files.</p>
"
261638,6759,2008-11-04T11:57:27Z,408,How do I protect Python code?,"<p>I am developing a piece of software in Python that will be distributed to my employer's customers. My employer wants to limit the usage of the software with a time restricted license file.</p>

<p>If we distribute the .py files or even .pyc files it will be easy to (decompile and) remove the code that checks the license file.</p>

<p>Another aspect is that my employer does not want the code to be read by our customers, fearing that the code may be stolen or at least the ""novel ideas"".</p>

<p>Is there a good way to handle this problem? Preferably with an off-the-shelf solution.</p>

<p>The software will run on Linux systems (so I don't think py2exe will do the trick).</p>
"
261655,18909,2008-11-04T12:03:34Z,29,Converting a List of Tuples into a Dict in Python,"<p>I have a list of tuples like this:</p>

<pre><code>[
('a', 1),
('a', 2),
('a', 3),
('b', 1),
('b', 2),
('c', 1),
]
</code></pre>

<p>I want to iterate through this keying by the first item, so for example I could print something like this:</p>

<pre><code>a 1 2 3
b 1 2
c 1
</code></pre>

<p>How would I go about doing this without keeping an item to track whether the first item is the same as I loop round the tuples. This feels rather messy (plus I have to sort the list to start with)...</p>

<p>Thanks,</p>

<p>Dan</p>
"
262249,15369,2008-11-04T16:07:01Z,0,How do I safely decode a degrees symbol in a wxPython app?,"<p>I have a debug app I've been writing which receives data from a C-based process via UDP. One of the strings sent to me contains a <code>°</code> character - <a href=""http://en.wikipedia.org/wiki/Degree_symbol"" rel=""nofollow"">Unicode U+00B0</a> (which incidentally breaks the StackOverflow search function!). When my wxPython application tries to append that string to a text box I get a <code>UnicodeDecodeError</code>.</p>

<p>My first attempt to fix the issue simply caught that error (because the app apparently does send <em>some</em> bad messages. The problem is that the app also uses the character to report various temperatures around the unit and that's something we really need to log. Changing the source app is out of my control, so how can I detect and decode those symbols into something the <code>wxTextCtrl</code> can display?</p>
"
262460,33061,2008-11-04T16:53:45Z,0,making a programme run indefinitely in python,"<p>Is there any way to make a function (the ones I'm thinking of are in the style of the simple ones I've made which generate the fibonnacci sequence from 0 to a point, and all the primes between two points) run indefinitely.   E.g. until I press a certain key or until a time has passed, rather than until a number reaches a certain point? </p>

<p>Also, if it is based on time then is there any way I could just extend the time and start it going from that point again, rather than having to start again from 0? I am aware there is a time module, i just don't know much about it.</p>
"
263005,34329,2008-11-04T19:08:16Z,11,Is it possible to change the Environment of a parent process in python?,"<p>In Linux When I invoke python from the shell it replicates its environment, and starts the python process. Therefore if I do something like the following:</p>

<pre><code>import os
os.environ[""FOO""] = ""A_Value""
</code></pre>

<p>When the python process returns, FOO, assuming it was undefined originally, will still be undefined. Is there a way for the python process (or any child process) to modify the environment of its parent process?</p>

<p>I know you typically solve this problem using something like</p>

<pre><code>source script_name.sh
</code></pre>

<p>But this conflicts with other requirements I have.</p>
"
263296,34395,2008-11-04T20:23:17Z,11,Creating a python win32 service,"<p>I am currently trying to create a win32 service using pywin32. My main point of reference has been this tutorial:</p>

<p><a href=""http://code.activestate.com/recipes/551780/"">http://code.activestate.com/recipes/551780/</a></p>

<p>What i don't understand is the initialization process, since the Daemon is never initialized directly by Daemon(), instead from my understanding its initialized by the following:</p>

<pre><code>mydaemon = Daemon
__svc_regClass__(mydaemon, ""foo"", ""foo display"", ""foo description"")
__svc_install__(mydaemon)
</code></pre>

<p>Where <strong>svc_install</strong>, handles the initalization, by calling Daemon.<strong>init</strong>() and passing some arguments to it. </p>

<p>But how can i initialize the daemon object, without initalizing the service? I want to do a few things, before i init the service. Does anyone have any ideas?</p>

<pre><code>class Daemon(win32serviceutil.ServiceFramework):
    def __init__(self, args):
        win32serviceutil.ServiceFramework.__init__(self, args)
        self.hWaitStop = win32event.CreateEvent(None, 0, 0, None)

    def SvcDoRun(self):
        self.run()

    def SvcStop(self):
        self.ReportServiceStatus(win32service.SERVICE_STOP_PENDING)
        win32event.SetEvent(self.hWaitStop)

    def start(self):
        pass

    def stop(self):
        self.SvcStop()

    def run(self):
        pass

def __svc_install__(cls):
    win32api.SetConsoleCtrlHandler(lambda x: True, True)
    try:
        win32serviceutil.InstallService(
            cls._svc_reg_class_,
            cls._svc_name_,
            cls._svc_display_name_,
            startType = win32service.SERVICE_AUTO_START
            )
        print ""Installed""
    except Exception, err:
        print str(err)

def __svc_regClass__(cls, name, display_name, description):

    #Bind the values to the service name
    cls._svc_name_ = name
    cls._svc_display_name_ =  display_name
    cls._svc_description_ = description
    try:
        module_path = sys.modules[cls.__module__].__file__
    except AttributeError:
        from sys import executable
        module_path = executable
    module_file = os.path.splitext(os.path.abspath(module_path))[0]
    cls._svc_reg_class_ = '%s.%s' % (module_file, cls.__name__)
</code></pre>
"
263457,20670,2008-11-04T21:06:36Z,33,Merging/adding lists in Python,"<p>I'm pretty sure there should be a more Pythonic way of doing this - but I can't think of one: How can I merge a two-dimensional list into a one-dimensional list? Sort of like zip/map but with more than two iterators.</p>

<p>Example - I have the following list:</p>

<pre><code>array = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]
</code></pre>

<p>I want to have</p>

<pre><code>result = [12, 15, 18] # [1+4+7, 2+5+8, 3+6+9]
</code></pre>

<p>So far what I've come up with is:</p>

<pre><code>def add_list(array):
    number_items = len(array[0])
    result = [0] * number_items
    for index in range(number_items):
        for line in array:
            result[index] += line[index]
    return result
</code></pre>

<p>But that doesn't look very elegant/Pythonic to me. Aside from not checking if all the ""lines"" in the 2D array are of the same length, can be added to each other, etc. What would be a better way to do it?</p>
"
263550,28149,2008-11-04T21:39:36Z,4,"We have a graphical designer, now they want a text based designer. Suggestions?","<p>I'm sorry I could not think of a better title.</p>

<p>The problem is the following:</p>

<p>For our customer we have created (as part of a larger application) a
graphical designer which they can use to build ""scenario's"".</p>

<p>These scenario's consist of ""Composites"" which in turn consist
of ""Commands"". These command objects all derive from CommandBase and
implement an interface called ICompilable.</p>

<p>The scenario class also implements ICompilable. When Compile() is called
on a command an array of bytes is returned which can then be send to the device
for which they are intended (can't disclose to much info about that hardware, sorry)</p>

<p>Just to give you an idea:</p>

<pre><code>var scenario = new Scenario();

scenario.Add(new DelayCommand(1));
scenario.Add(new CountWithValueCommand(1,ActionEnum.Add,1));
scenario.Add(new DirectPowerCommand(23,false,150));
scenario.Add(new WaitCommand(3));
scenario.Add(new DirectPowerCommand(23,false,150));
scenario.Add(new SkipIfCommand(1,OperatorEnum.SmallerThan,10));
scenario.Add(new JumpCommand(2));

byte[] compiledData = scenario.Compile();
</code></pre>

<p>The graphical designer abstracts all this from the user and allows
him (or her) to simply drag en drop composites onto the designer surface.
(Composites can group commands so we can provide building blocks for returning tasks)</p>

<p>Recently our customer came to us and said, ""well the designer is really cool,
but we have some people who would rather have some kind of programming language,
just something simple.""</p>

<p>(Simple to them of course)</p>

<p>I would very much like to provide them with a simple language,
that can call various commmands and also replace SkipIfCommand with
a nicer structure, etc...</p>

<p>I have no idea where to start or what my options are (without breaking what we have)</p>

<p>I have heard about people embedding languages such as Python,
people writing their own language an parsers, etc...</p>

<p>Any suggestions?</p>

<p>PS: Users only work with composites, never with commands.
    Composites are loaded dynamically at runtime (along with their graphical designer)
    and may be provided by third parties in seperate assemblies.</p>
"
263623,34443,2008-11-04T21:58:29Z,14,"What is a Ruby equivalent for Python's ""zip"" builtin?","<p>Is there any Ruby equivalent for Python's builtin <code>zip</code> function? If not, what is a concise way of doing the same thing?</p>

<p>A bit of context: this came up when I was trying to find a clean way of doing a check involving two arrays. If I had <code>zip</code>, I could have written something like:</p>

<pre><code>zip(a, b).all? {|pair| pair[0] === pair[1]}
</code></pre>

<p>I'd also accept a clean way of doing this without anything resembling <code>zip</code> (where ""clean"" means ""without an explicit loop"").</p>
"
263773,32933,2008-11-04T22:47:39Z,7,How can I ask for root password but perform the action at a later time?,"<p>I have a python script that I would like to add a ""Shutdown when done"" feature to.</p>

<p>I know I can use gksudo (when the user clicks on ""shutdown when done"") to ask the user for root privileges but how can I use those privileges at a later time (when the script is actually finished).</p>

<p>I have thought about chmod u+s on the shutdown command so I don't need a password but I really don't want to do that.</p>

<p>Any ideas how I can achieve this?</p>

<p>Thanks in advance,
Ashy.</p>
"
263820,20003,2008-11-04T23:08:03Z,1,launching vs2008 build from python,"<p>The first batch file launches a command prompt, i need the second command to be in the ccontext of the first.  how can I do this in python?</p>

<p>As is, it launches the batch, and blocks until the batch (with its command prompt context) terminates, and then executes <code>devenv</code> without the necessary context.</p>

<pre><code>os.system(r'%comspec% /k """"C:\Program Files\Microsoft Visual Studio 9.0\VC\vcvarsall.bat"""" x86')
os.system(r'devenv asdf.sln /rebuild Debug /Out last-build.txt')
</code></pre>

<p>think of it as in i'm in bash, and i need to execute a command in a perl context, so i type <code>perl -c 'asdf'</code>.  executing perl and asdf back to back won't work, i need to get the <code>devenv</code> inside of the perl context.</p>
"
264128,14260,2008-11-05T01:33:50Z,3,Access Ruby objects with Python via XML-RPC?,"<p>I am trying to export a Ruby framework via XML-RPC. However I am having some problems when trying to call a method from a class not directly added as a handler to the XML-RPC server. Please see my example below:</p>

<p>I have a test Ruby XML-RPC server as follows:</p>

<pre><code>require ""xmlrpc/server""

class ExampleBar
  def bar()
    return ""hello world!""
  end
end

class ExampleFoo
  def foo()
    return ExampleBar.new
  end

  def test()
    return ""test!""
  end
end

s = XMLRPC::Server.new( 9090 )

s.add_introspection

s.add_handler( ""example"", ExampleFoo.new )

s.serve
</code></pre>

<p>And I have a test Python XML-RPC Client as follows:</p>

<pre><code>import xmlrpclib

s = xmlrpclib.Server( ""http://127.0.0.1:9090/"" )

print s.example.foo().bar()
</code></pre>

<p>I would expect the python client to print ""hello world!"" as it is the equivalent of the following ruby code:</p>

<pre><code>example = ExampleFoo.new
puts example.foo().bar()
</code></pre>

<p>However it generates an error: ""xmlrpclib.ProtocolError: &lt;ProtocolError for 127.0.0.1:9090/: 500 Internal Server Error&gt;"".</p>

<p>print s.example.test() works fine.</p>

<p>I dont expect the new ExampleBar object to go over the wire but I would expect it to be 'cached' server side and the subsequent call to bar() to be honoured.</p>

<p>Can XML-RPC support this kind of usage or is it too basic?</p>

<p>So I guess my question really is; how can I get this working, if not with XML-RPC what with?</p>
"
264154,20683,2008-11-05T01:56:20Z,46,How to fetch more than 1000?,"<p>How can I fetch more than 1000 record from data store and put all in one single list to pass to django?</p>
"
264224,13871,2008-11-05T02:50:59Z,3,setting the gzip timestamp from Python,"<p>I'm interested in compressing data using Python's <code>gzip</code> module.  It happens that I want the compressed output to be deterministic, because that's often a really convenient property for things to have in general -- if some non-gzip-aware process is going to be looking for changes in the output, say, or if the output is going to be cryptographically signed.</p>

<p>Unfortunately, the output is different every time.  As far as I can tell, the only reason for this is the timestamp field in the gzip header, which the Python module always populates with the current time.  I don't think you're actually allowed to have a gzip stream without a timestamp in it, which is too bad.</p>

<p>In any case, there doesn't seem to be a way for the caller of Python's <code>gzip</code> module to supply the correct modification time of the underlying data.  (The actual <code>gzip</code> program seems to use the timestamp of the input file when possible.)  I imagine this is because basically the only thing that ever cares about the timestamp is the <code>gunzip</code> command when writing to a file -- and, now, me, because I want deterministic output.  Is that so much to ask?</p>

<p>Has anyone else encountered this problem?</p>

<p>What's the least terrible way to <code>gzip</code> some data with an arbitrary timestamp from Python?</p>
"
264540,21537,2008-11-05T07:17:32Z,2,using jython and open office 2.4 to convert docs to pdf,"<p>I completed a python script using pyuno which successfully converted a document/ xls / rtf etc to a pdf.
Then I needed to update a mssql database, due to open office currently supporting python 2.3, it's ancientness, lacks support for decent database libs. So I have resorted to using Jython, this way im not burdened down by running inside OO python environment using an old pyuno.</p>

<p>This also means that my conversion code is broken, and I need to now make use of the java libraries instead of the pyuno libs.</p>

<blockquote>
  <p>import com.sun.star.beans.PropertyValue as PropertyValue<br />
  import com.sun.star.bridge.XUnoUrlResolver as XUnoUrlResolver<br />
  import com.sun.star.comp.helper.Bootstrap as Bootstrap<br />
  ->> import com.sun.star.frame.XComponentLoader as XComponentLoader<br />
  ->> import com.sun.star.frame.XStorable as XStorable<br />
  import com.sun.star.lang.XMultiComponentFactory as XMultiComponentFactory<br />
  import com.sun.star.uno.UnoRuntime as UnoRuntime<br />
  import com.sun.star.uno.XComponentContext as XComponentContext  </p>
</blockquote>

<p>The includes with the '->>' do not import the compiler does not recognise the com.sun.star.frame cant see the 'frame' bit. These are the libs I have included.</p>

<p><img src=""http://www.freeimagehosting.net/uploads/eda5cda76d.jpg"" alt=""alt text"" /></p>

<p>Some advice on this matter would be well received</p>

<blockquote>
  <p>context = XComponentContext<br />
  xMultiCompFactory = XMultiComponentFactory<br />
  xcomponentloader = XComponentLoader  </p>
  
  <p>//used in python<br />
  ctx = None<br />
  smgr = None<br />
  doc = None<br />
  url = None  </p>
  
  <p>context = Bootstrap.bootstrap()<br />
  xMultiCompFactory = self.context.getServiceManager()<br />
  xcomponentloader = UnoRuntime.queryInterface(XComponentLoader.class,  ....xMultiCompFactory.createInstanceWithContext(""com.sun.star.frame.Desktop"", context))  </p>
  
  <p>file = ""file:\\"" + file<br />
  // also what is the equivalent of url = uno.systemPathToFileUrl(file) in Java so that I can make use of it to nicely format my path<br />
  properties = []<br />
  p = PropertyValue()<br />
  p.Name = ""Hidden""<br />
  p.Value = True<br />
  properties.append(p)<br />
  properties = tuple(properties)<br />
  doc = xcomponentloader.loadComponentFromURL(file, ""_blank"",0, properties)  </p>
</blockquote>
"
264575,338360,2008-11-05T07:54:08Z,5,Python - one variable equals another variable when it shouldn't,"<p>Here is my sample code. It is meant to be an iterative procedure for gauss seidel (matrix solver). Essentially when the error is small enough it breaks out of the while loop.</p>

<pre><code>i=1
while (i&gt;0):
    x_past = x_present

    j=0
    while(j&lt;3):
        value=0
        k=0
        while(k&lt;3):
            if(k!=j):
                if(i==1):
                    if(k&gt;j):
                        value=value+0
                    else:
                        value=value+x_present[k]*eqn[j][k]    
                else:
                    value=value+x_present[k]*eqn[j][k]
            else:
                value=value+eqn[j][k]
            k=k+1
        x_present[j:j+1]=[value]
        j=j+1
    print ""X_PAST""
    print x_past
    print ""X_PRESENT""
    print x_present    
    if(error(x_past, x_present)&lt;10**-2):
        break;
    i=i+1
</code></pre>

<p>I've reduced the code so its more manageable. if you don't understand what its doing its not really that important to solving this problem.</p>

<p>Here is the issue. Everytime </p>

<pre><code>x_present[j:j+1]=[value]
</code></pre>

<p>is run, x_past is made equal to x_present. I don't know why this is the case as the only place i have set x_past equal to x_present is at the top of the loop. If I take away the </p>

<pre><code>x_past=x_present
</code></pre>

<p>sentence, x_past is never made equal to x_present. This leads me to think it is some combination of the two statements that is causing the issue.</p>

<p>This is a big problem cause if x_past = x_present the error = 0 every time and the loop breaks after the first iteration. The code does work, for example if I tell the code to run for 8 iterations and the break it gives me the answer its supposed to.</p>

<p>I've been trying to figure this out for the last 4 hours and am completely stumped. I haven't been working with python long, so my trouble shooting skills syntax wise aren't that great. Any help would be appreciated!!</p>
"
265687,18770,2008-11-05T16:23:48Z,70,Why the Global Interpreter Lock?,"<p>What is exactly the function of Python's Global Interpreter Lock?
Do other languages that are compiled to bytecode employ a similar mechanism?</p>
"
265720,16148,2008-11-05T16:30:22Z,2,HTTP Request Timeout,"<p>In Python 2.6, a new ""timeout"" parameter was added to the httplib.HTTPConnection class:
<a href=""http://docs.python.org/library/httplib.html#httplib.HTTPConnection"" rel=""nofollow"">http://docs.python.org/library/httplib.html#httplib.HTTPConnection</a></p>

<p>However, this is only a timeout for the connection to a server.  I am looking to set a timeout value for the <b>request</b>, not the connection.  This doesn't seem to be supported by httplib.</p>

<p>Is there any way to emulate this behavior?</p>
"
265814,34395,2008-11-05T16:47:56Z,0,How do I process a string such as this using regular expressions?,"<p>How can I create a regex for a string such as this:</p>

<pre><code>&lt;SERVER&gt; &lt;SERVERKEY&gt; &lt;COMMAND&gt; &lt;FOLDERPATH&gt; &lt;RETENTION&gt; &lt;TRANSFERMODE&gt; &lt;OUTPUTPATH&gt; &lt;LOGTO&gt; &lt;OPTIONAL-MAXSIZE&gt; &lt;OPTIONAL-OFFSET&gt;
</code></pre>

<p>Most of these fields are just simple words, but some of them can be paths, such as FOLDERPATH, OUTPUTPATH, these paths can also be paths with a filename and wildcard appended.</p>

<p>Retention is a number, and transfer mode can be bin or ascii. The issue is, LOGTO which can be a path with the logfile name appended to it or can be NO, which means no log file.</p>

<p>The main issue, is the optional arguments, they are both numbers, and OFFSET can't exist without MAXSIZE, but MAXSIZE can exist without offset.</p>

<p>Heres some examples:</p>

<pre><code>loveserver love copy /muffin* 20 bin C:\Puppies\ NO 256 300
loveserver love copy /muffin* 20 bin C:\Puppies\ NO 256
loveserver love copy /hats* 300 ascii C:\Puppies\no\ C:\log\love.log 256
</code></pre>

<p>Now the main issue, is that paths can have spaces in them, so if I use . to match everything, the regex ends up breaking, when parsing the optional arguments where the LOG destination ends up getting attached to the outputpath.</p>

<p>Also if I end up using . and start removing parts of it, the regex will start putting things where it shouldn't.</p>

<p>Heres my regex:</p>

<pre><code>^(\s+)?(?P&lt;SRCHOST&gt;.+)(\s+)(?P&lt;SRCKEY&gt;.+)(\s+)(?P&lt;COMMAND&gt;COPY)(\s+)(?P&lt;SRCDIR&gt;.+)(\s+)(?P&lt;RETENTION&gt;\d+)(\s+)(?P&lt;TRANSFER_MODE&gt;BIN|ASC|BINARY|ASCII)(\s+)(?P&lt;DSTDIR&gt;.+)(\s+)(?P&lt;LOGFILE&gt;.+)(\s+)?(?P&lt;SIZE&gt;\d+)?(\s+)?(?P&lt;OFFSET&gt;\d+)?$
</code></pre>
"
265888,34759,2008-11-05T17:10:57Z,1,"Django Forms, Display Error on ModelMultipleChoiceField","<p>I'm having an issue getting validation error messages to display for a particular field in a Django form, where the field in question is a <strong>ModelMultipleChoiceField</strong>.</p>

<p>In the <code>clean(self)</code> method for the Form, I try to add the error message to the field like so:</p>

<pre><code>msg = 'error'
self._errors['field_name'] = ErrorList([msg])
raise forms.ValidationError(msg)
</code></pre>

<p>This works okay where 'field_name' points to other field types, but for ModelMultipleChoiceField it just won't display. Should this be handled differently?</p>
"
265960,1512,2008-11-05T17:30:32Z,282,Best way to strip punctuation from a string in Python,"<p>It seems like there should be a simpler way than:</p>

<pre><code>import string
s = ""string. With. Punctuation?"" # Sample string 
out = s.translate(string.maketrans("""",""""), string.punctuation)
</code></pre>

<p>Is there?</p>
"
266114,NA,2008-11-05T18:19:44Z,2,Setting up a Python web development environment on OS X,"<p>I'm running <a href=""http://en.wikipedia.org/wiki/Mac_OS_X_Leopard"" rel=""nofollow"">Mac&nbsp;OS&nbsp;X Leopard</a> and wanted to know what the easy way to setup a web development environment to use Python, MySQL, Apache on my machine which would allow me to develop on my Mac and then easily move it to a host in the future.</p>

<p>I've been trying to get mod_wsgi installed and configured to work with Django and have a headache now. Are there any web hosts that currently use mod_wsgi besides Google, so I could just develop there?</p>
"
266648,26763,2008-11-05T21:00:36Z,15,Python: Check if uploaded file is jpg,"<p>How can I check if a file uploaded by a user is a real jpg file in Python (Google App Engine)?</p>

<p>This is how far I got by now:</p>

<p>Script receives image via HTML Form Post and is processed by the following code</p>

<pre><code>...
incomming_image = self.request.get(""img"")
image = db.Blob(incomming_image)
...
</code></pre>

<p>I found mimetypes.guess_type, but it does not work for me.</p>
"
266849,9941,2008-11-05T21:50:04Z,3,Using Python's smtplib with Tor,"<p>I'm conducting experiments regarding e-mail spam. One of these experiments require sending mail thru Tor. Since I'm using Python and smtplib for my experiments, I'm looking for a way to use the Tor proxy (or other method) to perform that mail sending.
Ideas how this can be done?</p>
"
267436,2168,2008-11-06T01:55:40Z,20,How do I treat an ASCII string as unicode and unescape the escaped characters in it in python?,"<p>For example, if I have a <em>unicode</em> string, I can encode it as an <em>ASCII</em> string like so:</p>

<pre><code>&gt;&gt;&gt; u'\u003cfoo/\u003e'.encode('ascii')
'&lt;foo/&gt;'
</code></pre>

<p>However, I have e.g. this <em>ASCII</em> string:</p>

<pre><code>'\u003foo\u003e'
</code></pre>

<p>... that I want to turn into the same <em>ASCII</em> string as in my first example above:</p>

<pre><code>'&lt;foo/&gt;'
</code></pre>
"
267628,8482,2008-11-06T04:19:54Z,9,scripting fruityloops or propellerheads reason from VB or Python?,"<p>I have both Fruityloops and Propellerheads Reason software synths on my Windows PC.</p>

<p>Any way I can get at and script these from either Visual Basic or Python? Or at least send Midi messages to the synths from code?</p>

<p>Update : attempts to use something like a ""midi-mapper"" (thanks for link MusiGenesis) don't seem to work. I don't think Reason or FL Studio act like standard GM Midi synths.</p>

<p>Update 2 : If you're interested in this question, <a href=""http://stackoverflow.com/questions/427037/scripting-lmms-from-python"">check out this too</a>.</p>
"
267660,3045,2008-11-06T04:44:47Z,1,How to create a picture with animated aspects programmatically,"<p>Background</p>

<p>I have been asked by a client to create a picture of the world which has animated arrows/rays that come from one part of the world to another.   </p>

<p>The rays will be randomized, will represent a transaction, will fade out after they happen and will increase in frequency as time goes on.  The rays will start in one country's boundary and end in another's.  As each animated transaction happens a continuously updating sum of the amounts of all the transactions will be shown at the bottom of the image. The amounts of the individual transactions will be randomized.  There will also be a year showing on the image that will increment every n seconds.</p>

<p>The randomization, summation and incrementing are not a problem for me, but I am at a loss as to how to approach the animation of the arrows/rays.</p>

<p><strong>My question is what is the best way to do this?  What frameworks/libraries are best suited for this job?</strong></p>

<p>I am most fluent in python so python suggestions are most easy for me, but I am open to any elegant way to do this.
The client will present this as a slide in a presentation in a windows machine.</p>
"
267861,3497,2008-11-06T07:33:11Z,7,How to add an automatic filter to a relation with SQLAlchemy?,"<p>I'm using SQLAlchemy 0.5rc, and I'd like to add an automatic filter to a relation, so that every time it tries to fetch records for that relation, it ignores the ""remote"" ones if they're flagged as ""logically_deleted"" (a boolean field of the child table)</p>

<p>For example, if an object ""parent"" has a ""children"" relation that has
3 records, but one of them is logically deleted, when I query for ""Parent"" I'd like SQLA to
fetch the parent object with just two children..<br />
How should I do it? By adding an ""and"" condition to the primaryjoin
parameter of the relation? (e.g. ""<code>Children.parent_id == Parent.id and Children.logically_deleted == False</code>"", but is it correct to write ""and"" in this way?)</p>

<p><strong>Edit:</strong><br />
I managed to do it in this way</p>

<pre><code>children = relation(""Children"", primaryjoin=and_(id == Children.parent_id, Children.logically_deleted==False))
</code></pre>

<p>but is there a way to use a string as primaryjoin instead?</p>
"
267977,NA,2008-11-06T08:50:09Z,2,Python distutils and replacing strings in code,"<p>I often find a need to put paths in my code in order to find data or in some cases tool-specific modules.  I've so far always used autotools because of this--it's just so easy to call sed to replace a few strings at build time.  However, I'd like to find a more Pythonic way of doing this, i.e. use distutils or some other blessed way of building/installing.  I've never managed to find anything relating to this in distutils documentation though so how do other people solve this problem?</p>
"
268015,563932,2008-11-06T09:11:07Z,3,apache user can not write to .python-eggs,"<p>I have read that I need to set the <code>PYTHON_EGG_CACHE</code> environment variable, or install the python library as an uncompressed .egg</p>

<p>Which do you suggest?</p>
"
268025,563932,2008-11-06T09:15:21Z,4,Install MySQLdb (for python) as non-compressed egg,"<p>The install instructions are:</p>

<pre><code>$ python setup.py build
$ sudo python setup.py install # or su first
</code></pre>

<p>This gives me an .egg file. How do I tell the install to dump the files as a normal, uncompressed library?</p>

<p>Thanks!</p>
"
268089,35009,2008-11-06T09:39:20Z,9,Multiple database support in django,"<p>From some forum I came to know that Multiple database support is added in Django at lower level, but the higher level apis are not added yet.</p>

<p>Can anyone please tell me how one can achieve multiple database connections in Django.</p>

<p>Does anyone have any idea by when Django will fully/officially support Multiple database connections.</p>
"
268272,34598,2008-11-06T10:49:58Z,302,Getting key with maximum value in dictionary?,"<p>I have a <code>dictionary</code>: keys are strings, values are integers.</p>

<p>Example: </p>

<pre><code>stats = {'a':1000, 'b':3000, 'c': 100}
</code></pre>

<p>I'd like to get <code>'b'</code> as an answer, since it's the key with a higher value.</p>

<p>I did the following, using an intermediate list with reversed key-value tuples:</p>

<pre><code>inverse = [(value, key) for key, value in stats.items()]
print max(inverse)[1]
</code></pre>

<p>Is that one the better (or even more elegant) approach?</p>
"
268629,2260,2008-11-06T13:10:54Z,22,How to stop BaseHTTPServer.serve_forever() in a BaseHTTPRequestHandler subclass?,"<p>I am running my <code>HTTPServer</code> in a separate thread (using the threading module which has no way to stop threads...) and want to stop serving requests when the main thread also shuts down.</p>

<p>The Python documentation states that <code>BaseHTTPServer.HTTPServer</code> is a subclass of <code>SocketServer.TCPServer</code>, which supports a <code>shutdown</code> method, but it is missing in <code>HTTPServer</code>.</p>

<p>The whole <code>BaseHTTPServer</code> module has very little documentation :(</p>
"
268891,35100,2008-11-06T14:36:01Z,3,Replacing multiple occurrences in nested arrays,"<p>I've got this python dictionary ""mydict"", containing arrays, here's what it looks like :</p>

<pre><code>mydict = dict(
    one=['foo', 'bar', 'foobar', 'barfoo', 'example'], 
    two=['bar', 'example', 'foobar'], 
    three=['foo', 'example'])
</code></pre>

<p>i'd like to replace all the occurrences of ""example"" by ""someotherword"". </p>

<p>While I can already think of a few ways to do it, is there a most ""pythonic"" method to achieve this ?</p>
"
268930,735,2008-11-06T14:45:37Z,3,How can you emulate a mailing list in Django?,"<p>I'm on a project which is trying to write what amounts to a Mailing List app in Django, and we're running into a couple of problems/questions.</p>

<p>The code we have so far doesn't set various List headers, and re-sets the To header to be the person we're sending it to, instead of the list address.</p>

<p>Now, we can work our way through all these fiddly little details, but I was wondering if anyone had any code which already did this sort of thing that we could crib from, so that we don't have to go through all the trial-and-error ourselves.  Specific sections of RFCs that showed us what we should be sending would also be useful.</p>

<p>Thanks,<br/>
Blake.</p>
"
269060,5222,2008-11-06T15:18:20Z,14,Is there a Python library function which attempts to guess the character-encoding of some bytes?,"<p>I'm writing some mail-processing software in Python that is encountering strange bytes in header fields.  I suspect this is just malformed mail; the message itself claims to be us-ascii, so I don't think there is a true encoding, but I'd like to get out a unicode string approximating the original one without throwing a <code>UnicodeDecodeError </code>.</p>

<p>So, I'm looking for a function that takes a <code>str</code> and optionally some hints and does its darndest to give me back a <code>unicode</code>.  I could write one of course, but if such a function exists its author has probably thought a bit deeper about the best way to go about this.</p>

<p>I also know that Python's design prefers explicit to implicit and that the standard library is designed to avoid implicit magic in decoding text. I just want to explicitly say ""go ahead and guess"".</p>
"
269292,30089,2008-11-06T16:19:58Z,3,What mime-type should I return for a python string,"<p>I have a web API that returns python dictionaries or lists as a response that I eval() in python scripts that use the API, for completness I wanted to set a proper content-type but not sure what would be best to use ""text/x-python"" or maybe ""application/python"", or something else? </p>

<p>[edit] I'm also outputting JSON, I'm doing Python as an option mainly for internal use.[/edit]</p>
"
269676,13009,2008-11-06T18:06:13Z,8,How can I Cause a Deadlock in MySQL for Testing Purposes,"<p>I want to make my Python library working with MySQLdb be able to detect deadlocks and try again.  I believe I've coded a good solution, and now I want to test it.</p>

<p>Any ideas for the simplest queries I could run using MySQLdb to create a deadlock condition would be?</p>

<p>system info:</p>

<ul>
<li>MySQL 5.0.19 </li>
<li>Client 5.1.11 </li>
<li>Windows XP</li>
<li>Python 2.4 / MySQLdb 1.2.1 p2</li>
</ul>
"
269713,13668,2008-11-06T18:14:45Z,6,"Using Python to authenticate against raw username, hash, salt in DB created by ASP.NET roles/membership","<p>We have a current application where user login credentials are stored in a SQL Server DB.  These are, basically, stored as a plain text username, a password hash, and an associated salt for this hash.</p>

<p>These were all created by built in functions in ASP.NET's membership/role system.  Here's a row for a user named 'joe' and a password of 'password':</p>

<blockquote>
  <p>joe,kDP0Py2QwEdJYtUX9cJABg==,OJF6H4KdxFLgLu+oTDNFodCEfMA=</p>
</blockquote>

<p>I've dumped this stuff into a CSV file and I'm attempting to get it into a usable format for Django which stores its passwords in this format:</p>

<p>[algo]$[salt]$[hash]</p>

<p>Where the salt is a plain string and the hash is the hex digest of an SHA1 hash.</p>

<p>So far I've been able to ascertain that ASP is storing these hashes and salts in a base64 format.  Those values above decode into binary strings.</p>

<p>We've used reflector to glean how ASP authenticates against these values:</p>

<pre><code>internal string EncodePassword(string pass, int passwordFormat, string salt)
{
    if (passwordFormat == 0)
    {
        return pass;
    }
    byte[] bytes = Encoding.Unicode.GetBytes(pass);
    byte[] src = Convert.FromBase64String(salt);
    byte[] dst = new byte[src.Length + bytes.Length];
    byte[] inArray = null;
    Buffer.BlockCopy(src, 0, dst, 0, src.Length);
    Buffer.BlockCopy(bytes, 0, dst, src.Length, bytes.Length);
    if (passwordFormat == 1)
    {
        HashAlgorithm algorithm = HashAlgorithm.Create(Membership.HashAlgorithmType);
        if ((algorithm == null) &amp;&amp; Membership.IsHashAlgorithmFromMembershipConfig)
        {
            RuntimeConfig.GetAppConfig().Membership.ThrowHashAlgorithmException();
        }
        inArray = algorithm.ComputeHash(dst);
    }
    else
    {
        inArray = this.EncryptPassword(dst);
    }
    return Convert.ToBase64String(inArray);
}
</code></pre>

<p>Eseentially, pulls in the salt from the DB and b64 decodes it into a binary representation.  It does a ""GetBytes"" on the raw password and then it concatinates them, salt first.</p>

<p>It then runs the SHA1 algorithm on this new string, base64 encodes it, and compares it against the value stored in the database.</p>

<p>I've attempted to write some code to try and reproduce these hashes in Python and I'm failing.  I won't be able to use them in Django until I can figure out how this translates over.  Here's how I'm testing:</p>

<pre><code>import hashlib
from base64 import b64decode, b64encode

b64salt = ""kDP0Py2QwEdJYtUX9cJABg==""
b64hash = ""OJF6H4KdxFLgLu+oTDNFodCEfMA=""
binsalt = b64decode(b64salt)
password_string = 'password'

m1 = hashlib.sha1()
# Pass in salt
m1.update(binsalt)
# Pass in password
m1.update(password_string)
# B64 encode the binary digest
if b64encode(m1.digest()) == b64hash:
    print ""Logged in!""
else:
    print ""Didn't match""
    print b64hash
    print b64encode(m1.digest())
</code></pre>

<p>I'm wondering if anyone can see any flaws in my approach or can suggest an alternate method.  Perhaps you can take the algorithms above and the known password and salt above and produce the hash on your system?</p>
"
269795,4766,2008-11-06T18:36:52Z,261,How do I find the location of Python module sources?,"<p>How do I learn where the source file for a given Python module is installed? Is the method different on Windows than on Linux?</p>

<p>I'm trying to look for the source of the <code>datetime</code> module in particular, but I'm interested in a more general answer as well.</p>
"
269918,3594,2008-11-06T19:16:12Z,3,C++ string diff (a la Python's difflib),"<p>I'm trying to diff two strings to determine whether or not they solely vary in one numerical subset of the string structure; for example,</p>

<pre><code>varies_in_single_number_field('foo7bar', 'foo123bar')
# Returns True, because 7 != 123, and there's only one varying
# number region between the two strings.
</code></pre>

<p>In Python I can use the <code>difflib</code> to accomplish this:</p>

<pre><code>import difflib, doctest

def varies_in_single_number_field(str1, str2):
    """"""
    A typical use case is as follows:
        &gt;&gt;&gt; varies_in_single_number_field('foo7bar00', 'foo123bar00')
        True

    Numerical variation in two dimensions is no good:
        &gt;&gt;&gt; varies_in_single_number_field('foo7bar00', 'foo123bar01')
        False

    Varying in a nonexistent field is okay:
        &gt;&gt;&gt; varies_in_single_number_field('foobar00', 'foo123bar00')
        True

    Identical strings don't *vary* in any number field:
        &gt;&gt;&gt; varies_in_single_number_field('foobar00', 'foobar00')
        False
    """"""
    in_differing_substring = False
    passed_differing_substring = False # There should be only one.
    differ = difflib.Differ()
    for letter_diff in differ.compare(str1, str2):
        letter = letter_diff[2:]
        if letter_diff.startswith(('-', '+')):
            if passed_differing_substring: # Already saw a varying field.
                return False
            in_differing_substring = True
            if not letter.isdigit(): return False # Non-digit diff character.
        elif in_differing_substring: # Diff character not found - end of diff.
            in_differing_substring = False
            passed_differing_substring = True
    return passed_differing_substring # No variation if no diff was passed.

if __name__ == '__main__': doctest.testmod()
</code></pre>

<p>But I have no idea how to find something like <code>difflib</code> for C++. Alternative approaches welcome. :)</p>
"
270648,16363,2008-11-06T22:49:44Z,14,Tkinter: invoke event in main loop,"<p>How do you invoke a tkinter <code>event</code> from a separate object?  </p>

<p>I'm looking for something like wxWidgets <code>wx.CallAfter</code>.  For example, If I create an object, and pass to it my <code>Tk</code> root instance, and then try to call a method of that root window from my object, my app locks up.</p>

<p>The best I can come up with is to use the the <code>after</code> method and check the status from my separate object, but that seems wasteful.</p>
"
270745,35305,2008-11-06T23:20:28Z,24,How do I determine all of my IP addresses when I have multiple NICs?,"<p>I have multiple Network Interface Cards on my computer, each with its own IP address.</p>

<p>When I use <code>gethostbyname(gethostname())</code> from Python's (built-in) <code>socket</code> module, it will only return one of them.  How do I get the others?</p>
"
270879,15154,2008-11-07T00:24:04Z,62,Efficiently updating database using SQLAlchemy ORM,"<p>I'm starting a new application and looking at using an ORM -- in particular, SQLAlchemy.</p>

<p>Say I've got a column 'foo' in my database and I want to increment it.  In straight sqlite, this is easy:</p>

<pre><code>db = sqlite3.connect('mydata.sqlitedb')
cur = db.cursor()
cur.execute('update table stuff set foo = foo + 1')
</code></pre>

<p>I figured out the SQLAlchemy SQL-builder equivalent:</p>

<pre><code>engine = sqlalchemy.create_engine('sqlite:///mydata.sqlitedb')
md = sqlalchemy.MetaData(engine)
table = sqlalchemy.Table('stuff', md, autoload=True)
upd = table.update(values={table.c.foo:table.c.foo+1})
engine.execute(upd)
</code></pre>

<p>This is slightly slower, but there's not much in it.</p>

<p>Here's my best guess for a SQLAlchemy ORM approach:</p>

<pre><code># snip definition of Stuff class made using declarative_base
# snip creation of session object
for c in session.query(Stuff):
    c.foo = c.foo + 1
session.flush()
session.commit()
</code></pre>

<p>This does the right thing, but it takes just under fifty times as long as the other two approaches.  I presume that's because it has to bring all the data into memory before it can work with it.</p>

<p>Is there any way to generate the efficient SQL using SQLAlchemy's ORM?  Or using any other python ORM?  Or should I just go back to writing the SQL by hand?</p>
"
270983,24718,2008-11-07T01:29:14Z,4,How can I apply authenticated proxy exceptions to an opener using urllib2?,"<p>When using urllib2 (and maybe urllib) on windows python seems to magically pick up the authenticated proxy setting applied to InternetExplorer.  However, it doesn't seem to check and process the Advance setting ""Exceptions"" list.</p>

<p>Is there a way I can get it to process the exceptions list?  Or, ignore the IE proxy setting and apply my own proxy opener to address this issue?</p>

<p>I played with creating a proxy opener before, but couldn't get it to work.  Here's what I managed to dig out, but I still don't see how/where to apply any exceptions and I'm not even sure if this is right:</p>

<pre><code>proxy_info = {
                      'host':'myproxy.com',
                      'user':Username,
                      'pass':Password,
                      'port':1080
                      }                                                   

http_str = ""http://%(user)s:%(pass)s@%(host)s:%(port)d"" % proxy_info

authInfo = urllib2.HTTPBasicAuthHandler()
authInfo.add_password()
proxy_dict = {'http':http_str}
proxyHandler = urllib2.ProxyHandler(proxy_dict)

# apply the handler to an opener
proxy_opener = urllib2.build_opener(proxyHandler, urllib2.HTTPHandler)

urllib2.install_opener(proxy_opener)
</code></pre>
"
271077,21245,2008-11-07T02:40:20Z,41,Django - How to do tuple unpacking in a template 'for' loop,"<p>In my views.py, I'm building a list of two-tuples, where the second item in the tuple is another list, like this:</p>

<pre><code>[ Product_Type_1, [ product_1, product_2 ],
  Product_Type_2, [ product_3, product_4 ]]
</code></pre>

<p>In plain old Python, I could iteration the list like this:</p>

<pre><code>for product_type, products in list:
    print product_type
    for product in products:
        print product
</code></pre>

<p>I can't seem to do the same thing in my Django template:</p>

<pre><code>{% for product_type, products in product_list %}
    print product_type
    {% for product in products %}
        print product
    {% endfor %}
{% endfor %}
</code></pre>

<p>I get this error from Django:</p>

<p><strong>Caught an exception while rendering: zip argument #2 must support iteration</strong></p>

<p>Of course, there is some HTML markup in the template, not print statements. Is tuple unpacking not supported in the Django template language? Or am I going about this the wrong way? All I am trying to do is display a simple hierarchy of objects - there are several product types, each with several products (in models.py, Product has a foreign key to Product_type, a simple one-to-many relationship).</p>

<p>Obviously, I am quite new to Django, so any input would be appreciated.</p>
"
271244,19212,2008-11-07T04:27:14Z,7,How does one add default (hidden) values to form templates in Django?,"<p>Given a Django.db models class:</p>

<pre><code>class P(models.Model):
   type = models.ForeignKey(Type) # Type is another models.Model class
   name = models.CharField()
</code></pre>

<p>where one wishes to create a new P with a specified type, i.e. how does one make ""type"" to be a default, hidden field (from the user), where type is given likeso:</p>

<pre><code>http://x.y/P/new?type=3
</code></pre>

<p>So that in the form no ""type"" field will appear, but when the P is saved, its type will have id 3 (i.e. Type.objects.get(pk=3)).</p>

<p>Secondarily, how does one (&amp; is it possible) specify a ""default"" type in the url, via urls.py, when using generic Django views, viz.</p>

<pre><code>urlpatterns = ('django.generic.views.create_update',
  url(r'^/new$', 'create_object', { 'model': P }, name='new_P'),
)
</code></pre>

<p>I found that terribly difficult to describe, which may be part of the problem. :) Input is much appreciated!</p>
"
271488,11522,2008-11-07T08:07:10Z,15,Linking languages,"<p>I asked <a href=""http://stackoverflow.com/questions/269417/which-language-should-i-use"">a question</a> earlier about which language to use for an AI prototype. The consensus seemed to be that if I want it to be fast, I need to use a language like Java or C++, but that Python / Perl / Ruby would be good for the interface bits. </p>

<p>So, this leads me on to another question. How easy is it to link these languages together? And which combination works best? So, if I wanted to have a Ruby CGI-type program calling C++ or Java AI functions, is that easy to do? Any pointers for where I look for information on doing that kind of thing? Or would a different combination be better?</p>

<p>My main experience with writing web applications started with C++ CGI and then moved on to Java servlets (about 10 years ago) and then after a long gap away from programming I did some PHP. But I've not had experience of writing a web application in a scripting language which then calls out to a compiled language for the speed-critical bits. So any advice will be welcome!</p>
"
271625,34598,2008-11-07T09:34:27Z,36,Interactive console using Pydev in Eclipse?,"<p>I'm debugging my Python code in Eclipse using the Pydev plugin. I'm able to open a Pydev console and it gives me two options: ""Console for currently active editor"" and ""Python console"". However none of them is useful to inspect current variable status after a breakpoint.</p>

<p>For example, the code stopped at a breakpoint and I want to inspect an ""action"" variable using the console. However my variables are not available. How can I do things like ""dir(action)"", etc? (even if it is not using a console).</p>
"
271657,21537,2008-11-07T09:54:34Z,6,how to tell if a string is base64 or not,"<p>I have many emails coming in from different sources.
they all have attachments, many of them have attachment names in chinese, so these
names are converted to base64 by their email clients.</p>

<p>When I receive these emails, I wish to decode the name. but there are other names which are
not base64. How can I differentiate whether a string is base64 or not, using the <strong>jython</strong> programming language?</p>

<p>Ie.  </p>

<p>First attachment:  </p>

<pre><code>------=_NextPart_000_0091_01C940CC.EF5AC860
Content-Type: application/vnd.ms-excel;
 name=""Copy of Book1.xls""
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
 filename=""Copy of Book1.xls""
</code></pre>

<p>second attachment:</p>

<pre><code>------=_NextPart_000_0091_01C940CC.EF5AC860
Content-Type: application/vnd.ms-excel;
 name=""=?gb2312?B?uLGxvmhlbrixsb5nLnhscw==?=""
Content-Transfer-Encoding: base64
Content-Disposition: attachment;
 filename=""=?gb2312?B?uLGxvmhlbrixsb5nLnhscw==?=""
</code></pre>

<p>Please note both ""<strong>Content-Transfer-Encoding</strong>"" have base64</p>
"
271825,912,2008-11-07T11:35:00Z,12,How should I stress test / load test a client server application?,"<p>I develop a client-server style, database based system and I need to devise a way to stress / load test the system.  Customers inevitably want to know such things as:</p>

<p>• How many clients can a server support?<br />
• How many concurrent searches can a server support?<br />
• How much data can we store in the database?<br />
• Etc.</p>

<p>Key to all these questions is response time.  We need to be able to measure how response time and performance degrades as new load is introduced so that we could for example, produce some kind of pretty graph we could throw at clients to give them an idea what kind of performance to expect with a given hardware configuration.</p>

<p>Right now we just put out fingers in the air and make educated guesses based on what we already know about the system from experience.  As the product is put under more demanding conditions, this is proving to be inadequate for our needs going forward though.</p>

<p>I've been given the task of devising a method to get such answers in a meaningful way.  I realise that this is not a question that anyone can answer definitively but I'm looking for suggestions about how people have gone about doing such work on their own systems.</p>

<p>One thing to note is that we have full access to our client API via the Python language (courtesy of SWIG) which is a lot easier to work with than C++ for this kind of work.</p>

<p>So there we go, I throw this to the floor: really interested to see what ideas you guys can come up with!</p>
"
271855,23695,2008-11-07T11:55:41Z,2,How to scan a webpage and get images and youtube embeds?,"<p>I am building a web app where I need to get all the images and any flash videos that are embedded (e.g. youtube) on a given URL. I'm using Python.</p>

<p>I've googled, but have not found any good information about this (probably because I don't know what this is called to search for), does anyone have any experience with this and knows how it can be done?</p>

<p>I'd love to see some code examples if there are any available. </p>

<p>Thanks!</p>
"
272042,319803,2008-11-07T13:21:04Z,2,User Authentication in Django,"<p>is there any way of making sure that, one user is logged in only once?</p>

<p>I would like to avoid two different persons logging into the system with the same login/password.</p>

<p>I guess I could do it myself by checking in the django_session table before logging in the user, but I rather prefer using the framework, if there is already such functionality.</p>

<p>Cheers,</p>

<p>Thanks for the responses!</p>
"
272188,30289,2008-11-07T14:19:49Z,25,Code Coverage and Unit Testing of Python Code,"<p>I have already visited <a href=""http://stackoverflow.com/questions/191673/preferred-python-unit-testing-framework"">Preferred Python unit-testing framework</a>. I am not just looking at Python Unit Testing Framework, but also code coverage with respect to unit tests. So far I have only come across <a href=""http://nedbatchelder.com/code/modules/coverage.html"">coverage.py</a>. Is there any better option?</p>

<p>An interesting option for me is to integrate <a href=""http://www.python.org/"">cpython</a>, unit testing of Python code and code coverage of Python code with Visual Studio 2008 through plugins (something similar to <a href=""http://www.codeplex.com/IronPythonStudio"">IronPython Studio</a>). What can be done to achieve this? I look forward to suggestions.</p>
"
272233,11677,2008-11-07T14:31:30Z,1,"""File -X: does not exist"" message from ipy.exe in Windows PowerShell","<p>If I type this line in an MS-DOS command prompt window:  </p>

<pre><code>ipy -X:ColorfulConsole
</code></pre>

<p>IronPython starts up as expected with the colorful console option enabled. However, if I type the same line in Windows PowerShell I get the message:  </p>

<pre><code>File -X: does not exist
</code></pre>

<p>Can someone explain what I'm doing wrong?</p>
"
272826,261,2008-11-07T17:21:55Z,4,Python's os.execvp equivalent for PHP,"<p>I've got a PHP command line program running. And I want to connect to a mysql shell straight from PHP. I've done this before in Python using os.execvp But I can't get the same thing to work in PHP.</p>

<p>I've tried the following functions:</p>

<ul>
<li>system</li>
<li>passthru</li>
<li>exec</li>
<li>shell_exec</li>
</ul>

<p>example:</p>

<pre><code>system('mysql -u root -pxxxx db_name');
</code></pre>

<p>But they all seem to wait for mysql to exit and return something. What I really want is for PHP to launch the mysql shell and then exit it self. any ideas?</p>
"
273002,31319,2008-11-07T18:05:08Z,11,Generating a WSDL using Python and SOAPpy,"<p>First of all, I will admit I am a novice to web services, although I'm familiar with HTML and basic web stuff.  I created a quick-and-dirty web service using Python that calls a stored procedure in a MySQL database, that simply returns a BIGINT value.  I want to return this value in the web service, and I want to generate a WSDL that I can give our web developers. I might add that the stored procedure only returns one value.</p>

<p>Here's some example code:</p>

<pre><code>#!/usr/bin/python

import SOAPpy
import MySQLdb

def getNEXTVAL():
    cursor = db.cursor()
    cursor.execute( ""CALL my_stored_procedure()"" )  # Returns a number
    result=cursor.fetchall()

    for record in result:
        return record[0]

db=MySQLdb.connect(host=""localhost"", user=""myuser"", passwd=""********"", db=""testing"")
server = SOAPpy.SOAPServer((""10.1.22.29"", 8080))
server.registerFunction(getNEXTVAL)
server.serve_forever()
</code></pre>

<p>I want to generate a WSDL that I can give to the web folks, and I'm wondering if it's possible to have SOAPpy just generate one for me.  Is this possible?</p>
"
273043,29825,2008-11-07T18:13:58Z,4,Python memory debugging with GDB,"<p>We have a Linux application that makes use of OpenSSL's Python bindings and I suspect it is causing random crashes. Occasionally, we see it crash with the message ""Python Fatal Error: GC Object already tracked,"" which would appear to be either a programming error on the part of the library, or a symptom of memory corruption. Is there any way to know the last line of Python source code it executed, given a core file? Or if it is attached in GDB? I realize it is probably all compiled bytecode, but I'm hoping there someone out there may have dealt with this. Currently it is running with the trace module active and we're hoping it will happen again, but it could be a long while.</p>
"
273060,16838,2008-11-07T18:19:54Z,2,Testing Web Services Consumer,"<p>Here are some tools that I have found to test web services consumers:</p>

<p><a href=""http://www.soapui.org/"" rel=""nofollow"">http://www.soapui.org/</a>
https://wsunit.dev.java.net/</p>

<p>Are there any others? I would prefer testing frameworks that are written in Java or Python.</p>
"
273192,13055,2008-11-07T18:56:45Z,1739,How to check if a directory exists and create it if necessary?,"<p>What is the most elegant way to check if the directory a file is going to be written to exists, and if not, create the directory using Python? Here is what I tried:</p>

<pre><code>filename = ""/my/directory/filename.txt""
dir = os.path.dirname(filename)

try:
    os.stat(dir)
except:
    os.mkdir(dir)       

f = file(filename)
</code></pre>

<p>Somehow, I missed <code>os.path.exists</code> (thanks kanja, Blair, and Douglas). This is what I have now:</p>

<pre><code>def ensure_dir(f):
    d = os.path.dirname(f)
    if not os.path.exists(d):
        os.makedirs(d)
</code></pre>

<p>Is there a flag for ""open"", that makes this happen automatically?</p>
"
273203,NA,2008-11-07T18:58:47Z,6,Access second result set of stored procedure with SQL or other work-around? Python\pyodbc,"<p>I'm using python\pyodbc and would like to access the second result set of a stored procedure. As near as I can tell, pyodbc does not support multiple result sets. Additionally, I can't modify the stored procedure. Are there any options to access the second result set using SQL or some other work-around? Perhaps create a second stored procedure that only returns the second result set of the first?</p>
"
273524,24054,2008-11-07T20:23:14Z,13,Python 3.0 and language evolution,"<p>Python 3.0 breaks backwards compatibility with previous versions and splits the language into two paths (at least temporarily). Do you know of any other language that went through such a major design phase while in maturity?</p>

<p>Also, do you believe that this is how programming languages should evolve or is the price to pay simply too high?</p>
"
273612,33061,2008-11-07T20:55:33Z,2,"python, basic question on loops","<p>It's a really basic question but i can't think at the second. How do i set up a loop that asks each time the function inside runs whether to do it again. So it runs it then says something like;</p>

<p>""loop again? y/n""</p>
"
273698,28380,2008-11-07T21:30:18Z,31,Is there a cross-platform way of getting information from Python's OSError?,"<p>On a simple directory creation operation for example, I can make an OSError like this:</p>

<p>(Ubuntu Linux)</p>

<pre><code>&gt;&gt;&gt; import os
&gt;&gt;&gt; os.mkdir('foo')
&gt;&gt;&gt; os.mkdir('foo')
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
OSError: [Errno 17] File exists: 'foo'
</code></pre>

<p>Now I can catch that error like this:</p>

<pre><code>&gt;&gt;&gt; import os
&gt;&gt;&gt; os.mkdir('foo')
&gt;&gt;&gt; try:
...     os.mkdir('foo')
... except OSError, e:
...     print e.args
... 
(17, 'File exists')
</code></pre>

<p>Is there a cross-platform way that I can know that that the 17 or the 'File Exists' will always mean the same thing so that I can act differently depending on the situation?</p>

<p>(This came up <a href=""http://stackoverflow.com/questions/273192/python-best-way-to-create-directory-if-it-doesnt-exist-for-file-write"">during another question</a>.)</p>
"
273937,30105,2008-11-07T23:03:53Z,2,How do I Create an instance of a class in another class in Python,"<p>I am trying to learn Python and WxPython.  I have been a SAS programmer for years.  This OOP stuff is slowly coming together but I am still fuzzy on a lot of the concepts.  Below is a section of code.  I am trying to use a button click to create an instance of another class.  Specifically-I have my main panel in one class and I wanted to instance a secondary panel when a user clicked on one of the menu items on the main panel.  I made all of this work when the secondary panel was just a function.  I can't seem to get ti to work as a class.  </p>

<p>Here is the code</p>

<pre><code>import wx

class mainPanel(wx.Frame):
    def __init__(self, parent, id, title):
    wx.Frame.__init__(self, parent, id, 'directEDGAR Supplemental Tools', size=(450, 450))
    wx.Panel(self,-1)
    wx.StaticText(self,-1, ""This is where I will describe\n the purpose of these tools"",(100,10))


    menubar = wx.MenuBar()
    parser = wx.Menu()
    one =wx.MenuItem(parser,1,'&amp;Extract Tables  with One Heading or Label')
    two =wx.MenuItem(parser,1,'&amp;Extract Tables  with Two Headings or Labels')
    three =wx.MenuItem(parser,1,'&amp;Extract Tables  with Three Headings or Labels')
    four =wx.MenuItem(parser,1,'&amp;Extract Tables  with Four Headings or Labels')
    quit = wx.MenuItem(parser, 2, '&amp;Quit\tCtrl+Q')
    parser.AppendItem(one)
    parser.AppendItem(two)
    parser.AppendItem(three)
    parser.AppendItem(four)
    parser.AppendItem(quit)
    menubar.Append(parser, '&amp;Table Parsers')

    textRip = wx.Menu()
    section =wx.MenuItem(parser,1,'&amp;Extract Text With Section Headings')
    textRip.AppendItem(section)
    menubar.Append(textRip, '&amp;Text Rippers')

    dataHandling = wx.Menu()
    deHydrate =wx.MenuItem(dataHandling,1,'&amp;Extract Data from Tables')
    dataHandling.AppendItem(deHydrate)
    menubar.Append(dataHandling, '&amp;Data Extraction')        


    self.Bind(wx.EVT_MENU, self.OnQuit, id=2)
</code></pre>

<h1>this is where I think I am being clever by using a button click to create an instance</h1>

<h1>of subPanel.</h1>

<pre><code>    self.Bind(wx.EVT_MENU, self.subPanel(None, -1, 'TEST'),id=1)

    self.SetMenuBar(menubar)

    self.Centre()
    self.Show(True)

   def OnQuit(self, event):
    self.Close()

class subPanel(wx.Frame):
    def __init__(self, parent, id, title):
    wx.Frame.__init__(self, parent, id, 'directEDGAR Supplemental Tools', size=(450, 450))
    wx.Panel(self,-1)
    wx.StaticText(self,-1, ""This is where I will describe\n the purpose of these tools"",(100,10))


    getDirectory = wx.Button(panel, -1, ""Get Directory Path"", pos=(20,350))
    getDirectory.SetDefault()

    getTerm1 = wx.Button(panel, -1, ""Get Search Term"", pos=(20,400))
    getTerm1.SetDefault()

    #getDirectory.Bind(wx.EVT_BUTTON, getDirectory.OnClick, getDirectory.button)


    self.Centre()
    self.Show(True)




app = wx.App()
mainPanel(None, -1, '')
app.MainLoop()
</code></pre>
"
273946,3912,2008-11-07T23:08:04Z,196,How do I resize an image using PIL and maintain its aspect ratio?,"<p>Is there an obvious way to do this that I'm missing?  I'm just trying to make thumbnails.</p>
"
274361,35697,2008-11-08T04:24:45Z,3,"UTF-8 latin-1 conversion issues, python django","<p>ok so my issue is i have the string '\222\222\223\225' which is stored as latin-1 in the db.  What I get from django (by printing it) is the following string, 'ââââ¢' which I assume is the UTF conversion of it.  Now I need to pass the string into a function that 
does this operation: </p>

<pre><code>strdecryptedPassword + chr(ord(c) - 3 - intCounter - 30)
</code></pre>

<p>I get this error:  </p>

<blockquote>
  <p>chr() arg not in range(256)</p>
</blockquote>

<p>If I try to encode the string as latin-1 first I get this error:</p>

<blockquote>
  <p>'latin-1' codec can't encode characters in position 0-3: ordinal not
  in range(256)</p>
</blockquote>

<p>I have read a bunch on how character encoding works, and there is something I am missing because I just don't get it!</p>
"
274493,745,2008-11-08T07:21:53Z,8,How to copy a file in Python with a progress bar?,"<p>When copying large files using <code>shutil.copy()</code>, you get no indication of how the operation is progressing..</p>

<p>I have put together something that works - it uses a simple ProgressBar class (which simple returns a simple ASCII progress bar, as a string), and a loop of <code>open().read()</code> and <code>.write()</code> to do the actual copying. It displays the progress bar using <code>sys.stdout.write(""\r%s\r"" % (the_progress_bar))</code> which is a little hackish, but it works.</p>

<p>You can see the code (in context) <a href=""http://github.com/dbr/checktveps/tree/1be8f4445fbf766eba25f98f78ec52e955571608/autoPathTv.py#L64-153"">on github here</a></p>

<p>Is there any built-in module that will do this better? Is there any improvements that can be made to this code?</p>
"
274638,370899,2008-11-08T11:31:32Z,3,config_vars.mk missing in default xampp-linux installation,"<p>I extracted the xampp package xampp-linux-1.6.7 on a Ubuntu 8.10 system and followed the instuctions from mod_wsgi documentation. I get the error below:</p>

<pre><code>ravi@Ibex:~/mod_wsgi-2.3$ ./configure  --with-apxs=/opt/lampp/bin/apxs 
checking Apache version... cannot open /opt/lampp/build/config_vars.mk: No such file or directory at /opt/lampp/bin/apxs line 218.
cannot open /opt/lampp/build/config_vars.mk: No such file or directory at /opt/lampp/bin/apxs line 218.
./configure: line 1696: /: is a directory

checking for python... /usr/bin/python
cannot open /opt/lampp/build/config_vars.mk: No such file or directory at /opt/lampp/bin/apxs line 218.
configure: creating ./config.status
config.status: error: cannot find input file: Makefile.in
</code></pre>

<p>I could not google for instructions on getting mod_wsgi running on xampp. Please help.</p>

<p>Solution:
The solution for this is buried in the comments. Thanks to <a href=""http://stackoverflow.com/users/33006/martin-v-l246wis"">Martin v. Löwis</a> I was able to solve this. When apxs throws and error complaining about missing config_vars.mk it means that the build directory of Apache is missing. Fox xampp users the solution is to download xampp-dev as well and extract that to the same path.</p>
"
275018,NA,2008-11-08T18:25:24Z,959,How can I remove (chomp) a newline in Python?,"<p>What is the Python equivalent of Perl's <code>chomp</code> function, which removes the last character of a value?</p>
"
275109,23695,2008-11-08T20:01:02Z,1,What is the regular expression for /urlchecker/http://www.google.com,"<p>I'm writing a url rewrite in django that when a person goes to <a href=""http://mysite.com/urlchecker/http://www.google.com"" rel=""nofollow"">http://mysite.com/urlchecker/http://www.google.com</a>   it sends the url: <a href=""http://ww.google.com"" rel=""nofollow"">http://ww.google.com</a> to a view as a string variable. </p>

<p>I tried doing:</p>

<pre><code>(r'^urlchecker/(?P&lt;url&gt;\w+)/$', 'mysite.main.views.urlchecker'),
</code></pre>

<p>But that didn't work. Anyone know what I'm doing wrong?</p>

<p>Also, generally is there a good resource to learn regular expressions specifically for python/django?</p>

<p>Thanks guys!</p>
"
275174,23695,2008-11-08T20:44:30Z,91,How do I perform HTML decoding/encoding using Python/Django?,"<p>I have a string that is html encoded: </p>

<pre><code>&amp;lt;img class=&amp;quot;size-medium wp-image-113&amp;quot; 
  style=&amp;quot;margin-left: 15px;&amp;quot; title=&amp;quot;su1&amp;quot; 
  src=&amp;quot;http://blah.org/wp-content/uploads/2008/10/su1-300x194.jpg&amp;quot; 
  alt=&amp;quot;&amp;quot; width=&amp;quot;300&amp;quot; height=&amp;quot;194&amp;quot; /&amp;gt;
</code></pre>

<p>I want to change that to:</p>

<pre><code>&lt;img class=""size-medium wp-image-113"" style=""margin-left: 15px;"" 
  title=""su1"" src=""http://blah.org/wp-content/uploads/2008/10/su1-300x194.jpg"" 
  alt="""" width=""300"" height=""194"" /&gt;
</code></pre>

<p>I want this to register as HTML so that it is rendered as an image by the browser instead of being displayed as text. </p>

<p>I've found how to do this in C# but not in in Python. Can someone help me out?</p>

<p>Thanks.</p>

<p>Edit: Someone asked why my strings are stored like that. It's because I am using a web-scraping tool that ""scans"" a web-page and gets certain content from it. The tool (BeautifulSoup) returns the string in that format.</p>

<h3>Related</h3>

<ul>
<li><a href=""http://stackoverflow.com/questions/57708/convert-xml-html-entities-into-unicode-string-in-python"">Convert XML/HTML Entities into Unicode String in Python</a></li>
</ul>
"
275207,21711,2008-11-08T21:11:25Z,7,Python ctypes and function calls,"<p>My friend produced a small proof-of-concept assembler that worked on x86. I decided to port it for x86_64 as well, but I immediately hit a problem.</p>

<p>I wrote a small piece of program in C, then compiled and objdumped the code. After that I inserted it to my python script, therefore the x86_64 code is correct:</p>

<pre><code>from ctypes import cast, CFUNCTYPE, c_char_p, c_long

buffer = ''.join(map(chr, [ #0000000000000000 &lt;add&gt;:
  0x55,                     # push   %rbp
  0x48, 0x89, 0xe5,         # mov    %rsp,%rbp
  0x48, 0x89, 0x7d, 0xf8,   # mov    %rdi,-0x8(%rbp)
  0x48, 0x8b, 0x45, 0xf8,   # mov    -0x8(%rbp),%rax
  0x48, 0x83, 0xc0, 0x0a,   # add    $0xa,%rax
  0xc9,                     # leaveq 
  0xc3,                     # retq
]))

fptr = cast(c_char_p(buffer), CFUNCTYPE(c_long, c_long))
print fptr(1234)
</code></pre>

<p>Now, why does this script keeps doing segmentation fault whenever I run it?</p>

<p>I have yet a question about mprotect and no execution flag. It is said to protect against most basic security exploits like buffer overruns. But what is the real reason it's in use? You could just keep on writing until you hit the .text, then inject your instructions into a nice, PROT_EXEC -area. Unless, of course, you use a write protection in .text</p>

<p>But then, why have that PROT_EXEC everywhere anyway? Wouldn't it just help tremendously that your .text section is write protected?</p>
"
275541,35697,2008-11-09T03:06:06Z,0,"information seemingly coming out of mysqldb incorrectly, python django","<p>In a latin-1 database i have '<code>\222\222\223\225</code>', when I try to pull this field from the django models I get back <code>u'\u2019\u2019\u201c\u2022'</code>.</p>

<pre><code>from django.db import connection                                                                                                                                                                                                                                                    
(Pdb)                                                                                                                                                                                                                                                                                  
cursor = connection.cursor()                                                                                                                                                                                                                                                        
(Pdb)                                                                                                                                                                                                                                                                                  
cursor.execute(""SELECT Password from campaignusers WHERE UserID=26"")                                                                                                                                                                                                             
(Pdb)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        
row = cursor.fetchone()
</code></pre>

<p>So I step into that and get into </p>

<blockquote>
  <p>/usr/local/python2.5/lib/python2.5/site-packages/MySQL_python-1.2.2-py2.5-linux-i686.egg/MySQLdb/cursors.py(327)fetchone()->(u'\u2019...1c\u2022',)                                                                                                                                  </p>
</blockquote>

<p>I can't step further into this because its an egg but it seems that the MySQL python driver is interpreting the data not as latin-1.</p>

<p>Anyone have any clue whats going on?</p>
"
275572,13990,2008-11-09T03:46:40Z,1,Database change underneath SQLObject,"<p>I'm starting a web project that likely should be fine with SQLite.  I have SQLObject on top of it, but thinking long term here -- if this project should require a more robust (e.g. able to handle high traffic), I will need to have a transition plan ready.  My questions:</p>

<ol>
<li>How easy is it to transition from one DB (SQLite) to another (MySQL or Firebird or PostGre) under SQLObject?  </li>
<li>Does SQLObject provide any tools to make such a transition easier?  Is it simply take the objects I've defined and call createTable?  </li>
<li>What about having multiple SQLite databases instead?  E.g. one per visitor group?  Does SQLObject provide a mechanism for handling this scenario and if so, what is the mechanism to use?</li>
</ol>

<p>Thanks,
Sean</p>
"
275683,432,2008-11-09T06:39:52Z,6,How do you get a thumbnail of a movie using IMDbPy?,"<p>Using <a href=""http://imdbpy.sourceforge.net"">IMDbPy</a> it is painfully easy to access movies from the IMDB site:</p>

<pre><code>import imdb

access = imdb.IMDb()
movie = access.get_movie(3242) # random ID

print ""title: %s year: %s"" % (movie['title'], movie['year'])
</code></pre>

<p>However I see no way to get the picture or thumbnail of the movie cover. Suggestions?</p>
"
275756,18676,2008-11-09T08:50:12Z,7,What's the difference between all of the os.popen() methods?,"<p>I was looking at the <a href=""http://www.python.org/doc/2.5.2/lib/module-popen2.html"">Python documentation</a> and saw that there are 4-5 different versions of popen(), e.g. os.popen(), os.popen2(), etc. </p>

<p>Apart from the fact that some include <em>stderr</em> while others don't, what are the differences between them and when would you use each one? The documentation didn't really explain it very well.</p>
"
275980,NA,2008-11-09T14:50:26Z,4,import mechanize module to python script,"<p>I tried to import mechanize module to my python script like this,</p>

<p>from mechanize import Browser</p>

<p>But, Google appengine throws HTTP 500 when accessing my script.</p>

<p>To make things more clear, Let me give you the snapshot of my package structure,</p>

<pre><code>root
 ....mechanize(where all the mechanize related files there)
 ....main.py
 ....app.yaml
 ....image
 ....script
</code></pre>

<p>Can anyone help me out to resolve this issue?</p>

<p>Thanks,
Ponmalar</p>
"
275989,30289,2008-11-09T15:05:23Z,1,Remote debugging of multi threaded Python Applications,"<p>How can I do remote debugging of a multi threaded Python application, running on an Embedded Linux based system, from Windows XP or Vista?</p>

<p>So far I have only come across <a href=""http://pyscripter.googlepages.com/"" rel=""nofollow"">PyScripter based remote debugging</a>. How does it perform?</p>
"
276052,35935,2008-11-09T16:04:50Z,150,How to get current CPU and RAM usage in Python?,"<p>What's your preferred way of getting current system status (current CPU, RAM, free disk space, etc.) in Python? Bonus points for *nix and Windows platforms.</p>

<p>There seems to be a few possible ways of extracting that from my search:</p>

<ol>
<li><p>Using a library such as <a href=""http://www.psychofx.com/psi/trac/wiki/"">PSI</a> (that currently seems not actively developed and not supported on multiple platform) or something like <a href=""http://www.i-scream.org/pystatgrab/"">pystatgrab</a> (again no activity since 2007 it seems and no support for Windows).</p></li>
<li><p>Using platform specific code such as using a <code>os.popen(""ps"")</code> or similar for the *nix systems and <code>MEMORYSTATUS</code> in <code>ctypes.windll.kernel32</code> (see <a href=""http://code.activestate.com/recipes/511491/"">this recipe on ActiveState</a>) for the Windows platform. One could put a Python class together with all those code snippets.</p></li>
</ol>

<p>It's not that those methods are bad but is there already a well-supported, multi-platform way of doing the same thing?</p>
"
276184,30289,2008-11-09T17:41:15Z,20,WCF and Python,"<p>Is there any example code of a <a href=""http://www.python.org/"">cpython</a> (not IronPython) client which can call Windows Communication Foundation (WCF) service?</p>
"
276266,14520,2008-11-09T18:28:42Z,17,What's a cross platform way to play a sound file in python?,"<p>I tried playing a .wav file using pyaudio. It works great on windows, but doesn't work in Ubuntu when another device is using sound.</p>

<blockquote>
  <p>The error is ""IOError: [Errorno
  Invalid output device (no default
  output device)] -9996</p>
</blockquote>

<p>Is there another library I could try to use? Another method?</p>
"
276281,115,2008-11-09T18:35:14Z,14,CPU Usage Per Process in Python,"<p>Is it possible for me to see the amount of processor usage (% of maximum) that the current, python, app is using?</p>

<p>Scenario: 
My host will allow me to run my app as long as it does not consume more then X% of the CPU power, so I would like it to 'keep an eye on itself' and slowdown.  So how can I know how much CPU the app is using?</p>

<p>Target platform is *nix, however I would like to do it on a Win host also.</p>
"
276286,11452,2008-11-09T18:39:37Z,0,How to show the visitor a moved web page AND return a 301 redirect HTTP response status code in Django?,"<p>When a webpage has moved to a new location, how do I show the moved web page AND return a 301 permanent redirect HTTP response status code in <a href=""http://djangoproject.com/"" rel=""nofollow"">Django</a>?</p>
"
276345,23695,2008-11-09T19:24:41Z,2,Syntax error whenever I put Python code inside a Django template,"<p>I'm trying to do the following in my Django template:</p>

<pre><code>    {% for embed in embeds %}
	       {% embed2 = embed.replace(""&amp;lt;"", ""&lt;"") %}
	       {{embed2}}&lt;br /&gt;
    {% endfor %}
</code></pre>

<p>However, I always get an invalid block or some syntax error when I do anything like that (by that I mean {% %} code inside a loop). Python doesn't have {} to signify ""scope"" so I think this might be my problem? Am I formatting my code wrong?</p>

<p>Edit: the exact error is: <code>Invalid block tag: 'embed2'</code></p>

<p>Edit2: Since someone said what I'm doing is not supported by Django templates, I rewrote the code, putting the logic in the view. I now have:</p>

<pre><code>embed_list = []
for embed in embeds:
	embed_list[len(embed_list):] = [embed.replace(""&amp;lt;"", ""&lt;"")] #this is line 35
return render_to_response(""scanvideos.html"", {
	""embed_list"" :embed_list
})
</code></pre>

<p>However, I now get an error: <code>'NoneType' object is not callable"" on line 35</code>.</p>
"
276656,29123,2008-11-09T23:20:13Z,11,Can you achieve a case insensitive 'unique' constraint in Sqlite3 (with Django)?,"<p>So let's say I'm using Python 2.5's built-in default sqlite3 and I have a Django model class with the following code:</p>

<pre><code>class SomeEntity(models.Model):
    some_field = models.CharField(max_length=50, db_index=True, unique=True)
</code></pre>

<p>I've got the admin interface setup and everything appears to be working fine except that I can create two SomeEntity records, one with some_field='some value' and one with some_field='Some Value' because the unique constraint on some_field appears to be case sensitive.</p>

<p>Is there some way to force sqlite to perform a case <em>in</em>sensitive comparison when checking for uniqueness?</p>

<p>I can't seem to find an option for this in Django's docs and I'm wondering if there's something that I can do directly to sqlite to get it to behave the way I want. :-)</p>
"
276679,NA,2008-11-09T23:40:27Z,1,How to import a python file in python script more than once,"<p>Is it possible to import a python file more than once in a python script because i run a loop back to my driver file in a function by using the import command but it only works once? thanks</p>

<p><strong>edit:</strong> Resolved myself thanks</p>
"
276761,30626,2008-11-10T00:34:50Z,34,Exposing a C++ API to Python,"<p>I'm currently working on a project were I had to wrap the C++ classes with Python to be able to script the program. So my specific experience also involved embedding the Python interpreter in our program.</p>

<p>The alternatives I tried were:</p>

<ul>
<li><p>Boost.Python</p>

<p>I liked the cleaner API produced by Boost.Python, but the fact that it would have required that users install an additional dependency made us switch to SWIG.</p></li>
<li><p>SWIG</p>

<p>SWIG's main advantage for us was that it doesn't require end users to install it to use the final program.</p></li>
</ul>

<p>What have you used to do this, and what has been your experience with it?</p>
"
276769,30626,2008-11-10T00:38:59Z,14,How to expose std::vector<int> as a Python list using SWIG?,"<p>I'm trying to expose this function to Python using SWIG:</p>

<pre><code>std::vector&lt;int&gt; get_match_stats();
</code></pre>

<p>And I want SWIG to generate wrapping code for Python so I can see it as a list of integers.</p>

<p>Adding this to the .i file:</p>

<pre>
%include ""typemaps.i""
%include ""std_vector.i""

namespace std
{
  %template(IntVector) vector&lt;int&gt;;
}
</pre>

<p>I'm running <code>SWIG Version 1.3.36</code> and calling swig with <code>-Wall</code> and I get no warnings.</p>

<p>I'm able to get access to a list but I get a bunch of warnings when compiling with <code>-Wall</code> (with <code>g++ (GCC) 4.2.4</code> ) the generated C++ code that say:</p>

<pre>
  warning: dereferencing type-punned pointer will break strict-aliasing rules
</pre>

<p>Am I exposing the function correctly? If so, what does the warning mean?</p>

<hr>

<p>These are the lines before the offending line in the same function:</p>

<pre>
SWIGINTERN PyObject *_wrap_IntVector_erase__SWIG_0(PyObject *SWIGUNUSEDPARM(self), PyObject *args) {
  PyObject *resultobj = 0;
  std::vector *arg1 = (std::vector *) 0 ;
  std::vector::iterator arg2 ;
  std::vector::iterator result;
  void *argp1 = 0 ;
  int res1 = 0 ;
  swig::PySwigIterator *iter2 = 0 ;
  int res2 ;
  PyObject * obj0 = 0 ;
  PyObject * obj1 = 0 ;

  if (!PyArg_ParseTuple(args,(char *)""OO:IntVector_erase"",&obj0,&obj1)) SWIG_fail;
  res1 = SWIG_ConvertPtr(obj0, &argp1,SWIGTYPE_p_std__vectorT_int_std__allocatorT_int_t_t, 0 |  0 );
  if (!SWIG_IsOK(res1)) {
    SWIG_exception_fail(SWIG_ArgError(res1), ""in method '"" ""IntVector_erase"" ""', argument "" ""1"""" of type '"" ""std::vector *""""'""); 
  }
  arg1 = reinterpret_cast * >(argp1);
</pre>

<p>And this is the offending line:</p>

<pre>
  res2 = SWIG_ConvertPtr(obj1, SWIG_as_voidptrptr(&iter2), swig::PySwigIterator::descriptor(), 0);
</pre>

<p>More code follows that.</p>

<p>The warning generated when compiling with g++ 4.2.4 is:</p>

<pre>
swig_iss_wrap.cxx: In function ‘PyObject* _wrap_IntVector_erase__SWIG_0(PyObject*, PyObject*)’:
swig_iss_wrap.cxx:5885: warning: dereferencing type-punned pointer will break strict-aliasing rules
</pre>
"
277170,30626,2008-11-10T06:02:59Z,12,Is there a good Python GUI shell?,"<p>I saw this the other day (scroll <em>all the way</em> down to see some of the clever stuff): </p>

<blockquote>
  <p><a href=""http://www.mono-project.com/docs/tools+libraries/tools/repl/"" rel=""nofollow"">http://www.mono-project.com/docs/tools+libraries/tools/repl/</a></p>
</blockquote>

<p>And wondered whether something like this exists for Python.</p>

<p>So, is there a good Python GUI shell that can do stuff like that C# shell can do?</p>

<p>Edit: Here are links to screenshots from the article, showing what I'm interested in doing.</p>

<p>An example of the type of things I'm interested: </p>

<p><a href=""http://www.mono-project.com/archived/images/7/75/GSharpPlot.png"" rel=""nofollow"">http://www.mono-project.com/archived/images/7/75/GSharpPlot.png</a></p>

<p>They are able to add hooks to produce GUI elements like the plot, or even do silly things like:</p>

<p><a href=""http://www.mono-project.com/archived/images/b/bf/GSharpRenderHandler.png"" rel=""nofollow"">http://www.mono-project.com/archived/images/b/bf/GSharpRenderHandler.png</a></p>

<p>I don't think this is possible with any of the console shells I've tried (the regular python shell, ipython).</p>

<p>Edit: I'm not looking for an IDE. If you look at the link, you'll get an idea of what I want.</p>
"
277187,30105,2008-11-10T06:17:39Z,1,Is there a more Pythonic way to merge two HTML header rows with colspans?,"<p>I am using BeautifulSoup in Python to parse some HTML.  One of the problems I am dealing with is that I have situations where the colspans are different across header rows.  (Header rows are the rows that need to be combined to get the column headings in my jargon) That is one column may span a number of columns above or below it and the words need to be appended or prepended based on the spanning.  Below is a routine to do this.  I use BeautifulSoup to pull the colspans and to pull the contents of each cell in each row.  longHeader is the contents of the header row with the most items, spanLong is a list with the colspans of each item in the row.  This works but it is not looking very Pythonic.  </p>

<p>Alos-it is not going to work if the diff is &lt;0, I can fix that with the same approach I used to get this to work.  But before I do I wonder if anyone can quickly look at this and suggest a more Pythonic approach.  I am a long time SAS programmer and so I struggle to break the mold-well I will write code as if I am writing a SAS macro.</p>

<pre><code>longHeader=['','','bananas','','','','','','','','','','trains','','planes','','','','']
shortHeader=['','','bunches','','cars','','trucks','','freight','','cargo','','all other','','']
spanShort=[1,1,3,1,3,1,3,1,3,1,3,1,3,1,3]
spanLong=[1,1,3,1,1,1,1,1,1,1,1,1,3,1,3,1,3,1,3]
combinedHeader=[]
sumSpanLong=0
sumSpanShort=0
spanDiff=0
longHeaderCount=0

for each in range(len(shortHeader)):
    sumSpanLong=sumSpanLong+spanLong[longHeaderCount]
    sumSpanShort=sumSpanShort+spanShort[each]
    spanDiff=sumSpanShort-sumSpanLong
    if spanDiff==0:
        combinedHeader.append([longHeader[longHeaderCount]+' '+shortHeader[each]])
        longHeaderCount=longHeaderCount+1
        continue
    for i in range(0,spanDiff):
            combinedHeader.append([longHeader[longHeaderCount]+' '+shortHeader[each]])
            longHeaderCount=longHeaderCount+1
            sumSpanLong=sumSpanLong+spanLong[longHeaderCount]
            spanDiff=sumSpanShort-sumSpanLong
            if spanDiff==0:
                combinedHeader.append([longHeader[longHeaderCount]+' '+shortHeader[each]])
                longHeaderCount=longHeaderCount+1
                break

print combinedHeader
</code></pre>
"
277922,20003,2008-11-10T14:01:22Z,39,Python Argument Binders,"<p>How can I bind arguments to a Python method to store a nullary functor for later invocation?  Similar to C++'s <code>boost::bind</code>.</p>
"
277965,30786,2008-11-10T14:20:13Z,4,"Dictionary or If statements, Jython","<p>I am writing a script at the moment that will grab certain information from HTML using dom4j.</p>

<p>Since Python/Jython does not have a native <strong>switch</strong> statement I decided to use a whole bunch of <strong>if</strong> statements that call the appropriate method, like below:</p>

<pre><code>if type == 'extractTitle':
    extractTitle(dom)
if type == 'extractMetaTags':
    extractMetaTags(dom)
</code></pre>

<p>I will be adding more depending on what information I want to extract from the HTML and thought about taking the dictionary approach which I found elsewhere on this site, example below:</p>

<pre><code>{
    'extractTitle':    extractTitle,
    'extractMetaTags': extractMetaTags
}[type](dom)
</code></pre>

<p>I know that each time I run the script the dictionary will be built, but at the same time if I were to use the <strong>if</strong> statements the script would have to check through all of them until it hits the correct one.  What I am really wondering, which one performs better or is generally better practice to use?</p>

<p><strong>Update:</strong> @Brian - Thanks for the great reply.  I have a question, if any of the extract methods require more than one object, e.g.</p>

<pre><code>handle_extractTag(self, dom, anotherObject)
# Do something
</code></pre>

<p>How would you make the appropriate changes to the <strong>handle</strong> method to implemented this?  Hope you know what I mean :)</p>

<p>Cheers</p>
"
279094,36330,2008-11-10T20:41:41Z,9,How do I script an OLE component using Python?,"<p>I would like to use Python to script an application that advertises itself as providing an OLE component. How should I get started?</p>

<p>I don't yet know what methods I need to call on the COMponents I will be accessing. Should I use win32com to load those components, and then start pressing 'tab' in IPython?</p>
"
279119,36330,2008-11-10T20:51:35Z,2,How do I search for unpublished Plone content in an IPython debug shell?,"<p>I like to use IPython's zope profile to inspect my Plone instance, but a few annoying permissions differences come up compared to inserting a breakpoint and hitting it with the admin user.</p>

<p>For example, I would like to iterate over the content objects in an unpublished testing folder. This query will return no results in the shell, but works from a breakpoint.</p>

<pre><code>$ bin/instance shell
$ ipython --profile=zope

from Products.CMFPlone.utils import getToolByName
catalog = getToolByName(context, 'portal_catalog')
catalog({'path':'Plone/testing'})
</code></pre>

<p>Can I authenticate as admin or otherwise rejigger the permissions to fully manipulate my site from ipython?</p>
"
279129,19074,2008-11-10T20:53:34Z,5,Can anyone recommend a decent FOSS PDF generator for Python?,"<p>I need a basic pdf generator that'll let me toss some images and text into a pdf file.  The ability to  have some basic drawing commands (lines and so forth) would also be a plus.</p>

<p>I did read through <a href=""http://stackoverflow.com/questions/177799/what-is-a-good-pdf-report-generator-tool-for-python"">this question</a>, but I really don't need a report generator and most of the responses there seemed like real overkill for what I'm trying to do.  (I don't need templates or LaTeX-grade layout control.)</p>
"
279237,1388,2008-11-10T21:28:48Z,555,Import a module from a relative path,"<p>How do I import a python module given its relative path?</p>

<p>For example, if <code>dirFoo</code> contains <code>Foo.py</code> and <code>dirBar</code>, and <code>dirBar</code> contains <code>Bar.py</code>, how do I import <code>Bar.py</code> into <code>Foo.py</code>?</p>

<p>Here's a visual representation:</p>

<pre><code>dirFoo\
    Foo.py
    dirBar\
        Bar.py
</code></pre>

<p><code>Foo</code> wishes to include <code>Bar</code>, but restructuring the folder hierarchy is not an option.</p>
"
279434,35305,2008-11-10T22:41:30Z,1,Python: How do I generate a keypress?,"<p>I am opening a process (with os.popen() ) that, for some commands, detects certain keypresses (e.g. ESC - not the character, the key).  Is there a way to send keypress events to the process?</p>
"
279561,10569,2008-11-10T23:33:36Z,311,What is the Python equivalent of static variables inside a function?,"<p>What is the idiomatic Python equivalent of this C/C++ code?</p>

<pre><code>void foo()
{
    static int counter = 0;
    counter++;
    printf(""counter is %d\n"", counter);
}
</code></pre>

<p>specifically, how does one implement the static member at the function level, as opposed to the class level? And does placing the function into a class change anything?</p>
"
279782,19212,2008-11-11T01:42:39Z,4,How can one get the set of all classes with reverse relationships for a model in Django?,"<p>Given:</p>

<pre><code>from django.db import models

class Food(models.Model):
     """"""Food, by name.""""""
     name = models.CharField(max_length=25)

class Cat(models.Model):
     """"""A cat eats one type of food""""""
     food = models.ForeignKey(Food)

class Cow(models.Model):
     """"""A cow eats one type of food""""""
     food = models.ForeignKey(Food)

class Human(models.Model):
     """"""A human may eat lots of types of food""""""
     food = models.ManyToManyField(Food)
</code></pre>

<p>How can one, given only the class Food, get a set of all classes that it has ""reverse relationships"" to. I.e. given the class <strong>Food</strong>, how can one get the classes <strong>Cat</strong>, <strong>Cow</strong> and <strong>Human</strong>.</p>

<p>I would think it's possible because Food has the three ""reverse relations"": <em>Food.cat_set</em>, <em>Food.cow_set</em>, and <em>Food.human_set</em>.</p>

<p>Help's appreciated &amp; thank you!</p>
"
279912,16584,2008-11-11T03:17:03Z,24,PyOpenGl or pyglet?,"<p>I am looking to do some tinkering with openGL and Python and haven't been able to find good reasons for using PyOpenGl versus pyglet</p>

<p>Which would you recommend and why?</p>
"
279945,1057,2008-11-11T03:40:17Z,6,Set permissions on a compressed file in python,"<p>I have a file <code>test.txt</code> that is inside a zip archive <code>test.zip</code>.  The permissions on <code>test.txt</code> are out of my control when it's compressed, but now I want them to be group-writeable.  I am extracting the file with Python, and don't want to escape out to the shell.</p>

<p><strong>EDIT:</strong>
Here's what I've got so far:</p>

<pre><code>import zipfile

z = zipfile.ZipFile('test.zip', 'w')
zi = zipfile.ZipInfo('test.txt')
zi.external_attr = 0777 &lt;&lt; 16L
z.writestr(zi, 'FOO')
z.close()

z = zipfile.ZipFile('test.zip', 'r')
for name in z.namelist():
    newFile = open(name, ""wb"")
    newFile.write(z.read(name))

    newFile.close()
z.close()
</code></pre>

<p>This works perfectly on OS X using 2.5.1, but it doesn't work on my home box (Debian, Python 2.4 &amp; 2.5) or on RHEL 5 with Python 2.4.  On anything but OS X it doesn't error, but doesn't change the permissions either.  Any ideas why?  Also, how does <code>writestr()</code> work?  I know I'm using it incorrectly here.</p>

<p>Is there a way to do this without <code>os.chmod</code> (the user extracting the file doesn't have permissions to use <code>os.chmod</code> after it's extracted)?  I have full write access to the zip file.</p>

<p>More info:</p>

<pre><code>&gt; ls -l test.zip
-rwxrwxrwx 1 myuser mygroup 2008-11-11 13:24 test.zip
&gt; unzip test.zip
Archive:  test.zip
  inflating: test.txt 
&gt; ls -l test.txt
-rw-r--r-- 1 myuser mygroup 2008-11-11 13:34 test.txt
</code></pre>

<p>The user extracting is not <code>myuser</code>, but is in <code>mygroup</code>.</p>
"
280207,21537,2008-11-11T07:07:09Z,4,email body from a parsed email object in jython,"<p>I have an object.</p>

<pre><code>    fp = open(self.currentEmailPath, ""rb"")
    p = email.Parser.Parser()
    self._currentEmailParsedInstance= p.parse(fp)
    fp.close()
</code></pre>

<p>self.currentEmailParsedInstance, from this object I want to get the body of an email, text only no HTML....</p>

<p>How do I do it?</p>

<hr>

<p>something like this?  </p>

<pre><code>        newmsg=self._currentEmailParsedInstance.get_payload()
        body=newmsg[0].get_content....?
</code></pre>

<p>then strip the html from body.
just what is that .... method to return the actual text... maybe I mis-understand you</p>

<pre><code>        msg=self._currentEmailParsedInstance.get_payload()
        print type(msg)
</code></pre>

<p>output =  type 'list'</p>

<hr>

<p>the email   </p>

<p>Return-Path: <br>
Received: from xx.xx.net (example) by mxx3.xx.net (xxx)<br>
        id 485EF65F08EDX5E12 for xxx@xx.com; Thu, 23 Oct 2008 06:07:51 +0200<br>
Received: from xxxxx2 (ccc) by example.net (ccc) (authenticated as xxxx.xxx@example.com)
        id 48798D4001146189 for example.example@example-example.com; Thu, 23 Oct 2008 06:07:51 +0200<br>
From: ""example"" <br>
To: <br>
Subject: FW: example
Date: Thu, 23 Oct 2008 12:07:45 +0800<br>
Organization: example
Message-ID: &lt;001601c934c4$xxxx30$a9ff460a@xxx><br>
MIME-Version: 1.0<br>
Content-Type: multipart/mixed;<br>
    boundary=""----=_NextPart_000_0017_01C93507.F6F64E30""<br>
X-Mailer: Microsoft Office Outlook 11<br>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3138<br>
Thread-Index: Ack0wLaumqgZo1oXSBuIpUCEg/wfOAABAFEA  </p>

<p>This is a multi-part message in MIME format. </p>

<p>------=_NextPart_000_0017_01C93507.F6F64E30<br>
Content-Type: multipart/alternative;<br>
    boundary=""----=_NextPart_001_0018_01C93507.F6F64E30""  </p>

<p>------=_NextPart_001_0018_01C93507.F6F64E30<br>
Content-Type: text/plain;<br>
    charset=""us-ascii""<br>
Content-Transfer-Encoding: 7bit  </p>

<p>From: example.example[mailto:example@example.com]<br>
Sent: Thursday, October 23, 2008 11:37 AM<br>
To: xxxx@example.com<br>
Subject: S/I for example(B/L<br>
No.:4357-0120-810.044)  </p>

<p>Please find attached the example.doc),  </p>

<p>Thanks.  </p>

<p>B.rgds,  </p>

<p>xxx xxx  </p>

<p>------=_NextPart_001_0018_01C93507.F6F64E30<br>
Content-Type: text/html;<br>
    charset=""us-ascii""<br>
Content-Transfer-Encoding: quoted-printable  </p>

<p>
xmlns:o=3D""urn:schemas-microsoft-com:office:office"" =<br>
xmlns:w=3D""urn:schemas-microsoft-com:office:word"" =<br>
xmlns:st1=3D""urn:schemas-microsoft-com:office:smarttags"" =<br>
xmlns=3D""<a href=""http://www.w3.org/TR/REC-html40"" rel=""nofollow"">http://www.w3.org/TR/REC-html40</a>"">  </p>

<p>HTML STUFF till  </p>

<p>------=_NextPart_001_0018_01C93507.F6F64E30--  </p>

<p>------=_NextPart_000_0017_01C93507.F6F64E30<br>
Content-Type: application/msword;<br>
    name=""xxxx.doc""<br>
Content-Transfer-Encoding: base64<br>
Content-Disposition: attachment;<br>
    filename=""xxxx.doc""   </p>

<p>0M8R4KGxGuEAAAAAAAAAAAAAAAAAAAAAPgADAP7/CQAGAAAAAAAAAAAAAAABAAAAYAAAAAAAAAAA
EAAAYgAAAAEAAAD+////AAAAAF8AAAD/////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////s
pcEAI2AJBAAA+FK/AAAAAAAAEAAAAAAABgAAnEIAAA4AYmpiaqEVoRUAAAAAAAAAAAAAAAAAAAAA
AAAECBYAMlAAAMN/AADDfwAAQQ4AAAAAAAAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//w8AAAAA
AAAAAAD//w8AAAAAAAAAAAD//w8AAAAAAAAAAAAAAAAAAAAAAKQAAAAAAEYEAAAAAAAARgQAAEYE
AAAAAAAARgQAAAAAAABGBAAAAAAAAEYEAAAAAAAARgQAABQAAAAAAAAAAAAAAFoEAAAAAAAA4hsA
AAAAAADiGwAAAAAAAOIbAAA4AAAAGhwAAHwAAACWHAAARAAAAFoEAAAAAAAABzcAAEgBAADmHAAA
FgAAAPwcAAAAAAAA/BwAAAAAAAD8HAAAAAAAAPwcAAAAAAAA/BwAAAAAAAD8HAAAAAAAAPwcAAAA
AAAAMjYAAAIAAAA0NgAAAAAAADQ2AAAAAAAANDYAAAAAAAA0NgAAAAAAADQ2AAAAAAAANDYAACQA
AABPOAAAaAIAALc6AACOAAAAWDYAAGkAAAAAAAAAAAAAAAAAAAAAAAAARgQAAAAAAABHLAAAAAAA
AAAAAAAAAAAAAAAAAAAAAAD8HAAAAAAAAPwcAAAAAAAARywAAAAAAABHLAAAAAAAAFg2AAAAAAAA</p>

<p>------=_NextPart_000_0017_01C93507.F6F64E30--  </p>

<hr>

<p>I just want to get :    </p>

<p>From: xxxx.xxxx [mailto:xxxx@example.com]<br>
Sent: Thursday, October 23, 2008 11:37 AM<br>
To: xxxx@example.com<br>
Subject: S/I for xxxxx (B/L<br>
No.:4357-0120-810.044)  </p>

<p>Pls find attached the xxxx.doc),  </p>

<p>Thanks.  </p>

<p>B.rgds,  </p>

<p>xxx xxx    </p>

<hr>

<p>not sure if the mail is malformed!
seems if you get an html page you have to do this:</p>

<pre><code>        parts=self._currentEmailParsedInstance.get_payload()
        print parts[0].get_content_type()
        ..._multipart/alternative_
        textParts=parts[0].get_payload()
        print textParts[0].get_content_type()
        ..._text/plain_
        body=textParts[0].get_payload()
        print body
        ...get the text without a problem!!
</code></pre>

<p>thank you so much Vinko.</p>

<p>So its kinda like dealing with xml, recursive in nature.</p>
"
280222,15055,2008-11-11T07:15:56Z,13,Python - sort a list of nested lists,"<p>I have input consisting of a list of nested lists like this:</p>

<pre><code>l = [[[[[39]]]], [1, 2, 3], [4, [5, 3], 1], [[[[8, 9], 10], 11], 12]]
</code></pre>

<p>I want to sort this list based on the sum of all the numbers in the nested lists... so, the values I want to sort by of l would look like this:</p>

<pre><code>[39, 6, 13, 50]
</code></pre>

<p>Then I want to sort based on these. So the output should be:</p>

<pre><code>[[1, 2, 3], [4, [5, 3], 1], [[[[39]]]], [[[[8, 9], 10], 11], 12]]
</code></pre>

<p>What's a nice pythonic way of doing this?</p>
"
280243,15055,2008-11-11T07:31:21Z,110,Python Linked List,"<p>What's the easiest way to use a linked list in python? In scheme, a linked list is defined simply by <code>'(1 2 3 4 5)</code>. Python's lists, <code>[1, 2, 3, 4, 5]</code>, and tuples, <code>(1, 2, 3, 4, 5)</code>, are not, in fact, linked lists, and linked lists have some nice properties such as constant-time concatenation, and being able to reference separate parts of them. Make them immutable and they are really easy to work with!</p>
"
280324,18676,2008-11-11T08:24:00Z,9,"When is ""self"" required?","<p>I have been using classes for only a short while and when I write a method, I make all variables reference self, e.g. self.foo.</p>

<p>However, I'm looking through the <em>wxPython in Action</em> book and notice that ""self"" isn't used all the time. For example:</p>

<pre><code> import wx
 class TextFrame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None, -1, 'Text Entry Example',
            size=(300, 100))
        panel = wx.Panel(self, -1)
        basicLabel = wx.StaticText(panel, -1, ""Basic Control:"")
        basicText = wx.TextCtrl(panel, -1, ""I've entered some text!"",
            size=(175, -1))
        basicText.SetInsertionPoint(0)
        pwdLabel = wx.StaticText(panel, -1, ""Password:"")
        pwdText = wx.TextCtrl(panel, -1, ""password"", size=(175, -1),
            style=wx.TE_PASSWORD)
        sizer = wx.FlexGridSizer(cols=2, hgap=6, vgap=6)
        sizer.AddMany([basicLabel, basicText, pwdLabel, pwdText])
        panel.SetSizer(sizer)
</code></pre>

<p>The one below does use ""self"".</p>

<pre><code>import wx
class ButtonFrame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None, -1, 'Button Example',
            size=(300, 100))
        panel = wx.Panel(self, -1)
        self.button = wx.Button(panel, -1, ""Hello"", pos=(50, 20))
        self.Bind(wx.EVT_BUTTON, self.OnClick, self.button)
        self.button.SetDefault()
    def OnClick(self, event):
        self.button.SetLabel(""Clicked"")
</code></pre>

<p>If I remember correctly, ""self"" is reference to a particular instance of the class, so when is it not necessary? Is there a general rule of thumb?</p>
"
280435,288629,2008-11-11T09:33:29Z,128,Escaping regex string in Python,"<p>I want to use input from a user as a regex pattern for a search over some text.  It works, but how I can handle cases where user puts characters that have meaning in regex?  For example, the user wants to search for Word <code>(s)</code>: regex engine will take the <code>(s)</code> as a group.  I want it to treat it like a string <code>""(s)"" </code>.  I can run <code>replace</code> on user input and replace the <code>(</code> with <code>\(</code> and the <code>)</code> with <code>\)</code> but the problem is I will need to do replace for every possible regex symbol. Do you know some better way ?</p>
"
280797,NA,2008-11-11T12:51:43Z,16,Calculate poisson probability percentage,"<p>When you use the POISSON function in Excel (or in OpenOffice Calc), it takes two arguments:</p>

<ul>
<li>an integer</li>
<li>an 'average' number</li>
</ul>

<p>and returns a float.</p>

<p>In Python (I tried RandomArray and NumPy) it returns an array of random poisson numbers.
What I really want is the percentage that this event will occur (it is a constant number and the array has every time different numbers - so is it an average?).</p>

<p>for example:</p>

<pre><code>print poisson(2.6,6)
</code></pre>

<p>returns <code>[1 3 3 0 1 3]</code> (and every time I run it, it's different).</p>

<p>The number I get from calc/excel is 3.19 (<code>POISSON(6,2.16,0)*100</code>).</p>

<p>Am I using the python's poisson wrong (no pun!) or am I missing something?</p>
"
281133,36522,2008-11-11T15:04:43Z,19,Controlling the mouse from Python in OS X,"<p>What would be the easiest way to move the mouse around (and possibly click) using python on OS X?  </p>

<p>This is just for rapid prototyping, it doesn't have to be elegant.</p>

<p>Thanks!</p>
"
281888,25705,2008-11-11T19:24:56Z,30,Open explorer on a file,"<p>In Python, how do I jump to a file in the Windows Explorer? I found a solution for jumping to folders:</p>

<pre><code>import subprocess
subprocess.Popen('explorer ""C:\path\of\folder""')
</code></pre>

<p>but I have no solution for files.</p>
"
281922,35247,2008-11-11T19:38:34Z,4,How can I do synchronous rpc calls,"<p>I'm building a program that has a class used locally, but I want the same class to be used the same way over the network. This means I need to be able to make synchronous calls to any of its public methods. The class reads and writes files, so I think XML-RPC is too much overhead. I created a basic rpc client/server using the examples from twisted, but I'm having trouble with the client.</p>

<pre><code>c = ClientCreator(reactor, Greeter)
c.connectTCP(self.host, self.port).addCallback(request)
reactor.run()
</code></pre>

<p>This works for a single call, when the data is received I'm calling reactor.stop(), but if I make any more calls the reactor won't restart. Is there something else I should be using for this? maybe a different twisted module or another framework?</p>

<p>(I'm not including the details of how the protocol works, because the main point is that I only get one call out of this.)</p>

<p>Addendum &amp; Clarification:</p>

<p>I shared a google doc with notes on what I'm doing. <a href=""http://docs.google.com/Doc?id=ddv9rsfd_37ftshgpgz"" rel=""nofollow"">http://docs.google.com/Doc?id=ddv9rsfd_37ftshgpgz</a></p>

<p>I have a version written that uses fuse and can combine multiple local folders into the fuse mount point. The file access is already handled within a class, so I want to have servers that give me network access to the same class. After continuing to search, I suspect pyro (<a href=""http://pyro.sourceforge.net/"" rel=""nofollow"">http://pyro.sourceforge.net/</a>) might be what I'm really looking for (simply based on reading their home page right now) but I'm open to any suggestions.</p>

<p>I could achieve similar results by using an nfs mount and combining it with my local folder, but I want all of the peers to have access to the same combined filesystem, so that would require every computer to bee an nfs server with a number of nfs mounts equal to the number of computers in the network.</p>

<p><strong>Conclusion:</strong>
I have decided to use rpyc as it gave me exactly what I was looking for. A server that keeps an instance of a class that I can manipulate as if it was local. If anyone is interested I put my project up on Launchpad (<a href=""http://launchpad.net/dstorage"" rel=""nofollow"">http://launchpad.net/dstorage</a>).</p>
"
282393,7883,2008-11-11T22:42:44Z,6,Python decorating functions before call,"<p>I have a rather complex decorator written by someone else. What I want to do is call a decorated version of the function one time based on a descision or call the original function (not decorated) another time. Is this possible?</p>
"
282907,1345527,2008-11-12T03:15:07Z,1,"How can I download python .egg files, when behind a firewall","<p>I'm going to try out turbogears however I'm on windows vista.
however due to firewall proxy problems, it seems i can't download .egg files which is required for setup turbogears to get installed in my windows environment.
I do have a bootable, or I can make a bootable Linux USB, I can try cygwin but I am not sure where to start with cygwin, so I was wondering what would solve my firewall / proxy problem of installing something like turbogears.</p>

<p>if it's possible, is there some non-online version of turbogears that i could just download from visiting a site and then somehow importing that non-online version into my python environment?</p>

<p>thanks so much!:)</p>
"
283294,5475,2008-11-12T08:15:26Z,20,Django debugging with Emacs,"<p>I found a lot of info about how to debug simple Python programs with Emacs. But what if I want to debug a Django application?
I run the development server and I would like to somehow attach to the process from Emacs and then set breakpoints, etc. Similar to Visual Studio's ""attach to process"". How to do that?</p>
"
283431,18676,2008-11-12T09:38:53Z,1,"Why would an ""command not recognized"" error occur only when a window is populated?","<p>My record sheet app has a menu option for creating a new, blank record sheet. When I open a sheet window, I can open new windows without a problem, using subprocess.Popen() to do it.</p>

<p>However, under Windows (I haven't tested it on other OSes yet), if I open a new window then use the ""open file"" dialog to populate the fields with data from a file, I'm no longer able to create new windows. Once it's populated, Windows gives me the </p>

<blockquote>
  <p>'foo.py' is not recognized as an internal or external command, operable
  program or batch file.</p>
</blockquote>

<p>I don't understand what would cause Windows to suddenly not recognize the Popen() call. I don't have any code that would affect it in any way that I'm aware of.</p>
"
283447,11677,2008-11-12T09:49:43Z,4,Is it possible to use wxPython inside IronPython?,"<p>When my IronPython program gets to the line  </p>

<pre><code>import wx
</code></pre>

<p>I get this message:</p>

<pre><code>A first chance exception of type
'IronPython.Runtime.Exceptions.PythonImportErrorException' occurred in IronPython.dll

Additional information: No module named _core_
</code></pre>

<p>although I do have the file wx\_core_.pyd. Also, before attempting the import, I have the lines:  </p>

<pre><code>sys.path.append('c:\\Python24\\Lib\\site-packages')
sys.path.append('c:\\Python24\\Lib\\site-packages\\wx-2.6-msw-unicode')
sys.path.append('c:\\Python24\\Lib\\site-packages\\wx-2.6-msw-unicode\\wx')
sys.path.append('c:\\Python24\\Lib\\site-packages\\wx-2.6-msw-unicode\\wx\\lib')
sys.path.append('c:\\Python24\\Lib\\site-packages\\wx-2.6-msw-unicode\\wxpython\\lib')
sys.path.append('c:\\Python24\\Lib\\site-packages\\wxaddons')
</code></pre>

<p>which I hoped would let IronPython find everything it needed. </p>
"
283645,2220518,2008-11-12T11:18:32Z,45,python list in sql query as parameter,"<p>I have a python list, say l</p>

<pre><code>l = [1,5,8]
</code></pre>

<p>I want to write a sql query to get the data for all the elements of the list, say</p>

<p>""select name from studens where id = |IN THE LIST l|""</p>

<p>How do i accomlish this?</p>
"
283707,36312,2008-11-12T11:49:46Z,33,Size of an open file object,"<p>Is there a way to find the size of a file object that is currently open?</p>

<p>Specifically, I am working with the tarfile module to create tarfiles, but I don't want my tarfile to exceed a certain size.  As far as I know, tarfile objects are file-like objects, so I imagine a generic solution would work.</p>
"
283766,18676,2008-11-12T12:15:52Z,4,Pickled file won't load on Mac/Linux,"<p>I have an application that imports data from a pickled file. It works just fine in Windows but Mac and Linux behaviour is odd.</p>

<p>In OS X, the pickled file (file extension "".char"") is unavailable as a selection unless I set the file type to *.*. Then, if I select a file that has the .char extension, it won't load, giving the error</p>

<blockquote>
<pre><code>unpickle_file = cPickle.load(char_file)
</code></pre>
  
  <p>ValueError: could not convert string to float</p>
</blockquote>

<p>However, if I create a file that doesn't have the .char extension, that file will load up just fine.</p>

<p>In Linux, when I use the ""file open"" dialog, my pickled files aren't visible, whether or not they have a file extension. However, I can see them under Nautilus or Dolphin. They simply don't exist to my application though.</p>

<p><hr /></p>

<p><strong>Edit</strong> Here's the save code:</p>

<pre><code>def createSaveFile(self):
        """"""Create the data files to be saved and save them.

        Creates a tuple comprised of a dictionary of general character information
        and the character's skills dictionary.""""""
        if self.file_name:
            self.save_data = ({'Name':self.charAttribs.name,

              &lt;snip&gt; 

                self.charAttribs.char_skills_dict)
            self.file = open(self.file_name, 'w')
            cPickle.dump(self.save_data, self.file)
        self.file.close()
</code></pre>

<p>Here's the open code:</p>

<pre><code> def getCharFile(self, event): # wxGlade: CharSheet.&lt;event_handler&gt;
        """"""Retrieve pickled character file from disk.""""""
        wildcard = ""Character files (*.char) | *.char | All files (*.*) | *.*""        
        openDialog = wx.FileDialog(None, ""Choose a character file"", os.getcwd(),
        """", wildcard, wx.OPEN | wx.CHANGE_DIR)
        if openDialog.ShowModal() == wx.ID_OK:
            self.path = openDialog.GetPath()
        try:
            char_file =  open(self.path, ""r"")
            unpickle_file = cPickle.load(char_file)
            char_data, char_skills = unpickle_file
            self.displayCharacter(char_data, char_skills)
        except IOError:
            self.importError = wx.MessageDialog(self, 
            ""The character file is not available!"",
            ""Character Import Error"", wx.OK | wx.ICON_ERROR)
            self.importError.ShowModal()
            self.importError.Destroy()
            openDialog.Destroy()
</code></pre>
"
283894,36900,2008-11-12T13:13:31Z,1,How to use Popen in Windows to invoke an external .py script and wait for its completion,"<p>Have you ever tried this feedback calling an external zip.py script to work? My CGITB does not show any error messages.  It simply did not invoke external .py script to work.  It simply skipped over to gush. I should be grateful if you can assist me in making this zip.py callable in feedback.py. </p>

<p>Regards. David </p>

<pre><code>#**********************************************************************
# Description:
#    Zips the contents of a folder.
# Parameters:
#   0 - Input folder.
#   1 - Output zip file. It is assumed that the user added the .zip 
#       extension.  
#**********************************************************************

# Import modules and create the geoprocessor
#
import sys, zipfile, arcgisscripting, os, traceback
gp = arcgisscripting.create()

# Function for zipping files.  If keep is true, the folder, along with 
#  all its contents, will be written to the zip file.  If false, only 
#  the contents of the input folder will be written to the zip file - 
#  the input folder name will not appear in the zip file.
#
def zipws(path, zip, keep):
    path = os.path.normpath(path)
    # os.walk visits every subdirectory, returning a 3-tuple
    #  of directory name, subdirectories in it, and filenames
    #  in it.
    #
    for (dirpath, dirnames, filenames) in os.walk(path):
        # Iterate over every filename
        #
        for file in filenames:
            # Ignore .lock files
            #
            if not file.endswith('.lock'):
                gp.AddMessage(""Adding %s..."" % os.path.join(path, dirpath, file))
                try:
                    if keep:
                        zip.write(os.path.join(dirpath, file),
                        os.path.join(os.path.basename(path),
                        os.path.join(dirpath, file)[len(path)+len(os.sep):]))
                    else:
                        zip.write(os.path.join(dirpath, file),            
                        os.path.join(dirpath[len(path):], file)) 

                except Exception, e:
                    gp.AddWarning(""    Error adding %s: %s"" % (file, e))

    return None

if __name__ == '__main__':
    try:
        # Get the tool parameter values
        #
        infolder = gp.GetParameterAsText(0)
        outfile = gp.GetParameterAsText(1)      

        # Create the zip file for writing compressed data. In some rare
        #  instances, the ZIP_DEFLATED constant may be unavailable and
        #  the ZIP_STORED constant is used instead.  When ZIP_STORED is
        #  used, the zip file does not contain compressed data, resulting
        #  in large zip files. 
        #
        try:
                zip = zipfile.ZipFile(outfile, 'w', zipfile.ZIP_DEFLATED)
                zipws(infolder, zip, True)
                zip.close()
        except RuntimeError:
                # Delete zip file if exists
                #
                if os.path.exists(outfile):
                        os.unlink(outfile)
                zip = zipfile.ZipFile(outfile, 'w', zipfile.ZIP_STORED)
                zipws(infolder, zip, True)
                zip.close()
                gp.AddWarning(""    Unable to compress zip file contents."")

        gp.AddMessage(""Zip file created successfully"")

    except:
        # Return any python specific errors as well as any errors from the geoprocessor
        #
        tb = sys.exc_info()[2]
        tbinfo = traceback.format_tb(tb)[0]
        pymsg = ""PYTHON ERRORS:\nTraceback Info:\n"" + tbinfo + 
                ""\nError Info:\n    "" +                 str(sys.exc_type) + 
                "": "" + str(sys.exc_value) + ""\n""
        gp.AddError(pymsg)

        msgs = ""GP ERRORS:\n"" + gp.GetMessages(2) + ""\n""
        gp.AddError(msgs)
</code></pre>
"
284043,27415,2008-11-12T14:10:27Z,76,Outputting data from unit test in python,"<p>If I'm writing unit tests in python (using the unittest module), is it possible to output data from a failed test, so I can examine it to help deduce what caused the error? I am aware of the ability to create a customized message, which can carry some information, but sometimes you might deal with more complex data, that can't easily be represented as a string.</p>

<p>For example, suppose you had a class Foo, and were testing a method bar, using data from a list called testdata:</p>

<pre><code>class TestBar(unittest.TestCase):
    def runTest(self):
        for t1, t2 in testdata:
            f = Foo(t1)
            self.assertEqual(f.bar(t2), 2)
</code></pre>

<p>If the test failed, I might want to output t1, t2 and/or f, to see why this particular data resulted in a failure. By output, I mean that the variables can be accessed like any other variables, after the test has been run.</p>
"
284115,2963,2008-11-12T14:35:29Z,13,Cross platform hidden file detection,"<p>What is the best way to do cross-platform handling of hidden files?
(preferably in Python, but other solutions still appreciated)</p>

<p>Simply checking for a leading '.' works for *nix/Mac, and file attributes work on Windows. However, this seems a little simplistic, and also doesn't account for alternative methods of hiding things (.hidden files, etc.). Is there a standard way to deal with this?</p>
"
284234,1694,2008-11-12T15:10:26Z,10,Notebook widget in Tkinter,"<p>Having played around a little with both Tkinter and wxPython, I like Tkinter much better in terms of how clean my source code looks.  However, it doesn't seem to have as many features; in particular it doesn't have tabs (as in, the tabs at the top of a Firefox window).</p>

<p>A little Googling on the subject offers a few suggestions.  There's <a href=""http://code.activestate.com/recipes/188537/"">a cookbook entry</a> with a class allowing you to use tabs, but it's very primitive.  There's also <a href=""http://pmw.sourceforge.net/"">Python megawidgets</a> on SourceForge, although this seems very old and gave me errors during installation.</p>

<p>Does anyone have experience making tabbed GUIs in Tkinter?  What did you use?  Or is it simply the case that anyone who needs more powerful windowing components has to use wxPython?</p>
"
284741,5695,2008-11-12T17:50:29Z,5,Processing chunked encoded HTTP POST requests in python (or generic CGI under apache),"<p>I have a j2me client that would post some chunked encoded data to a webserver. I'd like to process the data in python. The script is being run as a CGI one, but apparently apache will refuse a chunked encoded post request to a CGI script. As far as I could see mod_python, WSGI and FastCGI are no go too.</p>

<p>I'd like to know if there is a way to have a python script process this kind of input. I'm open to any suggestion (e.g. a confoguration setting in apache2 that would assemble the chunks, a standalone python server that would do the same, etc.) I did quite a bit of googling and didn't find anything usable, which is quite strange.</p>

<p>I know that resorting to java on the server side would be a solution, but I just can't imagine that this can't be solved with apache + python.</p>
"
285061,5222,2008-11-12T19:33:07Z,105,How do you programmatically set an attribute in Python?,"<p>Suppose I have a python object <code>x</code> and a string <code>s</code>, how do I set the attribute <code>s</code> on <code>x</code>? So:</p>

<pre><code>&gt;&gt;&gt; x = SomeObject()
&gt;&gt;&gt; attr = 'myAttr'
&gt;&gt;&gt; # magic goes here
&gt;&gt;&gt; x.myAttr
'magic'
</code></pre>

<p>What's the magic? The goal of this, incidentally, is to cache calls to <code>x.__getattr__()</code>. </p>
"
285132,NA,2008-11-12T19:57:25Z,3,With what kind of IDE (if any) you build python GUI projects?,"<p>Is there any IDE (like VS) with drag and drop support for building python GUI, connecting to dbs etc?
Eventhough I am an emacs guy, I find it much easier to create GUI with VS.</p>
"
285226,16511,2008-11-12T20:28:55Z,6,What Python tools can I use to interface with a website's API?,"<p>Let's say I wanted to make a python script interface with a site like Twitter.</p>

<p>What would I use to do that? I'm used to using curl/wget from bash, but Python seems to be much nicer to use. What's the equivalent?</p>

<p>(This isn't Python run from a webserver, but run locally via the command line)</p>
"
285289,19731,2008-11-12T20:43:08Z,76,Exit codes in Python,"<p>I got a message saying <code>script xyz.py returned exit code 0</code>. What does this mean?</p>

<p>What do the exit codes in Python mean? How many are there? Which ones are important?</p>
"
285408,37089,2008-11-12T21:11:25Z,13,Python module to extract probable dates from strings?,"<p>I'm looking for a Python module that would take an arbitrary block of text, search it for something that looks like a date string, and build a DateTime object out of it.  Something like <a href=""http://search.cpan.org/~sartak/Date-Extract-0.03/lib/Date/Extract.pm"">Date::Extract</a> in Perl</p>

<p>Thank you in advance.</p>
"
285455,22517,2008-11-12T21:32:08Z,5,How to access a Python global variable from C?,"<p>I have some global variables in a Python script. Some functions in that script call into C - is it possible to set one of those variables while in C and if so, how?</p>

<p>I appreciate that this isn't a very nice design in the first place, but I need to make a small change to existing code, I don't want to embark on major refactoring of existing scripts.</p>
"
285869,10286,2008-11-12T23:56:24Z,4,WX Python and Raw Input on Windows (WM_INPUT),"<p>Does anyone know how to use the <a href=""http://msdn.microsoft.com/en-us/library/ms645543(VS.85).aspx"" rel=""nofollow"">Raw Input</a> facility on Windows from a WX Python application?</p>

<p>What I need to do is be able to differentiate the input from multiple keyboards. So if there is another way to achieving that, that would work too.</p>
"
285931,4322,2008-11-13T00:34:43Z,0,Using Regex Plus Function in Python to Encode and Substitute,"<p>I'm trying to substitute something in a string in python and am having some trouble. Here's what I'd like to do.</p>

<p>For a given comment in my posting:</p>

<pre><code>""here are some great sites that i will do cool things with! http://stackoverflow.com/it's a pig &amp; http://google.com""
</code></pre>

<p>I'd like to use python to make the strings like this:</p>

<pre><code>""here are some great sites that i will do cool things with! &lt;a href=""http://stackoverflow.com""&gt;http%3A//stackoverflow.com&lt;/a&gt; &amp;amp; &lt;a href=""http://google.com""&gt;http%3A//google.com&lt;/a&gt;
</code></pre>

<p>Here's what I have so far...</p>

<pre><code>import re
import urllib

def getExpandedURL(url)
    encoded_url = urllib.quote(url)
    return ""&lt;a href=\""&lt;a href=""+url+""\""&gt;""+encoded_url+""&lt;/a&gt;""

text = '&lt;text from above&gt;'
url_pattern = re.compile('(http.+?[^ ]+', re.I | re.S | re.M)
url_iterator = url_pattern.finditer(text)
for matched_url in url_iterator:
    getExpandedURL(matched_url.groups(1)[0])
</code></pre>

<p>But this is where i'm stuck. I've previously seen things on here like this: <a href=""http://stackoverflow.com/questions/140182/regular-expressions-but-for-writing-in-the-match#142188"">Regular Expressions but for Writing in the Match</a> but surely there's got to be a better way than iterating through each match and doing a position replace on them. The difficulty here is that it's not a straight replace, but I need to do something specific with each match before replacing it.</p>
"
285938,19731,2008-11-13T00:38:56Z,5,Decomposing HTML to link text and target,"<p>Given an HTML link like</p>

<pre><code>&lt;a href=""urltxt"" class=""someclass"" close=""true""&gt;texttxt&lt;/a&gt;
</code></pre>

<p>how can I isolate the url and the text? </p>

<p><strong>Updates</strong></p>

<p>I'm using Beautiful Soup, and am unable to figure out how to do that. </p>

<p>I did </p>

<pre><code>soup = BeautifulSoup.BeautifulSoup(urllib.urlopen(url))

links = soup.findAll('a')

for link in links:
    print ""link content:"", link.content,"" and attr:"",link.attrs
</code></pre>

<p>i get </p>

<pre><code>*link content: None  and attr: [(u'href', u'_redirectGeneric.asp?genericURL=/root    /support.asp')]*  ...
...
</code></pre>

<p>Why am i missing the content? </p>

<p>edit: elaborated on 'stuck' as advised :)</p>
"
285990,30529,2008-11-13T01:05:59Z,22,Parse HTML via XPath,"<p>In .Net, I found this great library, <a href=""http://www.codeplex.com/htmlagilitypack"">HtmlAgilityPack</a> that allows you  to easily parse non-well-formed HTML using XPath.  I've used this for a couple years in my .Net sites, but I've had to settle for more painful libraries for my Python, Ruby and other projects.  Is anyone aware of similar libraries for other languages?</p>
"
286061,338360,2008-11-13T02:06:30Z,2,Decimal place issues with floats and decimal.Decimal,"<p>I seem to be losing a lot of precision with floats.</p>

<p>For example I need to solve a matrix:</p>

<pre><code>4.0x -2.0y 1.0z =11.0
1.0x +5.0y -3.0z =-6.0
2.0x +2.0y +5.0z =7.0
</code></pre>

<p>This is the code I use to import the matrix from a text file:</p>

<pre><code>f = open('gauss.dat')
lines =  f.readlines()
f.close()

j=0
for line in lines:
    bits = string.split(line, ',')
    s=[]
    for i in range(len(bits)):
        if (i!= len(bits)-1):
            s.append(float(bits[i]))
            #print s[i]
    b.append(s)
    y.append(float(bits[len(bits)-1]))
</code></pre>

<p>I need to solve using gauss-seidel so I need to rearrange the equations for x, y, and z:</p>

<pre><code>x=(11+2y-1z)/4
y=(-6-x+3z)/5
z=(7-2x-2y)/7
</code></pre>

<p>Here is the code I use to rearrange the equations. <code>b</code> is a matrix of coefficients and <code>y</code> is the answer vector:</p>

<pre><code>def equations(b,y):
    i=0
    eqn=[]
    row=[]
    while(i&lt;len(b)):
        j=0
        row=[]
        while(j&lt;len(b)):
            if(i==j):
                row.append(y[i]/b[i][i])
            else:
                row.append(-b[i][j]/b[i][i])
            j=j+1
        eqn.append(row)
        i=i+1
    return eqn
</code></pre>

<p>However the answers I get back aren't precise to the decimal place.</p>

<p>For example, upon rearranging the second equation from above, I should get:</p>

<pre><code>y=-1.2-.2x+.6z
</code></pre>

<p>What I get is:</p>

<pre><code>y=-1.2-0.20000000000000001x+0.59999999999999998z
</code></pre>

<p>This might not seem like a big issue but when you raise the number to a very high power the error is quite large. Is there a way around this? I tried the <code>Decimal</code> class but it does not work well with powers (i.e, <code>Decimal(x)**2</code>).</p>

<p>Any ideas?</p>
"
286486,18676,2008-11-13T08:10:28Z,1,Accounting for a changing path,"<p>In relation to <a href=""http://stackoverflow.com/questions/283431/why-would-an-command-not-recognized-error-occur-only-when-a-window-is-populated"">another question</a>, how do you account for paths that may change? For example, if a program is calling a file in the same directory as the program, you can simply use the path "".\foo.py"" in *nix. However, apparently Windows likes to have the path hard-coded, e.g. ""C:\Python_project\foo.py"".</p>

<p>What happens if the path changes? For example, the file may not be on the C: drive but on a thumb drive or external drive that can change the drive letter. The file may still be in the same directory as the program but it won't match the drive letter in the code.</p>

<p>I want the program to be cross-platform, but I expect I may have to use <strong>os.name</strong> or something to determine which path code block to use.</p>
"
286558,3355,2008-11-13T08:48:03Z,0,Django multiselect checkboxes,"<p>I have a list of objects, each with it's own checkbox, where the user can select multiple of these. The list is a result of a query.</p>

<p>How can I mark in the view which checkboxes are already selected? There doesn't seem to be an in operator in the template language.</p>

<p>I want something along the lines of:</p>

<pre><code>&lt;input {% if id in selectedIds %}checked {% endif %}&gt;
</code></pre>
"
286614,24718,2008-11-13T09:25:21Z,8,What's the best way to transfer data from python to another application in windows?,"<p>I'm developing an application with a team in .Net (C++) and provide a COM interface to interact with python and other languages.</p>

<p>What we've found is that pushing data through COM turns out to be pretty slow.</p>

<p>I've considered several alternatives:</p>

<ul>
<li>dumping data to a file and sending the file path through com</li>
<li>Shared Memory via <a href=""http://docs.python.org/library/mmap.html?highlight=shared%20memory#module-mmap"">mmap</a>?</li>
<li>Stream data through a socket directly?</li>
</ul>

<p>From your experience what's the best way to pass around data?</p>
"
286958,14262,2008-11-13T13:51:27Z,23,Any AOP support library for Python?,"<p>I am trying to use some AOP in my Python programming, but I do not have any experience of the various libs that exists. So my question is :</p>

<p>What AOP support exists for Python, and what are the advantages of the differents libraries between them ?</p>

<p>Edit : I've found some, but I don't know how they compare :</p>

<ul>
<li><a href=""http://www.aspyct.org"">Aspyct</a></li>
<li><a href=""http://www.cs.tut.fi/~ask/aspects/aspects.html"">Lightweight AOP for Python</a></li>
</ul>

<p>Edit2 : In which context will I use this ? I have two applications, written in Python, which have typically methods which compute taxes and other money things. I'd like to be able to write a ""skeleton"" of a functionnality, and customize it at runtime, for example changing the way local taxes are applied (by country, or state, or city, etc.) without having to overload the full stack.</p>
"
287204,25705,2008-11-13T15:16:35Z,11,Python program start,"<p>Should I start a Python program with:</p>

<pre><code>if__name__ == '__main__':
some code...
</code></pre>

<p>And if so, why? I saw it many times but don't have a clue about it.</p>
"
287312,1694,2008-11-13T15:52:03Z,10,Tix documentation for Python,"<p>I've recently starting playing around with <a href=""http://tix.sourceforge.net/"">Tix</a> in Python, and I'm distressed at the lack of Python documentation for it online.  Both the <a href=""http://tix.sourceforge.net/tixtutorial/index.htm"">tutorial</a> and <a href=""http://tix.sourceforge.net/docs/html/TixBook/TixBook.html"">book</a> have plenty of code examples in Tcl and none in Python.  Googling has turned up no good Python docs.</p>

<p>What do Tix users do for their Python documentation?  Do they just learn to read the Tcl docs and convert them in their head to what the code should probably look like in Python?</p>
"
287379,37386,2008-11-13T16:18:37Z,4,Parsing C++ preprocessor #if statements,"<p>I have a C/C++ source file with conditional compilation.  Before I ship it to customers I want to remove most of the #if statements, so that my customers do not need to worry about passing the right -D options to the compiler.</p>

<p>I have this implemented and working in Python, but it only handles #ifdef and #ifndef statements properly.  I need to add support for #if statements, but the syntax of #if is much more complex.  (E.g. you can use &amp;&amp;, ||, !, brackets, relational operators, arithmetic, etc).</p>

<p>Is there any existing open-source code to parse and evaluate #if statements?  (Preferably in Python).</p>

<p>The only implementation I know of is GCC, and that's much too complex for this task.</p>
"
287757,3594,2008-11-13T18:20:11Z,8,Python's ConfigParser unique keys per section,"<p>I read the part of <a href=""http://docs.python.org/library/configparser.html"">the docs</a> and saw that the <code>ConfigParser</code> returns a list of key/value pairs for the options within a section. I figured that keys did not need to be unique within a section, otherwise the parser would just return a mapping. I designed my config file schema around this assumption, then sadly realized that this is not the case:</p>

<pre><code>&gt;&gt;&gt; from ConfigParser import ConfigParser
&gt;&gt;&gt; from StringIO import StringIO
&gt;&gt;&gt; fh = StringIO(""""""
... [Some Section]
... spam: eggs
... spam: ham
... """""")
&gt;&gt;&gt; parser = ConfigParser()
&gt;&gt;&gt; parser.readfp(fh)
&gt;&gt;&gt; print parser.items('Some Section')
[('spam', 'ham')]
</code></pre>

<p>Then I went back and found the part of the docs that I <em>should</em> have read:</p>

<blockquote>
  <p>Sections are normally stored in a
  builtin dictionary. An alternative
  dictionary type can be passed to the
  ConfigParser constructor. For example,
  if a dictionary type is passed that
  sorts its keys, the sections will be
  sorted on write-back, as will be the
  keys within each section.</p>
</blockquote>

<p>To keep my existing configuration file scheme (which I really like now ;) I'm thinking of passing a mapping-like object as mentioned above that accumulates values instead of clobbering them. Is there a simpler way to prevent key/value collapse that I'm missing? Instead of making a crazy adapter (that could break if <code>ConfigParser</code>'s implementation changes) should I just write a variant of the <code>ConfigParser</code> itself?</p>

<p>I feel like this may be one of those 'duh' moments where I'm only seeing the difficult solutions.</p>

<p><strong>[Edit:]</strong> Here's a more precise example of how I'd like to use the same key multiple times:</p>

<pre><code>[Ignored Paths]
ignore-extension: .swp
ignore-filename: tags
ignore-directory: bin
</code></pre>

<p>I dislike the comma-delimited-list syntax because it's hard on the eyes when you scale it to many values; for example, a comma delimited list of fifty extensions would not be particularly readable.</p>
"
287823,34395,2008-11-13T18:44:08Z,3,Dictonaries and Lambda inside a class?,"<p>How can i do something like this:</p>

<pre><code>class Foo():
 do_stuff = { 
			""A"" : lambda x: self.do_A(x),
			""B""	: lambda x: self.do_B(x)
		}
def __init__(self):
	print ""hi""

def run(self):
	muh = ['A', 'B', 'A']
	for each in muh:
		self.do_stuff[each](each)

def do_A(self, moo):
	print ""A""

def do_B(self, boo):
	print ""B""

if(__name__ == '__main__'):
aFoo = Foo()
aFoo.run()
</code></pre>

<p>This results in it giving an error that self isn't defined at the lambda function, but if i remove it. It says do_A or do_B isn't defined.</p>

<p><em>EDIT</em></p>

<p>I managed to figure it out. I need to change the lambda expression into something like this:</p>

<pre><code>lambda x, y: x.do_A(y)
</code></pre>

<p>and i would call it like:</p>

<pre><code>self.do_stuff[each](self, each)
</code></pre>

<p>Is this a terrible idea?</p>
"
287845,4872,2008-11-13T18:49:03Z,6,"In Python, how can I efficiently manage references between script files?","<p>I have a fair number of Python scripts that contain reusable code that are used and referenced by other Python scripts. However, these scripts tend to be scattered across different directories and I find it to be somewhat tedious to have to include (most often multiple) calls to sys.path.append on my top-level scripts. I just want to provide the 'import' statements without the additional file references in the same script.</p>

<p>Currently, I have this:</p>

<pre><code>import sys
sys.path.append('..//shared1//reusable_foo')
import Foo
sys.path.append('..//shared2//reusable_bar')
import Bar
</code></pre>

<p>My preference would be the following:</p>

<pre><code>import Foo
import Bar
</code></pre>

<p>My background is primarily in the .NET platform so I am accustomed to having meta files such as *.csproj, *.vbproj, *.sln, etc. to manage and contain the actual file path references outside of the source files. This allows me to just provide 'using' directives (equivalent to Python's import) without exposing all of the references and allowing for reuse of the path references themselves across multiple scripts.</p>

<p>Does Python have equivalent support for this and, if not, what are some techniques and approaches?</p>
"
287871,35062,2008-11-13T18:58:10Z,1024,Print in terminal with colors using Python?,"<p>How can I output colored text to the terminal, in Python?
What is the best Unicode symbol to represent a solid block?</p>
"
288546,4966,2008-11-13T22:19:01Z,11,Connect to Exchange mailbox with Python,"<p>I need to connect to an Exchange mailbox in a Python script, without using any profile setup on the local machine (including using Outlook).  If I use win32com to create a MAPI.Session I could logon (with the Logon() method) with an existing profile, but I want to just provide a username &amp; password.</p>

<p>Is this possible?  If so, could someone provide example code?  I would prefer if it only used the standard library and the pywin32 package.  Unfortunately, enabling IMAP access for the Exchange server (and then using imaplib) is not possible.</p>

<p>In case it is necessary: all the script will be doing is connecting to the mailbox, and running through the messages in the Inbox, retrieving the contents.  I can handle writing the code for that, if I can get a connection in the first place!</p>

<p>To clarify regarding Outlook: Outlook will be installed on the local machine, but it does not have any accounts setup (i.e. all the appropriate libraries will be available, but I need to operate independently from anything setup inside of Outlook).</p>
"
288695,37511,2008-11-13T23:06:05Z,6,Is it correct to inherit from built-in classes?,"<p>I want to parse an Apache <strong>access.log</strong> file with a python program in a certain way, and though I am completely new to object-oriented programming, I want to start doing it now.</p>

<p>I am going to create a class <strong>ApacheAccessLog</strong>, and the only thing I can imagine now, it will be doing is '<strong>readline</strong>' method. Is it conventionally correct to inherit from the builtin <strong>file</strong> class in this case, so the class will behave just like an instance of the <strong>file</strong> class itself, or not? What is the best way of doing that?</p>
"
288968,3594,2008-11-14T01:28:40Z,14,Can I use named groups in a Perl regex to get the results in a hash?,"<p>Is it possible to perform a named-group match in Perl's regex syntax as with Python's? I always bind the <code>$n</code> values to proper names after matching, so I'd find it more convenient to do it in the regex itself if it's possible.</p>

<p>Python does it like so:</p>

<pre><code>&gt;&gt;&gt; import re
&gt;&gt;&gt; regex = re.compile(r'(?P&lt;count&gt;\d+)')
&gt;&gt;&gt; match = regex.match('42')
&gt;&gt;&gt; print match.groupdict()
{'count': '42'}
</code></pre>

<p>I know the <code>?P</code> indicates that it's a Python-specific regex feature, but I'm hoping it's in Perl in a different way or was added later on. Is there any way to get a result hash in a similar manner in Perl?</p>
"
289035,2128,2008-11-14T02:04:45Z,4,receiving data over a python socket,"<p>I'm making a program that retrieves decently large amounts of data through a python socket and then immediately disconnects when the information is finished sending. But I'm not sure how to do this</p>

<p>All the examples on the web are of tcp clients where they have</p>

<pre><code>while 1:
   data = sock.recv(1024)
</code></pre>

<p>But this creates a look to infinite loop to receive data via the socket, does it not?</p>

<p>I need to figure out the size of the message coming in and loop through it in buffer-sized  increments to get the full message. And after the message has finished sending, I would like to disconnect, although i think the connection will be closed from the other end.
Any help would be nice</p>

<p>Thanks</p>
"
289174,208,2008-11-14T03:39:49Z,2,Google AppEngine App Version,"<p>Is it possible to fetch the current application version programmatically for use in urls with far future expires header?</p>

<p>For example:</p>

<pre><code>&lt;link rel=""stylesheet"" href=""app.js?v=1.23"" /&gt;
</code></pre>

<p>Should be automatically updated to:</p>

<pre><code>&lt;link rel=""stylesheet"" href=""app.js?v=1.24"" /&gt;
</code></pre>

<p>In order to do so I need to get the version.</p>
"
289187,NA,2008-11-14T03:45:51Z,0,Why does Excel macro work in Excel but not when called from Python?,"<p>I have an Excel macro that deletes a sheet, copies another sheet and renames it to the same name of the deleted sheet. This works fine when run from Excel, but when I run it by calling the macro from Python I get the following error message:</p>

<p>'
Run-time error '1004':
Cannot rename a sheet to the same name as another sheet, a referenced object library or a workbook referenced by VisualBasic.
'</p>

<p>The macro has code like the following:</p>

<pre><code>Sheets(""CC"").Delete
ActiveWindow.View = xlPageBreakPreview
Sheets(""FY"").Copy After:=Sheets(Sheets.Count)
Sheets(Sheets.Count).Name = ""CC""
</code></pre>

<p>and the debugger highlights the error on the last line where the sheet is renamed. I've also tried putting these calls directly in python but get the same error message.</p>

<p>Any suggestions are much appreciated!</p>

<p>Thanks.</p>
"
289518,NA,2008-11-14T08:41:21Z,5,py2exe setup.py with icons,"<p>How do I make icons for my exe file when compiling my Python program?</p>
"
289668,NA,2008-11-14T09:59:48Z,3,How do I use my icons when compiling my python program with py2exe?,"<p>I don't know what commands to enter into the setup.py file when compiling a python program to use my icons. Can anyone help me? 
Thanks in advance.</p>
"
289735,11110,2008-11-14T10:40:21Z,3,How can I improve this number2words script,"<pre><code>import sys

words = {
    1 : 'one',
    2 : 'two',
    3 : 'three',
    4 : 'four',
    5 : 'five',
    6 : 'six',
    7 : 'seven',
    8 : 'eight',
    9 : 'nine',
    10 : 'ten',
    11 : 'eleven',
    12 : 'twelve',
    13 : 'thirteen',
    14 : 'fourteen',
    15 : 'fifteen',
    16 : 'sixteen',
    17 : 'seventeen',
    18 : 'eighteen',
    19 : 'nineteen'
}

tens = [
    '',
    'twenty',
    'thirty',
    'forty',
    'fifty',
    'sixty',
    'seventy',
    'eighty',
    'ninety',
]

placeholders = [
    '',
    'thousand',
    'million',
    'billion',
    'trillion',
    'quadrillion'
]

# segMag = segment magnitude (starting at 1)
def convertTrio(number):
    return ' '.join([words[int(number[0])],  'hundred',  convertDuo(number[1:3])]) # convertDuo(number[1:3])


def convertDuo(number):
    #if teens or less
    if int(number[0]) == 1:
        return words[int(number)]
    #twenty-five
    else:
        return tens[int(number[0]) - 1] + '-' + words[int(number[1])]


if __name__ == ""__main__"":

    string = []
    numeralSegments = []
    numeral = sys.argv[1]

    if int(numeral) &lt; 100:
        print convertDuo(numeral)
    else:

        # split number into lists, grouped in threes
        for i in range (0, len(numeral), 3):
            numeralSegments.append(numeral[i:i+3])

        numeralSegments.reverse()

        # for every segment, convert to trio word and append thousand, million, etc depending on magnitude
        for i in range (len(numeralSegments)):
            string.append(convertTrio(numeralSegments[i]) + ' ' + placeholders[i])

        # reverse the list of strings before concatenating to commas
        string.reverse()        
        print ', '.join(string)
</code></pre>

<p><strong>Warning</strong>: I'm a total python novice. I'm aware there are probably many times more efficient ways of doing things. I'd appreciate any pointers to them.</p>

<p><strong>Edit</strong>: The code currently only works for numbers whose digit counts are multiples of three. I'd appreciate a suggestion for an elegant way to fix that as well. Thanks.</p>
"
289978,25680,2008-11-14T12:50:11Z,21,What's the simplest way to access mssql with python or ironpython?,"<p>I've got mssql 2005 running on my personal computer with a database I'd like to run some python scripts on. I'm looking for a way to do some really simple access on the data. I'd like to run some select statements, process the data and maybe have python save a text file with the results.</p>

<p>Unfortunately, even though I know a bit about python and a bit about databases, it's very difficult for me to tell, just from reading, if a library does what I want. Ideally, I'd like something that works for other versions of mssql, is free of charge and licensed to allow commercial use, is simple to use, and possibly works with ironpython.</p>
"
290397,437,2008-11-14T15:21:32Z,3,Django Template System: How do I solve this looping / grouping / counting?,"<p>I have a list of articles, and each article belongs to a section.</p>

<pre><code>class Section(models.Model):
  name = models.CharField(max_length=200)

  def __unicode__(self):
    return self.name

class Article(models.Model):
  section = models.ForeignKey(Section)
  headline = models.CharField(max_length=200)
  # ...
</code></pre>

<p>I want to display the articles, grouped by section.</p>

<pre>
Sponsorships, Advertising & Marketing
1. Nike To Outfit All 18 Univ. Of Memphis Athletic Teams
2. Phil Jackson Questions Harrah's Signage At New Orleans Arena
3. Puma Hires N.Y.-Based Ad Agency Droga5 To Lead Global Account
4. Pizza Patrón To Replace Pizza Hut As AAC Exclusive Provider
5. Marketplace Roundup

Sports Media
6. Many Patriots Fans In New England Will Not See Tonight's Game
7. ESPN Ombudsman Says Net Should Have Clarified Holtz Situation
8. EA Sports To Debut Fitness Title For Nintendo Wii In Spring '09
9. Blog Hound: Rockets-Suns Scuffle Today's No.1 Topic
10. Media Notes

Leagues & Governing Bodies
11. DEI, Chip Ganassi Racing To Merge Into Four-Car Sprint Cup Team
12. NASCAR Roundtable Part II: New Strategies, Cutbacks Discussed
13. Average Ticket Price For NFL Playoff Games To Drop By 10%
</pre>

<p>I figured out how to do most of it with Django's template system.</p>

<pre><code>{% regroup articles by section as articles_by_section %}

{% for article in articles_by_section %}	
	&lt;h4&gt;{{ article.grouper }}&lt;/h4&gt;
	&lt;ul&gt;
	{% for item in article.list %}	
		&lt;li&gt;{{ forloop.counter }}. {{ item.headline }}&lt;/li&gt;
	{% endfor %}
	&lt;/ul&gt;
{% endfor %}
</code></pre>

<p>I just can't figure out how to do the numbers. The code above numbers the articles in Sports Media 1-5 instead of 6-10. Any suggestions?</p>
"
290424,8206,2008-11-14T15:30:00Z,22,Filter a Python list by predicate,"<p>I would want to do something like:</p>

<pre><code>&gt;&gt;&gt; lst = [1, 2, 3, 4, 5]
&gt;&gt;&gt; lst.find(lambda x: x % 2 == 0)
2
&gt;&gt;&gt; lst.findall(lambda x: x % 2 == 0)
[2, 4]
</code></pre>

<p>Is there anything nearing such behavior in Python's standard libraries?</p>

<p>I know it's very easy to roll-your-own here, but I'm looking for a more standard way.</p>
"
290456,11522,2008-11-14T15:38:56Z,8,Using python to build web applications,"<p>This is a follow-up to <a href=""http://stackoverflow.com/questions/269417/which-language-should-i-use"">two</a> <a href=""http://stackoverflow.com/questions/271488/linking-languages"">questions</a> I asked a week or so back. The upshot of those was that I was building a prototype of an AI-based application for the web, and I wondered what language(s) to use. The conclusion seemed to be that I should go for something like python and then convert any critical bits into something faster like Java or C/C++.</p>

<p>That sounds fine to me, but I'm wondering now whether python is really the right language to use for building a web application. Most web applications I've worked on in the past were C/C++ CGI and then php. The php I found much easier to work with as it made linking the user interface to the back-end so much easier, and also it made more logical sense to me. </p>

<p>I've not used python before, but what I'm basically wondering is how easy is CGI programming in python? Will I have to go back to the tedious way of doing it in C/C++ where you have to store HTML code in templates and have the CGI read them in and replace special codes with appropriate values or is it possible to have the templates <em>be</em> the code as with php?</p>

<p>I'm probably asking a deeply ignorant question here, for which I apologise, but hopefully someone will know what I'm getting at! My overall question is: is writing web applications in python a good idea, and is it as easy as it is with php?</p>
"
290896,13009,2008-11-14T18:04:27Z,6,Django Forms - How to Not Validate?,"<p>Say I have this simple form:</p>

<pre><code>class ContactForm(forms.Form):
    first_name = forms.CharField(required=True)
    last_name = forms.CharField(required=True)
</code></pre>

<p>And I have a default value for one field but not the other.  So I set it up like this:</p>

<pre><code>default_data = {'first_name','greg'}
form1=ContactForm(default_data)
</code></pre>

<p>However now when I go to display it, Django shows a validation error saying last_name is required:</p>

<pre><code>print form1.as_table()
</code></pre>

<p>What is the correct way to do this?  Since this isn't data the user has submitted, just data I want to prefill.</p>

<p><strong>Note:</strong> required=False will not work because I do want it required when the user submits the data. Just when I'm first showing the form on the page, I won't have a default value.</p>
"
291448,20498,2008-11-14T21:11:57Z,16,Is it possible for a running python program to overwrite itself?,"<p>Is it possible for a python script to open its own source file and overwrite it?</p>

<p>The idea was to have a very simple and very dirty way for a python script to download an update of itself so that the next time it is run it would be an updated version.</p>
"
291467,37804,2008-11-14T21:16:14Z,1,Search directory in SVN for files with specific file extension and copy to another folder?,"<p>I would like my python script to search through a directory in SVN, locate the files ending with a particular extension (eg. *.exe), and copy these files to a directory that has been created in my C drive. How can I do this? I'm new to Python so a detailed response and/or point in the right direction would be very much appreciated. </p>

<p><em>Follow-up:</em>
When using os.walk what parameter would I pass in to ensure that I'm copying files with a specific extension (eg. *.exe)?</p>
"
291508,742,2008-11-14T21:31:10Z,1,"Python exception backtrace tells me where line ends, where does it begin?","<p>When A Python exception is thrown by code that spans multiple lines, e.g.:</p>

<pre><code>   myfoos = [foo(""bar"",
                ""baz"",
                ""quux"",
                 i) for i in range(10)]
</code></pre>

<p>Python will report the line number of the last line, and will show the code fragment from that line:</p>

<pre><code>Traceback (most recent call last):
  File ""test.py"", line 4, in &lt;module&gt;
    i) for i in range(10)]
NameError: name 'foo' is not defined
</code></pre>

<p>Is there any way to determine what the first line is? Is there any way to catch the exception and manipulate the <a href=""http://docs.python.org/library/traceback.html"" rel=""nofollow"">traceback</a> object to be able to  report something like this instead:</p>

<pre><code>Traceback (most recent call last):
 File ""test.py"", lines 1-4 in &lt;module&gt;
   myfoos = [foo(""bar"",
                ""baz"",
                ""quux"",
                 i) for i in range(10)]
 NameError: name 'foo' is not defined
</code></pre>
"
291740,4834,2008-11-14T23:12:14Z,15,How do I split a huge text file in python,"<p>I have a huge text file (~1GB) and sadly the text editor I use won't read such a large file.  However, if I can just split it into two or three parts I'll be fine, so, as an exercise I wanted to write a program in python to do it.  </p>

<p>What I think I want the program to do is to find the size of a file, divide that number into parts, and for each part, read up to that point in chunks, writing to a <em>filename</em>.nnn output file, then read up-to the next line-break and write that, then close the output file, etc.  Obviously the last output file just copies to the end of the input file.</p>

<p>Can you help me with the key filesystem related parts: filesize, reading and writing in chunks and reading to a line-break?</p>

<p>I'll be writing this code test-first, so there's no need to give me a complete answer, unless its a one-liner ;-)</p>
"
291874,25012,2008-11-15T00:34:15Z,0,Best Practices for Building a SSO System,"<p>I am looking to build a Single-signon system for a couple web apps that used form based authentication. </p>

<p>They way that I envision it is that my sso system would handle authentication against active directory pass the verification through to the desired web app when ever the used clicked a link through my sso portal.</p>

<p>What might be the best way to build something like this?</p>
"
291945,3715,2008-11-15T01:21:33Z,152,How do I filter ForeignKey choices in a Django ModelForm?,"<p>Say I have the following in my <code>models.py</code>:</p>

<pre><code>class Company(models.Model):
   name = ...

class Rate(models.Model):
   company = models.ForeignKey(Company)
   name = ...

class Client(models.Model):
   name = ...
   company = models.ForeignKey(Company)
   base_rate = models.ForeignKey(Rate)
</code></pre>

<p>I.e. there are multiple <code>Companies</code>, each having a range of <code>Rates</code> and <code>Clients</code>.  Each <code>Client</code> should have a base <code>Rate</code> that is chosen from it's parent <code>Company's Rates</code>, not another <code>Company's Rates</code>.</p>

<p>When creating a form for adding a <code>Client</code>, I would like to remove the <code>Company</code> choices (as that has already been selected via an ""Add Client"" button on the <code>Company</code> page) and limit the <code>Rate</code> choices to that <code>Company</code> as well.</p>

<p>How do I go about this in Django 1.0?  </p>

<p>My current <code>forms.py</code> file is just boilerplate at the moment:</p>

<pre><code>from models import *
from django.forms import ModelForm

class ClientForm(ModelForm):
    class Meta:
        model = Client
</code></pre>

<p>And the <code>views.py</code> is also basic:</p>

<pre><code>from django.shortcuts import render_to_response, get_object_or_404
from models import *
from forms import *

def addclient(request, company_id):
    the_company = get_object_or_404(Company, id=company_id)

    if request.POST:
    	form = ClientForm(request.POST)
    	if form.is_valid():
    		form.save()
    		return HttpResponseRedirect(the_company.get_clients_url())
    else:
    	form = ClientForm()

    return render_to_response('addclient.html', {'form': form, 'the_company':the_company})
</code></pre>

<p>In Django 0.96 I was able to hack this in by doing something like the following before rendering the template:</p>

<pre><code>manipulator.fields[0].choices = [(r.id,r.name) for r in Rate.objects.filter(company_id=the_company.id)]
</code></pre>

<p><a href=""http://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey.limit_choices_to""><code>ForeignKey.limit_choices_to</code></a> seems promising but I don't know how to pass in <code>the_company.id</code> and I'm not clear if that will work outside the Admin interface anyway.</p>

<p>Thanks.  (This seems like a pretty basic request but if I should redesign something I'm open to suggestions.)</p>
"
291978,1320510,2008-11-15T01:48:37Z,228,Short Description of Scoping Rules,"<p>What <strong>exactly</strong> are the Python scoping rules?</p>

<p>If I have some code:</p>

<pre><code>code1
class Foo:
   code2
   def spam.....
      code3
      for code4..:
       code5
       x()
</code></pre>

<p>Where is <em>x</em> found?  Some possible choices include the list above:</p>

<ol>
<li>In the enclosing source file</li>
<li>In the class namespace</li>
<li>In the function definition</li>
<li>In the for loop index variable</li>
<li>Inside the for loop</li>
</ol>

<p>Also there is the context during execution, when the function spam is passed somewhere else.  And maybe lambda functions pass a bit differently?</p>

<p>There must be a simple reference or algorithm somewhere.  It's a confusing world for intermediate Python programmers.</p>
"
292095,33263,2008-11-15T03:29:09Z,43,Polling the keyboard (detect a keypress) in python,"<p>How can I poll the keyboard from a console python app?  Specifically, I would like to do something akin to this in the midst of a lot of other I/O activities (socket selects, serial port access, etc.):</p>

<pre><code>   while 1:
      # doing amazing pythonic embedded stuff
      # ...

      # periodically do a non-blocking check to see if
      # we are being told to do something else
      x = keyboard.read(1000, timeout = 0)

      if len(x):
          # ok, some key got pressed
          # do something
</code></pre>

<p>What is the correct pythonic way to do this on Windows?  Also, portability to Linux wouldn't be bad, though it's not required.</p>
"
292167,2128,2008-11-15T04:56:53Z,1,excluding characters in \S regex match,"<p>I have the following regex expression to match html links:</p>

<pre><code>&lt;a\s*href=['|""](http:\/\/(.*?)\S['|""]&gt;
</code></pre>

<p>it kind of works. Except not really. Because it grabs everything after the &lt; a href...
and just keeps going. I want to exclude the quote characters from that last \S match. Is there any way of doing that?</p>

<p><strong>EDIT:</strong> This would make it grab only up to the quotes instead of everything after the &lt; a href btw</p>
"
293300,23695,2008-11-16T00:44:35Z,5,"""Unknown column 'user_id' error in django view","<p>I'm having an error where I am not sure what caused it.</p>

<p>Here is the error:</p>

<pre><code>Exception Type:     OperationalError
Exception Value:    
(1054, ""Unknown column 'user_id' in 'field list'"")
</code></pre>

<p>Does anyone know why I am getting this error? I can't figure it out. Everything seems to be fine. </p>

<p>My view code is below:</p>

<pre><code>if ""login"" in request.session:
    t = request.POST.get('title', '')
    d = request.POST.get('description', '')
    fid = request.session[""login""]
    fuser = User.objects.get(id=fid)
    i = Idea(user=fuser, title=t, description=d, num_votes=1)
    i.save()
    return HttpResponse(""true"", mimetype=""text/plain"")
else:
    return HttpResponse(""false"", mimetype=""text/plain"")
</code></pre>

<p>I appreciate any help! Thanks!</p>

<p>Edit: Also a side question. Do I use objects.get(id= or objects.get(pk= ?   If I use a primary key, do I need to declare an id field or an index in the model?</p>

<p>Edit: Here are the relevant models:</p>

<pre><code>class User (models.Model):
    first_name = models.CharField(max_length=200)
    last_name = models.CharField(max_length=200)
    email = models.CharField(max_length=200)
    password = models.CharField(max_length=200)

class Idea (models.Model):
    user = models.ForeignKey(User)
    title = models.CharField(max_length=200)
    description = models.CharField(max_length=255)
    num_votes = models.IntegerField()
</code></pre>
"
293344,30786,2008-11-16T01:52:15Z,24,"wxPython, Set value of StaticText()","<p>I am making a little GUI frontend for a app at the moment using wxPython.</p>

<p>I am using <code>wx.StaticText()</code> to create a place to hold some text, code below:</p>

<pre><code>content = wx.StaticText(panel, -1, ""Text Here"", style=wx.ALIGN_CENTRE)
</code></pre>

<p>I have a button when clicked retrieves data from MySQL, I am wanting to change the value of the <code>StaticText()</code> to the MySQL data or what else could I use the hold the data.</p>

<p>I have tried using the below method: </p>

<pre><code>contents = wx.TextCtrl(bkg, style=wx.TE_MULTILINE | wx.HSCROLL)
content.SetValue(""New Text"")
</code></pre>

<p>This displays the data fine but after the data is loaded you can edit the data and I do not want this.</p>

<p>Hope you guys understand what I am trying to do, I am new to Python :)</p>

<p>Cheers</p>
"
293431,NA,2008-11-16T03:29:59Z,45,Python object deleting itself,"<p>Why won't this work?  I'm trying to make an instance of a class delete itself.</p>

<pre><code>&gt;&gt;&gt; class A():
    def kill(self):
    	del self


&gt;&gt;&gt; a = A()
&gt;&gt;&gt; a.kill()
&gt;&gt;&gt; a
&lt;__main__.A instance at 0x01F23170&gt;
</code></pre>
"
293444,2153,2008-11-16T03:39:45Z,3,Python help - Parsing Packet Logs,"<p>I'm writing a simple program that's going to parse a logfile of a packet dump from wireshark into a more readable form. I'm doing this with python.</p>

<p>Currently I'm stuck on this part:</p>

<pre><code>for i in range(len(linelist)):
if '### SERVER' in linelist[i]:
	#do server parsing stuff

	packet = linelist[i:find(""\n\n"", i, len(linelist))]
</code></pre>

<p>linelist is a list created using the readlines() method, so every line in the file is an element in the list. I'm iterating through it for all occurances of ""### SERVER"", then grabbing all lines after it until the next empty line(which signifies the end of the packet). I must be doing something wrong, because not only is find() not working, but I have a feeling there's a better way to grab everything between ### SERVER and the next occurance of a blank line.</p>

<p>Any ideas?</p>
"
293482,8024,2008-11-16T04:14:57Z,15,How do I fix wrongly nested / unclosed HTML tags?,"<p>I need to sanitize HTML submitted by the user by closing any open tags with correct nesting order. I have been looking for an algorithm or Python code to do this but haven't found anything except some half-baked implementations in PHP, etc.</p>

<p>For example, something like</p>

<pre><code>&lt;p&gt;
  &lt;ul&gt;
    &lt;li&gt;Foo
</code></pre>

<p>becomes</p>

<pre><code>&lt;p&gt;
  &lt;ul&gt;
    &lt;li&gt;Foo&lt;/li&gt;
  &lt;/ul&gt;
&lt;/p&gt;
</code></pre>

<p>Any help would be appreciated :)</p>
"
294285,13055,2008-11-16T19:43:27Z,10,"Python for Autohotkey style key-combination sniffing, automation?","<p>I want to automate several tasks (eg. simulate eclipse style ctrl-shift-r open dialog for other editors). The general pattern is: the user will press some key combination, my program will detect it and potentially pop up a dialog to get user input, and then run a corresponding command, typically by running an executable.</p>

<p>My target environment is windows, although cross-platform would be nice. My program would be started once, read a configuration file, and sit in the background till triggered by a key combination or other event.</p>

<p>Basically autohotkey.</p>

<p>Why not just use autohotkey? I actually have quite a few autohotkey macros, but I'd prefer to use a saner language.</p>

<p>My question is: is there a good way to have a background python process detect key combinations?</p>

<p>Update: found the answer using pyHook and the win32 extensions:</p>

<pre><code>import pyHook
import pythoncom

def OnKeyboardEvent(event):
    print event.Ascii

hm = pyHook.HookManager()
hm.KeyDown = OnKeyboardEvent
hm.HookKeyboard()

while True:
    pythoncom.PumpMessages()
</code></pre>
"
294313,2327,2008-11-16T20:05:42Z,20,unpacking an array of arguments in php,"<p>Python provides the ""*"" operator for unpacking a list of tuples and giving them to a function as arguments, like so:</p>

<pre><code>args = [3, 6]
range(*args)            # call with arguments unpacked from a list
</code></pre>

<p>This is equivalent to:</p>

<pre><code>range(3, 6)
</code></pre>

<p>Does anyone know if there is a way to achieve this in PHP? Some googling for variations of ""PHP Unpack"" hasn't immediately turned up anything.. perhaps it's called something different in PHP?</p>
"
294470,37141,2008-11-16T22:11:25Z,11,How do I find userid by login (Python under *NIX),"<p>I need to set my process to run under 'nobody', I've found os.setuid(), but how do I find <code>uid</code> if I have <code>login</code>?</p>

<p>I've found out that uids are in /etc/passwd, but maybe there is a more pythonic way than scanning /etc/passwd. Anybody?</p>
"
294504,38096,2008-11-16T22:38:41Z,11,Python UPnP/IGD Client Implementation?,"<p>I am searching for an open-source implementation of an <a href=""http://elinux.org/UPnP"" rel=""nofollow"">UPnP</a> client in Python, and more specifically of its <a href=""http://en.wikipedia.org/wiki/Internet_Gateway_Device_Protocol"" rel=""nofollow"">Internet Gateway Device</a> (IGD) part.</p>

<p>For now, I have only been able to find UPnP Media Server implementations, in projects such as <a href=""http://pymediaserver.sourceforge.net/"" rel=""nofollow"">PyMediaServer</a>, <a href=""http://resnet.uoregon.edu/~gurney_j/jmpc/pymeds.html"" rel=""nofollow"">PyMedS</a>, <a href=""http://brisa.garage.maemo.org/"" rel=""nofollow"">BRisa</a> or <a href=""https://coherence.beebits.net/"" rel=""nofollow"">Coherence</a>.</p>

<p>I am sure I could use those code bases as a start, but the Media Server part will introduce unneeded complexity.</p>

<p>So can you recommend a client UPnP (and hopefully IGD) Python library? An alternative would be to dispatch calls to a C library such as <a href=""http://miniupnp.free.fr/"" rel=""nofollow"">MiniUPnP</a>, but I would much prefer a pure Python implementation.</p>

<p>Update: an interesting, kind of related discussion of SSDP and UPnP is available on <a href=""http://stackoverflow.com/questions/22321/remoting-server-auto-discovery-broadcast-or-not"">StackOverflow</a>.</p>
"
294520,37181,2008-11-16T22:58:22Z,4,What are some techniques for code generation?,"<p>I'm generating C++ code, and it seems like it's going to get very messy, even my simple generating classes already have tons of special cases.  Here is the code as it stands now: <a href=""http://github.com/alex/alex-s-language/tree/local%2Fcpp-generation/alexs_lang/cpp"" rel=""nofollow"">http://github.com/alex/alex-s-language/tree/local%2Fcpp-generation/alexs_lang/cpp</a> .</p>
"
294607,23695,2008-11-17T00:05:46Z,4,"What is the regular expression for the ""root"" of a website in django?","<p>I'm using django and when users go to www.website.com/ I want to point them to the index view.</p>

<p>Right now I'm doing this:</p>

<pre><code>(r'^$', 'ideas.idea.views.index'),
</code></pre>

<p>However, it's not working. I'm assuming my regular expression is wrong. Can anyone help me out? I've looked at python regular expressions but they didn't help me. </p>
"
294712,5142,2008-11-17T01:47:51Z,7,Flattening one-to-many relationship in Django,"<p>I have a few model classes with basic one-to-many relationships.  For example, a book has many recipes, and each recipe has many ingredients:</p>

<pre><code>class Book(models.Model):
    name = models.CharField(max_length=64)

class Recipe(models.Model):
    book = models.ForeignKey(Book)
    name = models.CharField(max_length=64)

class Ingredient(models.Model):
    text = models.CharField(max_length=128)
    recipe = models.ForeignKey(Recipe)
</code></pre>

<p>I'd like a flat list of all ingredients in all recipes from a particular book.  What's the best way to express this in Python?</p>

<p>If I was using LINQ, I might write something like this:</p>

<pre><code>var allIngredients = from recipe in book.Recipes
                     from ingredient in recipe.Ingredients
                     select ingredient;
</code></pre>
"
294766,36312,2008-11-17T02:43:21Z,1,What is the best way to distribute a python program extended with custom c modules?,"<p>I've explored python for several years, but now I'm slowly learning how to work with c.  Using the <a href=""http://www.python.org/doc/2.5.2/ext/intro.html"" rel=""nofollow"">python documentation</a>, I learned how to extend my python programs with some c, since this seemed like the logical way to start playing with it.  My question now is how to distribute a program like this.</p>

<p>I suppose the heart of my question is how to compile things.  I can do this easily on my own machine (gentoo), but a binary distribution like Ubuntu probably doesn't have a compiler available by default.  Plus, I have a few friends who are mac users.  My instinct says that I can't just compile with my own machine and then run it on another.  Anyone know what I can do, or some online resources for learning things like this?</p>
"
294960,34537,2008-11-17T05:42:14Z,0,Pycurl WRITEDATA WRITEFUNCTION collision/crash,"<p>How do I turnoff WRITEFUNCTION and WRITEDATA?</p>

<p>Using pycurl I have a class call curlUtil. In it I have pageAsString (self, URL) which returns a string. </p>

<p>To do this I setopt WRITEFUNCTION. Now in downloadFile (self, URL, fn, overwrite=0) I do an open and self.c.Setopt (pycurl.WRITEFUNCTION, 0) which cause problems. Int is not a valid argument. </p>

<p>I then assumed WRITEDATA would overwrite the value or there would be a NOWRITEFUNCTION commend. NOWRITEFUNCTION didn't exist so I just used WRITEDATA and Python crashed. </p>

<p>I wrote a quick func called reboot() which closes curl, opens it again, and calls reset to put it in the default state. I call it in both pageAsString and downloadFile and there is no problem at all. But, I don't want to reinitialize curl. There might be some special options I set. </p>

<p>How do I turnoff WRITEFUNCTION and WRITEDATA?</p>
"
294963,31056,2008-11-17T05:44:44Z,1,How do I count bytecodes in Python so I can modify sys.setcheckinterval appropriately,"<p>I have a port scanning application that uses work queues and threads.</p>

<p>It uses simple TCP connections and spends a lot of time waiting for packets to come back (up to half a second). Thus the threads don't need to fully execute (i.e. first half sends a packet, context switch, does stuff, comes back to thread which has network data waiting for it).</p>

<p>I suspect I can improve performance by modifying the <code>sys.setcheckinterval</code> from the default of 100 (which lets up to 100 bytecodes execute before switching to another thread).</p>

<p>But without knowing how many bytecodes are actually executing in a thread or function I'm flying blind and simply guessing values, testing and relying on the testing shows a measurable difference (which is difficult since the amount of code being executed is minimal; a simple socket connection, thus network jitter will likely affect any measurements more than changing sys.setcheckinterval).</p>

<p>Thus I would like to find out how many bytecodes are in certain code executions (i.e. total for a function or in execution of a thread) so I can  make more intelligent guesses at what to set sys.setcheckinterval to.</p>
"
295028,2220518,2008-11-17T06:55:05Z,0,Inplace substitution from ConfigParser,"<p>I have a very tricky situation (for my standards) in hand. I have a script that needs to read a script variable name from <a href=""https://docs.python.org/2/library/configparser.html"" rel=""nofollow"">ConfigParser</a>. For example, I need to read</p>

<pre><code>self.post.id
</code></pre>

<p>from a .cfg file and use it as a variable in the script. How do I achieve this?</p>

<p>I suppose I was unclear in my query. The .cfg file looks something like:</p>

<pre><code>[head]
test: me
some variable : self.post.id
</code></pre>

<p>This self.post.id is to be replaced at the run time, taking values from the script.</p>
"
295058,2220518,2008-11-17T07:32:09Z,20,Convert a string to preexisting variable names,"<p>How do I convert a string to the variable name in <a href=""http://en.wikipedia.org/wiki/Python_%28programming_language%29"">Python</a>?</p>

<p>For example, if the program contains a object named <code>self.post</code> that contains a variable named, I want to do something like:</p>

<pre><code>somefunction(""self.post.id"") = |Value of self.post.id|
</code></pre>
"
295135,37134,2008-11-17T09:02:07Z,160,Turn a string into a valid filename in Python,"<p>I have a string that I want to use as a filename, so I want to remove all characters that wouldn't be allowed in filenames, using Python.</p>

<p>I'd rather be strict than otherwise, so let's say I want to retain only letters, digits, and a small set of other characters like <code>""_-.() ""</code>. What's the most elegant solution?</p>

<p>The filename needs to be valid on multiple operating systems (Windows, Linux and Mac OS) - it's an MP3 file in my library with the song title as the filename, and is shared and backed up between 3 machines.</p>
"
295195,10264,2008-11-17T09:46:19Z,3,How do I add a directory with a colon to PYTHONPATH?,"<p>The problem is simple:</p>

<p>Using bash, I want to add a directory to my PYTHONPATH for ease of script execution. Unfortunately, the directory I want to use has a : in it. So I try each of the following</p>

<pre><code>export PYTHONPATH=${PYTHONPATH}:/home/shane/mywebsite.com:3344/
export PYTHONPATH=${PYTHONPATH}:/home/shane/mywebsite.com\:3344/
export PYTHONPATH=${PYTHONPATH}:""/home/shane/mywebsite.com:3344/""
</code></pre>

<p>None of these work. Every time, the path is created as two separate directories on the path in python.
My question is, is it possible to do this for bash?
If so, what's the syntax required?</p>
"
295438,1771,2008-11-17T12:07:40Z,57,How can one mock/stub python module like urllib,"<p>I need to test a function that needs to query a page on an external server using urllib.urlopen (it also uses urllib.urlencode). The server could be down, the page could change; I can't rely on it for a test.</p>

<p>What is the best way to control what urllib.urlopen returns?</p>
"
295459,3715,2008-11-17T12:17:49Z,27,How do I use subprocess.Popen to connect multiple processes by pipes?,"<p>How do I execute the following shell command using the Python <a href=""https://docs.python.org/library/subprocess.html""><code>subprocess</code></a> module?</p>

<pre><code>echo ""input data"" | awk -f script.awk | sort &gt; outfile.txt
</code></pre>

<p>The input data will come from a string, so I don't actually need <code>echo</code>.  I've got this far, can anyone explain how I get it to pipe through <code>sort</code> too?</p>

<pre><code>p_awk = subprocess.Popen([""awk"",""-f"",""script.awk""],
                          stdin=subprocess.PIPE,
                          stdout=file(""outfile.txt"", ""w""))
p_awk.communicate( ""input data"" )
</code></pre>

<p><strong>UPDATE</strong>:  Note that while the accepted answer below doesn't actually answer the question as asked, I believe S.Lott is right and it's better to avoid having to solve that problem in the first place!</p>
"
295670,31179,2008-11-17T14:24:32Z,8,What is a partial class?,"<p>What is and how can it be used in C#.<br/>
Can you use the same concept in Python/Perl?</p>
"
296036,32880,2008-11-17T16:21:43Z,22,Does python optimize modules when they are imported multiple times?,"<p>If a large module is loaded by some submodule of your code, is there any benefit to referencing the module from that namespace instead of importing it again?</p>

<p>For example:
I have a module MyLib, which makes extensive use of ReallyBigLib. If I have code that imports MyLib, should I dig the module out like so</p>

<pre><code>import MyLib
ReallyBigLib = MyLib.SomeModule.ReallyBigLib
</code></pre>

<p>or just</p>

<pre><code>import MyLib
import ReallyBigLib
</code></pre>
"
296173,37804,2008-11-17T17:02:43Z,14,How do I copy files with specific file extension to a folder in my python (version 2.5) script?,"<p>I'd like to copy the files that have a specific file extension to a new folder. I have an idea how to use <code>os.walk</code> but specifically how would I go about using that? I'm searching for the files with a specific file extension in only one folder (this folder has 2 subdirectories but the files I'm looking for will never be found in these 2 subdirectories so I don't need to search in these subdirectories). Thanks in advance.</p>
"
296270,10040,2008-11-17T17:37:44Z,4,Which is more efficient in Python: standard imports or contextual imports?,"<p>I apologize in advance if this question seems remedial.</p>

<p>Which would be considered more efficient in Python:</p>

<p><strong>Standard import</strong></p>

<pre><code>import logging

try:
  ...some code...
exception Exception, e:
  logging.error(e)
</code></pre>

<p>...or...</p>

<p><strong>Contextual import</strong></p>

<pre><code>try:
  ...some code...
exception Exception, e:
  import logging
  logging.error(e)
</code></pre>
"
296490,37804,2008-11-17T18:56:12Z,0,How do I remove a specific number of files using python (version 2.5)?,"<p>I would like to remove two files from a folder at the conclusion of my script. Do I need to create a function responsible for removing these two specific files? I would like to know in some detail how to use os.remove (if that is what I should use) properly. These two files will always be discarded at the conclusion of my script (which packages a series of files together in a zip format). Thanks in advance.  </p>
"
296499,37804,2008-11-17T19:00:07Z,27,How do I zip the contents of a folder using python (version 2.5)?,"<p>Once I have all the files I require in a particular folder, I would like my python script to zip the folder contents. Is this possible? And how could I go about doing it? A point in the right direction (i.e. a link with an example) or an example that I can see would be extremely helpful. Thanks in advance.</p>
"
296650,13055,2008-11-17T19:48:44Z,61,"Performance comparison of Thrift, Protocol Buffers, JSON, EJB, other?","<p>We're looking into transport/protocol solutions and were about to do various performance tests, so I thought I'd check with the community if they've already done this:</p>

<p>Has anyone done server performance tests for simple echo services as well as serialization/deserialization for various messages sizes comparing EJB3, Thrift, and Protocol Buffers on Linux?</p>

<p>Primarily languages will be Java, C/C++, Python, and PHP.</p>

<p>Update: I'm still very interested in this, if anyone has done any further benchmarks please let me know. Also, very interesting benchmark showing <a href=""http://bouncybouncy.net/ramblings/posts/more%5Fon%5Fjson%5Fvs%5Fthrift%5Fand%5Fprotocol%5Fbuffers/"">compressed JSON performing similar / better than Thrift / Protocol Buffers</a>, so I'm throwing JSON into this question as well.</p>
"
297112,19731,2008-11-17T22:03:24Z,8,how do i use python libraries in C++?,"<p>I want to use the <a href=""http://nltk.sourceforge.net/index.php/Main_Page"">nltk</a> libraries in c++. </p>

<p>Is there a glue language/mechanism I can use to do this? </p>

<p>Reason:
I havent done any serious programming in c++ for a while  and want to revise NLP concepts at the same time.</p>

<p>Thanks</p>
"
297239,2168,2008-11-17T22:42:58Z,20,Why doesn't xpath work when processing an XHTML document with lxml (in python)?,"<p>I am testing against the following test document:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;
&lt;!DOCTYPE html PUBLIC ""-//W3C//DTD XHTML 1.0 Strict//EN"" 
                      ""http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd""&gt;
&lt;html xmlns=""http://www.w3.org/1999/xhtml""&gt;
   &lt;head&gt;
        &lt;title&gt;hi there&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;img class=""foo"" src=""bar.png""/&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>If I parse the document using lxml.html, I can get the IMG with an xpath just fine:</p>

<pre><code>&gt;&gt;&gt; root = lxml.html.fromstring(doc)
&gt;&gt;&gt; root.xpath(""//img"")
[&lt;Element img at 1879e30&gt;]
</code></pre>

<p>However, if I parse the document as XML and try to get the IMG tag, I get an empty result:</p>

<pre><code>&gt;&gt;&gt; tree = etree.parse(StringIO(doc))
&gt;&gt;&gt; tree.getroot().xpath(""//img"")
[]
</code></pre>

<p>I can navigate to the element directly:</p>

<pre><code>&gt;&gt;&gt; tree.getroot().getchildren()[1].getchildren()[0]
&lt;Element {http://www.w3.org/1999/xhtml}img at f56810&gt;
</code></pre>

<p>But of course that doesn't help me process arbitrary documents.  I would also expect to be able to query etree to get an xpath expression that will directly identify this element, which, technically I can do:</p>

<pre><code>&gt;&gt;&gt; tree.getpath(tree.getroot().getchildren()[1].getchildren()[0])
'/*/*[2]/*'
&gt;&gt;&gt; tree.getroot().xpath('/*/*[2]/*')
[&lt;Element {http://www.w3.org/1999/xhtml}img at fa1750&gt;]
</code></pre>

<p>But that xpath is, again, obviously not useful for parsing arbitrary documents.</p>

<p>Obviously I am missing some key issue here, but I don't know what it is.  My best guess is that it has something to do with namespaces but the only namespace defined is the default and I don't know what else I might need to consider in regards to namespaces.</p>

<p>So, what am I missing?</p>
"
297294,8027,2008-11-17T23:04:50Z,2,Integrating command-line generated python .coverage files with PyDev,"<p>My build environment is configured to compile, run and create coverage file at the command line (using Ned Batchelder coverage.py tool). </p>

<p>I'm using Eclipse with PyDev as my editor, but for practical reasons, it's not possible/convenient for me to convert my whole build environment to Eclipse (and thus generate the coverage data directly from the IDE, as it's designed to do)</p>

<p>PyDev seems to be using the same coverage tool (or something very similar to it) to generate its coverage information, so I'm guessing there should be some way of integrating my external coverage files into Eclipse/PyDev.</p>

<p>Any idea on how to do this?</p>
"
297345,9161,2008-11-17T23:27:03Z,15,Create a zip file from a generator in Python?,"<p>I've got a large amount of data (a couple gigs) I need to write to a zip file in Python.  I can't load it all into memory at once to pass to the .writestr method of ZipFile, and I really don't want to feed it all out to disk using temporary files and then read it back.</p>

<p>Is there a way to feed a generator or a file-like object to the ZipFile library?  Or is there some reason this capability doesn't seem to be supported?</p>

<p>By zip file, I mean zip file.  As supported in the Python zipfile package.</p>
"
297383,22306,2008-11-17T23:44:27Z,17,Dynamically update ModelForm's Meta class,"<p>I am hoping to dynamically update a ModelForm's inline Meta class from my view. Although this code seems to update the exclude list in the Meta class, the output from <code>as_p()</code>, <code>as_ul()</code>, etc does not reflect the updated Meta exclude.</p>

<p>I assume then that the html is generated when the ModelForm is created not when the <code>as_*()</code> is called. Is there a way to force the update of the HTML? </p>

<p>Is this even the best way to do it? I just assumed this <em>should</em> work.</p>

<p>Thoughts?</p>

<pre><code>from django.forms import ModelForm

from testprogram.online_bookings.models import Passenger

class PassengerInfoForm(ModelForm):

    def set_form_excludes(self, exclude_list):
        self.Meta.exclude = excludes_list

    class Meta:
        model = Passenger
        exclude = []
</code></pre>
"
298004,21537,2008-11-18T06:32:35Z,1,python (jython) archiving library,"<p>Is there a neat archiving library that automatically handles archiving a folder or directories for you out there?
I am using Jython, so Java libs are also open for use.
-UPDATE-
Also Im looking for timestamp archiving. ie </p>

<p>archive-dir/2008/11/16/zipfilebypreference.zip</p>

<p>then the next day call it again and it creates another folder.
Im sure there is something out there on the internet, who knows?</p>
"
298034,985,2008-11-18T07:12:39Z,0,How to make the keywords recognizable in simpleparse?,"<p>I've been trying to create a parser using simpleparse. I've defined the grammar like this:</p>

<pre><code>&lt;w&gt; := [ \n]*
statement_list := statement,(w,statement)?
statement := ""MOVE"",w,word,w,""TO"",w,(word,w)+
word := [A-Za-z],[A-Za-z0-9]*,([-]+,[A-Za-z0-9]+)*
</code></pre>

<p>Now if I try to parse a string</p>

<pre><code>MOVE ABC-DEF TO ABC
MOVE DDD TO XXX
</code></pre>

<p>The second statement gets interpreted as parameters of the first one... This sucks and is obviously not what I want. I have been able to get this working using pyparsing like this:</p>

<pre><code>word = Word(alphas,alphanums+'-')
statement = ""MOVE""+word+""TO""+word
statement_list = OneOrMore(statement.setResultsName('statement',True))
</code></pre>

<p>Is there any way to get this working in simpleparse as well?</p>

<p><em>EDIT: clarification below</em></p>

<p>I am not trying to achieve a line-based grammar. What I would like to see being parsed is:</p>

<p>Simple case</p>

<pre><code>MOVE AA TO BB
</code></pre>

<p>More comlex case</p>

<pre><code>MOVE AA TO BB 
           CC DD 
           EE FF
</code></pre>

<p>Several of the above statments</p>

<pre><code>MOVE AA TO BB 
           CC
MOVE CC TO EE
MOVE EE TO FF 
           GG 
           HH IIJJK
</code></pre>
"
298185,NA,2008-11-18T08:51:41Z,3,Optimization of Google App Engine Code,"<p>Google app engine tells me to optimize this code. Anybody any ideas what I could do?</p>

<pre><code>def index(request):
    user = users.get_current_user()
    return base.views.render('XXX.html', 
                 dict(profiles=Profile.gql("""").fetch(limit=100), user=user))
</code></pre>

<p>And later in the template I do:</p>

<pre><code>{% for profile in profiles %}
  &lt;a href=""/profile/{{profile.user.email}}/""&gt;&lt;img src=""{{profile.gravatarUrl}}""&gt;&lt;/a&gt;
  &lt;a href=""/profile/{{profile.user.email}}/""&gt;{{ profile.user.nickname }}&lt;/a&gt;
  &lt;br/&gt;{{ profile.shortDisplay }}
</code></pre>

<p>Where the methods used are:</p>

<pre><code>def shortDisplay(self):
    return ""%s/day; %s/week; %s days"" % (self.maxPerDay, self.maxPerWeek, self.days)

def gravatarUrl(self):
    email = self.user.email().lower()
    default = ""...""
    gravatar_url = ""http://www.gravatar.com/avatar.php?""
    gravatar_url += urllib.urlencode({'gravatar_id':hashlib.md5(email).hexdigest(), 
        'default':default, 'size':""64""})
    return gravatar_url
</code></pre>
"
298446,11522,2008-11-18T11:05:53Z,0,Looping in Django forms,"<p>I've just started building a prototype application in Django. I started out by working through the <a href=""http://docs.djangoproject.com/en/dev/intro/tutorial01/"" rel=""nofollow"">Django app tutorial on the Django site</a> which was pretty helpful, and gave me what I needed to get started. Now I have a couple of what I hope are very simple questions:</p>

<p>I want to put a loop into views.py, looping over a set of variables that have been passed in from a form. So I have a load of items in the HTML form, each of which has a SELECT drop-down list for people to select a score from 0-10, like this:</p>

<pre><code>&lt;select name=""score1""&gt;
  &lt;option value=0 SELECTED&gt;No score&lt;/option&gt;
  &lt;option value=1&gt;1&lt;/option&gt;
  &lt;option value=2&gt;2&lt;/option&gt;
  &lt;option value=3&gt;3&lt;/option&gt;
  &lt;option value=4&gt;4&lt;/option&gt;
  &lt;option value=5&gt;5&lt;/option&gt;
  &lt;option value=6&gt;6&lt;/option&gt;
  &lt;option value=7&gt;7&lt;/option&gt;
  &lt;option value=8&gt;8&lt;/option&gt;
  &lt;option value=9&gt;9&lt;/option&gt;
  &lt;option value=10&gt;10&lt;/option&gt;
&lt;/select&gt;
</code></pre>

<p>So I have, let's say, 100 of these variables, score1, score2, score3, ..., score99, score100. When the form is submitted, I want to loop through each of these variables and see if it's been set (i.e. is not 0) and if so, I want to store that value in a suitable place in the database. My problem is that I can't figure out how to loop through those variables.
I'm guessing that I want something like this:</p>

<pre><code>for o in request.POST.all

endfor
</code></pre>

<p>but then I'm really not sure what to do with that.</p>

<p>I'm not looking for someone to write the code for me, really: I just would like some guidance on how to write a loop like this in python / Django, and also maybe some pointers as to a good reference guide I can either see online or buy that will give me access to this kind of thing.</p>

<p>Also, the select object above I created pretty much by hand, and I'd really like to be able to ue a loop to generate it in the template in the first place. My template currently has this:</p>

<pre><code>&lt;table&gt;
{% for movie in movie_list %}
  &lt;tr&gt;
  &lt;td&gt; {{ movie }} &lt;/td&gt;
  &lt;td&gt;
       &lt;select name=""score{{ movie.id }}""&gt;
         &lt;option value=0 SELECTED&gt;No score&lt;/option&gt;
         &lt;option value=1&gt;1&lt;/option&gt;
         &lt;option value=2&gt;2&lt;/option&gt;
         &lt;option value=3&gt;3&lt;/option&gt;
         &lt;option value=4&gt;4&lt;/option&gt;
         &lt;option value=5&gt;5&lt;/option&gt;
         &lt;option value=6&gt;6&lt;/option&gt;
         &lt;option value=7&gt;7&lt;/option&gt;
         &lt;option value=8&gt;8&lt;/option&gt;
         &lt;option value=9&gt;9&lt;/option&gt;
         &lt;option value=10&gt;10&lt;/option&gt;

       &lt;/select&gt;
  &lt;/td&gt;&lt;/tr&gt;

{% endfor %}
&lt;/table&gt;
</code></pre>

<p>I feel like there must be a way to create a simple loop that counts from 1 to 10 that would generate most of those options for me, but I can't figure out how to do that...</p>
"
298772,38581,2008-11-18T13:52:31Z,92,Django Template Variables and Javascript,"<p>When I render a page using the Django template renderer, I can pass in a dictionary variable containing various values to manipulate them in the page using <code>{{ myVar }}</code>.</p>

<p>Is there a way to access the same variable in Javascript (perhaps using the DOM, I don't know how Django makes the variables accessible)? I want to be able to lookup details using an AJAX lookup based on the values contained in the variables passed in.</p>
"
298779,11522,2008-11-18T13:55:17Z,3,Form (or Formset?) to handle multiple table rows in Django,"<p>I'm working on my first Django application. In short, what it needs to do is to display a list of film titles, and allow users to give a rating (out of 10) to each film. I've been able to use the {{ form }} and {{ formset }} syntax in a template to produce a form which lets you rate one film at a time, which corresponds to one row in a MySQL table, but how do I produce a form that iterates over all the movie titles in the database and produces a form that lets you rate lots of them at once? </p>

<p>At first, I thought this was what formsets were for, but I can't see any way to automatically iterate over the contents of a database table to produce items to go in the form, if you see what I mean.</p>

<p>Currently, my views.py has this code:</p>

<pre><code>def survey(request):
        ScoreFormSet = formset_factory(ScoreForm)
        if request.method == 'POST':
                formset = ScoreFormSet(request.POST, request.FILES)
                if formset.is_valid():
                        return HttpResponseRedirect('/')
        else:
                formset = ScoreFormSet()
        return render_to_response('cf/survey.html', {
                'formset':formset,
        })
</code></pre>

<p>And my survey.html has this:</p>

<pre><code>&lt;form action=""/survey/"" method=""POST""&gt;
&lt;table&gt;
{{ formset }}
&lt;/table&gt;
  &lt;input type = ""submit"" value = ""Submit""&gt;
&lt;/form&gt;
</code></pre>

<p>Oh, and the definition of ScoreForm and Score from models.py are:</p>

<pre><code>class Score(models.Model):
        movie = models.ForeignKey(Movie)
        score = models.IntegerField()
        user = models.ForeignKey(User)

class ScoreForm(ModelForm):
        class Meta:
                model = Score
</code></pre>

<p>So, in case the above is not clear, what I'm aiming to produce is a form which has one row per movie, and each row shows a title, and has a box to allow the user to enter their score.</p>

<p>If anyone can point me at the right sort of approach to this, I'd be most grateful.</p>
"
298782,11677,2008-11-18T13:56:04Z,3,Python xml.dom.minidom.parse() function ignores DTDs,"<p>I have the following Python code:  </p>

<pre><code>import xml.dom.minidom
import xml.parsers.expat

try:
    domTree = ml.dom.minidom.parse(myXMLFileName)
except xml.parsers.expat.ExpatError, e:
    return e.args[0]
</code></pre>

<p>which I am using to parse an XML file. Although it quite happily spots simple XML errors like mismatched tags, it completely ignores the DTD specified at the top of the XML file:  </p>

<pre><code>&lt;?xml version=""1.0"" encoding=""UTF-8"" standalone=""no"" ?&gt;
&lt;!DOCTYPE ServerConfig SYSTEM ""ServerConfig.dtd""&gt;
</code></pre>

<p>so it doesn't notice when mandatory elements are missing, for example. How can I switch on DTD checking?</p>
"
298828,30289,2008-11-18T14:10:22Z,0,Python Distutils,"<p>I was unable to install <a href=""http://cython.org/"" rel=""nofollow"">cython</a> due to <a href=""http://epydoc.sourceforge.net/stdlib/distutils.version.StrictVersion-class.html"" rel=""nofollow"">strict version numbering class</a> of <a href=""http://www.python.org/doc/2.5.2/dist/dist.html"" rel=""nofollow"">Distutils</a>. For example binutils-2.18.50-20080109-2.tar.gz cannot be used along with <a href=""http://mingw.org/"" rel=""nofollow"">MinGW</a> for installing cython. The <a href=""http://epydoc.sourceforge.net/stdlib/distutils.version.StrictVersion-class.html"" rel=""nofollow"">source code documentation</a> says that ""The rationale for this version numbering system will be explained in the distutils documentation."" I am unable to find the rationale. </p>

<p>My question: What is the rationale for this version numbering system?</p>
"
299249,37804,2008-11-18T16:22:39Z,3,How can I get my python (version 2.5) script to run a jar file inside a folder instead of from command line?,"<p>I am familiar with using the <em>os.system</em> to run from the command line. However, I would like to be able to run a jar file from inside of a specific folder, eg. my 'test' folder. This is because my jar (located in my 'test' folder) requires a file inside of my 'test' folder. So, how would I write a function in my script that does the following: <code>c:\test&gt;java -jar run_this.jar required_parameter.ext</code> ? I'm a python newbie so details are greatly appreciated. Thanks in advance.   </p>
"
299446,37804,2008-11-18T17:19:47Z,5,How do I change directory back to my original working directory with Python?,"<p>I have a function that resembles the one below. I'm not sure how to use the os module to get back to my original working directory at the conclusion of the jar's execution. </p>

<pre><code>def run(): 
    owd = os.getcwd()
    #first change dir to build_dir path
    os.chdir(testDir)
    #run jar from test directory
    os.system(cmd)
    #change dir back to original working directory (owd)
</code></pre>

<p>note: I think my code formatting is off - not sure why. My apologies in advance</p>
"
299588,1694,2008-11-18T17:59:56Z,67,Validating with an XML schema in Python,"<p>I have an XML file and an XML schema in another file and I'd like to validate that my XML file adheres to the schema.  How do I do this in Python?</p>

<p>I'd prefer something using the standard library, but I can install a third-party package if necessary.</p>
"
299913,11522,2008-11-18T19:51:54Z,3,Calling Java (or python or perl) from a PHP script,"<p>I've been trying to build a simple prototype application in Django, and am reaching the point of giving up, sadly, as it's just too complicated (I know it would be worth it in the long-run, but I really just don't have enough time available -- I need something up and running in a few days). So, I'm now thinking of going with PHP instead, as it's the method for creating dynamic web content I'm most familiar with, and I know I can get something working quickly.</p>

<p>My application, while simple, is probably going to be doing some reasonably complex AI stuff, and it may be that libraries don't exist for what I need in PHP. So I'm wondering how easy / possible it is for a PHP script to ""call"" a Java program or Python script or a program or script in another language. It's not entirely clear to me what exactly I mean by ""call"" in this context, but I guess I probably mean that ideally I'd like to define a function in, let's say Java, and then be able to call it from PHP. If that's not possible, then I guess my best bet (assuming I do go with PHP) will be to pass control directly to the external program explicitly through a POST or GET to a CGI program or similar.</p>

<p>Feel free to convince me I should stick with Django, although I'm really at the point where I just can't figure out what model I need to produce the HTML form I want, which seems such a basic thing that I fear for my chances of doing anything more complex...</p>

<p>Alternatively, anyone who can offer any advice on linking PHP and other languages, that'll be grateful received.</p>
"
300032,30105,2008-11-18T20:29:33Z,0,Is it possible to bind an event against a menu instead of a menu item in wxPython?,"<p>Nothing to add</p>
"
300047,35247,2008-11-18T20:35:12Z,1,Why is fuse not using the class supplied in file_class,"<p>I have a python fuse project based on the Xmp example in the fuse documentation. I have included a small piece of the code to show how this works. For some reason get_file does get called and the class gets created, but instead of fuse calling .read() on the class from get_file (file_class) fuse keeps calling Dstorage.read() which defeats the purpose in moving the read function out of that class.</p>

<pre><code>class Dstorage(Fuse, Distributor):
    def get_file(self, server, path, flags, *mode):
        pass
        # This does some work and passes back an instance of
        # a class very similar to XmpFile

    def main(self, *a, **kw):
        self.file_class = self.get_file
        return Fuse.main(self, *a, **kw)
</code></pre>

<p>I have my code hosted on launchpad, you can download it with this command.<br />
<strike>bzr co https://code.launchpad.net/~asa-ayers/+junk/dstorage</strike><br />
bzr branch lp:~asa-ayers/dstorage/trunk  </p>

<p><strong>solution:</strong><br />
I used a proxy class that subclasses the one I needed and in the constructor I get the instance of the class I need and overwrite all of the proxy's methods to simply call the instance methods.</p>
"
300445,12785,2008-11-18T22:49:27Z,38,How to unquote a urlencoded unicode string in python?,"<p>I have a unicode string like ""Tanım"" which is encoded as ""Tan%u0131m"" somehow. How can i convert this encoded string back to original unicode. 
Apparently urllib.unquote does not support unicode.</p>
"
301068,422,2008-11-19T05:22:47Z,34,Python - Backslash Quoting in String Literals,"<p>I have a string that contains both double-quotes and backslashes that I want to set to a variable in Python. However, whenever I try to set it, the quotes or slashes are either removed or escaped. Here's an example:</p>

<pre><code>&gt;&gt;&gt; foo = 'baz ""\""'
&gt;&gt;&gt; foo
'baz """"'
</code></pre>

<p>So instead of <code>baz ""\""</code> like I want I'm getting <code>baz """"</code>. If I then try to escape the backslash, it doesn't help either:</p>

<pre><code>&gt;&gt;&gt; foo = 'baz ""\\""'
&gt;&gt;&gt; foo
'baz ""\\""'
</code></pre>

<p>Which now matches what I put in but wasn't what I originally wanted. How do you get around this problem?</p>
"
301134,15061,2008-11-19T06:09:57Z,281,Dynamic module import in Python,"<p>I'm writing a Python application that takes as a command as an argument, for example:</p>

<pre><code>$ python myapp.py command1
</code></pre>

<p>I want the application to be extensible, that is, to be able to add new modules that implement new commands without having to change the main application source. The tree looks something like:</p>

<pre><code>myapp/
    __init__.py
    commands/
        __init__.py
        command1.py
        command2.py
    foo.py
    bar.py
</code></pre>

<p>So I want the application to find the available command modules at runtime and execute the appropriate one.</p>

<p>Currently this is implemented something like:</p>

<pre><code>command = sys.argv[1]
try:
    command_module = __import__(""myapp.commands.%s"" % command, fromlist=[""myapp.commands""])
except ImportError:
    # Display error message

command_module.run()
</code></pre>

<p>This works just fine, I'm just wondering if there is possibly a more idiomatic way to accomplish what we are doing with this code.</p>

<p>Note that I specifically don't want to get in to using eggs or extension points. This is not an open-source project and I don't expect there to be ""plugins"". The point is to simplify the main application code and remove the need to modify it each time a new command module is added.</p>
"
301239,21537,2008-11-19T07:29:41Z,0,"loadComponentFromURL falls over and dies, howto do CPR?","<p>Well I testing my jython program, that does some neat ["".xls"", "".doc"", "".rtf"", "".tif"", "".tiff"", "".pdf"" files]  -> pdf (intermediary file) -> tif (final output) conversion using Open Office. We moved away from MS Office due to the problems we had with automation. Now it seems we have knocked down  many bottles related to show stopper errors with one bottle remaining. OO hangs after a while.  </p>

<p>It happens where you see this line '&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;' in the code  </p>

<p>What is the correct way for me to handle a stalled Open Office process. could you please provide useful links, and give me a good suggestion on the way out.<br />
Also one more question.  </p>

<p>Sum up:<br />
* How to handle a stalled Open Office instance?<br />
* How to make conversion with java headless, so I dont have a GUI popping up all the time wasting memory.<br />
* also any general suggestions on code quality, optimizations and general coding standards will be most appreciated.
<hr /></p>

<p>Traceback (innermost last):<br />
  File ""dcmail.py"", line 184, in ?<br />
  File ""dcmail.py"", line 174, in main<br />
  File ""C:\DCMail\digestemails.py"", line 126, in process_inbox<br />
  File ""C:\DCMail\digestemails.py"", line 258, in _convert<br />
  File ""C:\DCMail\digestemails.py"", line 284, in _choose_conversion_type<br />
  File ""C:\DCMail\digestemails.py"", line 287, in _open_office_convert<br />
  File ""C:\DCMail\digestemails.py"", line 299, in _load_attachment_to_convert<br />
com.sun.star.lang.DisposedException: java.io.EOFException<br />
        at com.sun.star.lib.uno.bridges.java_remote.java_remote_bridge$MessageDi
spatcher.run(java_remote_bridge.java:176)  </p>

<p>com.sun.star.lang.DisposedException: com.sun.star.lang.DisposedException: java.i
o.EOFException  </p>

<p>Just to clear up this exception only throws when I kill the open office process. Otherwise the program just waits for open office to complete. Indefinitely<br />
<hr /></p>

<p>The Code (with non functional code tags)  </p>

<p>[code]    </p>

<blockquote>
  <blockquote>
    <p>#ghost script handles these file types<br />
        GS_WHITELIST=["".pdf""]<br />
        #Open Office handles these file types<br />
        OO_WHITELIST=["".xls"", "".doc"", "".rtf"", "".tif"", "".tiff""]<br />
        #whitelist is used to check against any unsupported files.<br />
        WHITELIST=GS_WHITELIST + OO_WHITELIST   </p>
  </blockquote>
</blockquote>

<pre><code>def _get_service_manager(self):
    try:
        self._context=Bootstrap.bootstrap();
        self._xMultiCompFactory=self._context.getServiceManager()
        self._xcomponentloader=UnoRuntime.queryInterface(XComponentLoader, self._xMultiCompFactory.createInstanceWithContext(""com.sun.star.frame.Desktop"", self._context))
    except:
        raise OpenOfficeException(""Exception Occurred with Open Office"")

def _choose_conversion_type(self,fn):
    ext=os.path.splitext(fn)[1]
    if ext in GS_WHITELIST:
        self._ghostscript_convert_to_tiff(fn)
    elif ext in OO_WHITELIST:
        self._open_office_convert(fn)

def _open_office_convert(self,fn):
    self._load_attachment_to_convert(fn)
    self._save_as_pdf(fn)
    self._ghostscript_convert_to_tiff(fn)

def _load_attachment_to_convert(self, file):
    file=self._create_UNO_File_URL(file)
    properties=[]
    p=PropertyValue()
    p.Name=""Hidden""
    p.Value=True
    properties.append(p)
    properties=tuple(properties) 
    self._doc=self._xcomponentloader.loadComponentFromURL(file, ""_blank"",0, properties) &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; here is line 299

def _create_UNO_File_URL(self, filepath):
    try:
        file=str(""file:///"" + filepath)
        file=file.replace(""\\"", ""/"")
    except MalformedURLException, e:
        raise e
    return file

def _save_as_pdf(self, docSource):
    dirName=os.path.dirname(docSource)
    baseName=os.path.basename(docSource)
    baseName, ext=os.path.splitext(baseName)
    dirTmpPdfConverted=os.path.join(dirName + DIR + PDF_TEMP_CONVERT_DIR)
    if not os.path.exists(dirTmpPdfConverted):
        os.makedirs(dirTmpPdfConverted)
    pdfDest=os.path.join(dirTmpPdfConverted + DIR + baseName + "".pdf"")
    url_save=self._create_UNO_File_URL(pdfDest)
    properties=self._create_properties(ext)
    try:
        try:
            self._xstorable=UnoRuntime.queryInterface(XStorable, self._doc);
            self._xstorable.storeToURL(url_save, properties)
        except AttributeError,e:
                self.logger.info(""pdf file already created ("" + str(e) + "")"")
                raise e
    finally:
        try:
            self._doc.dispose()
        except:
            raise

def _create_properties(self,ext):
    properties=[]
    p=PropertyValue()
    p.Name=""Overwrite""
    p.Value=True
    properties.append(p)
    p=PropertyValue()
    p.Name=""FilterName""
    if   ext=="".doc"":
        p.Value='writer_pdf_Export'
    elif ext=="".rtf"":
        p.Value='writer_pdf_Export'
    elif ext=="".xls"":
        p.Value='calc_pdf_Export'
    elif ext=="".tif"":
        p.Value='draw_pdf_Export'
    elif ext=="".tiff"":
        p.Value='draw_pdf_Export'
    properties.append(p)
    return tuple(properties)

def _ghostscript_convert_to_tiff(self, docSource):
    dest, source=self._get_dest_and_source_conversion_file(docSource)
    try:
        command = ' '.join([
            self._ghostscriptPath + 'gswin32c.exe',
           '-q',
           '-dNOPAUSE',
           '-dBATCH',
           '-r500',
           '-sDEVICE=tiffg4',
           '-sPAPERSIZE=a4',
           '-sOutputFile=%s %s' % (dest, source),
           ])
        self._execute_ghostscript(command)
        self.convertedTifDocList.append(dest)
    except OSError, e:
        self.logger.info(e)
        raise e
    except TypeError, (e):
        raise e
    except AttributeError, (e):
        raise e
    except:
        raise
</code></pre>

<p>[/code]</p>
"
301493,6613,2008-11-19T10:35:18Z,13,Which language is easiest and fastest to work with XML content?,"<p>We have developers with knowledge of these languages - Ruby , Python, .Net or Java. We are developing an application which will mainly handle XML documents. Most of the work is to convert predefined XML files into database tables, providing mapping between XML documents through database, creating reports from database etc. Which language will be the easiest and fastest to work with?
(It is a web-app)</p>
"
301528,16974,2008-11-19T10:45:01Z,18,Convert a string with date and time to a date,"<p>I've got this date time string:</p>

<pre><code>post[""date""] = ""2007-07-18 10:03:19""
</code></pre>

<p>I'd like to extract just ""2007-07-18"" as a date. I've seen some reference to <code>strptime</code> but I'm not sure how to use it.  How can I extract the date from this string?</p>
"
301566,2220518,2008-11-19T11:00:34Z,1,How to update turbogears application production database,"<p>I am having a postgres production database in production (which contains a lot of Data). now I need to modify the model of the tg-app to add couple of new tables to the database. </p>

<p>How do i do this? I am using sqlAlchemy.</p>
"
301924,18673,2008-11-19T13:44:20Z,52,Python: urllib/urllib2/httplib confusion,"<p>I'm trying to test the functionality of a web app by scripting a login sequence in Python, but I'm having some troubles.</p>

<p>Here's what I need to do:</p>

<ol>
<li>Do a POST with a few parameters and headers.</li>
<li>Follow a redirect</li>
<li>Retrieve the HTML body.</li>
</ol>

<p>Now, I'm relatively new to python, but the two things I've tested so far haven't worked. First I used httplib, with putrequest() (passing the parameters within the URL), and putheader(). This didn't seem to follow the redirects.</p>

<p>Then I tried urllib and urllib2, passing both headers and parameters as dicts. This seems to return the login page, instead of the page I'm trying to login to, I guess it's because of lack of cookies or something.</p>

<p>Am I missing something simple?</p>

<p>Thanks.</p>
"
302163,38850,2008-11-19T15:08:12Z,6,Global hotkey for Python application in Gnome,"<p>I would like to assign a global hotkey to my Python application, running in Gnome. How do I do that? All I can find are two year old posts saying, well, pretty much nothing :-)</p>
"
302379,34088,2008-11-19T15:57:35Z,3,Calculate exact result of complex throw of two D30,"<p>Okay, this bugged me for several years, now. If you sucked in statistics and higher math at school, turn away, <em>now</em>. Too late.</p>

<p>Okay. Take a deep breath. Here are the rules. Take <em>two</em> thirty sided dice (yes, <a href=""http://paizo.com/store/byCompany/k/koplow/dice/d30"" rel=""nofollow"">they do exist</a>) and roll them simultaneously.</p>

<ul>
<li>Add the two numbers</li>
<li>If both dice show &lt;= 5 or >= 26, throw again and <em>add</em> the result to what you have</li>
<li>If one is &lt;= 5 and the other >= 26, throw again and <em>subtract</em> the result from what 
you have</li>
<li>Repeat until either is > 5 and &lt; 26!</li>
</ul>

<p>If you write some code (see below), roll those dice a few million times and you count how often you receive each number as the final result, you get a curve that is pretty flat left of 1, around 45° degrees between 1 and 60 and flat above 60. The chance to roll 30.5 or better is greater than 50%, to roll better than 18 is 80% and to roll better than 0 is 97%.</p>

<p>Now the question: Is it possible to write a program to <em>calculate</em> the <em>exact</em> value f(x), i.e. the probability to roll a certain value?</p>

<p>Background: For our role playing game ""Jungle of Stars"" we looked for a way to keep random events in check. The rules above guarantee a much more stable outcome for something you try :)</p>

<p>For the geeks around, the code in Python:</p>

<pre><code>import random
import sys

def OW60 ():
    """"""Do an open throw with a ""60"" sided dice""""""
    val = 0
    sign = 1

    while 1:
        r1 = random.randint (1, 30)
        r2 = random.randint (1, 30)

        #print r1,r2
        val = val + sign * (r1 + r2)
        islow = 0
        ishigh = 0
        if r1 &lt;= 5:
            islow += 1
        elif r1 &gt;= 26:
            ishigh += 1
        if r2 &lt;= 5:
            islow += 1
        elif r2 &gt;= 26:
            ishigh += 1

        if islow == 2 or ishigh == 2:
            sign = 1
        elif islow == 1 and ishigh == 1:
            sign = -1
        else:
            break

        #print sign

    #print val
    return val

result = [0] * 2000
N = 100000
for i in range(N):
    r = OW60()
    x = r+1000
    if x &lt; 0:
        print ""Too low:"",r
    if i % 1000 == 0:
        sys.stderr.write('%d\n' % i)
    result[x] += 1

i = 0
while result[i] == 0:
    i += 1

j = len(result) - 1
while result[j] == 0:
    j -= 1

pSum = 0
# Lower Probability: The probability to throw this or less
# Higher Probability: The probability to throw this or higher
print ""Result;Absolut Count;Probability;Lower Probability;Rel. Lower Probability;Higher Probability;Rel. Higher Probability;""
while i &lt;= j:
    pSum += result[i]
    print '%d;%d;%.10f;%d;%.10f;%d;%.10f' % (i-1000, result[i], (float(result[i])/N), pSum, (float(pSum)/N), N-pSum, (float(N-pSum)/N))
    i += 1
</code></pre>
"
302651,2077,2008-11-19T17:14:42Z,29,Use only some parts of Django?,"<p>I like Django, but for a particular application I would like to use only parts of it, but I'm not familiar enough with how Django works on the inside, so maybe someone can point me into the right direction as to what I have to check out.</p>

<p>Specifically, I <i>want to use</i>:</p>

<ul>
<li>The models and database abstraction</li>
<li>The <a href=""http://docs.djangoproject.com/en/dev/topics/cache/#the-low-level-cache-api"">caching API</a>, although I want to avoid database lookups by caching, not HTML generation, and since the caching framework in Django is intended for the latter, I'm not sure yet whether that's really appropriate.</li>
</ul>

<p>I would <i>not use</i>:</p>

<ul>
<li>Templating</li>
<li>urlconfigs</li>
</ul>

<p>Or, more exactly, I'm neither using HTTP nor HTML. So basically, I have a different input / output chain than usual.</p>

<p>Can this work?</p>

<p>My personal killer feature in Django is the Object / database mapping that I can do with the models, so if there's another technology (doesn't have to be Python, I'm in the design phase and I'm pretty agnostic about languages and platforms) that gives me the same abilities, that would be great, too.</p>
"
302679,10751,2008-11-19T17:21:02Z,9,Running a Django site under mod_wsgi,"<p>I am trying to run my Django sites with mod_wsgi instead of mod_python (RHEL 5). I tried this with all my sites, but get the same problem. I configured it the standard way everyone recommends, but requests to the site simply time out.</p>

<p>Apache conf:</p>

<pre><code>&lt;VirtualHost 74.54.144.34&gt;
    DocumentRoot /wwwclients/thymeandagain
    ServerName thymeandagain4corners.com
    ServerAlias www.thymeandagain4corners.com
    LogFormat ""%h %l %u %t \""%r\"" %&gt;s %b \""%{Referer}i\"" \""%{User-Agent}i\"""" combined
    CustomLog /var/log/httpd/thymeandagain_access_log combined
    ErrorLog /var/log/httpd/thymeandagain_error_log
    LogLevel error
    WSGIScriptAlias / /wwwclients/thymeandagain/wsgi_handler.py
    WSGIDaemonProcess thymeandagain user=admin group=admin processes=1 threads=16
    WSGIProcessGroup thymeandagain
&lt;/VirtualHost&gt;
</code></pre>

<p>wsgi_handler.py:</p>

<pre><code>import sys
import os

sys.path.append(""/wwwclients"")
os.environ['DJANGO_SETTINGS_MODULE'] = 'thymeandagain.settings'

import django.core.handlers.wsgi

application = django.core.handlers.wsgi.WSGIHandler()
</code></pre>

<p>The daemon mod_wsgi is supposed to spawn off is not there, so requests just time out and I get a bunch of ""Unable to connect to WSGI daemon process"" errors in the logs. Is there something about the WSGIDaemonProcess directive that is preventing creation of the daemon? Thanks in advance for any help...</p>

<p>EDIT: I get this in the error log:</p>

<pre><code>[WARN@1227228322.174175] mcm_server_readable():2582: timeout: Operation now in progress: select(2) call timed out for read(2)able fds
[INFO@1227228322.174263] mcm_get_line():1592
[WARN@1227227903.249626] mcm_server_readable():2582: timeout: Operation now in progress: select(2) call timed out for read(2)able fds
[INFO@1227227903.249712] mcm_get_line():1592
[Thu Nov 20 21:18:17 2008] [notice] caught SIGTERM, shutting down
[Thu Nov 20 21:18:18 2008] [notice] Digest: generating secret for digest authentication ...
[Thu Nov 20 21:18:18 2008] [notice] Digest: done
[Thu Nov 20 21:18:18 2008] [notice] mod_python: Creating 4 session mutexes based on 8 max processes and 64 max threads.
[Thu Nov 20 21:18:18 2008] [notice] Apache/2.2.3 (Red Hat) mod_python/3.2.8 Python/2.4.3 mod_wsgi/2.1-BRANCH configured -- resuming normal operations
</code></pre>
"
302835,37370,2008-11-19T18:13:08Z,5,scons : src and include dirs,"<p>can someone give a scons config file which allows the following structure</p>

<pre><code>toplevel/
        /src - .cc files
        /include .h files
</code></pre>

<p>at top level I want the o and final exe.</p>
"
302867,28804,2008-11-19T18:23:33Z,1,How do I install a Python extension module using distutils?,"<p>I'm working on a Python package named ""lehmer"" that includes a bunch of extension modules written in C. Currently, I have a single extension module, ""rng"". I am using Python's Distutils to build and install the module. I can compile and install the module, but when I try to import the module using <code>import lehmer.rng</code> or <code>from lehmer import rng</code>, the Python interpreter throws an <code>ImportError</code> exception. I can import ""lehmer"" fine.</p>

<p>Here are the contents of my <code>setup.py</code> file:</p>

<pre><code>from distutils.core import setup, Extension

exts = [Extension(""rng"", [""lehmer/rng.c""])]

setup(name=""lehmer"",
      version=""0.1"",
      description=""A Lehmer random number generator"",
      author=""Steve Park, Dave Geyer, and Michael Dippery"",
      maintainer=""Michael Dippery"",
      maintainer_email=""mpd@cs.wm.edu"",
      packages=[""lehmer""],
      ext_package=""lehmer"",
      ext_modules=exts)
</code></pre>

<p>When I list the contents of Python's <code>site-packages</code> directory, I see the following:</p>

<pre><code>th107c-4 lehmer $ ls /scratch/usr/lib64/python2.5/site-packages/lehmer
__init__.py  __init__.pyc  rng.so*
</code></pre>

<p>My <code>PYTHONPATH</code> environment variable is set correctly, so that's not the problem (and as noted before, I can <code>import lehmer</code> just fine, so I <em>know</em> that <code>PYTHONPATH</code> is not the issue). Python uses the following search paths (as reported by <code>sys.path</code>):</p>

<pre><code>['', '/scratch/usr/lib64/python2.5/site-packages', '/usr/lib/python25.zip', '/usr/lib64/python2.5', '/usr/lib64/python2.5/plat-linux2', '/usr/lib64/python2.5/lib-tk', '/usr/lib64/python2.5/lib-dynload', '/usr/lib64/python2.5/site-packages', '/usr/lib64/python2.5/site-packages/Numeric', '/usr/lib64/python2.5/site-packages/PIL', '/usr/lib64/python2.5/site-packages/SaX', '/usr/lib64/python2.5/site-packages/gtk-2.0', '/usr/lib64/python2.5/site-packages/wx-2.8-gtk2-unicode', '/usr/local/lib64/python2.5/site-packages']
</code></pre>

<h2>Update</h2>

<p>It works when used on an OpenSUSE 10 box, but the C extensions still fail to load when tested on Mac OS X. Here are the results from the Python interpreter:</p>

<pre><code>&gt;&gt;&gt; sys.path
['', '/usr/local/lib/python2.5/site-packages', '/opt/local/lib/python25.zip', '/opt/local/lib/python2.5', '/opt/local/lib/python2.5/plat-darwin', '/opt/local/lib/python2.5/plat-mac', '/opt/local/lib/python2.5/plat-mac/lib-scriptpackages', '/opt/local/lib/python2.5/lib-tk', '/opt/local/lib/python2.5/lib-dynload', '/opt/local/lib/python2.5/site-packages']
&gt;&gt;&gt; from lehmer import rng
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
ImportError: cannot import name rng
&gt;&gt;&gt; import lehmer.rngs
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
ImportError: No module named rngs
&gt;&gt;&gt; import lehmer.rng 
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
ImportError: No module named rng
&gt;&gt;&gt; from lehmer import rngs
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
ImportError: cannot import name rngs
</code></pre>
"
302983,39058,2008-11-19T19:04:55Z,13,Best Django 'CMS' component for integration into existing site,"<p>So I have a relatively large (enough code that it would be easier to write this CMS component from scratch than to rewrite the app to fit into a CMS) webapp that I want to add basic Page/Menu/Media management too, I've seen several Django pluggables addressing this issue, but many seem targeted as full CMS platforms. </p>

<p>Does anyone know of a plugin that can easily integrate with existing templates/views and still sports a powerful/comprehensive admin interface? </p>
"
303200,37804,2008-11-19T20:15:38Z,484,How do I remove/delete a folder that is not empty with Python?,"<p>I am getting an 'access is denied' error when I attempt to delete a folder that is not empty. I used the following command in my attempt: <code>os.remove(""/folder_name"")</code>. </p>

<p>What is the most effective way of removing/deleting a folder/directory that is not empty?</p>
"
303360,19403,2008-11-19T21:04:15Z,4,Is there a better StringCollection editor for use in PropertyGrids?,"<p>I'm making heavy use of PropertySheets in my application framework's configuration editor.  I like them a lot because it's pretty easy to work with them (once you learn how) and make the editing bulletproof.</p>

<p>One of the things that I'm storing in my configuration are Python scripts.  It's possible to edit a Python script in a StringCollection editor, which is what I've been using, but there's a long distance between ""possible"" and ""useable.""  I'd like to have an editor that actually supported resizeable and monospace fonts, preserved blank lines, and - hey, let's go crazy with the wishlist - did syntax coloring.</p>

<p>I can certainly write this if I really have to, but I'd prefer not to.</p>

<p>I've poked around on the Google and can't find anything like what I'm describing, so I thought I'd ask here.  Is this a solved problem?  Has anyone out there already taken a crack at building a better editor?</p>
"
303664,31319,2008-11-19T22:36:37Z,5,Newbie Python Question about tuples,"<p>I am new to Python, and I'm working on writing some database code using the <code>cx_Oracle</code> module.  In the <a href=""http://cx-oracle.sourceforge.net/html/module.html"" rel=""nofollow"">cx_Oracle documentation</a> they have a code example like this:</p>

<pre><code>import sys
import cx_Oracle

connection = cx_Oracle.Connection(""user/pw@tns"")
cursor = connection.cursor()

try:
    cursor.execute(""select 1 / 0 from dual"")
except cx_Oracle.DatabaseError, exc:
    error, = exc.args
    print &gt;&gt; sys.stderr, ""Oracle-Error-Code:"", error.code
    print &gt;&gt; sys.stderr, ""Oracle-Error-Message:"", error.message
</code></pre>

<p>My question has to do with where the ""error"" object is created.  What does the ""<code>, =</code>"" do?  I tried searching Python documentation, and search engines don't work very well when you're searching for operators.   :-)</p>

<p>I know that the exc.args is a singleton tuple, but I just don't understand the ""<code>, =</code>"" syntax.  If I remove the comma, I get the error message, ""<code>AttributeError: 'tuple' object has no attribute 'code'</code>"".  </p>

<p>Can someone point me to where this is documented?  Thanks!</p>

<p><strong>EDIT:</strong></p>

<p>This works without having to unpack the tuple:</p>

<pre><code>import sys
import cx_Oracle

connection = cx_Oracle.Connection(""user/pw@tns"")
cursor = connection.cursor()

try:
    cursor.execute(""select 1 / 0 from dual"")
except cx_Oracle.DatabaseError, exc:
    print &gt;&gt; sys.stderr, ""Oracle-Error-Code:"", exc.args[0].code
    print &gt;&gt; sys.stderr, ""Oracle-Error-Message:"", exc.args[0].message
</code></pre>
"
303726,2128,2008-11-19T23:00:57Z,0,(Python) socket.gaierror on every addres...except http://www.reddit.com?,"<p>I'm just playing around and I'm trying to grab information from websites. Unfortunately, with the following code:</p>

<pre><code>import sys
import socket
import re
from urlparse import urlsplit

url = urlsplit(sys.argv[1])


sock = socket.socket()
sock.connect((url[0] + '://' + url[1],80))
path = url[2]
if not path:
    path = '/'

print path
sock.send('GET ' + path + ' HTTP/1.1\r\n'
    + 'User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US) AppleWebKit/525.19 (KHTML, like Gecko) Chrome/0.3.154.9 Safari/525.19\r\n'
    + 'Accept: */*\r\n'
    + 'Accept-Language: en-US,en\r\n'
    + 'Accept-Charset: ISO-8859-1,*,utf-8\r\n'
    + 'Host: 68.33.143.182\r\n'
    + 'Connection: Keep-alive\r\n'
    + '\r\n')
</code></pre>

<p>I get the following error:</p>

<blockquote>
  <p>Traceback (most recent call last):<br />
  File
  ""D:\Development\Python\PyCrawler\PyCrawler.py"",
  line 10, in 
      sock.connect((url[0] + '://' + url[1],80))   File """", line 1,
  in connect socket.gaierror: (11001,
  'getaddrinfo failed')</p>
</blockquote>

<p>The only time I do not get an error is if the url passed is <a href=""http://www.reddit.com"" rel=""nofollow"">http://www.reddit.com</a>. Every other url I have tried comes up with the socket.gaierror. Can anyone explain this? And possibly give a solution?</p>
"
304049,37370,2008-11-20T01:12:16Z,24,Emacs 23 and iPython,"<p>Is there anyone out there using iPython with emacs 23? The documents on the emacs wiki are a bit of a muddle and I would be interested in hearing from anyone using emacs for Python development. Do you use the download python-mode and ipython.el? What do you recommend?</p>
"
304117,26241,2008-11-20T01:56:32Z,8,Data Modelling Advice for Blog Tagging system on Google App Engine,"<p>Am wondering if anyone might provide some conceptual advice on an efficient way to build a data model to accomplish the simple system described below.  Am somewhat new to thinking in a non-relational manner and want to try avoiding any obvious pitfalls.  It's my understanding that a basic principal is that ""storage is cheap, don't worry about data duplication"" as you might in a normalized RDBMS.    </p>

<p>What I'd like to model is:</p>

<p>A blog article which can be given 0-n tags. Many blog articles can share the same tag.  When retrieving data would like to allow retrieval of all articles matching a tag.  In many ways very similar to the approach taken here at stackoverflow.</p>

<p>My normal mindset would be to create a many-to-may relationship between tags and blog articles.  However, I'm thinking in the context of GAE that this would be expensive, although I have seen examples of it being done. </p>

<p>Perhaps using a ListProperty containing each tag as part of the article entities, and a second data model to track tags as they're added and deleted?  This way no need for any relationships and the ListProperty still allows queries where any list element matching will return results.</p>

<p>Any suggestions on the most efficient way to approach this on GAE?</p>
"
304152,2696,2008-11-20T02:16:38Z,2,Twisted FTPFileListProtocol and file names with spaces,"<p>I am using Python and the <a href=""http://twistedmatrix.com/trac/"" rel=""nofollow"">Twisted</a> framework to connect to an FTP site to perform various automated tasks.  Our FTP server happens to be Pure-FTPd, if that's relevant.</p>

<p>When connecting and calling the <strong>list</strong> method on an <strong>FTPClient</strong>, the resulting <strong>FTPFileListProtocol</strong>'s <strong>files</strong> collection does not contain any directories or file names that contain a space (' ').</p>

<p>Has anyone else seen this?  Is the only solution to create a sub-class of FTPFileListProtocol and override its <strong>unknownLine</strong> method, parsing the file/directory names manually?</p>
"
304216,2220518,2008-11-20T03:06:00Z,1,Find all nodes from an XML using cElementTree,"<p>Is there a way to find all nodes in a xml tree using cElementTree? The findall method works only for specified tags.</p>
"
304256,3715,2008-11-20T03:38:52Z,36,What's the best way to find the inverse of datetime.isocalendar()?,"<p>The Python <a href=""http://www.python.org/doc/2.5.2/lib/datetime-datetime.html""><code>datetime.isocalendar()</code></a> method returns a tuple <code>(ISO_year, ISO_week_number, ISO_weekday)</code> for the given <code>datetime</code> object.  Is there a corresponding inverse function?  If not, is there an easy way to compute a date given a year, week number and day of the week?</p>
"
304567,37083,2008-11-20T07:33:39Z,1,Getting TRAC to run on IIS7,"<p>Im trying to get Trac upp and running on my IIS/w2008 server using this FAQ: <a href=""http://trac.edgewall.org/wiki/TracOnWindowsIisAjp"" rel=""nofollow"">TracOnWindowsIisAjp</a></p>

<p>Everything upp until ""3. Install Tomcat AJP Connector for IIS"" works ok.
I then define my directories as : C:\wwwroot\trac.evju.biz\AJP\, in the bin catalog I place the dll file, and 3 config files with this content:</p>

<p>isapi_redirect-1.2.26.properties
    # Configuration file for the ISAPI Redirector</p>

<pre><code># The path to the ISAPI Redirector Extension, relative to the website
# This must be in a virtual directory with execute privileges
extension_uri=/AJP/isapi_redirect-1.2.26.dll

# Full path to the log file for the ISAPI Redirector
log_file=C:\wwwroot\trac.evju.biz\AJP\logs\isapi_redirect.log

# Log level (debug, info, warn, error or trace)
log_level=info

# Full path to the workers.properties file
worker_file=C:\wwwroot\trac.evju.biz\AJP\conf\workers.properties

# Full path to the uriworkermap.properties file
worker_mount_file=C:\wwwroot\trac.evju.biz\AJP\conf\uriworkermap.properties
</code></pre>

<p>workers.properties</p>

<pre><code># Define 1 real worker
worker.list=trac
# Set properties for trac (ajp13)
worker.trac.type=ajp13
worker.trac.host=localhost
worker.trac.port=8009
worker.trac.socket_keepalive=0
</code></pre>

<p>uriworkermap.properties</p>

<pre><code>/C:\wwwroot\trac.evju.biz\irm\*=trac
</code></pre>

<p>Then I run into problems : </p>

<ul>
<li>Define a virtual directory named AJP-Connector, pointing to your bin subdirectory, with permissions to execute executables (not only scripts).</li>
</ul>

<p>I defined a virtual directory named AJP, pointing it to the bin subdirectory, but I can't find any way of give it execute permissions</p>

<p>And the rest of the instructions obviously don't quite apply to IIS7</p>

<ul>
<li>Allow execution of the DLL as Web
Service Extension</li>
<li>In the IIS Manager, open Web Service Extensions.</li>
<li>Define a new Web Service Extension called AJP-Connector (or whatever you want).</li>
<li>Add C:\AJP-Connector\bin\isapi_redirect-1.2.26.dll to the required files (replace ""C:\AJP-Connector"" with your actual directory).</li>
<li>Set extension status to Allowed. </li>
</ul>

<p>I tried adding the dll as a ISAPI extension, this resulted in a web.config file in the bin catalog with the following content: </p>

<pre><code>&lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;
&lt;configuration&gt;
    &lt;system.webServer&gt;
        &lt;handlers accessPolicy=""Read, Execute, Script""&gt;
            &lt;remove name=""ISAPI-dll"" /&gt;
            &lt;add name=""AJP"" path=""*.ajp"" verb=""*"" modules=""IsapiModule"" scriptProcessor=""C:\wwwroot\trac.evju.biz\AJP\bin\isapi_redirect-1.2.26.dll"" resourceType=""Unspecified"" requireAccess=""Execute"" /&gt;
        &lt;/handlers&gt;
    &lt;/system.webServer&gt;
&lt;/configuration&gt;
</code></pre>

<p>Any help appreciated. </p>
"
304655,39182,2008-11-20T08:40:40Z,4,The best way to invoke methods in Python class declarations?,"<p>Say I am declaring a class <code>C</code> and a few of the declarations are very similar. I'd like to use a function <code>f</code> to reduce code repetition for these declarations. It's possible to just declare and use <code>f</code> as usual:</p>

<pre><code>&gt;&gt;&gt; class C(object):
...     def f(num):
...             return '&lt;' + str(num) + '&gt;'
...     v = f(9)
...     w = f(42)
... 
&gt;&gt;&gt; C.v
'&lt;9&gt;'
&gt;&gt;&gt; C.w
'&lt;42&gt;'
&gt;&gt;&gt; C.f(4)
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
TypeError: unbound method f() must be called with C instance as first argument (got int instance instead)
</code></pre>

<p>Oops! I've inadvertently exposed <code>f</code> to the outside world, but it doesn't take a <code>self</code> argument (and can't for obvious reasons). One possibility would be to <code>del</code> the function after I use it:</p>

<pre><code>&gt;&gt;&gt; class C(object):
...     def f(num):
...             return '&lt;' + str(num) + '&gt;'
...     v = f(9)
...     del f
... 
&gt;&gt;&gt; C.v
'&lt;9&gt;'
&gt;&gt;&gt; C.f
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
AttributeError: type object 'C' has no attribute 'f'
</code></pre>

<p>But what if I want to use <code>f</code> again later, after the declaration? It won't do to delete the function. I could make it ""private"" (i.e., prefix its name with <code>__</code>) and give it the <code>@staticmethod</code> treatment, but invoking <code>staticmethod</code> objects through abnormal channels gets very funky:</p>

<pre><code>&gt;&gt;&gt; class C(object):
...     @staticmethod
...     def __f(num):
...             return '&lt;' + str(num) + '&gt;'
...     v = __f.__get__(1)(9)   # argument to __get__ is ignored...
... 
&gt;&gt;&gt; C.v
'&lt;9&gt;'
</code></pre>

<p>I have to use the above craziness because <code>staticmethod</code> objects, which are descriptors, are not themselves callable. I need to recover the function wrapped by the <code>staticmethod</code> object before I can call it.</p>

<p>There has got to be a better way to do this. How can I cleanly declare a function in a class, use it during its declaration, and also use it later from within the class? Should I even be doing this?</p>
"
304779,30289,2008-11-20T09:33:44Z,3,Adobe Flash and Python,"<p>Is it possible to use <a href=""http://www.python.org/"" rel=""nofollow"">CPython</a> to develop Adobe Flash based applications?</p>
"
304883,NA,2008-11-20T10:27:57Z,39,What do I use on linux to make a python program executable,"<p>I just installed a linux system (Kubuntu) and was wondering if there is a program to make python programs executable for linux.</p>
"
305359,38557,2008-11-20T13:52:44Z,17,Correct way to detect sequence parameter?,"<p>I want to write a function that accepts a parameter which can be either a sequence or a single value. The type of value is str, int, etc., but I <strong>don't</strong> want it to be restricted to a hardcoded list. 
In other words, I want to know if the parameter X is a sequence or something I have to convert to a sequence to avoid special-casing later. I could do</p>

<p><code>type(X) in (list, tuple)</code></p>

<p>but there may be other sequence types I'm not aware of, and no common base class.</p>

<p>-N.</p>

<p><strong>Edit</strong>: See my ""answer"" below for why most of these answers don't help me. Maybe you have something better to suggest.</p>
"
305378,38557,2008-11-20T14:00:23Z,64,"List of tables, db schema, dump etc using the Python sqlite3 API","<p>For some reason I can't find a way to get the equivalents of sqlite's interactive shell commands:</p>

<pre><code>.tables
.dump
</code></pre>

<p>using the Python sqlite3 API. </p>

<p>Is there anything like that?</p>
"
305422,NA,2008-11-20T14:20:16Z,1,Python printing the word,"<p>If any one can help me with Python code:
If I input a letter, How can I print all the words start with that word?</p>
"
305647,17498,2008-11-20T15:28:27Z,3,Appropriate location for my application's cache on Windows,"<p>My application caches some data on disk.  Because the cache may be large, it should not be stored on a network drive.  It should persist between invocations of the application.  I have a mechanism for the user to choose a location, but would like the default to be sensible and ""the right thing"" for the platform.</p>

<p>What is the appropriate location for such a cache?  Is there an API for determining the appropriate location?  How do I call it from Python?</p>
"
305924,11677,2008-11-20T16:30:30Z,7,"In Python, how can you get the name of a member function's class?","<p>I have a function that takes another function as a parameter. If the function is a member of a class, I need to find the name of that class. E.g.</p>

<pre><code>def analyser(testFunc):
    print testFunc.__name__, 'belongs to the class, ...
</code></pre>

<p>I thought  </p>

<pre><code>testFunc.__class__
</code></pre>

<p>would solve my problems, but that just tells me that testFunc is a function.</p>
"
306130,11677,2008-11-20T17:24:39Z,41,Python decorator makes function forget that it belongs to a class,"<p>I am trying to write a decorator to do logging:</p>

<pre><code>def logger(myFunc):
    def new(*args, **keyargs):
        print 'Entering %s.%s' % (myFunc.im_class.__name__, myFunc.__name__)
        return myFunc(*args, **keyargs)

    return new

class C(object):
    @logger
    def f():
        pass

C().f()
</code></pre>

<p>I would like this to print:</p>

<pre><code>Entering C.f
</code></pre>

<p>but instead I get this error message:</p>

<pre><code>AttributeError: 'function' object has no attribute 'im_class'
</code></pre>

<p>Presumably this is something to do with the scope of 'myFunc' inside 'logger', but I've no idea what.</p>
"
306313,893,2008-11-20T18:21:16Z,264,"""is"" operator behaves unexpectedly with integers","<p>Why does the following behave unexpectedly in Python?</p>

<pre><code>&gt;&gt;&gt; a = 256
&gt;&gt;&gt; b = 256
&gt;&gt;&gt; a is b
True           # This is an expected result
&gt;&gt;&gt; a = 257
&gt;&gt;&gt; b = 257
&gt;&gt;&gt; a is b
False          # What happened here? Why is this False?
&gt;&gt;&gt; 257 is 257
True           # Yet the literal numbers compare properly
</code></pre>

<p>I am using Python 2.5.2. Trying some different versions of Python, it appears that Python 2.3.3 shows the above behaviour between 99 and 100.</p>

<p>Based on the above, I can hypothesize that Python is internally implemented such that ""small"" integers are stored in a different way than larger integers and the <code>is</code> operator can tell the difference. Why the leaky abstraction? What is a better way of comparing two arbitrary objects to see whether they are the same when I don't know in advance whether they are numbers or not?</p>
"
306400,4872,2008-11-20T18:42:21Z,824,How do I randomly select an item from a list using Python?,"<p>Assume I have the following list:</p>

<pre><code>foo = ['a', 'b', 'c', 'd', 'e']
</code></pre>

<p>What is the simplest way to retrieve an item at random from this list?</p>
"
306456,23427,2008-11-20T19:02:27Z,0,How can I get a list of the running applications with GTK?,"<p>How can I get a list of the running applications? I'm referring to the ones in the panel at the bottom of the screen.</p>
"
306811,37804,2008-11-20T20:47:28Z,0,"With Python, how can I ensure that compression of a folder takes place within a particular folder?","<p>I have been able to zip the contents of my folder. But I would like the zipped file to remain in the folder that was just compressed. For example, I've zipped a folder called test in my C: drive. But I would like my ""test.zip"" file to be contained in C:\test. How can I do this? Thanks in advance.</p>

<p><strong><em>clarification of question with code example:</em></strong></p>

<p>Someone kindly pointed out that my question is confusing, but for a python newbie a lot of things are confusing :) - my advance apologies if this question is too basic or the answer is obvious. I don't know how I can ensure that the resulting zip file is inside the folder that has been zipped. In other words, I would like the zip process to take place in 'basedir.' That way the user does not waste time searching for it somewhere on the C drive.</p>

<p><pre><code><br />
    def zip_folder(basedir, zip_file):
        z = zipfile.ZipFile(zip_file, 'w', zipfile.ZIP_DEFLATED)
        for dirpath, dirnames, filenames in os.walk(basedir):
        print ""zipping files:""
        for fn in filenames:
        print fn
        absfn = os.path.join(dirpath, fn)
        z.write(absfn)
        z.close
</pre></code></p>
"
306901,36330,2008-11-20T21:26:35Z,1,How do I disable PythonWin's “Redirecting output to win32trace remote collector” feature without uninstalling PythonWin?,"<p>When I run a wxPython application, it prints the string &ldquo;Redirecting output to win32trace remote collector&rdquo;and I must open PythonWin's trace collector tool to view that trace output.</p>

<p>Since I'm not interested in collecting this output, how should I disable this feature?</p>
"
307038,28360,2008-11-20T22:10:21Z,2,Django foreign key access in save() function,"<p>Here's my code:</p>

<pre>class Publisher(models.Model):
    name = models.CharField(
            max_length = 200,
            unique = True,
    )

    url = models.URLField()

    def __unicode__(self):
        return self.name

    def save(self):
        pass

class Item(models.Model):
    publisher = models.ForeignKey(Publisher)

    name = models.CharField(
            max_length = 200,
    )

    code = models.CharField(
            max_length = 10,
    )

    def __unicode__(self):
        return self.name</pre>

<p>I want to be able to access each Item from the Publisher save function.  How can I do this?</p>

<p>For instance, I'd like to append text to the ""code"" field of each Item associated with this Publisher on the save of Publisher.</p>

<p><b>edit</b>:
When I try to implement the first solution, I get the error ""'Publisher' object has no attribute 'item_set'"".  Apparently I can't access it that way.  Any other clues?</p>

<p><b>edit 2</b>:
I discovered that the problem occurring is that when I create a new Publisher object, I add Items inline.  Therefor, when trying to save a Publisher and access the Items, they don't exist.</p>

<p>Is there any way around this?!</p>
"
307338,1369629,2008-11-20T23:55:52Z,4,Create plugins for python standalone executables,"<p>how to create a good plugin engine for standalone executables created with pyInstaller, py2exe or similar tools? </p>

<p>I do not have experience with py2exe, but pyInstaller uses an import hook to import packages from it's compressed repository. Of course I am able to import dynamically another compressed repository created with pyInstaller and execute the code - this may be a simple plugin engine.</p>

<p>Problems appears when the plugin (this what is imported dynamically) uses a library that is not present in original repository (never imported). This is because import hook is for the original application and searches for packages in original repository - not the one imported later (plugin package repository). </p>

<p>Is there an easy way to solve this problem? Maybe there exist such engine?</p>
"
307494,64,2008-11-21T01:09:28Z,2,function pointers in python,"<p>I would like to do something like the following:</p>

<pre><code>def add(a, b):
    #some code

def subtract(a, b):
    #some code

operations = [add, subtract]
operations[0]( 5,3)
operations[1](5,3)
</code></pre>

<p>In python, is it possible to assign something like a function pointer?</p>
"
307729,35335,2008-11-21T03:22:53Z,2,Why do new instances of a class share members with other instances?,"<pre><code>class Ball:
  a = []
  def __init__(self):
    pass

  def add(self,thing):
    self.a.append(thing)

  def size(self):
    print len(self.a)

for i in range(3):
  foo = Ball()
  foo.add(1)
  foo.add(2)
  foo.size()
</code></pre>

<p>I would expect a return of :</p>

<pre><code>2
2
2
</code></pre>

<p>But I get :</p>

<pre><code>2
4
6
</code></pre>

<p>Why is this? I've found that by doing a=[] in the <strong>init</strong>, I can route around this behavior, but I'm less than clear why.</p>
"
308187,21537,2008-11-21T08:30:51Z,2,help me translate Java code making use of bytes into jython code,"<p>how do I translate this code into jython?</p>

<pre><code>     ZipOutputStream zos = new ZipOutputStream(new FileOutputStream(file + "".zip""));
     byte[] buf = new byte[1024];
     int len;
     //Create a new Zip entry with the file's name.
     ZipEntry zipEntry = new ZipEntry(file.toString());
     //Create a buffered input stream out of the file
     //we're trying to add into the Zip archive.
     FileInputStream fin = new FileInputStream(file);
     BufferedInputStream in = new BufferedInputStream(fin);
     zos.putNextEntry(zipEntry);
     //Read bytes from the file and write into the Zip archive.
     while ((len = in.read(buf)) &gt;= 0) {
        zos.write(buf, 0, len);
     }
     //Close the input stream.
     in.close();
     //Close this entry in the Zip stream.
     zos.closeEntry();
</code></pre>

<p>this is what I have but it Fails badly</p>

<pre><code>            buf=None                                     &lt;&lt;&lt;&lt; ?
            len=None                                     &lt;&lt;&lt;&lt; ?
            zipEntry=ZipEntry(file.toString()) 
            fin=FileInputStream(file)
            bin=BufferedInputStream(fin)
            self._zos.putNextEntry(zipEntry)
            while (len=bin.helpme_im_dying(buf)) &gt;= 0):  &lt;&lt;&lt;&lt; ?
                self._zos.write(buf,0,len)               &lt;&lt;&lt;&lt; ?
                len = bin.read(buf)                      &lt;&lt;&lt;&lt; ?
            bin.close()
            self._zos.closeEntry()
</code></pre>

<p>refer to this page for information <a href=""https://www.acm.org/crossroads/xrds6-3/ovp63.html"" rel=""nofollow"">https://www.acm.org/crossroads/xrds6-3/ovp63.html</a></p>
"
308220,NA,2008-11-21T08:50:27Z,0,Showing processing message in Python,"<p>I want to show the processing information or log in the original page when the submitted request is being served until it completes the execution. I thought it would be meaningful to the user to know what is happening behind the request.</p>

<p>I don't find a clue to do so though, can you guys help me out as how people are doing like this one below one - for your reference</p>

<p><a href=""http://www.xml-sitemaps.com/"" rel=""nofollow"">http://www.xml-sitemaps.com/</a></p>
"
308254,9951,2008-11-21T09:26:19Z,9,How to force iPython to use an older version of Python?,"<p>I am running an Ubuntu 8.10, using Python 2.5 out of the box. This is fine from the system point of view, but I need Python2.4 since I dev on Zope / Plone.</p>

<p>Well, installing python2.4 is no challenge, but I can't find a (clean) way to make iPython use it : no option in the man nor in the config file.</p>

<p>Before, there was a ipython2.4 package but it is deprecated.</p>
"
308912,16511,2008-11-21T14:22:56Z,3,Python data structures overhead/performance,"<p>Is there any performance advantage to using lists over dictionaries over tuples in Python?</p>

<p>If I'm optimising for speed, is there any reason to prefer one over another?</p>
"
308913,24208,2008-11-21T14:22:56Z,1,pygtk glade question: why isn't this simple script working?,"<p>I've been writing writing a small pygtk application using glade to put together the UIs.  I've created several windows already that work, but for some reason this one isn't working.  I get the following traceback:</p>

<pre><code>Traceback (most recent call last):
  File ""test.py"", line 7, in &lt;module&gt;
    class TestClass:
  File ""test.py"", line 10, in TestClass
    self.wTree.signal_autoconnect(self)
NameError: name 'self' is not defined
</code></pre>

<p>Here is the contents of test.py:</p>

<pre><code>#!/usr/bin/env python

import pygtk
import gtk
import gtk.glade

class TestClass:
    def __init__(self):
        self.wTree = gtk.glade.XML(""test.glade"")
        self.wTree.signal_autoconnect(self)

    def on_TestClass_destroy(self, widget, data):
    	gtk.main_quit()

if __name__ == ""__main__"":
    window = TestClass()
    gtk.main()
</code></pre>

<p>And here is the glade file, test.glade:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""UTF-8"" standalone=""no""?&gt;
&lt;!DOCTYPE glade-interface SYSTEM ""glade-2.0.dtd""&gt;
&lt;!--Generated with glade3 3.4.5 on Fri Nov 21 08:53:53 2008 --&gt;
&lt;glade-interface&gt;
  &lt;widget class=""GtkWindow"" id=""TestWindow""&gt;
    &lt;property name=""visible""&gt;True&lt;/property&gt;
    &lt;property name=""title"" translatable=""yes""&gt;Test Window&lt;/property&gt;
    &lt;signal name=""destroy"" handler=""on_TestClass_destroy""/&gt;
    &lt;child&gt;
      &lt;placeholder/&gt;
    &lt;/child&gt;
  &lt;/widget&gt;
&lt;/glade-interface&gt;
</code></pre>

<p>The strange thing is that if I take out the signal_autoconnect(self) call, the window opens.  But if I replace that call with ""self.on_TestClass_destroy(self, None, None)"" instead, it returns the same NameError exception.</p>

<p>I really don't understand why this isn't working, as I've created several other window classes that work fine.</p>

<p>Is the following code working for anyone here?</p>
"
308999,1694,2008-11-21T14:53:40Z,265,What does functools.wraps do?,"<p>In a comment on the <a href=""http://stackoverflow.com/questions/306130/python-decorator-makes-function-forget-that-it-belongs-to-a-class#306277"">answer to another question</a>, someone said they weren't sure what functools.wraps was doing.  So I'm asking this question so that there will be a record of it on StackOverflow for future reference: what does functools.wraps do, exactly?</p>
"
309129,9951,2008-11-21T15:37:42Z,18,Why can't I inherit from dict AND Exception in Python?,"<p>I got the following class :</p>

<pre><code>class ConstraintFailureSet(dict, Exception) :
    """"""
        Container for constraint failures. It act as a constraint failure itself
        but can contain other constraint failures that can be accessed with a dict syntax.
    """"""

    def __init__(self, **failures) :
        dict.__init__(self, failures)
        Exception.__init__(self)

print isinstance(ConstraintFailureSet(), Exception)
True
raise ConstraintFailureSet()
TypeError: exceptions must be classes, instances, or strings (deprecated), not ConstraintFailureSet
</code></pre>

<p>What the heck ?</p>

<p>And the worst is that I can't try super() since Exception are old based class...</p>

<p>EDIT : And, yes, I've tried to switch the order of inheritance / init.</p>

<p>EDIT2 : I am using CPython 2.4 on Ubuntu8.10. You newer know is this kind of infos is usefull ;-). Anyway, this little riddle has shut the mouth of 3 of my collegues. You'd be my best-friend-of-the day...</p>
"
309412,349836,2008-11-21T16:44:44Z,84,How to setup setuptools for python 2.6 on Windows?,"<p>Is there any way to install setuptools for python 2.6 in Windows without having an .exe installer? </p>

<p>There isn't one built at the moment, and the maintainer of setuptools has stated that it's probable be a while before he'll get to it. </p>

<p>Does anyone know of a way to install it anyway?</p>
"
309945,26141,2008-11-21T19:47:11Z,22,How to quote a string value explicitly (Python DB API/Psycopg2),"<p>For some reasons, I would like to do an explicit quoting of a string value (becoming a part of constructed SQL query) instead of waiting for implicit quotation performed by <code>cursor.execute</code> method on contents of its second parameter.</p>

<p>By ""implicit quotation"" I mean:</p>

<pre><code>value = ""Unsafe string""
query = ""SELECT * FROM some_table WHERE some_char_field = %s;""
cursor.execute( query, (value,) ) # value will be correctly quoted
</code></pre>

<p>I would prefer something like that:</p>

<pre><code>value = ""Unsafe string""
query = ""SELECT * FROM some_table WHERE some_char_field = %s;"" % \
    READY_TO_USE_QUOTING_FUNCTION(value)
cursor.execute( query ) # value will be correctly quoted, too
</code></pre>

<p>Is such low level <code>READY_TO_USE_QUOTING_FUNCTION</code> expected by Python DB API specification (I couldn't find such functionality in <a href=""http://www.python.org/dev/peps/pep-0249/"">PEP 249</a> document). If not, maybe Psycopg2 provides such function? If not, maybe Django provides such function? I would prefer not to write such function myself...</p>
"
310118,422,2008-11-21T20:37:47Z,1,Python - Setting / Getting Environment Variables and Addrs,"<p>I need to set an environment variable in Python and find the address in memory where it is located. Since it's on Linux, I don't mind about using libraries that only work consistently on Linux (if that's the only way). How would you do this?</p>

<p>Edit: The scope of the problem is as follows: I'm trying to hack a program for class, and essentially I'm putting my shellcode into an environment variable and then overwriting one byte on the victim code with the address of my environment variable. I need to find a way to automate this in Python, so my question is two-fold:</p>

<ul>
<li><p>Is there a way to get the address in
memory of an environment variable?</p></li>
<li><p>Can this only be done in bash/C or
can I do it purely in Python?</p></li>
</ul>
"
310199,37804,2008-11-21T21:08:07Z,2,How can I translate the following filename to a regular expression in Python?,"<p>I am battling regular expressions now as I type. </p>

<p>I would like to determine a pattern for the following example file: <code>b410cv11_test.ext</code>. I want to be able to do a search for files that match the pattern of the example file aforementioned. Where do I start (so lost and confused) and what is the best way of arriving at a solution that best matches the file pattern? Thanks in advance. </p>

<p><strong><em>Further clarification of question:</em></strong></p>

<p>I would like the pattern to be as follows: must start with 'b', followed by three digits, followed by 'cv', followed by two digits, then an underscore, followed by 'release', followed by .'ext'</p>
"
310224,34531,2008-11-21T21:18:01Z,4,How do you compile wxPython under cygwin?,"<p>I am using CYGWIN as a platform and would like to use wxPython. Is there a way to get the source compiled and working in cygwin?</p>
"
310459,12779,2008-11-21T22:44:41Z,3,Adding a dimension to every element of a numpy.array,"<p>I'm trying to transform each element of a numpy array into an array itself (say, to interpret a greyscale image as a color image). In other words:</p>

<pre><code>&gt;&gt;&gt; my_ar = numpy.array((0,5,10))
[0, 5, 10]
&gt;&gt;&gt; transformed = my_fun(my_ar)  # In reality, my_fun() would do something more useful
array([
      [ 0,  0, 0], 
      [ 5, 10, 15], 
      [10, 20, 30]])
&gt;&gt;&gt; transformed.shape
(3, 3)
</code></pre>

<p>I've tried:</p>

<pre><code>def my_fun_e(val):
    return numpy.array((val, val*2, val*3))

my_fun = numpy.frompyfunc(my_fun_e, 1, 3)
</code></pre>

<p>but get:</p>

<pre><code>my_fun(my_ar)
(array([[0 0 0], [ 5 10 15], [10 20 30]], dtype=object), array([None, None, None], dtype=object), array([None, None, None], dtype=object))
</code></pre>

<p>and I've tried:</p>

<pre><code>my_fun = numpy.frompyfunc(my_fun_e, 1, 1)
</code></pre>

<p>but get:</p>

<pre><code>&gt;&gt;&gt; my_fun(my_ar)
array([[0 0 0], [ 5 10 15], [10 20 30]], dtype=object)
</code></pre>

<p>This is close, but not quite right -- I get an array of objects, not an array of ints.</p>

<p><b>Update 3!</b> OK. I've realized that my example was too simple beforehand -- I don't just want to replicate my data in a third dimension, I'd like to transform it at the same time. Maybe this is clearer?</p>
"
310629,6266,2008-11-22T00:31:32Z,4,"Python Input/Output, files","<p>I need to write some methods for loading/saving some classes to and from a binary file. However I also want to be able to accept the binary data from other places, such as a binary string.</p>

<p>In c++ I could do this by simply making my class methods use std::istream and std::ostream which could be a file, a stringstream, the console, whatever.</p>

<p>Does python have a similar input/output class which can be made to represent almost any form of i/o, or at least files and memory?</p>
"
310732,19212,2008-11-22T02:06:06Z,97,"In Django, how does one filter a QuerySet with dynamic field lookups?","<p>Given a class:</p>

<pre><code>from django.db import models

class Person(models.Model):
    name = models.CharField(max_length=20)
</code></pre>

<p>Is it possible, and if so how, to have a QuerySet that filters based on dynamic arguments?  For example:</p>

<pre><code> # Instead of:
 Person.objects.filter(name__startswith='B')
 # ... and:
 Person.objects.filter(name__endswith='B')

 # ... is there some way, given:
 filter_by = '{0}__{1}'.format('name', 'startswith')
 filter_value = 'B'

 # ... that you can run the equivalent of this?
 Person.objects.filter(filter_by=filter_value)
 # ... which will throw an exception, since `filter_by` is not
 # an attribute of `Person`.
</code></pre>

<p>Help is much appreciated &amp; thank you in advance.</p>
"
310765,8014,2008-11-22T02:30:54Z,16,Python library to modify MP3 audio without transcoding,"<p>I am looking for some general advice about the mp3 format before I start a small project to make sure I am not on a wild-goose chase.</p>

<p>My understanding of the internals of the mp3 format is minimal. Ideally, I am looking for a library that would abstract those details away. I would prefer to use Python (but could be convinced otherwise).</p>

<p>I would like to modify a set of mp3 files in a fairly simple way. I am not so much interested in the ID3 tags but in the audio itself. I want to be able to delete sections (e.g. drop 10 seconds from the 3rd minute), and insert sections (e.g. add credits to the end.)</p>

<p>My understanding is that the mp3 format is lossy, and so decoding it to (for example) PCM format, making the modifications, and then encoding it again to MP3 will lower the audio quality. (I would love to hear that I am wrong.)</p>

<p>I <em>conjecture</em> that if I stay in mp3 format, there will be some sort of minimum frame or packet-size to deal with, so the granularity of the operations may be coarser. I can live with that, as long as I get an accuracy of within a couple of seconds.</p>

<p>I have looked at <a href=""http://pymedia.org/"">PyMedia</a>, but it requires me to migrate to PCM to process the data. Similarly, <a href=""http://lame.sourceforge.net"">LAME</a> wants to help me encode, but not access the data in place. I have seen several other libraries that only deal with the ID3 tags.</p>

<p>Can anyone recommend a Python MP3 library? Alternatively, can you disabuse me of my assumption that going to PCM and back is bad and avoidable?</p>
"
310833,2592,2008-11-22T04:02:49Z,1,using rstrip on form.cleaned_data[i] in Django,"<p>In my views.py, i have a snippit of code like this:</p>

<pre><code>def clean_post_data(form):
    for i in form.cleaned_data:
    	form.cleaned_data[i] = form.cleaned_data[i].rstrip()

def add_product(request):   
    form = ProductForm(request.POST, request.FILES or None)
    image = Image.objects.all()
    action = ""Add""

    if request.POST:
    	if form.is_valid():
    		clean_post_data(form)
    		form.save()
    		action = ""Added new product""
    		return render_to_response('cms/admin/action.html', {'action' : action},context_instance=RequestContext(request))
    	else:
    		action = ""There was an error. Please go back and try again""
    		return render_to_response('cms/admin/action.html', {'action' : action}, context_instance=RequestContext(request))

    return render_to_response('cms/admin/editproduct.html', {'form' : form, 'action' : action, 'image' : image}, context_instance=RequestContext(request))
</code></pre>

<p>But when i run that, i get the following error <code>'list' object has no attribute 'rstrip'</code>. What am i doing wrong.</p>

<p>I originally had the <code>for i in form.cleaned_data:</code> loop directly in the view (not in another function) and it worked fine, but now when i try it i get the same error as above. <a href=""http://dpaste.com/92836/"" rel=""nofollow"">http://dpaste.com/92836/</a></p>
"
310856,39808,2008-11-22T04:26:23Z,2,Python GTK MVC,"<p>I've been looking around for a good MVC framework for Python using PyGTK. I've looked at <a href=""http://www.async.com.br/projects/kiwi/"" rel=""nofollow"">Kiwi</a> but found it a bit lacking, especially with using the Gazpacho Glade-replacement.</p>

<p>Are there any other nice desktop Python MVC frameworks?  I'm one of the few (it seems) to not want a webapp.</p>
"
310890,24489,2008-11-22T05:01:53Z,3,Any DAL/ORM on GAE?,"<p>Is there any Database Abstraction Layer (DAL) or Object Relational Mapper (ORM) that works on Google App Engine (GAE), and on normal relational databases (RDBS), other  than <a href=""http://www.web2py.com"" rel=""nofollow"">web2py</a>'s?</p>

<p>If not, is anybody working on porting one of the existing DAL/ORM to GAE?</p>
"
310931,2592,2008-11-22T05:44:09Z,7,Cleaning form data in Django,"<p>How can i clean and modify data from a form in django. I would like to define it on a per field basis for each model, much like using ModelForms.</p>

<p>What I want to achieve is automatically remove leading and trailing spaces from defined fields, or turn a title (from one field) into a slug (which would be another field).</p>
"
311188,20894,2008-11-22T10:28:56Z,4,How do I edit and delete data in Django?,"<p>I am using django 1.0 and I have created my models using the example in the Django book.  I am able to perform the basic function of adding data; now I need a way of retrieving that data, loading it into a form (change_form?! or something), <b>EDIT</b> it and save it back to the DB. Secondly how do I <b>DELETE</b> the data that's in the DB? i.e. search, select and then delete!</p>

<p>Please show me an example of the code I need to write on my <code>view.py</code> and <code>urls.py</code> for perform this task.</p>
"
311202,13055,2008-11-22T10:53:57Z,41,"Modern, high performance bloom filter in Python?","<p>I'm looking for a production quality bloom filter implementation in Python to handle fairly large numbers of items (say 100M to 1B items with 0.01% false positive rate). </p>

<p><a href=""http://www.imperialviolet.org/pybloom.html"">Pybloom</a> is one option but it seems to be showing its age as it throws DeprecationWarning errors  on Python 2.5 on a regular basis. Joe Gregorio also has <a href=""http://bitworking.org/news/380/bloom-filter-resources"">an implementation</a>. </p>

<p>Requirements are fast lookup performance and stability. I'm also open to creating Python interfaces to particularly good c/c++ implementations, or even to Jython if there's a good Java implementation.</p>

<p>Lacking that, any recommendations on a bit array / bit vector representation that can handle ~16E9 bits?</p>
"
311300,39913,2008-11-22T12:43:53Z,2,Admin generic inlines for multi-table subclassed models broken --- any alternatives?,"<p>Here's what I'm trying to do, and failing...</p>

<p>I have a File model which has a generic-relation to other objects:</p>

<pre><code>class File(models.Model):
    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    content_object = generic.GenericForeignKey()
    file = models.FileField(upload_to='files/%Y/%m/%d')
    # etc....
</code></pre>

<p>I also want to have a sub-class of File to deal with the specific case of images to be displayed in-page, rather than downloaded:</p>

<pre><code>class Image(File):
    file = models.ImageField(upload_to='files/%Y/%m/%d')
</code></pre>

<p>All of the above works fine, including generic inlines of the File model, until I want to use a generic-inline of the Image model --- the save process fails to create the base class instance and so raises an error stating that the Image.file_ptr (the 'secret' foreign key to the base class) cannot be None.</p>

<p>So, basically, generic inlines do not properly support multi-table inheritance at the moment.</p>

<p>It's quite likely that I'm making this more complicated than it need be, so can anyone suggest either a fix for this problem, or a better way of achieving the same end?</p>

<p>Please let me know if you need further clarification.</p>
"
311588,745,2008-11-22T18:08:18Z,31,How to indent Python list-comprehensions?,"<p>List comprehensions can be useful in certain situations, but they can also be rather horrible to read.. As a slightly exaggerated example, how would you indent the following?</p>

<pre><code>allUuids = [x.id for x in self.db.query(schema.allPostsUuid).execute(timeout = 20) if x.type == ""post"" and x.deleted is not False]
</code></pre>
"
311601,35364,2008-11-22T18:18:58Z,4,"python as a ""batch"" script (i.e. run commands from python)","<p>I'm working in a windows environment (my laptop!) and I need a couple of scripts that run other programs, pretty much like a windows batch file.</p>

<p>how can I run a command from python such that the program when run, will replace the script? The program is interactive (for instance, unison) and keeps printing lines and asking for user input all the time. </p>

<p>So, just running a program and printing the output won't suffice. The program has to takeover the script's input/output, pretty mcuh like running the command from a .bat file. </p>

<p>I tried os.execl but it keeps telling me ""invalid arguments"", also, it doesn't find the program name (doesn't search the PATH variable); I have to give it the full path ..?!</p>

<p>basically, in a batch script I can write:
unison profile</p>

<p>how can I achieve the same effect in python?</p>

<p>EDIT:</p>

<p>I found out it can be done with <code>os.system( ... )</code> and since I cannot accept my own answer, I'm closing the question.</p>

<hr>

<p>EDIT: this was supposed to be a comment, but when I posted it I didn't have much points.</p>

<p>Thanks Claudiu, that's pretty much what I want, except for a little thing: I want the function to end when the program exits, but when I try it on unison, it doesn't return control to the python script, but to the windows command line environment</p>

<pre><code>&gt;&gt;&gt; os.execlp(""unison"")

C:\&gt;Usage: unison [options]
    or unison root1 root2 [options]
    or unison profilename [options]

For a list of options, type ""unison -help"".
For a tutorial on basic usage, type ""unison -doc tutorial"".
For other documentation, type ""unison -doc topics"".

C:\&gt;
C:\&gt;
C:\&gt;
</code></pre>

<p>how to get around this?</p>
"
311621,39951,2008-11-22T18:30:35Z,2,Accidental overwrite of OSX Python system framework,"<p>I got ahead of myself and downloaded and installed the OSX Python 2.6 package from www.python.org/download/ on my OSX 10.5.5 Intel Mac and installed the full package contents. Only after this did I come across <a href=""http://wiki.python.org/moin/MacPython/Leopard"" rel=""nofollow"">http://wiki.python.org/moin/MacPython/Leopard</a> stating that you should do a partial install of the package to avoid interfering with the system install.</p>

<p>I'm afraid I've already overwritten the system framework through that installer and I remember reading somewhere after discovering this that I'd lose certain elements included in the OSX system install and not Python distributions.</p>

<p>Is there any way to reverse this or restore anything I may have lost? What exactly have I lost and is it going to be a problem? </p>
"
311627,15250,2008-11-22T18:37:07Z,315,How to print date in a regular format in Python?,"<p>This is my code:</p>

<pre><code>import datetime
today = datetime.date.today()
print today
</code></pre>

<p>This prints: 2008-11-22 which is exactly what I want BUT....I have a list I'm appending this to and then suddenly everything goes ""wonky"". Here is the code:</p>

<pre><code>import datetime
mylist = []
today = datetime.date.today()
mylist.append(today)
print mylist
</code></pre>

<p>This prints the following: </p>

<pre><code>[datetime.date(2008, 11, 22)]
</code></pre>

<p>How on earth can I get just a simple date like ""2008-11-22""?</p>
"
311763,33383,2008-11-22T20:50:33Z,12,Parsing GPS receiver output via regex in Python,"<p>I have a friend who is finishing up his masters degree in aerospace engineering. For his final project, he is on a small team tasked with writing a program for tracking weather balloons, rockets and satellites. The program receives input from a GPS device, does calculations with the data, and uses the results of those calculations to control a series of motors designed to orientate a directional communication antenna, so the balloon, rocket or satellite always stays in focus.</p>

<p>Though somewhat of a (eternal) beginner myself, I have more programming experience than my friend. So when he asked me for advice, I convinced him to write the program in Python, my language of choice.</p>

<p>At this point in the project, we are working on the code that parses the input from the GPS device. Here is some example input, with the data we need to extract in bold:</p>

<p>$GPRMC,092204.999,<strong>4250.5589,S,14718.5084,E</strong>,1,12,24.4,<strong>89.6</strong>,M,,,0000*1F
$GPRMC,093345.679,<strong>4234.7899,N,11344.2567,W</strong>,3,02,24.5,<strong>1000.23</strong>,M,,,0000*1F
$GPRMC,044584.936,<strong>1276.5539,N,88734.1543,E</strong>,2,04,33.5,<strong>600.323</strong>,M,,,*00
$GPRMC,199304.973,<strong>3248.7780,N,11355.7832,W</strong>,1,06,02.2,<strong>25722.5</strong>,M,,,*00
$GPRMC,066487.954,<strong>4572.0089,S,45572.3345,W</strong>,3,09,15.0,<strong>35000.00</strong>,M,,,*1F</p>

<p>Here is some further explanation of the data:</p>

<blockquote>
  <p>""I looks like I'll need five things
  out of every line. And bear in mind
  that any one of these area's may be
  empty. Meaning there will be just two
  commas right next to each other. Such
  as ',,,' There are two fields that may
  be full at any time. Some of them only
  have two or three options that they
  may be but I don't think I should be
  counting on that.""</p>
</blockquote>

<p>Two days ago my friend was able to acquire the full log from the GPS receiver used to track a recent weather balloon launch. The data is quite long, so I put it all in <a href=""http://pastebin.com/f5f5cf9ab"">this pastebin</a>.</p>

<p>I am still rather new with regular expressions myself, so I am looking for some assistance.</p>
"
311775,15055,2008-11-22T20:56:41Z,110,Python - Create a list with initial capacity,"<p>Code like this often happens:</p>

<pre><code>l = []
while foo:
    #baz
    l.append(bar)
    #qux
</code></pre>

<p>This is really slow if you're about to append thousands of elements to your list, as the list will have to be constantly resized to fit the new elements.</p>

<p>In Java, you can create an ArrayList with an initial capacity. If you have some idea how big your list will be, this will be a lot more efficient.</p>

<p>I understand that code like this can often be re-factored into a list comprehension. If the for/while loop is very complicated, though, this is unfeasible. Is there any equivalent for us Python programmers?</p>
"
311963,30105,2008-11-23T01:01:56Z,1,How do I not raise a Python exception when converting an integer-as-string to an int,"<p>I have some HTML I am trying to parse.  There are cases where the html attributes alone are not going to help me identify the row type (header versus data).  Fortunately, if my row is a data row then it should have some values that can be converted to integers.  I have figured out how to convert the unicode to an integer for those cases that it is possible to make the conversion.  I am struggling to write the logic to move past the cells that the conversion will not work because the cell has content that must be treated as text.</p>

<p>for example if rowColumn[1][3] can be converted to an integer I can do so by </p>

<pre><code>int(rowColumn[1][3].replace(',','').strip('$'))
</code></pre>

<p>but I get an error if rowColumn[1][3] has text content.</p>
"
312263,15055,2008-11-23T07:26:06Z,9,Effective Keyboard Input Handling,"<p>What is a good way to implement keyboard handling? In any language, where I write a keyboard-interactive program (such as a tetris game), I end up having some code that looks like this:</p>

<pre><code>for event in pygame.event.get():
    if event.type == KEYDOWN:
        if False: pass          #make everything an elif
        elif rotating: pass
        elif event.key == K_q:
        elif event.key == K_e:
        elif event.key == K_LEFT:
            curpiece.shift(-1, 0)
            shadowpiece = curpiece.clone(); setupshadow(shadowpiece)
        elif event.key == K_RIGHT:
            curpiece.shift(1, 0)
            shadowpiece = curpiece.clone(); setupshadow(shadowpiece)
</code></pre>

<p>(shortened). I don't like this, as this has to go in my main loop, and it messes with all parts of the program. This also makes it impossible to have a user config screen where they can change which key maps to which action. Is there a good pattern to do this using some form of function callbacks?</p>
"
312284,115,2008-11-23T08:03:16Z,7,Fetching attachments from gmail via either python or php,"<p>I have been trying to find information on how to retrieve attachments from a gmail account in either python or PHP, I'm hoping that someone here can be of some help, thanks.</p>

<p>Related:</p>

<ul>
<li><a href=""http://stackoverflow.com/questions/348630/how-can-i-download-all-emails-with-attachments-from-gmail"">How can I download all emails with attachments from Gmail?</a></li>
</ul>
"
312443,112415,2008-11-23T12:15:52Z,959,How do you split a list into evenly sized chunks?,"<p>I have a list of arbitrary length, and I need to split it up into equal size chunks and operate on it. There are some obvious ways to do this, like keeping a counter and two lists, and when the second list fills up, add it to the first list and empty the second list for the next round of data, but this is potentially extremely expensive.</p>

<p>I was wondering if anyone had a good solution to this for lists of any length, e.g. using generators.</p>

<p>This should work:</p>

<pre><code>l = range(1, 1000)
print chunks(l, 10) -&gt; [ [ 1..10 ], [ 11..20 ], .., [ 991..999 ] ]
</code></pre>

<p>I was looking for something useful in <code>itertools</code> but I couldn't find anything obviously useful. Might've missed it, though.</p>

<p>Related question: <a href=""http://stackoverflow.com/questions/434287/what-is-the-most-pythonic-way-to-iterate-over-a-list-in-chunks"">What is the most “pythonic” way to iterate over a list in chunks?</a></p>
"
312444,40062,2008-11-23T12:17:18Z,5,Python 2.6 + JCC + Pylucene issue,"<p>Greetings,</p>

<p>I'm trying to use pylucene in Python 2.6. Since there's no windows build for 2.6, I try to  build the source code.</p>

<p>First of all, I build JCC (windows, using cygwin)</p>

<pre><code>python setup.py build
running build
running build_py
[...]
building 'jcc' extension
error: None

python setup.py install
running install
[...]
copying jcc\config.py -&gt; build\lib.win32-2.6\jcc
copying jcc\classes\org\osafoundation\jcc\PythonException.class -&gt; build\lib.win32-2.6\jcc\classes\org\osafoundation\jcc
running build_ext
building 'jcc' extension
error: None
</code></pre>

<p>Notice that it won't copy anything on my ""F:\Python26\Lib\site-packages"" directory. I don't know why. So that, I don't know if it's really installed or not.</p>

<p>Now, I'll make pylucene</p>

<pre><code>make
/cygdrive/f/Python26//python.exe -m jcc --shared --jar lucene-java-2.4.0/build/lucene-core-2.4.0.jar 
[...]
'doc:(I)Lorg/apache/lucene/document/Document;' --version 2.4.0 --files 2 --build

f:\Python26\python.exe: No module named jcc
make: *** [compile] Error 1
</code></pre>

<p>So, it seems JCC wasn't installed at all.</p>

<p>Then, I try to copy the ""jcc build"" under F:\Python26\Lib\site-packages, and I try to make pylucene  again:</p>

<pre><code>make
[...]
f:\Python26\python.exe: jcc is a package and cannot be directly executed
make: *** [compile] Error 1
</code></pre>

<p>Has anyone else seen this and found a workaround?</p>
"
312549,7965,2008-11-23T14:09:24Z,62,No Module named django.core,"<p>I have updated to latest Django version 1.0.2 after uninstalling my old Django version.But now when I run django-admin.py I get the following error. How can I resolve this?</p>

<pre><code>Traceback (most recent call last):
  File ""C:\Python25\Lib\site-packages\django\bin\django-admin.py"", line 2, in &lt;module&gt;
    from django.core import management
ImportError: No module named django.core
</code></pre>
"
312599,40080,2008-11-23T15:05:37Z,1,Debugging pylons in Eclipse under Ubuntu,"<p>I am trying to get pylons to debug in Eclipse under Ubuntu.
Specifically. I am not sure what to use for the 'Main Module' on the Run configurations dialog.</p>

<p>(<a href=""http://stackoverflow.com/questions/147650/debug-pylons-application-through-eclipse"">this</a> is a similar question on stackoverflow, but I think it applies to windows as I can't find paster-script.py on my system)</p>

<p>Can anyone help?</p>
"
312673,29364,2008-11-23T16:12:42Z,3,"Python, optparse and file mask","<pre><code>if __name__=='__main__':
    parser = OptionParser()
    parser.add_option(""-i"", ""--input_file"", 
                    dest=""input_filename"",
                      help=""Read input from FILE"", metavar=""FILE"")

    (options, args) = parser.parse_args()
    print options
</code></pre>

<p>result is</p>

<pre><code>$ python convert.py -i video_*
{'input_filename': 'video_1.wmv'}
</code></pre>

<p>there are video_[1-6].wmv in the current folder. 
Question is why video_* become video_1.wmv. What i'm doing wrong?</p>
"
312695,1816,2008-11-23T16:41:56Z,7,Python: Problem with overloaded constructors,"<p>WARNING: I have been learning Python for all of 10 minutes so apologies for any stupid questions!</p>

<p>I have written the following code, however I get the following exception: </p>

<blockquote>
  <p>Message           File
  Name  Line    Position     Traceback              Node
           31 
  exceptions.TypeError: this constructor takes no arguments</p>
</blockquote>

<pre><code>class Computer:

    name = ""Computer1""
    ip = ""0.0.0.0""
    screenSize = 17


    def Computer(compName, compIp, compScreenSize):
        name = compName
        ip = compIp
        screenSize = compScreenSize

        printStats()

        return

    def Computer():
        printStats()

        return

    def printStats():
        print ""Computer Statistics: --------------------------------""
        print ""Name:"" + name
        print ""IP:"" + ip
        print ""ScreenSize:"" , screenSize // cannot concatenate 'str' and 'tuple' objects
        print ""-----------------------------------------------------""
        return

comp1 = Computer()
comp2 = Computer(""The best computer in the world"", ""27.1.0.128"",22)
</code></pre>

<p>Any thoughts?</p>
"
312794,30289,2008-11-23T18:25:01Z,7,Python equivalent of continuations with Ruby,"<p>What is the Python equivalent of the following code in Ruby?</p>

<pre><code>def loop
  cont=nil
  for i in 1..4
    puts i
    callcc {|continuation| cont=continuation} if i==2
  end
  return cont
end

&gt; c=loop
1
2
3
4
&gt; c.call
3
4
</code></pre>

<p>Reference: <a href=""http://www-128.ibm.com/developerworks/java/library/os-lightweight9/"" rel=""nofollow"">Secrets of lightweight development success, Part 9: Continuations-based frameworks</a></p>
"
312925,4172,2008-11-23T20:35:16Z,45,Django authentication and Ajax - URLs that require login,"<p>I want to add some <a href=""http://en.wikipedia.org/wiki/Ajax%5F%28programming%29"">Ajax</a>-niceness to my Django-coded website. </p>

<p>In my Django code, I use the <code>@login_required</code> decorator from <code>django.contrib.auth.decorators</code> to mark which view requires authentication. The default behavior when a not authenticated user clicks it is to redirect him/her to login page, and then pass the target page. </p>

<p>What I saw on some sites, and really liked, is that when user clicks a link leading to a place restricted to logged-only users, instead of getting redirected to a login page, he/she gets a popup window (via JavaScript) asking him/her to log in or register. There's no redirection part, so no need for a user to use the ""back"" key if he/she decides he/she really doesn't like the website enough to waste the time registering.</p>

<p>So, the qestion is:  how would you manage the task of automatically marking some links as ""restricted"" so JavaScript can handle their <code>onclick</code> event and display a ""please log in"" popup? </p>
"
312928,6984,2008-11-23T20:39:15Z,6,Python as FastCGI under windows and apache,"<p>I need to run a simple request/response python module under an
existing system with windows/apache/FastCGI.</p>

<p>All the FastCGI wrappers for python I tried work for Linux only
(they use socket.fromfd() and other such shticks).</p>

<p>Is there a wrapper that runs under windows?</p>
"
313054,39396,2008-11-23T22:44:57Z,4,Django Admin Interface Does Not Use Subclass's __unicode__(),"<p>(Django 1.x, Python 2.6.x)</p>

<p>I have models to the tune of:</p>

<pre><code>class Animal(models.Model):
  pass

class Cat(Animal):
  def __unicode__(self):
    return ""This is a cat""

class Dog(Animal):
  def __unicode__(self):
    return ""This is a dog""

class AnimalHome(models.Model):
  animal = models.ForeignKey(Animal)
</code></pre>

<p>I have instantiated no Animals, because this is supposed to be a virtual class.  I have instantiated Cats and Dogs, but in the Admin Page for AnimalHome, my choices for Animals are displayed as ""Animal object"" (the default __unicode__(), I guess) as opposed to the __unicode__ I have defined for the two subclasses.  Help.</p>

<p><hr /></p>

<p>The abstract base class issue is a red herring wrt to this question, I think.  Even if Animal was not supposed to be abstract, I still have the problem that, for some reason, since the ForeignKey is defined on Animal and not one of its subclasses, the superclass method is being called instead of the subclass.  In OO programming when you call object.method() you're supposed to get the lowest-subclass's implementation, and you have to do extra work to get any superclass's implementation.  So why is it that having __unicode__ defined on the subclasses is not sufficient for --- actually the problem might be that __unicode__ is not getting called at all because introspection on the Animal class reveals that it's not defined.  So maybe if I define __unicode__ for Animal and have it call subclasses' __unicode__ I could get the desired effect.</p>

<p><hr /></p>

<p>Okay, I think that I understand the ORM issues.  Both these answers have helped me understand this, thank you.  While experimenting with this, I discovered that when Django saves a subclassed model, it does two things: (1) it creates a row for the subclassed object in the superclass's table, and (2) it makes the PK in the subclass table identical to the PK assigned in the superclass table.  This PK in the subclass table is named superclass_ptr.  Based upon this I've concocted the following.  I'd appreciate feedback.</p>

<pre><code>Class Animal(models.Model)
  def __unicode__(self):
    if Dog.objects.filter(pk=self.pk).count() &gt; 0:
      return unicode(Dog.objects.get(pk=self.pk))
    elif Cat.objects.filter(pk=self.pk).count() &gt; 0:
      return unicode(Cat.objects.get(pk=self.pk))
    else:
      return ""An Animal!""
</code></pre>

<p><hr /></p>

<p>It seems that Lawrence is most on-point wrt this question.  Cat and Dog will have disjoint PK sets (and any subclass of Animal will have a PK identical to the record of its superclass), but unfortunately Django does not perform any work behind the scenes a la: ""I'm an Animal.  I know Animals have subclasses Dog and Cat.  Specifically, I'm Animal number 3, and furthermore I just checked and there's a Cat number 3 too.  That means that I'm actually Cat number 3"".  Even though this seems entirely possible and very reasonable (since a Cat won't do anything an Animal couldn't do itself) using Python's introspection.  Thank you all.</p>
"
314234,10583,2008-11-24T14:17:17Z,13,Are there problems developing Django on Jython?,"<p><b> The background </b> </p>

<p>I'm building a fair-sized web application with a friend in my own time, and we've decided to go with the Django framework on Python. Django provides us with a lot of features we're going to need, so please don't suggest alternative frameworks.</p>

<p>The only decision I'm having trouble with, is whether we use Python or Jython to develop our application. Now I'm pretty familiar with Java and could possibly benefit from the libraries within the JDK. I know minimal Python, but am using this project as an opportunity to learn a new language - so the majority of work will be written in Python.</p>

<p>The attractiveness of Jython is of course the JVM. The number of python/django enabled web-hosts is extremely minimal - whereas I'm assuming I could drop a jython/django application on a huge variety of hosts. This isn't a massive design decision, but still one I think needs to be decided. I'd really prefer jython over python for the jvm accessibility alone.</p>

<p><b> Questions </b>  </p>

<p>Does Jython have many limitations compared to regular python? Will running django on jython cause problems? How quick is the Jython team to release updates alongside Python? Will Django work as advertised on Jython (with very minimal pre-configuration)?</p>

<p><b> Decision </b></p>

<p>Thanks for the helpful comments. What I think I'm going to do is develop in Jython for the JVM support - but to try to only use Python code/libraries. Portability isn't a major concern so if I need a library in the JDK (not readily available in python), I'll use it. As long as Django is fully supported, I'm happy.</p>
"
314583,NA,2008-11-24T16:02:37Z,4,Comparing multiple dictionaries in Python,"<p>I'm new to Python and am running to a problem I can't google my way out of. I've built a GUI using wxPython and ObjectiveListView. In its very center, the GUI has a list control displaying data in X rows (the data is loaded by the user) and in five columns.</p>

<p>When the user selects multiple entries from the list control (pressing CTRL or shift while clicking), the ObjectiveListView module gives me a list of dictionaries, the dictionaries containing the data in the rows of the list control. This is exactly what I want, good!</p>

<p>The returned list looks something like this:</p>

<pre><code>print MyList
[{'id':1023, 'type':'Purchase', 'date':'23.8.2008', 'sum':'-21,90', 'target':'Apple Store'}, {'id':1024, 'type':'Purchase', 'date':'24.8.2008', 'sum':'-21,90', 'target':'Apple Store'}, {'id':23, 'type':'Purchase', 'date':'2.8.2008', 'sum':'-21,90', 'target':'Apple Store'}]
</code></pre>

<p>All the dictionaries have the same keys, but the values change. The 'id' value is unique. Here the problems start. I want to get the common values for all the items the user selected. In the above list they would be 'sum':'-21,90' and 'target':'Apple Store'.</p>

<p>I don't know how to properly compare the dicts in the list. One big problem is that I don't know beforehand how many dicts the list contains, since it's decided by the user.</p>

<p>I have a vague idea that list comprehensions would be the way to go, but I only know how to compare two lists with list comprehensions, not n lists. Any help would be appreciated.</p>
"
314749,38581,2008-11-24T16:49:58Z,3,Python 2.5.2 and Solaris 8 (gcc 3.4.2) build issues,"<p>I'm trying to build python 2.5.2 on Solaris 8 using gcc 3.4.2.  I can't see any immediate errors in the ./configure step but, once built and i enter the python shell doing an import time errors with :</p>

<pre><code>Python 2.5.2 (r252:60911, Nov 21 2008, 18:45:42)
[GCC 3.4.2] on sunos5
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt; import time
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
ImportError: No module named time
</code></pre>

<p>What am i doing wrong?  From what i can see with a cursory google is that there might be an error with libstdc++.so, but i can't find any hard details.</p>

<p>Any suggestions would be most welcome.</p>

<p>Many thanks,</p>

<p>Al.</p>
"
315165,4264,2008-11-24T19:27:05Z,16,How to debug Web2py applications?,"<p>Is it possible? 
By debug I mean setting breakpoints, inspect values and advance step by step.</p>
"
315362,NA,2008-11-24T20:31:14Z,9,Properly formatted example for Python iMAP email access?,"<p>tldr:  Can someone show me how to properly format this Python iMAP example so it works?</p>

<p>from 
<a href=""https://docs.python.org/2.4/lib/imap4-example.html"" rel=""nofollow"">https://docs.python.org/2.4/lib/imap4-example.html</a></p>

<blockquote>
<pre><code>import getpass, imaplib

M = imaplib.IMAP4()
M.login(getpass.getuser(), getpass.getpass())
M.select()
typ, data = M.search(None, 'ALL')
for num in data[0].split():
    typ, data = M.fetch(num, '(RFC822)')
    print 'Message %s\n%s\n' % (num, data[0][1])
M.close()
M.logout()
</code></pre>
</blockquote>

<p>Assuming my email is ""email@gmail.com"" and the password is ""password,"" how should this look?  I tried <code>M.login(getpass.getuser(email@gmail.com), getpass.getpass(password))</code>
and it timed out.  Complete newb here, so it's very likely I missed something obvious (like creating an iMAP object first?  Not sure).</p>
"
315363,736,2008-11-24T20:31:20Z,3,Spambots are cluttering my log file [Django],"<p>I have a nice and lovely Django site up and running, but have noticed that my <code>error.log</code> file was getting huge, over 150 MB after a couple of months of being live. Turns out a bunch of spambots are looking for well known URL vulnerabilities (or something) and hitting a bunch of sub-directories like <code>http://mysite.com/ie</code> or <code>http://mysite.com/~admin.php</code> etc. </p>

<p>Since Django uses URL rewriting, it is looking for templates to fit these requests, which raises a <code>TemplateDoesNotExist</code> exception, and then a 500 message (Django does this, not me). I have debug turned off, so they only get the generic 500 message, but it's filling up my logs very quickly.</p>

<p>Is there a way to turn this behavior off? Or perhaps just block the IP's doing this?</p>
"
315381,37804,2008-11-24T20:38:45Z,2,How do I search through a folder for the filename that matches a regular expression using Python?,"<p>I am having some difficulty writing a function that will search through a directory for a file that matches a specific regular expression (which I have compiled using 're.compile'). So my question is: How do I search through a directory (I plan to use os.walk) for a file that matches a specific regular expression? An example would be very much appreciated. Thanks in advance. </p>
"
315435,NA,2008-11-24T20:53:22Z,3,Need instructions for Reversi game,"<p>I am trying to write Reversi game in Python. Can anyone give me some basic ideas and strategy which are simple, good and easy to use?</p>

<p>I would appreciate for any help because I've gone to a little far but is stucked between codes and it became more complex too. I think I overdid in some part that should be fairly simple. So....  </p>
"
315672,31319,2008-11-24T22:02:29Z,6,Automagically expanding a Python list with formatted output,"<p>Does anyone know if there's a way to automatically expand a list in Python, separated by commas?  I'm writing some Python code that uses the MySQLdb library, and I'm trying to dynamically update a list of rows in a MySQL database with certain key values.</p>

<p>For instance, in the code below, I'd like to have the numeric values in the record_ids list expand into a SQL ""<code>IN</code>"" clause.</p>

<pre><code>import MySQLdb
record_ids = [ 23, 43, 71, 102, 121, 241 ]

mysql = MySQLdb.connect(user=""username"", passwd=""secret"", db=""apps"")
mysql_cursor = mysql.cursor()

sqlStmt=""UPDATE apps.sometable SET lastmod=SYSDATE() where rec_id in ( %s )""

mysql_cursor.execute( sqlStmt, record_ids )
mysql.commit()
</code></pre>

<p>Any help would be appreciated!</p>
"
315716,29120,2008-11-24T22:21:17Z,23,Running a function periodically in twisted protocol,"<p>I am looking for a way to periodically send some data over all clients connected to a TCP port. I am looking at twisted python and I am aware of reactor.callLater. But how do I use it to send some data to all connected clients periodically ? The data sending logic is in Protocol class and it is instantiated by the reactor as needed. I don't know how to tie it from reactor to all protocol instances...</p>
"
315803,40431,2008-11-24T23:01:50Z,4,OpenCV's Python - OS X,"<p>I get the following error while building OpenCV on OS X 10.5 (intel):</p>

<pre><code>ld: warning in .libs/_cv_la-_cv.o, file is not of required architecture
ld: warning in .libs/_cv_la-error.o, file is not of required architecture
ld: warning in .libs/_cv_la-pyhelpers.o, file is not of required architecture
ld: warning in .libs/_cv_la-cvshadow.o, file is not of required architecture
ld: warning in ../../../cv/src/.libs/libcv.dylib, file is not of required architecture
ld: warning in /Developer/SDKs/MacOSX10.4u.sdk/usr/local/lib/libcxcore.dylib, file is not of required architecture
Undefined symbols for architecture i386:
""_fputs$UNIX2003"", referenced from:
  _PySwigObject_print in _cv_la-_cv.o
  _PySwigPacked_print in _cv_la-_cv.o
  _PySwigPacked_print in _cv_la-_cv.o
ld: symbol(s) not found for architecture i386
collect2: ld returned 1 exit status
lipo: can't open input file: /var/folders/Sr/Srq9N4R8Hr82xeFvW3o-uk+++TI/-Tmp-//cchT0WVX.out (No such file or directory)
make[4]: *** [_cv.la] Error 1
make[3]: *** [all-recursive] Error 1
make[2]: *** [all-recursive] Error 1
make[1]: *** [all-recursive] Error 1
make: *** [all] Error 2
</code></pre>

<p>While running ./configure --without-python everything is ok. Another strange thing is that when I used Python 2.4.5 or 2.5.1 everything has built ok, the problem occured after switching to Python Framework 2.5.2</p>
"
316238,52490,2008-11-25T02:53:44Z,26,Python float to Decimal conversion,"<p>Python Decimal doesn't support being constructed from float; it expects that you have to convert float to a string first.  </p>

<p>This is very inconvenient since standard string formatters for float require that you specify number of decimal places rather than significant places.  So if you have a number that could have as many as 15 decimal places you need to format as Decimal(""""%.15f""% my_float), which will give you garbage at the 15th decimal place if you also have any significant digits before decimal.</p>

<p>Can someone suggest a good way to convert from float to Decimal preserving value as the user has entered, perhaps limiting number of significant digits that can be supported?</p>
"
316325,40495,2008-11-25T03:54:51Z,4,"""import wx"" fails after installation of wxPython on Windows XP","<p>I downloaded and installed this version of <a href=""http://en.wikipedia.org/wiki/WxPython"" rel=""nofollow"">wxPython</a> for use with my Python 2.6 installation:</p>

<p><a href=""http://downloads.sourceforge.net/wxpython/wxPython2.8-win32-unicode-2.8.9.1-py26.exe"" rel=""nofollow"">http://downloads.sourceforge.net/wxpython/wxPython2.8-win32-unicode-2.8.9.1-py26.exe</a></p>

<p>When I run Python and try to import wx, I get the following error:</p>

<pre><code>C:\Program Files\Console2&gt;python
Python 2.6 (r26:66721, Oct  2 2008, 11:35:03) [MSC v.1500 32 bit (Intel)] on win32
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt; import wx
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
  File ""c:\Python26\lib\site-packages\wx-2.8-msw-unicode\wx\__init__.py"", line 45, in &lt;module&gt;
    from wx._core import *
  File ""c:\Python26\lib\site-packages\wx-2.8-msw-unicode\wx\_core.py"", line 4, in &lt;module&gt;
    import _core_
ImportError: DLL load failed: This application has failed to start because the application configuration is incorrect. Reinstalling the application may fix this problem.
&gt;&gt;&gt;
</code></pre>

<p>I have already tried removing wxPython and installing again and I got the same error.  How can I fix this problem?</p>
"
316484,40529,2008-11-25T06:14:20Z,9,Problem compiling MySQLdb for Python 2.6 on Win32,"<p>I'm using Django and Python 2.6, and I want to grow my application using a MySQL backend.  Problem is that there isn't a win32 package for MySQLdb on Python 2.6.</p>

<p>Now I'm no hacker, but I thought I might compile it myself using MSVC++9 Express.  But I run into a problem that the compiler quickly can't find <code>config_win.h</code>, which I assume is a header file for MySQL so that the MySQLdb package can know what calls it can make into MySQL.</p>

<p>Am I right?  And if so, where do I get the header files for MySQL?</p>
"
316518,21537,2008-11-25T06:41:16Z,1,"Ghostscript PDF -> TIFF throws an untrappable exception, when consuming files with asian fonts","<p>Ghostscript curls up and dies, throwing an exception to stdout which I cannot catch and log. I am pretty sure it gets sick when I give it asian fonts. Has anybody backed into this problem and solved it?</p>
"
316866,40572,2008-11-25T09:58:37Z,64,Ping a site in Python?,"<p>The basic code is:</p>

<pre><code>from Tkinter import *
import os,sys

ana= Tk()
def ping1():
    os.system('ping')

a=Button(pen)
ip=(""192.168.0.1"")

a.config(text=""PING"",bg=""white"",fg=""blue"")
a=ping1.ip ??? 
a.pack()

ana.mainloop()
</code></pre>

<p>How could I ping a sites or address?</p>
"
317368,6583,2008-11-25T13:43:04Z,5,"Newbie Python question about strings with parameters: ""%%s""?","<p>I'm trying to figure out what the following line does exactly - specifically the %%s part?</p>

<pre><code>cursor.execute('INSERT INTO mastertickets (%s, %s) VALUES (%%s, %%s)'%sourcedest, (self.tkt.id, n))
</code></pre>

<p>Any good mini-tutorial about string formatting and inserting variables into strings with Python?</p>
"
317413,30786,2008-11-25T13:57:02Z,78,Get Element value with minidom with Python,"<p>I am creating a GUI frontend for the Eve Online API in Python.</p>

<p>I have successfully pulled the XML data from their server.</p>

<p>I am trying to grab the value from a node called ""name"":</p>

<pre><code>from xml.dom.minidom import parse
dom = parse(""C:\\eve.xml"")
name = dom.getElementsByTagName('name')
print name
</code></pre>

<p>This seems to find the node, but the output is below:</p>

<pre><code>[&lt;DOM Element: name at 0x11e6d28&gt;]
</code></pre>

<p>How could I get it to print the value of the node?</p>
"
317531,40637,2008-11-25T14:30:37Z,3,Python: packing an ip address as a ctype.c_ulong() for use with DLL,"<p>given the following code: </p>

<pre><code>import ctypes    
ip=""192.168.1.1""
thisdll = ctypes.cdll['aDLL']
thisdll.functionThatExpectsAnIP(ip)
</code></pre>

<p>how can I correctly pack this for a DLL that expects it as a c_ulong datatype?</p>

<p>I've tried using: </p>

<pre><code>ip_netFrmt = socket.inet_aton(ip)
ip_netFrmt_c = ctypes.c_ulong(ip_netFrmt)
</code></pre>

<p>however, the <code>c_ulong()</code> method returns an error because it needs an integer. </p>

<p>is there a way to use <code>struct.pack</code> to accomplish this? </p>
"
317963,844,2008-11-25T16:25:34Z,4,Standard C or Python libraries to compute standard deviation of normal distribution,"<p>Say we have normal distribution n(x): mean=0 and \int_{-a}^{a} n(x) = P.</p>

<p>What is the easiest way to compute standard deviation of such distribution? May be there are standard libraries for python or C, that are suitable for that task?</p>
"
318067,40637,2008-11-25T16:49:18Z,7,Python: converting strings for use with ctypes.c_void_p(),"<p>given a string:</p>

<pre><code>msg=""hello world""
</code></pre>

<p><strong>How can I define this as a <code>ctypes.c_void_p()</code> data type?</strong></p>

<p>the following code yields a ""cannot be converted to pointer"" exception:</p>

<pre><code>data=ctypes.c_void_p(msg)
</code></pre>

<p><code>data</code> is required to be a <code>void*</code> type in C, because it is being passed to a DLL. </p>

<p>I'm assuming there is a way to pack/unpack the string using the <code>struct</code> package, but unfortunately I am very unfamiliar with this process.</p>
"
318390,16584,2008-11-25T18:23:15Z,2,Running numpy from cygwin,"<p>I am running a windows machine have installed Python 2.5.  I also used the windows installer to install NumPy. </p>

<p>This all works great when I run the Python (command line) tool that comes with Python.</p>

<p>However, if I run cygwin and then run Python from within, it cannot find the numpy package.</p>

<p>What environment variable do I need to set? What value should it be set to?  </p>
"
318700,30105,2008-11-25T20:17:52Z,1,Does anyone know where there is a recipe for serializing data and preserving its order in the output?,"<p>I am working with a set of data that I have converted to a list of dictionaries</p>

<p>For example one item in my list is </p>

<pre><code>{'reportDate': u'R20070501', 'idnum': u'1078099', 'columnLabel': u'2005',
 'actionDate': u'C20070627', 'data': u'76,000', 'rowLabel': u'Sales of Bananas'}
</code></pre>

<p>Per request </p>

<p>The second item in my list could be:</p>

<pre><code> {'reportDate': u'R20070501', 'idnum': u'1078099', 'columnLabel': u'2006',
 'actionDate': u'C20070627', 'data': u'86,000', 'rowLabel': u'Sales of Bananas'}
</code></pre>

<p>The third item could be:</p>

<pre><code> {'reportDate': u'R20070501', 'idnum': u'1078100', 'columnLabel': u'Full Year 2005',
 'actionDate': u'C20070627', 'data': u'116,000', 'rowLabel': u'Sales of Cherries'}
</code></pre>

<p>The fourth item could be:</p>

<pre><code> {'reportDate': u'R20070501', 'idnum': u'1078100', 'columnLabel': u'Full Year 2006',
 'actionDate': u'C20070627', 'data': u'76,000', 'rowLabel': u'Sales of Sales of Cherries'}
</code></pre>

<p>The reason I need to pickle this is because I need to find out all of the ways the columns were labeled before I consolidate the results and put them into a database.  The first and second items will be one row in the results, the third and fourth would be the next line in the results (after someone decides what the uniform column header label should be)</p>

<p>I tested pickle and was able to save and retrieve my data.  However, I need to be able to preserve the order in the output.  One idea I have is to add another key that would be a counter so I could retrieve my data and then sort by the counter.  Is there a better way?</p>

<p>I don't want to put this into a database because it is not permanent.  </p>

<p>I marked an answer down below. It is not what I am getting, so I need to figure out if the problem is somewhere else in my code.</p>
"
319232,21711,2008-11-25T23:14:51Z,2,How to call python2.5 function from x86asm/x64asm?,"<p>I'll have couple of python functions I must interface with from the assembly code. The solution doesn't need to be a complete solution because I'm not going to interface with python code for too long. Anyway, I chewed it a bit:</p>

<ul>
<li>What does a python object look like in memory?</li>
<li>How can I call a python function?</li>
<li>How can I pass python objects as python objects for ctypes interface?</li>
<li>Could ctypes interface make my work easier in any alternative way?</li>
</ul>
"
319426,52490,2008-11-26T01:06:44Z,270,How do I do a case insensitive string comparison in Python?,"<p>What's the best way to do case insensitive string comparison in Python?</p>

<p>I would like to encapsulate comparison of a regular strings to a repository string using in a very simple and pythonic way.  I also would like to have ability to look up values in a dict hashed by strings using regular python strings.  Much obliged for advice.</p>
"
319896,21537,2008-11-26T06:20:40Z,3,How do I skip processing the attachments of an email which is an attachment of a different email,"<p>using jython</p>

<p>I have a situation where emails come in with different attachments. Certain file types I process others I ignore and dont write to file.
I am caught in a rather nasty situation, because sometimes people send an email as an attachment, and that attached email has legal attachments. </p>

<p>What I want to do is skip that attached email and all its attachments.</p>

<p>using python/jythons std email lib how can i do this?</p>

<p><hr /></p>

<p>to make it clearer</p>

<p>I need to parse an email (named ROOT email), I want to get the attachments from this email using jython.
Next certain attachments are supported ie .pdf .doc etc
now it just so happens that, the clients send an email (ROOT email) with another email message (CHILD email) as an attachment, and in CHILD email it has .pdf attachments and such like.</p>

<p>What I need is: to get rid of any CHILD emails attached to the ROOT email AND the CHILD emails attachments. What happens is I walk over the whole email and it just parses every attachment, BOTH ROOT attachments and CHILD attachments as if they were ROOT attachments.</p>

<p>I cannot have this. I am only interested in ROOT attachements that are legal ie .pdf .doc. xls .rtf .tif .tiff</p>

<p>That should do for now, I have to run to catch a bus!
thanks!</p>
"
319923,23695,2008-11-26T06:39:33Z,11,How to upload a file with django (python) and s3?,"<p>I'm looking for a way to upload a file to s3. I am using django. I am currently using amazon's python library for uploading along with the following code: </p>

<p>View:</p>

<pre><code>def submitpicture(request):
    fuser = request.session[""login""]

    copied_data = request.POST.copy()
    copied_data.update(request.FILES)
    content_type = copied_data['file'].get('content-type')
    ffile = copied_data['file']['content']
    key = '%s-%s' % (fuser, ''.join(copied_data['file']['filename'].split(' ')))
    site_s3.save_s3_data(key, ffile, content_type)
</code></pre>

<p>Template:</p>

<pre><code>&lt;form action=""/submitpicture/"" method=""POST""&gt;
    &lt;input type=""file"" id=""file"" name=""file"" /&gt;
    &lt;input type=""submit"" value=""submit"" /&gt;
&lt;/form&gt;
</code></pre>

<p>However, when I actually try to run it i get the following error:</p>

<pre><code>""Key 'file' not found in &lt;QueryDict: {}&gt;""
#MultiValueDictKeyError
</code></pre>

<p>I really don't see what I'm doing wrong. Can someone point me in the right direction?</p>

<p>Edit: Just in case someone wonders, I am planning on adding some validation after I get the actual upload working. </p>
"
320052,40948,2008-11-26T08:26:22Z,4,How do you iterate over a tree?,"<p>What is your preferred method of traversing a tree data structure, since recursive method calls can be pretty inefficient in some circumstances. I am simply using a generator like the one above. Do you have any hints to make it faster?</p>

<pre><code>def children(self):
    stack = [self.entities]
    while stack: 
        for e in stack.pop():
            yield e
            if e.entities:
                stack.append(e.entities) 
</code></pre>

<p>Here is some test data.
The first one is recursive, the second uses the generator:</p>

<pre><code>s = time.time()
for i in range(100000):
    e.inc_counter()
print time.time() - s

s = time.time()
for i in range(100000):
    for e in e.children():
        e.inc_counter_s()
print time.time() - s
</code></pre>

<p>Results:</p>

<pre><code>0.416000127792
0.298999786377
</code></pre>

<p>Test code:</p>

<pre><code>import random

class Entity():
    def __init__(self, name):
        self.entities = []
        self.name = name
        self.counter = 1
        self.depth = 0

    def add_entity(self, e):
        e.depth = self.depth + 1
        self.entities.append(e)

    def inc_counter_r(self):
        for e in self.entities:
            e.counter += 1
            e.inc_counter_r()

    def children(self):
        stack = [self.entities]
        while stack:
            for e in stack.pop():
                yield e
                if e.entities:
                    stack.append(e.entities)

root = Entity(""main"")
def fill_node(root, max_depth):
    if root.depth &lt;= max_depth:
        for i in range(random.randint(10, 15)):
            e = Entity(""node_%s_%s"" % (root.depth, i))
            root.add_entity(e)
            fill_node(e, max_depth)
fill_node(root, 3)

import time
s = time.time()
for i in range(100):
    root.inc_counter_r()
print ""recursive:"", time.time() - s

s = time.time()
for i in range(100):
    for e in root.children():
        e.counter += 1
print ""generator:"",  time.time() - s
</code></pre>
"
320166,21537,2008-11-26T09:41:42Z,0,email.retr retrieves strange =20 characters when the email body has chinese characters in it,"<pre><code>    self.logger.info(msg)
    popinstance=poplib.POP3(self.account[0])
    self.logger.info(popinstance.getwelcome())
    popinstance.user(self.account[1])
    popinstance.pass_(self.account[2])
    try:
        (numMsgs, totalSize)=popinstance.stat()
        self.logger.info(""POP contains "" + str(numMsgs) + "" emails"")
        for thisNum in xrange(1, numMsgs + 1):
            try:
                (server_msg, body, octets)=popinstance.retr(thisNum)
            except:
                self.logger.error(""Could not download email"")
                raise
            text=""\n"".join(body)
            mesg=StringIO.StringIO(text)
            msg=rfc822.Message(mesg)
            MessageID=email.Utils.parseaddr(msg[""Message-ID""])[1]
            self.logger.info(""downloading email "" + MessageID)
            emailpath=os.path.join(self._emailpath + self._inboxfolder + ""\\"" + self._sanitize_string(MessageID  + "".eml""))
            emailpath=self._replace_whitespace(emailpath)
            try:
                self._dual_dump(text,emailpath)
            except:
                pass
            self.logger.info(popinstance.dele(thisNum))
    finally:
        self.logger.info(popinstance.quit())
</code></pre>

<p>(server_msg, body, octets)=popinstance.retr(thisNum) returns =20 in the body of the email when the email contains chinese characters.</p>

<p>How do I handle this?</p>

<p>raw text of email:</p>

<p></p>

<p>Subject: (B/L:4363-0192-809.015) SI FOR 15680XXXX436</p>

<p>=20</p>

<p>Dear</p>

<p>=20</p>

<p>SI ENCLOSED</p>

<p>PLS SEND US THE BL DRAFT AND DEBIT NOTE</p>

<p>=20</p>

<p>TKS</p>

<p>=20</p>

<p>MYRI</p>

<p>----- Original Message -----=20
</p>
"
320232,6068,2008-11-26T10:21:21Z,36,Ensuring subprocesses are dead on exiting Python program,"<p>Is there a way to ensure all created subprocess are dead at exit time of a Python program? By subprocess I mean those created with subprocess.Popen().</p>

<p>If not, should I iterate over all of the issuing kills and then kills -9? anything cleaner?</p>
"
320827,33061,2008-11-26T14:18:33Z,1,Python type-error issue,"<p>I'm writing a simple program to help generate orders for a game I'm a member of. It falls into the catergory of programmes I don't actually need. But now I've started I want it to work. It all pretty much runs smoothly but I can't figure out how to stop a type-error ocurring about half way through. Here's the code;</p>

<pre><code>status = 1

print ""[b][u]magic[/u][/b]""

while status == 1:
    print "" ""
    print ""would you like to:""
    print "" ""
    print ""1) add another spell""
    print ""2) end""
    print "" ""
    choice = input(""Choose your option: "")
    print "" ""
    if choice == 1:
        name = raw_input(""What is the spell called?"")
        level = raw_input(""What level of the spell are you trying to research?"")
        print ""What tier is the spell: ""
        print "" ""
        print ""1) low""
        print ""2) mid""
        print ""3) high""
        print "" ""
        tier = input(""Choose your option: "")
        if tier == 1:
            materials = 1 + (level * 1)
            rp = 10 + (level * 5)
        elif tier == 2:
            materials = 2 + (level * 1.5)
            rp = 10 + (level * 15)
        elif tier == 3:
            materials = 5 + (level * 2)
            rp = 60 + (level * 40)
        print ""research "", name, ""to level "", level, ""--- material cost = "",
                materials, ""and research point cost ="", rp
    elif choice == 2:
        status = 0
</code></pre>

<p>Can anyone help?</p>

<p><em>edit</em></p>

<p>The error I get is;</p>

<pre><code>Traceback (most recent call last):
  File ""C:\Users\Mike\Documents\python\magic orders"", line 27, in &lt;module&gt;
    materials = 1 + (level * 1)
TypeError: unsupported operand type(s) for +: 'int' and 'str'
</code></pre>
"
320929,30786,2008-11-26T14:43:33Z,99,Currency formatting in Python,"<p>I am looking to format a number like 188518982.18 to £188,518,982.18 using Python.</p>

<p>How can I do this?</p>
"
320979,6068,2008-11-26T14:58:46Z,2,How to include output of PHP script in Python driven Plone site?,"<p>I need to have the output of a PHP snippet in a Plone site. It was delivered to be a small library that has a display() function, in PHP, that outputs a line of text. But I need to put it in a Plone site. Do you have any recommendations?</p>

<p>I was thinking a long the lines of having a display.php that just runs display() and from the Plone template to download that URL and output the content. Do you think it might work? What methods of hitting a URL, retrieve the content and outputting can I use from inside a Plone template?</p>

<p>One important and critical constraint is that the output should be directly on the HTML and not an an iframe. This is a constraint coming from the outside, nothing technical.</p>
"
321024,34395,2008-11-26T15:08:29Z,5,Making functions non override-able,"<p>I know python functions are virtual by default. Let's say I have this:</p>

<pre><code>class Foo:
    def __init__(self, args):
        do some stuff
    def goo():
        print ""You can overload me""
    def roo():
        print ""You cannot overload me""
</code></pre>

<p>I don't want them to be able to do this:</p>

<pre><code>class Aoo(Foo):
    def roo():
        print ""I don't want you to be able to do this""
</code></pre>

<p>Is there a way to prevent users from overloading roo()?</p>
"
321304,33061,2008-11-26T16:24:13Z,3,python logging into a forum,"<p>I've written this to try and log onto a forum (phpBB3).</p>

<pre><code>import urllib2, re
import urllib, re
logindata = urllib.urlencode({'username': 'x', 'password': 'y'})
page = urllib.urlopen(""http://www.woarl.com/board/ucp.php?mode=login""[logindata])
output = page.read()
</code></pre>

<p>However when I run it it comes up with;</p>

<pre><code>Traceback (most recent call last):
  File ""C:/Users/Mike/Documents/python/test urllib2"", line 4, in &lt;module&gt;
    page = urllib.urlopen(""http://www.woarl.com/board/ucp.php?mode=login""[logindata])
TypeError: string indices must be integers
</code></pre>

<p>any ideas as to how to solve this?</p>

<p><em>edit</em></p>

<p>adding a comma between the string and the data gives this error instead</p>

<pre><code>Traceback (most recent call last):
  File ""C:/Users/Mike/Documents/python/test urllib2"", line 4, in &lt;module&gt;
    page = urllib.urlopen(""http://www.woarl.com/board/ucp.php?mode=login"",[logindata])
  File ""C:\Python25\lib\urllib.py"", line 84, in urlopen
    return opener.open(url, data)
  File ""C:\Python25\lib\urllib.py"", line 192, in open
    return getattr(self, name)(url, data)
  File ""C:\Python25\lib\urllib.py"", line 327, in open_http
    h.send(data)
  File ""C:\Python25\lib\httplib.py"", line 711, in send
    self.sock.sendall(str)
  File ""&lt;string&gt;"", line 1, in sendall
TypeError: sendall() argument 1 must be string or read-only buffer, not list
</code></pre>

<p><em>edit2</em></p>

<p>I've changed the code from what it was to;</p>

<pre><code>import urllib2, re
import urllib, re
logindata = urllib.urlencode({'username': 'x', 'password': 'y'})
page = urllib2.urlopen(""http://www.woarl.com/board/ucp.php?mode=login"", logindata)
output = page.read()
</code></pre>

<p>This doesn't throw any error messages, it just gives 3 blank lines. Is this because I'm trying to read from the log in page which disappears after logging in. If so how do I get it to display the index which is what should appear after hitting log in.</p>
"
321582,33061,2008-11-26T17:56:09Z,2,urllib2 data sending,"<p>I've recently written this with help from SO. Now could someone please tell me how to make it actually log onto the board. It brings up everything  just in a non logged in format.</p>

<pre><code>import urllib2, re
import urllib, re
logindata = urllib.urlencode({'username': 'x', 'password': 'y'})
page = urllib2.urlopen(""http://www.woarl.com/board/index.php"", logindata)
pagesource = page.read()
print pagesource
</code></pre>
"
321668,41121,2008-11-26T18:21:07Z,4,Application configuration incorrect with Python Imaging Library ,"<p>I'm trying to install the Python Imaging Library 1.1.6 for Python 2.6. After downloading the installation executable (Win XP), I receive the following error message:</p>

<p>""Application failed to start because the application configuration is incorrect. Reinstalling the application may fix this problem""</p>

<p>Any thoughts on what I have done / not done? The application has not been installed, and I can't import the module through the IDLE session. Thoughts?</p>
"
321795,8240,2008-11-26T19:09:08Z,30,Comparing XML in a unit test in Python,"<p>I have an object that can build itself from an XML string, and write itself out to an XML string. I'd like to write a unit test to test round tripping through XML, but I'm having trouble comparing the two XML versions. Whitespace and attribute order seem to be the issues. Any suggestions for how to do this? This is in Python, and I'm using ElementTree (not that that really matters here since I'm just dealing with XML in strings at this level).</p>
"
323032,4491,2008-11-27T05:55:24Z,12,Does c# have anything comparable to Python's list comprehensions,"<p>I want to generate a list in C#. I am missing python's list comprehensions. Is there a c# way to create collections on the fly like list comprehensions or generator statements do in python?</p>
"
323424,11677,2008-11-27T10:31:51Z,48,py2exe fails to generate an executable,"<p>I am using python 2.6 on XP. I have just installed py2exe, and I can successfully create a simple hello.exe from a hello.py. However, when I try using py2exe on my real program, py2exe produces a few information messages but fails to generate anything in the dist folder.  </p>

<p>My setup.py looks like this:</p>

<pre><code>from distutils.core import setup
import py2exe

setup(console=['ServerManager.py'])
</code></pre>

<p>and the py2exe output looks like this:</p>

<pre class=""lang-none prettyprint-override""><code>python setup.py py2exe
running py2exe
creating C:\DevSource\Scripts\ServerManager\build
creating C:\DevSource\Scripts\ServerManager\build\bdist.win32
   ...
   ...
creating C:\DevSource\Scripts\ServerManager\dist
*** searching for required modules ***
*** parsing results ***
creating python loader for extension 'wx._misc_' (C:\Python26\lib\site-packages\wx-2.8-msw-unicode\wx\_misc_.pyd -&gt; wx._misc_.pyd)
creating python loader for extension 'lxml.etree' (C:\Python26\lib\site-packages\lxml\etree.pyd -&gt; lxml.etree.pyd)
   ...
   ...
creating python loader for extension 'bz2' (C:\Python26\DLLs\bz2.pyd -&gt; bz2.pyd)
*** finding dlls needed ***
</code></pre>

<p>py2exe seems to have found all my imports (though I was a bit surprised to see win32 mentioned, as I am not explicitly importing it). Also, my program starts up quite happily with this command:</p>

<pre class=""lang-none prettyprint-override""><code>python ServerManager.py
</code></pre>

<p>Clearly I am doing something fundamentally wrong, but in the absence of any error messages from py2exe I have no idea what.</p>
"
323515,NA,2008-11-27T11:28:25Z,13,How to get the name of an open file?,"<p>I'm trying to store in a variable the name of the current file that I've opened from a folder...</p>

<p>How can I do that?
I've tried cwd = os.getcwd() but this only gives me the path of the folder, and I need to store the name of the opened file...</p>

<p>Can you please help me?</p>

<p>Thanks.</p>
"
323581,NA,2008-11-27T12:10:53Z,4,Eclipse (pydev): Is it possible to assign a shortcut to send selection to the python console?,"<p>Question so easy that fitted in the title :)
Eclipse (pydev): Is it possible to assign a shortcut to send selection to the python console?</p>
"
323689,11677,2008-11-27T12:57:05Z,31,Python list slice syntax used for no obvious reason,"<p>I occasionally see the list slice syntax used in Python code like this:</p>

<pre><code>newList = oldList[:]
</code></pre>

<p>Surely this is just the same as:</p>

<pre><code>newList = oldList
</code></pre>

<p>Or am I missing something?</p>
"
323750,985,2008-11-27T13:22:19Z,31,How to access previous/next element while for looping?,"<p>Is there a way to access a list(or tuple, or other iterable)'s next, or previous element while looping through with for loop?</p>

<pre><code>l=[1,2,3]
for item in l:
    if item==2:
        get_previous(l,item)
</code></pre>
"
323763,11522,2008-11-27T13:24:45Z,49,Foreign key from one app into another in Django,"<p>I'm wondering if it's possible to define a foreign key in a models.py file in Django that is a reference to a table in another app?</p>

<p>In other words, I have two apps, called cf and profiles, and in cf/models.py I have (amongst other things):</p>

<pre><code>class Movie(models.Model):
    title = models.CharField(max_length=255)
</code></pre>

<p>and in profiles/models.py I want to have:</p>

<pre><code>class MovieProperty(models.Model):
    movie = models.ForeignKey(Movie)
</code></pre>

<p>But I can't get it to work. I've tried:</p>

<pre><code>    movie = models.ForeignKey(cf.Movie)
</code></pre>

<p>and I've tried importing cf.Movie at the beginning of models.py, but I always get errors, such as:</p>

<pre><code>NameError: name 'User' is not defined
</code></pre>

<p>Am I breaking the rules by trying to tie two apps together in this way, or have I just got the syntax wrong?</p>
"
323829,22847,2008-11-27T13:55:59Z,5,How to find out if there is data to be read from stdin on Windows in Python?,"<p>This code</p>

<pre><code>select.select([sys.stdin], [], [], 1.0)
</code></pre>

<p>does exactly what I want on Linux, but not in Windows.</p>

<p>I've used <code>kbhit()</code> in <code>msvcrt</code> before to see if data is available on stdin for reading, but in this case it always returns <code>0</code>.  Additionally <code>msvcrt.getch()</code> returns <code>'\xff'</code> whereas <code>sys.stdin.read(1)</code> returns <code>'\x01'</code>.  It seems as if the msvcrt functions are not behaving properly.</p>

<p>Unfortunately I can't use TCP sockets as I'm not in control of the application talking my Python program.</p>
"
323866,13913,2008-11-27T14:13:40Z,4,How to analyse .exe parameters inside the program?,"<p>I have a program that can have a lot of parameters (we have over +30 differents options).</p>

<p>Example:
<code>myProgram.exe -t alpha 1 -prod 1 2 -sleep 200</code></p>

<p>This is 3 Commands (from command pattern object at the end) that each contain some parameters. Inside the code we parse all command (start with -) and get a list of string (split all space) for the parameters. So in fact, we have : string-->Collection of String parameters for each command.</p>

<p>For the moment, we use string comparison and we can get the whole thing works (instance the concrete command and return the ICommand interface). The problem is we require to do a lot of IF everytime to get the good command.</p>

<p>Do you have some pattern that can be used to extract all parameters from an EXE without using a lot of IF?</p>

<p>The code is in C# but I think the logic can be any other language too...</p>
"
323972,28121,2008-11-27T14:55:53Z,399,Is there any way to kill a Thread in Python?,"<p>Is it possible to terminate a running thread without setting/checking any flags/semaphores/etc.?</p>
"
324132,NA,2008-11-27T16:12:04Z,5,split twice in the same expression?,"<p>Imagine I have the following:</p>

<pre><code>inFile = ""/adda/adas/sdas/hello.txt""

# that instruction give me hello.txt
Name = inFile.name.split(""/"") [-1]

# that one give me the name I want - just hello
Name1 = Name.split(""."") [0]
</code></pre>

<p>Is there any chance to simplify that doing the same job in just one expression?</p>
"
324214,7743,2008-11-27T16:47:54Z,38,What is the fastest way to parse large XML docs in Python?,"<p>I am currently the following code based on Chapter 12.5 of the Python Cookbook:</p>

<pre><code>from xml.parsers import expat

class Element(object):
    def __init__(self, name, attributes):
        self.name = name
        self.attributes = attributes
        self.cdata = ''
        self.children = []
    def addChild(self, element):
        self.children.append(element)
    def getAttribute(self,key):
        return self.attributes.get(key)
    def getData(self):
        return self.cdata
    def getElements(self, name=''):
        if name:
            return [c for c in self.children if c.name == name]
        else:
            return list(self.children)

class Xml2Obj(object):
    def __init__(self):
        self.root = None
        self.nodeStack = []
    def StartElement(self, name, attributes):
        element = Element(name.encode(), attributes)
        if self.nodeStack:
            parent = self.nodeStack[-1]
            parent.addChild(element)
        else:
            self.root = element
        self.nodeStack.append(element)
    def EndElement(self, name):
        self.nodeStack.pop()
    def CharacterData(self,data):
        if data.strip():
            data = data.encode()
            element = self.nodeStack[-1]
            element.cdata += data
    def Parse(self, filename):
        Parser = expat.ParserCreate()
        Parser.StartElementHandler = self.StartElement
        Parser.EndElementHandler = self.EndElement
        Parser.CharacterDataHandler = self.CharacterData
        ParserStatus = Parser.Parse(open(filename).read(),1)
        return self.root
</code></pre>

<p>I am working with XML docs about 1 GB in size. Does anyone know a faster way to parse these?</p>
"
324506,NA,2008-11-27T19:16:46Z,1,Problem with Boolean Expression with a string value from a lIst,"<p>I have the following problem:</p>

<pre><code>  # line is a line from a file that contains [""baa"",""beee"",""0""]
  line = TcsLine.split("","")
  NumPFCs = eval(line[2])
  if NumPFCs==0:
     print line
</code></pre>

<p>I want to print all the lines from the file if the second position of the list has a value == 0.</p>

<p>I print the lines but after that the following happens:
Traceback (most recent call last):</p>

<p>['baaa', 'beee', '0', '\n']</p>

<p><strong><em>BUT after I have the next ERROR</em></strong></p>

<pre><code>ilation.py"", line 141, in ?
    getZeroPFcs()
ilation.py"", line 110, in getZeroPFcs
    NumPFCs = eval(line[2])
  File ""&lt;string&gt;"", line 0
</code></pre>

<p>Can you please help me?
thanks</p>

<p>What0s</p>
"
324643,7743,2008-11-27T21:00:47Z,9,"What is the equivalent of map<int, vector<int> > in Python?","<p>In C++ often do something like this:</p>

<pre><code>typedef map&lt;int, vector&lt;int&gt; &gt; MyIndexType;
</code></pre>

<p>Where I then use it like this:</p>

<pre><code>MyIndexType myIndex;
for( ... some loop ...)
{
  myIndex[someId].push_back(someVal);
}
</code></pre>

<p>If there was no entry in the map the code will insert a new empty vector and then append to it.</p>

<p>In Python it would look like this:</p>

<pre><code>myIndex = {}

for (someId,someVal) in collection:
   try:
      myIndex[someId].append(someVal)
   except KeyError:
      myIndex[someId] = [someVal]
</code></pre>

<p>The try except is a bit ugly here. Is there a way to tell the dictionary an object type to insert when a KeyError is encountered at dictionary declaration time?</p>
"
324779,13055,2008-11-27T23:01:18Z,9,Strategies for speeding up batch ORM operations in Django,"<p>One of my API calls can result in updates to a large number of objects (Django models). I'm running into performance issues with this since I'm updating each item individually, saving, and moving on to the next:</p>

<pre><code>for item in Something.objects.filter(x='y'):
    item.a=""something""
    item.save()
</code></pre>

<p>Sometimes my filter criterion looks like ""where x in ('a','b','c',...)"".</p>

<p>It seems the <a href=""http://code.djangoproject.com/ticket/661"">official answer to this is ""won't fix""</a>. I'm wondering what strategies people are using to improve performance in these scenarios.</p>
"
324945,21537,2008-11-28T01:58:14Z,1,JDBC & MSSQL seem to be truncating large fields,"<p>I'm using jython 2.2.1, and jdbc 1.2 and connecting to a mssql 2000 database, writing the contents of an email to it. When I get to the body of the email which can be quite large sometimes I need to truncate the data at 5000 chars. Except mssql &amp; jdbc gang up on me like school yard bullies, when i check the database loads of my data is missing, every time, with max chars = 256 chars.</p>

<p>I have checked the size of the field and it is set to 5000. what gives? </p>

<p>I am pretty sure it is related to jdbc, as the previous version used .... vb6 &amp; odbc, without a hitch.</p>

<p>here is some code:</p>

<pre><code>BODY_FIELD_DATABASE=5000

def _execute_insert(self):
    try:
        self._stmt=self._con.prepareStatement(\
            ""INSERT INTO EmailHdr (EntryID, MailSubject, MailFrom, MailTo, MailReceive, MailSent, AttachNo, MailBody)\
             VALUES (?, ?, ?, ?, ?, ?, ?, cast(? as varchar ("" + str(BODY_FIELD_DATABASE) + "")))"")
        self._stmt.setString(1,self._emailEntryId)
        self._stmt.setString(2,self._subject)
        self._stmt.setString(3,self._fromWho)
        self._stmt.setString(4,self._toWho)
        self._stmt.setString(5,self._emailRecv)
        self._stmt.setString(6,self._emailSent)
        self._stmt.setString(7,str(int(self._attachmentCount) + 1))
        self._stmt.setString(8,self._format_email_body()) 
        self._stmt.execute()
        self._prepare_inserting_attachment_data()
        self._insert_attachment_data()
    except:
        raise

def _format_email_body(self):
    if not self._emailBody:
        return "" ""
    if len(self._emailBody) &gt; BODY_FIELD_DATABASE:
        return self._clean_body(self._emailBody[:BODY_FIELD_DATABASE])
    else:
        return self._clean_body(self._emailBody)

def _clean_body(self,dirty):
    '''used to clean =20 occurrence in email body that contains chinese characters
       http://en.wikipedia.org/wiki/Quoted-printable'''
    dirty=str(dirty)
    return dirty.replace(r""=20"","""")
</code></pre>
"
324980,21537,2008-11-28T02:30:50Z,4,How do I determine if an email is Base64 encoded?,"<p>I am having difficulty determining if the body of a text email message is base64 encoded.
if it is then use this line of code;
making use of jython 2.2.1</p>

<pre><code>dirty=base64.decodestring(dirty)
</code></pre>

<p>else continue as normal.</p>

<p>This is the code I have atm. What line of code will allow me to extract this from the email:   </p>

<p>""Content-Transfer-Encoding: base64""   </p>

<pre><code>import email, email.Message
import base64

def _get_email_body(self):
    try:
        parts=self._email.get_payload()
        check=parts[0].get_content_type()
        if check==""text/plain"":
            part=parts[0].get_payload()
            enc = part[0]['Content-Transfer-Encoding']
            if enc == ""base64"":
                dirty=base64.decodestring(dirty)
        elif check==""multipart/alternative"":
            part=parts[0].get_payload()
            enc = part[0]['Content-Transfer-Encoding']
            if part[0].get_content_type()==""text/plain"":
                dirty=part[0].get_payload()
                if enc == ""base64"":
                    dirty=base64.decodestring(dirty)
            else:
                return ""cannot obtain the body of the email""
        else:
            return ""cannot obtain the body of the email""
        return dirty
    except:
        raise
</code></pre>

<p>OKAY this code works now! thanks all</p>
"
325463,28582,2008-11-28T10:42:03Z,32,"Launch a shell command with in a python script, wait for the termination and return to the script","<p>I've a python script that has to launch a shell command for every file in a dir:</p>

<pre><code>import os

files = os.listdir(""."")
for f in files:
    os.execlp(""myscript"", ""myscript"", f)
</code></pre>

<p>This works fine for the first file, but after the ""myscript"" command has ended, the execution stops and does not come back to the python script.</p>

<p>How can I do? Do I have to <code>fork()</code> before <code>calling os.execlp()</code>?</p>
"
326254,38388,2008-11-28T17:19:08Z,4,Packaging a Python library,"<p>I have a few Munin plugins which report stats from an Autonomy database. They all use a small library which scrapes the XML status output for the relevant numbers.</p>

<p>I'm trying to bundle the library and plugins into a Puppet-installable RPM. The actual RPM-building should be straightforward; once I have a <code>distutils</code>-produced distfile I can make it into an RPM based on a .spec file pinched from the Dag or EPEL repos [1]. It's the <code>distutils</code> bit I'm unsure of -- in fact I'm not even sure my library is correctly written for packaging. Here's how it works:</p>

<p>idol7stats.py:</p>

<pre><code>import datetime
import os
import stat
import sys
import time
import urllib
import xml.sax

class IDOL7Stats:
  cache_dir = '/tmp'

  def __init__(self, host, port):
    self.host = host
    self.port = port

  # ...

  def collect(self):
    self.data = self.__parseXML(self.__getXML())

  def total_slots(self):
    return self.data['Service:Documents:TotalSlots']
</code></pre>

<p>Plugin code:</p>

<pre><code>from idol7stats import IDOL7Stats
a = IDOL7Stats('db.example.com', 23113)
a.collect()
print a.total_slots()
</code></pre>

<p>I guess I want idol7stats.py to wind up in <code>/usr/lib/python2.4/site-packages/idol7stats</code>, or something else in Python's search path. What <code>distutils</code> magic do I need? This:</p>

<pre><code>from distutils.core import setup

setup(name = 'idol7stats',
  author = 'Me',
  author_email = 'me@example.com',
  version = '0.1',
  py_modules = ['idol7stats'])
</code></pre>

<p>almost works, except the code goes in <code>/usr/lib/python2.4/site-packages/idol7stats.py</code>, not a subdirectory. I expect this is down to my not understanding the difference between modules/packages/other containers in Python.</p>

<p>So, what's the rub?</p>

<p>[1] Yeah, I could just plonk the library in <code>/usr/lib/python2.4/site-packages</code> using RPM but I want to know how to package Python code.</p>
"
326401,40786,2008-11-28T18:37:52Z,1,Best language choice for a spam detection service,"<p>I have around 20 or so active blogs that get quite a bit of spam.  As I hate CAPCHA the alternative is very smart spam filtering.  I want to build a simple REST api like spam checking service which I would use in all my blogs. That way I can consolidate IP blocks and offload spam detection to 3rd party such as <a href=""http://akisment.com"" rel=""nofollow"" title=""Akisment"">Akisment</a>, <a href=""http://mollom.com/"" rel=""nofollow"" title=""Mollom"">Mollom</a>, <a href=""http://defensio.com/"" rel=""nofollow"" title=""Defensio"">Defensio</a> and sometime in the future write my own spam detection to really get my head into some very interesting spam detection algorithms.  </p>

<p>My language of choice is PHP, I consider myself quite proficient and I can really dig in deep and come out with a solution.  This project, I feel, can be used as a good exercise to learn another language. The big 2 that come to mind are Python and Ruby on Rails as everyone talks about them like its the next coming of our savior. Since this is mostly just an API and has no admin or public facing anything, seems like basic Python running a simple http server seems like the way to go. Am I missing anything? What would you, the great community, recommend? I would love to hear your language, book and best practices recommendations. </p>

<p>This has to scale and I want to write it with that in mind. Right now I'd probably be able to use 3rd party's free plans, but soon enough I'd have to expand the whole thing to actually think on its own. For now I think I'll just store everything in a MySQL database until I can do some real analysis on it. Thanks!</p>
"
326571,5624,2008-11-28T20:17:22Z,4,Converting a string of 1's and 0's to a byte array,"<p>I have a string with a length that is a multiple of 8 that contains only 0's and 1's.  I want to convert the string into a byte array suitable for writing to a file.  For instance, if I have the string ""0010011010011101"", I want to get the byte array [0x26, 0x9d], which, when written to file, will give 0x269d as the binary (raw) contents.</p>

<p>How can I do this in Python?</p>
"
326770,39975,2008-11-28T22:07:18Z,5,How can I dynamically get the set of classes from the current python module?,"<p>I have a python module that defines a number of classes:</p>

<pre><code>class A(object):
    def __call__(self):
        print ""ran a""

class B(object):
    def __call__(self):
        print ""ran b""

class C(object):
    def __call__(self):
        print ""ran c""
</code></pre>

<p>From within the module, how might I add an attribute that gives me all of the classes?</p>

<p>dir() gives me the names of everything from within my module, but I can't seem to figure out how to go from the name of a class to the class itself from <em>within</em> the module.</p>

<p>From outside of the module, I can simply use <code>getattr(mod, 'A')</code>, but I don't have a <code>self</code> kind of module from within the module itself.</p>

<p>This seems pretty obvious.  Can someone tell me what I'm missing?</p>
"
326794,32933,2008-11-28T22:19:06Z,7,Something similar to PHP's SimpleXML in Python?,"<p>Is there a way in Python to handle XML files similar to the way PHP's SimpleXML extension does them?</p>

<p>Ideally I just want to be able to access certain xml datas from a list object.</p>
"
326910,5624,2008-11-28T23:41:40Z,5,Running unit tests on nested functions,"<p>I come from the Java world, where you can hide variables and functions and then run unit tests against them using reflection.  I have used nested functions to hide implementation details of my classes so that only the public API is visible.  I am trying to write unit tests against these nested functions to make sure that I don't break them as I develop.  I have tried calling one of the nested functions like:</p>

<pre><code>def outer():
    def inner():
        pass

outer.inner()
</code></pre>

<p>which results in the error message:</p>

<blockquote>
  <p>AttributeError: 'function' object has no attribute 'inner'</p>
</blockquote>

<p>Is there a way for me to write unit tests against these nested functions?  If not, is there a way to trigger the name munging for function names like you can for class variables by prefixing them with __?</p>
"
326922,4172,2008-11-28T23:54:50Z,4,using curses with raw_input in python,"<p>In my python linux console application I use curses to handle displaying of data. At the same time I'd like to have an input line to enter commands, pretty much in good ol' irssi-style. With default curses getch() I'd have to do a lot of coding just to get the basic funcionality of raw_input function - arrow keys to move cursor / browse through the input history.</p>

<p>Is there a simple way to get such behavior working with curses, as it captures input events and I can't just use functions that read sys.stdin.</p>
"
327002,41718,2008-11-29T01:24:09Z,116,Which is faster in Python: x**.5 or math.sqrt(x)?,"<p>I've been wondering this for some time. As the title say, which is faster, the actual function or simply raising to the half power?</p>

<p><b>UPDATE</b></p>

<p>This is not a matter of premature optimization. This is simply a question of how the underlying code actually works. What is the theory of how Python code works?</p>

<p>I sent Guido van Rossum an email cause I really wanted to know the differences in these methods.</p>

<h3>My email:</h3>

<blockquote>
  <p>There are at least 3 ways to do a square root in Python: math.sqrt, the
  '**' operator and pow(x,.5).  I'm just curious as to the differences in
  the implementation of each of these.  When it comes to efficiency which
  is better?</p>
</blockquote>

<h3>His response:</h3>

<blockquote>
  <p>pow and ** are equivalent; math.sqrt doesn't work for complex numbers,
  and links to the C  sqrt() function. As to which one is
  faster, I have no idea...</p>
</blockquote>
"
327026,41722,2008-11-29T01:46:53Z,3,Attribute BOLD doesn't seem to work in my curses,"<p>I use something like this: 
screen.addstr(text, color_pair(1) | A_BOLD), but it doesn't seem to work..
However, A_REVERSE and all others attribute does work! </p>

<p>In fact, I'm trying to print something in white, but the COLOR_WHITE prints it gray.. and after a while of searching, it seems that printing it gray + BOLD makes it! </p>

<p>Any helps would be greatly appreciated.</p>
"
327142,41736,2008-11-29T04:01:45Z,3,Multiple Django Admin Sites on one Apache... When I log into one I get logged out of the other,"<p>I have two Django projects and applications running on the same Apache installation.  Both projects and both applications have the same name, for example myproject.myapplication.  They are each in separately named directories so it looks like .../dir1/myproject/myapplication and .../dir2/myproject/myapplication.   </p>

<p>Everything about the actual public facing applications works fine.  When I log into either of the admin sites it seems ok, but if I switch and do any work on the opposite admin site I get logged out of the first one.  In short I can't be logged into both admin sites at once.  Any help would be appreciated.</p>
"
327191,31060,2008-11-29T05:03:14Z,2,"in python, is there a one line pythonic way to get a list of keys from a dictionary in sorted order?","<p>The list sort method is a modifier function that returns None.</p>

<p>So if I want to iterate through all of the keys in a dictionary I cannot do:</p>

<pre>
for k in somedictionary.keys().sort():
    dosomething()
</pre>

<p>instead, i must:</p>

<pre>
keys = somedictionary.keys()
keys.sort()
for k in keys:
    dosomething()
</pre>

<p>Is there a pretty way to iterate through these keys in sorted order without having to break it up in to multiple steps?</p>
"
327223,121,2008-11-29T05:33:26Z,32,Memory Efficient Alternatives to Python Dictionaries,"<p>In one of my current side projects, I am scanning through some text looking at the frequency of word triplets.  In my first go at it, I used the default dictionary three levels deep.  In other words, topDictionary[word1][word2][word3] returns the number of times these words appear in the text, topdictionary[word1][word2] returns a dictionary with all the words that appeared following words 1 and 2, etc.</p>

<p>This functions correctly, but it is very memory intensive.  In my initial tests it used something like 20 times the memory of just storing the triplets in a text file, which seems like an overly large amount of memory overhead.</p>

<p>My suspicion is that many of these dictionaries are being created with many more slots than are actually being used, so I want to replace the dictionaries with something else that is more memory efficient when used in this manner.  I would strongly prefer a solution that allows key lookups along the lines of the dictionaries.</p>

<p>From what I know of data structures, a balanced binary search tree using something like red-black or AVL would probably be ideal, but I would really prefer not to implement them myself.  If possible, I'd prefer to stick with standard python libraries, but I'm definitely open to other alternatives if they would work best.</p>

<p>So, does anyone have any suggestions for me?</p>

<p>Edited to add:</p>

<p>Thanks for the responses so far.  A few of the answers so far have suggested using tuples, which didn't really do much for me when I condensed the first two words into a tuple.  I am hesitant to use all three as a key since I want it to be easy to look up all third words given the first two.  (ie I want something like the result of topDict[word1,word2].keys() ).  </p>

<p>The current dataset I am playing around with is the most recent version of <a href=""http://www.soschildrensvillages.org.uk/charity-news/wikipedia-for-schools.htm"">Wikipedia For Schools</a>.  The results of parsing the first thousand pages, for example, is something like 11MB for a text file where each line is the three words and the count all tab separated.  Storing the text in the dictionary format I am now using takes around 185MB.  I know that there will be some additional overhead for pointers and whatnot, but the difference seems excessive.</p>

<p>Once again, thank you all for the responses so far.</p>
"
327251,893,2008-11-29T06:18:49Z,4,Why is the Python readline module not available on OS X?,"<p>The documentation of the Python <a href=""http://www.python.org/doc/2.5.2/lib/module-readline.html"" rel=""nofollow""><code>readline</code></a> module says ""Availability: Unix"". However, it doesn't appear to be available on OS X, although other modules marked as Unix are available. Here is what I'm using:</p>

<pre>
$ uname -a
Darwin greg.local 8.11.1 Darwin Kernel Version 8.11.1: Wed Oct 10 18:23:28 PDT 2007; root:xnu-792.25.20~1/RELEASE_I386 i386 i386
$ which python
/usr/bin/python
$ python
Python 2.3.5 (#1, Nov 26 2007, 09:16:55) 
[GCC 4.0.1 (Apple Computer, Inc. build 5363) (+4864187)] on darwin
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
>>> import readline
Traceback (most recent call last):
  File """", line 1, in ?
ImportError: No module named readline
>>> 
</pre>

<p>I have also installed Python 2.5 through MacPorts but <code>readline</code> is not available there either.</p>

<p>What can I do to provide <code>readline</code> functionality for Python's <code>raw_input()</code> function on OS X?</p>
"
327311,121,2008-11-29T07:35:31Z,146,How are Python's Built In Dictionaries Implemented,"<p>Does anyone know how the built in dictionary type for python is implemented?  My understanding is that it is some sort of hash table, but I haven't been able to find any sort of definitive answer.</p>
"
327483,1304,2008-11-29T12:21:47Z,11,storing unbound python functions in a class object,"<p>I'm trying to do the following in python:</p>

<p>In a file called foo.py:</p>

<pre><code># simple function that does something:
def myFunction(a,b,c):
  print ""call to myFunction:"",a,b,c

# class used to store some data:
class data:
  fn = None

# assign function to the class for storage.
data.fn = myFunction
</code></pre>

<p>And then in a file called bar.py:
    import foo</p>

<pre><code>d = foo.data
d.fn(1,2,3)
</code></pre>

<p>However, I get the following error:</p>

<blockquote>
  <p>TypeError: unbound method f() must be called with data instance as first argument (got int instance instead)</p>
</blockquote>

<p>This is fair enough I suppose - python is treating d.myFunction as a class method. However, I want it to treat it as a normal function - so I can call it without having to add an unused 'self' parameter to the myFunction definition.</p>

<p>So the question is:</p>

<p><strong><em>How can I store a function in a class object without the function becoming bound to that class?</em></strong></p>
"
327534,41121,2008-11-29T13:40:05Z,19,Storing and updating lists in Python dictionaries: why does this happen?,"<p>I have a list of data that looks like the following:</p>

<pre><code>// timestep,x_position,y_position
0,4,7
0,2,7
0,9,5
0,6,7
1,2,5
1,4,7
1,9,0
1,6,8
</code></pre>

<p>... and I want to make this look like:</p>

<pre><code>0, (4,7), (2,7), (9,5), (6,7)
1, (2,5), (4,7), (9,0), (6.8)
</code></pre>

<p>My plan was to use a dictionary, where the value of t is the key for the dictionary, and the value against the key would be a list. I could then append each (x,y) to the list. Something like:</p>

<pre><code># where t = 0, c = (4,7), d = {}

# code 1
d[t].append(c)
</code></pre>

<p>Now this causes IDLE to fail. However, if I do:</p>

<pre><code># code 2
d[t] = []
d[t].append(c)
</code></pre>

<p>... this works. </p>

<p>So the question is: why does code 2 work, but code 1 doesn't?</p>

<p>PS Any improvement on what I'm planning on doing would be of great interest!! I think I will have to check the dictionary on each loop through the input to see if the dictionary key already exists, I guess by using something like max(d.keys()): if it is there, append data, if not create the empty list as the dictionary value, and then append data on the next loop through. </p>
"
327597,41795,2008-11-29T15:01:28Z,2,Suggestion to implement a text Menu without switch case,"<p>I'm giving my first steps on Python.  I saw that we don't have switch case statement,
so I would you guys implement a text Menu in python?</p>

<p>Thanks</p>
"
327776,41795,2008-11-29T18:03:03Z,3,Read the last lineof the file,"<p>Imagine I have a file with </p>

<p>Xpto,50,30,60
Xpto,a,v,c
Xpto,1,9,0
Xpto,30,30,60</p>

<p>that txt file can be appended a lot of times and when I open the file I want only to get the values of the last line of the txt file... How can i do that on python? reading the last line?</p>

<p>Thanks</p>
"
327807,26592,2008-11-29T18:19:28Z,82,Django equivalent for count and group by,"<p>I have a model that looks like this:</p>

<pre><code>class Category(models.Model):
    name = models.CharField(max_length=60)

class Item(models.Model):
    name = models.CharField(max_length=60)
    category = models.ForeignKey(Category)
</code></pre>

<p>I want select count (just the count) of items for each category, so in SQL it would be as simple as this:</p>

<pre><code>select category_id, count(id) from item group by category_id
</code></pre>

<p>Is there an equivalent of doing this ""the Django way""? Or is plain SQL the only option? I am familiar with the <em>count( )</em> method in Django, however I don't see how <em>group by</em> would fit there.</p>
"
327896,3045,2008-11-29T19:31:42Z,1,how to draw lines on a picture background in pygame,"<p>I would like to draw lines (of arbitrary position and length) onto a surface in pygame, which itself is an image loaded from a file on disk.</p>

<p>Can anyone point me to some example code that does this?</p>
"
327985,41795,2008-11-29T20:41:28Z,3,How do I modify the last line of a file?,"<p>The last line of my file is:</p>

<blockquote>
  <p>29-dez,40,</p>
</blockquote>

<p>How can I modify that line so that it reads:</p>

<blockquote>
  <p>29-Dez,40,90,100,50</p>
</blockquote>

<p>Note: I don't want to write a new line. I want to take the same line and put new values after <code>29-Dez,40,</code></p>

<p>I'm new at python. I'm having a lot of trouble manipulating files and for me every example I look at seems difficult.</p>
"
328003,11596,2008-11-29T21:00:12Z,3,wxpython: Updating a dict or other appropriate data type from wx.lib.sheet.CSheet object,"<p>If I have a notebook with three spreadsheet widgets, what is the best way to have changes to the spreadsheet update a dictionary (or maybe an sqlite file?).  Do all wx grid objects come with a built in dictionary related to the SetNumberRows and SetNumberCols?  Basically I am looking for guidance on how to work with the user-input data from a spreadsheet widget, as in this example adapted from the tutorial on python.org:</p>

<pre><code>class ExSheet(wx.lib.sheet.CSheet):
    def __init__(self, parent):
        sheet.CSheet.__init__(self, parent)
        self.SetLabelBackgroundColour('#CCFF66')
        self.SetNumberRows(50)
        self.SetNumberCols(50)

class Notebook(wx.Frame):
    def __init__(self, parent, id, title):
        wx.Frame.__init__(self, parent, id, title)
        nb = wx.Notebook(self, -1, style=wx.NB_BOTTOM)
        self.sheet1 = ExSheet(nb)
        self.sheet2 = ExSheet(nb)
        self.sheet3 = ExSheet(nb)
        nb.AddPage(self.sheet1, ""Sheet1"")
        nb.AddPage(self.sheet2, ""Sheet2"")
        nb.AddPage(self.sheet3, ""Sheet3"")
        self.sheet1.SetFocus()
        self.StatusBar()
</code></pre>
"
328059,41795,2008-11-29T21:55:53Z,13,Create a List that contain each Line of a File,"<p>I'm trying to open a file and create a list with each line read from the file.</p>

<pre><code>   i=0
   List=[""""]
   for Line in inFile:
      List[i]=Line.split("","")
      i+=1
   print List
</code></pre>

<p>But this sample code gives me an error because of the <code>i+=1</code> saying that <code>index is out of range</code>.
What's my problem here? How can I write the code in order to increment my list with every new Line in the InFile?</p>
"
328061,3045,2008-11-29T21:58:40Z,18,How to make a surface with a transparent background in pygame,"<p>Can someone give me some example code that creates a surface with a transparent background in pygame?</p>
"
328107,3045,2008-11-29T22:37:13Z,67,How can you determine a point is between two other points on a line segment?,"<p>Let's say you have a two dimensional plane with 2 points (called a and b) on it represented by an x integer and a y integer for each point.</p>

<p>How can you determine if another point c is on the line segment defined by a and b?</p>

<p>I use python most, but examples in any language would be helpful.</p>
"
328356,25188,2008-11-30T02:28:04Z,128,Extracting text from HTML file using Python,"<p>I'd like to extract the text from an HTML file using Python.  I want essentially the same output I would get if I copied the text from a browser and pasted it into notepad.  </p>

<p>I'd like something more robust than using regular expressions that may fail on poorly formed HTML.  I've seen many people recommend Beautiful Soup, but I've had a few problems using it.  For one, it picked up unwanted text, such as JavaScript source.  Also, it did not interpret HTML entities.  For example, I would expect &amp;#39; in HTML source to be converted to an apostrophe in text, just as if I'd pasted the browser content into notepad.</p>

<p><strong>Update</strong> <code>html2text</code> looks promising. It handles HTML entities correctly and ignores JavaScript.  However, it does not exactly produce plain text; it produces markdown that would then have to be turned into plain text. It comes with no examples or documentation, but the code looks clean.</p>

<hr>

<p>Related questions:</p>

<ul>
<li><a href=""http://stackoverflow.com/questions/37486/filter-out-html-tags-and-resolve-entities-in-python"">Filter out HTML tags and resolve entities in python</a></li>
<li><a href=""http://stackoverflow.com/questions/57708/convert-xmlhtml-entities-into-unicode-string-in-python"">Convert XML/HTML Entities into Unicode String in Python</a></li>
</ul>
"
328490,115,2008-11-30T05:32:54Z,2,Monitoring a displays state in python?,"<p>How can I tell when Windows is changing a monitors power state?</p>
"
328492,115,2008-11-30T05:34:32Z,0,Setting monitor power state in python?,"<p>How can I send a monitor into/out-of a different power state (like sleep)?</p>
"
328568,39167,2008-11-30T07:02:14Z,2,Deploying a python application with shared package,"<p>I'm thinking how to arrange a deployed python application which will have a </p>

<ol>
<li>Executable script located in /usr/bin/ which will provide a CLI to functionality implemented in</li>
<li>A library installed to wherever the current site-packages directory is.</li>
</ol>

<p>Now, currently, I have the following directory structure in my sources:</p>

<pre><code>foo.py
foo/
  __init__.py
  ...
</code></pre>

<p>which I guess is not the best way to do things. During development, everything works as expected, however when deployed, the ""from foo import FooObject"" code in foo.py seemingly attempts to import foo.py itself, which is not the behaviour I'm looking for.</p>

<p>So the question is what is the standard practice of orchestrating situations like this? One of the things I could think of is, when installing, rename foo.py to just foo, which stops it from importing itself, but that seems rather awkward...</p>

<p>Another part of the problem, I suppose, is that it's a naming challenge. Perhaps call the executable script foo-bin.py?</p>
"
328793,4172,2008-11-30T12:18:18Z,0,python curses.ascii depending on locale?,"<p>The <code>curses.ascii</code> module has some nice functions defined, that allow for example to recognize which characters are printable (<code>curses.ascii.isprint(ch)</code>).</p>

<p>But, diffrent character codes can be printable depending on which locale setting is being used. For example, there are certain polish characters:</p>

<pre><code>&gt;&gt;&gt; ord('a')
97
&gt;&gt;&gt; ord('ą')
177
&gt;&gt;&gt;
</code></pre>

<p>I'm wondering, is there a better way to tell if a number represents printable character then the one used in <code>curses.ascii</code> module:</p>

<pre><code>def isprint(c): return _ctoi(c) &gt;= 32 and _ctoi(c) &lt;= 126
</code></pre>

<p>which is kind of locale-unfriendly.</p>
"
328851,33061,2008-11-30T13:23:48Z,31,Printing all instances of a class,"<p>With a class in Python, how do I define a function to print every single instance of the class in a format defined in the function?</p>
"
328964,NA,2008-11-30T15:40:58Z,6,long <-> str binary conversion,"<p>Is there any lib that convert very long numbers to string just copying the data?</p>

<p>These one-liners are too slow:</p>

<pre><code>def xlong(s):
    return sum([ord(c) &lt;&lt; e*8 for e,c in enumerate(s)])

def xstr(x):
    return chr(x&amp;255) + xstr(x &gt;&gt; 8) if x else ''

print xlong('abcd'*1024) % 666
print xstr(13**666)
</code></pre>
"
329333,20310,2008-11-30T20:42:50Z,6,Pure Python rational numbers module for 2.5,"<p>Has anybody seen such a thing? Small self-sufficient modules are preferred.</p>
"
329498,16511,2008-11-30T22:21:34Z,5,How to find all built in libraries in Python,"<p>I've recently started with Python, and am enjoying the ""batteries included"" design. I'e already found out I can import time, math, re, urllib, but don't know how to know that something is builtin rather than writing it from scratch.</p>

<p>What's included, and where can I get other good quality libraries from?</p>
"
329706,20860,2008-12-01T00:53:21Z,5,Python CMS for my own website?,"<p>I'm an accomplished web and database developer, and I'm interested in redesigning my own website.  </p>

<p>I have the following content goals:</p>

<ul>
<li>Support a book I'm writing</li>
<li>Move my blog to my own site (from blogger.com)</li>
<li>Publish my articles (more persistent content than a blog)</li>
<li>Host a forum with light use</li>
<li>Embed slide sharing and screencasts</li>
</ul>

<p>I have the following technology goals for implementing my site:</p>

<ul>
<li>Learn more Python and Django</li>
<li>Leverage a CMS solution such as Pinax or Django-CMS</li>
<li>Utilize a CSS framework, such as Blueprint or YUI</li>
<li>I develop on a Mac OS X platform</li>
<li>I'm comfortable developing in a CLI, but I'd like to practice Eclipse or NetBeans</li>
<li>I'd like to employ testing during development</li>
<li>Please, no Microsoft languages or tools</li>
</ul>

<p>Any suggestions for technology choices that support these goals?</p>

<p><strong>Edit:</strong>  Apologies if the question above was too unclear or general.  What I'm asking for is if folks have had experience doing a similar modest website, what would be recommendations for tools, frameworks, or techniques outside of those I listed?</p>

<ul>
<li>Is there another Python CMS that I should consider besides the two I listed?  E.g. there may be a great Python solution, but it isn't built on top of Django.</li>
<li>Perhaps all current Python CMS packages are too ""alpha,"" and I'd be better off writing my own from scratch?  Although I am up to it, I'd rather leverage an existing package.</li>
<li>Given this kind of project, would you deploy a CMS with built-in (or plug-in) support for blogs, forums, etc. or would you rather design a simpler website and embed the more complex content management using other services, relying on your own website only as a dumb proxy or portal.  E.g. one can re-publish Blogger.com content using the Google Gdata API.  One can embed re-branded Nabble.com archives into any website, which may provide forum/mailinglist functionality more easily than running the forum itself.</li>
<li>Sometimes a CMS package has its own CSS integrated, and using another CSS framework would be redundant or otherwise make no sense.  Yes?  No?</li>
<li>Are there plugins for Django in Eclipse or Netbeans?  I understand there's a pretty nice environment for Rails development in NetBeans, and I've read some people wish longingly for something similar for Django, but I don't know if these wishes have since been realized.</li>
<li>What are some current preferred tools for unit and functional testing a Django application?  Are these integrated with Eclipse or Netbeans?</li>
</ul>
"
329886,18770,2008-12-01T02:44:03Z,6,"In Python, is there a concise way to use a list comprehension with multiple iterators?","<p>Basically, I would like to build a list comprehension over the ""cartesian product"" of two iterators. Think about the following <a href=""http://www.haskell.org/haskellwiki/List_comprehension"" rel=""nofollow"">Haskell code</a>:</p>

<pre><code>[(i,j) | i &lt;- [1,2], j &lt;- [1..4]]
</code></pre>

<p>which yields</p>

<pre><code>[(1,1),(1,2),(1,3),(1,4),(2,1),(2,2),(2,3),(2,4)]
</code></pre>

<p>Can I obtain a similar behavior in Python in a concise way?</p>
"
329956,19207,2008-12-01T03:31:45Z,9,Python crypt module -- what's the correct use of salts?,"<p>First, context: I'm trying to create a command-line-based tool (Linux) that
requires login. Accounts on this tool have nothing to do with
system-level accounts -- none of this looks at /etc/passwd.</p>

<p>I am planning to store user accounts in a text file using the same format (roughly) as /etc/passwd.</p>

<p>Despite not using the system-level password files, using crypt seemed
to be a good practice to use, as opposed to storing passwords in
cleartext. (While crypt is certainly better than storing passwords in
cleartext, I'm open to other ways of doing this.)</p>

<p>My crypt knowledge is based on this:
<a href=""https://docs.python.org/2/library/crypt.html"" rel=""nofollow"">https://docs.python.org/2/library/crypt.html</a></p>

<p>The documentation seems to ask for something that isn't possible: ""it
is recommended to use the full crypted password as salt when checking
for a password.""</p>

<p>Huh? If I'm creating the crypted password (as in, when creating a user
record) how can I use the crypted password as a salt? It
doesn't exist yet. (I'm assuming that you must use the same salt for creating and checking a password.)</p>

<p>I've tried using the plaintext password as a salt. This does
work, but has two problems; one easily overcome, and one serious:</p>

<p>1) The first two letters of the plaintext password are included in the
crypted password. You can fix this by not writing the first two
characters to the file:</p>

<pre><code>user_record = '%s:%s:%s' % (user_name, crypted_pw[2:], user_type)
</code></pre>

<p>2) By using the plaintext password as the salt, you would seem to be
reducing the amount of entropy in the system. Possibly I'm
misunderstanding the purpose of the salt.</p>

<p>The best practice I've been able to derive is to use the first two
characters from the username as the salt. Would this be appropriate,
or is there something I've missed that makes that a bad move?</p>

<p>My understanding of a salt is that it prevents pre-computing password
hashes from a dictionary. I could use a standard salt for all
passwords (such as my initials, ""JS,"") but that seems to be less of a
burden for an attacker than using two characters from each user's username.</p>
"
329963,41736,2008-12-01T03:32:46Z,33,Replace textarea with rich text editor in Django Admin?,"<p>I would like to know the best way to replace a standard textarea field with a rich text editor in Django Admin?</p>
"
330334,33612,2008-12-01T09:12:05Z,3,Parsing a string for nested patterns,"<p>What would be the best way to do this.</p>

<p>The input string is </p>

<pre><code>&lt;133_3&gt;&lt;135_3&gt;&lt;116_2&gt;The other system worked for about 1 month&lt;/116_2&gt; got some good images &lt;137_3&gt;on it then it started doing the same thing as the first one&lt;/137_3&gt; so then I quit using either camera now they are just sitting and collecting dust.&lt;/135_3&gt;&lt;/133_3&gt;
</code></pre>

<p>the expected output is </p>

<pre><code>{'The other system worked for about 1 month got some good images on it then it started doing the same thing as the first one so then I quit \
using either camera now they are just sitting and collecting dust.':[133, 135],

'The other system worked for about 1 month': [116],

'on it then it started doing the same thing as the first one':[137]

}
</code></pre>

<p>that seems like a recursive regexp search but I can't figure out how exactly.</p>

<p>I can think of a tedious recursive function as of now, but have a feeling that there should be a better way.</p>

<p>Related question: <a href=""http://stackoverflow.com/questions/133601/can-regular-expressions-be-used-to-match-nested-patterns"">Can regular expressions be used to match nested patterns?</a></p>
"
330367,40076,2008-12-01T09:26:07Z,6,How would one make Python objects persistent in a web-app?,"<p>I'm writing a reasonably complex web application. The Python backend runs an algorithm whose state depends on data stored in several interrelated database tables which does not change often, plus user specific data which does change often. The algorithm's per-user state undergoes many small changes as a user works with the application. This algorithm is used often during each user's work to make certain important decisions.</p>

<p>For performance reasons, re-initializing the state on every request from the (semi-normalized) database data quickly becomes non-feasible. It would be highly preferable, for example, to cache the state's Python object in some way so that it can simply be used and/or updated whenever necessary. However, since this is a web application, there several processes serving requests, so using a global variable is out of the question.</p>

<p>I've tried serializing the relevant object (via pickle) and saving the serialized data to the DB, and am now experimenting with caching the serialized data via memcached. However, this still has the significant overhead of serializing and deserializing the object often.</p>

<p>I've looked at shared memory solutions but the only relevant thing I've found is <a href=""http://poshmodule.sourceforge.net/"" rel=""nofollow"">POSH</a>. However POSH doesn't seem to be widely used and I don't feel easy integrating such an experimental component into my application.</p>

<p>I need some advice! This is my first shot at developing a web application, so I'm hoping this is a common enough issue that there are well-known solutions to such problems. At this point solutions which assume the Python back-end is running on a single server would be sufficient, but extra points for solutions which scale to multiple servers as well :)</p>

<p>Notes:</p>

<ul>
<li>I have this application working, currently live and with active users. I started out without doing any premature optimization, and then optimized as needed. I've done the measuring and testing to make sure the above mentioned issue is the actual bottleneck. I'm sure pretty sure I could squeeze more performance out of the current setup, but I wanted to ask if there's a better way.</li>
<li>The setup itself is still a work in progress; assume that the system's architecture can be whatever suites your solution.</li>
</ul>
"
330383,21537,2008-12-01T09:40:18Z,2,jython date conversion,"<p>Given a string as below, I need to convert:</p>

<p>1 Dec 2008 06:43:00 +0100</p>

<p>to</p>

<p>MM/DD/YYYY HH:MM:SSAM</p>

<p>using jython what is the best way to do this?</p>
"
330573,9789,2008-12-01T11:29:47Z,1,CherryPy for a webhosting control panel application,"<p>For quite a long time I've wanted to start a pet project that will aim in
time to become a web hosting control panel, but mainly focused on Python hosting --
meaning I would like to make a way for users to generate/start Django/
other frameworks projects right from the panel. I seemed to have
found the perfect tool to build my app with it: CherryPy. </p>

<p>This would allow me to do it the way I want, building the app with its own HTTP/
HTTPS server and also all in my favorite programming language.</p>

<p>But now a new question arises: As CherryPy is a threaded server, will
it be the right for this kind of task?</p>

<p>There will be lots of time consuming tasks so if one of the
tasks blocks, the rest of the users trying to access other pages will
be left waiting and eventually get timed out.</p>

<p>I imagine that this kind of problem wouldn't happen on a fork based server.</p>

<p>What would you advise? </p>
"
330900,42127,2008-12-01T13:51:42Z,14,How to quickly parse a list of strings,"<p>If I want to split a list of words separated by a delimiter character, I can use</p>

<pre><code>&gt;&gt;&gt; 'abc,foo,bar'.split(',')
['abc', 'foo', 'bar']
</code></pre>

<p>But how to easily and quickly do the same thing if I also want to handle quoted-strings which can contain the delimiter character ?</p>

<pre><code>In: 'abc,""a string, with a comma"",""another, one""'
Out: ['abc', 'a string, with a comma', 'another, one']
</code></pre>

<p>Related question: <a href=""http://stackoverflow.com/questions/118096/how-can-i-parse-a-comma-delimited-string-into-a-list-caveat"">How can i parse a comma delimited string into a list (caveat)?</a></p>
"
331377,9789,2008-12-01T16:40:10Z,4,How to pack python libs I'm using so I can distribute them with my app and have as few dependencies as possible,"<p>How to pack python libs I'm using so I can distribute them with my app and have as few dependencies as possible and also not to conflict with different lib/version that is already on my system.</p>

<p>L.E.: Sorry i forgot to specify. I will be doing this on linux. And I'm not referring in making my app a installable file like deb/rpm, etc but how to organize my files so like for example I'll be using cherrypy and sqlalchemy I'll ship those with my app and not put the user through the pain of installing all the dependencies by himself.</p>
"
331767,20654,2008-12-01T18:40:32Z,3,Python style,"<p>Simple beginner question:</p>

<p>I've created a small python script to toggle between two files I'm using for testing.</p>

<p>My question is, what is a good python format style for the following code:</p>

<pre><code>import filecmp
import shutil

local = ""local.txt""
remote = ""remote.txt""
config_file = ""C:\some\path\file.txt""

shutil.copyfile( remote if( filecmp.cmp(local, config_file ) ) else local, config_file  )
</code></pre>

<p>Or</p>

<pre><code>shutil.copyfile( remote 
                     if( filecmp.cmp(local, config_file ) ) 
                     else local,
                 config_file  )
</code></pre>

<p>Or</p>

<pre><code>tocopy = remote if( filecmp.cmp( local, config_file ) ) else local 
shutil.copyfile( tocopy, config_file )
</code></pre>

<p>Or what?</p>

<p>Also, what is the preffered way to name var in python for many-word names, is it ""to_copy"", ""tocopy"", ""toCopy"", ""ToCopy""</p>

<p>Thanks.</p>
"
331855,280,2008-12-01T19:10:57Z,4,How to determine if a page is being redirected,"<p>I need to check whether a page is being redirected or not without actually downloading the content. I just need the final URL. What's the best way of doing this is Python?
Thanks!</p>
"
331918,21885,2008-12-01T19:31:07Z,32,Converting a PDF to a series of images with Python,"<p>I'm attempting to use Python to convert a multi-page PDF into a series of JPEGs. I can split the PDF up into individual pages easily enough with available tools, but I haven't been able to find anything that can covert PDFs to images.</p>

<p>PIL does not work, as it can't read PDFs. The two options I've found are using either GhostScript or ImageMagick through the shell. This is not a viable option for me, since this program needs to be cross-platform, and I can't be sure either of those programs will be available on the machines it will be installed and used on.</p>

<p>Are there any Python libraries out there that can do this?</p>
"
332255,NA,2008-12-01T21:17:40Z,28,Difference between class foo and class foo(object) in Python,"<p>I know <code>class foo(object)</code> is an old school way of defining a class. But I would like to understand in more detail the difference between these two.</p>
"
332289,40849,2008-12-01T21:24:44Z,518,How do you change the size of figures drawn with matplotlib?,"<p>How do you change the size of figure drawn with matplotlib?</p>
"
333097,42050,2008-12-02T05:03:37Z,4,Integer (representing a sequence of bits) reinterpretation as Character Array in Python,"<p>I've written some C code that I would like to port to python, as I feel python is a better 'concept' language.</p>

<p>In my C code, I use memory reinterpretation to achieve my goals, for example:</p>

<pre><code>sizeof(int)  is 4 byte
sizeof(char) is 1 byte

char c[4]={0x01,0x30,0x00,0x80};
int* i=(int*)c;

*i has the value 0x80003001
</code></pre>

<p>similarly if i have:</p>

<pre><code>int* j = (int*)malloc(sizeof(int));
char* c = (char*)j;
*j = 0x78FF00AA;

c is now {0xAA, 0x00, 0xFF, 0x78}
</code></pre>

<p>I would like to do a similar thing in python, I realise that I can use bit operations to accomplish this:</p>

<pre><code>chararray=[]
num=1234567890
size=8

while len(chararray) &lt; size:
   char = chr( (num &amp; 255 ) )
   num = num &gt;&gt; 8
   chararray.append(char)
</code></pre>

<p>However I was hoping there would be a faster way of accomplishing this.</p>

<p>Does python have anything similar to C's union?</p>
"
333487,9106,2008-12-02T09:47:08Z,1,getting redirect loop for admin_only decorator,"<p>I've made this decorator, which results in an infinite redirect loop.</p>

<p>The problem is this: </p>

<pre><code>args[0].redirect(users.create_login_url(args[0].request.path))
</code></pre>

<p>It appears to be a perfectly valid URL. So why wouldn't it properly redirect?</p>

<pre><code>def admin_only(handler, *args):

    def redirect_to_login(*args, **kwargs):
        return args[0].redirect(users.create_login_url(args[0].request.path))

    user = users.get_current_user()
    if user:
        if authorized(user):
            return handler(args[0])
        else:
            logging.warning('An unauthorized user has attempted to enter an authorized page')
            return redirect_to_login
    else:
        return redirect_to_login
</code></pre>
"
333706,41795,2008-12-02T11:41:05Z,9,string.split(text) or text.split() what's the difference?,"<p>There is one thing that I do not understand... </p>

<p>Imagine you have a <strong>text</strong> = ""hello world""  and you want to split it.</p>

<p>In some places I see people that want to split the <strong>text</strong> doing:</p>

<pre><code>string.split(text)
</code></pre>

<p>In other places I see people just doing:</p>

<pre><code>text.split()
</code></pre>

<p>What’s the difference? Why you do in one way or in the other way? Can you give me a theorist explanation about that?</p>
"
333995,11618,2008-12-02T13:58:30Z,12,How to detect that Python code is being executed through the debugger?,"<p>Is there a simple way to detect, within Python code, that this code is being executed through the Python debugger?</p>

<p>I have a small Python application that uses Java code (thanks to JPype). When I'm debugging the Python part, I'd like the embedded JVM to be given debug options too.</p>
"
334655,1575281,2008-12-02T16:49:11Z,165,Passing a dictionary to a function in python as keyword parameters,"<p>I'd like to call a function in python using a dictionary.</p>

<p>Here is some code:</p>

<pre><code>d = dict(param='test')

def f(param):
    print param

f(d)
</code></pre>

<p>This prints <code>{'param': 'test'}</code> but I'd like it to just print <code>test</code>.</p>

<p>I'd like it to work similarly for more parameters:</p>

<pre><code>d = dict(p1=1, p2=2)
def f2(p1,p2):
    print p1, p2
f2(d)
</code></pre>

<p>Is this possible?</p>
"
334765,370899,2008-12-02T17:30:18Z,9,Does PyS60 produce sis files that are native?,"<p>I am currently looking at developing a mobile apps for the S60 platform and is specifically looking at PyS60. It seems to suggest that the it can be compiled into native .sis files without the need for an embedded python interpreter. Reading through the documentations I could not find any statements where this is explicitly mentioned. While I am right now downloading the SDKs, Emulators, and the whole bunch of tool chains needed to test the development out on Linux, I thought I would ask here a bit while I am doing that. </p>
"
334827,42546,2008-12-02T17:47:49Z,3,How to generate a filmstrip image in python from a folder of images?,"<p>I would like to do the equivalent off <a href=""http://www.bigdumbdev.com/2007/08/build-better-skimmer-part-2.html"" rel=""nofollow"">this</a> (ruby code) in python for a Django project I am working on. I want to make a <a href=""http://designvigilante.com/files/photoSkim/filmStrip.jpg"" rel=""nofollow"">filmstrip image</a> of X number of images in a folder. </p>
"
334992,1320510,2008-12-02T18:41:44Z,3,How do I create trivial customized field types in Django models?,"<p>I'm trying to make some types in Django that map to standard Django types.  The <a href=""http://docs.djangoproject.com/en/dev/howto/custom-model-fields/#howto-custom-model-fields"" rel=""nofollow"">custom model field documentation</a> goes into complicated cases; I just want to store a basic Django type from a class with a bunch of handy methods.</p>

<p>For example, if I were storing playing cards, I want something like:</p>

<pre><code>class Card(object):
    """""" A playing card.  """"""
    def as_number(self):
        """""" returns a number from 1 (Ace of Clubs) and 52 (King of Spades).""""""
        return self.number + self.suit_rank() * 13
    def __unicode(self): ...
    def is_highest(self, other_cards, trump=None):...
    def __init__(self, number, suit):  ...
     ...
</code></pre>

<p>I want my models to have something like:</p>

<pre><code>class my_game(models.Model):
    ante = models.IntegerField()
    bonus_card = Card()   # Really stored as an models.IntegerField()
    ....
</code></pre>

<p>I'm expecting the answer will look like inheriting from the correct type, adding some specially named get/store fields for card, and renaming <strong>init</strong>().  Does anyone have sample code or better documentation?</p>
"
335078,9789,2008-12-02T19:09:50Z,6,What's the best way to get the size of a folder and all the files inside from python?,"<p>If there will be a small number of files it should be easy with a recursive function to pass through all the files and add the size but what if there are lots of files, and by lots i really mean lots of files.</p>
"
335399,7883,2008-12-02T20:48:08Z,4,detecting if a module is imported inside the app engine environment,"<p>What I want to do is patch an existing python module that uses urllib2 to run on app engine, but I don't want to break it so it can be used elsewhere. So I'm looking for a quick solution to test if the module is imported in the app engine environment or not. Catching ImportError on urllib2 might not be the best solution.</p>
"
335582,13055,2008-12-02T21:46:16Z,3,Python: smtpd (or alternative) for production mail receiving?,"<p>I'm looking to do various processing of email - eg. inspect the headers, and if they meet some criteria (look like spam), drop the connection, or inspect the recipient list and perform special filtering.</p>

<p>Looks like Python's smtpd library provides a nice and simple interface for processing the received email. </p>

<p>To deal with the message before it's fully processed (eg. to drop the message in case the headers look like spam), should I be using handle_connect? Are the internal APIs (other than process_message) documented somewhere? Example code anywhere?</p>

<p>Also, has anyone used smtpd in production? Any thoughts on reliability, etc?</p>

<p>Regarding Twisted: I've attempted to embrace Twisted several times and quite like the deferred model, but it's a bit too complex for my current taste. I'll give it another look, but for now I'm more interested in non-Twisted implementations.</p>
"
335695,42636,2008-12-02T22:29:05Z,77,Lists in ConfigParser,"<p>The typical ConfigParser generated file looks like:</p>

<pre><code>[Section]
bar=foo
[Section 2]
bar2= baz
</code></pre>

<p>Now, is there a way to index lists like, for instance:</p>

<pre><code>[Section 3]
barList={
    item1,
    item2
}
</code></pre>

<p>Related question: <a href=""http://stackoverflow.com/questions/287757/pythons-configparser-unique-keys-per-section"">Python’s ConfigParser unique keys per section</a></p>

<p>? Thanks in advance</p>
"
335891,27065,2008-12-03T00:19:58Z,4,Shell Script doesn't run automatically though it is registered in Mac OS X Login Items,"<p>I have the following shell script registered in my ""Login Items"" preferences but it does not seem to have any effect. It is meant to launch the moinmoin wiki but only works when it is run by hand from a terminal window, after which it runs until the machine is next shut down.</p>

<pre><code>#!/bin/bash
cd /Users/stuartcw/Documents/Wiki/moin-1.7.2
/usr/bin/python wikiserver.py &gt;&gt; logs/`date +""%d%b%Y""`.log 2&gt;&amp;1 &amp;
</code></pre>

<p>I would really like the Wiki to be available after restarting so any help in understanding this would be appreciated.</p>
"
335896,42546,2008-12-03T00:22:27Z,3,How to complete this python function to save in the same folder?,"<p>I am trying to write my first real python function that does something real. What i want to accomplish is searching a given folder, and then open all images and merging them together so they make a filmstrip image. Imagine 5 images stacked on top of eachother in one image.</p>

<p>I have this code now, which should be pretty much ok, but propably needs some modification:</p>

<pre><code>import os
import Image

def filmstripOfImages():

    imgpath = '/path/here/'
    files = glob.glob(imgpath + '*.jpg')

    imgwidth = files[0].size[0]
    imgheight = files[0].size[1]
    totalheight = imgheight * len(files)

    filename = 'filmstrip.jpg'
    filmstrip_url = imgpath + filename

    # Create the new image. The background doesn't have to be white
    white = (255,255,255)
    filmtripimage = Image.new('RGB',(imgwidth, totalheight),white)  
    row = 0
    for file in files:
        img = Image.open(file)

        left = 0
        right = left + imgwidth
        upper = row*imgheight
        lower = upper + imgheight
        box = (left,upper,right,lower)
        row += 1

        filmstripimage.paste(img, box)
    try:
        filmstripimage.save(filename, 'jpg', quality=90, optimize=1)
    except:
        filmstripimage.save(miniature_filename, 'jpg', quality=90)"")
</code></pre>

<p>How do i modify this so that it saves the new filmstrip.jpg in the same directory as I loaded the images from? And it probably has some things that are missing or wrong, anybody got a clue?</p>

<p>Related question: <a href=""http://stackoverflow.com/questions/334827/how-to-generate-a-filmstrip-image-in-python-from-a-folder-of-images"">How to generate a filmstrip image in python from a folder of images?</a></p>
"
336013,24208,2008-12-03T01:39:50Z,7,How to handle a glade project with many windows,"<p>I'm working on a PyGTK/glade application that currently has 16 windows/dialogs and is about 130KB, and will eventually have around 25 windows/dialogs and be around 200KB.  Currently, I'm storing all the windows in one monolithic glade file.  When I run a window I call it like...</p>

<pre><code>self.wTree = gtk.glade.XML(""interface.glade"", ""WindowXYZ"")
</code></pre>

<p>I wonder if it would be a better idea to split each window into it's own glade file.  Instead of one glade file with 25 windows/dialogs I'd have 25 glade files with one window/dialog each and call it like so:</p>

<pre><code>self.wTree = gtk.glade.XML(""windowxyz.glade"")
</code></pre>

<p>What do you guys think is the best way to do this?  Is one method more resource intensive than another?  One thing that would be nice about going to individual glade files is that naming widgets would be easier.  For example, I name all my OK buttons ""windowxyz_ok"", but I could change it to simply ""ok"" instead.  Makes things simpler.  The downside is that it may be a bit less convenient to make changes to different windows.</p>

<p>I'm open to any and all arguments.  Thanks!</p>
"
336181,2128,2008-12-03T04:01:12Z,13,Python: Invalid Token,"<p>Some of you may recognize this as Project Euler's problem number 11. The one with the grid.</p>

<p>I'm trying to replicate the grid in a large multidimensional array, But it's giving me a syntax error and i'm not sure why</p>

<pre><code>grid = [ 
[ 08, 02, 22, 97, 38, 15, 00, 40, 00, 75, 04, 05, 07, 78, 52, 12, 50, 77, 91, 08 ],
[ 49, 49, 99, 40, 17, 81, 18, 57, 60, 87, 17, 40, 98, 43, 69, 48, 04, 56, 62, 00 ],
[ 81, 49, 31, 73, 55, 79, 14, 29, 93, 71, 40, 67, 53, 88, 30, 03, 49, 13, 36, 65 ],
...
</code></pre>

<p>And I get this error:</p>

<pre>
  File ""D:\development\Python\ProjectEuler\p11.py"", line 3
    [ 08, 02, 22, 97, 38, 15, 00, 40, 00, 75, 04, 05, 07, 78, 52, 12, 50, 77, 91 , 08 ],
       ^ SyntaxError: invalid token
</pre>

<p>Why is it throwing an error before the comma?</p>
"
336517,21537,2008-12-03T08:41:45Z,3,How do I handle Microsoft outlook winmail.dat? Any other surprises?,"<p>Ive decided that I really dont like microsoft and their ways. Please could you give me directions on how to handle winmail.dat in emails, is there a jython library or a java library that will allow me to handle this.</p>

<p>Ive just completed a email processing program, written in jython 2.2.1 on java 5. During the final load test, I realised that attachments that should have been in a standard MIME email format is now tied up in some blasted winmail.dat, which means many different outlook clients pollute the internet with this winmail.dat, so that means i need to support winmail.dat. Thus my program failed to process the data correctly.</p>

<p>Please could you give a short description on what winmail.dat is and why it is here to annoy us.</p>

<p>What other surprises can be expected!? what else do I have to watch out for, so far standard MIME emails are catered for. Are there any other jack in the boxes? </p>

<p>Thanks so much for your time.</p>
"
336753,10583,2008-12-03T10:29:08Z,3,Django FormWizard and Admin application,"<p>I have a series of forms that I need a user to complete in sequence, which is perfect for the formwizard app. However, I've some need of the admin application also and would like to set the whole thing up to trigger several forms within the admin app. </p>

<p>Is it possible/easy to integrate a 'formwizard' into the admin application?</p>

<p>If not, is extending the admin template a viable option and hooking the rest up manually? Opinions? </p>

<p>Update:
Some clarity in my 'problem'.</p>

<p>I wanted to use the admin app as I was thinking I only needed basic modelforms - one perhaps split across many forms, which would have been the role of formwizard.</p>

<p>What I have:</p>

<p>Form 1: 10 yes/no questions (each yes corresponds to a new form that needs to be filled out)<br />
if yes is ticked, the corresponding forms are put into a formwizard and displayed for the user to complete. </p>

<p><hr /></p>

<p>However the suggested option (modelforms + styling) would take care of the majority of my concerns I guess - and is the seemingly simpler solution.</p>
"
336866,11992,2008-12-03T11:37:28Z,35,How to implement a minimal server for AJAX in Python?,"<p>I want to create a very simple HTML/AJAX based GUI for a Python program. So the frontend is a HTML page which communicates with the program via AJAX. Can you give me a minimal implementation for the server-side using the python <code>SimpleHTTPServer.SimpleHTTPRequestHandler</code>?</p>

<p>A simple example would be a textfield and a button. When the button is pressed the content of the field is send to the server which then sends back a corresponding answer. I am aware that there are many powerful solutions for this in Python, but I would like to keep this very simple.
I already found some nice examples for such a server (e.g. <a href=""http://msdl.cs.mcgill.ca/people/julien/04Ajax"">here</a>), but so far I could not come up with a truly minimal one.</p>

<p>In case you wonder why I want to implement the GUI in such a way: My focus for this application is to display lots of data in a nice layout with only minimal interaction - so using HTML+CSS seems most convenient (and I have been already using it for non-interactive data display).</p>
"
336963,NA,2008-12-03T12:36:12Z,21,Python optparse metavar,"<p>I am not sure what <code>optparse</code>'s <code>metavar</code> parameter is used for. I see it is used all around, but I can't see its use.</p>

<p>Can someone make it clear to me? Thanks.</p>
"
337223,36537,2008-12-03T14:11:57Z,3,Python: item for item until stopterm in item?,"<p>Disclaimer: I'm fairly new to python!</p>

<p>If I want all the lines of a file until (edit: and including) the line containing some string <code>stopterm</code>, is there a way of using the list syntax for it? I was hoping there would be something like:</p>

<pre><code>usefullines = [line for line in file until stopterm in line]
</code></pre>

<p>For now, I've got</p>

<pre><code>usefullines = []
for line in file:
    usefullines.append(line)
    if stopterm in line:
        break
</code></pre>

<p>It's not the end of the world, but since there rest of Python syntax is so straightforward, I was hoping for a 1 thought->1 Python line mapping.</p>
"
337479,7581,2008-12-03T15:23:49Z,41,How to get a row-by-row MySQL ResultSet in python,"<p>MySQL ResultSets are by default retrieved completely from the server before any work can be done. In cases of huge result sets this becomes unusable. I would like instead to actually retrieve the rows one by one from the server.</p>

<p>In Java, following the instructions <a href=""http://dev.mysql.com/doc/refman/5.1/en/connector-j-reference-implementation-notes.html"">here</a> (under ""ResultSet""), I create a statement like this:</p>

<pre><code>stmt = conn.createStatement(java.sql.ResultSet.TYPE_FORWARD_ONLY,
              java.sql.ResultSet.CONCUR_READ_ONLY);
stmt.setFetchSize(Integer.MIN_VALUE);
</code></pre>

<p>This works nicely in Java. My question is: is there a way to do the same in python?</p>

<p>One thing I tried is to limit the query to a 1000 rows at a time, like this:</p>

<pre><code>start_row = 0
while True:
    cursor = conn.cursor()
    cursor.execute(""SELECT item FROM items LIMIT %d,1000"" % start_row)
    rows = cursor.fetchall()
    if not rows:
        break
    start_row += 1000
    # Do something with rows...
</code></pre>

<p>However, this seems to get slower the higher start_row is.</p>

<p>And no, using <code>fetchone()</code> instead of <code>fetchall()</code> doesn't change anything.</p>

<h2>Clarification:</h2>

<p>The naive code I use to reproduce this problem looks like this:</p>

<pre><code>import MySQLdb

conn = MySQLdb.connect(user=""user"", passwd=""password"", db=""mydb"")
cur = conn.cursor()
print ""Executing query""
cur.execute(""SELECT * FROM bigtable"");

print ""Starting loop""
row = cur.fetchone()
while row is not None:
    print "", "".join([str(c) for c in row])
    row = cur.fetchone()

cur.close()
conn.close()
</code></pre>

<p>On a ~700,000 rows table, this code runs quickly. But on a ~9,000,000 rows table it prints ""Executing Query"" and then hangs for a long long time. That is why it makes no difference if I use <code>fetchone()</code> or <code>fetchall()</code>.</p>
"
337688,42876,2008-12-03T16:12:22Z,25,Dynamic Keyword Arguments in Python?,"<p>Does python have the ability to create dynamic keywords?</p>

<p>For example:</p>

<pre><code>qset.filter(min_price__usd__range=(min_price, max_price))
</code></pre>

<p>I want to be able to change the <strong>usd</strong> part based on a selected currency.</p>
"
337863,NA,2008-12-03T16:53:17Z,21,"Python, Popen and select - waiting for a process to terminate or a timeout","<p>I run a subprocess using:</p>

<pre><code>  p = subprocess.Popen(""subprocess"", 
                       stdout=subprocess.PIPE, 
                       stderr=subprocess.PIPE, 
                       stdin=subprocess.PIPE)
</code></pre>

<p>This subprocess could either exit immediately with an error on stderr, or keep running. I want to detect either of these conditions - the latter by waiting for several seconds.</p>

<p>I tried this:</p>

<pre><code>  SECONDS_TO_WAIT = 10
  select.select([], 
                [p.stdout, p.stderr], 
                [p.stdout, p.stderr],
                SECONDS_TO_WAIT)
</code></pre>

<p>but it just returns:</p>

<pre><code>  ([],[],[])
</code></pre>

<p>on either condition. What can I do?</p>
"
337870,11677,2008-12-03T16:54:17Z,5,Python subprocess.call() fails when using pythonw.exe,"<p>I have some Python code that works correctly when I use python.exe to run it, but fails if I use pythonw.exe.</p>

<pre>
    def runStuff(commandLine):
        outputFileName = 'somefile.txt'
        outputFile = open(outputFileName, ""w"")

        try:
            result = subprocess.call(commandLine, shell=True, stdout=outputFile)
        except:
            print 'Exception thrown:', str(sys.exc_info()[1])

    myThread = threading.Thread(None, target=runStuff, commandLine=['whatever...'])
    myThread.start()
</pre>

<p>The message I get is:</p>

<pre>
    Exception thrown: [Error 6] The handle is invalid
</pre>

<p>However, if I don't specify the 'stdout' parameter, subprocess.call() starts okay.</p>

<p>I can see that pythonw.exe might be redirecting output itself, but I can't see why I'm blocked from specifying stdout for a new thread.</p>
"
338008,40062,2008-12-03T17:31:46Z,6,Windows build for PyLucene+JCC on python 2.6,"<p>Where can I download a PyLucene+JCC Windows build compiled for python 2.6?</p>

<p>Jose</p>
"
338103,1512,2008-12-03T17:56:57Z,11,How do I use IPython as my Emacs Python interpreter?,"<p>I'm running Emacs 22.1.1 and IPython 0.9.1 on OS X and I'd like to be able to run lines/methods/snippets of Python code from my current buffer on demand inside an IPython interpreter.</p>

<p>What do I need to do to get this working?</p>
"
338217,1694,2008-12-03T18:27:25Z,7,Setting the width of a wxPython TextCtrl in number of characters,"<p>I have a <code>TextCtrl</code> in my wxPython program and I'd like to set its width to exactly 3 characters.  However, the only way to set its size manually accepts only numbers of pixels.  Is there any way to specify characters instead of pixels?</p>
"
338450,34395,2008-12-03T19:37:51Z,5,TimedRotatingFileHandler Changing File Name?,"<p>I am trying to implement the python logging handler called TimedRotatingFileHandler. </p>

<p>When it rolls over to midnight it appends the current day in the form: ""YYYY-MM-DD"".</p>

<pre><code>LOGGING_MSG_FORMAT  = '%(name)-14s &gt; [%(levelname)s] [%(asctime)s] : %(message)s'
LOGGING_DATE_FORMAT	= '%Y-%m-%d %H:%M:%S'

logging.basicConfig(
			level=logging.DEBUG,
			format=LOGGING_MSG_FORMAT,
			datefmt=LOGGING_DATE_FORMAT
			)
root_logger = logging.getLogger('')
logger = logging.handlers.TimedRotatingFileHandler(""C:\\logs\\Rotate_Test"",'midnight',1)
root_logger.addHandler(logger)
while True:
	daemon_logger = logging.getLogger('TEST')
	daemon_logger.info(""SDFKLDSKLFFJKLSDD"")
	time.sleep(60)
</code></pre>

<p>The first log file created is called just ""Rotate_Test"" then once it rolls over to the next day it changes the file name to: ""Rotate_Test.YYYY-MM-DD"" Where YYYY-MM-DD is the current day.</p>

<p>How can i change how it alters the filename? I googled and looked at the API and found pretty much nothing.</p>
"
338768,39160,2008-12-03T21:26:28Z,186,python ImportError No module named,"<p>I am very new at Python and I am getting this error:</p>

<pre><code>Traceback (most recent call last):
  File ""mountain.py"", line 28, in ?
    from toolkit.interface import interface
ImportError: No module named toolkit.interface
</code></pre>

<p>Python is installed in a local directory:</p>

<p>My directory tree is like this:</p>

<pre><code>(local directory)/site-packages/toolkit/interface.py
</code></pre>

<p>My code is in here </p>

<pre><code>(local directory)/site-packages/toolkit/examples/mountain.py
</code></pre>

<p>To run the example I do <code>python mountain.py</code>, and in the code I have:</p>

<pre><code>from toolkit.interface import interface
</code></pre>

<p>And i get the error that I wrote, I have already checked <code>sys.path</code> and there I have the directory <code>/site-packages</code>, also I have the file <code>__init__.py.bin</code> in the toolkit folder to indicate to Python that this is a package. I also have a <code>__init__.py.bin</code> in the examples directory.</p>

<p>I do not know why Python cannot find the file when it is in <code>sys.path</code>, any ideas? Can be a permissions problem? Do I need execution permission?</p>
"
339007,NA,2008-12-03T22:39:51Z,647,Nicest way to pad zeroes to string,"<p>What is the nicest/shortest way to pad a string with zeroes to the left, so the string length has a specific length?</p>
"
339053,27020,2008-12-03T23:00:54Z,15,How do you unzip very large files in python?,"<p>Using python 2.4 and the built-in <code>ZipFile</code> library, I cannot read very large zip files (greater than 1 or 2 GB) because it wants to store the entire contents of the uncompressed file in memory.  Is there another way to do this (either with a third-party library or some other hack), or must I ""shell out"" and unzip it that way (which isn't as cross-platform, obviously).</p>
"
339217,28835,2008-12-04T00:17:14Z,5,Writing a compiler for a DSL in python,"<p>I am writing a game in python and have decided to create a DSL for the map data files. I know I could write my own parser with regex, but I am wondering if there are existing python tools which can do this more easily, like re2c which is used in the PHP engine.</p>

<p>Some extra info:</p>

<ul>
<li>Yes, I <em>do</em> need a DSL, and even if I didn't I still want the experience of building and using one in a project.</li>
<li><p>The DSL contains only data (declarative?), it doesn't get ""executed"". Most lines look like:</p>

<p><code>SOMETHING: !abc @123 #xyz/123</code></p>

<p>I just need to read the tree of data.</p></li>
</ul>
"
339387,3912,2008-12-04T01:51:26Z,5,Problems raising a ValidationError on a Django Form,"<p>I'm trying to validate that a submitted URL doesn't already exist in the database.</p>

<p>The relevant parts of the Form class look like this:</p>

<pre><code>from django.contrib.sites.models import Site
class SignUpForm(forms.Form):
    # ... Other fields ...
    url = forms.URLField(label='URL for new site, eg: example.com')

    def clean_url(self):
        url = self.cleaned_data['url']
        try:
            a = Site.objects.get(domain=url)

        except Site.DoesNotExist:
            return url

        else:
            raise forms.ValidationError(""That URL is already in the database.  Please submit a unique URL."")

    def clean(self):
        # Other form cleaning stuff.  I don't *think* this is causing the grief
</code></pre>

<p>The problem is, regardless of what value I submit, I can't raise the <code>ValidationError</code>.  And if I do something like this in the <code>clean_url()</code> method:</p>

<pre><code>if Site.objects.get(domain=url):
    raise forms.ValidationError(""That URL is already in the database.  Please submit a unique URL."")
</code></pre>

<p>then I get a <code>DoesNotExist</code> error, even for URLs that already exist in the Database.  Any ideas?</p>
"
339537,6225,2008-12-04T03:39:07Z,26,"End-line characters from lines read from text file, using Python","<p>When reading lines from a text file using python, the end-line character often needs to be truncated before processing the text, as in the following example:</p>

<pre><code>    f = open(""myFile.txt"", ""r"")
    for line in f:
        line = line[:-1]
        # do something with line
</code></pre>

<p>Is there an elegant way or idiom for retrieving text lines without the end-line character?</p>
"
339856,2220518,2008-12-04T08:10:18Z,3,How do I strptime from a pattern like this?,"<p>I need to use a datetime.strptime on the text which looks like follows.</p>

<p>""Some Random text of undetermined length Jan 28, 1986""</p>

<p>how do i do this?</p>
"
340093,43152,2008-12-04T10:06:01Z,1,Proxy objects in IronPython,"<p>I'm trying to make a proxy object in IronPython, which should dynamically present underlying structure. The proxy itself shouldn't have any functions and properties, I'm trying to catch all the calls in the runtime. Catching the function calls is easy, I just need to define <strong>getattr</strong>() function for my object, and check does appropriate function exists in the underlying layer, and return some function-like object.</p>

<p>I have problems with properties - I don't know how to distinguish the calling context, is my property called as a lvalue or rvalue:</p>

<p>o = myproxy.myproperty # *I need to call underlying.myproperty_get()*</p>

<p>or</p>

<p>myproxy.myproperty = o # *I need to call underlying.myproperty_set(o)*</p>

<p>I looked at the list of special functions in Python, but I didn't found anything appropriate.</p>

<p>I also tried to make property in the object on the fly, with combination of exec() and builtin property() function, but I found that IronPython 1.1.2 lacks of entire 'new' module (which is present in IronPython 2.x beta, but I'll rather use IP 1.x, because of .NET 2.0 framework).</p>

<p>Any ideas?</p>
"
340128,43056,2008-12-04T10:21:03Z,13,IronPython For Unit Testing over C#,"<p>We know that Python provides a  lot of productivity over any compiled languages. We have programming in C# &amp; need to write the unit test cases in C# itself. If we see the amount of code we write for unit test is approximately ten times more than the original code. </p>

<p>Is it ideal choice to write unit test cases in IronPython instead of C#? Any body has done like that? I wrote few test cases, they seems to be good. But hairy pointy managers won't accept.</p>
"
340318,16511,2008-12-04T11:48:19Z,6,Is rewriting a PHP app into Python a productive step?,"<p>I have some old apps written in PHP that I'm thinking of converting to Python - both are websites that started as simple static html, then progressed to PHP and now include blogs with admin areas, rss etc. I'm thinking of rewriting them in Python to improve maintainability as well as to take advantage of my increase in experience to write things more robustly.</p>

<p>Is this worth the effort?</p>
"
340341,42820,2008-12-04T11:56:59Z,4,Suppressing Output of Paramiko SSHClient Class,"<p>When I call the connect function of the Paramiko <code>SSHClient</code> class, it outputs some log data about establishing the connection, which I would like to suppress.</p>

<p>Is there a way to do this either through Paramiko itself, or Python in general?</p>
"
341138,43265,2008-12-04T16:06:52Z,4,How can I reboot a Windows XP64 Machine in a Python Script?,"<p>How can I reboot a Windows XP64 Machine in a Python Script?  This machine does not have the ""shutdown"" or ""restart"" executables available.</p>
"
341184,4491,2008-12-04T16:18:57Z,69,Can I install Python 3.x and 2.x on the same computer?,"<p>I'm running Windows and the shell/OS automatically runs Python based on the registry settings when you run a program on the command line. Will this break if I install a 2.x and 3.x version of Python on the same machine?</p>

<p>I want to play with Python 3 while still being able to run 2.x scripts on the same machine.</p>
"
341379,22306,2008-12-04T17:13:32Z,4,Python Decorators run before function it is decorating is called?,"<p>As an example,</p>

<pre><code>def get_booking(f=None):
    print ""Calling get_booking Decorator""
    def wrapper(request, **kwargs):
        booking = _get_booking_from_session(request)
        if booking == None:
            # we don't have a booking in our session.
            return HttpRedirect('/')
        else:
            return f(request=request, booking=booking, **kwargs)
    return wrapper

@get_booking
def do_stuff(request, booking):
    # do stuff here
</code></pre>

<p>The problem I am having is, the @get_booking decorator is being called even before I called the function that I am decorating.</p>

<p>Output on start:</p>

<pre><code>Calling get_booking Decorator
Calling get_booking Decorator
Calling get_booking Decorator
Calling get_booking Decorator
Calling get_booking Decorator
Calling get_booking Decorator
Calling get_booking Decorator
Calling get_booking Decorator
Calling get_booking Decorator
Calling get_booking Decorator
[26/Oct/2008 19:54:04] ""GET /onlinebooking/?id=1,2 HTTP/1.1"" 302 0
[26/Oct/2008 19:54:05] ""GET /onlinebooking/ HTTP/1.1"" 200 2300
[26/Oct/2008 19:54:05] ""GET /site-media/css/style.css HTTP/1.1"" 200 800
[26/Oct/2008 19:54:05] ""GET /site-media/css/jquery-ui-themeroller.css HTTP/1.1"" 200 25492
</code></pre>

<p>I haven't even made a call to a function that is decorated at this point.</p>

<p>I am just getting started with decorators, so maybe I am missing something. Any help?</p>
"
342425,35335,2008-12-04T23:16:44Z,3,Best way of sharing/managing our internal python library between applications,"<p>Our company (xyz) is moving a lot of our Flash code to Python.</p>

<p>In Flash, we have a shared library between our Flash apps - package xyz. We can make changes to the package without fear of breaking other apps when they are deployed because Flash compiles their code and includes the contents of the library. We deploy the final SWF via RPM, and we're done. Updates to App1 and App2 won't ever break App3.</p>

<p>How would you approach this in Python, the shared library dependency. </p>

<p>App1, App2 and App3, could all require xyz-lib.rpm, and all use the same library files, but an updated xyz-lib.rpm would have to be explicitly tested against App1,2,3 <em>every time</em> there was a new library, and this is just onerous.</p>

<p>My current favorite solution - I could make app1.rpm include the library from when it was packaged - effectively some sort of static linking of the library. This, however, feels inelegant. (although the only additional cost is hard drive space == cheap.)</p>

<p>I know that solid management of the shared library is probably the best solution, but I keep trying to factor in that all the developers are human, and will make mistakes. We're going to make mistakes, and I don't want a deployment of app1 to break app2 and app3 - it's just a lot more to test and debug for.</p>
"
342434,33775,2008-12-04T23:24:26Z,39,Python logging in Django,"<p>I'm developing a Django app, and I'm trying to use Python's logging module for error/trace logging.  Ideally I'd like to have different loggers configured for different areas of the site.  So far I've got all of this working, but one thing has me scratching my head.</p>

<p>I have the root logger going to sys.stderr, and I have configured another logger to write to a file.  This is in my settings.py file:</p>

<pre><code>sviewlog = logging.getLogger('MyApp.views.scans')
view_log_handler = logging.FileHandler('C:\\MyApp\\logs\\scan_log.log')
view_log_handler.setLevel(logging.INFO)
view_log_handler.setFormatter(logging.Formatter('%(asctime)s %(name)-12s %(levelname)-8s %(message)s'))
sviewlog.addHandler(view_log_handler)
</code></pre>

<p>Seems pretty simple.  Here's the problem, though: whatever I write to the sviewlog gets written to the log file twice.  The root logger only prints it once.  It's like addHandler() is being called twice.  And when I put my code through a debugger, this is exactly what I see.  The code in settings.py is getting executed twice, so two FileHandlers are created and added to the same logger instance.  But why?  And how do I get around this?</p>

<p>Can anyone tell me what's going on here?  I've tried moving the sviewlog logger/handler instantiation code to the file where it's used (since that actually seems like the appropriate place to me), but I have the same problem there.  Most of the examples I've seen online use only the root logger, and I'd prefer to have multiple loggers.</p>
"
342437,33786,2008-12-04T23:28:10Z,13,Best way to import version-specific python modules,"<p>Which method makes the most sense for importing a module in python that is version specific? My use case is that I'm writing code that will be deployed into a python 2.3 environment and in a few months be upgraded to python 2.5. This:</p>

<pre><code>if sys.version_info[:2] &gt;= (2, 5):
    from string import Template
else:
    from our.compat.string import Template
</code></pre>

<p>or this</p>

<pre><code>try:
    from string import Template
except ImportError:
    from our.compat.string import Template
</code></pre>

<p>I know that either case is equally correct and works correctly but which one is preferable?</p>
"
342556,43233,2008-12-05T00:45:04Z,7,Python 2.6 multiprocessing.Queue compatible with threads?,"<p>I am experimenting with the new multiprocessing module in Python 2.6.  I am creating several processes each with its own multiprocessor.JoinableQueue instance.  Each process spawns one or more worker threads (subclasses of threading.Thread) which share the JoinableQueue instance (passed in through each Thread's <code>__init__</code> method).  It seems to generally work but occasionally and unpredictably fails with the following error:</p>

<pre><code>  File ""C:\Documents and Settings\Brian\Desktop\testscript.py"", line 49, in run
    self.queue.task_done()
  File ""C:\Python26\lib\multiprocessing\queues.py"", line 293, in task_done
    raise ValueError('task_done() called too many times')
ValueError: task_done() called too many times
</code></pre>

<p>My Queue get() and task_done() calls are right after each other so they should be equal.  Anecdotally this seems to occur only when the work done between the get() and the task_done() is VERY quick.  Inserting a small <code>time.sleep(0.01)</code> seems to alleviate the problem.</p>

<p>Any ideas what is going on?  Can I use a multiprocessor Queue with threads instead of the more traditional (Queue.Queue)?</p>

<p>Thanks!</p>

<p>-brian</p>
"
342729,115,2008-12-05T02:20:30Z,17,How should I learn to use the Windows API with Python?,"<p>I have very little experience building software for Windows, and zero experience using the Windows API, but I'm reasonably familiar with Python. So, how should I go about learning to use the Windows API with Python?</p>
"
343204,39851,2008-12-05T08:35:13Z,2,"Problem regarding 3.0's ""hashlib"" module","<p>I've been working on getting a 2.5 module ported to 3.0, mostly for my own education, when I've gotten stuck. The class ""Builder"" has as its init:</p>

<pre><code>def __init__(self, **options):
    self._verifyOptions(options)
    self._options = options
    self._initDigest()
    self._initBuildNames()
    self._methods = []
</code></pre>

<p></p>

<p>But the error occurs at:</p>

<pre><code>def _initDigest(self):
    import os, sys, hashlib
    digester = hashlib.md5()
    digester.update(self._options.get('code'))
    self._digest = digester.hexdigest()
</code></pre>

<p>which has as its traceback:</p>

<pre><code>Traceback (most recent call last):
  File ""&lt;pyshell#5&gt;"", line 5, in &lt;module&gt;
    """""", language=""Cee"")
  File ""C:\Python30\lib\site-packages\PyInline\__init__.py"", line 31, in build
    b = m.Builder(**args)
  File ""C:\Python30\lib\site-packages\PyInline\Cee.py"", line 17, in __init__
    self._initDigest()
  File ""C:\Python30\lib\site-packages\PyInline\Cee.py"", line 27, in _initDigest
    digester.update(self._options.get('code'))
TypeError: object supporting the buffer API required
</code></pre>

<p>I've run it through 2to3, but it isn't picking up on it. As far as I can tell, the update function is expecting the argument to be in the form of bytes/buffer, but I've tried several different methods to convert it and haven't succeeded.</p>

<p>As always, any assistance would be greatly appreciated. :)</p>
"
343210,2653,2008-12-05T08:36:49Z,7,What happened to the python bindings for CGAL?,"<p>I found the <a href=""http://www.cgal.org/"">Computational Geometry Algorithms Library</a> in my search for an algorithm to decompose a concave polygon into the minimum number of convex components.  Links off the site and numerous google results indicate there are python bindings for it, which would be really handy, but all the links are dead!  What happened to it?  Where can I get it now?</p>
"
343505,8206,2008-12-05T11:03:36Z,16,What can Pygame do in terms of graphics that wxPython can't?,"<p>I want to develop a very simple 2D game in Python. Pygame is the most popular library for game development in Python, but I'm already quite familiar with wxPython and feel comfortable using it. I've even written a <a href=""http://eli.thegreenplace.net/2008/05/31/a-tetris-clone-in-python-wxpython/"">Tetris clone</a> in it, and it was pretty smooth.</p>

<p>I wonder, what does Pygame offer in terms of graphics (leaving sound aside, for a moment) that wxPython can't do ? Is it somehow simpler/faster to do graphics in Pygame than in wxPython ? Is it even more cross-platform ?</p>

<p>It looks like I'm missing something here, but I don't know what.</p>
"
343517,37984,2008-12-05T11:06:01Z,2,How do I work with multiple git branches of a python module?,"<p>I want to use git to allow me to work on several features in a module I'm writing concurrently. I'm currently using SVN, with only one workspace, so I just have the workspace on my PYTHONPATH. I'm realizing this is less than ideal, so I was wondering if anyone could suggest a more 'proper' way of doing this.</p>

<p>Let me elaborate with a hypothetical situation:
I say I have a module 'eggs', with sub-modules 'foo' and 'bar'. Components in 'bar' use code in foo, so eggs/bar/a.py may 'import eggs.foo'. </p>

<p>Say that 'eggs' is in a git repository. I want to try out some changes to 'foo', so I copy it. The problem is that 'import eggs.foo' in eggs/bar finds the original repository in the PYTHONPATH, so it ends up using the old 'foo' instead of my modified one. </p>

<p>How do I set myself up such that each copy of the module uses its own associated 'foo'? Thanks.</p>

<p>edit- Thanks for the pointer to relative imports. I've read up on it and I can see how to apply it. One problem I'd have with using it is that I've built up a fairly large codebase, and I haven't been too neat about it so most modules have a  quick 'self-test' under <code>if __name__ == '__main__':</code>, which from what I've read does not play with relative imports: </p>

<ul>
<li><p><a href=""http://mail.python.org/pipermail/python-list/2006-October/408945.html"" rel=""nofollow"">http://mail.python.org/pipermail/python-list/2006-October/408945.html</a></p></li>
<li><p><a href=""http://www.velocityreviews.com/forums/t502905-relative-import-broken.html"" rel=""nofollow"">http://www.velocityreviews.com/forums/t502905-relative-import-broken.html</a></p></li>
</ul>

<p>The other solution I've been able to google up is to deliberately manipulate sys.path, which seems like an even worse hack. Are there any other possibilities?</p>

<p>edit - Thanks for the suggestions. I'd originally misunderstood git branches, so as pointed out branches are exactly what I want. Nonetheless, I hadn't heard of relative imports before so thanks for that as well. I've learnt something new and may incorporate its use.</p>
"
343622,42188,2008-12-05T12:02:54Z,0,How do I submit a form given only the HTML source?,"<p>I would like to be able to submit a form in an <strong>HTML source (string)</strong>. In other words I need at least the ability to generate POST parameters <strong>from a string containing HTML source of the form</strong>. This is needed in unit tests for a Django project. I would like a solution that possibly;</p>

<ul>
<li>Uses only standard Python library and Django.</li>
<li>Allows parameter generation from a specific form if there is more than one form present.</li>
<li>Allows me to change the values before submission.</li>
</ul>

<p>A solution that returns a (Django) form instance from a given form class is best. Because it would allow me to use validation. Ideally it would consume the source (which is a string), a form class, and optionally a form name and return the instance as it was before rendering.</p>

<p>NOTE: I am aware this is not an easy task, and probably the gains would hardly justify the effort needed. But I am just curious about how this can be done, in a practical and reliable way. If possible.</p>
"
343769,42580,2008-12-05T13:08:12Z,2,How to use InterWiki links in moinmoin?,"<p>We use a number of diffrent web services in our company, wiki(moinmoin), bugtracker (internally), requestracker (customer connection), subversion. Is there a way to parse the wikipages so that if I write ""... in Bug1234 you could ..."" Bug1234 woud be renderd as a link to <code>http://mybugtracker/bug1234</code></p>
"
343865,3355,2008-12-05T13:42:34Z,23,How to convert from UTM to LatLng in python or Javascript,"<p>I have a bunch of files with coordinates in UTM form. For each coordinate I have easting, northing and zone. I need to convert this to LatLng for use with Google Map API to show the information in a map.</p>

<p>I have found some online calculators that does this, but no actual code or libraries. <a href=""http://trac.osgeo.org/proj4js/"">http://trac.osgeo.org/proj4js/</a> is a projection library for Javascript, but looking at the demo it doesn't include UTM projection.</p>

<p>I am still pretty fresh to the entire GIS domain, so what I want is something ala:</p>

<pre><code>(lat,lng) = transform(easting, northing, zone)
</code></pre>
"
344442,23657,2008-12-05T16:41:40Z,6,Notification Library for Windows,"<p>I'm developing a small tray-icon application for Windows and I need to display non-intrusive visual notifications similar to those that appear when you receive a new message in MSN Messenger or any other IM application.</p>

<p>I have looked at <a href=""http://www.fullphat.net/index.php"">Snarl</a>, but it seems to be a separate application that I need to install. I want something that could be bundled with my application in one installer, a library.</p>

<p>Which one do you recommend?</p>

<p>Python support is a huge plus.</p>
"
344559,280,2008-12-05T17:15:37Z,3,What is the most efficient way of extracting information from a large number of xml files in python?,"<p>I have a directory full (~10<sup>3</sup>, 10<sup>4</sup>) of XML files from which I need to extract the contents of several fields. 
I've tested different xml parsers, and since I don't need to validate the contents (expensive) I was thinking of simply using xml.parsers.expat (the fastest one) to go through the files, one by one to extract the data. </p>

<ol>
<li>Is there a more efficient way? (simple text matching doesn't work)</li>
<li>Do I need to issue a new ParserCreate() for each new file (or string) or can I reuse the same one for every file?</li>
<li>Any caveats?</li>
</ol>

<p>Thanks!</p>
"
344753,42546,2008-12-05T18:34:25Z,0,Having problem importing the PIL image library,"<p>i am trying to do something with the PIL Image library in django, but i experience some problems.</p>

<p>I do like this:</p>

<p><code>
import Image
</code></p>

<p>And then I do like this</p>

<p><code>
images = map(Image.open, glob.glob(os.path.join(dirpath, '*.thumb.jpg')))
</code></p>

<p>But when i try to run this i get an error and it leeds me to think that its not imported correctly, anybody know?</p>

<p><code>
type object 'Image' has no attribute 'open'
</code></p>
"
344826,33383,2008-12-05T19:13:41Z,2,Looking for input in model design for Django Schools,"<p>Today I'm starting a little project to create a Django based school administration program. I'm currently designing the models and their corresponding relationships. Being rather new to Django and relational databases in general, I would like some input.</p>

<p>Before I show you the current model layout, you need to have an idea of what the program is meant to do. Keep in mind that it is my goal for the software to be usable by both individual schools and entire school systems.</p>

<p>Features:
- Create multiple schools<br />
- Track student population per school<br />
- Track student demographics, parent contact info, etc.<br />
- Grade books<br />
- Transcripts<br />
- Track disciplinary record.<br />
- Fees schedules and payment tracking<br />
- Generate reports (student activity, student transcripts, class progress, progress by demographic, payment reports, disciplinary report by student class and demographic)<br />
    -- Automated PDF report email to parents for student reports.</p>

<p>Given those feature requirements, here is the model layout that I currently have:
Models</p>

<pre><code>* Person
      o ID: char or int
      o FirstName: char
      o MiddleName: char
      o FamilyName: char
      o Sex: multiple choice
      o Ethnicity: multiple choice
      o BirthDate: date
      o Email: char
      o HomePhone: char
      o WordPhone: char
      o CellPhone: char
      o Address: one-to-one with Location
* Student (inherent Person)
      o Classes: one-to-many with Class
      o Parents: one-to-many with Parent
      o Account: one-to-one with PaymentSchedule
      o Tasks: one-to-many with Tasks
      o Diciplin: one-to-many with Discipline
* Parent (inherent Person)
      o Children: one-to-many with Student
* Teacher (inherent Person)
      o Classes: one-to-many with Class
* Location
      o Address: char
      o Address2: char
      o Address3: char
      o City: char
      o StateProvince: char
      o PostalCode: char
      o Country: multiple choice
* Course
      o Name: char
      o Description: text field
      o Grade: int
* Class
      o School: one-to-one with School
      o Course: one-to-one with Course
      o Teacher: one-to-one with Teacher
      o Students: one-to-many with Student
* School
      o ID: char or int
      o Name: char
      o Location: one-to-one with location
* Tasks
      o ID: auto increment
      o Type: multiple choice (assignment, test, etc.)
      o DateAssigned: date
      o DateCompleted: date
      o Score: real
      o Weight: real
      o Class: one-to-one with class
      o Student: one-to-one with Student
* Discipline
      o ID: auto-increment
      o Discription: text-field
      o Reaction: text-field
      o Students: one-to-many with Student
* PaymentSchedule
      o ID: auto-increment
      o YearlyCost: real
      o PaymentSchedule: multiple choice
      o ScholarshipType: multiple choice, None if N/A
      o ScholarshipAmount: real, 0 if N/A
      o Transactions: one-to-many with Payments
* Payments
      o auto-increment
      o Amount: real
      o Date: date
</code></pre>

<p>If you have ideas on how this could be improved upon, I'd love to year them!</p>

<h1>Update</h1>

<p>I've written the initial models.py code, which is probably in need of much love. If you would like to take a look, or even join the project, check out the link.<br>
<a href=""http://bazaar.launchpad.net/~djangoschools/djangoschools/trunk/files"" rel=""nofollow"">http://bazaar.launchpad.net/~djangoschools/djangoschools/trunk/files</a></p>
"
344851,437,2008-12-05T19:23:11Z,22,"Django Admin's ""view on site"" points to example.com instead of my domain","<p>I added a <code>get_absolute_url</code> function to one of my models.</p>

<pre><code>def get_absolute_url(self):
    return '/foo/bar'
</code></pre>

<p>The admin site picks it up and adds a ""view on site"" link to the detail page for that object (when I put a real URL there instead of ""/foo/bar"").</p>

<p>The problem is instead of going to <code>http://localhost:8000/foo/bar</code>, it goes to <code>http://example.com/foo/bar</code>.</p>

<p>What am I doing wrong?</p>
"
345401,3912,2008-12-05T22:32:52Z,5,Django MTMField: limit_choices_to = other_ForeignKeyField_on_same_model?,"<p>I've got a couple django models that look like this:</p>

<pre><code>from django.contrib.sites.models import Site

class Photo(models.Model):
    title = models.CharField(max_length=100)
    site = models.ForeignKey(Site)
    file = models.ImageField(upload_to=get_site_profile_path) 

    def __unicode__(self):
        return self.title


class Gallery(models.Model):    
    name = models.CharField(max_length=40)
    site = models.ForeignKey(Site)
    photos = models.ManyToManyField(Photo, limit_choices_to = {'site':name} )    

    def __unicode__(self):
        return self.name
</code></pre>

<p>I'm having all kinds of <em>fun</em> trying to get the <code>limit_choices_to</code> working on the Gallery model.  I only want the Admin to show choices for photos that belong to the same site as this gallery.  Is this possible?</p>
"
345745,8014,2008-12-06T01:57:04Z,7,"Is this idiom pythonic? (someBool and ""True Result"" or ""False Result"")","<p>I just came across this idiom in some open-source Python, and I choked on my drink.</p>

<p>Rather than:</p>

<pre><code>if isUp:
    return ""Up""
else:
    return ""Down""
</code></pre>

<p>or even:</p>

<pre><code>return ""Up"" if isUp else ""Down""
</code></pre>

<p>the code read:</p>

<pre><code>return isUp and ""Up"" or ""Down""
</code></pre>

<p>I can see this is the same result, but is this a typical idiom in Python? If so, is it some performance hack that runs fast? Or is it just a once-off that needs a code review?</p>
"
345746,37984,2008-12-06T01:57:34Z,3,Refactoring python module configuration to avoid relative imports,"<p>This is related to a <a href=""http://stackoverflow.com/questions/343517/how-do-i-work-with-multiple-git-branches-of-a-python-module"">previous question</a> of mine.</p>

<p>I understand how to store and read configuration files. There are choices such as <a href=""http://www.python.org/doc/2.5.2/lib/module-ConfigParser.html"" rel=""nofollow"">ConfigParser</a> and <a href=""http://www.voidspace.org.uk/python/configobj.html"" rel=""nofollow"">ConfigObj</a>.</p>

<p>Consider this structure for a hypothetical 'eggs' module:</p>

<pre>
eggs/
  common/
    __init__.py
    config.py
  foo/
    __init__.py
    a.py
</pre>

<p>'eggs.foo.a' needs some configuration information. What I am currently doing is, in 'a', <pre>import eggs.common.config</pre>. One problem with this is that if 'a' is moved to a deeper level in the module tree, the relative imports break. Absolute imports don't, but they require your module to be on your PYTHONPATH.</p>

<p>A possible alternative to the above absolute import is a relative import. Thus, in 'a',</p>

<pre>import .common.config</pre>

<p>Without debating the merits of relative vs absolute imports, I was wondering about other possible solutions?</p>

<p>edit- Removed the VCS context</p>
"
345991,30862,2008-12-06T05:59:43Z,64,"Python - No handlers could be found for logger ""OpenGL.error""","<p>Okay, what is it, and why does it occur on Win2003 server, but not on WinXP.</p>

<p>It doesn't seem to affect my application at all, but I get this error message when I close the application.  And it's annoying (as errors messages should be).</p>

<p>I am using pyOpenGl and wxPython to do the graphics stuff.  Unfortunately, I'm a C# programmer that has taken over this Python app, and I had to learn Python to do it.</p>

<p>I can supply code and version numbers etc, but I'm still learning the technical stuff, so any help would be appreciated.</p>

<p>Python 2.5, wxPython and pyOpenGL</p>
"
346132,33612,2008-12-06T09:32:04Z,9,Postgres - how to return rows with 0 count for missing data?,"<p>I have unevenly distributed data(wrt date) for a few years (2003-2008). I want to query data for a given set of start and end date, grouping the data by any of the supported intervals (day, week, month, quarter, year) in PostgreSQL 8.3 (<a href=""http://www.postgresql.org/docs/8.3/static/functions-datetime.html#FUNCTIONS-DATETIME-TRUNC"">http://www.postgresql.org/docs/8.3/static/functions-datetime.html#FUNCTIONS-DATETIME-TRUNC</a>).</p>

<p>The problem is that some of the queries give results continuous over the required period, 
as this one:</p>

<pre><code>select to_char(date_trunc('month',date), 'YYYY-MM-DD'),count(distinct post_id) 
from some_table where category_id=1 and entity_id = 77  and entity2_id = 115 
and date &lt;= '2008-12-06' and date &gt;= '2007-12-01' group by 
date_trunc('month',date) order by date_trunc('month',date);
          to_char   | count 
        ------------+-------
         2007-12-01 |    64
         2008-01-01 |    31
         2008-02-01 |    14
         2008-03-01 |    21
         2008-04-01 |    28
         2008-05-01 |    44
         2008-06-01 |   100
         2008-07-01 |    72
         2008-08-01 |    91
         2008-09-01 |    92
         2008-10-01 |    79
         2008-11-01 |    65
        (12 rows)
</code></pre>

<p>but some of them miss some intervals because there is no data present, as this one:</p>

<pre><code>select to_char(date_trunc('month',date), 'YYYY-MM-DD'),count(distinct post_id) 
from some_table where category_id=1 and entity_id = 75  and entity2_id = 115 
and date &lt;= '2008-12-06' and date &gt;= '2007-12-01' group by 
date_trunc('month',date) order by date_trunc('month',date);

        to_char   | count 
    ------------+-------

     2007-12-01 |     2
     2008-01-01 |     2
     2008-03-01 |     1
     2008-04-01 |     2
     2008-06-01 |     1
     2008-08-01 |     3
     2008-10-01 |     2
    (7 rows)
</code></pre>

<p>where the required resultset is:</p>

<pre><code>  to_char   | count 
------------+-------
 2007-12-01 |     2
 2008-01-01 |     2
 2008-02-01 |     0
 2008-03-01 |     1
 2008-04-01 |     2
 2008-05-01 |     0
 2008-06-01 |     1
 2008-07-01 |     0
 2008-08-01 |     3
 2008-09-01 |     0
 2008-10-01 |     2
 2008-11-01 |     0
(12 rows)
</code></pre>

<p>A count of 0 for missing entries.</p>

<p>I have seen earlier discussions on Stack Overflow but they don't solve my problem it seems, since my grouping period is one of (day, week, month, quarter, year) and decided on runtime by the application. So an approach like left join with a calendar table or sequence table will not help I guess.</p>

<p>My current solution to this is to fill in these gaps in Python (in a Turbogears App) using the calendar module.</p>

<p>Is there a better way to do this.</p>
"
346230,12870,2008-12-06T12:41:36Z,26,Read file object as string in python,"<p>I'm using <code>urllib2</code> to read in a page. I need to do a quick regex on the source and pull out a few variables but <code>urllib2</code> presents as a file object rather than a string.</p>

<p>I'm new to python so I'm struggling to see how I use a file object to do this. Is there a quick way to convert this into a string?</p>
"
346267,12870,2008-12-06T13:31:05Z,3,Python regex,"<p>I have a string like this that I need to parse into a 2D array:</p>

<pre><code> str = ""'813702104[813702106]','813702141[813702143]','813702172[813702174]'""
</code></pre>

<p>the array equiv would be:</p>

<pre><code>arr[0][0] = 813702104
arr[0][1] = 813702106
arr[1][0] = 813702141
arr[1][1] = 813702143
#... etc ...
</code></pre>

<p>I'm trying to do this by REGEX. The string above is buried in an HTML page but I can be certain it's the only string in that pattern on the page. I'm not sure if this is the best way, but it's all I've got right now.</p>

<pre><code>imgRegex = re.compile(r""(?:'(?P&lt;main&gt;\d+)\[(?P&lt;thumb&gt;\d+)\]',?)+"")
</code></pre>

<p>If I run <code>imgRegex.match(str).groups()</code> I only get one result (the first couplet). How do I either get multiple matches back or a 2d match object (if such a thing exists!)?</p>

<p><em>Note: Contrary to how it might look, this is <strong>not</strong> homework</em></p>

<h1>Note <em>part deux</em>: The real string is embedded in a <em>large</em> HTML file and therefore splitting does not appear to be an option.</h1>

<p>I'm still getting answers for this, so I thought I better edit it to show why I'm not changing the accepted answer. Splitting, though more efficient on this test string, isn't going to extract the parts from a whole HTML file. I <em>could</em> combine a regex and splitting but that seems silly.</p>

<p>If you do have a better way to find the parts from a load of HTML (the pattern <code>\d+\[\d+\]</code> is unique to this string in the source), I'll happily change accepted answers. Anything else is academic.</p>
"
346426,24946,2008-12-06T16:06:42Z,1,Installation problems with django-tagging,"<p>I am having problems using <a href=""http://code.google.com/p/django-tagging/"" rel=""nofollow"">django-tagging</a>. I try to follow the <a href=""http://code.google.com/p/django-tagging/source/browse/trunk/docs/overview.txt"" rel=""nofollow"">documentation</a> but it fails at the second step</p>

<blockquote>
  <p>Once you've installed Django Tagging and want to use it in your Django applications, do the following:</p>
  
  <ol>
  <li>Put <code>'tagging'</code> in your <code>INSTALLED_APPS</code> setting.</li>
  <li>Run the command <code>manage.py syncdb</code>.</li>
  </ol>
  
  <p>The <code>syncdb</code> command creates the necessary database tables and creates permission objects for all installed apps that need them.</p>
</blockquote>

<p>I get a python Traceback with the following error:</p>

<pre><code>ImportError: cannot import name parse_lookup
</code></pre>

<p>The following works, so I think it is correctly installed:</p>

<pre><code>&gt;&gt; import tagging
&gt;&gt; tagging.VERSION
(0, 2.1000000000000001, None)
</code></pre>

<p>What am I missing?</p>
"
346467,12870,2008-12-06T16:46:49Z,83,Format numbers in django templates,"<p>I'm trying to format numbers. Examples:</p>

<pre><code>1     =&gt; 1
12    =&gt; 12
123   =&gt; 123
1234  =&gt; 1,234
12345 =&gt; 12,345
</code></pre>

<p>It strikes as a fairly common thing to do but I can't figure out which filter I'm supposed to use.</p>

<p>Edit: If you've a generic Python way to do this, I'm happy adding a formatted field in my model.</p>
"
346723,32933,2008-12-06T20:25:05Z,3,"Is it more efficient to use ""import <module>"" or ""from <module> import <func>""?","<p>Say I only needed to use findall() from the re module, is it more efficient to do:</p>

<pre><code>from re import findall
</code></pre>

<p>or </p>

<pre><code>import re
</code></pre>

<p>Is there actually any difference in speed/memory usage etc?</p>
"
346823,32032,2008-12-06T21:40:27Z,2,Ticking function grapher,"<p>I am trying to figure out the following problem.
I am building Yet another math function grapher, The function is drawn on its predefined x,y range, that's all good.</p>

<p>Now I am working on the background and the ticking of X, Y axes (if any axes are shown).</p>

<p>I worked out the following.
I have a fixed width  of 250 p
The tick gap should be between 12.5 and 50p.</p>

<p>The ticks should indicate either unit or half unit range, by that i mean the following.</p>

<p>x range (-5, 5): one tick = 1</p>

<p>x range (-1, 1): one tick = 0.5 or 0.1 depending on the gap that each of this option would generate. </p>

<p>x range (0.1, 0.3): 0.05 </p>

<p>Given a Xrange
How would you get the number of ticks between either full or half unit range ?</p>

<p>Or maybe there are other way to approach this type of problems.</p>
"
346840,42188,2008-12-06T21:48:55Z,6,Django.contrib.flatpages without models,"<p>I have some flatpages with empty <code>content</code> field and their content inside the template (given with <code>template_name</code> field).</p>

<h3>Why I am using <code>django.contrib.flatpages</code></h3>

<ul>
<li>It allows me to serve (mostly) static pages with minimal URL configuration.</li>
<li>I don't have to write views for each of them.</li>
</ul>

<h3>Why I don't need the model <code>FlatPage</code></h3>

<ul>
<li>I leave the content empty and just supply a template path. Therefore I can take advantage of having the source in a file;
<ul>
<li>I can edit the source directly from the file system, without the help of a server (such as admin).</li>
<li>I can take advantage of syntax highlightning and other editor features.</li>
</ul></li>
<li>With the model I have to maintain fixtures for flatpages.
<ul>
<li>So the data for the same entity is in two seperate places.</li>
<li>If I move the content inside the fixture it'll be more difficult to edit.
<ul>
<li>Even if fixture maintenance was a non-issue I'd still need to dump and load these fixtures again and again during development.</li>
</ul></li>
</ul></li>
</ul>

<h3>What I am looking for</h3>

<p>Basically; getting rid of <code>FlatPage</code> model while maintaining <code>contrib.flatpages</code> functionality. I don't have a clear idea how this should be solved. If there's a clean way of modifying (like <code>add_to_class</code>) <code>FlatPages</code> to get the information somewhere other than the database I'd prefer that. Maybe the metadata can be inserted to the templates and then a special manager that reads this data would replace the default manager of <code>FlatPages</code>.</p>

<p>If I don't prefer manual editing over admin functionality for flatpages, how can take the database out of the equation?</p>
"
347010,NA,2008-12-06T23:58:08Z,4,Questions for python->scheme conversion,"<p>I currently am trying to write a Python program using scheme semantics so I can later translate it into Scheme without relying on a lot of Pythonic stuff.</p>

<p>I'm trying solve the sliding puzzle problem (where you have 9 slots and 8 tiles arranged in a square) using a*, depth first, and breadth first search algorithm.  I did this ~11 years ago in some AI class in Lisp, but basically at the time I had no idea about lisp, I hated it with all my heart, and only in retrospect do I realize I was programming ""C"" in Lisp.  The prof didn't help in this matter.</p>

<p>I have a python function which can swap two tiles easily:  </p>

<pre><code>def swap(p, (r1, c1), (r2, c2)):  
    # Swaps *any* two locations and returns new configuration  
    # Does not concern itself with zero location, etc  
    # Not sure how to do this functionally  
    p_p = p[:]  
    temp = p_p[r1][c1]  
    p_p[r1][c1] = p_p[r2][c2]  
    p_p[r2][c2] = temp  
    return p_p  
</code></pre>

<p>I'd like to turn this into something you might find in SICP, avoiding side effects, etc.  </p>

<p>But this brings up a question.  Everything I read in SICP is loops via recursion.  I didn't see anything in accessing arrays/vectors/lists in constant time.  I can imagine a loopish/recursive way to read an element, but I find it harder to imagine a way to create a new list with a certain element changed, without invoking side-effect producing things like set!, and without resorting to crazy if/then/else clauses concerning which element should be changed.  This of course gets more confusing when considering a 2d array.  In this case the solution with python is obvious because of its native support for multidimensional arrays.</p>

<p>In C/C++/Python/Matlab/Lua/anything else, accessing lists/arrays via the [i] syntax is easy, and directly translates to a hardware-oriented pointer lookup somewhere underneath.  I don't understand how scheme does this, given the atomic operations defined in the SICP version of scheme, which all seem very loop-and-search oriented.  How do the vector and list array access functions work to get constant time access?  (I'm a total newbie here, so I'm not ever sure what functions I'd be talking about).  Is there a C or Assembly library someplace which is secretly being accessed?  Are there any inherent constant-time semantics in scheme which could be used for list/array/vector access, and which would allow me a guilt-free way of using that idiom in Python for the moment?  </p>

<p>How would can I rewrite the above function in python using Schemish semantics?  How would I rewrite the above function in Scheme?</p>
"
347054,NA,2008-12-07T00:49:52Z,3,Where do I go from here -- regarding programming?,"<p>I seem to be in a never ending tail spin of Linux, or not, Windows or not. Web programming or system programming. Python or PHP.</p>

<p>I'am self teaching myself programming. But it seems I keep being torn about which way to go. Unfortunately it is always seemingly good reasons to get side tracked. You know the whole open source or proprietary thing. Lately I have decided after a year that Linux just doesn't cut it for me and it mostly stems from me wanting to watch videos on Channel 9 etc, and the clunkiness that is Linux. So that lead me to, ""Should I learn ASP.NET, since I am more so deciding Windows IS a ""necessary"" evil.</p>

<p>I hope this made sense. The reason I settled in on Web Development as my course to learning programming is because I actually have a task to implement rather then aimlessly reading reference books etc.</p>

<p>Does anyone have any advice at what they may have done to stay focused and not get lead down every tangent or idea.</p>
"
347109,37984,2008-12-07T01:59:49Z,14,How do I concisely implement multiple similar unit tests in the Python unittest framework?,"<p>I'm implementing unit tests for a family of functions that all share a number of invariants. For example, calling the function with two matrices produce a matrix of known shape.</p>

<p>I would like to write unit tests to test the entire family of functions for this property, without having to write an individual test case for each function (particularly since more functions might be added later). </p>

<p>One way to do this would be to iterate over a list of these functions:</p>

<pre><code>import unittest
import numpy

from somewhere import the_functions
from somewhere.else import TheClass

class Test_the_functions(unittest.TestCase):
  def setUp(self):
    self.matrix1 = numpy.ones((5,10))
    self.matrix2 = numpy.identity(5)

  def testOutputShape(unittest.TestCase):
     """"""Output of functions be of a certain shape""""""
     for function in all_functions:
       output = function(self.matrix1, self.matrix2)
       fail_message = ""%s produces output of the wrong shape"" % str(function)
       self.assertEqual(self.matrix1.shape, output.shape, fail_message)

if __name__ == ""__main__"":
  unittest.main()
</code></pre>

<p>I got the idea for this from <a href=""http://www.diveintopython.net/unit_testing/romantest.html"">Dive Into Python</a>. There, it's not a list of functions being tested but a list of known input-output pairs. The problem with this approach is that if any element of the list fails the test, the later elements don't get tested.</p>

<p>I looked at subclassing unittest.TestCase and somehow providing the specific function to test as an argument, but as far as I can tell that prevents us from using unittest.main() because there would be no way to pass the argument to the testcase.</p>

<p>I also looked at dynamically attaching ""testSomething"" functions to the testcase, by using setattr with a lamdba, but the testcase did not recognize them.</p>

<p>How can I rewrite this so it remains trivial to expand the list of tests, while still ensuring every test is run?</p>
"
347475,79101,2008-12-07T11:03:17Z,0,Can I use Python to intercept global keystrokes in KDE?,"<p>I want to make a simple app, ideally in Python, that would run in the background on KDE, listening to all keystrokes being done by the user, so that the app goes to the foreground if a specific combination of keys is pressed. Is that doable? Can anyone point me to such resource?</p>
"
347497,745,2008-12-07T11:41:34Z,3,Emitting headers from a tiny Python web-framework,"<p>I am writing a web-framework for Python, of which the goal is to be as ""small"" as possible (currently under 100 lines of code).. You can see the current code <a href=""http://github.com/dbr/pyerweb/tree/master"" rel=""nofollow"">on github</a></p>

<p>Basically it's written to be as simple to use as possible. An example ""Hello World"" like site:</p>

<pre><code>from pyerweb import GET, runner

@GET(""/"")
def index():
    return ""&lt;strong&gt;This&lt;/strong&gt; would be the output HTML for the URL / ""

@GET(""/view/([0-9]+?)$"")
def view_something(id):
    return ""Viewing id %s"" % (id) # URL /view/123 would output ""Viewing id 123""

runner(url = ""/"", # url would be from a web server, in actual use
       output_helper = ""html_tidy"" # run returned HTML though ""HTML tidy""
</code></pre>

<p>Basically you have a function that returns HTML, and the GET decorator maps this to a URL.</p>

<p>When <code>runner()</code> is called, each decorated function is checked, if the URL regex matches the request URL, the function is run, and the output is sent to the browser.</p>

<p>Now, the problem - outputting headers. Currently for development I've just put a line before the <code>runner()</code> call which does <code>print Content-type:text/html\n</code> - this is obviously a bit limiting..</p>

<p>My first ideas was to have the functions return a dict, something like..</p>

<pre><code>@GET(""/"")
def index():
    return {
        ""html"": ""&lt;html&gt;&lt;body&gt;...&lt;/body&gt;&lt;/html&gt;"",
        ""headers"": {""Location"":""http://google.com""}
    }
</code></pre>

<p>I really don't like this - having to return a dict with a specifically named key isn't nearly as nice as just returning a string..</p>

<p>I could check if the returned data is a dict, if so use <code>returned_data['html']</code> as the output, if it's a string, there is no custom headers to be sent... but this means to go from no headers (which would be the case a huge majority of the time) to headers, you'd have to change the return function from <code>return my_html</code> to <code>return {'html':my_html}</code> which isn't very elegant either..</p>

<p>After writing this, I discovered ""Sinatra"" - a similar-in-use Ruby library, and looked at how it dealt with headers:</p>

<pre><code>get ""/"" do
    content_type 'text/css', :charset =&gt; 'utf-8'
end
</code></pre>

<p>This seems like it could be nice enough in Python:</p>

<pre><code>@GET(""/"")
def index():
    header(""location"", ""http://google.com"")
</code></pre>

<p>To implement this, I was considering changing how the functions are executed - instead of simply using the return value, I would change <code>sys.stdout</code> to a StringIO, so you could do..</p>

<pre><code>def index():
    print ""&lt;html&gt;""
    print ""&lt;head&gt;&lt;title&gt;Something&lt;/title&gt;&lt;/head&gt;""
    print ""&lt;body&gt;...&lt;/body&gt;""
    print ""&lt;/html&gt;
</code></pre>

<p>..without having to worry about concatenating a bunch of strings together. The upshot of this is I could have a separate stream for headers, so the above <code>header()</code> function would write to this.. Something like:</p>

<pre><code>def header(name, value):
    pyerweb.header_stream.write(""%s: %s"" % (name, value))
</code></pre>

<p>Basically, the question is, how would you output headers from this web-framework (mostly in terms of <em>use</em>, but to a lesser extent implementation)?</p>
"
347538,32032,2008-12-07T12:45:15Z,6,Rounding float to the nearest factor?,"<p>I have a small math problem I am trying to solve</p>

<p>Given a number x and resolution y, I need to find the next x' with the required resolution.</p>

<p>e.g.</p>

<pre><code>x = 1.002     y = 0.1   x'= 1.1

x = 0.348     y = 0.1   x'= 0.4

x = 0.50      y = 1     x'= 1

x = 0.32      y = 0.05     x'= 0.35
</code></pre>

<p>Is there any smart way of doing this in Python?</p>
"
347574,37984,2008-12-07T13:30:45Z,6,How do I get nose to discover dynamically-generated testcases?,"<p>This is a follow-up to a <a href=""http://stackoverflow.com/questions/347109/how-do-i-concisely-implement-multiple-similar-unit-tests-in-the-python-unittest"">previous question</a> of mine.</p>

<p>In the previous question, methods were explored to implement what was essentially the same test over an entire family of functions, ensuring testing did not stop at the first function that failed.</p>

<p>My preferred solution used a metaclass to dynamically insert the tests into a unittest.TestCase. Unfortunately, nose does not pick this up because nose statically scans for test cases.</p>

<p>How do I get nose to discover and run such a TestCase? Please refer <a href=""http://stackoverflow.com/questions/347109/how-do-i-concisely-implement-multiple-similar-unit-tests-in-the-python-unittest#347175"">here</a> for an example of the TestCase in question.</p>
"
347632,2128,2008-12-07T14:27:09Z,0,mod_python.publisher always gives content type 'text/plain',"<p>I've just set up mod python with apache and I'm trying to get a simple script to work, but  what happens is it publishes all my html as plain text when I load the page. I figured this is a problem with mod_python.publisher, The handler I set it too. I searched through the source of it and found the line where it differentiates between 'text/plain' and 'text/html' and it searches the last hundred characters of the file it's outputting for ' in my script, so I put it in, and then it still didn't work. I even tried commenting out some of the code so that publisher would set everything as 'text/html' but it still did the same thing when I refreshed the page. Maybe I've set up something wrong.</p>

<p>Heres my configuration in the httpd.conf</p>

<blockquote>
  <p>&lt; Directory ""C:/Program Files/Apache Software Foundation/Apache2.2/htdocs""><br />
  SetHandler mod_python<br />
  PythonHandler mod_python.publisher<br />
  PythonDebug On<br />
  &lt; /Directory ></p>
</blockquote>
"
347734,42584,2008-12-07T16:15:40Z,12,Gauss-Legendre Algorithm in python,"<p>I need some help calculating Pi. I am trying to write a python program that will calculate Pi to X digits. I have tried several from the python mailing list, and it is to slow for my use. 
I have read about the <a href=""http://en.wikipedia.org/wiki/Gauss-Legendre_algorithm"">Gauss-Legendre Algorithm</a>, and I have tried porting it to Python with no success.</p>

<p>I am reading from <a href=""http://www.geocities.com/hjsmithh/Pi/Gauss_L.html"">Here</a>, and I would appreciate any input as to where I am going wrong!</p>

<p>It outputs: 0.163991276262</p>

<pre><code>from __future__ import division
import math
def square(x):return x*x
a = 1
b = 1/math.sqrt(2)
t = 1/4
x = 1
for i in range(1000):
    y = a
    a = (a+b)/2
    b = math.sqrt(b*y)
    t = t - x * square((y-a))
    x = 2* x

pi = (square((a+b)))/4*t
print pi
raw_input()
</code></pre>
"
347811,15055,2008-12-07T17:41:10Z,23,AKS Primes algorithm in Python,"<p>A few years ago, it was proven that <a href=""http://www.cse.iitk.ac.in/~manindra/algebra/primality_v6.pdf"">PRIMES is in P</a>. Are there any algorithms implementing <a href=""http://en.wikipedia.org/wiki/AKS_primality_test"">their primality test</a> in Python? I wanted to run some benchmarks with a naive generator and see for myself how fast it is. I'd implement it myself, but I don't understand the paper enough yet to do that.</p>
"
347812,42188,2008-12-07T17:41:34Z,14,How to test django caching?,"<p>Is there a way to be <strong>sure</strong> that a page is coming from cache on a production server and on the development server as well?</p>

<p>The solution <strong>shouldn't</strong> involve caching middleware because not every project uses them. Though the solution itself might <strong>be</strong> a middleware.</p>

<p>Just checking if the data is stale is not a very safe testing method IMO.</p>
"
348044,41860,2008-12-07T20:41:40Z,12,What could justify the complexity of Plone?,"<p>Plone is very complex. <a href=""http://en.wikipedia.org/wiki/Zope"">Zope</a>2, <a href=""http://en.wikipedia.org/wiki/Zope_3"">Zope3</a>, <a href=""http://codespeak.net/z3/five/"">Five</a>, <a href=""http://wiki.zope.org/zope3/ZCML"">ZCML</a>, <a href=""http://en.wikipedia.org/wiki/Zope_Object_Database"">ZODB</a>, <a href=""http://en.wikipedia.org/wiki/Zope_Object_Database#ZEO"">ZEO</a>, a whole bunch of acronyms and abbreviations.</p>

<p>It's hard to begin and the current state seems to be undecided. It is mainly based on Zope2, but incorporates Zope3 via Five. And there are XML config files everywhere.</p>

<p>Does the steep learning curve pay of? Is this complexity still justified today?</p>

<p>Background: I need a platform. Customers often need a CMS. I'm currently reading ""<a href=""http://plone.org/news/book-professional-plone-development-now-shipping"">Professional Plone Development</a>"", without prior knowledge of Plone.</p>

<p>The problem: Customers don't always want the same and you can't know beforehand. One thing is sure: They don't want the default theme of Plone. But any additional feature is a risk. You can't just start and say ""<a href=""http://stackoverflow.com/questions/348044/what-could-justify-the-complexity-of-plone/351692#351692"">If you want to see the complexity of Plone, you have to ask for it.</a>"" when you don't know the system good enough to plan.</p>
"
348196,NA,2008-12-07T22:15:46Z,42,Creating a list of objects in Python,"<p>I'm trying to create a Python script that opens several databases and compares their contents.  In the process of creating that script, I've run into a problem in creating a list whose contents are objects that I've created.</p>

<p>I've simplified the program to its bare bones for this posting. First I create a new class, create a new instance of it, assign it an attribute and then write it to a list.  Then I assign a new value to the instance and again write it to a list... and again and again...</p>

<p>Problem is, it's always the same object so I'm really just changing the base object.  When I read the list, I get a repeat of the same object over and over.  </p>

<p>So how do you write objects to a list within a loop?</p>

<p>Thanks,</p>

<p>Bob J</p>

<p>Here's my simplified code</p>

<pre><code>class SimpleClass(object):
    pass

x = SimpleClass
# Then create an empty list
simpleList = []
#Then loop through from 0 to 3 adding an attribute to the instance 'x' of SimpleClass
for count in range(0,4):       
    # each iteration creates a slightly different attribute value, and then prints it to
# prove that step is working
# but the problem is, I'm always updating a reference to 'x' and what I want to add to
# simplelist is a new instance of x that contains the updated attribute

x.attr1= '*Bob* '* count
print ""Loop Count: %s Attribute Value %s"" % (count, x.attr1)
simpleList.append(x)

print '-'*20
# And here I print out each instance of the object stored in the list 'simpleList'
# and the problem surfaces.  Every element of 'simpleList' contains the same      attribute value

y = SimpleClass
print ""Reading the attributes from the objects in the list""
for count in range(0,4):
    y = simpleList[count]
    print y.attr1
</code></pre>

<p>So how do I (append, extend, copy or whatever) the elements of simpleList so that each entry contains a different instance of the object instead of all pointing to the same one?</p>
"
348392,2592,2008-12-08T00:12:25Z,29,Receive and send emails in python,"<p>How can i receive and send email in python? A 'mail server' of sorts.</p>

<p>I am looking into making an app that listens to see if it recieves an email addressed to foo@bar.domain.com, and sends an email to the sender.</p>

<p>Now, am i able to do this all in python, would it be best to use 3rd party libraries? </p>
"
348630,NA,2008-12-08T03:57:49Z,80,How can I download all emails with attachments from Gmail?,"<p>How do I connect to Gmail and determine which messages have attachments?  I then want to download each attachment, printing out the Subject: and From: for each message as I process it.</p>
"
348999,21716,2008-12-08T09:33:04Z,6,Adding a mimetype in python,"<p>On my Centos server Python's mimetypes.guess_type(""mobile.3gp"") returns (None, None), instead of ('video/3gpp', None).</p>

<p>Where does Python get the list of mimetypes from, and is it possible to add a missing type to the list?</p>
"
349175,18909,2008-12-08T11:00:39Z,6,Formatting a data structure into a comma-separated list of arguments,"<p>I need to convert a list (or a dict) into a comma-separated list for passing to another language.</p>

<p>Is there a nicer way of doing this than:</p>

<pre><code> result = ''
 args = ['a', 'b', 'c', 'd']

 i = 0
 for arg in args:
     if i != 0:    result += arg
     else:         result += arg + ', '
     i += 1

 result = 'function (' + result + ')
</code></pre>

<p>Thanks,
Dan</p>
"
349206,6093,2008-12-08T11:11:45Z,10,"How do I find the ""concrete class"" of a django model baseclass","<p>I'm trying to find the actual class of a django-model object, when using model-inheritance.</p>

<p>Some code to describe the problem:</p>

<pre><code>class Base(models.model):
    def basemethod(self):
        ...

class Child_1(Base):
    pass

class Child_2(Base):
    pass
</code></pre>

<p>If I create various objects of the two Child classes and the create a queryset containing them all:</p>

<pre><code>Child_1().save()
Child_2().save()
(o1, o2) = Base.objects.all()
</code></pre>

<p>I want to determine if the object is of type Child_1 or Child_2 in basemethod, I can get to the child object via o1.child_1 and o2.child_2 but that reconquers knowledge about the childclasses in the baseclass.</p>

<p>I have come up with the following code:</p>

<pre><code>def concrete_instance(self):
    instance = None
    for subclass in self._meta.get_all_related_objects():
        acc_name = subclass.get_accessor_name()
        try:
            instance = self.__getattribute__(acc_name)
            return instance
        except Exception, e:
            pass
</code></pre>

<p>But it feels brittle and I'm not sure of what happens when if I inherit in more levels.</p>
"
349369,2220518,2008-12-08T12:28:28Z,7,How do I pass a python list in the post query?,"<p>I want to send some strings in a list in a POST call. eg:</p>

<pre><code>    www.example.com/?post_data = A list of strings
</code></pre>

<p>The python code receives the data as a single string (Instead of a list of strings). How do I post it as  a list of strings?</p>
"
349653,28165,2008-12-08T14:09:25Z,1,Run a shortcut under windows,"<p>The following doesn't work, because it doesn't wait until the process is finished:</p>

<pre><code>import subprocess
p = subprocess.Popen('start /WAIT /B MOZILL~1.LNK', shell=True)
p.wait()
</code></pre>

<p>Any idea how to run a shortcut and wait that the subprocess returns ?</p>

<p><strong>Edit:</strong> originally I was trying this without the <strong>shell</strong> option in my post, which caused Popen to fail. In effect, <code>start</code> is not an executable but a shell command. This was fixed thanks to Jim.</p>
"
350519,23657,2008-12-08T19:10:10Z,8,Getting the lesser n elements of a list in Python,"<p>I need to get the lesser n numbers of a list in Python. I need this to be really fast because it's in a critical part for performance and it needs to be repeated a lot of times.</p>

<p>n is usually no greater than 10 and the list usually has around 20000 elements. The list is always different each time I call the function. Sorting can't be made in place.</p>

<p>Initially, I have written this function:</p>

<pre><code>def mins(items, n):
    mins = [float('inf')]*n
    for item in items:
        for i, min in enumerate(mins):
	        if item &lt; min:
		        mins.insert(i, item)
		        mins.pop()
		        break
    return mins
</code></pre>

<p>But this function can't beat a simple sorted(items)[:n] which sort the entire list. Here is my test:</p>

<pre><code>from random import randint, random
import time

test_data = [randint(10, 50) + random() for i in range(20000)]

init = time.time()
mins = mins(test_data, 8)
print 'mins(items, n):', time.time() - init

init = time.time()
mins = sorted(test_data)[:8]
print 'sorted(items)[:n]:', time.time() - init
</code></pre>

<p>Results:</p>

<pre><code>mins(items, n): 0.0632939338684
sorted(items)[:n]: 0.0231449604034
</code></pre>

<p>sorted()[:n] is three times faster. I believe this is because:</p>

<ol>
<li>insert() operation is costly because Python lists are not linked lists.</li>
<li>sorted() is an optimized c function and mine is pure python.</li>
</ol>

<p>Is there any way to beat sorted()[:n] ?
Should I use a C extension, or Pyrex or Psyco or something like that?</p>

<p>Thanks in advance for your answers.</p>
"
350647,16363,2008-12-08T19:51:04Z,5,Why is my Python C Extension leaking memory?,"<p>The function below takes a python file handle, reads in packed binary data from the file, creates a Python dictionary and returns it.  If I loop it endlessly, it'll continually consume RAM.  What's wrong with my RefCounting?</p>

<pre><code>static PyObject* __binParse_getDBHeader(PyObject *self, PyObject *args){

PyObject *o; //generic object
PyObject* pyDB = NULL; //this has to be a py file object

if (!PyArg_ParseTuple(args, ""O"", &amp;pyDB)){
	return NULL;
} else {
	Py_INCREF(pyDB);
	if (!PyFile_Check(pyDB)){
        Py_DECREF(pyDB);
		PyErr_SetString(PyExc_IOError, ""argument 1 must be open file handle"");
		return NULL;
	}
}

FILE *fhDB = PyFile_AsFile(pyDB);

long offset = 0;
DB_HEADER *pdbHeader = malloc(sizeof(DB_HEADER));
fseek(fhDB,offset,SEEK_SET); //at the beginning
fread(pdbHeader, 1, sizeof(DB_HEADER), fhDB );
if (ferror(fhDB)){
	fclose(fhDB);
	Py_DECREF(pyDB);
	PyErr_SetString(PyExc_IOError, ""failed reading database header"");
	return NULL;
}
Py_DECREF(pyDB);

PyObject *pyDBHeader = PyDict_New();
Py_INCREF(pyDBHeader);

o=PyInt_FromLong(pdbHeader-&gt;version_number);
PyDict_SetItemString(pyDBHeader, ""version"", o);
Py_DECREF(o);

PyObject *pyTimeList = PyList_New(0);
Py_INCREF(pyTimeList);

int i;
for (i=0; i&lt;NUM_DRAWERS; i++){
	//epochs
	o=PyInt_FromLong(pdbHeader-&gt;last_good_test[i]);
	PyList_Append(pyTimeList, o);
	Py_DECREF(o);
}
PyDict_SetItemString(pyDBHeader, ""lastTest"", pyTimeList);
Py_DECREF(pyTimeList);

o=PyInt_FromLong(pdbHeader-&gt;temp);
PyDict_SetItemString(pyDBHeader, ""temp"", o);
Py_DECREF(o);

free(pdbHeader);
return (pyDBHeader);
}
</code></pre>

<p>Thanks for taking a look,</p>

<p>LarsenMTL</p>
"
350799,13009,2008-12-08T20:37:44Z,70,How does Django Know the Order to Render Form Fields?,"<p>If I have a Django form such as:</p>

<pre><code>class ContactForm(forms.Form):
    subject = forms.CharField(max_length=100)
    message = forms.CharField()
    sender = forms.EmailField()
</code></pre>

<p>And I call the as_table() method of an instance of this form, Django will render the fields as the same order as specified above.</p>

<p>My question is how does Django know the order that class variables where defined?  </p>

<p>(Also how do I override this order, for example when I want to add a field from the classe's <strong>init</strong> method?)</p>
"
351271,21384,2008-12-08T23:02:23Z,6,What does the function set use to check if two objects are different?,"<p>Simple code:</p>

<pre><code>&gt;&gt;&gt; set([2,2,1,2,2,2,3,3,5,1])
set([1, 2, 3, 5])
</code></pre>

<p>Ok, in the resulting sets there are no duplicates.
What if the object in the list are not int but are some defined by me?
What method does it check to understand if they are different? I implemented __eq__ and __cmp__ with some objects but <strong>set</strong> doesn't seems to use them :\</p>

<p>Does anyone know how to solve this?</p>
"
351440,37986,2008-12-09T00:33:01Z,1,Determine record in multi record html form,"<p>In a html form, I'm displaying multiple records from a table, ready for update.</p>

<p>Right now I use: <code>name=&lt;column-name&gt;_&lt;pk-id&gt; value=&lt;value&gt;</code> for the fields.
Then in my python-script I go for:</p>

<pre><code>for key in form.keys():
    if key.startswith('&lt;name-A&gt;_'):
        update &lt;table&gt; set &lt;name-A&gt; = &lt;value&gt; where pk=&lt;pk-id&gt;
    if key.startswith('&lt;name-B&gt;_'):
        update &lt;table&gt; set &lt;name-B&gt; = &lt;value&gt; where pk=&lt;pk-id&gt;
</code></pre>

<p>Is there a more 'organic' way to handle multi-record forms?</p>
"
351456,26659,2008-12-09T00:48:28Z,0,How do I get data from stdin using os.system(),"<p>The only reliable method that I a have found for using a script to download text from wikipedia is with cURL. So far the only way I have for doing that is to call <code>os.system()</code>. Even though the output appears properly in the python shell I can't seem to the function it to return anything other than the exit code(<code>0</code>). Alternately somebody could show be how to properly use <code>urllib</code>.</p>
"
351656,3594,2008-12-09T02:57:49Z,9,"How do I mock an IMAP server in Python, despite extreme laziness?","<p>I'm curious to know if there is an easy way to mock an IMAP server (a la the <code>imaplib</code> module) in Python, <em>without</em> doing a lot of work.</p>

<p>Is there a pre-existing solution? Ideally I could connect to the existing IMAP server, do a dump, and have the mock server run off the real mailbox/email structure.</p>

<p>Some background into the laziness: I have a nasty feeling that this small script I'm writing will grow over time and would <em>like</em> to create a proper testing environment, but given that it might <em>not</em> grow over time, I don't want to do much work to get the mock server running.</p>
"
351760,52490,2008-12-09T04:14:45Z,1,Python method arguments with spaces,"<p>I would like to create a simple file format/DSL which would allow my users to input data.  My system is in python and using python's parser is appealing. 
Syntax like this for defining a data element seems quite convenient.</p>

<pre><code>Allocation(Param1 = Val1, Param2 = Val2 )
</code></pre>

<p>However, it does not support param names with spaces.</p>

<pre><code>Allocation(Param 1 = Val1, Param 2 = Val2 )
</code></pre>

<p>Python parser friendly versions can look as follows, but not very user friendly.</p>

<pre><code>Allocation((""Param 1"",Val1), (""Param 2"",Val1) )
Allocation(**{""Param 1"":Val1, ""Param 2"":Val1} )
</code></pre>

<p>Is there a way to make this more readable in python?</p>
"
351821,16584,2008-12-09T04:53:58Z,1,destroying a Toplevel tk window in python,"<p>I was trying to write code that would auto-close a Toplevel Tk window in Python.</p>

<p>I ended up getting it to work, but ran into a little problem along the way that I wasn't able to figure out.</p>

<p>The second two buttons work, but the first one doesn't and I don't understand why...</p>

<p>Any ideas?</p>

<pre><code>from Tkinter import *

root = Tk()
def doDestroy ():
    TL.destroy()

TL = Toplevel()
TL.b = Button (TL, text=""lambda destroy"", command=lambda: TL.destroy)
TL.b.pack()

TL.b2 = Button (TL, text=""callback destroy"", command=doDestroy)
TL.b2.pack()

de = lambda: TL.destroy()
TL.b3 = Button (TL, text=""lambda that works"", command=de)
TL.b3.pack()
root.mainloop()
</code></pre>
"
351927,3594,2008-12-09T06:07:50Z,7,Python imaplib Gmail authenticate failure,"<p>I just ran into an issue with Python's imaplib and Gmail's authentication mechanism:</p>

<pre><code>&gt;&gt;&gt; import imaplib
&gt;&gt;&gt; imap = imaplib.IMAP4_SSL('imap.gmail.com', 993)
&gt;&gt;&gt; imap.authenticate('bobdole@gmail.com', 'Bob Dole likes your style!')
Traceback (most recent call last):
  ...
imaplib.error: AUTHENTICATE command error: BAD ['TODO (not supported yet) 31if3458825wff.5']
</code></pre>

<p>If authentication is unsupported, how does one log in?</p>
"
352076,37984,2008-12-09T08:06:41Z,0,Most pythonic form for mapping a series of statements?,"<p>This is something that has bugged me for some time. I learnt Haskell before I learnt Python, so I've always been fond of thinking of many computations as a mapping onto a list. This is beautifully expressed by a list comprehension (I'm giving the pythonic version here):</p>

<pre><code>result = [ f(x) for x in list ]
</code></pre>

<p>In many cases though, we want to execute more than a single statement on x, say:</p>

<pre><code>result = [ f(g(h(x))) for x in list ]
</code></pre>

<p>This very quickly gets clunky, and difficult to read.</p>

<p>My normal solution to this is to expand this back into a for loop:</p>

<pre><code>result = []
for x in list:
  x0 = h(x)
  x1 = g(x0)
  x2 = f(x1)
  result.append(x2)
</code></pre>

<p>One thing about this that bothers me no end is having to initialize the empty list 'result'. It's a triviality, but it makes me unhappy. I was wondering if there were any alternative equivalent forms. One way may be to use a local function(is that what they're called in Python?)</p>

<pre><code>def operation(x):
  x0 = h(x)
  x1 = g(x0)
  x2 = f(x1)
  return x2
result = [ operation(x) for x in list ]
</code></pre>

<p>Are there any particular advantages/disadvantages to either of the two forms above? Or is there perhaps a more elegant way?</p>
"
352079,37575,2008-12-09T08:09:07Z,3,How to adding middleware to Appengine's webapp framework?,"<p>Im using the appengine webapp framework (<a href=""http://code.google.com/appengine/docs/webapp/"" rel=""nofollow"">link</a>).  Is it possible to add Django middleware? I cant find any examples.  Im currently trying to get the firepython middleware to work (<a href=""http://github.com/woid/firepython/tree/master"" rel=""nofollow"">link</a>).</p>
"
352340,2220518,2008-12-09T10:34:14Z,1,Return file from python module,"<p>Edit: How to return/serve a file from a python controller (back end) over a web server, with the file_name? as suggested by @JV</p>
"
352478,18909,2008-12-09T11:42:47Z,25,Capitalize a string,"<p>Does anyone know of a really simple way of capitalizing just the first letter of a string, regardless of the capitalization of the rest of the string?</p>

<p>For example:</p>

<pre><code>asimpletest -&gt; Asimpletest
aSimpleTest -&gt; ASimpleTest
</code></pre>

<p>I would like to be able to do all string lengths as well.</p>
"
352537,115,2008-12-09T12:01:30Z,17,Extending builtin classes in python,"<p>How can I extend a builtin class in python?
I would like to add a method to the str class.<br />
I've done some searching but all I'm finding is older posts, I'm hoping someone knows of something newer.</p>
"
352670,12030,2008-12-09T13:15:00Z,43,Weighted random selection with and without replacement,"<p>Recently I needed to do weighted random selection of elements from a list, both with and without replacement. While there are well known and good algorithms for unweighted selection, and some for weighted selection without replacement (such as modifications of the resevoir algorithm), I couldn't find any good algorithms for weighted selection with replacement. I also wanted to avoid the resevoir method, as I was selecting a significant fraction of the list, which is small enough to hold in memory.</p>

<p>Does anyone have any suggestions on the best approach in this situation? I have my own solutions, but I'm hoping to find something more efficient, simpler, or both.</p>
"
352837,5949,2008-12-09T14:10:18Z,11,How to add file extensions based on file type on Linux/Unix?,"<p>This is a question regarding Unix shell scripting (any shell), but any other ""standard"" scripting language solution would also be appreciated:</p>

<p>I have a directory full of files where the filenames are hash values like this:</p>

<pre><code>fd73d0cf8ee68073dce270cf7e770b97
fec8047a9186fdcc98fdbfc0ea6075ee
</code></pre>

<p>These files have different original file types such as png, zip, doc, pdf etc.</p>

<p>Can anybody provide a script that would rename the files so they get their appropriate file extension, probably based on the output of the <code>file</code> command?</p>

<h2>Answer:</h2>

<p><a href=""http://stackoverflow.com/questions/352837/how-to-add-file-extensions-based-on-file-type-on-linuxunix#352973"">J.F. Sebastian's</a> script will work for both ouput of the filenames as well as the actual renaming.</p>
"
353148,370899,2008-12-09T15:35:15Z,1,Making Python default to another version installed on a shared host,"<p>I am on a shared host and can not change the symbolic link to Python2.4, it defaults to 2.3. I tried creating a sym link in the director I would be working on to 2.4, but it seems the the 'global' python interpreter under /usr/bin/python take presedence unless I run it as ./python. What alternative ways are there to override this behaviour?</p>
"
353152,16511,2008-12-09T15:35:58Z,5,How to work with very long strings in Python?,"<p>I'm tackling project euler's <a href=""http://projecteuler.net/index.php?section=problems&amp;id=220"" rel=""nofollow"">problem 220</a> (looked easy, in comparison to some of the 
others - thought I'd try a higher numbered one for a change!)</p>

<p>So far I have:</p>

<pre><code>D = ""Fa""

def iterate(D,num):
    for i in range (0,num):
    	D = D.replace(""a"",""A"")
    	D = D.replace(""b"",""B"")
    	D = D.replace(""A"",""aRbFR"")
    	D = D.replace(""B"",""LFaLb"")
    return D

instructions = iterate(""Fa"",50)

print instructions
</code></pre>

<p>Now, this works fine for low values, but when you put it to repeat higher then you just get a ""Memory error"". Can anyone suggest a way to overcome this? I really want a string/file that contains instructions for the next step.</p>
"
353297,NA,2008-12-09T16:09:12Z,3,How to blend drawn circles with pygame,"<p>I am trying to create an application like the one here:</p>

<p><a href=""http://www.eigenfaces.com/"" rel=""nofollow"">http://www.eigenfaces.com/</a></p>

<p>Basically lots of overlapping circles drawn with pygame. I cannot figure out how the blend the circles to make them translucent. That is to have overlapping colors show through. My code so far is this:</p>

<pre><code>import sys, random, time
import pygame
from pygame.locals import *
from pygame import draw

rand = random.randint

pygame.init( )

W = 320
H = 320
size = (W, H)

screen = pygame.display.set_mode(size)

run = True
while 1:

    for event in pygame.event.get():
        if event.type == pygame.KEYDOWN: 
            if event.key == pygame.K_SPACE :
                run = not run
            else:
                sys.exit()
    if run:
        xc = rand(1, W)
        yc = rand(1, H)
        rc = rand(1, 25)

        red = rand(1, 255)
        grn = rand(1, 255)
        blu = rand(1, 255)

        draw.circle(screen, (red, grn, blu, 200), (xc, yc), rc, 0)

        pygame.display.flip()
</code></pre>
"
353489,12870,2008-12-09T17:00:26Z,0,Cleaner way to query on a dynamic number of columns in Django?,"<p>In my case, I have a number of column names coming from a form. I want to filter to make sure they're all true. Here's how I currently do it:</p>

<pre><code>for op in self.cleaned_data['options']:
    cars = cars.filter((op, True))
</code></pre>

<p>Now it <em>works</em> but there are are a possible ~40 columns to be tested and it therefore doesn't appear very efficient to keep querying.</p>

<p>Is there a way I can condense this into one filter query?</p>
"
353571,33383,2008-12-09T17:25:23Z,23,Beginner: Trying to understand how apps interact in Django,"<p>I just got done working through the Django tutorials for the second time, and am understanding things much more clearly now. However, I'm still unclear how apps inside a site interact with one another.</p>

<p>For example, lets say I'm writing a blog application (a rather popular activity, apparently). Blog posts and comments tend to go together, and yet they are distinct enough that they should be built into separate apps, as is the general philosophy of Djano development.</p>

<p>Consider the following example. In reality I would not actually write the comment app myself, as good code for that already exists on the web, but this is for demonstration/practice purposes:</p>

<p><strong>mysite/blog/models.py</strong></p>

<pre><code>from django.db import models

class post(models.Model):
    title = models.CharField(max_length=200)
    author = models.CharField(max_length=200)
    content = models.TextField()
</code></pre>

<p><strong>mysite/comments/models.py</strong></p>

<pre><code>from django.db import models
from mysite.blog.models import post

class comment(models.Model):
    id = models.AutoField()
    post = models.ForeignKey(post)
    author = models.CharField(max_length=200)
    text = models.TextField()
</code></pre>

<p>Is what I wrote above, importing a model from another app and setting it as a foreign key, how Django apps interact? Or is there a different/better method for the apps that comprise a site to interact?</p>

<p><strong>Update</strong><br>
Per the recommendation in one response, I'm reading the documentation for contrib.contenttypes. If I'm reading this correctly, I could rewrite my example comment app like this:  </p>

<pre><code>from django.db import models  
from django.contrib.contenttypes.models import ContentType
from django.contrib.contentypes import generic

class comment(models.Model):  
    id = models.AutoField()  
    author = models.CharField(max_length=200)  
    text = models.TextField()  
    content_type = models.ForeignKey(ContentType)  
    content_object = generic.GenericForeignKey(content_type, id)  
</code></pre>

<p>Would this be correct?</p>
"
354038,40115,2008-12-09T20:03:42Z,872,How do I check if a string is a number (float) in Python?,"<p>What is the best possible way to check if a string can be represented as a number in Python? </p>

<p>The function I currently have right now is:</p>

<pre><code>def is_number(s):
    try:
        float(s)
        return True
    except ValueError:
        return False
</code></pre>

<p>Which, not only is ugly and slow, seems clunky. However I haven't found a better method because calling <code>float</code> in the main function is even worse. </p>
"
354097,3045,2008-12-09T20:21:40Z,40,How to configure vim to not put comments at the beginning of lines while editing python files,"<p>When I add a # in insert mode on an empty line in Vim while editing python files, vim moves the # to the beginning of the line, but I would like the # to be inserted at the tab level where I entered it.</p>

<p>For example, when writing this in vim</p>

<pre><code>for i in range(10):
    #
</code></pre>

<p>the # does not stay there where I entered it.</p>

<p>It is moved like so, by vim.</p>

<pre><code>for i in range(10):
#
</code></pre>

<p>Does anyone know of a configuration item in vim that would change this?</p>

<p>If it helps, I am using Ubuntu 8.10.</p>
"
354124,36131,2008-12-09T20:29:40Z,44,"Are there statistical studies that indicates that Python is ""more productive""?","<p>If I do a google search with the string  ""python productive"" the first results is a page <a href=""http://www.ferg.org/projects/python_java_side-by-side.html"">http://www.ferg.org/projects/python_java_side-by-side.html</a> claiming that ""python is more productive of Java"". Many Python programmers that I have talked with claim that Python is ""more productive"", and most of them report the arguments listed in the above cited article.</p>

<p>The article could be summarized in these stametements:</p>

<ol>
<li>Python allow you write terser code  </li>
<li>A more terser is written in lesser time </li>
<li><strong>Then</strong> Python is more productive</li>
</ol>

<p>But the article does not reports any statisticals evidences that support the hypothesis that a more terse code could be developed (not written) in lesser time.</p>

<p>Do you know if there any article that reports statistical evidences that Python is more productive of something else?</p>

<h2>Update:</h2>

<p>I'm not interested in adovacy arguments. Please do not tell why something <em>should</em> be more productive of something else. I'm interested in studies that measures that the use of something is related or not related to the productivity.</p>

<p>I'm interested in statisticals evidences. If you claim that the productivity depends from many other factors then there should be a statistical study that proves that the language choiche is not statistically correlated to the productivity.</p>
"
354370,14128,2008-12-09T21:52:26Z,0,Adding a SOAP header to a SOAPpy request,"<p>Does anyone know how to do this? I need to add a header of the form:</p>

<p>
  
    value1
    value2
  
</p>
"
354421,41718,2008-12-09T22:07:10Z,9,How is ** implemented in Python?,"<p>I'm wondering where I find the source to show how the operator ** is implemented in Python.  Can someone point me in the right direction?  </p>
"
354755,28804,2008-12-10T00:43:29Z,2,How can I get the number of records that reference a particular foreign key in Django?,"<p>I'm working on a blog application in Django. Naturally, I have models set up such that there are Posts and Comments, and a particular Post may have many Comments; thus, Post is a ForeignKey in the Comments model.</p>

<p>Given a Post object, is there an easy way (ideally, through a method call) to find out how many Comments belong to the Post?</p>
"
354883,37984,2008-12-10T01:55:50Z,435,How do you return multiple values in Python?,"<p>The canonical way to return multiple values in languages that support it is often <a href=""http://stackoverflow.com/questions/38508/whats-the-best-way-to-return-multiple-values-from-a-function-in-python"">tupling</a>. </p>

<h3>Option: Using a tuple</h3>

<p>Consider this trivial example:</p>

<pre><code>def f(x):
  y0 = x + 1
  y1 = x * 3
  y2 = y0 ** y3
  return (y0,y1,y2)
</code></pre>

<p>However, this quickly gets problematic as the number of values returned increases. What if you want to return four or five values? Sure, you could keep tupling them, but it gets easy to forget which value is where. It's also rather ugly to unpack them wherever you want to receive them.</p>

<h3>Option: Using a dictionary</h3>

<p>The next logical step seems to be to introduce some sort of 'record notation'. In python, the obvious way to do this is by means of a <code>dict</code>. </p>

<p>Consider the following:</p>

<pre><code>def g(x):
  y0 = x + 1
  y1 = x * 3
  y2 = y0 ** y3
  return {'y0':y0, 'y1':y1 ,'y2':y2 }
</code></pre>

<p>(edit- Just to be clear, y0, y1 and y2 are just meant as abstract identifiers. As pointed out, in practice you'd use meaningful identifiers)</p>

<p>Now, we have a mechanism whereby we can project out a particular member of the returned object. For example, </p>

<pre><code>result['y0']
</code></pre>

<h3>Option: Using a class</h3>

<p>However, there is another option. We could instead return a specialized structure. I've framed this in the context of Python, but I'm sure it applies to other languages as well. Indeed, if you were working in C this might very well be your only option. Here goes:</p>

<pre><code>class ReturnValue(object):
  def __init__(self, y0, y1, y2):
     self.y0 = y0
     self.y1 = y1
     self.y2 = y2

def g(x):
  y0 = x + 1
  y1 = x * 3
  y2 = y0 ** y3
  return ReturnValue(y0, y1, y2)
</code></pre>

<p>In python the previous two are perhaps very similar in terms of plumbing- After all <code>{ y0, y1, y2 }</code> just end up being entries in the internal <code>__dict__</code> of the <code>ReturnValue</code>.</p>

<p>There is one additional feature provided by Python though for tiny objects, the <code>__slots__</code> attribute. The class could be expressed as:</p>

<pre><code>class ReturnValue(object):
  __slots__ = [""y0"", ""y1"", ""y2""]
  def __init__(self, y0, y1, y2):
     self.y0 = y0
     self.y1 = y1
     self.y2 = y2
</code></pre>

<p>From the <a href=""http://www.network-theory.co.uk/docs/pylang/__slots__.html"">Python Reference Manual</a>:</p>

<blockquote>
  <p>The <code>__slots__</code> declaration takes a sequence of instance variables and reserves just enough space in each instance to hold a value for each variable. Space is saved because <code>__dict__</code> is not created for each instance.</p>
</blockquote>

<h3>Option: Using a list</h3>

<p>Another suggestion which I'd overlooked comes from Bill the Lizard:</p>

<pre><code>def h(x):
  result = [x + 1]
  result.append(x * 3)
  result.append(y0 ** y3)
  return result
</code></pre>

<p>This is my least favorite method though. I suppose I'm tainted by exposure to Haskell, but the idea of mixed-type lists has always felt uncomfortable to me. In this particular example the list is -not- mixed type, but it conceivably could be. A list used in this way really doesn't gain anything with respect to the tuple as far as I can tell. The only real difference between lists and tuples in Python is that lists are <a href=""http://docs.python.org/library/stdtypes.html#typesseq-mutable"">mutable</a>, wheras tuples are not. I personally tend to carry over the conventions from functional programming: use lists for any number of elements of the same type, and tuples for a fixed number of elements of predetermined types.</p>

<h1>Question</h1>

<p>After the lengthy preamble, comes the inevitable question. Which method (do you think) is best?</p>

<p>I've typically found myself going the dictionary route because it involves less set-up work. From a types perspective however, you might be better off going the class route, since that may help you avoid confusing what a dictionary represents. On the other hand, there are some in the Python community that feel <a href=""http://www.canonical.org/~kragen/isinstance/"">implied interfaces should be preferred to explicit interfaces</a>, at which point the type of the object really isn't relevant, since you're basically relying on the convention that the same attribute will always have the same meaning. </p>

<p>So, how do -you- return multiple values in Python?</p>
"
355135,21537,2008-12-10T05:10:48Z,0,mssql handles line returns rather awkwardly,"<p>Here is the problem: </p>

<p>for your reference:</p>

<p><img src=""http://i.stack.imgur.com/mmrNH.jpg"" alt=""http://i.stack.imgur.com/mmrNH.jpg""></p>

<p>database entries 1,2 and 3 are made using jython 2.2.1 using jdbc1.2.
database entry 4 is made using vb the old to be replace program using odbc.</p>

<p>We have found that if I copy and paste both jython and vb MailBody entries to wordpad directly from that SQL Server Enterprise Manager software it outputs the format perfectly with correct line returns. if I compare the bytes of each file with a hex editor or KDiff3 they are binary identically the same.</p>

<p>There is a 3rd party program which consumes this data. Sadly that 3rd party program reads the data and for entries 1 to 3 it displays the data without line returns. though for entry 4 it correctly formats the text. As futher proof we can see in the picture, the data in the database is displayed differently.
Somehow the line returns are preserved in the database for the vb entries but the jython entries they are overlooked. if I click on the 'MailBody' field of entry 4 i can press down i can see the rest of the email. Whereas the data for jython is displayed in one row.</p>

<p>What gives, what am i missing, and how do I handle this?
Here is a snippet of the code where I actually send it to the database.</p>

<p>EDIT: FYI: please disregard the discrepancies in the 'Processed' column, it is irrelevant.
EDIT: what i want to do is make the jython program input the data in the same way as the vb program. So that the 3rd party program will come along and correctly display the data.
so what it will look like is every entry in 'MailBody' will display ""This is a testing only!"" then next line ""etc etc"" so if I was to do a screendump all entries would resemble database entry 4.</p>

<p><em>SOLVED</em> </p>

<p>add _force_CRLF to the mix:</p>

<pre><code>def _force_CRLF(self, data):
    '''Make sure data uses CRLF for line termination.
    Nicked the regex from smtplib.quotedata. '''
    print data
    newdata = re.sub(r'(?:\r\n|\n|\r(?!\n))', ""\r\n"", data)
    print newdata
    return newdata

def _execute_insert(self):
    try:
        self._stmt=self._con.prepareStatement(\
            ""INSERT INTO EmailHdr (EntryID, MailSubject, MailFrom, MailTo, MailReceive, MailSent, AttachNo, MailBody)\
             VALUES (?, ?, ?, ?, ?, ?, ?, cast(? as varchar ("" + str(BODY_FIELD_DATABASE) + "")))"")
        self._stmt.setString(1,self._emailEntryId)
        self._stmt.setString(2,self._subject)
        self._stmt.setString(3,self._fromWho)
        self._stmt.setString(4,self._toWho)
        self._stmt.setString(5,self._format_date(self._emailRecv))
        self._stmt.setString(6,self._format_date(self._emailSent))
        self._stmt.setString(7,str(self._attachmentCount))
        self._stmt.setString(8,self._force_CRLF(self._format_email_body()))
        self._stmt.execute()
        self._prepare_inserting_attachment_data()
        self._insert_attachment_data()
    except:
        raise

def _format_email_body(self):
    if not self._emailBody:
        return ""could not extract email body""
    if len(self._emailBody) &gt; BODY_TRUNCATE_LENGTH:
        return self._clean_body(self._emailBody[:BODY_TRUNCATE_LENGTH])
    else:
        return self._clean_body(self._emailBody)

def _clean_body(self,dirty):
    '''this method simply deletes any occurrence of an '=20' that plagues my output after much testing this is not related to the line return issue, even if i comment it out I still have the problem.''' 
    dirty=str(dirty)
    dirty=dirty.replace(r""=20"","""")
    return r""%s""%dirty
</code></pre>
"
355539,9106,2008-12-10T09:49:39Z,37,A get() like method for checking for Python attributes,"<p>If I had a dictionary <code>dict</code> and I wanted to check for <code>dict['key']</code> I could either do so in a <code>try</code> block (bleh!) or use the <code>get()</code> method, with <code>False</code> as a default value.</p>

<p>I'd like to do the same thing for <code>object.attribute</code>. That is, I already have object to return <code>False</code> if it hasn't been set, but then that gives me errors like</p>

<blockquote>
  <p>AttributeError: 'bool' object has no attribute 'attribute'</p>
</blockquote>
"
355739,1925263,2008-12-10T11:23:19Z,1,Save a deque in a text file,"<p>I am writing a crawler in Python, in order to make Ctrl+C not to cause my crawler to start over in next run, I need to save the processing deque in a text file (one item per line) and update it every iteration, the update operation needs to be super fast. In order not to reinvent the wheel, I am asking if there is an established module to do this?</p>
"
356090,44988,2008-12-10T13:49:19Z,17,How to compute the nth root of a very big integer,"<p>I need a way to compute the nth root of a long integer in Python. </p>

<p>I tried <code>pow(m, 1.0/n)</code>, but it doesn't work:</p>

<blockquote>
  <p>OverflowError: long int too large to convert to float</p>
</blockquote>

<p>Any ideas?</p>

<p>By long integer I mean REALLY long integers like:</p>

<blockquote>
  <p>11968003966030964356885611480383408833172346450467339251
  196093144141045683463085291115677488411620264826942334897996389
  485046262847265769280883237649461122479734279424416861834396522
  819159219215308460065265520143082728303864638821979329804885526
  557893649662037092457130509980883789368448042961108430809620626
  059287437887495827369474189818588006905358793385574832590121472
  680866521970802708379837148646191567765584039175249171110593159
  305029014037881475265618958103073425958633163441030267478942720
  703134493880117805010891574606323700178176718412858948243785754
  898788359757528163558061136758276299059029113119763557411729353
  915848889261125855717014320045292143759177464380434854573300054
  940683350937992500211758727939459249163046465047204851616590276
  724564411037216844005877918224201569391107769029955591465502737
  961776799311859881060956465198859727495735498887960494256488224
  613682478900505821893815926193600121890632</p>
</blockquote>
"
356138,44992,2008-12-10T14:04:51Z,2,Python FastCGI under IIS - stdout writing problems,"<p>I'm having a very peculiar problem in my Python FastCGI code - sys.stdout has a file descriptor of '-1', so I can't write to it.
I'm checking this at the first line of my program, so I know it's not any of my code changing it.</p>

<p>I've tried <code>sys.stdout = os.fdopen(1, 'w')</code>, but anything written there won't get to my browser.</p>

<p>The same application works without difficulty under Apache.</p>

<p>I'm using the Microsoft-provided FastCGI extension for IIS documented here: <a href=""http://learn.iis.net/page.aspx/248/configuring-fastcgi-extension-for-iis60/"" rel=""nofollow"">http://learn.iis.net/page.aspx/248/configuring-fastcgi-extension-for-iis60/</a></p>

<p>I am using these settings in fcgiext.ini:</p>

<pre>
    ExePath=C:\Python23\python.exe
    Arguments=-u C:\app\app_wsgi.py
    FlushNamedPipe=1
    RequestTimeout=45
    IdleTimeout=120
    ActivityTimeout=30
</pre>

<p>Can anyone tell what's wrong or tell me where I should look to find out?</p>

<p>All suggestions greatly appreciated...</p>
"
356452,14716,2008-12-10T15:22:41Z,2,Minimal Python build for my application's scripting needs?,"<p>what are your advices on building a very minimalistic version of Python(2.x) for my application's scripting needs. </p>

<p>My main motive here is to keep the foot print (both memory and disk wise) as low as possible so that my native application won't suffer from any major performance hit. Even the Python DLL size is in consideration because of the possibility of increasing boot up time of my application.</p>

<p>Can we go as low as <a href=""http://www.lua.org/"" rel=""nofollow"">Lua</a> or other lightweight solutions?</p>
"
356483,32933,2008-12-10T15:33:09Z,6,Python regex findall numbers and dots,"<p>I'm using re.findall() to extract some version numbers from an HTML file:</p>

<pre><code>&gt;&gt;&gt; import re
&gt;&gt;&gt; text = ""&lt;table&gt;&lt;td&gt;&lt;a href=\""url\""&gt;Test0.2.1.zip&lt;/a&gt;&lt;/td&gt;&lt;td&gt;Test0.2.1&lt;/td&gt;&lt;/table&gt; Test0.2.1""
&gt;&gt;&gt; re.findall(""Test([\.0-9]*)"", text)
['0.2.1.', '0.2.1', '0.2.1']
</code></pre>

<p>but I would like to only get the ones that do not end in a dot.
The filename might not always be .zip so I can't just stick .zip in the regex.</p>

<p>I wanna end up with:</p>

<pre><code>['0.2.1', '0.2.1']
</code></pre>

<p>Can anyone suggest a better regex to use? :)</p>
"
356638,13787,2008-12-10T16:17:25Z,9,How would you parse indentation (python style)?,"<p>How would you define your parser and lexer rules to parse a language that uses indentation for defining scope.</p>

<p>I have already googled and found a clever approach for parsing it by generating INDENT and DEDENT tokens in the lexer.</p>

<p>I will go deeper on this problem and post an answer if I come to something interesting, but I would like to see other approaches to the problem.</p>

<p>EDIT:
As Charlie pointed out, <a href=""http://stackoverflow.com/questions/232682/how-would-you-go-about-implementing-off-side-rule"">there is already another thread very similar if not the same.</a> Should my post be deleted?</p>
"
356718,11666,2008-12-10T16:42:08Z,14,How to handle constructors or methods with a different set (or type) of arguments in Python?,"<p>Is there a way in Python, to have more than one constructor or more than one method with the <em>same name</em>, who differ in the <em>number of arguments</em> they accept or the <em>type(s) of one or more argument(s)</em>?</p>

<p>If not, what would be the best way to handle such situations?</p>

<p>For an example I made up a color class. <em>This class should only work as a basic example to discuss this</em>, there is lot's of unnecessary and/or redundant stuff in there.</p>

<p>It would be nice, if I could call the constructor with different objects (a list, an other color object or three integers...) and the constructor handles them accordingly. In this basic example it works in some cases with * args and * * kwargs, but using class methods is the only general way I came up with. What would be a ""<strong>best practice</strong>"" like solution for this?</p>

<p>The constructor aside, if I would like to implement an _ _ <strong>add</strong> _ _ method too, how can I get this method to accept all of this: A plain integer (which is added to all values), three integers (where the first is added to the red value and so forth) or another color object (where both red values are added together, etc.)?</p>

<p><strong>EDIT</strong></p>

<ul>
<li><p>I added an <em>alternative</em> constructor (initializer, _ _ <strong>init</strong> _ _) that basicly does all the stuff I wanted.</p></li>
<li><p>But I stick with the first one and the factory methods. Seems clearer.</p></li>
<li><p>I also added an _ _ <strong>add</strong> _ _, which does all the things mentioned above but I'm not sure if it's <em>good style</em>. I try to use the iteration protocol and fall back to ""single value mode"" instead of checking for specific types. Maybe still ugly tho.</p></li>
<li><p>I have taken a look at _ _ <strong>new</strong> _ _, thanks for the links.</p></li>
<li><p>My first quick try with it fails: I filter the rgb values from the * args and * * kwargs (is it a class, a list, etc.) then call the superclass's _ _ new _ _ with the right args (just r,g,b) to pass it along to init. The call to the 'Super(cls, self)._ _ new _ _ (....)' works, but since I generate and return the same object as the one I call from (as intended), all the original args get passed to _ _ init _ _ (working as intended), so it bails. </p></li>
<li><p>I could get rid of the _ _ init _ _ completly and set the values in the _ _ new _ _ but I don't know... feels like I'm abusing stuff here ;-) I should take a good look at metaclasses and new first I guess.</p></li>
</ul>

<p>Source:</p>

<pre><code>#!/usr/bin/env python
# -*- coding: UTF-8 -*-

class Color (object):

  # It's strict on what to accept, but I kinda like it that way.
  def __init__(self, r=0, g=0, b=0):
    self.r = r
    self.g = g
    self.b = b

  # Maybe this would be a better __init__?
  # The first may be more clear but this could handle way more cases...
  # I like the first more though. What do you think?
  #
  #def __init__(self, obj):
  #  self.r, self.g, self.b = list(obj)[:3]

  # This methods allows to use lists longer than 3 items (eg. rgba), where
  # 'Color(*alist)' would bail
  @classmethod
  def from_List(cls, alist):
    r, g, b = alist[:3]
    return cls(r, g, b)

  # So we could use dicts with more keys than rgb keys, where
  # 'Color(**adict)' would bail
  @classmethod
  def from_Dict(cls, adict):
    return cls(adict['r'], adict['g'], adict['b'])

  # This should theoreticaly work with every object that's iterable.
  # Maybe that's more intuitive duck typing than to rely on an object
  # to have an as_List() methode or similar.
  @classmethod
  def from_Object(cls, obj):
    return cls.from_List(list(obj))

  def __str__(self):
    return ""&lt;Color(%s, %s, %s)&gt;"" % (self.r, self.g, self.b)

  def _set_rgb(self, r, g, b):
    self.r = r
    self.g = g
    self.b = b
  def _get_rgb(self):
    return  (self.r, self.g, self.b)
  rgb = property(_get_rgb, _set_rgb)

  def as_List(self):
    return [self.r, self.g, self.b]

  def __iter__(self):
    return (c for c in (self.r, self.g, self.b))

  # We could add a single value (to all colorvalues) or a list of three
  # (or more) values (from any object supporting the iterator protocoll)
  # one for each colorvalue
  def __add__(self, obj):
    r, g, b = self.r, self.g, self.b
    try:
      ra, ga, ba = list(obj)[:3]
    except TypeError:
      ra = ga = ba = obj
    r += ra
    g += ga
    b += ba
    return Color(*Color.check_rgb(r, g, b))

  @staticmethod
  def check_rgb(*vals):
    ret = []
    for c in vals:
      c = int(c)
      c = min(c, 255)
      c = max(c, 0)
      ret.append(c)
    return ret

class ColorAlpha(Color):

  def __init__(self, r=0, g=0, b=0, alpha=255):
    Color.__init__(self, r, g, b)
    self.alpha = alpha

  def __str__(self):
    return ""&lt;Color(%s, %s, %s, %s)&gt;"" % (self.r, self.g, self.b, self.alpha)

  # ...

if __name__ == '__main__':
  l = (220, 0, 70)
  la = (57, 58, 61, 255)
  d = {'r': 220, 'g': 0, 'b':70}
  da = {'r': 57, 'g': 58, 'b':61, 'a':255}
  c = Color(); print c # &lt;Color(0, 0, 0)&gt;
  ca = ColorAlpha(*la); print ca # &lt;Color(57, 58, 61, 255)&gt;
  print '---'
  c = Color(220, 0, 70); print c # &lt;Color(220, 0, 70)&gt;
  c = Color(*l); print c # &lt;Color(220, 0, 70)&gt;
  #c = Color(*la); print c # -&gt; Fail
  c = Color(**d); print c # &lt;Color(220, 0, 70)&gt;
  #c = Color(**da); print c # -&gt; Fail
  print '---'
  c = Color.from_Object(c); print c # &lt;Color(220, 0, 70)&gt;
  c = Color.from_Object(ca); print c # &lt;Color(57, 58, 61, 255)&gt;
  c = Color.from_List(l); print c # &lt;Color(220, 0, 70)&gt;
  c = Color.from_List(la); print c # &lt;Color(57, 58, 61, 255)&gt;
  c = Color.from_Dict(d); print c # &lt;Color(220, 0, 70)&gt;
  c = Color.from_Dict(da); print c # &lt;Color(57, 58, 61, 255)&gt;
  print '---'
  print 'Check =', Color.check_rgb('1', 0x29a, -23, 40)
  # Check = [1, 255, 0, 40]
  print '%s + %s = %s' % (c, 10, c + 10)
  # &lt;Color(57, 58, 61)&gt; + 10 = &lt;Color(67, 68, 71)&gt;
  print '%s + %s = %s' % (c, ca, c + ca)
  # &lt;Color(57, 58, 61)&gt; + &lt;Color(57, 58, 61, 255)&gt; = &lt;Color(114, 116, 122)&gt;
</code></pre>
"
356830,3314,2008-12-10T17:16:31Z,6,"Pexpect, running ssh-copy-id is hanging when trying to spawn a second process","<p>I'm doing a Python script where I need to spawn several ssh-copy-id processes, and they need for me to type in a password, so i'm using PExpect.</p>

<p>I have basically this:</p>

<pre><code>child = pexpect.spawn('command')
child.expect('password:')
child.sendline('the password')
</code></pre>

<p>and then I want to spawn another process, I don't care about this one anymore, whether it ended or not.</p>

<pre><code>child = pexpect.spawn('command2')
child.expect('password:')
child.sendline('the password')
</code></pre>

<p>And the code is hanging at the second ""spawn""</p>

<p>However, if I comment out the first call, the second one works, so i'm guessing that the fact that the first one is still running or something is keeping it from working.</p>

<p>Now, the other thing I haven't been able to do is wait until the first one stops.
I've tried:<br />
child.close() - it hangs (both with True and False as parameters)
child.read(-1) - it hangs<br />
child.expect(pexpect.EOF) - it hangs.<br />
child.terminate() - it hangs  (both with True and False as parameters)</p>

<p>Any ideas on what could be happening?<br />
NOTE: I'm not a Python expert, and i have never used pexpect before, so ANY idea is more than welcome.</p>

<p>Thanks!</p>

<p><hr /></p>

<p>UPDATE: This is definitely related to ssh-copy-id, because with other processes, spawn works well even if they don't return.
Also, apparently ssh-copy-id never returns an EOF.</p>
"
357656,2010,2008-12-10T21:25:18Z,10,Proper way of cancelling accept and closing a Python processing/multiprocessing Listener connection,"<p>(I'm using the <a href=""http://developer.berlios.de/projects/pyprocessing"" rel=""nofollow"">pyprocessing</a> module in this example, but replacing processing with multiprocessing should probably work if you run <a href=""http://docs.python.org/library/multiprocessing.html"" rel=""nofollow"">python 2.6</a> or use the <a href=""http://code.google.com/p/python-multiprocessing/"" rel=""nofollow"">multiprocessing backport</a>)</p>

<p>I currently have a program that listens to a unix socket (using a processing.connection.Listener), accept connections and spawns a thread handling the request. At a certain point I want to quit the process gracefully, but since the accept()-call is blocking and I see no way of cancelling it in a nice way. I have one way that works here (OS X) at least, setting a signal handler and signalling the process from another thread like so:</p>

<pre><code>import processing
from processing.connection import Listener
import threading
import time
import os
import signal
import socket
import errno

# This is actually called by the connection handler.
def closeme():
    time.sleep(1)
    print 'Closing socket...'
    listener.close()
    os.kill(processing.currentProcess().getPid(), signal.SIGPIPE)

oldsig = signal.signal(signal.SIGPIPE, lambda s, f: None)

listener = Listener('/tmp/asdf', 'AF_UNIX')
# This is a thread that handles one already accepted connection, left out for brevity
threading.Thread(target=closeme).start()
print 'Accepting...'
try:
    listener.accept()
except socket.error, e:
    if e.args[0] != errno.EINTR:
        raise
# Cleanup here...
print 'Done...'
</code></pre>

<p>The only other way I've thought about is reaching deep into the connection (listener._listener._socket) and setting the non-blocking option...but that probably has some side effects and is generally really scary.</p>

<p>Does anyone have a more elegant (and perhaps even correct!) way of accomplishing this? It needs to be portable to OS X, Linux and BSD, but Windows portability etc is not necessary.</p>

<p><strong>Clarification</strong>:
Thanks all! As usual, ambiguities in my original question are revealed :)</p>

<ul>
<li>I need to perform cleanup after I have cancelled the listening, and I don't always want to actually exit that process.</li>
<li>I need to be able to access this process from other processes not spawned from the same parent, which makes Queues unwieldy</li>
<li>The reasons for threads are that:
<ul>
<li>They access a shared state. Actually more or less a common in-memory database, so I suppose it could be done differently.</li>
<li>I must be able to have several connections accepted at the same time, but the actual threads are blocking for something most of the time. Each accepted connection spawns a new thread; this in order to not block all clients on I/O ops.</li>
</ul></li>
</ul>

<p>Regarding threads vs. processes, I use threads for making my blocking ops non-blocking and processes to enable multiprocessing.</p>
"
357785,3045,2008-12-10T22:10:45Z,83,What is the recommended way to use Vim folding for Python code,"<p>I am interested in enabling code folding in Vim for Python code. I have noticed multiple ways to do so.</p>

<p>Does anyone have a preferred way to do Python code folding in Vim? I.e, </p>

<ul>
<li>Do you have a particular Vim plugin that you use and like?</li>
<li>Do you use manual folding or do you place markers in comments?</li>
<li>Any other recommended ways to do code folding for Python in Vim?</li>
</ul>
"
357810,44354,2008-12-10T22:20:07Z,1,A small question about python's variable scope,"<p>I am a beginner of python and have a question, very confusing for me.
If I define a function first but within the function I have to use a variable which is defined in another function below, can I do it like this? Or how can I import the return things of another function into a function?
for example:</p>

<pre><code>def hello(x,y):
    good=hi(iy,ix)
    ""then do somethings,and use the parameter'good'.""
    return something

def hi(iy,ix):
    ""code""
    return good
</code></pre>
"
357968,44354,2008-12-10T23:17:02Z,0,Problem with Python implementation of Conway's Game of Life,"<p>I am working on <a href=""http://en.wikipedia.org/wiki/Conway%27s_Game_of_Life"" rel=""nofollow"">Conway's Game of Life</a> currently and have gotten stuck. My code doesn't work.</p>

<p>When I run my code in GUI, it says:</p>

<pre> 
[[0 0 0 0]
 [0 1 1 0]
 [0 1 0 0]
 [0 0 0 0]]

Traceback (most recent call last):
  File ""C:\Users\Documents\Physics\Python\MainProject\conway.py"", line 53, in 
    b= apply_rules(a)
  File ""C:\Users\Documents\Physics\Python\MainProject\conway.py"", line 14, in apply_rules
    neighbours=number_neighbours(universe_array,iy,ix)
  File ""C:\Users\Documents\Physics\Python\MainProject\conway.py"", line 36, in number_neighbours
    neighbours+=1
UnboundLocalError: local variable 'neighbours' referenced before assignment
</pre>

<p>Here is my code:</p>

<pre><code>'''If a cell is dead at time T with exactly three live neighbours, the cell will be alive at T+1
If a cell is alive at time T with less than two living neighbours it dies at T+1
If a cell is alive at time T with more than three live neighbours it dies at T+1
If a cell is alive at time T with exactly two or three live neighbours it remains alive at T+1'''
import numpy


def apply_rules (universe_array):
    height, width = universe_array.shape
    # create a new array for t+1
    evolved_array = numpy.zeros((height, width),numpy.uint8)
    for iy in range(1, height-1):
        for ix in range(1,width-1):
            neighbours=number_neighbours(universe_array,iy,ix)
            if universe_array[iy,ix]==0 and neighbours==3:
                evolved_array[iy,ix]==1
            elif universe_array[iy,ix]==1 and neighbours&lt;2:
                evolved_array[iy,ix]==0
            elif universe_array[iy,ix]==1 and neighbours&gt;3:
                evolved_array[iy,ix]==0
            elif universe_array[iy,ix]==1 and neighbours==2 or neighbours==3:
                evolved_array[iy,ix]=universe_array[iy,ix]

    return evolved_array

def number_neighbours(universe_array,iy,ix):
    neighbours=0 #fixed this line,thanks:)
    if universe_array[iy-1,ix-1]==1:
            neighbours+=1
    if universe_array[iy,ix-1]==1:
            neighbours+=1
    if universe_array[iy+1,ix-1]==1:
            neighbours+=1
    if universe_array[iy-1,ix]==1:
            neighbours+=1
    if universe_array[iy+1,ix]==1:
            neighbours+=1
    if universe_array[iy-1,ix+1]==1:
            neighbours+=1
    if universe_array[iy,ix+1]==1:
            neighbours+=1
    if universe_array[iy+1,ix+1]==1:
            neighbours+=1
    else:
        neighbours=neighbours
    return neighbours

if __name__ == ""__main__"":
    a = numpy.zeros((4,4),numpy.uint8)
    a[1,1]=1
    a[1,2]=1
    a[2,1]=1
    print a
    b= apply_rules(a)
    print b
</code></pre>

<p>I am a beginner at Python, and I don't know how to fix the error. I am a little bit confused about <code>import ""neighbours""</code> to <code>function ""apply_rules""</code>, is that right way to do this?</p>
"
357997,36131,2008-12-10T23:26:57Z,28,Does Python have something like anonymous inner classes of Java?,"<p>In Java you can define a new class inline using anonymous inner classes. This is useful when you need to rewrite only a single method of the class.</p>

<p>Suppose that you want create a subclass of <code>OptionParser</code> that overrides only a single method (for example <code>exit()</code>). In Java you can write something like this:</p>

<pre><code>new OptionParser () {

    public void exit() {
        // body of the method
    }
};
</code></pre>

<p>This piece of code creates a anonymous class that extends <code>OptionParser</code> and override only the <code>exit()</code> method.</p>

<p>There is a similar idiom in Python? Which idiom is used in these circumstances?</p>
"
358189,40372,2008-12-11T01:15:41Z,5,Can I use chart modules with wxpython?,"<p>Is it possible to use any chart modules with wxpython? And are there any good ones out there?</p>

<p>I'm thinking of the likes of PyCha (<a href=""http://www.lorenzogil.com/projects/pycha/"">http://www.lorenzogil.com/projects/pycha/</a>) or any equivalent. Many modules seem to require PyCairo, but I can't figure out if I can use those with my wxpython app.</p>

<p>My app has a notebook pane, and I'd like to place the chart inside it. The chart has to be dynamic -- ie the user can choose what kind of data to view -- so I'm guessing modules that make chart images are out.</p>

<p>Just for clarity, by charts I mean things like pies, lines and bars etc.</p>
"
358225,21537,2008-12-11T01:44:39Z,41,log4j with timestamp per log entry,"<p>this is my log output</p>

<pre><code>INFO main digestemails - process inbox
INFO main digestemails - checking for emails in c:\development\DCMail\email\KN-Source
INFO main digestemails - digesting 003d01c95a7b_3446880_0202fea9@xxxx.com.eml
INFO main digestemails - extracting attachments
INFO main digestemails - no attachments or no attachments supported
INFO main digestemails - updating database
INFO main digestemails - email -&gt; COMPLETED folder
INFO main digestemails -
</code></pre>

<p>I would like a time stamp per log message ie</p>

<pre><code>INFO 2008-12-25 13:14:00 digestemails - email -&gt; COMPLETED folder
</code></pre>

<p>here is my log4j config file</p>

<pre><code>log4j.rootLogger=debug, stdout, R

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout

# Pattern to output the caller's file name and line number.
log4j.appender.stdout.layout.ConversionPattern=%5p [%t] (%F:%L) - %m%n

log4j.appender.R=org.apache.log4j.RollingFileAppender
log4j.appender.R.File=c:\\development\\DCMail\\logs\\digestlogfolder\\digest-logfile.log

log4j.appender.R.MaxFileSize=100KB
# Keep one backup file
log4j.appender.R.MaxBackupIndex=1

log4j.appender.R.layout=org.apache.log4j.PatternLayout
log4j.appender.R.layout.ConversionPattern=%p %t %c - %m%n
</code></pre>

<p>How do I do it?</p>
"
358398,1179,2008-12-11T03:50:02Z,0,Keeping a variable around from post to get?,"<p>I have a class called myClass which defines post() and get() methods. </p>

<p>From <em>index.html</em>, I have a form with an action that calls myClass.post() which grabs some data from the data base, sets a couple variables and sends the user to <em>new.html</em>. </p>

<p>now, <em>new.html</em> has a form which calls myClass.get(). </p>

<p><strong>I want the get() method to know the value of the variables I got in post().</strong> That is is main point here.</p>

<p>I figure the submit from new.html creates a separate instance of myClass created by the submit from index.html. </p>

<p>Is there a way to access the ""post instance"" somehow? </p>

<p>Is there a workaround for this? If I have to, is there an established way to send the value from post to ""new.html"" and send it back with the get-submit? </p>

<p>more generally, I guess I don't understand the life of my instances when web-programming. In a normal interactive environment, I know when the instance is created and destroyed, but I don't get that when I'm only using the class through calls to its methods. Are those classes even instantiated unless their methods are called? </p>
"
358471,NA,2008-12-11T04:49:04Z,2,XMODEM for python,"<p>I am writing a program that requires the use of XMODEM to transfer data from a sensor device. I'd like to avoid having to write my own XMODEM code, so I was wondering if anyone knew if there was a python XMODEM module available anywhere?</p>
"
358783,12126,2008-12-11T09:32:43Z,4,"python, set terminal type in pexpect","<p>I have a script which uses pexpect to start a CLI program. It works a bit like a shell where you get a prompt where you can enter some commands.</p>

<p>The problem I have, I think, is that this program uses a coloured prompt.</p>

<p>This is what I do </p>

<pre><code>import pprint
import pexpect

1 a = pexpect.spawn('program')
2 a.expect(""prompt&gt;"")
3 print ""---------start------------""
4 print(a.before)
5 a.sendline(""command"")
6 a.expect(""prompt&gt;"")
7 print ""---------before------------""
8 pprint.pprint(a.before)
9 print ""---------after------------""
10 pprint.pprint(a.after)
</code></pre>

<p>This is the output:</p>

<pre><code>&gt; python borken.py
---------start------------
A lot of text here from the enjoying programs start-up, lorem ipsum ...  
---------before------------
' \x1b[0m\x1b[8D\x1b[K\x1b[1m\x1b[34m'
---------after------------
'prompt&gt;'
</code></pre>

<p>For some reason the first prompt colour coding borkens up things and a.before at line 8 is garbled, normal print does not work,  even if I see that the command at line 5 actually produced a lot of output.</p>

<p>Does someone know what the problem could be, or is it possible to set the terminal type in pexpect to avoid the colours?</p>

<p>I am using tcsh shell</p>
"
359347,18648,2008-12-11T13:30:23Z,13,Execute Commands Sequentially in Python,"<p>I would like to execute multiple commands in a row:</p>

<p>ie (just to illustrate my need):</p>

<p><strong>cmd</strong> (the shell)</p>

<p>then</p>

<p><strong>cd dir</strong></p>

<p>and</p>

<p><strong>ls</strong></p>

<p>and read the result of the ls.</p>

<p>Any idea with subprocess module ?</p>

<p>UPDATE:</p>

<p>cd dir and ls are just an example. I need to run complex commands (following a particular order, without any pipelining). In fact, i would like one subprocess shell and the ability to launch many commands on it.</p>
"
359409,33612,2008-12-11T13:52:21Z,1,What is the sqlalchemy equivalent column type for 'money' and 'OID' in Postgres?,"<p>What is the sqlalchemy equivalent column type for 'money' and 'OID' column types in Postgres?</p>
"
359498,6839,2008-12-11T14:21:06Z,10,How can I unload a DLL using ctypes in Python?,"<p>I'm using ctypes to load a DLL in Python.  This works great.</p>

<p>Now we'd like to be able to reload that DLL at runtime.  </p>

<p>The straightforward approach would seem to be:
1. Unload DLL
2. Load DLL</p>

<p>Unfortunately I'm not sure what the correct way to unload the DLL is.</p>

<p>_ctypes.FreeLibrary is available, but private.</p>

<p>Is there some other way to unload the DLL?</p>
"
359903,34395,2008-12-11T16:14:25Z,2,Comparing List of Arguments to it self?,"<p>Kind of a weird question, but. I need to have a list of strings i need to make sure that every string in that list is the same.</p>

<p>E.g:</p>

<pre><code>a = ['foo', 'foo', 'boo'] #not valid
b = ['foo', 'foo', 'foo'] #valid
</code></pre>

<p>Whats the best way to go about doing that?</p>

<p>FYI, i don't know how many strings are going to be in the list. Also this is a super easy question, but i am just too tired to think straight.</p>
"
360036,3408,2008-12-11T16:47:38Z,7,Split HTML after N words in python,"<p>Is there any way to split a long string of HTML after N words? Obviously I could use:</p>

<pre><code>' '.join(foo.split(' ')[:n])
</code></pre>

<p>to get the first n words of a plain text string, but that might split in the middle of an html tag, and won't produce valid html because it won't close the tags that have been opened.</p>

<p>I need to do this in a zope / plone site - if there is something as standard in those products that can do it, that would be ideal.</p>

<p>For example, say I have the text:</p>

<pre><code>&lt;p&gt;This is some text with a 
  &lt;a href=""http://www.example.com/"" title=""Example link""&gt;
     bit of linked text in it
  &lt;/a&gt;.
&lt;/p&gt;
</code></pre>

<p>And I ask it to split after 5 words, it should return:</p>

<pre><code>&lt;p&gt;This is some text with&lt;/p&gt;
</code></pre>

<p>7 words:</p>

<pre><code>&lt;p&gt;This is some text with a 
  &lt;a href=""http://www.example.com/"" title=""Example link""&gt;
     bit
  &lt;/a&gt;
&lt;/p&gt;
</code></pre>
"
360368,27478,2008-12-11T18:27:21Z,6,Lambda function for classes in python?,"<p>There must be an easy way to do this, but somehow I can wrap my head around it. The best way I can describe what I want is a lambda function for a class. I have a library that expects as an argument an uninstantiated version of a class to work with. It then instantiates the class itself to work on. The problem is that I'd like to be able to dynamically create versions of the class, to pass to the library, but I can't figure out how to do it since the library expects an uninstantiated version. The code below describes the problem:</p>

<pre><code>class Double:
    def run(self,x):
        return x*2

class Triple:
    def run(self,x):
        return x*3

class Multiply:
    def __init__(self,mult):
        self.mult = mult
    def run(self,x):
        return x*self.mult

class Library:
    def __init__(self,c):
        self.c = c()
    def Op(self,val):
        return self.c.run(val)

op1 = Double
op2 = Triple
#op3 = Multiply(5)

lib1 = Library(op1)
lib2 = Library(op2)
#lib3 = Library(op3)

print lib1.Op(2)
print lib2.Op(2)
#print lib3.Op(2)
</code></pre>

<p>I can't use the generic Multiply class, because I must instantiate it first which breaks the library ""AttributeError: Multiply instance has no <strong>call</strong> method"". Without changing the Library class, is there a way I can do this?</p>
"
360600,30105,2008-12-11T19:37:45Z,1,Regular Expressions in unicode strings,"<p>I have some unicode text that I want to clean up using regular expressions.  For example I have cases where u'(2'.  This exists because for formatting reasons the closing paren ends up in an adjacent html cell.  My initial solution to this problem was to look ahead at the contents of the next cell and using a string function determine if it held the closing paren.  I knew this was not a great solution but it worked.  Now I want to fix it but I can't seem to make the regular expression work.   </p>

<pre><code>missingParen=re.compile(r""^\(\d[^\)]$"")
</code></pre>

<p>My understanding of what I think I am doing:<br />
^ at the beginning of the string I want to find<br />
( an open paren, the paren has to be backslashed because it is a special character<br />
\d I also want to find a single digit<br />
[ I am creating a special character class<br />
^ I don't want to find what follows<br />
) which is a close paren<br />
$ at the end of the string  </p>

<p>And of course the plot thickens I made a silly assumption that because I placed a \d I would not find (33 but I am wrong so I added a {1} to my regular expression and that did not help, it matched (3333, so my problem is more complicated than I thought.  I want the string to be only an open paren and a single digit.  Is this the more clever approach </p>

<pre><code>missingParen=re.compile(r""^\(\d$"")
</code></pre>

<p>And note S Lott _I already tagged it beginner so you can't pick up any cheap points Not that I don't appreciate your insights I keep meaning to read your book, it probably has the answer</p>
"
360602,24165,2008-12-11T19:38:02Z,4,What GUI toolkit looks best for a native LAF for Python in Windows and Linux?,"<p>I need to decide on a GUI/Widget toolkit to use with Python for a new project. The target platforms will be Linux with KDE and Windows XP (and probably Vista). What Python GUI toolkit looks best and consistent with the native look and feel of the run time platform?</p>

<p>If possible, cite strengths and weaknesses of the suggested toolkit.</p>

<p>Thank you,</p>

<p>Luis</p>
"
360782,4883,2008-12-11T20:33:39Z,1,Extract ipv6 prefix in python,"<p>Given either the binary or string representation of an IPv6 address and its prefix length, what's the best way to extract the prefix in Python?</p>

<p>Is there a library that would do this for me, or would I have to:</p>

<ol>
<li>convert the address from string to an int (inet_ntop)</li>
<li>Mask out the prefix</li>
<li>Convert prefix back to binary </li>
<li>Convert binary to string (inet_ntop)</li>
</ol>
"
360911,87781,2008-12-11T21:05:20Z,0,Access CVS through Apache service using SSPI,"<p>I'm running an Apache server (v2.2.10) with mod_python, Python 2.5 and Django.  I have a small web app that will show the current projects we have in CVS and allow users to make a build of the different projects (the build checks out the project, and copies certain files over with the source stripped out).</p>

<p>On the Django dev server, everything works fine.  I can see the list of projects in cvs, check out, etc.  On the production server (the Apache one) I get the following error:</p>

<p>[8009030d] The credentials supplied to the package were not recognized </p>

<p>I'm trying to log in to the CVS server using SSPI.  Entering the same command into a shell will execute properly.</p>

<p>This is the code I'm using:</p>

<pre>
<code>
def __execute(self, command = ''):
    	command = 'cvs.exe -d :sspi:user:password@cvs-serv.example.com:/Projects ls' 
    	p = subprocess.Popen(command, stdout=subprocess.PIPE, stderr = subprocess.STDOUT, shell=True)
    	return p.communicate()
</code>
</pre>

<p>I've tried a number of different variations of things, and I can't seem to get it to work.  Right now I believe that Apache is the culprit.</p>

<p>Any help would be appreciated </p>
"
361443,30105,2008-12-11T23:41:55Z,1,Need Help Understanding how to use less complex regex in Python,"<p>I am trying to learn more about regular expressions I have one below that I believe finds cases where there is a missing close paren on a number up to 999 billion. The one below it I thought should do the same but I do not get similar results</p>

<pre><code>   missingParenReg=re.compile(r""^\([$]*[0-9]{1,3}[,]?[0-9]{0,3}[,]?[0-9]{0,3}[,]?[0-9]{0,3}[.]*[0-9]*[^)]$"")
   missingParenReg2=re.compile(r""^\([$]?([0-9]{1,3}[,]?)+[.]*[0-9]*[^)]$"")
</code></pre>

<p>I think the second one says:
There must be an open paren to start<br />
There may or may not be as many as one dollar sign<br />
The next group must exist at least once but can exist an unlimited number of times<br />
The group should have at least one digit but may have as many as three<br />
The group may have as few as 0 and as many as 1 commas<br />
Following this group there may or may not be a decimal point<br />
If there is a decimal point it will  be followed by as many as 0 but as many as uncounted occurences of digits<br />
At the end there should not be a closing paren.</p>

<p>I am trying to understand this magic stuff so I would appreciate a correction to my regex (if it can be corrected) in addition to a more elegant solution if you have it.</p>
"
361945,45599,2008-12-12T05:09:04Z,0,Techniques for data comparison between different schemas,"<p>Are there techniques for comparing the same data stored in different schemas? The situation is something like this. If I have a db with schema A and it stores data for a feature in say, 5 tables. Schema A -> Schema B is done during an upgrade process. During the upgrade process some transformation logic is applied and the data is stored in 7 tables in Schema B. 
 What i'm after is some way to verify data integrity, basically i would have to compare different schemas while factoring in the transformation logic. Short of writing some custom t-sql sprocs to compare the data, is there an alternate method? I'm leaning towards python to automate this, are there any python modules that would help me out?
  To better illustrate my question the following diagram is a rough picture of one of the many data sets i would need to compare, Properties 1,2,3 and 4 are migrated from Schema source to destination, but they are spread across different tables.</p>

<pre><code>Table1Src                             Table1Dest
  |                                       |
  --ID(Primary Key)                       --ID(Primary Key)
  --Property1                             --Property1
  --Property2                             --Property5
  --Property3                             --Property6

Table2Src                             Table2Dest
  |                                       |
  --ID(Foreign Key-&gt;Table1Src)            --ID(Foreign Key-&gt;Table1Dest)
  --Property4                             --Property2
                                          --Property3

                                      Table3Dest
                                          |
                                          --ID(Foreign Key-&gt;Table1Dest)
                                          --Property4
                                          --Property7
</code></pre>
"
362231,13055,2008-12-12T08:49:03Z,1,Python: Finding partial string matches in a large corpus of strings,"<p>I'm interested in implementing autocomplete in Python. For example, as the user types in a string, I'd like to show the subset of files on disk whose names start with that string. </p>

<p>What's an efficient algorithm for finding strings that match some condition in a large corpus (say a few hundred thousand strings)? Something like:</p>

<pre><code>matches = [s for s in allfiles if s.startswith(input)]
</code></pre>

<p>I'd like to have the condition be flexible; eg. instead of a strict startswith, it'd be a match so long as all letters in input appears in s in the same order. What's better than the brute-force method I'm showing here?</p>
"
362334,45652,2008-12-12T09:46:31Z,1,Is there a standalone alternative to activerecord-like database schema migrations?,"<p>Is there any standalone alternative to activerecord-like migrations. Something like a script that is able to track current schema version and apply outstanding migrations. Basically, these migration files could be just a plain SQL files, something like:</p>

<pre>
[timestamp]_create_users.sql
reverse_[timestamp]_create_users.sql
</pre>

<p>Language of implementation isn't very important — it could be anything that is usually installed/pre-installed on *nix systems.</p>

<p>I tried to find something out — but failed. I can certainly develop my own in an hour or two, but I am just curious — may be something nice is out there already.</p>
"
362426,745,2008-12-12T10:35:03Z,9,"Implementing a ""[command] [action] [parameter]"" style command-line interfaces?","<p>What is the ""cleanest"" way to implement an command-line UI, similar to git's, for example:</p>

<pre><code>git push origin/master
git remote add origin git://example.com master
</code></pre>

<p>Ideally also allowing the more flexible parsing, for example,</p>

<pre><code>jump_to_folder app theappname v2
jump_to_folder app theappname source
jump_to_folder app theappname source v2
jump_to_folder app theappname build v1
jump_to_folder app theappname build 1
jump_to_folder app theappname v2 build
</code></pre>

<p><code>jump_to_folder</code> is the scripts name, <code>app</code> is the command, <code>theappname</code> is a ""fixed-location"" parameter, ""build"" and ""v2"" etc are arguments (For example, possible arguments would be any number/any number prefixed with a v, or build/source/tmp/config)</p>

<p>I could just manually parse the arguments with a series of <code>if</code>/<code>else</code>/<code>elifs</code>, but there must be a more elegant way to do this?</p>

<p>As an entirely theoretically example, I could describe the UI schema..</p>

<pre><code>app:
    fixed: application_name

    optional params:
        arg subsection:
            ""build""
            ""source""
            ""tmp""
            ""config""

        arg version:
            integer
            ""v"" + integer
</code></pre>

<p>Then parse the supplied arguments though the above schema, and get a dictionary:</p>

<pre><code>&gt;&gt;&gt; print schema.parse([""app"", ""theappname"", ""v1"", ""source""])
{
    ""application_name"": ""theappname"",
    ""params"":{
        ""subsection"": ""source"",
        ""version"":""v1""
    }
}
</code></pre>

<p>Does such a system exist? If not, how would I go about implementing something along these lines?</p>
"
362484,3497,2008-12-12T11:11:00Z,1,Serializing a Python object to/from a S60 phone,"<p>I'm looking for a way to serialize <strong>generic</strong> Python objects between a CherryPy-based server and a Python client running on a Symbian phone.. Since pyS60 doesn't implement the pickle module, how would you do it?</p>

<p>I know about <a href=""http://home.gna.org/oomadness/en/cerealizer"" rel=""nofollow"">Cerealizer</a> but it requires you to register classes before use (which I'd like to avoid) and doesn't look very mature.. So, what would you use? Python 2.2's pickle module maybe, extracted from the sources? XML, JSON? Which one of the several libraries? :)</p>
"
362489,44354,2008-12-12T11:15:15Z,2,How do I add a guard ring to a matrix in NumPy?,"<p>Using <a href=""http://numpy.scipy.org/"" rel=""nofollow"">NumPy</a>, a matrix A has n rows and m columns, and I want add a guard ring to matrix A. That guard ring is all zero.</p>

<p>What should I do? Use Reshape? But the element is not enough to make a n+1 m+1 matrix.</p>

<p>Or etc.?</p>

<p>Thanks in advance</p>

I mean an extra ring of cells that always contain 0 surround matrix A.Basically there is a Matrix B has n+2rows m+2columns where the first row and columns and the last row and columns are all zero,and the rest of it are same as matrix A.
"
362522,1941213,2008-12-12T11:37:05Z,29,Switching from python-mode.el to python.el,"<p>I recently tried switching from using <code>python-mode.el</code> to <code>python.el</code> for editing python files in emacs, found the experience a little alien and unproductive, and scurried back.  I've been using <code>python-mode.el</code> for something like ten years, so perhaps I'm a little set in my ways.  I'd be interested in hearing from anyone who's carefully evaluated the two modes, in particular of the pros and cons they perceive of each and how their work generally interacts with the features specific to <code>python.el</code>.</p>

<p>The two major issues for me with <code>python.el</code> were </p>

<ol>
<li><p>Each buffer visiting a python file gets its own inferior interactive python shell.  I am used to doing development in one interactive shell and sharing data between python files.  (Might seem like bad practice from a software-engineering perspective, but I'm usually working with huge datasets which take a while to load into memory.)</p></li>
<li><p>The skeleton-mode support in python.el, which seemed absolutely gratuitous (python's syntax makes such automation unnecessary) and badly designed (for instance, it has no knowledge of ""<code>for</code>"" loop generator expressions or ""<code>&lt;expr 1&gt; if &lt;cond&gt; else &lt;expr 2&gt;</code>"" expressions, so you have to go back and remove the colons it helpfully inserts after insisting that you enter the expression clauses in the minibuffer.)  I couldn't figure out how to turn it off.  There was a <code>python.el</code> variable which claimed to control this, but it didn't seem to work.  It could be that the version of <code>python.el</code> I was using was broken (it came from the debian emacs-snapshot package) so if anyone knows of an up-to-date version of it, I'd like to hear about it.  (I had the same problem with the version in CVS emacs as of approximately two weeks ago.)</p></li>
</ol>
"
362808,5978,2008-12-12T13:53:04Z,12,django is very slow on my machine,"<p>I have a fresh install of django 1.0 and a simple page served from it takes 5 secs to load. On my colleague's computer it takes almost no time.</p>

<p>I start the server using </p>

<pre>
python manage.py testserver
</pre>

<p>I can see each GET request (PNGs and style sheets) take about half a second.</p>

<p>Another weird thing, which I think is related, is that the functional tests for the app run much slower on my machine with MySQL (on order of 100 times slower than on my colleague's machine). When I set the app to use sqlite, they run pretty quickly. I would like to exclaim that sqlite doesn't much change the time it takes to load a page, but it does speed up server startup.</p>

<p>It looks like IO problem, but I don't see general performance problems on my machine, apart from django at least.</p>

<p>Django runs on python2.4, I'm running Vista. I have also checked python2.5.</p>

<p>Thanks ΤΖΩΤΖΙΟΥ, It must totaly be a DNS problem, because the page loads up quickly as soon as
instead of <a href=""http://localhost:8000/app"">http://localhost:8000/app</a> I go to <a href=""http://127.0.0.1:8000/app"">http://127.0.0.1:8000/app</a>.</p>

<p>But what could it be caused by? My host file has only two entries:</p>

<pre>
127.0.0.1   localhost
::1         localhost
</pre>
"
362998,9951,2008-12-12T15:02:25Z,6,Best way to organize the folders containing the SQLAlchemy models,"<p>I use SQLAlchemy at work and it does the job really fine. Now I am thinking about best practices.</p>

<p>For now, I create a module holding all the SQLA stuff :</p>

<pre><code>my_model
        |__  __init__.py 
        |__  _config.py &lt;&lt;&lt;&lt;&lt; contains LOGIN, HOST, and a MetaData instance
        |__  table1.py &lt;&lt;&lt;&lt;&lt; contains the class, the model and the mapper for table1
        |__  table2.py &lt;&lt;&lt;&lt;&lt; contains the class, the model and the mapper for table2
        [...]
</code></pre>

<p>Now, I really don't know if it's the best way to do it. I would like to load the classes with a fine granularity and be sure to create one connection only with the db, etc.</p>

<p>Here, all the classes are separated, but all import _config and I am wondering if it's a good thing.</p>

<p>What's more, I would like to be able to create subclasses of the model classes that could be stored independently without messing up with the mapper every time. How can I do that ? </p>

<p>For now I just put them in the same file and I have to create another mapper, but the first mapper is still called every time. The same would go if I'd have to import the parent class because the mapper is triggered at import. If I don't use the class to access data, isn't it overheat to map it each time ?</p>

<p>I'd like to avoid using Elixir too, please.</p>
"
363171,34395,2008-12-12T15:58:50Z,4,Regex Problem Group Name Redefinition?,"<p>So I have this regex:</p>

<pre><code>(^(\s+)?(?P&lt;NAME&gt;(\w)(\d{7}))((01f\.foo)|(\.bar|\.goo\.moo\.roo))$|(^(\s+)?(?P&lt;NAME2&gt;R1_\d{6}_\d{6}_)((01f\.foo)|(\.bar|\.goo\.moo\.roo))$))
</code></pre>

<p>Now if I try and do a match against this:</p>

<pre>
B048661501f.foo
</pre>

<p>I get this error:</p>

<pre>
  File ""C:\Python25\lib\re.py"", line 188, in compile
    return _compile(pattern, flags)
  File ""C:\Python25\lib\re.py"", line 241, in _compile
    raise error, v # invalid expression
sre_constants.error: redefinition of group name 'NAME' as group 9; was group 3
</pre>

<p>If I can't define the same group twice in the same regex expression for two different cases, what do I do?</p>
"
363907,1694,2008-12-12T19:45:11Z,3,Equivalent of an HTML multiple SELECT box in wxPython,"<p>I'd like to create a <code>ListBox</code> in wxPython with the same semantics as a multiple <code>select</code> box in HTML.  Specifically I'd like the following semantics</p>

<ul>
  <li> When the user clicks on an entry in the list, all other entries become de-selected and the clicked entry becomes selected.  If the entry was already selected then it stays selected. </li>
  <li> When the user holds down the Ctrl key while clicking on an entry, all other entries stay unchanged, but it toggles whether the clicked entry is selected. </li>
  <li> When the user holds down shift and clicks on an entry, that entry and every entry between it and the last clicked entry become selected. </li>
</ul>

<p>In Java I get this by using the <code>JList</code> class in Swing and setting the selection mode to <code>MULTIPLE_INTERVAL_SELECTED</code>.  I assume that there's a way to do this with the wxPython toolkit, but I can't figure out how to get a <code>ListBox</code> or <code>ListCtrl</code> or any other class to do this short of doing an enormous amount of event-driven programming myself.</p>
"
363944,19403,2008-12-12T19:56:02Z,110,Python idiom to return first item or None,"<p>I'm sure there's a simpler way of doing this that's just not occurring to me.</p>

<p>I'm calling a bunch of methods that return a list.  The list may be empty.  If the list is non-empty, I want to return the first item; otherwise, I want to return None.  This code works:</p>

<pre><code>my_list = get_list()
if len(my_list) &gt; 0: return my_list[0]
return None
</code></pre>

<p>It seems to me that there should be a simple one-line idiom for doing this, but for the life of me I can't think of it.  Is there?</p>

<p><strong>Edit:</strong></p>

<p>The reason that I'm looking for a one-line expression here is not that I like incredibly terse code, but because I'm having to write a lot of code like this:</p>

<pre><code>x = get_first_list()
if x:
    # do something with x[0]
    # inevitably forget the [0] part, and have a bug to fix
y = get_second_list()
if y:
    # do something with y[0]
    # inevitably forget the [0] part AGAIN, and have another bug to fix
</code></pre>

<p>What I'd like to be doing can certainly be accomplished with a function (and probably will be):</p>

<pre><code>def first_item(list_or_none):
    if list_or_none: return list_or_none[0]

x = first_item(get_first_list())
if x:
    # do something with x
y = first_item(get_second_list())
if y:
    # do something with y
</code></pre>

<p>I posted the question because I'm frequently surprised by what simple expressions in Python can do, and I thought that writing a function was a silly thing to do if there was a simple expression could do the trick.  But seeing these answers, it seems like a function <em>is</em> the simple solution.</p>
"
363968,9789,2008-12-12T20:02:13Z,1,Best way to monitor services on a few servers with python,"<p>What would be the best way to monitor services like HTTP/FTP/IMAP/POP3/SMTP for a few servers from python?
Using sockets and trying to connect to service port http-80, ftp-21, etc... and if connection successful assume service is ok or use python libs to connect to specified services and handle exceptions/return codes/etc...</p>

<p>For example for ftp is it better to</p>

<pre><code>import socket
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
try:
    s.connect((""ftp.domain.tld"", 21))
    print ""ok""
except:
    print ""failed""
s.close()
</code></pre>

<p>or to</p>

<pre><code>from ftplib import FTP

try:
    ftp = FTP('ftp.domain.tld')
    print ""FTP service OK""
    ftp.close()
except:
    print ""FTP err""
</code></pre>

<p>same goes for the rest, socket vs urllib2, imaplib, etc...
and if i go the lib way how do i test for smtp?</p>
"
364015,NA,2008-12-12T20:22:29Z,8,MVC and django fundamentals,"<p>Pretty new to this scene and trying to find some documentation to adopt best practices.  We're building a fairly large content site which will consist of various media catalogs and I'm trying to find some comparable data / architectural models so that we can get a better idea of the approach we should use using a framework we've never made use of before.   Any insight / help would be greatly appreciated!</p>
"
364327,35364,2008-12-12T22:10:08Z,7,Markup-based GUI for python,"<p>I want to get myself into programming some serious GUI based applications, but when I look at things like Swing/SWT from Java, I can't help but HATE programming a GUI interface by creating ""widget"" objects and populating them and calling methods on them.  </p>

<p>I think GUI design should be done in a separate text-based file in some markup format, which is read and rendered (e.g. HTML), so that the design of the interface is not tightly coupled with the rest of the code.</p>

<p>I've seen <a href=""http://www.terrainformatica.com/htmlayout/"" rel=""nofollow"">HTMLayout</a> and I love the idea, but so far it seems be only in C++. </p>

<p>I'm looking for a python library (or even a WIP project) for doing markup-based gui.</p>

<p><strong>UPDATE</strong></p>

<p>The reason I can't accept QT's xml is the same reason I hate the programatic approach; you're assembling each widget separately, and specifying each property of it on a separate line. It doesn't provide any advantage over doing it the programatic way.</p>
"
364358,11481,2008-12-12T22:21:53Z,1,Threaded code on mod_python,"<p>I have written a Django app that makes use of Python threading to create a web spider, the spider operates as a series of threads to check links.</p>

<p>When I run this app using the django test server (built in), the app runs fine and the threads seem to start and stop on time.</p>

<p>However, running the app on Apache it seems the threads aren't kicking off and running (after about 80 seconds there should be a queued database update and these changes aren't occuring).</p>

<p>Does anyone have an idea what I'm missing here?</p>

<p>-- Edit: My question is, how does Apache handle threaded applications, i.e. is there a limit on how many threads can be run from a single app?</p>

<p>Any help would be appreciated!</p>
"
364486,13380,2008-12-12T23:26:53Z,4,"Which Eclipse distribution is good for web development using Python, PHP, or Perl?","<p>I'd like to try out Eclipse, but I'm a bit baffled with all the different distributions of it. I mainly program in Python doing web development, but I also need to maintain PHP and Perl apps. It looks like EasyEclipse is a bit behind. Should I just grab the base Eclipse and start loading plug-ins?</p>
"
364519,91385,2008-12-12T23:57:05Z,136,"In Python, how do I iterate over a dictionary in sorted order?","<p>There's an existing function that ends in:</p>

<pre><code>return dict.iteritems()
</code></pre>

<p>that returns an unsorted iterator for a given dictionary. I would like to return an iterator that goes through the items in sorted order. How do I do that?</p>
"
364621,44133,2008-12-13T01:20:32Z,103,How to get item's position in a list?,"<p>I am iterating over a list and I want to print out the index of the item if it meets a certain condition. How would I do this?</p>

<p>Example:  </p>

<pre><code>testlist = [1,2,3,5,3,1,2,1,6]
for item in testlist:
    if item == 1:
        print position
</code></pre>
"
364655,1512,2008-12-13T01:50:38Z,3,How do I use my standard python path when running python scripts from xcode macros,"<p>I'm trying to run Python scripts using Xcode's User Scripts menu.</p>

<p>The issue I'm having is that my usual os.sys.path (taken from ~/.profile) does not seem to be imported when running scripts from XCode the way it is when running them at the Terminal (or with IPython). All I get is the default path, which means I can't do things like</p>

<pre><code>#!/usr/bin/python
import myScript

myScript.foo()
</code></pre>

<p>Where myScript is a module in a folder I've added to my path.</p>

<p>I can append a specific path to os.sys.path manually easily enough, but I have to do it in every single script for every single path I want to use modules from</p>

<p>Is there a way to set this up so it uses the same path I use everywhere else?</p>

<p>EDIT: After looking into things a bit more, it seems like scripts executed from Xcode use a completely different PATH than normal. The path I get by running a script in Xcode is:</p>

<pre><code>PATH=/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin
</code></pre>

<p>and I'm sure my regular path doesn't have /Developer/usr/bin in it. Does anybody have any idea where this path is coming from?</p>
"
364802,44354,2008-12-13T03:55:44Z,37,generator comprehension,"<p>What does generator comprehension do? How does it work? I couldn't find a tutorial about it.</p>
"
365058,115,2008-12-13T09:55:16Z,5,Detect windows logout in Python,"<p>How can I detect, or be notified, when windows is logging out in python?</p>

<p>Edit:
Martin v. Löwis' answer is good, and works for a full logout but it does not work for a 'fast user switching' event like pressing win+L which is what I really need it for.
<br /><br />Edit: im not using a gui this is running as a service</p>
"
365082,10583,2008-12-13T10:30:41Z,19,Can you change a field label in the Django Admin application?,"<p>As the title suggests. I want to be able to change the label of a single field in the admin application. I'm aware of the Form.field attribute, but how do I get my Model or ModelAdmin to pass along that information?</p>
"
365110,34088,2008-12-13T11:10:29Z,9,Cross platform keylogger,"<p>I'm looking for ways to watch mouse and keyboard events on Windows, Linux and Mac from Python.</p>

<p>My application is a time tracker. I'm not looking into the event, I just record the time when it happens. If there are no events for a certain time, say 10 minutes, I assume that the user has left and stop the current project.</p>

<p>When the user returns (events come in again), I wait a moment (so this doesn't get triggered by the cleaning crew or your pets or an earthquake). If the events persist over a longer period of time, I assume that the user has returned and I pop up a small, inactive window where she can choose to add the time interval to ""break"", the current project (meeting, etc) or a different project.</p>

<p>I've solved the keylogger for Windows using the <a href=""http://sourceforge.net/projects/pyhook/"">pyHook</a>.</p>

<p>On Linux, I have found a solution but I don't like it: I can watch all device nodes in /etc/input and update a timestamp somewhere in /var or /tmp every time I see an event. There are two drawbacks: 1. I can't tell whether the event if from the user who is running the time tracker and 2. this little program needs to be run as root (not good).</p>

<p>On Mac, I have no idea, yet.</p>

<p>Questions:</p>

<ol>
<li><p>Is there a better way to know whether the user is creating events than watching the event devices on Linux?</p></li>
<li><p>Any pointers how to do that on a Mac?</p></li>
</ol>
"
365384,44354,2008-12-13T16:24:07Z,0,run a function in another function in N times,"<p>I have ask this kind of question before, but it seems my previous question is a bit misleading due to my poor English. I'm asking again to make clear. I am really confused about it. Thanks in advance.</p>

<p>Suppose I have a function A for generating the state of a cell in a certain rule, and I have another function which generates the state of a cell for N times, and each time the rule is as same as the fist function. And, yeah, don't know how to do it...</p>

<pre><code>def 1st_funtion(a_matrixA)
    #apply some rule on a_matrixA and return a new matrix(next state of the cell)
    return new_matrix

def 2nd_funtion(a_matrixB,repeat_times=n)
    #how to import the 1st_funtion and run for n times and return the final_matrix?
    #I know if n=1, just make final_matrix=1st_funtion(a_matrixB)
    return final_matrix
</code></pre>
"
365395,44354,2008-12-13T16:30:16Z,0,How to truncate matrix using NumPy (Python),"<p>just a quick question, if I have a matrix has n rows and m columns, how can I cut off the 4 sides of the matrix and return a new matrix? (the new matrix would have n-2 rows m-2 columns).</p>

<p>Thanks in advance</p>
"
365601,33904,2008-12-13T19:33:09Z,0,best way to print data in columnar format?,"<p>I am using Python to read in data in a user-unfriendly format and transform it into an easier-to-read format.  The records I am outputting are usually going to be just a last name, first name, and room code.  I</p>

<p>I would <em>like</em> to output a series of pages, each containing a contiguous subset of the total records, divided into multiple columns, each of which contains a contiguous subset of the total records on the page.  (So in other words, you'd read down the first column, move to the next column, move to the next column, etc., and then start over on the next page...)</p>

<p>The problem I am facing now is that for output formats, I'm almost certainly limited to HTML (and Javascript, CSS, etc.)  What is the best way to get the data into this columnar format?  If I knew for certain that the printable area of the paper would hold 20 records vertically and five horizontally, for instance, I could easily print tables of 5x20, but I don't know if there's a way to indicate a page break -- and I don't know if there's any way to calculate programmatically how many records will fit on the page.</p>

<p>How would you approach this?</p>

<p><strong>EDIT:</strong>  The reason I said that I was limited in output:  I have to produce the file on one computer, then bring it to a different computer upon which we cannot install new software and on which the selection of existing software is not optimal.  The file itself is only going to be used to make a physical printout (which is what the end users will actually work with), but my time on the computer that I can print from is going to be limited, so I need to have the file all ready to go and print right away without a lot of tweaking.</p>

<p>Right now I've managed to find a word processor that I can use on the target machine, so I'm going to see if I can target a format that the word processor uses.</p>

<p><strong>EDIT:</strong>  Once I knew there was a word processor I could use, I made a simple skeleton file with the settings that I wanted (column and tab settings, monospaced font in a small point size, etc.) and then measured how many characters I got per line of a column and how many lines I got per column.  I've watched the runs pretty carefully to make sure that there weren't some strange lines that somehow overflowed the characters-per-line guideline (which shouldn't happen with monospaced font, of course, but how many times do you end up having to figure out why that thing that ""shouldn't"" happen is happening anyways?)</p>

<p>If there hadn't been a word processor on the target machine that I could use, I probably would have looked at PDF as an output format.</p>
"
366037,NA,2008-12-14T01:26:04Z,5,Tracking redirects and cookies with Python,"<p>I would like to do be able to follow and track redirects and the cookies that are set by the different webpages with Python (a bit like the tamper plugin for Firefox).</p>

<p>So if website1 redirects to website2 which then redirects to website3, I would like to follow that and also see what cookies each website sets. I have been looking at Urllib2 but it redirects by itself and I haven't seen a way to track the redirects.</p>
"
366421,2220518,2008-12-14T11:23:21Z,0,how to browse to a external url from turbogears/cherrypy application?,"<p>I am writing a tinyurl clone to learn turbogears. I am wondering how do i redirect my browser to the external website (say www.yahoo.com) from my cherrypy/turbogears app?</p>

<p>I googled about it, but could not find much useful info.</p>
"
366422,2242,2008-12-14T11:23:54Z,34,What is the pythonic way to avoid default parameters that are empty lists?,"<p>Sometimes it seems natural to have a default parameter which is an empty list. Yet Python gives unexpected behavior in these situations.  </p>

<p>If for example, I have a function:</p>

<pre><code>def myFunc(working_list = []):
    working_list.append(""a"")
    print working_list
</code></pre>

<p>The first time it is called with the default will work, but calls after that will use a constantly updating list.</p>

<p>So, what is the pythonic way to get the behavior I desire (a fresh list on each call)?</p>
"
366682,1925263,2008-12-14T16:20:24Z,37,How to limit execution time of a function call in Python,"<p>There is a socket related function call in my code, that function is from another module thus out of my control, the problem is that it blocks for hours occasionally, which is totally unacceptable, How can I limit the function execution time from my code? I guess the solution must utilize another thread.</p>
"
366706,23126,2008-12-14T16:41:28Z,9,Bitwise subtraction in Python,"<p>This is a follow-up to <a href=""http://stackoverflow.com/questions/365522/what-is-the-best-way-to-add-two-numbers-without-using-the-operator"">my question yesterday</a>:</p>

<p>CMS kindly provided this example of using bitwise operators to add two numbers in C:</p>

<pre><code>#include&lt;stdio.h&gt;

int add(int x, int y) {
    int a, b;
    do {
        a = x &amp; y;
        b = x ^ y;
        x = a &lt;&lt; 1;
        y = b;
    } while (a);
    return b;
}

int main( void ){
    printf( ""6 + 3 = %d"", add(6,3));
    printf( ""6 - 3 = %d"", add(6,-3));
    return 0;
}
</code></pre>

<p>It works great and I then ported it to Python as follows:</p>

<pre><code>def add(x, y):
    while True:
        a = x &amp; y
        b = x ^ y
        x = a &lt;&lt; 1
        y = b
        if a == 0:
            break
    return b

print ""6 + 3 = %d"" % add(6,3)
print ""6 - 3 = %d"" % add(6,-3)
</code></pre>

<p>They both work for addition and the C program works for subtraction as well.  However, the Python program enters an infinite loop for subtraction.  I am trying to get to the bottom of this and have posted the program here for further experimentation: <a href=""http://codepad.org/pb8IuLnY"">http://codepad.org/pb8IuLnY</a></p>

<p>Can anyone advise why there would be a difference between the way C handles this and the way CPython handles this?</p>
"
366720,36131,2008-12-14T16:52:50Z,14,How to organize python test in a way that I can run all tests in a single command?,"<p>Currently my code is organized in the following tree structure:</p>

<pre><code>src/
    module1.py
    module2.py
    test_module1.py
    test_module2.py
    subpackage1/
        __init__.py
        moduleA.py
        moduleB.py
        test_moduleA.py
        test_moduleB.py
</code></pre>

<p>Where the <code>module*.py</code> files contains the source code and the <code>test_module*.py</code> contains the <code>TestCase</code>s for the relevant module.</p>

<p>With the following comands I can run the tests contained in a single file, for example:</p>

<pre><code>$ cd src
$ nosetests test_filesystem.py
..................
----------------------------------------------------------------------
Ran 18 tests in 0.390s

OK
</code></pre>

<p>How can I run all tests? I tried with <code>nosetests -m 'test_.*'</code> but it doesn't work.</p>

<pre><code>$cd src
$ nosetests -m 'test_.*'

----------------------------------------------------------------------
Ran 0 tests in 0.000s

OK
</code></pre>

<p>Thanks</p>
"
366838,46172,2008-12-14T18:48:49Z,9,How to localize Content of a Django application,"<p>Hey, i am currently working on a django app for my studies, and came to the point of l18n. Localizing the site itself was very easy, but now i have to allow users, to translate the dynamic content of the application.
Users can save ""products"" in the database and give them names and descriptions, but since the whole site should be localized, i must provide a way of translating theses names and descriptions to the users.</p>

<p>Is there a natural way in django to do this? Or do i have to realize it as part of the application (by representing the translations in the datamodel)</p>

<p>Thanks, Janosch</p>
"
367029,9106,2008-12-14T21:45:21Z,0,Deleting erroneous ReferenceProperty properties in AppEngine,"<p>Most of the time, the errors you get from your model properties will happen when you're saving data. For instance, if you try saving a string as an IntegerProperty, that will result in an error.</p>

<p>The one exception (no pun intended) is ReferenceProperty. If you have lots of references and you're not completely careful about leaving in bad references, it's common to be greeted with an error like ""TemplateSyntaxError: Caught an exception while rendering: ReferenceProperty failed to be resolved"".</p>

<p>And this is if there's only one bad reference in the view. D'oh. </p>

<p>I could write a try/except block to try to access all the reference properties and delete them if an exception is raised, but this functionality could surely be useful to many other developers if there was a more generic method than the one I'd be capable of writing. I imagine it would take a list of model types and try to access each reference property of each entity in each model, setting the property to None if an exception is raised.</p>

<p>I'll see if I can do this myself, but it would definitely help to have some suggestions/snippets to get me started.</p>
"
367053,NA,2008-12-14T22:07:56Z,12,No print output from child multiprocessing.Process unless the program crashes,"<p>I am having trouble with the Python multiprocessing module. I am using the <code>Process</code> class to spawn a new process in order to utilize my second core. This second process loads a bunch of data into RAM and then waits patiently instead of consuming. </p>

<p>I wanted to see what that process printed with the <code>print</code> command, however, I do not see anything that it prints. I only see what the parent process prints. Now this makes sense to me since they live in two different process. The second process doesn't spawn its own shell/standard output window, nor is its output sent to the parent. Yet when this process crashs, it prints everything that my script told it to print, plus the stack trace and error. </p>

<p>I am wondering if there is a simple way to send the child process's print output to the first process, or have it spawn a shell/standard output so that I may debug it. I know I could create a <code>multiprocessing.Queue</code> dedicated to transmitting prints to the parent so that it may print these to standard output, but I do not feel like doing this if a simpler solution exists.</p>
"
367068,40195,2008-12-14T22:20:34Z,3,Listing the processes running on one's computer in Python,"<p>Is there a cross-platform way to list the processes running on one's computer through a python script? For Unix based system ""ps -ef"" works, but I am new to Python and don't know a way to write something that would work across any platform.</p>

<p>Thanks!</p>
"
367115,28421,2008-12-14T22:57:33Z,15,Is there a Python equivalent to `perl -pi -e`?,"<p>I know of <code>python -c '&lt;code&gt;'</code>, but I'm wondering if there's a more elegant python equivalent to <code>perl -pi -e '&lt;code&gt;'</code>.  I still use it quite a bit for things like find and replace in a whole directory (<code>perl -pi -e s/foo/bar/g *</code> or even <code>find . | xargs perl -pi -e s/foo/bar/g</code> for sub-directories).</p>

<p>I actually feel that that which makes Perl Perl (free form Tim Toady-ness) is what makes <code>perl -pi -e</code> work so well, while with Python you'd have to do something along the lines of importing the re module, creating an re instance and then capture stdin, but maybe there's a Python shortcut that does all that and I missed it (sorely missed it)...</p>
"
367155,40429,2008-12-14T23:30:33Z,22,Splitting a string into words and punctuation,"<p>I'm trying to split a string up into words and punctuation, adding the punctuation to the list produced by the split.</p>

<p>For instance:</p>

<pre><code>&gt;&gt;&gt; c = ""help, me""
&gt;&gt;&gt; print c.split()
['help,', 'me']
</code></pre>

<p>What I really want the list to look like is:</p>

<pre><code>['help', ',', 'me']
</code></pre>

<p>So, I want the string split at whitespace with the punctuation split from the words.</p>

<p>I've tried to parse the string first and then run the split:</p>

<pre><code>&gt;&gt;&gt; for character in c:
...     if character in "".,;!?"":
...             outputCharacter = "" %s"" % character
...     else:
...             outputCharacter = character
...     separatedPunctuation += outputCharacter
&gt;&gt;&gt; print separatedPunctuation
help , me
&gt;&gt;&gt; print separatedPunctuation.split()
['help', ',', 'me']
</code></pre>

<p>This produces the result I want, but is painfully slow on large files.</p>

<p>Is there a way to do this more efficiently?</p>
"
367461,10583,2008-12-15T04:16:33Z,21,Setting up a foreign key to an abstract base class with Django,"<p>I've factored out common attributes from two classes into an abstract base class, however I have another model that needs to reference either one of those classes. It's not possible to reference an ABC as it doesn't actually have a database table.</p>

<p>The following example should illustrate my problem:</p>

<pre><code>class Answer(models.Model):
    ovramt = models.ForeignKey(""Ovramt"")
    question = models.ForeignKey(""Question"")
    answer = models.CharField(max_length=3, choices=((""yes"",""yes""),(""no"",""no"") (""NA"",""N/A""))
    likelihood = models.IntegerField(choices=LIKELY_CHOICES)
    consequence = models.IntegerField(choices=CONSEQUENCE_CHOICES)

    class Meta:
        abstract = True

class Answer_A(Answer):
    resident = models.ForeignKey(""Resident"")
    def __unicode__(self):
        return u""%s - %s - %s"" %(self.ovramt.ssa.name, self.resident, self.question)    

class Answer_B(Answer):
    def __unicode__(self):
        return u""%s - %s"" %(self.ovramt.ssa.name, self.question)    

class Answer_Risk(models.Model):
    answer = models.ForeignKey(""Answer"")
    risk = models.CharField(max_length=200)

    def __unicode__(self):
        return self.risk
</code></pre>

<p>Answer_A and Answer_B are slightly different in that Answer_A also needs a FK relationship to another table. Answer_B may also require some specific attributes later. The problem would STILL exist if I had Answer_B be the superclass - and have Answer_A subclass or compose it.</p>

<p>A 'Risk' is the same whether it's Answer_A or Answer_B. I also have other models that need to reference an 'Answer' regardless of it's sub-type. How can this be done? How can you reference a type regardless of it's sub-type?</p>

<p>Update:<br />
I was trying to avoid a join operation but I don't think I'm going to be able to. Would it be worth having the reference to 'Resident' in all 'Answer's and just nulling it where required? Or is that considered very bad practice? </p>
"
367560,1512,2008-12-15T05:39:52Z,15,How much input validation should I be doing on my python functions/methods?,"<p>I'm interested in how much up front validation people do in the Python they write.</p>

<p>Here are a few examples of simple functions:</p>

<pre><code>def factorial(num):
    """"""Computes the factorial of num.""""""

def isPalindrome(inputStr):
    """"""Tests to see if inputStr is the same backwards and forwards.""""""

def sum(nums):
    """"""Same as the built-in sum()... computes the sum of all the numbers passed in.""""""
</code></pre>

<p>How thoroughly do you check the input values before beginning computation, and how do you do your checking? Do you throw some kind of proprietary exception if input is faulty (BadInputException defined in the same module, for example)? Do you just start your calculation and figure it will throw an exception at some point if bad data was passed in (""asd"" to factorial, for example)?</p>

<p>When the passed in value is supposed to be a container do you check not only the container but all the values inside it?</p>

<p>What about situations like factorial, where what's passed in might be convertible to an int (e.g. a float) but you might lose precision when doing so?</p>
"
367565,37984,2008-12-15T05:44:31Z,81,How do I build a numpy array from a generator?,"<p>How can I build a numpy array out of a generator object?</p>

<p>Let me illustrate the problem:</p>

<pre><code>&gt;&gt;&gt; import numpy
&gt;&gt;&gt; def gimme():
...   for x in xrange(10):
...     yield x
...
&gt;&gt;&gt; gimme()
&lt;generator object at 0x28a1758&gt;
&gt;&gt;&gt; list(gimme())
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
&gt;&gt;&gt; numpy.array(xrange(10))
array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
&gt;&gt;&gt; numpy.array(gimme())
array(&lt;generator object at 0x28a1758&gt;, dtype=object)
&gt;&gt;&gt; numpy.array(list(gimme()))
array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
</code></pre>

<p>In this instance, gimme() is the generator whose output I'd like to turn into an array. However, the array constructor does not iterate over the generator, it simply stores the generator itself. The behaviour I desire is that from numpy.array(list(gimme())), but I don't want to pay the memory overhead of having the intermediate list and the final array in memory at the same time. Is there a more space-efficient way?</p>
"
367586,27474,2008-12-15T06:03:40Z,11,Generating random text strings of a given pattern,"<p>I need to generate random text strings of a particular format. Would like some ideas so that I can code it up in Python. The format is &lt;8 digit number>&lt;15 character string>. </p>
"
367684,37181,2008-12-15T07:30:59Z,0,Get Data from OpenGL glReadPixels(using Pyglet),"<p>I'm using Pyglet(and OpenGL) in Python on an application, I'm trying to use glReadPixels to get the RGBA values for a set of pixels.  It's my understanding that OpenGL returns the data as packed integers, since that's how they are stored on the hardware.  However for obvious reasons I'd like to get it into a normal format for working with.  Based on some reading I've come up with this: <a href=""http://dpaste.com/99206/"" rel=""nofollow"">http://dpaste.com/99206/</a> , however it fails with an IndexError.  How would I go about doing this?</p>
"
368003,1246613,2008-12-15T10:51:38Z,2,How can I reorder an mbox file chronologically?,"<p>I have a single spool mbox file that was created with evolution, containing a selection of emails that I wish to print. My problem is that the emails are not placed into the mbox file chronologically. I would like to know the best way to place order the files from first to last using bash, perl or python. I would like to oder by received for files addressed to me, and sent for files sent by me. Would it perhaps be easier to use maildir files or such?</p>

<p>The emails currently exist in the format:</p>

<pre><code>From x@blah.com Fri Aug 12 09:34:09 2005
Message-ID: &lt;42FBEE81.9090701@blah.com&gt;
Date: Fri, 12 Aug 2005 09:34:09 +0900
From: me &lt;x@blah.com&gt;
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: someone &lt;someone@hotmail.com&gt;
Subject: Re: (no subject)
References: &lt;BAY101-F9353854000A4758A7E2CCA9BD0@phx.gbl&gt;
In-Reply-To: &lt;BAY101-F9353854000A4758A7E2CCA9BD0@phx.gbl&gt;
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
Status: RO
X-Status: 
X-Keywords:                 
X-UID: 371
X-Evolution-Source: imap://x+blah.com@blah.com/
X-Evolution: 00000002-0010

Hey

the actual content of the email

someone wrote:

&gt; lines of quotedtext
</code></pre>

<p>I am wondering if there is a way to use this information to easily reorganize the file, perhaps with perl or such.</p>
"
368057,15677,2008-12-15T11:20:14Z,9,Making a virtual package available via sys.modules,"<p>Say I have a package ""mylibrary"".</p>

<p>I want to make ""mylibrary.config"" available for import, either as a dynamically created module, or a module imported from an entirely different place that would then basically be ""mounted"" inside the ""mylibrary"" namespace.</p>

<p>I.e., I do:</p>

<pre><code>import sys, types
sys.modules['mylibrary.config'] = types.ModuleType('config')
</code></pre>

<p>Given that setup:</p>

<pre><code>&gt;&gt;&gt; import mylibrary.config    # -&gt; works

&gt;&gt;&gt; from mylibrary import config
&lt;type 'exceptions.ImportError'&gt;: cannot import name config
</code></pre>

<p>Even stranger:</p>

<pre><code>&gt;&gt;&gt; import mylibrary.config as X
&lt;type 'exceptions.ImportError'&gt;: cannot import name config
</code></pre>

<p>So it seems that using the direct import works, the other forms do not. Is it possible to make those work as well?</p>
"
368545,44354,2008-12-15T14:35:02Z,3,How can I stop a While loop?,"<p>I wrote a <code>while loop</code> in a function, but don't know how to stop it. When it doesn't meet its final condition, the loop just go for ever. How can I stop it?</p>

<pre><code>def determine_period(universe_array):
    period=0
    tmp=universe_array
    while True:
        tmp=apply_rules(tmp)#aplly_rules is a another function
        period+=1
        if numpy.array_equal(tmp,universe_array) is True:
            break    #i want the loop to stop and return 0 if the 
                     #period is bigger than 12
        if period&gt;12:  #i wrote this line to stop it..but seems it 
                       #doesnt work....help..
            return 0
        else:   
            return period
</code></pre>
"
368636,18866,2008-12-15T15:06:49Z,20,Questions about Setuptools and alternatives,"<p>I've seen a good bit of setuptools bashing on the internets lately. Most recently, I read James Bennett's <a href=""http://www.b-list.org/weblog/2008/dec/14/packaging/"">On packaging</a> post on why no one should be using setuptools. From my time in #python on Freenode, I know that there are a few souls there who absolutely detest it. I would count myself among them, but I do actually use it.</p>

<p>I've used setuptools for enough projects to be aware of its deficiencies, and I would prefer something better. I don't particularly like the egg format and how it's deployed. With all of setuptools' problems, I haven't found a better alternative.</p>

<p>My understanding of tools like <a href=""http://pip.openplans.org/"">pip</a> is that it's meant to be an easy_install replacement (not setuptools). In fact, pip uses some setuptools components, right?</p>

<p>Most of my packages make use of a setuptools-aware setup.py, which declares all of the dependencies. When they're ready, I'll build an sdist, bdist, and bdist_egg, and upload them to pypi.</p>

<p>If I wanted to switch to using pip, what kind of changes would I need to make to rid myself of easy_install dependencies? Where are the dependencies declared? I'm guessing that I would need to get away from using the egg format, and provide just source distributions. If so, how do i generate the egg-info directories? or do I even need to?</p>

<p>How would this change my usage of virtualenv? Doesn't virtualenv use easy_install to manage the environments?</p>

<p>How would this change my usage of the setuptools provided ""develop"" command? Should I not use that? What's the alternative?</p>

<p>I'm basically trying to get a picture of what my development workflow will look like.</p>

<p>Before anyone suggests it, I'm not looking for an OS-dependent solution. I'm mainly concerned with debian linux, but deb packages are not an option, for the reasons Ian Bicking outlines <a href=""http://blog.ianbicking.org/2008/12/14/a-few-corrections-to-on-packaging/"">here</a>.</p>
"
368805,13009,2008-12-15T15:57:24Z,49,Python UnicodeDecodeError - Am I misunderstanding encode?,"<p>Any thoughts on why this isn't working?  I really thought 'ignore' would do the right thing.</p>

<pre><code>&gt;&gt;&gt; 'add \x93Monitoring\x93 to list '.encode('latin-1','ignore')
Traceback (most recent call last):
  File ""&lt;interactive input&gt;"", line 1, in ?
UnicodeDecodeError: 'ascii' codec can't decode byte 0x93 in position 4: ordinal not in range(128)
</code></pre>
"
368980,46407,2008-12-15T16:45:43Z,3,Passing a Python array to a C++ vector using Swig,"<p>I have an array of objects in Python </p>

<pre><code>[obj1, obj2, obj3]
</code></pre>

<p>and I want to pass them to off to a C++ function to perform some computation. I'm using SWIG to write my interface. The class type of the passed object is already defined in C++. </p>

<p>What's the best way to do this?</p>
"
369230,44440,2008-12-15T18:12:22Z,1,What is the best way to serialize a ModelForm object in Django?,"<p>I am using Django and the Google Web Toolkit (GWT) for my current project. I would like to pass a ModelForm instance to GWT via an Http response so that I can ""chop"" it up and render it as I please. My goal is to keep the form in sync with changes to my models.py file, yet increase control I have over the look of the form. However, the django classes for serialization, serializers and simplejson, cannot serialize a ModelForm. Neither can cPickle. What are my alternatives? </p>
"
369261,23402,2008-12-15T18:23:35Z,2,using existing rrule to generate a further set of occurrences,"<p>I have an rrule instance e.g.</p>

<pre><code>     r = rrule(WEEKLY, byweekday=SA, count=10, dtstart=parse('20081001'))
</code></pre>

<p>where dtstart and byweekday may change.</p>

<p>If I then want to generate the ten dates that follow on from this
rrule, what's the best way of doing it? Can I assign a new value to
the _dtstart member of r? That seems to work but I'm not sure.</p>

<p>e.g. </p>

<pre><code>     r._dtstart = list(r)[-1] or something like that
</code></pre>

<p>Otherwise I guess I'll create a new rrule and access _dtstart, _count, _byweekday etc. of the original instance.</p>

<p>EDIT:</p>

<p>I've thought about it more, and I think what I should be doing is omitting the 'count' argument when I create the first rrule instance. I can still get ten occurrences the first time I use the rrule</p>

<pre><code>instances = list(r[0:10])
</code></pre>

<p>and then afterwards I can get more </p>

<pre><code>more = list(r[10:20])
</code></pre>

<p>I think that solves my problem without any ugliness</p>
"
369305,7883,2008-12-15T18:39:13Z,4,Is there anyone who has managed to compile mod_wsgi for apache on Mac OS X Leopard?,"<p>I'm working on a Django project that requires debugging on a multithreaded server. I've found mod_wsgi 2.0+ to be the easiest to work with, because of easy workarounds for python module reloading. Problem is can't get it to compile on Leopard. Is there anyone who has managed to do it so far, either for the builtin Apache or MAMP. I'd be grateful if someone posts a link to a precompiled binary (for intel, python 2.5, apache 2.2 or 2.0).</p>

<p><hr /></p>

<p>After 3 hours of trial and error I've managed to compile mod_wsgi 2.3 for the Apache that comes with Leopard. Here are the instructions in case anyone else needs this.</p>

<ol>
<li>./configure</li>
<li><p>Change 2 lines in the Makefile</p>

<p>CFLAGS =  -Wc,'-arch i386'</p>

<p>LDFLAGS =  -arch i386 -Wl,-F/Library/Frameworks -framework Python -u _PyMac_Error</p></li>
<li><p>make &amp;&amp; sudo make install</p></li>
<li><p>Make a thin binary of the original httpd</p>

<p>cd /usr/sbin </p>

<p>sudo mv ./httpd ./httpd.fat </p>

<p>sudo lipo ./httpd.fat -thin i386 -output ./httpd.i386 </p>

<p>sudo ln -s ./httpd.i386 ./httpd</p></li>
</ol>

<p>This should work on intel macbook, macbook pro, imac and mac mini. As I understood the problem is modwsgi won't compile against MacPython 2.5.2 because of some weird architecture missmatch problem. But, if you compile it as a thin binary it won't play with the Apache fat binary. So this hack solves the problem. The rest is pretty standard configuration, like on any other platform.</p>
"
369391,42153,2008-12-15T19:12:11Z,1,Is there an OpenSource BASIC interpreter in Ruby/Python?,"<p>I want something simple in order to experiment/hack. I've created a lot interpreters/compilers for c and I just want something simple. A basic BASIC :D</p>

<p>If you don't know any (I've done my google search...), yacc/bison is the only way?</p>

<p>Thx</p>
"
369414,9296,2008-12-15T19:19:50Z,2,Python: os.environ.get('SSH_ORIGINAL_COMMAND') returns None,"<p>Trying to follow a technique found at <code>bzr</code> and <code>gitosis</code> I did the following:</p>

<p>added to <code>~/.ssh/authorized_keys</code> the <code>command=""my_parser""</code> parameter
which point to a python script file named 'my_parser' and located in 
<code>/usr/local/bin</code>  (file was chmoded as 777)</p>

<p>in that script file <code>'/usr/local/bin/my_parser'</code> I got the following
lines:</p>

<pre><code>#!/usr/bin/env python
import os
print os.environ.get('SSH_ORIGINAL_COMMAND', None)
</code></pre>

<p>When trying to ssh e.g. <code>ssh localhost</code>
I get <code>None</code> on the terminal and then the connection is closed.</p>

<p>I wonder if anyone have done such or alike in the past and can help me
with this.</p>

<p>Is there anything I should do in my python file in order to get that
environment variable? </p>
"
369664,NA,2008-12-15T20:53:50Z,4,How to discover the type of the NAT a given interface is behind,"<p>I would like to discover the type of the NAT (FullCone, Restricted Cone, Port Restricted cone, Symmetric) a given network interface is behind.  </p>

<p>I've tested different tools (<a href=""http://freshmeat.net/projects/jstun/"" rel=""nofollow"">http://freshmeat.net/projects/jstun/</a>, <a href=""http://code.google.com/p/boogu/"" rel=""nofollow"">http://code.google.com/p/boogu/</a>) but they report different results for the same interface.  </p>

<p>I'm looking for a definitive answer in Python (or other languages, 2nd choice being Java, if nothing else is available).</p>
"
369764,15625,2008-12-15T21:25:32Z,2,IPv6 decoder for pcapy/impacket,"<p>I use the <a href=""http://oss.coresecurity.com/projects/pcapy.html"" rel=""nofollow"">pcapy</a>/<a href=""http://oss.coresecurity.com/projects/impacket.html"" rel=""nofollow"">impacket</a> library to decode network packets in Python. It has an IP decoder which knows about the syntax of IPv4 packets but apparently no IPv6 decoder.</p>

<p>Does anyone get one? </p>

<p>In a private correspondance, the Impacket maintainers say it may be better to start with <a href=""http://www.secdev.org/projects/scapy/"" rel=""nofollow"">Scapy</a></p>
"
369898,22724,2008-12-15T22:23:18Z,104,Difference between dict.clear() and assigning {} in Python,"<p>In python, is there a difference between calling <code>clear()</code> and assigning <code>{}</code> to a dictionary? If yes, what is it?
Example:<pre><code>d = {""stuff"":""things""}
d.clear()   #this way
d = {}      #vs this way
</code></pre></p>
"
370075,NA,2008-12-15T23:39:23Z,4,command-line world clock?,"<p>Is there a script to display a simple world clock (time in various places around the world) on a *nix terminal?</p>

<p>I was thinking of writing a quick Python script, but I have a feeling that's gonna be more work than I think (e.g. due to config and output format) - not to mention reinventing the wheel...</p>
"
370077,91385,2008-12-15T23:39:59Z,2,How do I put a SQLAlchemy label on the result of an arithmetic expression?,"<p>How do I translate something like this into SQLAlchemy?</p>

<pre><code>select x - y as difference...
</code></pre>

<p>I know how to do:</p>

<pre><code>x.label('foo')
</code></pre>

<p>...but I'm not sure where to put the "".label()"" method call below:</p>

<pre><code>select ([table.c.x - table.c.y], ...
</code></pre>
"
370160,91385,2008-12-16T00:16:41Z,3,How do I ORDER BY an arithmetic express in SQLAlchemy?,"<p>How do I translate something like this into SQLAlchemy?</p>

<pre><code>SELECT (a * b) - (x + y) / z AS result
FROM table
ORDER BY result
</code></pre>
"
370174,45076,2008-12-16T00:27:41Z,3,"SQLAlchemy with count, group_by and order_by using the ORM","<p>I've got several function where I need to do a one-to-many join, using count(), group_by, and order_by.  I'm using the sqlalchemy.select function to produce a query that will return me a set of id's, which I then iterate over to do an ORM select on the individual records.  What I'm wondering is if there is a way to do what I need using the ORM in a single query so that I can avoid having to do the iteration.</p>

<p>Here's an example of what I'm doing now.  In this case the entities are Location and Guide, mapped one-to-many.  I'm trying get a list of the top locations sorted by how many guides they are related to.</p>

<pre><code>def popular_world_cities(self):
    query = select([locations.c.id, func.count(Guide.location_id).label('count')],
                   from_obj=[locations, guides],
                   whereclause=""guides.location_id = locations.id AND (locations.type = 'city' OR locations.type = 'custom')"",
                   group_by=[Location.id],
                   order_by='count desc',
                   limit=10)
    return map(lambda x: meta.Session.query(Location).filter_by(id=x[0]).first(), meta.engine.execute(query).fetchall())
</code></pre>

<p><strong>Solution</strong></p>

<p>I've found the best way to do this.  Simply supply a <code>from_statement</code> instead of a <code>filter_by</code> or some such. Like so:</p>

<pre><code>meta.Session.query(Location).from_statement(query).all()
</code></pre>
"
370357,46521,2008-12-16T03:06:52Z,136,Python variable scope error,"<p>I've been programming for many years, and recently started learning Python. The following code works as expected in both python 2.5 and 3.0 (on OS X if that matters):</p>

<pre><code>a, b, c = (1, 2, 3)

print(a, b, c)

def test():
    print(a)
    print(b)
    print(c)    # (A)
    #c+=1       # (B)
test()
</code></pre>

<p>However, when I uncomment line <strong>(B)</strong>, I get an <em>UnboundLocalError: 'c' not assigned</em> at line <strong>(A)</strong>. The values of <em>a</em> and <em>b</em> are printed correctly. This has me completely baffled for two reasons:</p>

<ol>
<li><p>Why is there a runtime error thrown at line <strong>(A)</strong> because of a later statement on line <strong>(B)</strong>?</p></li>
<li><p>Why are variables <em>a</em> and <em>b</em> printed as expected, while <em>c</em> raises an error?</p></li>
</ol>

<p>The only explanation I can come up with is that a <strong>local</strong> variable <em>c</em> is created by the assignment <code>c+=1</code>, which takes precedent over the ""global"" variable <em>c</em> even before the local variable is created. Of course, it doesn't make sense for a variable to ""steal"" scope before it exists.</p>

<p>Could someone please explain this behavior?</p>
"
370680,44817,2008-12-16T07:55:22Z,33,Differences between Python game libraries Pygame and Pyglet?,"<p>I've had some experience with Pygame, but there seems to be a lot of buzz around Pyglet these days.</p>

<p>How do these two libraries compare? What would be the advantage of using one over the other, both in features and ease of use?</p>

<p>Finally, would you say that one is more Pythonic than the other?</p>
"
370733,6583,2008-12-16T08:50:10Z,12,Trac documentation?,"<p>I'm trying to write my first little plugin for <a href=""http://trac.edgewall.org"">Trac</a> and am kind of lost as to what the API exactly is. For example, exactly which fields are offered for ""ticket"" objects, among many other things.</p>

<p>Does anyone know of a good place to look for Trac API documentation? Can't find anything on the web site but maybe I'm just looking wrong...</p>
"
371037,985,2008-12-16T11:23:32Z,14,Has anyone tried NetBeans 6.5 Python IDE?,"<p>Has anyone tried the <a href=""http://en.wikipedia.org/wiki/NetBeans#Other%5FNetBeans%5FIDE%5FBundles"" rel=""nofollow"">NetBeans 6.5 Python IDE</a>?</p>

<p>What are your opinions? Is it better/worse than <a href=""http://en.wikipedia.org/wiki/PyDev"" rel=""nofollow"">PyDev</a>? Do you like it? How does it integrate with source control tools (especially <a href=""http://en.wikipedia.org/wiki/Mercurial"" rel=""nofollow"">Mercurial</a>)?</p>
"
371155,46646,2008-12-16T12:27:53Z,-3,String conversion in Python,"<p>I'm using Python 2.5. The DLL I imported is created using the CLR. The DLL function is returning a string. I'm trying to apply ""partition"" attribute to it. I'm not able to do it. Even the partition is not working. I think ""all strings returned from CLR are returned as Unicode"".</p>
"
371419,8027,2008-12-16T14:15:10Z,2,What's the most pythonic way of testing that inputs are well-formed numbers,"<p>I have a function that expects real numbers (either integers or floats) as its input, and I'm trying to validate this input before doing mathematical operations on it.</p>

<p>My first instinct is to cast inputs as floats from within a try-except block.</p>

<pre><code>try:
   myinput = float(input)
except:
   raise ValueError(""input is not a well-formed number"")
</code></pre>

<p>I could also call <code>isinstance(mydata, (float, int, long) )</code> but the list of ""all these could be numbers"" seems a bit inelegant to me.</p>

<p>What's the most pythonic way of going about it? Is there another option I overlooked?</p>
"
371753,13009,2008-12-16T16:04:38Z,50,Python - Using __getattribute__ method,"<p>I want to override access to one variable in a class, but return all others normally.  How do I accomplish this with <code>__getattribute__</code>?</p>

<p>I tried the following (which should also illustrate what I'm trying to do) but I get a recursion error:</p>

<pre><code>class D(object):
    def __init__(self):
        self.test=20
        self.test2=21
    def __getattribute__(self,name):
        if name=='test':
            return 0.
        else:
            return self.__dict__[name]

&gt;&gt;&gt; print D().test
0.0
&gt;&gt;&gt; print D().test2
...
RuntimeError: maximum recursion depth exceeded in cmp
</code></pre>
"
372007,4435,2008-12-16T17:21:05Z,3,When is white space not important in Python?,"<p>When is white space not important in Python?</p>

<p>It seems to be ignored inside a list, for example:</p>

<pre><code>for x in range(5):
    list += [x, 1
,2,3,

     4,5]
</code></pre>
"
372042,461736,2008-12-16T17:32:27Z,302,Difference between abstract class and interface in Python,"<p>What is the difference between abstract class and interface in Python?</p>
"
372102,1384652,2008-12-16T17:49:12Z,7,UTF in Python Regex,"<p>I'm aware that Python 3 fixes a lot of UTF issues, I am not however able to use Python 3, I am using 2.5.1</p>

<p>I'm trying to regex a document but the document has UTF hyphens in it – rather than -. Python can't match these and if I put them in the regex it throws a wobbly.</p>

<p>How can I force Python to use a UTF string or in some way match a character such as that?</p>

<p>Thanks for your help</p>
"
372365,22306,2008-12-16T19:22:27Z,14,Set timeout for xmlrpclib.ServerProxy,"<p>I am using xmlrpclib.ServerProxy to make RPC calls to a remote server. If there is not a network connection to the server it takes the default 10 seconds to return a socket.gaierror to my program. </p>

<p>This is annoying when doing development without a network connection, or if the remote server is down. Is there a way to update the timeout on my ServerProxy object?</p>

<p>I can't see a clear way to get access to the socket to update it.</p>
"
372465,NA,2008-12-16T19:50:23Z,0,Protecting online static content,"<p>How would I only allow users authenticated via Python code to access certain files on the server?</p>

<p>For instance, say I have <code>/static/book.txt</code> which I want to protect. When a user accesses <code>/some/path/that/validates/him</code>, a Python script deems him worthy of accessing <code>/static/book.txt</code> and redirects him to that path.</p>

<p>How would I stop users who bypass the script and directly access <code>/static/book.txt</code>?</p>
"
372511,30181,2008-12-16T20:04:06Z,2,What is the object oriented programming computing overhead cost?,"<p>I have a large set of data (a data cube of 250,000 X 1,000 doubles, about a 4 gig file) and I want to manipulate it using a previous set of OOP classes I have written in Python.  Currently the data set is already so large that to read into my machine memory I have to at least split it in half so computing overhead is a concern.  My OOP classes create new objects (in this case I will need 250,000 new objects, each object is an array of 1,000 doubles) to handle the data.  What is the overhead in terms of memory and computing required in creating objects for a generic OOP language?  In python?  What about in C++?</p>

<p>Yes, I realize I could make a new class that is an array.  But 1) I already have these classes finished and 2) I put each object that I create back into an array for access later anyways.  The question is pedagogical </p>

<p>*update:  I want to be efficient with time, my time and the computers. I don't want to rewrite a program I already have if I don't have to and spending time optimizing the code wastes my time, I don't care <em>that</em> much if I waste the computers time.  I actually do have a 64bit machine with 4Gig ram.  The data is an image and I need to do several filters on each pixel.*</p>
"
372885,NA,2008-12-16T21:49:09Z,674,How do I connect to a MySQL Database in Python?,"<p>How do I connect to a MySQL database using a python program?</p>
"
373020,40195,2008-12-16T22:33:02Z,12,Finding the Current Active Window in Mac OS X using Python,"<p>Is there a way to find the application name of the current active window at a given time on Mac OS X using Python?</p>
"
373067,NA,2008-12-16T22:53:42Z,2,List all the classes that currently exist,"<p>I'm creating a simple API that creates typed classes based on JSON data that has a mandatory 'type' field defined in it.  It uses this string to define a new type, add the fields in the JSON object, instantiate it, and then populate the fields on the instance.</p>

<p>What I want to be able to do is allow for these types to be optionally pre-defined in whatever application is using my module.  This is so methods and other application-specific attributes not found in the JSON object can be added.  I'd like to have my module check if a type already exists, and if it does, use that instead of dynamically creating the type.  It would still add attributes from the JSON object, but it would be recycling the existing type.</p>

<p>My JSON data is:</p>

<pre><code>{
    ""type"": ""Person"",
    ""firstName"": ""John"",
    ""lastName"": ""Smith"",
    ""address"": {
    	""streetAddress"": ""21 2nd Street"",
    	""city"": ""New York"",
    	""state"": ""NY"",
    	""postalCode"": 10021
    },
    ""phoneNumbers"": [
    	""212 555-1234"",
    	""646 555-4567""
    ]
}
</code></pre>

<p>My code so far (assume json_object is a dict at this point):</p>

<pre><code>if not json_object.has_key('type'):
    raise TypeError('JSON stream is missing a ""type"" attribute.')

##### THIS IS WHERE I WANT TO CHECK IF THE TYPE BY THAT NAME EXISTS ALREADY ####
# create a type definition and add attributes to it
definition = type(json_object['type'], (object,), {})
for key in json_object.keys():
    setattr(definition, key, None)

# instantiate and populate a test object
tester = definition()
for key, value in json_object.iteritems():
    setattr(tester, key, value)
</code></pre>
"
373189,46862,2008-12-16T23:42:35Z,1,XPath in XmlStream.addObserver doesn't work the way it should,"<p>What I want to do is to react only on specified root elements. For example, if user sends XmlStream that looks like:</p>

<pre><code>&lt;auth&gt;
    &lt;login&gt;user&lt;/login&gt;
    &lt;pass&gt;dupa.8&lt;/pass&gt;
&lt;/auth&gt;
</code></pre>

<p>My method ._auth should be executed. I've done it with addObserver method called inside connectionMade method.</p>

<pre><code>self.addObserver(""/auth"", self._auth)
</code></pre>

<p>AFAIK XPath - if I write ""/auth"" it means that I want my root element to be ""auth"", so that message:</p>

<pre><code>&lt;longtagislong&gt;
    &lt;auth&gt;...&lt;/auth&gt;
&lt;/longtagislong&gt;
</code></pre>

<p>... should be rejected, because auth isn't root.</p>

<p>But Twisted however doesn't work the way I thought it should - my _auth method is executed when second message appears (with auth element inside the tree), not the first one - with auth element as a root.</p>

<p>So, my question is: how to tell Twisted and addObserver method that I want to react only if root element's name is ""auth""?</p>
"
373194,32933,2008-12-16T23:45:02Z,15,Python regex for MD5 hash,"<p>I've come up with:</p>

<pre><code>re.findall(""([a-fA-F\d]*)"", data)
</code></pre>

<p>but it's not very fool proof, is there a better way to grab all MD5-hash codes?</p>
"
373212,44817,2008-12-16T23:52:47Z,3,Close an easygui Python script with the standard 'close' button,"<p>I've created a <em>very</em> simple app, which presents an easygui entrybox() and continues to loop this indefinitely as it receives user input.</p>

<p>I can quit the program using the Cancel button as this returns None, but I would also like to be able to use the standard 'close' button to quit the program. (ie. top right of a Windows window, top left of a Mac window) This button currently does nothing.</p>

<p>Taking a look at the easygui module I found this line: </p>

<pre><code>root.protocol('WM_DELETE_WINDOW', denyWindowManagerClose )
</code></pre>

<p>This would seem to be the culprit. I'm no TKinter expert but I could probably work out how to alter this handler to act the way I want.</p>

<p>However, as I'd rather not mess about with the easygui module, Is there a way to override this behavior from my main script, and have the close button either close the program outright or return None?</p>
"
373335,4737,2008-12-17T00:56:31Z,137,How do I get a Cron like scheduler in Python?,"<p>I'm looking for a library in Python which will provide <code>at</code> and <code>cron</code> like functionality.</p>

<p>I'd quite like have a pure Python solution, rather than relying on tools installed on the box; this way I run on machines with no cron.</p>

<p>For those unfamiliar with <code>cron</code>: you can schedule tasks based upon an expression like: </p>

<pre><code> 0 2 * * 7 /usr/bin/run-backup # run the backups at 0200 on Every Sunday
 0 9-17/2 * * 1-5 /usr/bin/purge-temps # run the purge temps command, every 2 hours between 9am and 5pm on Mondays to Fridays.
</code></pre>

<p>The cron time expression syntax is less important, but I would like to have something with this sort of flexibility. </p>

<p>If there isn't something that does this for me out-the-box, any suggestions for the building blocks to make something like this would be gratefully received.</p>

<p><strong>Edit</strong>
I'm not interested in launching processes, just ""jobs"" also written in Python - python functions. By necessity I think this would be a different thread, but not in a different process.</p>

<p>To this end, I'm looking for the expressivity of the cron time expression, but in Python. </p>

<p>Cron <em>has</em> been around for years, but I'm trying to be as portable as possible. I cannot rely on its presence.</p>
"
373370,3715,2008-12-17T01:11:07Z,20,"How do I get the UTC time of ""midnight"" for a given timezone?","<p>The best I can come up with for now is this monstrosity:</p>

<pre><code>&gt;&gt;&gt; datetime.utcnow() \
...   .replace(tzinfo=pytz.UTC) \
...   .astimezone(pytz.timezone(""Australia/Melbourne"")) \
...   .replace(hour=0,minute=0,second=0,microsecond=0) \
...   .astimezone(pytz.UTC) \
...   .replace(tzinfo=None)
datetime.datetime(2008, 12, 16, 13, 0)
</code></pre>

<p>I.e., in English, get the current time (in UTC), convert it to some other timezone, set the time to midnight, then convert back to UTC.</p>

<p>I'm not just using now() or localtime() as that would use the server's timezone, not the user's timezone.</p>

<p>I can't help feeling I'm missing something, any ideas?</p>
"
373406,13055,2008-12-17T01:38:54Z,7,"Secure, sandboxable user exposed programming language / environment?","<p>Beyond offering an API for my website, I'd like to offer users the ability to write simple scripts that would run on my servers . The scripts would have access to objects owned by the user and be able to manipulate, modify, and otherwise process their data.</p>

<p>I'd like to be able to limit resources taken by these scripts at a fine level (eg. max execution time should be 100ms). I'd also like to ensure a secure sandbox such that each user will have access to only a limited set of data and resources, and be prevented from accessing disk, other people's data, etc.</p>

<p>Generally the scripts will be very simple (eg. create the sum or average of the values that match certain criteria), and they'll often be used in templates (eg. fill in the value of this cell or html element with the average or sum).</p>

<p>Ideally I'd like to use a sandboxed subset of a well know, commonly available programming language so it's easy for users to pick up. The backend is written in Python, so a Python based language could have benefits, but I'm open to other languages and technologies. Javascript is also attractive due to its simple nature and common availability.</p>

<p>The languages should support creation of DSLs and libraries. </p>

<p>The target audience is a general user base for a web based application, not necessarily very technical. In other words, it's not targeted at a base with particular knowledge of any particular programming language. My expectation is a subset of users will create scripts that will be used by the larger majority. </p>

<p>Any ideas or recommendations for the language and technology? Any examples of others trying this and the successes and failures they encountered?</p>
"
373459,29903,2008-12-17T02:06:01Z,11,split string on a number of different characters,"<p>I'd like to split a string using one or more separator characters.</p>

<p>E.g. ""a b.c"", split on "" "" and ""."" would give the list [""a"", ""b"", ""c""].</p>

<p>At the moment, I can't see anything in the standard library to do this, and my own attempts are a bit clumsy. E.g.</p>

<pre><code>def my_split(string, split_chars):
    if isinstance(string_L, basestring):
        string_L = [string_L]
    try:
        split_char = split_chars[0]
    except IndexError:
        return string_L

    res = []
    for s in string_L:
        res.extend(s.split(split_char))
    return my_split(res, split_chars[1:])

print my_split(""a b.c"", [' ', '.'])
</code></pre>

<p>Horrible! Any better suggestions?</p>
"
373639,46920,2008-12-17T04:16:02Z,20,Running interactive commands in Paramiko,"<p>I'm trying to run an interactive command through paramiko.  The cmd execution tries to prompt for a password but I do not know how to supply the password through paramiko's exec_command and the execution hangs.  Is there a way to send values to the terminal if a cmd execution expects input interactively?</p>

<pre><code>ssh = paramiko.SSHClient()
ssh.connect(server, username=username, password=password)
ssh_stdin, ssh_stdout, ssh_stderr = ssh.exec_command(""psql -U factory -d factory -f /tmp/data.sql"")
</code></pre>

<p>Does anyone know how this can addressed? Thank you.</p>
"
374217,47013,2008-12-17T10:53:00Z,7,Convert C++ Header Files To Python,"<p>I have a C++ header that contains #define statements, Enums and Structures.  I have tried using the h2py.py script that is included with Python to no avail (except giving me the #defines converted).  Any help would be greatly appreciated.</p>
"
374245,2220518,2008-12-17T11:11:33Z,8,How to retrieve the parent node using cElementTree?,"<p>for the xml </p>

<pre><code>&lt;grandparent&gt;
  &lt;parent1&gt;
     &lt;child&gt;data1&lt;/child&gt;
  &lt;/parent1&gt;
  &lt;parent2&gt;
     &lt;child&gt;data2&lt;/child&gt;
  &lt;/parent2&gt;
&lt;/grandparent&gt;
</code></pre>

<p>I need the list containing tuples of parent,data for each parent in xml.</p>

<p>Is there a way to do it USING cElementTree? I am able to do it for child,data, but unfortunately child is identical in all the values, hence it is of not much use.</p>
"
374318,46646,2008-12-17T11:52:51Z,3,conversion of unicode string in python,"<p>I need to convert unicode strings in Python to other types such as unsigned and signed int 8 bits,unsigned and signed int 16 bits,unsigned and signed int 32 bits,unsigned and signed int 64 bits,double,float,string,unsigned and signed 8 bit,unsigned and signed 16 bit, unsigned and signed 32 bit,unsigned and signed 64 bit.</p>

<p>I need help from u people.</p>
"
374480,36131,2008-12-17T13:05:08Z,4,Where is a python real project to be used as example for the unit-test part?,"<p>I'm looking for a python project to use as example to copy the design of the unit test parts.</p>

<p>The project should have these features:</p>

<ol>
<li>its code is almost fully unit tested</li>
<li>the code is distributed in many packages, there are more that one level of packages </li>
<li>all the test can be run with a single command, for example with <code>python test.py</code></li>
</ol>

<p>I need that the project should use the same test convention for all the code contained. I saw the whole python project but the the various packages are tested with different conventions. For example the setuptools packages uses an ad hoc adaption of unittest library while the other packages doesn't. </p>

<p>I need that the project doesn't use a ad-hoc or a highly customized testing framework, because I want reuse its test architecture in my project.</p>
"
374572,46646,2008-12-17T13:47:51Z,-1,need help-variable creation in Python,"<p>I want to create variables as <code>a1</code>,<code>a2</code>,<code>a3</code>...<code>a10</code>.
For that I used a for loop. As the variable in loop increments I need to create a variable as above.</p>

<p>Can anyone give me an idea?</p>

<p>At the time of creation I also need to be able to assign values to them.</p>

<p>That's where I'm getting syntax error.</p>
"
374626,46634,2008-12-17T14:09:18Z,30,"How can I find all the subsets of a set, with exactly n elements?","<p>I am writing a program in Python, and I realized that a problem I need to solve requires me, given a set <code>S</code> with <code>n</code> elements (|S|=n), to test a function on all possible subsets of a certain order <code>m</code> (i.e. with <em>m</em> number of elements). To use the answer to produce a partial solution, and then try again with the next order m=m+1, until m=n.</p>

<p>I am on my way to write a solution of the form:</p>

<pre><code>def findsubsets(S, m):
    subsets = set([])
    ...
    return subsets
</code></pre>

<p>But knowing Python I expected a solution to be already there.</p>

<p>What is the best way to accomplish this?</p>
"
374763,11992,2008-12-17T14:49:54Z,7,Should I use get_/set_ prefixes in Python method names?,"<p>In Python properties are used instead of the Java-style getters, setters. So one rarely sees get... or set.. methods in the public interfaces of classes.</p>

<p>But in cases were a property is not appropriate one might still end up with methods that behave like getters or setters. Now my questions: Should these method names start with <code>get_</code> / <code>set_</code>? Or is this unpythonic vebosity since it is often obvious what is meant (and one can still use the docstring to clarify non-obvious situations)?</p>

<p>This might be a matter of personal taste, but I would be interested in what the majority thinks about this? What would you prefer as an API user?</p>

<p>Example: Say we have an object representing multiple cities. One might have a method <code>get_city_by_postalcode(postalcode)</code> or one could use the shorter name <code>city_by_postalcode</code>. I tend towards the later.</p>
"
374768,1288,2008-12-17T14:51:23Z,4,How do you test a file.read() error in Python?,"<p>I have the following code (adapted from an example given in <a href=""http://diveintopython.net/file_handling/file_objects.html#d0e14928"" rel=""nofollow"">Dive Into Python</a>) that reads the entire contents of a file into a buffer.</p>

<pre><code>buffer = """"

try:
    file = open(postFileName, 'rU')
    try:
        # Read the entire POST log file into a buffer
        buffer += file.read()
    finally:
        file.close()
except IOError:
    buffer += ""The POST file could not be opened.""
</code></pre>

<p>What's bothering me about  this code is the inner try/finally block without an except block.  Do I need an except block in there?  Can the call to <code>read()</code> fail after the call to <code>open()</code> was successful?  I know the try-except-finally is now unified, so adding one, at least syntactically, is not a problem.</p>

<p>If I add an except block, under what conditions will it be executed, and how do I write a test to make sure it runs under those conditions?</p>

<p>Additionally, if I <em>don't</em> need an except block, then why do I need the inner try/finally block at all?</p>
"
375052,44918,2008-12-17T16:05:31Z,4,How to send clip names using LiveAPI (of Ableton Live),"<p>When an audio or midi clip is played (triggered), its name needs to be sent using OSC to <a href=""http://vvvv.org/"" rel=""nofollow"">another application</a>.</p>

<p><a href=""http://www.assembla.com/wiki/show/live-api"" rel=""nofollow"">LiveAPI</a> is an interface which allows one to explore and automate <a href=""http://www.ableton.com/"" rel=""nofollow"">Ableton Live</a> using python scripts.</p>

<p>The code to do this must be written in a python script, which must be placed in a specific folder where Ableton Live can find it, selected in Live's Preferences.</p>

<p>More information about the LiveAPI can be found on these sites:<br/>
<a href=""http://www.assembla.com/wiki/show/live-api"" rel=""nofollow"">http://www.assembla.com/wiki/show/live-api</a><br/>
<a href=""http://groups.google.com/group/liveapi"" rel=""nofollow"">http://groups.google.com/group/liveapi</a></p>
"
375154,1288,2008-12-17T16:33:41Z,30,How do I get the time a file was last modified in Python?,"<p>Assuming the file exists (using <code>os.path.exists(filename)</code> to first make sure that it does), how do I display the time a file was last modified?  This is on Linux if that makes any difference.</p>
"
375427,5861,2008-12-17T17:56:34Z,327,Non-blocking read on a subprocess.PIPE in python,"<p>I'm using the <a href=""http://docs.python.org/library/subprocess.html"">subprocess module</a> to start a subprocess and connect to it's output stream (stdout). I want to be able to execute non-blocking reads on its stdout. Is there a way to make .readline non-blocking or to check if there is data on the stream before I invoke <code>.readline</code>? I'd like this to be portable or at least work under Windows and Linux.</p>

<p>here is how I do it for now (It's blocking on the <code>.readline</code> if no data is avaible):</p>

<pre><code>p = subprocess.Popen('myprogram.exe', stdout = subprocess.PIPE)
output_str = p.stdout.readline()
</code></pre>
"
375620,34395,2008-12-17T18:54:03Z,4,Prevent ftplib from Downloading a File in Progress?,"<p>We have a ftp system setup to monitor/download from remote ftp servers that are not under our control. The script connects to the remote ftp, and grabs the file names of files on the server, we then check to see if its something that has already been downloaded. If it hasn't been downloaded then we download the file and add it to the list.</p>

<p>We recently ran into an issue, where someone on the remote ftp side, will copy in a massive single file(>1GB) then the script will wake up see a new file and begin downloading the file that is being copied in.</p>

<p>What is the best way to check this? I was thinking of grabbing the file size waiting a few seconds checking the file size again and see if it has increased, if it hasn't then we download it. But since time is of the concern, we can't wait a few seconds for every single file set and see if it's file size has increased. </p>

<p>What would be the best way to go about this, currently everything is done via pythons ftplib, how can we do this aside from using the aforementioned method.</p>

<p>Yet again let me reiterate this, we have 0 control over the remote ftp sites.</p>

<p>Thanks.</p>

<p>UPDATE1:</p>

<p>I was thinking what if i tried to rename it... since we have full permissions on the ftp, if the file upload is in progress would the rename command fail?</p>

<p>We don't have any real options here... do we?</p>

<p>UPDATE2:
Well here's something interesting some of the ftps we tested on appear to automatically allocate the space once the transfer starts.</p>

<p>E.g. If i transfer a 200mb file to the ftp server. While the transfer is active if i connect to the ftp server and do a size while the upload is happening. It shows 200mb for the size. Even though the file is only like 10% complete.</p>

<p>Permissions also seem to be randomly set the FTP Server that comes with IIS sets the permissions AFTER the file is finished copying. While some of the other older ftp servers set it as soon as you send the file.</p>

<p>:'(</p>
"
375820,3853,2008-12-17T19:54:46Z,4,How do I create a wx.Image object from in-memory data?,"<p>I'm writing a GUI application in Python using wxPython and I want to display an image in a static control (<code>wx.StaticBitmap</code>).</p>

<p>I can use <a href=""http://www.wxpython.org/docs/api/wx-module.html#ImageFromStream"" rel=""nofollow""><code>wx.ImageFromStream</code></a> to load an image from a file, and this works OK:</p>

<pre><code>static_bitmap = wx.StaticBitmap(parent, wx.ID_ANY)
f = open(""test.jpg"", ""rb"")
image = wx.ImageFromStream(f)
bitmap = wx.BitmapFromImage(image)
static_bitmap.SetBitmap(bitmap)
</code></pre>

<p>But, what I really want to be able to do is create the image from data in memory. So, if I write</p>

<pre><code>f = open(""test.jpg"", ""rb"")
data = f.read()
</code></pre>

<p>how can I create a <code>wx.Image</code> object from <code>data</code>?</p>

<p>Thanks for your help!</p>
"
376111,3045,2008-12-17T21:37:46Z,15,How do you override vim options via comments in a python source code file?,"<p>I would like to set some vim options in one file in the comments section.</p>

<p>For example, I would like to set this option in one file</p>

<pre><code>set syntax=python
</code></pre>

<p>The file does not have a .py extension and I am not interested in making my vim installation recognise all files with this extension as python files.</p>

<p>I know this can be done because I have seen it, but my googling for this has not yet been fruitful.</p>
"
376221,13055,2008-12-17T22:12:22Z,3,Programmatic mail-merge style data injection into existing Excel spreadsheets?,"<p>I'd like to automate data entry into Excel spreadsheets. User data will exist on a web site, and when the user requests it, that data will need to be injected into an Excel spreadsheet. The complication is that the format of the Excel spreadsheet can vary significantly between users - it'll be user defined.</p>

<p>I've been thinking of this as a templating problem - the excel spreadsheet provides the template, and the task s to inject data into specific user defined cells within that template.</p>

<p>I've looked at xlwt and xlrd for python, as well as jexcelapi and POI-HSSF for Java. They seem like they could work, but given that I simply want to put values into certain cells, they seem like overkill. I'm also worried about re-writing the user's spreadsheet after processing; seems like an opportunity to introduce errors into the process.</p>

<p>Is there a way to tell excel to merge the data from one sheet into another? I'm thinking I could produce a simple spreadsheet that has only the data, and somehow get Excel to merge it into the user's existing spreadsheet.</p>

<p>Make sense? Better approaches?</p>
"
376461,38140,2008-12-17T23:39:39Z,81,String concatenation vs. string substitution in Python,"<p>In Python, the where and when of using string concatenation versus string substitution eludes me. As the string concatenation has seen large boosts in performance, is this (becoming more) a stylistic decision rather than a practical one?</p>

<p>For a concrete example, how should one handle construction of flexible URIs:</p>

<pre><code>DOMAIN = 'http://stackoverflow.com'
QUESTIONS = '/questions'

def so_question_uri_sub(q_num):
    return ""%s%s/%d"" % (DOMAIN, QUESTIONS, q_num)

def so_question_uri_cat(q_num):
    return DOMAIN + QUESTIONS + '/' + str(q_num)
</code></pre>

<p>Edit: There have also been suggestions about joining a list of strings and for using named substitution. These are variants on the central theme, which is, which way is the Right Way to do it at which time? Thanks for the responses!</p>
"
376765,16524,2008-12-18T02:48:26Z,3,IntelliJ Python plug-in,"<p>I've been using IntelliJ IDEA at the day job for Java development for a few weeks now.  I'm really impressed with it and I'm looking to extend it for other programming languages that I tinker with, starting with Python. I found this plug-in, <a href=""https://pythonid.dev.java.net/"" rel=""nofollow"">pythonid</a>. I figured I would look for some input on the Stack before proceeding. First, has anyone given pythonid a try and and have any feedback about it (the site for it is a bit weak)? And second, sre there any other Python plug-ins for IntelliJ IDEA that might be better?</p>
"
377000,46646,2008-12-18T05:43:39Z,-3,need help-variable creation in Python (continuation),"<p><a href=""http://stackoverflow.com/questions/374572/need-help-variable-creation-in-python#374604"">That</a> was helpful kgiannakakis.
I'm facing a problem as below:</p>

<pre><code>a = ['zbc','2.3']
for i in range(0,5):
    exec('E%d=%s' %(i,a[i]))
</code></pre>

<p>This results in:</p>

<pre>
Traceback (most recent call last):
  File """", line 2, in 
    exec('E%d=%s' %(i,a[i]))
  File """", line 1, in 
NameError: name 'zbc' is not defined
</pre>
"
377017,38796,2008-12-18T05:55:36Z,181,Test if executable exists in Python?,"<p>In Python, is there a portable and simple way to test if an executable program exists?</p>

<p>By simple I mean something like the <code>which</code> command which would be just perfect. I don't want to search PATH manually or something involving trying to execute it with <code>Popen</code> &amp; al and see if it fails (that's what I'm doing now, but imagine it's <code>launchmissiles</code>)</p>
"
377204,46308,2008-12-18T08:28:49Z,4,How to set and preserve minimal width?,"<p>I use some wx.ListCtrl classes in wx.LC_REPORT mode, augmented with ListCtrlAutoWidthMixin.</p>

<p>The problem is: When user double clicks the column divider (to auto resize column), column width is set to match the width of contents. This is done by the wx library and resizes column to just few pixels when the control is empty.</p>

<p>I tried calling </p>

<blockquote>
  <p>self.SetColumnWidth(colNumber, wx.LIST_AUTOSIZE_USEHEADER)</p>
</blockquote>

<p>while creating the list, but it just sets the initial column width, not the minimum allowed width. </p>

<p>Anyone succeeded with setting column minimal width?</p>

<p>EDIT: Tried catching </p>

<pre> wx.EVT_LEFT_DCLICK </pre>

<p>with no success. This event isn't generated when user double clicks column divider. Also tried with </p>

<pre>wx.EVT_LIST_COL_END_DRAG </pre> 

<p>this event is generated, usually twice, for double click, but I don't see how can I retrieve information about new size, or how to differentiate double click from drag&amp;drop. Anyone has some other ideas?</p>
"
377254,452521,2008-12-18T08:51:22Z,23,Stackless python and multicores?,"<p>So, I'm toying around with <a href=""http://www.stackless.com/"">Stackless Python</a> and a question popped up in my head, maybe this is ""assumed"" or ""common"" knowledge, but I couldn't find it actually written anywhere on the <a href=""http://www.stackless.com/"">stackless site</a>.</p>

<p>Does <a href=""http://www.stackless.com/"">Stackless Python</a> take advantage of multicore CPUs? In normal Python you have the GIL being constantly present and to make (true) use of multiple cores you need to use several processes, is this true for <a href=""http://www.stackless.com/"">Stackless</a> also?</p>
"
377337,36832,2008-12-18T09:32:57Z,1,OOP and MVC programming style,"<p>I'm writing some data analysis software and decided to use such approach:<br /><br /></p>

<p>epn:<br />
model/data.py &lt;- Model definition<br />
model/reader.py &lt;- How to read data into model<br />
view/gui.py &lt;- main gui frame (wx)<br />
view/dialogs.py &lt;- different dialogs (wx)<br />
epn.py &lt;- controller<br /><br/></p>

<p>For communication between gui and data I used wx.lib.pubsub. So when button 'Modulation index' is pressed, epn.py catches the message and orders:</p>

<pre><code>self.view.control_panel.displayModulationIndex(self.data.getModulationIndex())
</code></pre>

<p>where self.data.getModulationIndex() is:</p>

<pre><code>def getModulationIndex(self):
  m = self.mean_flux
  f = self.fluxes
  # other things
</code></pre>

<p>On the other hand I can write it as:</p>

<pre><code>def getModulationIndex(self, m, f)
  # other things
</code></pre>

<p>and call it as:</p>

<pre><code>m = self.data.mean_flux
f = self.data.fluxes
self.view.control_panel.displayModulationIndex(self.data.getModulationIndex(m, f))
</code></pre>

<p>From my point of view the first example is better (shorter, encapsulated, more error-proof). But it is harder to test it --- you can't just call the method on some mock objects.<br /><br />
hope this one is clear<br /><br /></p>

<p>regards<br />
chriss</p>
"
377362,46981,2008-12-18T09:41:52Z,1,Code not waiting for class initialization!,"<p>I have a block of code that basically intializes several classes, but they are placed in a sequential order, as later ones reference early ones.</p>

<p>For some reason the last one initializes before the first one...it seems to me there is some sort of threading going on. What I need to know is how can I stop it from doing this? </p>

<p>Is there some way to make a class init do something similar to sending a return value?</p>

<p>Or maybe I could use the class in an if statement of some sort to check if the class has already been initialized?</p>

<p>I'm a bit new to Python and am migrating from C, so I'm still getting used to the little differences like naming conventions.</p>
"
377454,1816,2008-12-18T10:20:24Z,231,How do I get my python program to sleep for 50 milliseconds?,"<p>How do I get my python program to sleep for 50 milliseconds?</p>
"
378157,30786,2008-12-18T15:19:34Z,2,"Python, Regular Expression Postcode search","<p>I am trying to use regular expressions to find a UK postcode within a string.</p>

<p>I have got the regular expression working inside RegexBuddy, see below:</p>

<pre><code>\b[A-Z]{1,2}[0-9][A-Z0-9]? [0-9][ABD-HJLNP-UW-Z]{2}\b
</code></pre>

<p>I have a bunch of addresses and want to grab the postcode from them, example below:</p>

<blockquote>
  <p>123 Some Road Name<br /> Town, City<br /> County<br /> PA23 6NH</p>
</blockquote>

<p>How would I go about this in Python?  I am aware of the <code>re</code> module for Python but I am struggling to get it working.</p>

<p>Cheers</p>

<p>Eef</p>
"
378303,42546,2008-12-18T16:00:49Z,36,How to get a list of all users with a specific permission group in Django,"<p>I want to get a list of all Django auth user with a specific permission group, something like this:</p>

<pre><code>user_dict = {
    'queryset': User.objects.filter(permisson='blogger')
}
</code></pre>

<p>I cannot find out how to do this. How are the permissions groups saved in the user model?</p>
"
378493,11677,2008-12-18T17:00:56Z,5,Problem sub-classing BaseException in Python,"<p>I wanted to create my own Python exception class, like this:</p>

<pre><code>class MyException(BaseException):
    def __init__(self, errno, address):
        if errno == 10048:
            mess = str(address) + ' is already in use'
        else:
            mess = 'Unable to open ' + str(address)
        BaseException.__init__(mess)
</code></pre>

<p>but when the program got to the call to <code>BaseException.__init__()</code>, I got this traceback:</p>

<pre><code>BaseException.__init__(mess)
TypeError: descriptor '__init__' requires a 'exceptions.BaseException' object but received a 'str'
</code></pre>

<p>I thought that BaseException would take any set of arguments. Also, how I am supposed to pass an 'exceptions.BaseException' object into exceptions.BaseException's constructor?</p>
"
378564,29825,2008-12-18T17:27:35Z,8,Idiomatic asynchronous design,"<p>Are there any sorts of useful idioms I can make use of when writing an API that is asynchronous? I would like to standardize on something as I seem to be using a few different styles throughout. It seems hard to make asynchronous code simple; I suppose this is because asynchronous operations are anything but.</p>

<p>At the most basic level, the user of the API must be able to:</p>

<ol>
<li>Have data pushed to them as it becomes available
<li>Check the status of the asynchronous operation
<li>Be notified of errors that occur
<li>Wait for completion (converting the asynchronous operation to a synchronous one)
</ol>

<p>My classes support several asynchronous operations. I have been putting some of the status/error callbacks in the class around it, but the class is becoming gunked up with a lot of incidental fields, as well as getting too large. I am curious if anyone has used an asynchronous API they found to be well-organized. I have looked at .NET's Begin/EndAsyncOperation + AsyncResult design, as well as some classes in Java (e.g. Future).</p>

<p>This is being written in Python, so it remains very flexible. There is a caveat: some of these asynchronous operations are being marshaled to a remote machine and executed over there. Thus, not every operation necessarily executes in a separate thread.</p>
"
378773,NA,2008-12-18T18:39:59Z,5,How do I create a Python class in C?,"<p>I have a legacy C library that creates a tree of objects. I would like to convert the tree into a pre-existing Python class. How do I create the PyObject for that class?</p>
"
378811,47514,2008-12-18T18:53:14Z,6,"Getting python to work, Internal Server Error","<p>I'm trying to get Python scripts, called from a web browser, to work. I keep getting the error: </p>

<pre><code>500 Internal Server Error
</code></pre>

<p>When I check my error logs I see the message </p>

<pre><code>Premature end of script headers
</code></pre>

<p>The only documentation of this error online says that it can be the result of having improper line return characters in your script, but I wrote my test script right from the shell with pico. Also, when I run the file from the command line it executes just fine. 
""
So far the only change I have made to apache is to add the .py to the ""AddHandler cgi-script"" line.</p>

<p>Thanks!</p>

<hr>

<p>Thanks for the quick responses. Here is the latest version of the test code. I added a couple new lines before the output as suggested but still get the same error:</p>

<pre><code>#!/usr/local/bin/python
print ""Content-type: text/html\n""
print ""\n\n""
print ""&lt;HTML&gt;""
print ""&lt;HEAD&gt;""
print ""&lt;TITLE&gt;Test&lt;/TITLE&gt;""
print ""&lt;/HEAD&gt;""
print ""&lt;BODY&gt;""
print ""&lt;H2&gt;Hi there.&lt;/h2&gt;""
print ""&lt;/BODY&gt;""
print ""&lt;/HTML&gt;""
</code></pre>

<p>Some other details: I am running Apache 1.3 and don't have mod_python. I set apache to recognize .py as mentioned above. I am running the script from the main public_html folder. </p>

<hr>

<p>An update. It doesn't seem to matter what I put in the shebang line. I tried all of the suggestions and even if I leave it blank the same error is showing up in the errors log and I'm getting a 500 error. </p>

<p>I'm running Apache/1.3.41 on linux (red hat 3.4) with WHM/Cpanel installed.  </p>
"
379291,4105,2008-12-18T21:14:04Z,8,What does the []-esque decorator syntax in Python mean?,"<p>Here's a snippet of code from within TurboGears 1.0.6:</p>

<pre><code>[dispatch.generic(MultiorderGenericFunction)]
def run_with_transaction(func, *args, **kw):
    pass
</code></pre>

<p>I can't figure out how putting a list before a function definition can possibly affect it.</p>

<p>In dispatch.generic's docstring, it mentions:</p>

<blockquote>
  <p>Note that when using older Python versions, you must use '[dispatch.generic()]' instead of '@dispatch.generic()'.</p>
</blockquote>

<p>OK, so it apparently is a way to get decorator-like behavior in pre-decorator versions of Python, but how the heck can it possibly work?</p>
"
379338,26682,2008-12-18T21:23:50Z,2,How to integrate the StringTemplate engine into the CherryPy web server,"<p>I love the StringTemplate engine, and I love the CherryPy web server, and I know that they can be integrated.</p>

<p>Who has done it?  How?</p>

<p>EDIT:  The TurboGears framework takes the CherryPy web server and bundles other related components such as a template engine, data access tools, JavaScript kit, etc.  I am interested in MochiKit, demand CherryPy, but I don't want any other template engine than StringTemplate (architecture is critical--I don't want another broken/bad template engine).</p>

<p>Therefore, it would be acceptable to answer this question by addressing how to integrate StringTemplate with TurboGears.</p>

<p>It may also be acceptable to answer this question by addressing how to use CherryPy and StringTemplate in the Google App Engine.</p>

<p>Thanks.</p>
"
379346,36131,2008-12-18T21:26:39Z,13,What are these tags @ivar @param and @type in python docstring?,"<p>The ampoule project uses some tags in docstring, like the javadoc ones. </p>

<p>For example from <a href=""http://bazaar.launchpad.net/~dialtone/ampoule/main/annotate/26?file_id=pool.py-20080501191749-jqawtxogk4i0quu3-12"">pool.py</a> line 86:</p>

<pre><code>def start(self, ampChild=None):
    """"""
    Starts the ProcessPool with a given child protocol.

    @param ampChild: a L{ampoule.child.AMPChild} subclass.
    @type ampChild: L{ampoule.child.AMPChild} subclass
    """"""
</code></pre>

<p>What are these tags, which tool uses it.</p>
"
379442,46914,2008-12-18T21:52:22Z,6,How much slower is a wxWidget written in Python versus C++?,"<p>I'm looking into writing a wxWidget that displays a graphical node network, and therefore does a lot of drawing operations.  I know that using Python to do it is going to be slower, but I'd rather get it working and port it later when its functional.  Ideally, if the performance hit isn't too great, I'd prefer to keep the codebase in Python for easy updates.</p>

<p>What I'm wondering is how much slower should I expect things to go?  I realize this is vague and open ended, but I just need a sense of what to expect.  Will drawing 500 circles bog down?  Will it be noticeable at all? What are your experiences?</p>
"
379906,30529,2008-12-19T01:52:26Z,1130,Parse String to Float or Int,"<p>In Python, how can I parse a numeric string like <code>""545.2222""</code> to its corresponding float value, <code>542.2222</code>? Or parse the string <code>""31""</code> to an integer, <code>31</code>?</p>

<p>I just want to know how to parse a float string to a float, and (separately) an int string to an int.</p>
"
379995,46981,2008-12-19T03:03:34Z,0,How do you make a class attribute that isn't a standard data type?,"<p>I have one class that needs to grab an attribute that is set in another. It's not a standard data type though. Here's the code;</p>

<pre><code>class graphics:
def __init__(self, Fullscreen = False, Width = 640, Height = 480):
    print ""Graphics Init""
    SCREEN_SIZE = (Width, Height)
    pygame.init()
    if Fullscreen:
        self.screen = pygame.display.set_mode(SCREEN_SIZE, FULLSCREEN, 32)
        print ""Fullscreen Initialized""
    else:
        self.screen = pygame.display.set_mode(SCREEN_SIZE, 0, 32)
        print ""Non-Fullscreen Initialized""
</code></pre>

<p>What I need to do is reference the screen attribute, which I can set with self.screen and be readable within that class...but from another class I have to set</p>

<pre><code>screen = ?
</code></pre>

<p>under</p>

<pre><code>class graphics:
</code></pre>

<p>What does that question mark need to be? I've tried 0, None, """"...nothing seems to work, I have no idea what data type that pygame call would be. :S</p>
"
380420,8206,2008-12-19T08:54:57Z,5,How do I respond to mouse clicks on sprites in PyGame?,"<p>What is the canonical way of making your sprites respond to mouse clicks in PyGame ? </p>

<p>Here's something simple, in my event loop:</p>

<pre><code>for event in pygame.event.get():
    if event.type == pygame.QUIT:
        exit_game()
    [...]
    elif (  event.type == pygame.MOUSEBUTTONDOWN and
            pygame.mouse.get_pressed()[0]):
        for sprite in sprites:
            sprite.mouse_click(pygame.mouse.get_pos())
</code></pre>

<p>Some questions about it:</p>

<ol>
<li>Is this the best way of responding to mouse clicks ? </li>
<li>What if the mouse stays pressed on the sprite for some time ? How do I make a single event out of it ?</li>
<li>Is this a reasonable way to notify all my sprites of the click ?</li>
</ol>

<p>Thanks in advance</p>
"
380603,6068,2008-12-19T10:33:52Z,5,How do I get the full XML or HTML content of an element using ElementTree?,"<p>That is, all text and subtags, without the tag of an element itself?</p>

<p>Having</p>

<pre><code>&lt;p&gt;blah &lt;b&gt;bleh&lt;/b&gt; blih&lt;/p&gt;
</code></pre>

<p>I want </p>

<pre><code>blah &lt;b&gt;bleh&lt;/b&gt; blih
</code></pre>

<p>element.text returns ""blah "" and etree.tostring(element) returns:</p>

<pre><code>&lt;p&gt;blah &lt;b&gt;bleh&lt;/b&gt; blih&lt;/p&gt;
</code></pre>
"
380731,47741,2008-12-19T11:31:12Z,3,How do I get PIL to work when built on mingw/cygwin?,"<p>I'm trying to build PIL 1.1.6 against cygwin or mingw whilst running against a windows install of python. When I do either the build works but I get the following failure when trying to save files.</p>

<pre>
$ python25
Python 2.5.2 (r252:60911, Feb 21 2008, 13:11:45) [MSC v.1310 32 bit (Intel)] on
win32
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
>>> from PIL.Image import open
>>> im = open('test.gif')
>>> im.save('output1.gif')
Traceback (most recent call last):
  File """", line 1, in 
  File ""c:\Python25\Lib\site-packages\PIL\Image.py"", line 1405, in save
    save_handler(self, fp, filename)
  File ""c:\Python25\Lib\site-packages\PIL\GifImagePlugin.py"", line 291, in _save

    ImageFile._save(imOut, fp, [(""gif"", (0,0)+im.size, 0, rawmode)])
  File ""c:\Python25\Lib\site-packages\PIL\ImageFile.py"", line 491, in _save
    s = e.encode_to_file(fh, bufsize)
IOError: [Errno 0] Error
>>>
</pre>

<p>I'm not compiling with the libraries for jpeg or zip support but I don't think this should be relevant here.</p>

<p>The failing line seems to be a write in encode_to_file in encode.c. </p>

<p>I'm suspiscious that this occurs because a file descriptor is being passed from Python (which was build under visual studio 2003) to _imaging.pyd but that the file descriptors don't match because on windows file descriptors are and abstraction on top of the operating system. Does anyone know anything about this?</p>
"
380734,33612,2008-12-19T11:33:06Z,7,How to do this - python dictionary traverse and search,"<p>I have nested dictionaries:</p>

<pre><code>{'key0': {'attrs': {'entity': 'p', 'hash': '34nj3h43b4n3', 'id': '4130'},
          u'key1': {'attrs': {'entity': 'r',
                              'hash': '34njasd3h43b4n3',
                              'id': '4130-1'},
                    u'key2': {'attrs': {'entity': 'c',
                                        'hash': '34njasd3h43bdsfsd4n3',
                                        'id': '4130-1-1'}}},
          u'key3': {'attrs': {'entity': 'r',
                              'hash': '34njasasasd3h43b4n3',
                              'id': '4130-2'},
                    u'key4': {'attrs': {'entity': 'c',
                                        'hash': '34njawersd3h43bdsfsd4n3',
                                        'id': '4130-2-1'}},
                    u'key5': {'attrs': {'entity': 'c',
                                        'hash': '34njawersd3h43bdsfsd4n3',
                                        'id': '4130-2-2'}}}},
 'someohterthing': 'someothervalue',
 'something': 'somevalue'}
</code></pre>

<p>given an <code>id</code>  - one of all the <code>ids</code> like <code>4130</code> to <code>4130-2-2</code>.<br>
                      whats the easiest way to navigate to the correct dictionary?</p>

<p>Like if the given <code>id</code> is <code>4130-2-1</code> then it should reach the dictionary with <code>key=key5</code></p>

<p>non xml approaches please.</p>

<p><strong>Edit(1):</strong> The nesting is between <code>1</code> to <code>4</code> levels, but I know the nesting before I parse.</p>

<p><strong>Edit(2)</strong>: Fixed the code.</p>

<p>**Edit(3):**Fixed code again for string values of <code>ids</code>. Please excuse for the confusion created. This is final I hope :)</p>
"
380870,37141,2008-12-19T12:42:52Z,66,Python: single instance of program,"<p>Is there a Pythonic way to have only one instance of a program running? </p>

<p>The only reasonable solution I've come up with is trying to run it as a server on some port, then second program trying to bind to same port - fails. But it's not really a great idea, maybe there's something more lightweight than this?  </p>

<p>(Take into consideration that program is expected to fail sometimes, i.e. segfault - so things like ""lock file"" won't work)</p>

<p><b>Update</b>: the solutions offered are much more complex and less reliant than just having a port occupied with a non-existent server, so I'd have to go with that one.</p>
"
381479,985,2008-12-19T16:40:38Z,3,Psyco x64?,"<p>Is there a way to get the same sort of speedup on x64 architecture as you can get from psyco on 32 bit processors?</p>
"
382466,40372,2008-12-19T22:49:15Z,11,Comparing massive lists of dictionaries in python,"<p>I never actually thought I'd run into speed-issues with python, but I have. I'm trying to compare really big lists of dictionaries to each other based on the dictionary values. I compare two lists, with the first like so</p>

<pre><code>biglist1=[{'transaction':'somevalue', 'id':'somevalue', 'date':'somevalue' ...}, {'transactio':'somevalue', 'id':'somevalue', 'date':'somevalue' ...}, ...]
</code></pre>

<p>With 'somevalue' standing for a user-generated string, int or decimal. Now, the second list is pretty similar, except the id-values are always empty, as they have not been assigned yet.</p>

<pre><code>biglist2=[{'transaction':'somevalue', 'id':'', 'date':'somevalue' ...}, {'transactio':'somevalue', 'id':'', 'date':'somevalue' ...}, ...]
</code></pre>

<p>So I want to get a list of the dictionaries in biglist2 that match the dictionaries in biglist1 for all other keys <em>except</em> id.</p>

<p>I've been doing </p>

<pre><code>for item in biglist2:
    for transaction in biglist1:
       if item['transaction'] == transaction['transaction']:
          list_transactionnamematches.append(transaction)

for item in biglist2:
    for transaction in list_transactionnamematches:
       if item['date'] == transaction['date']:
          list_transactionnamematches.append(transaction)
</code></pre>

<p>... and so on, not comparing id values, until I get a final list of matches. Since the lists can be really big (around 3000+ items each), this takes quite some time for python to loop through.</p>

<p>I'm guessing this isn't really how this kind of comparison should be done. Any ideas?</p>
"
382603,42413,2008-12-19T23:54:04Z,25,In what contexts do programming languages make real use of an Infinity value?,"<p>So in Ruby there is a trick to specify infinity:</p>

<pre><code>1.0/0
=&gt; Infinity
</code></pre>

<p>I believe in Python you can do something like this</p>

<pre><code>float('inf')
</code></pre>

<p>These are just examples though, I'm sure most languages have infinity in some capacity. When would you actually use this construct in the real world? Why would using it in a range be better than just using a boolean expression? For instance</p>

<pre><code>(0..1.0/0).include?(number) == (number &gt;= 0) # True for all values of number
=&gt; true
</code></pre>

<p>To summarize, what I'm looking for is a real world reason to use Infinity.</p>

<p><strong>EDIT</strong>: I'm looking for real world code. It's all well and good to say this is when you ""could"" use it, when have people <em>actually</em> used it.</p>
"
382624,30529,2008-12-20T00:04:41Z,2,Is @measured a standard decorator? What library is it in?,"<p>In <a href=""http://abstracthack.wordpress.com/2007/09/05/multi-threaded-map-for-python/"" rel=""nofollow"">this blog article</a> they use the construct:</p>

<pre><code>  @measured
  def some_func():
    #...
  # Presumably outputs something like ""some_func() is finished in 121.333 s"" somewhere
</code></pre>

<p>This <code>@measured</code> directive doesn't seem to work with raw python. What is it?</p>

<p>UPDATE: I see from Triptych that <code>@something</code> is valid, but is where can I find <code>@measured</code>, is it in a library somewhere, or is the author of this blog using something from his own private code base?</p>
"
383010,24608,2008-12-20T06:26:39Z,1,"Using Python's ctypes to pass/read a parameter declared as ""struct_name *** param_name""?","<p>I am trying to use Python's ctypes library to access some methods in the scanning library <a href=""http://www.sane-project.org/"" rel=""nofollow"">SANE</a>.  This is my first experience with ctypes and the first time I have had to deal with C datatypes in over a year so there is a fair learning curve here, but I think even without that this particular declaration would be troublesome:</p>

<pre><code>extern SANE_Status sane_get_devices (const SANE_Device *** device_list, SANE_Bool local_only);
</code></pre>

<p>First of all, I've successfully dealt with <code>SANE_Status</code> (an enum) and <code>SANE_Bool</code> (a typedef to <code>c_int</code>).  Those were both simple.  That first parameter, on the other hand, is causing me all sorts of grief.  I'm unfamiliar with the ""<code>***</code>"" notation to begin with and my tracer bullets so far have yielded nothing more than garbage data.  How do I format the input to this function such that I can read back a list of my Python structure-objects?  For reference, the C structure being referenced is:</p>

<pre><code>typedef struct
{
    SANE_String_Const name; /* unique device name */
    SANE_String_Const vendor;   /* device vendor string */
    SANE_String_Const model;    /* device model name */
    SANE_String_Const type; /* device type (e.g., ""flatbed scanner"") */
 }
SANE_Device;
</code></pre>

<p>Where <code>SANE_String_Const</code> is defined as a <code>c_char_p</code>.</p>

<p>My Python/ctypes version of this object is:</p>

<pre><code>class SANE_Device(Structure):
    _fields_ = [
        (""name"", c_char_p),
        (""vendor"", c_char_p),
        (""model"", c_char_p),
        (""type"", c_char_p)]
</code></pre>

<p>Suggestions on what I should pass in such that I can get the expected behavior (a list of structure-objects) out of this?  All responses appreciated.</p>

<p><strong>Update 1:</strong></p>

<p>Using the following, I was able to retrieve a correct SANE_Device Python structure:</p>

<pre><code>devices = pointer(pointer(pointer(SANE_Device())))
status = libsane.sane_get_devices(devices, c_int(0))
print status, devices, devices.contents.contents.contents.name
</code></pre>

<p>However, 1) yuck and 2) that seems like it would only work if there is a single result.  I can't len() on <code>devices.contents.contents</code> or <code>devices.contents.contents.contents</code>.  How am I to determine the number of results?  The SANE docs specify that ""If the function executes successfully, it stores a pointer to a NULL terminated array of pointers to SANE_Device structures in *device_list"".  Suggestions?</p>

<p><strong>Update 2:</strong></p>

<p>I was able to pass an ten-item array and then access the first element using:</p>

<pre><code>devices = pointer(pointer(pointer((SANE_Device * 10)())))
status = libsane.sane_get_devices(devices, c_int(0))
print status, devices, devices.contents.contents.contents[0].name
</code></pre>

<p>However, ten is obviously an arbitrary number and I have no way of determining the actual number of results.  Trying to access <code>devices.contents.contents.contents[1].name</code> when only one device is connected causes a segmentation fault.  There must be a proper way of dealing with variable-length constructs like these in ctypes.</p>
"
383073,1595,2008-12-20T07:48:15Z,13,Django: How can I use my model classes to interact with my database from outside Django?,"<p>I'd like to write a script that interacts with my DB using a Django app's model.  However, I would like to be able to run this script from the command line or via cron.  What all do I need to import to allow this?</p>
"
383189,15055,2008-12-20T10:47:09Z,2,JavaScript implementation that allows access to [[Call]],"<p>The ECMA standard defines a hidden, internal property <code>[[Call]]</code>, which, if implemented, mean the object is callable / is a function.</p>

<p>In Python, something similar takes place, except that you can override it yourself to create your own callable objects:</p>

<pre><code>&gt;&gt;&gt; class B:
...     def __call__(self, x,y): print x,y
...
&gt;&gt;&gt; inst = B()
&gt;&gt;&gt; inst(1,2)
1, 2
</code></pre>

<p>Is there any similar mechanism available in standard JavaScript? If not, what about any of the current JavaScript implementations? </p>
"
383565,37522,2008-12-20T18:23:52Z,6,How to iterate over a list repeating each element in Python,"<p>I'm using Python to <strong>infinitely</strong> iterate over a list, repeating each element in the list a number of times. For example given the list:</p>

<pre><code>l = [1, 2, 3, 4]
</code></pre>

<p>I would like to output each element two times and then repeat the cycle:</p>

<pre><code>1, 1, 2, 2, 3, 3, 4, 4, 1, 1, 2, 2 ...
</code></pre>

<p>I've got an idea of where to start:</p>

<pre><code>def cycle(iterable):
  if not hasattr(cycle, 'state'):
    cycle.state = itertools.cycle(iterable)
  return cycle.next()

 &gt;&gt;&gt; l = [1, 2, 3, 4]
 &gt;&gt;&gt; cycle(l)
 1
 &gt;&gt;&gt; cycle(l)
 2
 &gt;&gt;&gt; cycle(l)
 3
 &gt;&gt;&gt; cycle(l)
 4
 &gt;&gt;&gt; cycle(l)
 1
</code></pre>

<p>But how would I repeat each element?</p>

<p><strong>Edit</strong></p>

<p>To clarify this should iterate infinitely. Also I've used repeating the element twice as the shortest example -
<strong>I would really like to repeat each element n times</strong>.</p>

<p><strong>Update</strong></p>

<p>Will your solution lead me to what I was looking for:</p>

<pre><code>&gt;&gt;&gt; import itertools
&gt;&gt;&gt; def ncycle(iterable, n):
...   for item in itertools.cycle(iterable):
...     for i in range(n):
...       yield item
&gt;&gt;&gt; a = ncycle([1,2], 2)
&gt;&gt;&gt; a.next()
1
&gt;&gt;&gt; a.next()
1
&gt;&gt;&gt; a.next()
2
&gt;&gt;&gt; a.next()
2
&gt;&gt;&gt; a.next()
1
&gt;&gt;&gt; a.next()
1
&gt;&gt;&gt; a.next()
2
&gt;&gt;&gt; a.next()
2
</code></pre>

<p>Thanks for the quick answers!</p>
"
383623,6068,2008-12-20T19:05:12Z,14,How do you apply 'or' to all values of a list in Python?,"<p>How do you apply 'or' to all values of a list in Python? I'm thinking something like:</p>

<pre><code>or([True, True, False])
</code></pre>

<p>or if it was possible:</p>

<pre><code>reduce(or, [True, True, False])
</code></pre>
"
383738,10612,2008-12-20T21:04:42Z,20,"104, 'Connection reset by peer' socket error, or When does closing a socket result in a RST rather than FIN?","<p>We're developing a Python web service and a client web site in parallel.  When we make an HTTP request from the client to the service, one call consistently raises a socket.error in socket.py, in read:</p>

<pre>(104, 'Connection reset by peer')</pre>

<p>When I listen in with wireshark, the ""good"" and ""bad"" responses look very similar:</p>

<ul>
<li>Because of the size of the OAuth header, the request is split into two packets.  The service responds to both with ACK</li>
<li>The service sends the response, one packet per header (HTTP/1.0 200 OK, then the Date header, etc.).  The client responds to each with ACK.</li>
<li>(Good request) the server sends a FIN, ACK.  The client responds with a FIN, ACK.  The server responds ACK.</li>
<li>(Bad request) the server sends a RST, ACK, the client doesn't send a TCP response, the socket.error is raised on the client side.</li>
</ul>

<p>Both the web service and the client are running on a Gentoo Linux x86-64 box running glibc-2.6.1.  We're using Python 2.5.2 inside the same virtual_env.</p>

<p>The client is a Django 1.0.2 app that is calling httplib2 0.4.0 to make requests.  We're signing requests with the OAuth signing algorithm, with the OAuth token always set to an empty string.</p>

<p>The service is running Werkzeug 0.3.1, which is using Python's wsgiref.simple_server.  I ran the WSGI app through wsgiref.validator with no issues.</p>

<p>It seems like this should be easy to debug, but when I trace through a good request on the service side, it looks just like the bad request, in the socket._socketobject.close() function, turning delegate methods into dummy methods.  When the send or sendto (can't remember which) method is switched off, the FIN or RST is sent, and the client starts processing.</p>

<p>""Connection reset by peer"" seems to place blame on the service, but I don't trust httplib2 either.  Can the client be at fault?</p>

<p>** Further debugging - Looks like server on Linux **</p>

<p>I have a MacBook, so I tried running the service on one and the client website on the other.  The Linux client calls the OS X server without the bug (FIN ACK).  The OS X client calls the Linux service with the bug (RST ACK, and a (54, 'Connection reset by peer')).  So, it looks like it's the service running on Linux.  Is it x86_64? A bad glibc? wsgiref? Still looking...</p>

<p>** Further testing - wsgiref looks flaky **</p>

<p>We've gone to production with Apache and mod_wsgi, and the connection resets have gone away.  See my answer below, but my advice is to log the connection reset and retry.  This will let your server run OK in development mode, and solidly in production.</p>
"
383760,42546,2008-12-20T21:30:12Z,1,"Django objects.filter, how ""expensive"" would this be?","<p>I am trying to make a search view in Django. It is a search form with freetext input + some options to select, so that you can filter on years and so on. This is some of the code I have in the view so far, the part that does the filtering. And I would like some input on how expensive this would be on the database server.</p>

<p><code>
    soknad_list = Soknad.objects.all()</p>

<pre><code>if var1:
    soknad_list = soknad_list.filter(pub_date__year=var1)

if var2:
    soknad_list = soknad_list.filter(muncipality__name__exact=var2)

if var3:
    soknad_list = soknad_list.filter(genre__name__exact=var3)

# TEXT SEARCH
stop_word_list = re.compile(STOP_WORDS, re.IGNORECASE)
search_term = '%s' % request.GET['q']
cleaned_search_term = stop_word_list.sub('', search_term)
cleaned_search_term = cleaned_search_term.strip()
if len(cleaned_search_term) != 0:
    soknad_list = soknad_list.filter(Q(dream__icontains=cleaned_search_term) | Q(tags__icontains=cleaned_search_term) | Q(name__icontains=cleaned_search_term) | Q(school__name__icontains=cleaned_search_term))
</code></pre>

<p></code></p>

<p>So what I do is, first make a list of all objects, then I check which variables exists (I fetch these with GET on an earlier point) and then I filter the results if they exists. But this doesn't seem too elegant, it probably does a lot of queries to achieve the result, so is there a better way to this?</p>

<p>It does exactly what I want, but I guess there is a better/smarter way to do this. Any ideas?</p>
"
383966,8359,2008-12-21T01:12:56Z,7,Best way to return the language of a given string,"<p>More specifically, I'm trying to check if given string (a sentence) is in Turkish. </p>

<p>I can check if the string has Turkish characters such as Ç, Ş, Ü, Ö, Ğ etc. However that's not very reliable as those might be converted to C, S, U, O, G before I receive the string.</p>

<p>Another method is to have the 100 most used words in Turkish and check if the sentence includes any/some of those words. I can combine these two methods and use a point system. </p>

<p>What do you think is the most efficient way to solve my problem in Python?</p>

<p>Related question: <a href=""http://stackoverflow.com/questions/257125/human-language-of-a-document"">(human) Language of a document</a> (Perl, Google Translation API)</p>
"
384076,48087,2008-12-21T03:57:45Z,174,How can I color Python logging output?,"<p>Some time ago, I saw a Mono application with colored output, presumably because of its log system (because all the messages were standardized). </p>

<p>Now, Python has the <code>logging</code> module, which lets you specify a lot of options to customize output. So, I'm imagining something similar would be possible with Python, but I can’t find out how to do this anywhere. </p>

<p>Is there any way to make the Python <code>logging</code> module output in color? </p>

<p>What I want (for instance) errors in red, debug messages in blue or yellow, and so on. </p>

<p>Of course this would probably require a compatible terminal (most modern terminals are); but I could fallback to the original <code>logging</code> output if color isn't supported.</p>

<p>Any ideas how I can get colored output with the logging module?</p>
"
384228,38,2008-12-21T07:57:04Z,24,Database does not update automatically with MySQL and Python,"<p>I'm having some trouble updating a row in a MySQL database. Here is the code I'm trying to run:</p>

<pre><code>import MySQLdb

conn=MySQLdb.connect(host=""localhost"", user=""root"", passwd=""pass"", db=""dbname"")
cursor=conn.cursor()

cursor.execute(""UPDATE compinfo SET Co_num=4 WHERE ID=100"")
cursor.execute(""SELECT Co_num FROM compinfo WHERE ID=100"")
results = cursor.fetchall()

for row in results:
    print row[0]

print ""Number of rows updated: %d"" % cursor.rowcount

cursor.close()
conn.close()
</code></pre>

<p>The output I get when I run this program is:</p>

<blockquote>
  <p>4<br>Number of rows updated: 1</p>
</blockquote>

<p>It seems like it's working but if I query the database from the MySQL command line interface (CLI) I find that it was not updated at all. However, if from the CLI I enter <code>UPDATE compinfo SET Co_num=4 WHERE ID=100;</code> the database is updated as expected.</p>

<p>What is my problem? I'm running Python 2.5.2 with MySQL 5.1.30 on a Windows box.</p>
"
384291,NA,2008-12-21T09:40:28Z,0,Code refactoring help - how to reorganize validations,"<p>We have a web application that takes user inputs or database lookups to form some operations against some physical resources. The design can be simply presented as following diagram:</p>

<p>user input &lt;=> model object &lt;=> database storage</p>

<p>validations are needed with request coming from user input but NOT when coming from database lookup hits (since if a record exists, those attributes must have already been validated before). I am trying to refactoring the code so that the validations happen in the object constructor instead of the old way (a separate few validation routines)</p>

<p>How would you decide which way is better? (The fundamental difference of method 1 (the old way) and 2 is that validations in 1 are not mandatory and decoupled from object instantiation but 2 binds them and makes them mandatory for all requests)</p>

<p>Here are two example code snippets for design 1 and 2:</p>

<p>Method 1:</p>

<pre><code># For processing single request.
# Steps: 1. Validate all incoming data. 2. instantiate the object.
ValidateAttribures(request) # raise Exceptions if failed
resource = Resource(**request)
</code></pre>

<p>Method 2:</p>

<pre><code># Have to extract out this since it does not have anything to do with
# the object.
# raise Exceptions if some required params missing.
# steps: 1. Check whether its a batching request. 2. instantiate the object.
#           (validations are performed inside the constructor)
CheckIfBatchRequest(request) 
resource = Resource(**request) # raise Exceptions when validations failed
</code></pre>

<p>In a batch request:
Method 1:</p>

<pre><code># steps: 1. validate each request and return error to the client if any found.
#        2. perform the object instantiate and creation process. Exceptions are
#           captured.
#        3. when all finished, email out any errors.
for request in batch_requests:
    try:    
        ValidateAttribute(request)
    except SomeException, e:
        return ErrorPage(e)
errors = []
for request in batch_requests:
    try:
        CreatResource(Resource(**request), request)
    except CreationError, e:
        errors.append('failed to create with error: %s', e)
email(errors)
</code></pre>

<p>Method 2:</p>

<pre><code># steps: 1. validate batch job related data from the request.
#        2. If success, create objects for each request and do the validations.
#        3. If exception, return error found, otherwise, 
#           return a list of pairs with (object, request)
#        4. Do the creation process and email out any errors if encountered.
CheckIfBatchRequest(request)
request_objects = []
for request in batch_requests:
    try:
        resource = Resource(**request)
    except SomeException, e:
        return ErrorPage(e)
    request_objects.append((resource, request))
email(CreateResource(request_objects)) # the CreateResource will also need to be refactored.
</code></pre>

<p>Pros and Cons as I can see here are:</p>

<ol>
<li>Method 1 follows more close to the business logic. No redundant validations check when objects come from db lookup. The validation routines are better maintainable and read.</li>
<li>Method 2 makes easy and clean for the caller. Validations are mandatory even if from db lookup. Validations are less maintainable and read.</li>
</ol>
"
384333,35903,2008-12-21T10:48:19Z,7,How do you manage your Django applications?,"<p>I just wanted to try to build a project with django. Therefore I have a (basic) question on how to manage such a project. Since I cannot find any guidelines or so on how to split a project into applications.</p>

<p>Let's take a kind of SO as an example. Which applications would you use?
I'd say there should be the applications ""users"" and ""questions"". But what if there was a topic system with static articles, too. Maybe they also could receive votes.
How to build the apps structure then? One app for ""questions"", ""votes"" and ""topics"" or just one app ""content""?</p>

<p>I have no idea what to do. Maybe it's because I know not very much about Django yet, but I'm interested either...</p>
"
384336,2128,2008-12-21T10:53:09Z,0,Using Python Web GET data,"<p>I'm trying to pass information to a python page via the url. I have the following link text:</p>

<pre><code>""&lt;a href='complete?id=%s'&gt;"" % (str(r[0]))
</code></pre>

<p>on the complete page, I have this:</p>

<pre><code>import cgi
def complete():
    form = cgi.FieldStorage()
    db = MySQLdb.connect(user="""", passwd="""", db=""todo"")
    c = db.cursor()
    c.execute(""delete from tasks where id ="" + str(form[""id""]))
    return ""&lt;html&gt;&lt;center&gt;Task completed! Click &lt;a href='/chris'&gt;here&lt;/a&gt; to go back!&lt;/center&gt;&lt;/html&gt;""
</code></pre>

<p>The problem is that when i go to the complete page, i get a key error on ""id"". Does anyone know how to fix this?</p>

<p><em>EDIT</em>
when i run cgi.test() it gives me nothing</p>

<p>I think something is wrong with the way i'm using the url because its not getting passed through.</p>

<p>its basically localhost/chris/complete?id=1</p>

<p>/chris/ is a folder and complete is a function within index.py</p>

<p>Am i formatting the url the wrong way?</p>
"
384471,452521,2008-12-21T13:37:38Z,29,MySQL-db lib for Python 3.x?,"<p>So, looking for a mysql-db-lib that is compatible with py3k/py3.0/py3000, any ideas? Google turned up nothing.</p>
"
384759,145,2008-12-21T18:21:32Z,67,PIL and numpy,"<p>Alright, I'm toying around with converting a PIL image object back and forth to a numpy array so I can do some faster pixel by pixel transformations than PIL's PixelAccess object would allow.  I've figured out how to place the pixel information in a useful 3D numpy array by way of:</p>

<pre><code>pic = Image.open(""foo.jpg"")
pix = numpy.array(pic.getdata()).reshape(pic.size[0], pic.size[1], 3)
</code></pre>

<p>But I can't seem to figure out how to load it back into the PIL object after I've done all my awesome transforms.  I'm aware of the <strong>putdata()</strong> method, but can't quite seem to get it to behave.</p>

<p>Any thoughts?</p>
"
384874,9099,2008-12-21T20:00:55Z,5,Checking 2-dimensional array (like eight queens puzzle),"<p>My problem is very similar to eight queens puzzle.</p>

<p>I've got 2-dimensional array (N x N) that for example, looks like this:</p>

<pre><code>0,0,0,0,1 y
0,0,0,0,0 |
0,0,0,0,0 V
0,0,0,1,0
0,0,0,0,0
x-&gt;
</code></pre>

<p>I'm checking horizontally, vertically and diagonally for occurrences of 1</p>

<pre><code>\,0,|,0,/
0,\,|,/,0
-,-,1,-,-
0,/,|,\,0
/,0,|,0,\
</code></pre>

<p>I'm thinking about storing only the (x,y) postions of ""1""'s in a list </p>

<pre><code>[[4,0],[3,3]]
</code></pre>

<p>and solving it mathematically, check every position of ""1"" with another (x1,y1)&lt;->(x2,y2),</p>

<p>if <code>x1 == x2</code> or <code>y1 == y2</code> <code>we have a collision!</code> if not check:</p>

<pre><code>x2 == x1 + z;
y2 == y1 + z;
x2 == x1 - z;
y2 == y1 - z;
</code></pre>

<p>(???)</p>

<p>where z is +/- that <code>( x1+z in 0..N ) and ( y1+z in 0..N ) .......</code></p>

<p><strong><em>My problem is checking for diagonal collision, is there a better way to do it???</em></strong></p>
"
385262,16432,2008-12-22T00:39:53Z,42,How do I send a custom header with urllib2 in a HTTP Request?,"<p>I want to send a custom ""Accept"" header in my request when using urllib2.urlopen(..). How do I do that?</p>
"
385325,22893,2008-12-22T01:33:33Z,22,dropping trailing '.0' from floats,"<p>I'm looking for a  way to convert numbers to string format, dropping any redundant '.0' </p>

<p>The input data is a mix of floats and strings. Desired output:</p>

<p>0   --> '0'</p>

<p>0.0 --> '0'</p>

<p>0.1 --> '0.1'</p>

<p>1.0 --> '1'</p>

<p>I've come up with the following generator expression, but I wonder if there's a faster way:</p>

<pre><code>(str(i).rstrip('.0') if i else '0' for i in lst)
</code></pre>

<p>The truth check is there to prevent 0 from becoming an empty string.</p>

<p>EDIT: The more or less acceptable solution I have for now is this:</p>

<pre><code>('%d'%i if i == int(i) else '%s'%i for i in lst)
</code></pre>

<p>It just seems strange that there is no elegant way to handle this (fairly straightforward) case in python.</p>
"
385394,745,2008-12-22T02:18:22Z,5,Python 3 porting workflow?,"<p>I have a small project I want to try porting to Python 3 - how do I go about this?</p>

<p>I have made made the code run without warnings using <code>python2.6 -3</code> (mostly removing <code>.has_key()</code> calls), but I am not sure of the best way to use the 2to3 tool.</p>

<blockquote>
  <p>Use the 2to3 tool to convert this source code to 3.0 syntax. Do not manually edit the output!</p>
</blockquote>

<p>Running <code>2to3 something.py</code> outputs a diff, which isn't useful on it's own. Using the <code>--write</code> flag overwrites something.py and creates a backup.. It seems like I have to do..</p>

<pre><code>2to3 something.py
python3.0 something.py
mv something.py.bak something.py
vim something.py
# repeat
</code></pre>

<p>..which is a bit round-a-bout - ideally I could do something like..</p>

<pre><code>mv something.py py2.6_something.py # once

2to3 py2.6_something.py --write-file something.py
vim py2.6_something.py
# repeat
</code></pre>
"
385403,3485,2008-12-22T02:25:02Z,10,"Prototype based object orientation. The good, the bad and the ugly?","<p>I come from classes object orientation languages and recently I have been learning those fancy dynamic languages (JavaScript, Python and Lua) and I want some tips about how to use OO in those languages. It would be useful to know the pitfalls and the shortcomings of such approach and the advantages compared to traditional OO.</p>

<p>The general notion that I got is that prototype based OO is basically programming with objects but no standard on how to use them whereas in normal OO there is a fixed predefined way to make and use objects.</p>

<p>In summary, what is the good, the bad and the ugly parts of such approach?</p>
"
385558,10522,2008-12-22T04:28:01Z,17,Extract float/double value,"<p>How do I extract a double value from a string using regex.</p>

<pre><code>import re

pattr = re.compile(???)    
x = pattr.match(""4.5"")      
</code></pre>
"
385572,46646,2008-12-22T04:35:18Z,12,Typecasting in Python,"<p>I need to convert strings in Python to other types such as unsigned and signed 8, 16, 32, and 64 bit ints, doubles, floats, and strings.</p>

<p>How can I do this?</p>
"
385632,37522,2008-12-22T05:44:41Z,2,Phone numbers to links in Python,"<p>I'm working a piece of code to turn phone numbers into links for mobile phone - I've got it but it feels really dirty.</p>

<pre><code>import re
from string import digits

PHONE_RE = re.compile('([(]{0,1}[2-9]\d{2}[)]{0,1}[-_. ]{0,1}[2-9]\d{2}[-_. ]{0,1}\d{4})')

def numbers2links(s):
    result = """"
    last_match_index = 0
    for match in PHONE_RE.finditer(s):
          raw_number = match.group()
          number = ''.join(d for d in raw_number if d in digits)
          call = '&lt;a href=""tel:%s""&gt;%s&lt;/a&gt;' % (number, raw_number)
          result += s[last_match_index:match.start()] + call
          last_match_index = match.end()
    result += s[last_match_index:]
    return result

&gt;&gt;&gt; numbers2links(""Ghost Busters at (555) 423-2368! How about this one: 555 456 7890! 555-456-7893 is where its at."")
'Ghost Busters at &lt;a href=""tel:5554232368""&gt;(555) 423-2368&lt;/a&gt;! How about this one: &lt;a href=""tel:5554567890""&gt;555 456 7890&lt;/a&gt;! &lt;a href=""tel:5554567893""&gt;555-456-7893&lt;/a&gt; is where its at.'
</code></pre>

<p>Is there anyway I could restructure the regex or the the regex method I'm using to make this cleaner?</p>

<p><strong>Update</strong></p>

<p>To clarify, my question is not about the correctness of my regex - I realize that it's limited. Instead I'm wondering if anyone had any comments on the method of substiting in links for the phone numbers - is there anyway I could use <code>re.replace</code> or something like that instead of the string hackery that I have?</p>
"
386151,46646,2008-12-22T12:29:23Z,-3,need help - bit-field conversion,"<p>I want to convert strings to bit-fields.Also,convert them to binary and then use.
Need help with this..help me ..</p>
"
386655,42037,2008-12-22T16:23:13Z,42,Python Performance - have you ever had to rewrite in something else?,"<p>Has anyone ever had code in Python, that turned out not to perform fast enough?</p>

<p>I mean, you were forced to <em>choose another language</em> because of it?</p>

<p>We are investigating using Python for a couple of larger projects, and my feeling is that in most cases, Python is plenty fast enough for most scenarios (compared to say, Java) because it relies on optimized C routines.</p>

<p>I wanted to see if people had instances where they started out in Python, <strong>but</strong> ended up having to go with something else because of performance.</p>

<p>Thanks. </p>
"
386664,8203,2008-12-22T16:25:42Z,4,Tricky Python string literals in passing parameter to timeit.Timer() function,"<p>I'm having a hard time with the setup statement in Python's timeit.Timer(stmt, setup_stmt). I appreciate any help to get me out of this tricky problem:</p>

<p>So my sniplet looks like this:</p>

<pre><code>def compare(string1, string2):
    # compare 2 strings

if __name__ = '__main__':
    str1 = ""This string has \n several new lines \n in the middle""
    str2 = ""This string hasn't any new line, but a single quote ('), in the middle""

    t = timeit.Timer('compare(p1, p2)', ""from __main__ import compare; p1=%s, p2=%s"" % (str1,str2))
</code></pre>

<p>I don't know how to escape the metacharacter in the variable str1, str2 without changing their meaning in the setup statement: </p>

<pre><code>""from __main__ import compare; p1=%s, p2=%s"" % (str1,str2)
</code></pre>

<p>I tried various combination but always have the following errors:
SyntaxError: can't assign to literal<br />
SyntaxError: EOL while scanning single-quoted string<br />
SyntaxError: invalid syntax</p>
"
386753,24459,2008-12-22T17:06:00Z,4,How do I convert part of a python tuple (byte array) into an integer,"<p>I am trying to talk to a device using python.  I have been handed a tuple of bytes which contains the storage information.  How can I convert the data into the correct values:</p>

<p>response = (0, 0, 117, 143, 6)</p>

<p>The first 4 values are a 32-bit int telling me how many bytes have been used and the last value is the percentage used.</p>

<p>I can access the tuple as response[0] but cannot see how I can get the first 4 values into the int I require.</p>
"
386934,46914,2008-12-22T18:18:05Z,24,Evaluate environment variables into a string,"<p>I have a string representing a path.  Because this application is used on Windows, OSX and Linux, we've defined environment variables to properly map volumes from the different file systems.  The result is:</p>

<pre><code>""$C/test/testing""
</code></pre>

<p>What I want to do is evaluate the environment variables in the string so that they're replaced by their respective volume names.  Is there a specific command I'm missing, or do I have to take os.environ.keys() and manually replace the strings?</p>
"
387606,47204,2008-12-22T22:37:08Z,0,Using user input to find information in a Mysql database,"<p>I need to design a program using python that will ask the user for a barcode. Then, using this barcode, it will search a mysql to find its corresponding product. </p>

<p>I am a bit stuck on how to get started. Does anyone have any tips for me?</p>
"
387619,46063,2008-12-22T22:40:09Z,2,"Mysql Connection, one or many?","<p>I'm writing a script in python which basically queries WMI and updates the information in a mysql database.  One of those ""write something you need"" to learn to program exercises.</p>

<p>In case something breaks in the middle of the script, for example, the remote computer turns off, it's separated out into functions.</p>

<p>Query Some WMI data<br />
Update that to the database<br />
Query Other WMI data<br />
Update that to the database  </p>

<p>Is it better to open one mysql connection at the beginning and leave it open or close the connection after each update?</p>

<p>It seems as though one connection would use less resources. (Although I'm just learning, so this is a complete guess.)  However, opening and closing the connection with each update seems more 'neat'. Functions would be more stand alone, rather than depend on code outside that function.</p>
"
387686,48500,2008-12-22T22:58:24Z,30,What are the steps to make a ModelForm work with a ManyToMany relationship with an intermediary model in Django?,"<ul>
<li>I have a <em>Client</em> and <em>Groupe</em> Model.</li>
<li>A <em>Client</em> can be part of multiple <em>groups</em>.</li>
<li><em>Clients</em> that are part of a group can use its group's free rental rate at anytime but only once. That is where the intermediary model (<em>ClientGroupe</em>) comes in with that extra data.</li>
</ul>

<p>For now, when I try to save the m2m data, it just dies and says I should use the ClientGroupe Manager...so what's missing?</p>

<h2>Here are my models:</h2>

<pre><code>class Groupe(models.Model):
    nom = models.CharField(max_length=1500, blank=True)

class Client(models.Model):
    nom = models.CharField(max_length=450, blank=True)
    prenom = models.CharField(max_length=450, blank=True)
    groupes = models.ManyToManyField(Groupe, null = True, blank = True, through='ClientGroupe')

class ClientGroupe(models.Model):
    client = models.ForeignKey(Client)
    groupe = models.ForeignKey(Groupe)
    dt = models.DateField(null=True, blank=True) # the date the client is using its group's free rental rate    

    class Meta:
        db_table = u'clients_groupes'
</code></pre>

<h2>and here's my view:</h2>

<pre><code>def modifier(request, id):
    client = Client.objects.get(id=id)    
    form = ClientForm(instance = client)

    dict = {
        ""form"": form
        , ""instance"" : client
    }

    if request.method == ""POST"":
        form = ClientForm(request.POST, instance = client)

        if form.is_valid():
            client_mod = form.save()

            id = client_mod.id
            return HttpResponseRedirect(
                ""/client/%(id)s/?err=success"" % {""id"" : id}
            )
        else:
            return HttpResponseRedirect(
                ""/client/%(id)s/?err=warning"" % {""id"" : id}
            )

    return render_to_response(
        ""client/modifier.html""
        , dict
        , context_instance=RequestContext(request)
    )
</code></pre>

<p><strong>EDIT</strong>:</p>

<p>and here's the ClientForm code:</p>

<pre><code>class ClientForm(ModelForm):
    class Meta:
        model = Client
</code></pre>

<p><strong>EDIT #2</strong>:
here's the error message:</p>

<pre><code>AttributeError at /client/445/

Cannot set values on a ManyToManyField which specifies an intermediary model. Use ClientGroupe's Manager instead.

Request Method:     POST
Request URL:    http://localhost/client/445/
Exception Type:     AttributeError
Exception Value:    Cannot set values on a ManyToManyField which specifies an intermediary model.  Use ClientGroupe's Manager instead.

Exception Location:     C:\Python25\lib\site-packages\django\db\models\fields\related.py  in __set__, line 574
Python Executable:  C:\xampp\apache\bin\apache.exe
Python Version:     2.5.2
</code></pre>
"
387991,48540,2008-12-23T02:15:08Z,1,"printing a list of persons with more than one home, each home with more than one phone number","<p>I have a class Person which can have several Homes, each one with one or many Phone numbers.</p>

<p>I have defined the classes, but now i am trying to create a view wich list every person, with all its homes and all the phone numbers for each home address... something like:</p>

<pre><code>john smith
123 fake str
  305-99-8877
  305-99-8876
321 oak road
  444-98-7654

peter guy
453 north ave...
</code></pre>

<p>so far i have something like this:</p>

<p>(on my views.py)</p>

<pre><code>def ViewAll(request):
  people = Person.objects.all()
  render_to_response('viewall.html', {'people': people})
</code></pre>

<p>(and on my template)</p>

<pre><code>{% for guy in people %} 
  {{ guy.name }}
  {% if person.home_address_set.all %}
    {{ home_address }}

    {% for ?????? in ???? %}
      #print phone numbers in each home
    {% endfor %}

  {% endif %}
{% endfor %}
</code></pre>

<p>any idea of how to write the for I'm missing? of course, if there is another way (a better more elegant or efficient way) of doing what I need, I would love to hear it.</p>
"
388069,3594,2008-12-23T03:10:51Z,68,How to gracefully deal with failed future feature (__future__) imports due to old interpreter version?,"<p>How do you gracefully handle failed future feature imports? If a user is running using Python 2.5 and the first statement in my module is:</p>

<pre><code>from __future__ import print_function
</code></pre>

<p>Compiling this module for Python 2.5 will fail with a:</p>

<pre><code>  File ""__init__.py"", line 1
    from __future__ import print_function
SyntaxError: future feature print_function is not defined
</code></pre>

<p>I'd like to inform the user that they need to rerun the program with Python >= 2.6 and maybe provide some instructions on how to do so. However, to quote <a href=""http://www.python.org/dev/peps/pep-0236/"">PEP 236</a>:</p>

<blockquote>
  <p>The only lines that can appear before
  a future_statement are:</p>
  
  <ul>
  <li>The module docstring (if any).</li>
  <li>Comments.</li>
  <li>Blank lines.</li>
  <li>Other future_statements.</li>
  </ul>
</blockquote>

<p>So I can't do something like:</p>

<pre><code>import __future__

if hasattr(__future__, 'print_function'):
    from __future__ import print_function
else:
    raise ImportError('Python &gt;= 2.6 is required')
</code></pre>

<p>Because it yields:</p>

<pre><code>  File ""__init__.py"", line 4
    from __future__ import print_function
SyntaxError: from __future__ imports must occur at the beginning of the file
</code></pre>

<p>This snippet from the PEP seems to give hope of doing it inline:</p>

<blockquote>
  <p>Q:  I want to wrap future_statements
  in try/except blocks, so I can use
  different code depending on which
  version of Python I'm running.  Why
  can't I?</p>
  
  <p>A:  Sorry!  try/except is a runtime
  feature; future_statements are
  primarily compile-time gimmicks, and
  your try/except happens long after the
  compiler is done.  That is, by the
  time you do try/except, the semantics
  in effect for the module are already a
  done deal.  Since the try/except
  wouldn't accomplish what it <em>looks</em>
  like it should accomplish, it's simply
  not allowed.  We also want to keep
  these special statements very easy to
  find and to recognize.</p>
  
  <p>Note that you <em>can</em> import __future__
  directly, and use the information in
  it, along with sys.version_info, to
  figure out where the release you're
  running under stands in relation to a
  given feature's status.</p>
</blockquote>

<p>Ideas?</p>
"
388154,3594,2008-12-23T04:15:05Z,3,Python: flush a buffer before program termination via a finalizer,"<p>I keep a cache of transactions to flush (to persistent storage) on the event of a watermark or object finalization. Since <code>__del__</code> is <a href=""http://docs.python.org/reference/datamodel.html?highlight=__del__#object.__del__"" rel=""nofollow"">no longer guaranteed to be called</a> on every object, is the appropriate approach to hook a similar function (or <code>__del__</code> itself) into <code>atexit.register</code> (during initialization)?</p>

<p>If I'm not mistaken, this <em>will</em> cause the object to which the method is bound to hang around until program termination. This isn't likely to be a problem, but maybe there's a more elegant solution?</p>

<p>Note: I know using <code>__del__</code> is non-ideal because <a href=""http://docs.python.org/reference/datamodel.html?highlight=__del__#object.__del__"" rel=""nofollow"">it can cause uncatchable exceptions</a>, but I can't think of another way to do this short of cascading <code>finalize()</code> calls all the way through my program. TIA!</p>
"
388173,745,2008-12-23T04:25:09Z,8,Tidier way of trying to import a module from multiple locations?,"<p>Is there a way to tidy-up the following code, rather than a series of nested try/except statements?</p>

<pre><code>try:
    import simplejson as json
except ImportError:
    try:
        import json
    except ImportError:
        try:
            from django.utils import simplejson as json
        except:
            raise ""Requires either simplejson, Python 2.6 or django.utils!""
</code></pre>
"
388233,20894,2008-12-23T05:18:07Z,0,How can i create a lookup in Django?,"<p>I have a Question model &amp; Form, one of the fields in this model is <strong>userid=ForeignKey(User)</strong>, this Works perfectly well on the Question Model, am able to pick the user from a drop down. </p>

<p>But kind a tricky when i want to list the question from the model, which is the best way to <strong>lookup</strong> the user name from the Users table? becouse at this point i cant have the dropdown!</p>

<p>I want to have a simple thing e.g.</p>

<p>Question Title
asked by:<strong>lookup user Name</strong> </p>
"
388800,15890,2008-12-23T12:47:32Z,67,How do I use the built in password reset/change views with my own templates,"<p>For example I can point the <code>url '^/accounts/password/reset/$'</code> to <code>django.contrib.auth.views.password_reset</code> with my template filename in the context but I think need to send more context details.</p>

<p>I need to  know exactly what context to add for each of the password reset and change views.</p>
"
389398,22459,2008-12-23T16:46:47Z,1,Trouble with encoding in emails,"<p>I have a little python script that pulls emails from a POP mail address and dumps them into a file (one file one email)</p>

<p>Then a PHP script runs through the files and displays them.</p>

<p>I am having an issue with ISO-8859-1 (Latin-1) encoded email</p>

<p>Here's an example of the text i get: =?iso-8859-1?Q?G=EDsli_Karlsson?= and Sj=E1um hva=F0 =F3li er kl=E1r J</p>

<p>The way i pull emails is this code.</p>

<pre><code>pop = poplib.POP3(server)

mail_list = pop.list()[1]

for m in mail_list:
    mno, size = m.split()
    lines = pop.retr(mno)[1]

    file = StringIO.StringIO(""\r\n"".join(lines))
    msg = rfc822.Message(file)

    body = file.readlines()

    f = open(str(random.randint(1,100)) + "".email"", ""w"")
    f.write(msg[""From""] + ""\n"")
    f.write(msg[""Subject""] + ""\n"")
    f.write(msg[""Date""] + ""\n"")

    for b in body:
        f.write(b)
</code></pre>

<p>I have tried probably all combinations of encode / decode within python and php.</p>
"
389688,1384652,2008-12-23T18:30:53Z,11,Producing documentation for Python classes,"<p>I'm about to start a project where I will be the only one doing actual code and two less experienced programmers (scary to think of myself as experienced!) will be watching and making suggestions on the program in general.</p>

<p>Is there a good (free) system that I can use to provide documentation for classes and functions based on the code I've written? It'd likely help them a lot in getting to grips with the structure of the data.</p>
"
389945,3594,2008-12-23T20:11:08Z,9,How can I read Perl data structures from Python?,"<p>I've often seen people use Perl data structures in lieu of configuration files; i.e. a lone file containing only:</p>

<pre><code>%config = (
    'color' =&gt; 'red',
    'numbers' =&gt; [5, 8],
    qr/^spam/ =&gt; 'eggs'
);
</code></pre>

<p>What's the best way to convert the contents of these files into Python-equivalent data structures, using pure Python? For the time being we can assume that there are no real expressions to evaluate, only structured data.</p>
"
390250,38140,2008-12-23T22:30:52Z,222,"Elegant ways to support equivalence (""equality"") in Python classes","<p>When writing custom classes it is often important to allow equivalence by means of the <code>==</code> and <code>!=</code> operators. In Python, this is made possible by implementing the <code>__eq__</code> and <code>__ne__</code> special methods, respectively. The easiest way I've found to do this is the following method:</p>

<pre><code>class Foo:
    def __init__(self, item):
        self.item = item

    def __eq__(self, other):
        if isinstance(other, self.__class__):
            return self.__dict__ == other.__dict__
        else:
            return False

    def __ne__(self, other):
        return not self.__eq__(other)
</code></pre>

<p>Do you know of more elegant means of doing this? Do you know of any particular disadvantages to using the above method of comparing <code>__dict__</code>s?</p>

<p><strong>Note</strong>: A bit of clarification--when <code>__eq__</code> and <code>__ne__</code> are undefined, you'll find this behavior:</p>

<pre><code>&gt;&gt;&gt; a = Foo(1)
&gt;&gt;&gt; b = Foo(1)
&gt;&gt;&gt; a is b
False
&gt;&gt;&gt; a == b
False
</code></pre>

<p>That is, <code>a == b</code> evaluates to <code>False</code> because it really runs <code>a is b</code>, a test of identity (i.e., ""Is <code>a</code> the same object as <code>b</code>?"").</p>

<p>When <code>__eq__</code> and <code>__ne__</code> are defined, you'll find this behavior (which is the one we're after):</p>

<pre><code>&gt;&gt;&gt; a = Foo(1)
&gt;&gt;&gt; b = Foo(1)
&gt;&gt;&gt; a is b
False
&gt;&gt;&gt; a == b
True
</code></pre>
"
390263,NA,2008-12-23T22:37:51Z,1,Interpreting Excel Currency Values,"<p>I am using python to read a currency value from excel. The returned from the range.Value method is a tuple that I don't know how to parse.</p>

<p>For example, the cell appears as $548,982, but in python the value is returned as (1, 1194857614).</p>

<p>How can I get the numerical amount from excel or how can I convert this tuple value into the numerical value?</p>

<p>Thanks!</p>
"
390409,853,2008-12-23T23:43:30Z,31,How do you debug Mako templates?,"<p>So far I've found it impossible to produce usable tracebacks when Mako templates aren't coded correctly.</p>

<p>Is there any way to debug templates besides iterating for every line of code?</p>
"
390852,15055,2008-12-24T05:55:37Z,23,Is there any built-in way to get the length of an iterable in python?,"<p>For example, files, in Python, are iterable - they iterate over the lines in the file. I want to count the number of lines. </p>

<p>One quick way is to do this:</p>

<pre><code>lines = len(list(open(fname)))
</code></pre>

<p>However, this loads the whole file into memory (at once). This rather defeats the purpose of an iterator (which only needs to keep the current line in memory).</p>

<p>This doesn't work:</p>

<pre><code>lines = len(line for line in open(fname))
</code></pre>

<p>as generators don't have a length.</p>

<p>Is there any way to do this short of defining a count function?</p>

<pre><code>def count(i):
    c = 0
    for el in i: c += 1
    return c
</code></pre>

<p>EDIT: To clarify, I understand that the whole file will have to be read! I just don't want it in memory all at once =).</p>
"
390867,46914,2008-12-24T06:07:30Z,1,Calling Application Methods from a wx Frame Class,"<p>I'm starting out with wxPython and have been working my way through every tutorial and example I can get my hands on.  I've run into a slight problem, however, and it has to do with the wx.App versus the wx.Frame and which should contain specific methods.  Just about every example I've seen don't go much beyond layouts/sizers and event handling, none really tackle project organization of a wxPython project.</p>

<p>For example, I have a method that gets a list of folders.  The way most examples would deal with this would be to stick the method right in the frame class.  This method has the potential to be used in several other parts of the application, so it would make more sense to store it at the application class level.</p>

<p>How should I organize and call ""universal"" methods like these so that I don't clutter up my frame classes.</p>

<p><strong>UPDATE:</strong></p>

<p>To clarify, the ""list of folders"" was just an example, my actual method does a lot more work.  What I'm saying is I have code that isn't Frame-specific.  If I had this in the application class, what is the best way to call it from and event method in my frame.</p>

<p>I'm looking for actual project organization techniques, not programming fundamentals.</p>
"
391237,14838,2008-12-24T10:54:03Z,1,pyGTK Radio Button Help,"<p>Alright, I'll preface this with the fact that I'm a GTK <em>and</em> Python newb, but I haven't been able to dig up the information I needed. Basically what I have is a list of Radio Buttons, and based on which one is checked, I need to connect a button to a different function. I tried creating all my radio buttons, and then creating a disgusting if/else block checking for sget_active() on each button. The problem is the same button returns true every single time. Any ideas?</p>

<p>Here's the code in use:</p>

<pre><code>	#Radio Buttons Center
	self.updatePostRadioVBox = gtk.VBox(False, 0)
	self.updatePageRadio = gtk.RadioButton(None, ""Updating Page"")
	self.updatePostRadio = gtk.RadioButton(self.updatePageRadio, ""Updating Blog Post"")
	self.pageRadio = gtk.RadioButton(self.updatePageRadio, ""New Page"")
	self.blogRadio = gtk.RadioButton(self.updatePageRadio, ""New Blog Post"")
	self.addSpaceRadio = gtk.RadioButton(self.updatePageRadio, ""Add New Space"")
	self.removePageRadio = gtk.RadioButton(self.updatePageRadio, ""Remove Page"")
	self.removePostRadio = gtk.RadioButton(self.updatePageRadio, ""Remove Blog Post"")
	self.removeSpaceRadio = gtk.RadioButton(self.updatePageRadio, ""Remove Space"")


	#Now the buttons to direct us from here
	self.returnMainMenuButton = gtk.Button("" Main Menu "")
	self.returnMainMenuButton.connect(""clicked"", self.transToMain)
	self.contentManageHBoxBottom.pack_start(self.returnMainMenuButton, False, False, 30)
	self.contentProceedButton = gtk.Button(""    Proceed    "")
	self.contentManageHBoxBottom.pack_end(self.contentProceedButton, False, False, 30)

	if self.updatePageRadio.get_active():
		self.contentProceedButton.connect(""clicked"", self.updatePage)

	elif self.updatePostRadio.get_active():
		self.contentProceedButton.connect(""clicked"", self.updatePost)

	elif self.pageRadio.get_active():
		self.contentProceedButton.connect(""clicked"", self.newPage)

	elif self.blogRadio.get_active():
		self.contentProceedButton.connect(""clicked"", self.newBlogPost)

	elif self.addSpaceRadio.get_active():
		self.contentProceedButton.connect(""clicked"", self.newSpace)

	elif self.removePageRadio.get_active():
		self.contentProceedButton.connect(""clicked"", self.removePage)

	elif self.removePostRadio.get_active():
		self.contentProceedButton.connect(""clicked"", self.removeBlogPost)

	elif self.removeSpaceRadio.get_active():
		self.contentProceedButton.connect(""clicked"", self.removeSpace)
</code></pre>
"
391879,1384652,2008-12-24T17:23:14Z,45,Organising my Python project,"<p>I'm starting a Python project and expect to have 20 or more classes in it. As is good practice I want to put them in a separate file each. However, the project directory quickly becomes swamped with files (or will when I do this).</p>

<p>If I put a file to import in a folder I can no longer import it. How do I import a file from another folder and will I need to reference to the class it contains differently now that it's in a folder?</p>

<p>Thanks in advance</p>
"
392041,48810,2008-12-24T18:54:52Z,33,Python Optparse list,"<p>I'm using the python optparse module in my program, and I'm having trouble finding an easy way to parse an option that contains a list of values.</p>

<p>For example:</p>

<pre><code>--groups one,two,three. 
</code></pre>

<p>I'd like to be able to access these values in a list format as <code>options.groups[]</code>. Is there an optparse option to convert comma separated values into a list? Or do I have to do this manually?</p>
"
392100,40429,2008-12-24T19:30:01Z,2,wxPython and sharing objects between windows,"<p>I've been working with python for a while now and am just starting to learn wxPython.  After creating a few little programs, I'm having difficulty understanding how to create objects that can be shared between dialogs.</p>

<p>Here's some code as an example (apologies for the length - I've tried to trim):</p>

<pre><code>import wx

class ExampleFrame(wx.Frame):
    """"""The main GUI""""""
    def __init__(self, parent, id, title):
        wx.Frame.__init__(self, parent, id, title, size=(200,75))
        mainSizer = wx.BoxSizer(wx.VERTICAL)

        # Setup buttons
        buttonSizer = wx.BoxSizer(wx.HORIZONTAL)
        playerButton = wx.Button(self, wx.ID_ANY, ""Player number"", wx.DefaultPosition, wx.DefaultSize, 0)
        buttonSizer.Add(playerButton, 1, wx.ALL | wx.EXPAND, 0)
        nameButton = wx.Button(self, wx.ID_ANY, ""Player name"", wx.DefaultPosition, wx.DefaultSize, 0)
        buttonSizer.Add(nameButton, 1, wx.ALL | wx.EXPAND, 0)

        # Complete layout and add statusbar
        mainSizer.Add(buttonSizer, 1, wx.EXPAND, 5)
        self.SetSizer(mainSizer)
        self.Layout()

        # Deal with the events
        playerButton.Bind(wx.EVT_BUTTON, self.playerButtonEvent)
        nameButton.Bind(wx.EVT_BUTTON, self.nameButtonEvent)
        self.Show(True)
        return

    def playerButtonEvent(self, event):
        """"""Displays the number of game players""""""
        playerDialog = PlayerDialogWindow(None, -1, ""Player"")
        playerDialogResult = playerDialog.ShowModal() 
        playerDialog.Destroy()
        return

    def nameButtonEvent(self, event):
        """"""Displays the names of game players""""""
        nameDialog = NameDialogWindow(None, -1, ""Name"")
        nameDialogResult = nameDialog.ShowModal() 
        nameDialog.Destroy()
        return

class PlayerDialogWindow(wx.Dialog):
    """"""Displays the player number""""""
    def __init__(self, parent, id, title):
        wx.Dialog.__init__(self, parent, id, title, size=(200,120))

        # Setup layout items
        self.SetAutoLayout(True)
        mainSizer = wx.BoxSizer(wx.VERTICAL)
        dialogPanel = wx.Panel(self, wx.ID_ANY, wx.DefaultPosition, wx.DefaultSize, wx.TAB_TRAVERSAL)
        dialogSizer = wx.BoxSizer(wx.VERTICAL)

        # Display player number
        playerNumber = ""Player number is %i"" % gamePlayer.number
        newLabel = wx.StaticText(dialogPanel, wx.ID_ANY, playerNumber, wx.DefaultPosition, wx.DefaultSize, 0)
        dialogSizer.Add(newLabel, 0, wx.ALL | wx.EXPAND, 5)

        # Setup buttons
        buttonSizer = wx.StdDialogButtonSizer()
        okButton = wx.Button(dialogPanel, wx.ID_OK)
        buttonSizer.AddButton(okButton)
        buttonSizer.Realize()
        dialogSizer.Add(buttonSizer, 1, wx.EXPAND, 5)

        # Complete layout
        dialogPanel.SetSizer(dialogSizer)
        dialogPanel.Layout()
        dialogSizer.Fit(dialogPanel)
        mainSizer.Add(dialogPanel, 1, wx.ALL | wx.EXPAND, 5)
        self.SetSizer(mainSizer)
        self.Layout()

        # Deal with the button events
        okButton.Bind(wx.EVT_BUTTON, self.okClick)
        return

    def okClick(self, event):
        """"""Deals with the user clicking the ok button""""""
        self.EndModal(wx.ID_OK)
        return 

class NameDialogWindow(wx.Dialog):
    """"""Displays the player name""""""
    def __init__(self, parent, id, title):
        wx.Dialog.__init__(self, parent, id, title, size=(200,120))

        # Setup layout items
        self.SetAutoLayout(True)
        mainSizer = wx.BoxSizer(wx.VERTICAL)
        dialogPanel = wx.Panel(self, wx.ID_ANY, wx.DefaultPosition, wx.DefaultSize, wx.TAB_TRAVERSAL)
        dialogSizer = wx.BoxSizer(wx.VERTICAL)

        # Display player number
        playerNumber = ""Player name is %s"" % gamePlayer.name
        newLabel = wx.StaticText(dialogPanel, wx.ID_ANY, playerNumber, wx.DefaultPosition, wx.DefaultSize, 0)
        dialogSizer.Add(newLabel, 0, wx.ALL | wx.EXPAND, 5)

        # Setup buttons
        buttonSizer = wx.StdDialogButtonSizer()
        okButton = wx.Button(dialogPanel, wx.ID_OK)
        buttonSizer.AddButton(okButton)
        buttonSizer.Realize()
        dialogSizer.Add(buttonSizer, 1, wx.EXPAND, 5)

        # Complete layout
        dialogPanel.SetSizer(dialogSizer)
        dialogPanel.Layout()
        dialogSizer.Fit(dialogPanel)
        mainSizer.Add(dialogPanel, 1, wx.ALL | wx.EXPAND, 5)
        self.SetSizer(mainSizer)
        self.Layout()

        # Deal with the button events
        okButton.Bind(wx.EVT_BUTTON, self.okClick)
        return

    def okClick(self, event):
        """"""Deals with the user clicking the ok button""""""
        self.EndModal(wx.ID_OK)
        return 

class Player(object):
    """"""A game player""""""
    def __init__(self, number, name):
        self.number = number
        self.name = name
        return

def main():
    # Start GUI
    global gamePlayer
    gamePlayer = Player(1, ""John Smith"")
    app = wx.App(redirect=False)
    frame = ExampleFrame(None, -1, ""Example frame"")
    frame.Show(True)
    app.MainLoop()
    return 0

if __name__ == '__main__':
    main()
</code></pre>

<p>So, I want both of the dialogs to access the gamePlayer object.  At the moment, the only way I can think of doing it is to create the gamePlayer object as a global object, but these are normally frowned upon - is there a better way to do this?</p>

<p>There is a method of passing objects in event bindings in <a href=""http://stackoverflow.com/questions/173687?sort=votes"" rel=""nofollow"">this question</a>, but it doesn't feel quite right.</p>

<p>Is learning to implement the MVC pattern the way forward here?</p>

<p>Thanks.</p>
"
392160,28380,2008-12-24T20:13:06Z,51,What are your (concrete) use-cases for metaclasses in Python?,"<p>I have a friend who likes to use metaclasses, and regularly offers them as a solution.</p>

<p>I am of the mind that you almost never need to use metaclasses. Why? because I figure if you are doing something like that to a class, you should probably be doing it to an object. And a small redesign/refactor is in order.</p>

<p>Being able to use metaclasses has caused a lot of people in a lot of places to use classes as some kind of second rate object, which just seems disastrous to me. Is programming to be replaced by meta-programming? The addition of class decorators has unfortunately made it even more acceptable.</p>

<p>So please, I am desperate to know your valid (concrete) use-cases for metaclasses in Python. Or to be enlightened as to why mutating classes is better than mutating objects, sometimes.</p>

<p>I will start:</p>

<blockquote>
  <p>Sometimes when using a third-party
  library it is useful to be able to
  mutate the class in a certain way.</p>
</blockquote>

<p>(this is the only case I can think of, and it's not concrete)</p>
"
392217,26603,2008-12-24T21:05:12Z,3,Is there a Ruby/Python HTML reflow/layout library?,"<p>I'm looking for a library in Ruby or Python that would take some HTML and CSS as the input and return data that contains the positions and sizes of the elements. If it helps, I don't need the info for all the elements but just the major divs of the page.</p>
"
392349,4381,2008-12-24T23:38:30Z,22,Modify bound variables of a closure in Python,"<p>Is there any way to modify the bound value of one of the variables inside a closure? Look at the example to understand it better.</p>

<pre><code>def foo():
	var_a = 2
	var_b = 3

	def _closure(x):
		return var_a + var_b + x

	return _closure


localClosure = foo()

# Local closure is now ""return 2 + 3 + x""
a = localClosure(1) # 2 + 3 + 1 == 6

# DO SOME MAGIC HERE TO TURN ""var_a"" of the closure into 0
# ...but what magic? Is this even possible?

# Local closure is now ""return 0 + 3 + x""
b = localClosure(1) # 0 + 3 +1 == 4
</code></pre>
"
392624,49018,2008-12-25T08:25:54Z,11,Good language to develop a game server in?,"<p>I was just wondering what language would be a good choice for developing a game server to support a large (thousands) number of users? I dabbled in python, but realized that it would just be too much trouble since it doesn't spawn threads across cores (meaning an 8 core server=1 core server). I also didn't really like the language (that ""self"" stuff grossed me out).</p>

<p>I know that C++ is the language for the job in terms of performance, but I hate it. I don't want to deal with its sloppy syntax and I like my hand to be held by managed languages. This brings me to C# and Java, but I am open to other languages. I love the simplicity of .NET, but I was wondering if, speed wise, this would be good for the job. Keep in mind since this will be deployed on a Linux server, it would be running on the Mono framework - not sure if that matters. I know that Java is syntax-wise very similar to .Net, but my experience with it is limited. Are there any frameworks out there for it or anthing to ease in the development?</p>

<p>Please help me and my picky self arrive on a solution.</p>

<p>UPDATE: I didn't mean to sound so picky, and I really don't think I was. The only language I really excluded was C++, Python I don't like because of the scalability problem. I know that there are ways of communicating between processes, but if I have an 8 core server, why should I need to make 8 processes? Is there a more elegant solution?</p>
"
392728,25459,2008-12-25T10:56:00Z,4,How to make a color from a number,"<p>I have a function that returns a float from 0 to 255. I would like to make a gradient in red color from this, but I need a string in ""#FFFFFF"" format. Is there a function for that?</p>
"
392784,36832,2008-12-25T12:40:27Z,4,How to process two forms in one view?,"<p>I have two completely different forms in one template. How to process them in one view? How can I distinguish which of the forms was submitted? How can I use prefix to acomplish that? Or maybe it's better to write separate views?<br /><br />
regards<br />
chriss</p>
"
393053,NA,2008-12-25T18:50:18Z,81,Length of generator output,"<p>Python provides a nice method for getting length of an eager iterable, <code>len(x)</code> that is. But I couldn't find anything similar for lazy iterables represented by generator comprehensions and functions. Of course, it is not hard to write something like:</p>

<pre><code>def iterlen(x):
  n = 0
  try:
    while True:
      next(x)
      n += 1
  except StopIteration: pass
  return n
</code></pre>

<p>But I can't get rid of a feeling that I'm reimplementing a bicycle.</p>

<p>(While I was typing the function, a thought struck my mind: maybe there really is no such function, because it ""destroys"" its argument. Not an issue for my case, though).</p>

<p>P.S.: concerning the first answers - yes, something like <code>len(list(x))</code> would work too, but that drastically increases the usage of memory.</p>

<p>P.P.S.: re-checked... Disregard the P.S., seems I made a mistake while trying that, it works fine. Sorry for the trouble.</p>
"
393554,38146,2008-12-26T06:51:54Z,54,Python sqlite3 and concurrency,"<p>I have a Python program that uses the ""threading"" module. Once every second, my program starts a new thread that fetches some data from the web, and stores this data to my hard drive. I would like to use sqlite3 to store these results, but I can't get it to work. The issue seems to be about the following line:</p>

<pre><code>conn = sqlite3.connect(""mydatabase.db"")
</code></pre>

<ul>
<li>If I put this line of code inside each thread, I get an OperationalError telling me that the database file is locked. I guess this means that another thread has mydatabase.db open through a sqlite3 connection and has locked it.</li>
<li>If I put this line of code in the main program and pass the connection object (conn) to each thread, I get a ProgrammingError, saying that SQLite objects created in a thread can only be used in that same thread.</li>
</ul>

<p>Previously I was storing all my results in CSV files, and did not have any of these file-locking issues. Hopefully this will be possible with sqlite. Any ideas?</p>
"
393629,5475,2008-12-26T08:49:51Z,5,"What values to use for FastCGI maxrequests, maxspare, minspare, maxchildren?","<p>I'm running a Django app using FastCGI and lighttpd.</p>

<p>Can somebody explain me what I should consider when deciding what value to use for maxrequests, maxspare, minspare, maxchildren?</p>

<p>These options are not too well documented, but seem quite important.</p>

<p>Don't just tell me what they do; I want to understand what <em>implications</em> they have and how I should decide on what values to use.</p>

<p>Thanks.</p>
"
393637,5475,2008-12-26T09:04:03Z,8,Django + FastCGI - randomly raising OperationalError,"<p>I'm running a Django application. Had it under Apache + mod_python before, and it was all OK. Switched to Lighttpd + FastCGI. Now I randomly get the following exception (neither the place nor the time where it appears seem to be predictable). Since it's random, and it appears only after switching to FastCGI, I assume it has something to do with some settings.</p>

<p>Found a few results when googleing, but they seem to be related to setting maxrequests=1. However, I use the default, which is 0.</p>

<p>Any ideas where to look for?</p>

<p>PS. I'm using PostgreSQL. Might be related to that as well, since the exception appears when making a database query.</p>

<pre><code> File ""/usr/lib/python2.6/site-packages/django/core/handlers/base.py"", line 86, in get_response
   response = callback(request, *callback_args, **callback_kwargs)

 File ""/usr/lib/python2.6/site-packages/django/contrib/admin/sites.py"", line 140, in root
   if not self.has_permission(request):

 File ""/usr/lib/python2.6/site-packages/django/contrib/admin/sites.py"", line 99, in has_permission
   return request.user.is_authenticated() and request.user.is_staff

 File ""/usr/lib/python2.6/site-packages/django/contrib/auth/middleware.py"", line 5, in __get__
   request._cached_user = get_user(request)

 File ""/usr/lib/python2.6/site-packages/django/contrib/auth/__init__.py"", line 83, in get_user
   user_id = request.session[SESSION_KEY]

 File ""/usr/lib/python2.6/site-packages/django/contrib/sessions/backends/base.py"", line 46, in __getitem__
   return self._session[key]

 File ""/usr/lib/python2.6/site-packages/django/contrib/sessions/backends/base.py"", line 172, in _get_session
   self._session_cache = self.load()

 File ""/usr/lib/python2.6/site-packages/django/contrib/sessions/backends/db.py"", line 16, in load
   expire_date__gt=datetime.datetime.now()

 File ""/usr/lib/python2.6/site-packages/django/db/models/manager.py"", line 93, in get
   return self.get_query_set().get(*args, **kwargs)

 File ""/usr/lib/python2.6/site-packages/django/db/models/query.py"", line 304, in get
   num = len(clone)

 File ""/usr/lib/python2.6/site-packages/django/db/models/query.py"", line 160, in __len__
   self._result_cache = list(self.iterator())

 File ""/usr/lib/python2.6/site-packages/django/db/models/query.py"", line 275, in iterator
   for row in self.query.results_iter():

 File ""/usr/lib/python2.6/site-packages/django/db/models/sql/query.py"", line 206, in results_iter
   for rows in self.execute_sql(MULTI):

 File ""/usr/lib/python2.6/site-packages/django/db/models/sql/query.py"", line 1734, in execute_sql
   cursor.execute(sql, params)

OperationalError: server closed the connection unexpectedly
       This probably means the server terminated abnormally
       before or while processing the request.
</code></pre>
"
393738,NA,2008-12-26T12:54:27Z,2,Programmatic Form Submit,"<p>I want to scrape the contents of a webpage. The contents are produced after a form on that site has been filled in and submitted. </p>

<p>I've read on how to scrape the end result content/webpage - but how to I programmatically submit the form? </p>

<p>I'm using python and have read that I might need to get the original webpage with the form, parse it, get the form parameters and then do X? </p>

<p>Can anyone point me in the rigth direction?</p>
"
393843,49206,2008-12-26T14:40:04Z,57,python and regular expression with unicode,"<p>I need to delete some unicode symbols from the string 'بِسْمِ اللَّهِ الرَّحْمَٰنِ الرَّحِيمِ'</p>

<p>I know they exist here for sure. I try:</p>

<pre><code>re.sub('([\u064B-\u0652\u06D4\u0670\u0674\u06D5-\u06ED]+)', '', 'بِسْمِ اللَّهِ الرَّحْمَٰنِ الرَّحِيمِ')
</code></pre>

<p>but it doesn't work. String stays the same. ant suggestion what i do wrong?</p>
"
393871,23034,2008-12-26T15:12:10Z,4,Scripting inside a Python application,"<p><br/>
I'd like to include <strong>Python scripting</strong> in one of my applications, that is written in Python itself. </p>

<p>My application must be able to call external Python functions (written by the user) as <strong>callbacks</strong>. There must be some control on code execution; for example, if the user provided code with syntax errors, the application must signal that.</p>

<p>What is the best way to do this?
<br/>Thanks.</p>

<p><em>edit</em>: question was unclear. I need a mechanism similar to events of VBA, where there is a ""declarations"" section (where you define global variables) and events, with scripted code, that fire at specific points.</p>
"
394300,16584,2008-12-26T21:34:05Z,1,python introspection not showing functions for Lock,"<p>When I try to use introspection to look at what methods are available on threading.Lock I don't see what I would expect.</p>

<p>Specifically I don't see acquire, release or locked.  Why is this?</p>

<p>Here's what I do see:</p>

<pre><code>&gt;&gt;&gt; dir (threading.Lock)
['__call__', '__class__', '__cmp__', '__delattr__', '__doc__', '__getattribute__', '__hash__', '__init__', '__module__', '__name__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__self__', '__setattr__', '__str__']
</code></pre>
"
394372,40195,2008-12-26T22:24:43Z,0,Finding when the ActiveApplication changes in OSX through Python,"<p>Is there a way to find when the activeApplication changes in OSX through Python and AppKit? I know how to find out launchedApplication and activeApplication ( please refer to my other question here: <a href=""http://stackoverflow.com/questions/373020/finding-the-current-active-window-in-mac-os-x-using-python"">http://stackoverflow.com/questions/373020/finding-the-current-active-window-in-mac-os-x-using-python</a> )</p>
"
394439,11563,2008-12-26T23:16:23Z,3,Python: Lock directory access under windows,"<p>I'd like to be able to lock directory access under windows.
The following code work greatly with file or directory under POSIX system:</p>

<pre><code>def flock(fd, blocking=False, exclusive=False):

    if exclusive:
        flags = fcntl.LOCK_EX
    else:
        flags = fcntl.LOCK_SH
    if not blocking:
        flags |= fcntl.LOCK_NB
    fcntl.flock(fd, flags)
</code></pre>

<p>But I only find a way to perform lock access for file, not directory with the following code:</p>

<pre><code>def flock(fd, blocking=False, exclusive=False):

    if blocking:
        flags = msvcrt.LK_NBLCK
    else:
        flags = msvcrt.LK_LOCK
    msvcrt.locking(fd.fileno(), flags, os.path.getsize(fd.name))
</code></pre>

<p>Have you got any idea how to improve this code and be able to lock directory access ?</p>

<p>Bertrand</p>
"
394465,9440,2008-12-26T23:35:59Z,14,Python POST data using mod_wsgi,"<p>This must be a very simple question, but I don't seem to be able to figure out.</p>

<p>I'm using apache + mod_wsgi to host my python application, and I'd like to get the post content submitted in one of the forms -however, neither the environment values, nor sys.stdin contains any of this data. Mind giving me a quick hand?</p>

<p>Edit:
Tried already: </p>

<ul>
<li>environ[""CONTENT_TYPE""] = 'application/x-www-form-urlencoded'   (no data)</li>
<li>environ[""wsgi.input""] seems a plausible way, however, both environ[""wsgi.input""].read(), and environ[""wsgi.input""].read(-1) returns an empty string (yes, content has been posted, and environ[""request_method""] = ""post""</li>
</ul>
"
394500,9161,2008-12-27T00:25:16Z,2,Is there a simple way in Python to create a file which can be written to in one thread and read in a different one?,"<p>In the python program I'm writing, I've got a thread which iterates over a large structure in memory and writes it incrementally into a file-like object.  I've got another thread which takes a file-like object and writes it to disk.  Is there an easy way to connect the two, such that any data input from the first thread will be buffered for the second?</p>

<p>Specifically, I'm trying to pass data to subprocess.Popen().  The process will read from stdin, but you cannot pass a ""file-like"" object to Popen because it calls stdin.fileno() and blows up unless you have a real file.</p>

<p>Instead, you need to pass the PIPE argument to Popen, which allows you to use proc.stdin as a file-like object.  But if you've already got a file-like object, there doesn't seem to be a great way to yolk the two of them together.</p>
"
394618,49287,2008-12-27T03:23:33Z,5,SDL or PyGame international input,"<p>So basically, how is non-western input handled in SDL or OpenGL games or applications?  Googling for it reveals <a href=""http://sdl-im.csie.net/"" rel=""nofollow"">http://sdl-im.csie.net/</a> but that doesn't seem to be maintained or available anymore.  Just to view the page I had to use the <a href=""http://74.125.95.132/search?q=cache:PYYdG1HpzZ0J:sdl-im.csie.net/+sdl+input&amp;hl=en&amp;ct=clnk&amp;cd=6&amp;gl=us&amp;client=firefox-a"" rel=""nofollow"">Google cache</a>.  </p>

<p>To clarify, I'm not having any kind of issue in terms of the application displaying text in non-western languages to users.  This is a solved problem.  There are many unicode fonts available, and many different ways to process text into glyphs and then into display surfaces.  </p>

<p>I run a-foul in the opposite direction.  Even if my program could safely handle text data in any arbitrary encoding, there's no way for users to actually type their name if it happens to include a character that requires more than one keystroke to produce.  </p>
"
394770,42636,2008-12-27T07:12:07Z,33,Override a method at instance level,"<p>Is there a way in Python to override a class method at instance level?
For example:</p>

<pre><code>class Dog:
    def bark(self):
        print ""WOOF""

boby = Dog()
boby.bark() # WOOF
# METHOD OVERRIDE
boby.bark() # WoOoOoF!!
</code></pre>
"
394809,51518,2008-12-27T08:32:18Z,2655,Does Python have a ternary conditional operator?,"<p>If Python does not have a ternary conditional operator, is it possible to simulate one using other language constructs?</p>
"
394895,37491,2008-12-27T11:03:00Z,2,Python threads stack_size and segfaults,"<p>A web crawler script that spawns at most 500 threads and each thread basically requests for certain data served from the remote server, which each server's reply is different in content and size from others.</p>

<p>i'm setting stack_size as 756K's for threads</p>

<pre><code>threading.stack_size(756*1024)
</code></pre>

<p>which enables me to have the sufficient number of threads required and complete most of the jobs and requests. But as some servers' responses are bigger than others, and when a thread gets that kind of response, script dies with SIGSEGV. </p>

<p>stack_sizes more than 756K makes it impossible to have the required number of threads at the same time. </p>

<p>any suggestions on how can i continue with given stack_size without crashes?
and how can i get the current used stack_size of any given thread? </p>
"
394978,51518,2008-12-27T13:09:10Z,1,Download from EXPLOSM.net Comics Script [Python],"<p>So I wrote this short script (correct word?) to download the comic images from explosm.net comics because I somewhat-recently found out about it and I want to...put it on my iPhone...3G.</p>

<p>It works fine and all. urllib2 for getting webpage html and urllib for image.retrieve()</p>

<p><strong><em>Why I posted this on SO: how do I optimize this code? Would REGEX (regular expressions) make it faster? Is it an internet limitation? Poor algorithm...?</em></strong></p>

<p>Any improvements in speed or <strong><em>general code aesthetics</em></strong> would be greatly appreciated ""answers"".</p>

<p><i>Thank you.</i></p>

<p><i>--------------------------------CODE----------------------------------</i></p>

<pre><code>import urllib, urllib2

def LinkConvert(string_link):
    for eachLetter in string_link:
        if eachLetter == "" "":
            string_link = string_link[:string_link.find(eachLetter)] + ""%20"" + string_link[string_link.find(eachLetter)+1:]
    return string_link

start = 82
end = 1506

matchingStart = """"""&lt;img alt=""Cyanide and Happiness, a daily webcomic"" src=""http://www.explosm.net/db/files/Comics/""""""
matchingEnd = """"""&gt;&lt;/""""""
link = ""http://www.explosm.net/comics/""

for pageNum in range(start,start+7):
    req = urllib2.Request(link+`pageNum`)
    response = urllib2.urlopen(req)
    page = response.read()

    istart1 = page.find(matchingStart)
    iend1 = page.find(matchingEnd, istart1)
    newString1 = page[istart1 : iend1]

    istart2 = newString1.find(""src="")+4
    iend2 = len(newString1)
    final = newString1[istart2 +1 : iend2 -1]

    final = LinkConvert(final)
    try:
        image = urllib.URLopener()
        image.retrieve(final, `pageNum` + "".jpg"")
    except:
        print ""Uh-oh! "" + `pageNum` + "" was not downloaded!""

    print `pageNum` + "" completed...""
</code></pre>

<p><i>By the way, this is Python 2.5 code, not 3.0 but you bet I have all the features of PYthon 3.0 greatly studied and played around with before or right after New Year (after College Apps - YAY! ^-^)</i></p>
"
395053,36832,2008-12-27T14:43:10Z,0,templatetags don't refresh,"<p>I have two templatetags in my app which contain forms which show entries in db. When I alter data or add new entry to db, the forms show the old data.  While in admin panel everything is correct (updated). When I restart the server (I mean <code>manage.py runserver</code>) forms show updated db entries. How to make the forms show updated data?<br /><br />
regards<br />
chriss<br /><br />
<b>EDIT:</b><br />
file: <code>templatetags/oceny_tags.py</code>:<br /></p>

<pre><code>from django import template
from oceny.formularze import StudentFormularz, PrzeniesStudentaFormularz

def dodajStudenta(req):
    formularz = StudentFormularz(req)
    return {'formularz': formularz}

def przeniesStudenta(req):
    formularz = PrzeniesStudentaFormularz(req)
    return {'formularz': formularz}

register = template.Library()
register.inclusion_tag('oceny/formularz_studenta.html', takes_context = False)(dodajStudenta)
register.inclusion_tag('oceny/formularz_przenies_studenta.html', takes_context = False)(przeniesStudenta)
</code></pre>

<p>file: <code>views.py</code> view responsible for handling forms:</p>

<pre><code>def zarzadzajStudentami(request):
    formularze = ['dodaj_studenta', 'przenies_studenta']
    req = {}
    for e in formularze:
        req[e] = None
    if request.POST:
        req[request.POST['formularz']] = request.POST
        if request.POST['formularz'] == 'dodaj_studenta':
            formularz = StudentFormularz(request.POST)
            if formularz.is_valid():
                formularz.save()
                return HttpResponseRedirect(reverse('zarzadzaj_studentami'))
        elif request.POST['formularz'] == 'przenies_studenta':
            formularz = PrzeniesStudentaFormularz(request.POST)
            if formularz.is_valid():
                student = Student.objects.get(id = request.POST['student'])
                grupa = Grupa.objects.get(id = request.POST['grupa'])
                student.grupa = grupa
                student.save()
                return HttpResponseRedirect(reverse('zarzadzaj_studentami'))
    return render_to_response('oceny/zarzadzaj_studentami.html', {'req': req}, context_instance = RequestContext(request))
</code></pre>

<p>I realize that the code may be lame in some cases. I would appreciate any other hints how to write things better.</p>
"
395340,48540,2008-12-27T19:58:22Z,11,Can I use a ForeignKey in __unicode__ return?,"<p>I have the following classes: Ingredients, Recipe and RecipeContent...</p>

<pre><code>class Ingredient(models.Model):
    name = models.CharField(max_length=30, primary_key=True)
    qty_on_stock = models.IntegerField()

    def __unicode__(self):
        return self.name

class Recipe(models.Model):
    name = models.CharField(max_length=30, primary_key=True)
    comments = models.TextField(blank=True)
    ingredient = models.ManyToManyField(Ingredient)

    def __unicode__(self):
        return self.name

class RecipeContent(models.Model):
    recipe = models.ForeignKey(Recipe)
    ingredients = models.ForeignKey(Ingredient)
    qty_used = models.IntegerField()
</code></pre>

<p>but for __unicode__() in RecipeContent I would like to use the Recipe name to which this RecipeContent belongs to... is there a way to do it?</p>
"
395451,267,2008-12-27T21:45:47Z,6,"How to download a file over http with authorization in python 3.0, working around bugs?","<p>I have a script that I'd like to continue using, but it looks like I either have to find some workaround for a bug in Python 3, or downgrade back to 2.6, and thus having to downgrade other scripts as well...</p>

<p>Hopefully someone here have already managed to find a workaround.</p>

<p>The problem is that due to the new changes in Python 3.0 regarding bytes and strings, not all the library code is apparently tested.</p>

<p>I have a script that downloades a page from a web server. This script passed a username and password as part of the url in python 2.6, but in Python 3.0, this doesn't work any more.</p>

<p>For instance, this:</p>

<pre><code>import urllib.request;
url = ""http://username:password@server/file"";
urllib.request.urlretrieve(url, ""temp.dat"");
</code></pre>

<p>fails with this exception:</p>

<pre><code>Traceback (most recent call last):
  File ""C:\Temp\test.py"", line 5, in &lt;module&gt;
    urllib.request.urlretrieve(url, ""test.html"");
  File ""C:\Python30\lib\urllib\request.py"", line 134, in urlretrieve
    return _urlopener.retrieve(url, filename, reporthook, data)
  File ""C:\Python30\lib\urllib\request.py"", line 1476, in retrieve
    fp = self.open(url, data)
  File ""C:\Python30\lib\urllib\request.py"", line 1444, in open
    return getattr(self, name)(url)
  File ""C:\Python30\lib\urllib\request.py"", line 1618, in open_http
    return self._open_generic_http(http.client.HTTPConnection, url, data)
  File ""C:\Python30\lib\urllib\request.py"", line 1576, in _open_generic_http
    auth = base64.b64encode(user_passwd).strip()
  File ""C:\Python30\lib\base64.py"", line 56, in b64encode
    raise TypeError(""expected bytes, not %s"" % s.__class__.__name__)
TypeError: expected bytes, not str
</code></pre>

<p>Apparently, base64-encoding now needs bytes in and outputs a string, and thus urlretrieve (or some code therein) which builds up a string of username:password, and tries to base64-encode this for simple authorization, fails.</p>

<p>If I instead try to use urlopen, like this:</p>

<pre><code>import urllib.request;
url = ""http://username:password@server/file"";
f = urllib.request.urlopen(url);
contents = f.read();
</code></pre>

<p>Then it fails with this exception:</p>

<pre><code>Traceback (most recent call last):
  File ""C:\Temp\test.py"", line 5, in &lt;module&gt;
    f = urllib.request.urlopen(url);
  File ""C:\Python30\lib\urllib\request.py"", line 122, in urlopen
    return _opener.open(url, data, timeout)
  File ""C:\Python30\lib\urllib\request.py"", line 359, in open
    response = self._open(req, data)
  File ""C:\Python30\lib\urllib\request.py"", line 377, in _open
    '_open', req)
  File ""C:\Python30\lib\urllib\request.py"", line 337, in _call_chain
    result = func(*args)
  File ""C:\Python30\lib\urllib\request.py"", line 1082, in http_open
    return self.do_open(http.client.HTTPConnection, req)
  File ""C:\Python30\lib\urllib\request.py"", line 1051, in do_open
    h = http_class(host, timeout=req.timeout) # will parse host:port
  File ""C:\Python30\lib\http\client.py"", line 620, in __init__
    self._set_hostport(host, port)
  File ""C:\Python30\lib\http\client.py"", line 632, in _set_hostport
    raise InvalidURL(""nonnumeric port: '%s'"" % host[i+1:])
http.client.InvalidURL: nonnumeric port: 'password@server'
</code></pre>

<p>Apparently the url parsing in this ""next gen url retrieval library"" doesn't know what to do with username and passwords in the url.</p>

<p>What other choices do I have?</p>
"
395509,36680,2008-12-27T22:23:48Z,6,How do I install MySQL and the Python MySQL package on OS X Leopard? Or how do I learn about being a web developer using OS X?,"<p>I'm new to the Mac OS X, and I'm just about ready to throw my brand new <a href=""http://en.wikipedia.org/wiki/MacBook_Pro"" rel=""nofollow"">MacBook Pro</a> out the window. Every tutorial on setting up a Django development environment on <a href=""http://en.wikipedia.org/wiki/Mac_OS_X_Leopard"" rel=""nofollow"">Mac&nbsp;OS&nbsp;X Leopard</a> is insidiously wrong. They are all skipping over one step, or assuming you have setup something one way, or are just assuming that I know one thing that I must not.</p>

<p>I'm very familiar with how to setup the environment on Ubuntu/Linux, and the only part I'm getting stuck on with <a href=""https://en.wikipedia.org/wiki/OS_X"" rel=""nofollow"">OS&nbsp;X</a> is how to install MySQL, autostart it, and install the Python MySQL bindings. I think my mistake was using a hodgepodge of tools I don't fully understand; I used fink to install MySQL and its development libraries and then tried to build the Python-MySQL bindings from source (but they won't build.)</p>

<p>UPDATE:
I installed the binary MySQL package from <a href=""http://dev.mysql.com/downloads/mysql/5.1.html#macosx-dmg"" rel=""nofollow"">http://dev.mysql.com/downloads/mysql/5.1.html#macosx-dmg</a>, and I got MySQL server running (can access with admin.)
The MySQL version I got from port was rubbish, I could not get it to run at all.</p>

<p>I modified the source for the Python-MySQL package as per the answer I chose, but I still got compilation errors that I listed in the comments. I was able to fix these by adding /usr/local/mysql/bin/ to my path in my ""~/.profile"" file.
""
PATH=/usr/local/mysql/bin:$PATH
""</p>

<p>Thanks for the help, I was very wary about editing the source code since this operation had been so easy on Ubuntu, but I'll be more willing to try that in the future. I'm really missing Ubuntu's ""apt-get"" command; it makes life very easy and simple sometimes. I already have an Ubuntu <a href=""http://en.wikipedia.org/wiki/VMware"" rel=""nofollow"">VMware</a> image running on my Mac, so I can always use that as a fallback (plus it more closely matches my production machines so should be a good test environment for debugging production problems.)</p>
"
395704,51518,2008-12-28T02:22:38Z,6,Threads in Python,"<p>General tutorial or good resource on how to use threads in Python?</p>

<p>When to use threads, how they are effective, and some general background on threads [specific to Python]?</p>
"
395735,32267,2008-12-28T03:08:05Z,119,How to check whether a variable is a class or not?,"<p>I was wondering how to check whether a variable is a class (not an instance!) or not.</p>

<p>I've tried to use the function <code>isinstance(object, class_or_type_or_tuple)</code> to do this, but I don't know what type would a class will have.</p>

<p>For example, in the following code</p>

<pre><code>class Foo: pass  
isinstance(Foo, **???**) # i want to make this return True.
</code></pre>

<p>I tried to substitute  ""<code>class</code>"" with <strong>???</strong>, but I realized that <code>class</code> is a keyword in python.</p>
"
395846,NA,2008-12-28T04:52:54Z,3,How do I send an ARP packet through python on windows without needing winpcap?,"<p>Is there any way to send ARP packet on Windows without the use of another library such as winpcap?</p>

<p>I have heard that Windows XP SP2 blocks raw ethernet sockets, but I have also heard that raw sockets are only blocked for administrators. Any clarification here?</p>
"
395982,33612,2008-12-28T08:41:45Z,23,"""MetaClass"", ""__new__"", ""cls"" and ""super"" - what is the mechanism exactly?","<p>I have read posts like these:</p>

<ol>
<li><a href=""http://stackoverflow.com/questions/100003/what-is-a-metaclass-in-python"">What is a metaclass in Python?</a> </li>
<li><a href=""http://stackoverflow.com/questions/392160/what-are-your-concrete-use-cases-for-metaclasses-in-python"">What are your (concrete) use-cases for metaclasses in Python?</a></li>
<li><a href=""http://fuhm.net/super-harmful/"" rel=""nofollow"">Python's Super is nifty, but you can't use it</a></li>
</ol>

<p>But somehow I got confused. Many confusions like:</p>

<p>When and why would I have to do something like the following?</p>

<pre><code># Refer link1
return super(MyType, cls).__new__(cls, name, bases, newattrs)
</code></pre>

<p>or</p>

<pre><code># Refer link2
return super(MetaSingleton, cls).__call__(*args, **kw)
</code></pre>

<p>or</p>

<pre><code># Refer link2
return type(self.__name__ + other.__name__, (self, other), {})
</code></pre>

<p>How does super work exactly?</p>

<p>What is class registry and unregistry in link1 and how exactly does it work? (I thought it has something to do with <a href=""http://en.wikipedia.org/wiki/Singleton_pattern"" rel=""nofollow"">singleton</a>. I may be wrong, being from C background. My coding style is still a mix of functional and OO).</p>

<p>What is the flow of class instantiation (subclass, metaclass, super, type) and method invocation (</p>

<pre><code>metaclass-&gt;__new__, metaclass-&gt;__init__, super-&gt;__new__, subclass-&gt;__init__ inherited from metaclass
</code></pre>

<p>) with well-commented working code (though the first link is quite close, but it does not talk about cls keyword and super(..) and registry). Preferably an example with  multiple inheritance.</p>

<p>P.S.: I made the last part as code because Stack&nbsp;Overflow formatting was converting the text <code>metaclass-&gt;__new__</code>
to metaclass-><strong>new</strong></p>
"
396421,49559,2008-12-28T17:25:17Z,15,Checking if two strings are permutations of each other in Python,"<p>I'm checking if two strings <code>a</code> and <code>b</code> are permutations of each other, and I'm wondering what the ideal way to do this is in Python. From the Zen of Python, ""There should be one -- and preferably only one -- obvious way to do it,"" but I see there are at least two ways:</p>

<pre><code>sorted(a) == sorted(b)
</code></pre>

<p>and</p>

<pre><code>all(a.count(char) == b.count(char) for char in a)
</code></pre>

<p>but the first one is slower when (for example) the first char of <code>a</code> is nowhere in <code>b</code>, and the second is slower when they are actually permutations.</p>

<p>Is there any better (either in the sense of more Pythonic, or in the sense of faster on average) way to do it? Or should I just choose from these two depending on which situation I expect to be most common?</p>
"
396455,NA,2008-12-28T17:51:48Z,6,Python-PostgreSQL psycopg2 interface --> executemany,"<p>I am currently analyzing a wikipedia dump file; I am extracting a bunch of data from it using python and persisting it into a PostgreSQL db. I am always trying to make things go faster for this file is huge (18GB). In order to interface with PostgreSQL, I am using psycopg2, but this module seems to mimic many other such DBAPIs.</p>

<p>Anyway, I have a question concerning cursor.executemany(command, values); it seems to me like executing an executemany once every 1000 values or so is better than calling cursor.execute(command % value) for each of these 5 million values (please confirm or correct me!).</p>

<p>But, you see, I am using an executemany to INSERT 1000 rows into a table which has a UNIQUE integrity constraint; this constraint is not verified in python beforehand, for this would either require me to SELECT all the time (this seems counter productive) or require me to get more than 3 GB of RAM. All this to say that I count on Postgres to warn me when my script tried to INSERT an already existing row via catching the psycopg2.DatabaseError. </p>

<p>When my script detects such a non-UNIQUE INSERT, it connection.rollback() (which makes ups to 1000 rows everytime, and kind of makes the executemany worthless) and then INSERTs all values one by one.</p>

<p>Since psycopg2 is so poorly documented (as are so many great modules...), I cannot find an efficient and effective workaround. I have reduced the number of values INSERTed per executemany from 1000 to 100 in order to reduce the likeliness of a non-UNIQUE INSERT per executemany, but I am pretty certain their is a way to just tell psycopg2 to ignore these execeptions or to tell the cursor to continue the executemany. </p>

<p>Basically, this seems like the kind of problem which has a solution so easy and popular, that all I can do is ask in order to learn about it.</p>

<p>Thanks again!</p>
"
396791,44563,2008-12-28T22:41:47Z,3,"Desktop graphics - or ""skinned"" windows","<p>I'm looking for a way to draw animations right on the desktop. No window frames and with transparent background.</p>

<p>I'm using Python in windows XP for it, but it doesn't have to be cross platform, although it'd be a nice bonus.</p>

<p>Does anyone know about a python library that can do this?</p>
"
396856,12386,2008-12-28T23:36:46Z,41,How to instantiate a class in python,"<p>So, I'm trying to learn Python.  It seems pretty easy, but evidently, I don't understand how classes are used.  The following code gives me an error when I try to use the class.</p>

<pre><code>class mystuff:
        def average(a,b,c): #get the average of three numbers
                result=a+b+c
                result=result/3
                return result

#now use the function average from the mystuff class
print mystuff.average(9,18,27)


File ""class.py"", line 7, in &lt;module&gt;
    print mystuff.average(9,18,27)
TypeError: unbound method average() must be called with mystuff instance as first argument (got int instance instead)
</code></pre>

<p>What's wrong?</p>
"
396913,143732,2008-12-29T00:42:56Z,26,"In Python, how do I find the date of the first Monday of a given week?","<p>If I have a certain week number (eg 51) and a given year (eg 2008), how do I find the date of the first Monday of that same week?</p>

<p>Many thanks</p>
"
396991,NA,2008-12-29T02:14:17Z,1,commands to send messages in Python via the Poplib module?,"<p>I've found a number of tutorials online involving downloading messages via Poplib, but haven't been able to find anything explaining how to create new messages.  Does this exist?</p>
"
397034,40172,2008-12-29T02:46:31Z,16,Confusing [...] List in Python: What is it?,"<p>So I was writing up a simple binary tree in Python and came across [...]</p>

<p>I don't believe this to be related to the Ellipsis object, more it seems to have something to do with an infinity loop (due to Python's shallow copy?). The source of this infinity loop and why it doesn't get expanded while expanding when accessed is something I'm completely lost to, however
<code></p>

<pre><code>&gt;&gt;&gt; a
[[[[[], [], 8, 3], [[], [], 3, 2], 6, 3], [], 1, 4], [[], [], -4, 2], 0, 0]
&gt;&gt;&gt; Keys(a)#With a+b
[0, 1, 6, 8, 3, -4]
&gt;&gt;&gt; Keys(a)#With [a,b]
[8, [...], [...], 3, [...], [...], 6, [...], [...], 1, [...], [...], -4, [...], [...], 0, [...], [...]]
&gt;&gt;&gt; Keys(a)[1]#??
[8, [...], [...], 3, [...], [...], 6, [...], [...], 1, [...], [...], -4, [...], [...], 0, [...], [...], 8, [...], [...], 3, [...], [...], 6, [...], [...], 1, [...], [...], -4, [...], [...], 0, [...], [...]]
</code></pre>

<p></code></p>

<p>Version using a+b</p>

<pre><code>def Keys(x,y=[]):
    if len(x):y+=[x[2]]+Keys(x[0],y)+Keys(x[1],y)#Though it seems I was using y=y[:]+, this actually outputs an ugly mess
    return y
</code></pre>

<p>version using [a,b]</p>

<pre><code>def Keys(x,y=[]):
    if len(x):y+=[x[2],Keys(x[0],y),Keys(x[1],y)]
    return y
</code></pre>

<p>So what exactly is [...]?</p>
"
397125,109696,2008-12-29T04:31:27Z,16,Reading the target of a .lnk file in Python?,"<p>I'm trying to read the target file/directory of a shortcut (<code>.lnk</code>) file from Python. Is there a headache-free way to do it? The <a href=""http://www.i2s-lab.com/Papers/The_Windows_Shortcut_File_Format.pdf"">.lnk spec [PDF]</a> is way over my head.
I don't mind using Windows-only APIs.</p>

<p>My ultimate goal is to find the <code>""(My) Videos""</code> folder on Windows XP and Vista. On XP, by default, it's at <code>%HOMEPATH%\My Documents\My Videos</code>, and on Vista it's <code>%HOMEPATH%\Videos</code>. However, the user can relocate this folder. In the case, the <code>%HOMEPATH%\Videos</code> folder ceases to exists and is replaced by <code>%HOMEPATH%\Videos.lnk</code> which points to the new <code>""My Videos""</code> folder. And I want its absolute location.</p>
"
397148,24059,2008-12-29T04:53:17Z,194,Why doesn't Python have multiline comments?,"<p>OK, I'm aware that triple-quotes strings can serve as multiline comments. For example,</p>

<pre><code>""""""Hello, I am a 
   multiline comment""""""
</code></pre>

<p>and </p>

<pre><code>'''Hello, I am a 
   multiline comment'''
</code></pre>

<p>But technically speaking these are strings, correct?</p>

<p>I've googled and read the Python style guide, but I was unable to find a technical answer to why there is no formal implementation of multiline, /* */ type of comments. I have no problem using triple quotes, but I am a little curious as to what led to this design decision.</p>
"
397293,13055,2008-12-29T07:47:11Z,3,Fast file/directory scan method for windows?,"<p>I'm looking for a high performance method or library for scanning all files on disk or in a given directory and grabbing their basic stats - filename, size, and modification date. </p>

<p>I've written a python program that uses <code>os.walk</code> along with <code>os.path.getsize</code> to get the file list, and it works fine, but is not particularly fast. I noticed one of the freeware programs I had downloaded accomplished the same scan much faster than my program. </p>

<p>Any ideas for speeding up the file scan? Here's my python code, but keep in mind that I'm not at all married to os.walk and perfectly willing to use others APIs (including windows native APIs) if there are better alternatives.</p>

<pre><code>for root, dirs, files in os.walk(top, topdown=False):
    for name in files:
        ...
</code></pre>

<p>I should also note I realize the python code probably can't be sped up that much; I'm particularly interested in any native APIs that provide better speed.</p>
"
397337,46914,2008-12-29T08:41:12Z,7,Using external GUI libraries to make user interfaces in Autodesk Maya,"<p>I develop tools in Autodesk Maya.  Many of the tools I build have simple windowed GUIs for the animators and modellers to use.  These GUIs often contain what you'd normally expect to see in any basic window; labels, lists, menus, buttons, textfields, etc.  However, there are limitations to the complexity of the UIs you can build with the available tools, specifically in the types of available widgets.</p>

<p>I'm interested in using some of the more advanced wxPython widgets such as the ListView (grid), Tree, etc.  This would involve using a complete wxFrame (window) to display the whole UI, which would essentially mean that window would no longer be tied to Maya.  Not a deal breaker, but it means when Maya is minimized, the window won't follow suit.</p>

<p>I've tried something like this before with tkinter as a test, but found that it needed a MainLoop to run in its own thread.  This is logical, but in my case, it conflicts with Maya's own thread, essentially making Maya hang until the window is closed.  This is due to the fact that Maya runs all scripts, be they MEL or Python, in a single thread that the main Maya GUI shares.  This is to prevent one script from, say, deleting an object while another script is trying to do work on the same object.</p>

<p>wxPython has this same ""mainloop"" methodolgy. I'm wondering if there's any way around it so that it can work within Maya?</p>
"
398385,NA,2008-12-29T19:19:08Z,0,Python Proxy Script,"<p>I'm writing a simple python script so I can test my websites from a different ip address.</p>

<p>The url of a page is given in the querystring, the script fetches the page and displays it to the user. The code below is used to rewrite the tags that contain urls but I don't think it's complete/totally correct.</p>

<pre><code>def rel2abs(rel_url, base=loc):
    return urlparse.urljoin(base, rel_url)

def is_proxy_else_abs(tag, attr):
    if tag in ('a',):
        return True
    if tag in ('form', 'img', 'link') and attr in ('href', 'src', 'action', 'background'):
        return False

def repl(matchobj):
    if is_proxy_else_abs(matchobj.group(1).lower(), matchobj.group(3).lower()):
        return r'&lt;%s %s %s=""http://%s?%s"" ' %(proxy_script_url, matchobj.group(1), matchobj.group(2), matchobj.group(3), urllib.urlencode({'loc':rel2abs(matchobj.group(5))}))
    else:
        return r'&lt;%s %s %s=""%s"" ' %(matchobj.group(1), matchobj.group(2), matchobj.group(3), rel2abs(matchobj.group(5)))

def fix_urls(page):
    get_link_re = re.compile(r""""""&lt;(a|form|img|link) ([^&gt;]*?)(href|src|action|background)\s*=\s*(""|'?)([^&gt;]*?)\4"""""", re.I|re.DOTALL)
    page = get_link_re.sub(repl, page)
    return page
</code></pre>

<p>The idea is that 'a' tag's href attributes should be routed through the proxy script, but css, javascript, images, forms etc should not be, so these have to be made absolute if they are relative in the original page.</p>

<p>The problem is the code doesn't always work, css can be written in a number of ways etc. Is there a more comprehensive regex I can use?</p>
"
398560,41613,2008-12-29T20:22:14Z,4,Split by \b when your regex engine doesn't support it,"<p>How can I split by word boundary in a regex engine that doesn't support it?</p>

<p>python's re can match on \b but doesn't seem to support splitting on it. I seem to recall dealing with other regex engines that had the same limitation.</p>

<p>example input:</p>

<pre><code>""hello, foo""
</code></pre>

<p>expected output:</p>

<pre><code>['hello', ', ', 'foo']
</code></pre>

<p>actual python output:</p>

<pre><code>&gt;&gt;&gt; re.compile(r'\b').split('hello, foo')
['hello, foo']
</code></pre>
"
399022,1626,2008-12-29T23:08:18Z,15,Why can't I subclass datetime.date?,"<p>Why doesn't the following work (Python 2.5.2)?</p>

<pre><code>&gt;&gt;&gt; import datetime
&gt;&gt;&gt; class D(datetime.date):
        def __init__(self, year):
            datetime.date.__init__(self, year, 1, 1)
&gt;&gt;&gt; D(2008)
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
TypeError: function takes exactly 3 arguments (1 given)
</code></pre>

<p>I wanted to create a class that was just like <code>datetime.date</code>, but with a different <code>__init__</code> function.  Apparently my function never gets called.  Instead the original <code>datetime.date.__init__</code> is called and fails because that expects 3 arguments and I am passing in one.</p>

<p>What's going on here?  And is this a clue?</p>

<pre><code>&gt;&gt;&gt; datetime.date.__init__
&lt;slot wrapper '__init__' of 'object' objects&gt;
</code></pre>

<p>Thanks!</p>
"
399067,44743,2008-12-29T23:26:41Z,11,Extended slice that goes to beginning of sequence with negative stride,"<p>Bear with me while I explain my question.  Skip down to the bold heading if you already understand extended slice list indexing.</p>

<p>In python, you can index lists using slice notation. Here's an example:</p>

<pre><code>&gt;&gt;&gt; A = list(range(10))
&gt;&gt;&gt; A[0:5]
[0, 1, 2, 3, 4]
</code></pre>

<p>You can also include a stride, which acts like a ""step"":</p>

<pre><code>&gt;&gt;&gt; A[0:5:2]
[0, 2, 4]
</code></pre>

<p>The stride is also allowed to be negative, meaning the elements are retrieved in reverse order:</p>

<pre><code>&gt;&gt;&gt; A[5:0:-1]
[5, 4, 3, 2, 1]
</code></pre>

<p>But wait!  I wanted to see <code>[4, 3, 2, 1, 0]</code>.  Oh, I see, I need to decrement the start and end indices:</p>

<pre><code>&gt;&gt;&gt; A[4:-1:-1]
[]
</code></pre>

<p>What happened?  It's interpreting -1 as  being at the end of the array, not the beginning.  I know you can achieve this as follows:</p>

<pre><code>&gt;&gt;&gt; A[4::-1]
[4, 3, 2, 1, 0]
</code></pre>

<p>But you can't use this in all cases.  For example, in a method that's been passed indices.  </p>

<h2>My question is:</h2>

<p>Is there any good pythonic way of using extended slices with negative strides <em>and explicit start and end indices</em> that include the first element of a sequence?</p>

<p>This is what I've come up with so far, but it seems unsatisfying.</p>

<pre><code>&gt;&gt;&gt; A[0:5][::-1]
[4, 3, 2, 1, 0]
</code></pre>
"
399129,50019,2008-12-29T23:51:33Z,18,Failing to send email with the Python example,"<p>I've been trying (and failing) to figure out how to send email via Python.</p>

<p>Trying the example from here:
<a href=""http://docs.python.org/library/smtplib.html#smtplib.SMTP"">http://docs.python.org/library/smtplib.html#smtplib.SMTP</a></p>

<p>but added the line <code>server = smtplib.SMTP_SSL('smtp.gmail.com', 465)</code> after I got a bounceback about not having an SSL connection.  </p>

<p>Now I'm getting this:</p>

<pre><code>Traceback (most recent call last):
  File ""C:/Python26/08_emailconnects/12_29_EmailSendExample_NotWorkingYet.py"", line 37, in &lt;module&gt;
    server = smtplib.SMTP('smtp.gmail.com', 65)
  File ""C:\Python26\lib\smtplib.py"", line 239, in __init__
    (code, msg) = self.connect(host, port)
  File ""C:\Python26\lib\smtplib.py"", line 295, in connect
    self.sock = self._get_socket(host, port, self.timeout)
  File ""C:\Python26\lib\smtplib.py"", line 273, in _get_socket
    return socket.create_connection((port, host), timeout)
  File ""C:\Python26\lib\socket.py"", line 512, in create_connection
    raise error, msg
error: [Errno 10060] A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond
&gt;&gt;&gt; 
</code></pre>

<p>Thoughts?</p>

<hr>

<p>server = smtplib.SMTP(""smtp.google.com"", 495) gives me a timeout error.  just smtplib.smtp(""smtp.google.com"", 495) gives me ""SSLError: [Errno 1] _ssl.c:480: error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol"" (see below).</p>

<p>I'm trying different ports and now I'm getting a completely new error.  I'll just post the whole bit of code, I'm probably making some rookie mistake.</p>

<p>""</p>

<pre><code>import smtplib

mailuser = 'MYEMAIL@gmail.com'

mailpasswd = 'MYPASSWORD'

fromaddr = 'MYEMAIL@gmail.com'

toaddrs = 'MYEMAIL2@gmail.com'

msg = 'Hooooorah!'

print msg

server = smtplib.SMTP_SSL('smtp.google.com')

server = smtplib.SMTP_SSL_PORT=587

server.user(mailuser)

server.pass_(mailpasswd)

server.set_debuglevel(1)

server.sendmail(fromaddr, toaddrs, msg)

server.quit()
</code></pre>

<p>""</p>

<p>and then I get this error message: ""</p>

<pre><code>Traceback (most recent call last):
  File ""C:/Python26/08_emailconnects/12_29_eMAILSendtryin_stripped.py"", line 16, in &lt;module&gt;
    server = smtplib.SMTP_SSL('smtp.google.com')
  File ""C:\Python26\lib\smtplib.py"", line 749, in __init__
    SMTP.__init__(self, host, port, local_hostname, timeout)
  File ""C:\Python26\lib\smtplib.py"", line 239, in __init__
    (code, msg) = self.connect(host, port)
  File ""C:\Python26\lib\smtplib.py"", line 295, in connect
    self.sock = self._get_socket(host, port, self.timeout)
  File ""C:\Python26\lib\smtplib.py"", line 755, in _get_socket
    self.sock = ssl.wrap_socket(self.sock, self.keyfile, self.certfile)
  File ""C:\Python26\lib\ssl.py"", line 350, in wrap_socket
    suppress_ragged_eofs=suppress_ragged_eofs)
  File ""C:\Python26\lib\ssl.py"", line 118, in __init__
    self.do_handshake()
  File ""C:\Python26\lib\ssl.py"", line 293, in do_handshake
    self._sslobj.do_handshake()
SSLError: [Errno 1] _ssl.c:480: error:140770FC:SSL routines:SSL23_GET_SERVER_HELLO:unknown protocol
</code></pre>

<p>""</p>

<p>note that actually the which looks like ""server = smtplib.SMTPSSLPORT=587"" is actually ""server = smtplib.SMTP <em>underscore</em> SSL <em>underscore</em> PORT=587"", there's some sort of formatting thing going on here.</p>
"
399326,49945,2008-12-30T01:57:34Z,0,Tix and Python 3.0,"<p>Has anyone seen anything in Tix work under python 3.0?  I've tried to work through the examples but when creating anything it states that cnf is unsubscriptable.</p>

<p>I also noticed that none of the Dir Select stuff (DirList DirTree) works under 2.6.1.</p>

<p>Why doesn't Python either dump Tix or support it?  Its got a lot of good stuff to make easy programs.</p>
"
399624,28835,2008-12-30T06:14:00Z,1,Programming a Logitech G15 using python,"<p>I'd like to be able to write apps for my G15 keyboard using python. There seems to be a few people out there who have done it in the past, but I'm not sure what packages I need to install or where I should start. Does anyone have any experience with this?</p>
"
399956,30300,2008-12-30T10:39:53Z,82,How to integrate pep8.py in Eclipse?,"<p>A little background:</p>

<ul>
<li><a href=""http://www.python.org/dev/peps/pep-0008/"">PEP 8</a> is the <em>Style Guide for Python Code</em>. It contains the conventions all python programmers should follow.</li>
<li><a href=""http://pypi.python.org/pypi/pep8"">pep8.py</a> is a (very useful) script that checks the code formating of a given python script, according to PEP 8.</li>
<li><a href=""http://www.eclipse.org/"">Eclipse</a> is a great IDE. With the <a href=""http://pydev.sourceforge.net/"">Pydev</a> extension, it that can be used to develop Python</li>
</ul>

<p>I run pep8.py manually when I'm scripting, but with bigger projects I prefer to use Eclipse.
It would be really useful to integrate pep8.py in Eclipse/Pydev, so it can be run automatically in all the files in the project, and point to the lines containing the warnings.
Maybe there is an obvious way to do it, but I haven't found it yet.</p>

<p>Question is: <strong>How to integrate pep8.py in Eclipse?</strong></p>
"
399957,NA,2008-12-30T10:40:07Z,2,Need help on selecting items in simple database in python,"<p>I'm trying to write a circuit schematic drawing tool in Python.  I'm creating a simple database based on dictionaries which holds all the components and their properties.  I'm also trying to create a simple query language where you can select, for example, all resistors with value>100ohms or footprint='0402'  </p>

<p>So far, I can select things using some primitive predicate search and then union and intersection for more complex things.  </p>

<p>However, I'm having trouble defining what the semantics ought to be for a purely negative search.  For instance, something like   </p>

<p>footprint != '0402'   </p>

<p>should select all items with footprint not equal to 0402.  But doing this with only intersection gives me a blank result.  For this to work I need to select <em>all</em> components, then intersect with ""not 0402"" to remove the ones I don't want.</p>

<p>But this seems kind of brute force and seems like a fishy solution.  I'm not interested in using a ""real"" database and query language, so please don't suggest that.  I'm looking for the proper engineering rationale here, not necessarily a workaround to the problem.</p>

<p>This problem was covered to some degree in SICP book, but I got very confused, since I think they were also using continuations and stuff, which I don't get yet.</p>

<p>Can someone please explain what the 'proper' usage ought to be for negatively selecting stuff.  I tried this in a commercial cad tool and it worked as expected, but then I've seen some SQL query examples (I think), which selected things <em>first</em>, then removed the unwanted ones.</p>

<p>thanks<br />
michael</p>
"
399980,49047,2008-12-30T10:48:33Z,5,Ignoring XML errors in Python,"<p>I am using XML minidom (xml.dom.minidom) in Python, but any error in the XML will kill the parser.
Is it possible to ignore them, like a browser for example?
I am trying to write a browser in Python, but it just throws an exception if the tags aren't fully compatible.</p>
"
399991,46634,2008-12-30T10:55:43Z,4,How do you get Python to write down the code of a function it has in memory?,"<p>When I pass the options in the program (a computational biology experiment) I usually pass them through a .py file.<br>
So I have this .py file that reads like:</p>

<pre><code>starting_length=9
starting_cell_size=1000
LengthofExperiments=5000000
</code></pre>

<p>Then I execute the file and get the data. Since the program is all on my machine and no one else has access to it, it is secure in a trivial way.<br>
I can also write a similar file very easily:</p>

<pre><code>def writeoptions(directory):
    options=""""
    options+=""starting_length=%s%s""%(starting_length,os.linesep)
    options+=""starting_cell_size=%s%s""%(starting_cell_size,os.linesep)
    options+=""LengthofExperiments=%s%s""%(LengthofExperiments,os.linesep)
...
    open(""%s%soptions.py""%(directory,os.sep),'w').write(options)
</code></pre>

<p>I want to pass a function as one of the parameters:</p>

<pre><code>starting_length=9
starting_cell_size=1000
LengthofExperiments=5000000

def pippo(a,b):
    return a+b
functionoperator=pippo
</code></pre>

<p>And of course in the real experiment the function pippo will be much more complex. And different from experiment to experiment.</p>

<p>But what I am unable to do is to write the function automatically. In short I don't know how to generalise the writeoptions function to keep on writing the options, if one of the options is a function. I could of course copy the original file, but this is inelegant, inefficient (because it contains a lot of extra options that are not being used), and generally does not solve the question.</p>

<p>How do you get python to write down the code of a function, as it writes down the value of a variable?</p>
"
400050,1384652,2008-12-30T11:22:43Z,5,Reading and running a mathematical expression in Python,"<p>Using Python, how would I go about reading in (be from a string, file or url) a mathematical expression (1 + 1 is a good start) and executing it? </p>

<p>Aside from grabbing a string, file or url I have no idea of where to start with this.</p>
"
400788,35716,2008-12-30T16:42:02Z,23,Resize image in Python without losing EXIF data,"<p>I need to resize jpg images with Python without losing the original image's EXIF data (metadata about date taken, camera model etc.). All google searches about python and images point to the PIL library which I'm currently using, but doesn't seem to be able to retain the metadata. The code I have so far (using PIL) is this:</p>

<pre><code>img = Image.open('foo.jpg')
width,height = 800,600
if img.size[0] &lt; img.size[1]:
    width,height = height,width

resized_img = img.resize((width, height), Image.ANTIALIAS) # best down-sizing filter
resized_img.save('foo-resized.jpg')
</code></pre>

<p>Any ideas? Or other libraries that I could be using?</p>
"
401025,22306,2008-12-30T18:18:41Z,125,Define css class in django Forms,"<p>Assume I have a form</p>

<pre><code>class SampleClass(forms.Form):
    name = forms.CharField(max_length=30)
    age = forms.IntegerField()
    django_hacker = forms.BooleanField(required=False)
</code></pre>

<p>Is there a way for me to define css classes on each field such that I can then use jQuery based on class in my rendered page?</p>

<p>I was hoping not to have to manually build the form.</p>
"
401118,50272,2008-12-30T19:04:16Z,4,ForeignKey form restrictions in Django,"<p>I'm using Django to write a blog app, and I'm trying to implement a hierarchical category structure.  Each category has a ""parent"" ForeignKey pointing back to the same Category model.  I want to allow admins to add categories, and I want the interface to allow them to select a category's parent category.  However, I want to avoid I'm-my-own-grandpa situations, so I want to limit the available choices of categories to those which do not have category in question as an ancestor.</p>

<p>Right now, I'm controlling this from the view:</p>

<pre><code>parent_candidates = list(Category.objects.all())
pruned_parent_list = [cat for cat in parent_candidates if instance.id not in cat.getHierarchy()]
</code></pre>

<p>where instance is the category being edited and getHierarchy() is a method to get a list of ancestor ids.</p>

<p>There are a number of problems with this approach.  In particular, it uses an extra database hit to get the list of all categories and it makes me write the selection mechanism into my template by looping through pruned_parent_list to get the options, when I'd really rather just specify a widget.</p>

<p>Is there any better way to do this?  I know I can add custom validation on the back-end to prevent this, but why give users the option?</p>
"
401215,38140,2008-12-30T19:30:11Z,9,How to limit rate of requests to web services in Python?,"<p>I'm working on a Python library that interfaces with a web service API. Like many web services I've encountered, this one requests limiting the rate of requests. I would like to provide an optional parameter, <code>limit</code>, to the class instantiation that, if provided, will hold outgoing requests until the number of seconds specified passes.</p>

<p>I understand that the general scenario is the following: an instance of the class makes a request via a method. When it does, the method emits some signal that sets a lock variable somewhere, and begins a countdown timer for the number of seconds in <code>limit</code>. (In all likelihood, the lock is the countdown timer itself.) If another request is made within this time frame, it must be queued until the countdown timer reaches zero and the lock is disengaged; at this point, the oldest request on the queue is sent, and the countdown timer is reset and the lock is re-engaged.</p>

<p>Is this a case for threading? Is there another approach I'm not seeing?</p>

<p>Should the countdown timer and lock be instance variables, or should they belong to the class, such that all instances of the class hold requests?</p>

<p>Also, is this generally a bad idea to provide rate-limiting functionality within a library? I reason since, by default, the countdown is zero seconds, the library still allows developers to use the library and provide their own rate-limiting schemes. Given any developers using the service will need to rate-limit requests anyway, however, I figure that it would be a convenience for the library to provide a means of rate-limiting.</p>

<p>Regardless of placing a rate-limiting scheme in the library or not, I'll want to write an application using the library, so suggested techniques will come in handy.</p>

<p>Many thanks for your suggestions!</p>

<p>Chris</p>
"
401277,10661,2008-12-30T19:47:53Z,44,Naming Python loggers,"<p>In Django, I've got loggers all over the place, currently with hard-coded names.</p>

<p>For module-level logging (i.e., in a module of view functions) I have the urge to do this.</p>

<pre><code>log = logging.getLogger(__name__)
</code></pre>

<p>For class-level logging (i.e., in a class <code>__init__</code> method) I have the urge to do this.</p>

<pre><code>self.log = logging.getLogger(""%s.%s"" % (
    self.__module__, self.__class__.__name__))
</code></pre>

<p>I'm looking for second opinions before I tackle several dozen occurrences of <code>getLogger(""hard.coded.name"")</code>.</p>

<p>Will this work?  Anyone else naming their loggers with the same unimaginative ways?  </p>

<p>Further, should I break down and write a class decorator for this log definition?</p>
"
401726,41613,2008-12-30T22:33:22Z,1,Regex that only matches text that's not part of HTML markup? (python),"<p>How can I make a pattern match so long as it's not inside of an HTML tag?</p>

<p>Here's my attempt below. Anyone have a better/different approach?</p>

<pre><code>import re

inputstr = 'mary had a &lt;b class=""foo""&gt; little loomb&lt;/b&gt;'

rx = re.compile('[aob]')
repl = 'x'

outputstr = ''
i = 0

for astr in re.compile(r'(&lt;[^&gt;]*&gt;)').split(inputstr):
    i = 1 - i

    if i:
        astr = re.sub(rx, repl, astr)

    outputstr += astr

print outputstr
</code></pre>

<p>output:</p>

<pre><code>mxry hxd x &lt;b class=""foo""&gt; little lxxmx&lt;/b&gt;
</code></pre>

<p>Notes:</p>

<ul>
<li>The &lt;[^>]*> pattern to match HTML tags is obviously flawed -- I wrote this quickly and didn't account for the possibility of angle brackets within quoted attributes (e.g. '&lt;img alt=""next &gt;"" /&gt;'). It doesn't account for &lt;script&gt; or &lt;style&gt; tags or comments, either.</li>
</ul>
"
401787,2007483,2008-12-30T23:02:08Z,4,Scaling the y-axis with Matplotlib in Python,"<p>How to scale the y-axis with <a href=""http://matplotlib.sourceforge.net/"" rel=""nofollow"">Matplotlib</a>? I don't want to change the y-limit, I just want to extend the physical space.</p>

<pre><code>^      ^
|      |
|      |
+----&gt; |
Before +----&gt;
       After
</code></pre>
"
402217,34479,2008-12-31T03:18:15Z,32,How to store a dictionary on a Django Model?,"<p>I need to store some data in a Django model. These data are not equal to all instances of the model.</p>

<p>At first I thought about subclassing the model, but I’m trying to keep the application flexible. If I use subclasses, I’ll need to create a whole class each time I need a new kind of object, and that’s no good. I’ll also end up with a lot of subclasses only to store a pair of extra fields.</p>

<p>I really feel that a dictionary would be the best approach, but there’s nothing in the Django documentation about storing a dictionary in a Django model (or I can’t find it).</p>

<p>Any clues?</p>
"
402359,16584,2008-12-31T05:26:14Z,72,How do you uninstall a python package that was installed using distutils?,"<p>Can you simply delete the directory from your python installation, or are there any lingering files that you must delete?</p>
"
402364,46646,2008-12-31T05:34:38Z,3,Help--Function Pointers in Python,"<p>My idea of program:</p>

<p>I have a dictionary:</p>

<pre><code>options = { 'string' : select_fun(function pointer),
'float' : select_fun(function pointer),
'double' : select_fun(function pointer)
}
</code></pre>

<p>whatever type comes single function <code>select_fun(function pointer)</code> gets called.
Inside <code>select_fun(function pointer)</code>,I will have diff functions for float, double and so on.</p>

<p>Depending on function pointers, specified function will get called.</p>

<p>I don't know whether my programming knowledge is good or bad, still I need help.</p>
"
402483,745,2008-12-31T07:43:31Z,7,Caching result of setUp() using Python unittest,"<p>I currently have a unittest.TestCase that looks like..</p>

<pre><code>class test_appletrailer(unittest.TestCase):
    def setup(self):
        self.all_trailers = Trailers(res = ""720"", verbose = True)

    def test_has_trailers(self):
        self.failUnless(len(self.all_trailers) &gt; 1)

    # ..more tests..
</code></pre>

<p>This works fine, but the <code>Trailers()</code> call takes about 2 seconds to run.. Given that <code>setUp()</code> is called before each test is run, the tests now take almost 10 seconds to run (with only 3 test functions)</p>

<p>What is the correct way of caching the <code>self.all_trailers</code> variable between tests?</p>

<p>Removing the setUp function, and doing..</p>

<pre><code>class test_appletrailer(unittest.TestCase):
    all_trailers = Trailers(res = ""720"", verbose = True)
</code></pre>

<p>..works, but then it claims ""Ran 3 tests in 0.000s"" which is incorrect.. The only other way I could think of is to have a cache_trailers global variable (which works correctly, but is rather horrible):</p>

<pre><code>cache_trailers = None
class test_appletrailer(unittest.TestCase):
    def setUp(self):
        global cache_trailers
        if cache_trailers is None:
            cache_trailers = self.all_trailers = all_trailers = Trailers(res = ""720"", verbose = True)
        else:
            self.all_trailers = cache_trailers
</code></pre>
"
402504,46646,2008-12-31T07:58:57Z,607,How to determine the variable type in Python?,"<p>How do I see the type of a variable whether it is unsigned 32 bit, signed 16 bit, etc.?</p>

<p>How do I view it?</p>
"
403421,22468,2008-12-31T16:41:32Z,310,"How to sort a list of objects in Python, based on an attribute of the objects?","<p>I've got a list of Python objects that I'd like to sort by an attribute of the objects themselves.  The list looks like:</p>

<pre><code>&gt;&gt;&gt; ut
[&lt;Tag: 128&gt;, &lt;Tag: 2008&gt;, &lt;Tag: &lt;&gt;, &lt;Tag: actionscript&gt;, &lt;Tag: addresses&gt;, &lt;Tag: aes&gt;, &lt;Tag: ajax&gt; ...]
</code></pre>

<p>Each object has a count:</p>

<pre><code>&gt;&gt;&gt; ut[1].count
1L
</code></pre>

<p>I need to sort the list by number of counts descending.</p>

<p>I've seen several methods for this, but I'm looking for best practice in Python.</p>
"
403433,47204,2008-12-31T16:44:27Z,-1,Making the value of a table equal to another value in a different table,"<p>I have a small problem with a program that im writing. I have a table - stocks which contains information(products, barcodes etc.) about items stored in a fridge. I then have another table - shop which acts like a shop,containing loads of products and their barcodes.some of the products in the shop table are in the stock table at the moment, and there is a boolenan field called stock which tells us if that product is in the stock table or not, if its equal to 1, it is in the fridge, if it is equal to 0, it is not in the fridge. Two fields in the stocks table are amount and quantity. The amount is what is in the fridge at the moment, the quantity is what has to be in the fridge at all times. When something is taken out of the fridge, that product's amount amount drops by 1.  Each barcode in the stocks table has a matching one in the shop table. I need to make a query to the database from a python program which will order products from the shops table when the amount (whats in the fridge) is less than the quantity (whats meant to be in the fridge at all times). So you need to take the barcode of a row in the stocks table where the amount is less than the quantity and match that up to the barcode in the shops table. Then in the row of that matching barcode you need to set stock = 1.</p>

<p>I would be really happy if somebody could help me with this as I really am finding it difficult to write this function. Below is the checkin and checkout functions if that will help.</p>

<p><strong>checkin</strong></p>

<pre><code>def check_in(): 
    db = MySQLdb.connect(host='localhost', user='root', passwd='$$', db='fillmyfridge')
    cursor=db.cursor(MySQLdb.cursors.DictCursor)
    user_input=raw_input('please enter the product barcode that you wish to checkin to the fridge: \n')
    cursor.execute(""""""update shop set stock = 1 where barcode = %s"""""", (user_input))
    db.commit()
    numrows = int(cursor.rowcount)
    if numrows &gt;= 1:
        row = cursor.fetchone()
        print row[""product""]
        cursor.execute('update stock set amount = amount + 1 where product = %s', row[""product""])
        db.commit()
        cursor.execute('udpate shop set stock = 1 where barcode = user_input')
        db.commit()
    else:
        new_prodname = raw_input('what is the name of the product and press enter: \n')
        cursor.execute('insert into shop (product, barcode, category) values (%s, %s, %s)', (new_prodname, user_input, new_prodname))
        cursor = db.cursor()
        query = ('select * from shop where product = %s', (new_prodname))
        cursor.execute(query):
        db.commit()
        numrows = int(cursor.rowcount)
        if numrows&lt;1:
            cursor.execute('insert into atock (barcode, quantity, amount, product) values (%s, 1, 1, %s)', (user_input, new_prodname))
            db.commit()
            cursor.execute('insert into shop (product, barcode, category, stock) values (%s, %s, %s, 1)', (new_prodname, user_input, new_prodname))
            print new_prodname 
            print 'has been added to the fridge stock'
        else:
            cursor.execute('update atock set amount = amount + 1 where product = %s', (new_prodname))
            db.commit()
            cursor.execute('insert into shop (product, barcode, category, stock) values (%s, %s, %s, 1)', (new_prodname, user_input, new_prodname))
            print new_prodname 
            print 'has been added to the fridge stock'
</code></pre>

<p><strong>checkout</strong></p>

<pre><code>import MySQLdb

def check_out():
    db = MySQLdb.connect(host='localhost', user='root', passwd='$$', db='fillmyfridge')
    cursor=db.cursor()
    user_input=raw_input('please enter the product barcode you wish to remove from the fridge: \n')
    query = cursor.execute('update stock set instock=0, howmanytoorder=howmanytoorder + 1, amount = amount - 1 where barcode = %s', (user_input))
    if cursor.execute(query):
        db.commit()
        print 'the following product has been removed from the fridge nd needs to be ordered'
        cursor.execute('update shop set stock = 0 where barcode = %s' (user_input)
        db.commit()
    else:
        return 0
</code></pre>
"
403527,47204,2008-12-31T17:20:11Z,0,Making a SQL Query in two tables,"<p>I'm wondering, is it possible to make an sql query that does the same function as 
<code>'select products where barcode in table1 = barcode in table2</code>'. I am writing this function in a python program. Once that function is called will the table be joined permanently or just while that function is running?
thanks. </p>
"
403794,33612,2008-12-31T18:57:59Z,8,"Optimization in Python - do's, don'ts and rules of thumb","<p>Well I was reading this <a href=""http://handyfloss.wordpress.com/2008/02/17/summary-of-my-python-optimization-adventures/"">post</a> and then I came across a code which was:</p>

<pre><code>jokes=range(1000000)
domain=[(0,(len(jokes)*2)-i-1) for i in range(0,len(jokes)*2)]
</code></pre>

<p>I thought wouldn't it be better to calculate the value of len(jokes) once outside the list comprehension?</p>

<p>Well I tried it and timed three codes</p>

<pre><code>jv@Pioneer:~$ python -m timeit -s 'jokes=range(1000000);domain=[(0,(len(jokes)*2)-i-1) for i in range(0,len(jokes)*2)]'
10000000 loops, best of 3: 0.0352 usec per loop
jv@Pioneer:~$ python -m timeit -s 'jokes=range(1000000);l=len(jokes);domain=[(0,(l*2)-i-1) for i in range(0,l*2)]'
10000000 loops, best of 3: 0.0343 usec per loop
jv@Pioneer:~$ python -m timeit -s 'jokes=range(1000000);l=len(jokes)*2;domain=[(0,l-i-1) for i in range(0,l)]'
10000000 loops, best of 3: 0.0333 usec per loop
</code></pre>

<p>Observing the marginal difference 2.55% between the first and the second made me think - is the first list comprehension </p>

<pre><code>domain=[(0,(len(jokes)*2)-i-1) for i in range(0,len(jokes)*2)]
</code></pre>

<p>optimized internally by python? or is 2.55% a big enough optimization (given that the len(jokes)=1000000)?</p>

<p>If this is - What are the other implicit/internal optimizations in Python ?</p>

<p>What are the <code>developer's rules of thumb for optimization in Python</code>?</p>

<p><strong>Edit1</strong>: Since most of the answers are ""don't optimize, do it later if its slow"" and I got some tips and links from <code>Triptych</code> and <code>Ali A</code> for the <strong>do's</strong>.
I will change the question a bit and request for <strong>don'ts</strong>. </p>

<p>Can we have some experiences from people who faced the '<strong>slowness</strong>', what was the problem and how it was corrected? </p>

<p><strong>Edit2</strong>: For those who haven't here is an <a href=""http://www.python.org/doc/essays/list2str/"">interesting read</a></p>

<p><strong>Edit3:</strong> Incorrect usage of <code>timeit</code> in question please see <strong>dF's</strong> answer for correct usage and hence timings for the three codes.</p>
"
403822,1384652,2008-12-31T19:14:59Z,3,Calling from a parent file in python,"<p>I have a file called main.py and a file called classes.py</p>

<p>main.py contains the application and what's happening while class.py contains some classes.</p>

<p>main.py has the following code</p>

<p><strong>main.py</strong></p>

<pre><code>import classes

def addItem(text):
    print text

myClass = classes.ExampleClass()
</code></pre>

<p>And then we have classes.py</p>

<p><strong>classes.py</strong></p>

<pre><code>class ExampleClass (object):
    def __init__(self):
        addItem('bob')
</code></pre>

<p>Surprisingly enough that's not the actual code I am using because I've stripped out anything that'd get in the way of you seeing what I want to do. I want to be able to call a method that's defined in main.py from a class within classes.py. How do I do this?</p>

<p>Thanks in advance</p>
"
403897,47204,2008-12-31T19:44:58Z,0,using results from a sql query in a python program in another sql query,"<p>sorry for my previous question which was very ambiguous, but i think if i get the answer to this question I can work it out.
In the program below i have selected the barcodes of products where the amount is less than the quantity. I want to say, that if the barcodes(in the fridge table) match barcodes in another table(products), set the stock field equal to 0. The problem Im getting is that the program is trying to match all the barcodes that it found in the query against single barcodes in the products table(thats what I think). does anyone know what to do. thanks a million. lincoln.</p>

<pre><code>import MySQLdb

def order():
    db = MySQLdb.connect(host='localhost', user='root', passwd='$$', db='fillmyfridge')
    cursor = db.cursor()
    cursor.execute('select barcode from fridge where amount &lt; quantity')
    db.commit()
    row = cursor.fetchall()
    cursor.execute('update products set stock = 0 where barcode = %s', row)
</code></pre>
"
403934,1384652,2008-12-31T19:59:29Z,5,All code in one file,"<p>After asking <a href=""http://stackoverflow.com/questions/391879/organising-my-python-project"">organising my Python project</a> and then <a href=""http://stackoverflow.com/questions/403822/calling-from-a-parent-file-in-python"">calling from a parent file in Python</a> it's occurring to me that it'll be so much easier to put all my code in one file (data will be read in externally).</p>

<p>I've always thought that this was bad project organisation but it seems to be the easiest way to deal with the problems I'm thinking I will face. Have I simply gotten the wrong end of the stick with file count or have I not seen some great guide on large (for me) projects?</p>
"
404346,47204,2009-01-01T00:55:16Z,4,Python program to calculate harmonic series,"<p>Does anyone know how to write a program in Python that will calculate the addition of the harmonic series. i.e. 1 + 1/2 +1/3 +1/4...</p>
"
404534,3594,2009-01-01T04:48:54Z,8,"Python globals, locals, and UnboundLocalError","<p>I ran across this case of <code>UnboundLocalError</code> recently, which seems strange:</p>

<pre><code>import pprint

def main():
    if 'pprint' in globals(): print 'pprint is in globals()'
    pprint.pprint('Spam')
    from pprint import pprint
    pprint('Eggs')

if __name__ == '__main__': main()
</code></pre>

<p>Which produces:</p>

<pre><code>pprint is in globals()
Traceback (most recent call last):
  File ""weird.py"", line 9, in &lt;module&gt;
    if __name__ == '__main__': main()
  File ""weird.py"", line 5, in main
    pprint.pprint('Spam')
UnboundLocalError: local variable 'pprint' referenced before assignment
</code></pre>

<p><code>pprint</code> is clearly bound in <code>globals</code>, and is going to be bound in <code>locals</code> in the following statement. Can someone offer an explanation of why it isn't happy resolving <code>pprint</code> to the binding in <code>globals</code> here?</p>

<p><strong>Edit:</strong> Thanks to the good responses I can clarify my question with relevant terminology:</p>

<p>At compile time the identifier <code>pprint</code> is marked as local to the frame. Does the execution model have no distinction <em>where</em> within the frame the local identifier is bound? Can it say, ""refer to the global binding up until this bytecode instruction, at which point it has been rebound to a local binding,"" or does the execution model not account for this?</p>
"
404744,46914,2009-01-01T08:50:22Z,30,Determining application path in a Python EXE generated by pyInstaller,"<p>I have an application that resides in a single .py file.  I've been able to get pyInstaller to bundle it successfully into an EXE for Windows.  The problem is, the application requires a .cfg file that always sits directly beside the application in the same directory.</p>

<p>Normally, I build the path using the following code:</p>

<pre><code>import os
config_name = 'myapp.cfg'
config_path = os.path.join(sys.path[0], config_name)
</code></pre>

<p>However, it seems the sys.path is blank when its called from an EXE generated by pyInstaller.  This same behaviour occurs when you run the python interactive command line and try to fetch sys.path[0].</p>

<p>Is there a more concrete way of getting the path of the currently running application so that I can find files that are relative to it?</p>
"
404795,49018,2009-01-01T09:50:56Z,39,LBYL vs EAFP in Java?,"<p>I was recently teaching myself Python and discovered the LBYL/EAFP idioms with regards to error checking before code execution. In Python, it seems the accepted style is EAFP, and it seems to work well with the language.</p>

<p>LBYL (<strong><em>L</strong>ook <strong>B</strong>efore <strong>Y</strong>ou <strong>L</strong>eap</em>):</p>

<pre><code>def safe_divide_1(x, y):
    if y == 0:
        print ""Divide-by-0 attempt detected""
        return None
    else:
        return x/y
</code></pre>

<p>EAFP (<em>it's <strong>E</strong>asier to <strong>A</strong>sk <strong>F</strong>orgiveness than <strong>P</strong>ermission</em>):</p>

<pre><code>def safe_divide_2(x, y):
    try:
        return x/y
    except ZeroDivisionError:  
        print ""Divide-by-0 attempt detected""
        return None
</code></pre>

<p>My question is this: I had never even heard of using EAFP as the primary data validation construct, coming from a Java and C++ background. Is EAFP something that is wise to use in Java? Or is there too much overhead from exceptions? I know that there is only overhead when an exception is actually thrown, so I'm unsure as to why the simpler method of EAFP is not used. Is it just preference?</p>
"
404825,46646,2009-01-01T10:28:31Z,-3,I need help--lists and Python,"<p>How to return a list in Python???</p>

<p>When I tried returning a list,I got an empty list.What's the reason???</p>
"
405058,8206,2009-01-01T15:29:35Z,12,Line reading chokes on 0x1A,"<p>I have the following file:</p>

<pre><code>abcde
kwakwa
&lt;0x1A&gt;
line3
linllll
</code></pre>

<p>Where <code>&lt;0x1A&gt;</code> represents a byte with the hex value of 0x1A. When attempting to read this file in Python as:</p>

<pre><code>for line in open('t.txt'):
    print line,
</code></pre>

<p>It only reads the first two lines, and exits the loop.</p>

<p>The solution seems to be to open the file in binary (or universal newline mode) - 'rb' or 'rU'. Can you explain this behavior ?</p>
"
405106,1384652,2009-01-01T16:27:44Z,2,"I can't but help get the idea I'm doing it all wrong (Python, again)","<p>All of the questions that I've asked recently about Python have been for this project. I have realised that the reason I'm asking so many questions may not be because I'm so new to Python (but I know a good bit of PHP) and is probably not because Python has some inherent flaw.</p>

<p>Thus I will now say what the project is and what my current idea is and you can either tell me I'm doing it all wrong, that there's a few things I need to learn or that Python is simply not suited to dealing with this type of project and language XYZ would be better in this instance or even that there's some open source project I might want to get involved in.</p>

<p><strong>The project</strong><br>
I run a free turn based strategy game (think the campaign mode from the total war series but with even more complexity and depth) and am creating a combat simulator for it (again, think total war as an idea of how it'd work). I'm in no way deluded enough to think that I'll ever make anything as good as the Total war games alone but I do think that I can automate a process that I currently do by hand.</p>

<p><strong>What will it do</strong><br>
It will have to take into account a large range of variables for the units, equipment, training, weather, terrain and so on and so forth. I'm aware it's a big task and I plan to do it a piece at a time in my free time. I've zero budget but it's a hobby that I'm prepared to put time into (and have already).</p>

<p><strong>My current stumbling block</strong><br>
In PHP everything can access everything else, ""wrong"" though some might consider this it's really really handy for this. If I have an array of equipment for use by the units, I can get hold of that array from anywhere. With Python I have to remake that array each time I import the relevant data file and this seems quite a silly solution for a language that from my experience is well thought out. I've put in a system of logging function calls and class creation (because I know from a very basic version of this that I did in PHP once that it'll help a lot down the line) and the way that I've kept the data in one place is to pass each of my classes an instance to my logging list, smells like a hack to me but it's the only way I've gotten it to work.</p>

<p>Thus I conclude I'm missing something and would very much appreciate the insight of anybody willing to give it. Thank you.</p>

<p><strong>Code samples</strong></p>

<p>This creates a list of formations, so far there's only one value (besides the name) but I anticipate adding more on which is why they're a list of classes rather than just a standard list. This is found within data.py</p>

<pre><code>formations = []
formationsHash = []
def createFormations(logger):
	""""""This creates all the formations that will be used""""""

	# Standard close quarter formation, maximum number of people per square metre
	formationsHash.append('Tight')
	formations.append(Formation(logger, 'Tight', tightness = 1))

	# Standard ranged combat formation, good people per square metre but not too cramped
	formationsHash.append('Loose')
	formations.append(Formation(logger, 'Loose', tightness = 0.5))

	# Standard skirmishing formation, very good for moving around terrain and avoiding missile fire
	formationsHash.append('Skirmish')
	formations.append(Formation(logger, 'Skirmish', tightness = 0.1))

	# Very unflexible but good for charges
	formationsHash.append('Arrowhead')
	formations.append(Formation(logger, 'Arrowhead', tightness = 1))


def getFormation(searchFor):
	""""""Returns the fomation object with this name""""""
	indexValue = formationsHash.index(searchFor)
	return formations[indexValue]
</code></pre>

<p>I don't have a code sample of when I'd need to access it because I've not gotten as far as making it but I anticipate the code looking something like the following:</p>

<pre><code>Python
tempFormation = data.getFormation(unit.formationType)
tempTerrain = data.getTerrain(unit.currentTerrain)
unit.attackDamage = unit.attackDamage * tempTerrain.tighnessBonus(tempFormation.tightness)
</code></pre>

<p>The unit contains an integer that links to the index/key of the relevant terrain, formation and whatnot in the master list. Temporary variables are used to make the 3rd line shorter but in the long run will possibly cause issues if I forget to get one and it's use a value from earlier which is then incorrect (that's where the logging comes in handy). </p>

<pre><code>PHP
$unit-&gt;attackDamage *= $terrain[$unit-&gt;currentTerrain]-&gt;tighnessBonus($unit-&gt;currentTerrain)
</code></pre>

<p>The unit class contains the index (probably a string) of the relevant terrain it's on and the formation it's in.</p>

<p>Maybe this will show some massive flaw in my understanding of Python (6 months vs the 3 years of PHP).</p>
"
405165,47937,2009-01-01T17:12:12Z,20,"Please advise on Ruby vs Python, for someone who likes LISP a lot","<p>I am a C++ developer, slowly getting into web development. I like LISP a lot but don't like AllegroCL and web-frameworks available for LISP. I am looking for more freedom and ability to do cool hacks on language level. I don't consider tabs as a crime against nature.</p>

<p>Which one is closer to LISP: Python or Ruby? </p>

<p>I can't seem to be able to choose from Python and Ruby: they seem very similar but apparently Ruby is more functional and object-oriented, which are good things, while Python is more like Perl: a simple scripting language. Do I have the right impression?</p>

<p>PS - This might seem like a flame bait but it's not really, I'm just trying not to go crazy from OCD about switching from RoR to Python/Django and back.</p>
"
405282,NA,2009-01-01T18:47:32Z,3,Many instances of a class,"<p>I am trying to write a life simulation in python with a variety of animals. It is impossible to name each instance of the classes I am going to use because I have no way of knowing how many there will be.</p>

<p>So, my question:</p>

<p>How can I automatically give a name to an object?</p>

<p>I was thinking of creating a ""Herd"" class which could be all the animals of that type alive at the same time...</p>
"
405352,41613,2009-01-01T19:32:29Z,15,Mysql connection pooling question: is it worth it?,"<p>I recall hearing that the connection process in mysql was designed to be very fast compared to other RDBMSes, and that therefore using <a href=""http://www.sqlalchemy.org/"">a library that provides connection pooling</a> (SQLAlchemy) won't actually help you that much if you enable the connection pool.</p>

<p>Does anyone have any experience with this?</p>

<p>I'm leery of enabling it because of the possibility that if some code does something stateful to a db connection and (perhaps mistakenly) doesn't clean up after itself, that state which would normally get cleaned up upon closing the connection will instead get propagated to subsequent code that gets a recycled connection.</p>
"
405489,3055,2009-01-01T21:12:51Z,11,Python update object from dictionary,"<p>Is there a built-in function/operator I could use to unpack values from a dictionary and assign it into instance variables?</p>

<p>This is what I intend to do:</p>

<pre><code>c = MyClass()
c.foo = 123
c.bar = 123

# c.foo == 123 and c.bar == 123


d = {'bar': 456}
c.update(d)

# c.foo == 123 and c.bar == 456
</code></pre>

<p>Something akin to dictionary <code>update()</code> which load values from another dictionary but for plain object/class instance?</p>
"
405509,14540,2009-01-01T21:34:26Z,0,Hiding implementation details on an email templating system written in Python,"<p>I am writing an application where one of the features is to allow the user to write an email template using Markdown syntax.</p>

<p>Besides formatting, the user must be able to use placeholders for a couple of variables that would get replaced at runtime. </p>

<p>The way this is currently working is very simple: the templates have the Pythonic %(var)s placeholders and I replace those with a dictionary before applying Markdown2 formatting.</p>

<p>Turns out that the end user of this system will be a tech-savvy user and I wouldn't like to make it obvious to everyone that it's written in Python. </p>

<p>It's not that I don't like Python... I actually think Python is the perfect tool for the job, I just don't want to expose that to the user (would like the same even if it were written in Java, Perl, Ruby or anything else).</p>

<p>So I'd like to ask for insights on what would be, in your opinion, the best way to expose placeholders for the users:</p>

<ol>
<li><p>What do you think is the best placeholder format (thinks like ${var}, $(var) or #{var})?</p></li>
<li><p>What would be the best way to replace those placeholders?</p></li>
</ol>

<p>I though of using a Regular Expression to change - for instance - ${var} into %(var)s and then applying the regular Python templating substitution, but I am not sure that's the best approach.</p>

<p>If you go that way, it would be very nice if you could indicate me what is a draft of that regular expression as well.</p>

<p>Thanks!</p>

<p><strong>Update</strong>: An user pointed out using full-blown templating systems, but I think that may not be worth it, since all I need is placeholders substitution: I won't have loops or anything like that.</p>

<p><strong>Final Update</strong>: I have chosen not to use any template engines at this time. I chose to go with the simpler string.Template approach (as pointed out on a comment by <a href=""http://stackoverflow.com/users/49032/hyperboreean"">hyperboreean</a>). Truth is that I don't like to pick a solution because sometime in the future there may be a need. I will keep all those suggestions on my sleeve, and if on the lifespan of the application there is a clear need for one or more features offered by them, I'll revisit the idea. Right now, I really think it's an overkill. Having full blown templates that <strong>the end user</strong> can edit as he wants is, at least on my point of view, more trouble than benefit. Nevertheless, it feels much nicer being aware of the reasons I did not went down that path, than just not researching anything and choosing it. </p>

<p>Thanks a lot for all the input.</p>
"
405516,44563,2009-01-01T21:41:22Z,13,if all in list == something,"<p>Using python 2.6
is there a way to check if all the items of a sequence equals a given value, in one statement?</p>

<pre><code>[pseudocode]
my_sequence = (2,5,7,82,35)

if all the values in (type(i) for i in my_sequence) == int:
     do()
</code></pre>

<p>instead of, say:</p>

<pre><code>my_sequence = (2,5,7,82,35)
all_int = True
for i in my_sequence:
    if type(i) is not int:
        all_int = False
        break

if all_int:
    do()
</code></pre>
"
405540,2908,2009-01-01T22:06:09Z,13,What is a cyclic data structure good for?,"<p>I was just reading through <a href=""http://books.google.com/books?id=1HxWGezDZcgC&amp;lpg=PP1&amp;dq=learning%20python&amp;pg=PA254#v=onepage&amp;q=cyclic&amp;f=false"" rel=""nofollow"">""Learning Python"" by Mark Lutz and came across this code sample</a>:</p>

<pre><code>
>>> L = ['grail']
>>> L.append(L)
>>> L
['grail', [...]]

</code></pre>

<p>It was identified as a cyclic data structure.</p>

<p>So I was wondering, and here is my question:</p>

<h2><strong>What is a 'cyclic data structure' used for in real life programming?</strong></h2>

<p>There seems to be a little confusion, which i think stems from the very brief code sample... here's a few more lines using the same object L</p>

<pre><code>
>>> L[0]
'grail'
>>> L[1][0]
'grail'
>>> L[1][1][0]
'grail'

</code></pre>
"
405582,32558,2009-01-01T22:30:39Z,68,Function and class documentation best practices for Python,"<p>I am looking for best practices for function/class/module documentation, i.e. comments in the code itself. Ideally I would like a comment template which is both human readable and consumable by Python documentation utilities.</p>

<p>I have read the <a href=""http://docs.python.org/tutorial/controlflow.html"">Python documentation on docstrings</a>.</p>

<p>I understand this part:</p>

<blockquote>
  <p>The first line should always be a short, concise summary of the object’s purpose. For brevity, it should not explicitly state the object’s name or type, since these are available by other means (except if the name happens to be a verb describing a function’s operation). This line should begin with a capital letter and end with a period.</p>
  
  <p>If there are more lines in the documentation string, the second line should be blank, visually separating the summary from the rest of the description.</p>
</blockquote>

<p>This sentence needs a bit more explanation:</p>

<blockquote>
  <p>The following lines should be one or more paragraphs describing the object’s calling conventions, its side effects, etc.</p>
</blockquote>

<p>Specifically, I am looking for examples of well-commented functions and classes.</p>
"
405612,50548,2009-01-01T22:50:42Z,3,Accepting File Argument in Python (from Send To context menu),"<p>I'm going to start of by noting that I have next to no python experience.</p>

<p><img src=""http://www.aquate.us/u/9986423875612301299.jpg"" alt=""alt text"" /></p>

<p>As you may know, by simply dropping a shortcut in the Send To folder on your Windows PC, you can allow a program to take a file as an argument.</p>

<p>How would I write a python program that takes this file as an argument? </p>

<p>And, as a bonus if anyone gets a chance -- 
How would I integrate that with a urllib2 to POST the file to a PHP script on my server?</p>

<p>Thanks in advance.</p>

<p>Edit-- also, how do I make something show up in the Sendto menu? I was under the impression that you just drop a shortcut into the SendTo folder and it automatically adds an option in the menu...
Never mind. I figured out what I was doing wrong :)</p>
"
405617,47204,2009-01-01T22:54:43Z,-2,insert two values from an mysql table into another table using a python program,"<p>I'm having a small problem with a Python program (below) that I'm writing. </p>

<p>I want to insert two values from a MySQL table into another table from a Python program.</p>

<p>The two fields are priority and product and I have selected them from the shop table and I want to insert them into the products table. </p>

<p>Can anyone help? Thanks a lot. Marc.</p>

<pre><code>import MySQLdb

def checkOut():
    db = MySQLdb.connect(host='localhost', user = 'root', passwd = '$$', db = 'fillmyfridge')
    cursor = db.cursor(MySQLdb.cursors.DictCursor)
    user_input = raw_input('please enter the product barcode that you are taking out of the fridge: \n')
    cursor.execute('update shops set instock=0, howmanytoorder = howmanytoorder + 1  where barcode = %s', (user_input))
    db.commit()
    cursor.execute('select product, priority from shop where barcode = %s', (user_input))
    rows = cursor.fetchall()
    cursor.execute('insert into products(product, barcode, priority) values (%s, %s)', (rows[""product""], user_input, rows[""priority""]))
    db.commit()
    print 'the following product has been removed from the fridge and needs to be ordered'
</code></pre>
"
405652,49559,2009-01-01T23:08:01Z,12,Passing arguments with wildcards to a Python script,"<p>I want to do something like this:</p>

<pre><code>c:\data\&gt; python myscript.py *.csv
</code></pre>

<p>and pass all of the .csv files in the directory to my python script (such that <code>sys.argv</code> contains <code>[""file1.csv"", ""file2.csv""]</code>, etc.) </p>

<p>But <code>sys.argv</code> just receives <code>[""*.csv""]</code> indicating that the wildcard was not expanded, so this doesn't work.</p>

<p>I feel like there is a simple way to do this, but can't find it on Google. Any ideas?</p>
"
405724,8014,2009-01-02T00:11:57Z,9,Modifying Microsoft Outlook contacts from Python,"<p>I have written a few Python tools in the past to extract data from my Outlook contacts. Now, I am trying to <em>modify</em> my Outlook Contacts. I am finding that my changes are being noted by Outlook, but they aren't sticking. I seem to be updating some cache, but not the real record.</p>

<p>The code is straightforward.</p>

<pre><code>import win32com.client
import pywintypes

o = win32com.client.Dispatch(""Outlook.Application"")
ns = o.GetNamespace(""MAPI"")
profile = ns.Folders.Item(""My Profile Name"")
contacts = profile.Folders.Item(""Contacts"")
contact = contacts.Items[43] # Grab a random contact, for this example.
print ""About to overwrite "",contact.FirstName, contact.LastName
contact.categories = 'Supplier' # Override the categories

# Edit: I don't always do these last steps.
ns = None 
o = None
</code></pre>

<p>At this point, I change over to Outlook, which is opened to the Detailed Address Cards view. </p>

<p>I look at the contact summary (without opening it) and the category is unchanged (not refreshed?). </p>

<p>I open the contact and its category HAS changed, <em>sometimes</em>. (Not sure of when, but it feels like it is cache related.) If it has changed, it prompts me to Save Changes when I close it which is odd, because I haven't changed anything in the Outlook UI.</p>

<p>If I quit and restart Outlook, the changes are gone.</p>

<p>I <em>suspect</em> I am failing to call <a href=""http://msdn.microsoft.com/en-us/library/cc842181.aspx"">SaveChanges</a>, but I can't see which object supports it.</p>

<p>So my question is:</p>

<ul>
<li>Should I be calling SaveChanges? If so, where is it?</li>
<li>Am I making some other silly mistake, which is causing my data to be discarded?</li>
</ul>
"
406361,46646,2009-01-02T09:17:26Z,4,Floating Point Limitations,"<p>My code:</p>

<pre><code>a = '2.3'
</code></pre>

<p>I wanted to display <code>a</code> as a floating point value.</p>

<p>Since <code>a</code> is a string, I tried:</p>

<pre><code>float(a)
</code></pre>

<p>The result I got was :</p>

<pre><code>2.2999999999999998
</code></pre>

<p>I want a solution for this problem. Please, kindly help me.</p>

<p>I was following <a href=""http://docs.python.org/tutorial/floatingpoint.html"">this tutorial</a>.</p>
"
406907,8047,2009-01-02T14:26:57Z,8,Why does Ruby have Rails while Python has no central framework?,"<p>This is a(n) historical question, not a comparison-between-languages question:</p>

<p><a href=""http://tomayko.com/writings/no-rails-for-python"">This article from 2005</a> talks about the lack of a single, central framework for Python. For Ruby, this framework is clearly Rails. <strong>Why, historically speaking, did this happen for Ruby but not for Python?</strong> (or did it happen, and that framework is Django?)</p>

<p>Also, the hypothetical questions: <strong>would Python be more popular if it had one, good framework? Would Ruby be less popular if it had no central framework?</strong></p>

<p><strong>[Please avoid discussions of whether Ruby or Python is better, which is just too open-ended to answer.]</strong></p>

<p><strong>Edit:</strong> Though I thought this is obvious, I'm not saying that other frameworks do not exist for Ruby, but rather that the big one <strong>in terms of popularity</strong> is Rails. Also, I should mention that I'm not saying that frameworks for Python are not as good (or better than) Rails. Every framework has its pros and cons, but Rails seems to, as Ben Blank says in the one of the comments below, have surpassed Ruby in terms of popularity. There are no examples of that on the Python side. WHY? That's the question.</p>
"
406933,42636,2009-01-02T14:34:45Z,8,How to intercept special (alt / ctrl) key press?,"<p>How can I catch key combinations like <kbd>ALT</kbd>+<kbd>K</kbd> or <kbd>CTRL</kbd>+<kbd>ALT</kbd>+<kbd>H</kbd> in python <code>curses</code>?</p>
"
406939,48503,2009-01-02T14:39:30Z,7,PyQt: getting widgets to resize automatically in a QDialog,"<p>I'm having difficulty getting widgets in a QDialog resized automatically when the dialog itself is resized.</p>

<p>In the following program, the textarea resizes automatically if you resize the main window.  However, the textarea within the dialog stays the same size when the dialog is resized.</p>

<p>Is there any way of making the textarea in the dialog resize automatically?  I've tried using <code>setSizePolicy(QSizePolicy.Ignored, QSizePolicy.Ignored)</code> on the dialog itself and the two widgets within, but that seems to have no effect.</p>

<p>I'm using Qt version 3.3.7 and PyQt version 3.5.5-29 on openSuSE 10.2, if that's relevant.</p>

<pre><code>import sys
from qt import *

# The numbers 1 to 1000 as a string.
NUMBERS = (""%d "" * 1000) % (tuple(range(1,1001)))

# Add a textarea containing the numbers 1 to 1000 to the given
# QWidget.
def addTextArea(parent, size):
    textbox = QTextEdit(parent)
    textbox.setReadOnly(True)
    textbox.setMinimumSize(QSize(size, size*0.75))
    textbox.setText(NUMBERS)


class TestDialog(QDialog):
    def __init__(self,parent=None):
        QDialog.__init__(self,parent)
        self.setCaption(""Dialog"")
        everything = QVBox(self)

        addTextArea(everything, 400)
        everything.resize(everything.sizeHint())


class TestMainWindow(QMainWindow):
    def __init__(self,parent=None):
        QMainWindow.__init__(self,parent)
        self.setCaption(""Main Window"")
        everything = QVBox(self)

        addTextArea(everything, 800)

        button = QPushButton(""Open dialog"", everything)
        self.connect(button, SIGNAL('clicked()'), self.openDialog)        

        self.setCentralWidget(everything)
        self.resize(self.sizeHint())

        self.dialog = TestDialog(self)

    def openDialog(self):
        self.dialog.show()


if __name__ == '__main__':
    app = QApplication(sys.argv)
    mainwin = TestMainWindow(None)
    app.setMainWidget(mainwin)
    mainwin.show()
    app.exec_loop()
</code></pre>
"
407464,NA,2009-01-02T17:22:29Z,1,How to synchronize the same object on client and server side in client-server application? Is small messages framework good for this job?,"<p>I'm making a game engine in c++ and python. I'm using OGRE for 3D rendering, OpenAL for sound, ODE for physics, OIS for input, HawkNL for networking and boost.python for embedded python interpreter. Every subsystem (library) is wrapped by a class - manager and every manager is singleton. Now, I have a class - Object - this could be every visible object in game world. This is some kind of mix, object has graphics representation (entity) and representation in physics simulator (solid). These two are most important here. Class Object is just pure abstract base class - interface. I've decided to implement Object on client side as ObjectClientSide - this implementation has the entity, and on server side as ObjectServerSide - this implementation has the solid. Physics simulator runs only on server, and rendering is done only on client of course. The object can exist only when both implementations are working together. Every object has unique id and both instances of the same object on client and server side have the same id.</p>

<p>So, after this short background, my first question is: is this design good? How can I make it better? And the main question: how should I synchronize these objects?</p>

<p>Next, both implementations have the same interface, but part of it is implemented on server side and part on client side. So, for example, if player wants to move forward his character he should send a request to object on server. The server then makes changes to simulation and sends updated position to client. For that reason, I've created small messages framework. There is a Message class, Router, Rule and rules inherited from Rule. When message arrives, Router checks it against the rules and sends it to destination. So, when I call myObjectInstanceOnClientSide->setPosition(x,y,z) this object creates Message, its content is function and parameters and destination is object with the same id on server. When object with the same id on server side gets this message it calls this function with given arguments. So, when a function can't be implemented on one side it creates a message and sends it to object on the other side. I think this can be very useful in scripts. Scripts can be very clean, if script needs for example turn on animation on clients, I only need to call this function on server's local object - the rest is in background.</p>

<p>So, is this ok? Am I wrong about this? It this common solution?</p>
"
407468,50548,2009-01-02T17:23:55Z,6,Python urllib2 file upload problems,"<p>I'm currently trying to initiate a file upload with urllib2 and the <a href=""http://fabien.seisen.org/python/urllib2_multipart.html"" rel=""nofollow"">urllib2_file</a> library. Here's my code:</p>

<pre><code>import sys
import urllib2_file
import urllib2

URL='http://aquate.us/upload.php'
d = [('uploaded', open(sys.argv[1:]))]
req = urllib2.Request(URL, d)
u = urllib2.urlopen(req)
print u.read()
</code></pre>

<p>I've placed this .py file in my My Documents directory and placed a shortcut to it in my Send To folder (the shortcut URL is  ).</p>

<p>When I right click a file, choose Send To, and select Aquate (my python), it opens a command prompt for a split second and then closes it. Nothing gets uploaded.</p>

<p>I knew there was probably an error going on so I typed the code into CL python, line by line.
When I ran the <code>u=urllib2.urlopen(req)</code> line, I didn't get an error; 
<img src=""http://www.aquate.us/u/55245858877937182052.jpg"" alt=""alt text""></p>

<p>instead, the cursor simply started blinking on a new line beneath that line. I waited a couple of minutes to see if something would happen but it just stayed like that. To get it to stop, I had to press ctrl+break.</p>

<p>What's up with this script?</p>

<p>Thanks in advance!</p>

<p>[Edit]
Forgot to mention -- when I ran the script without the request data (the file) it ran like a charm. Is it a problem with urllib2_file?</p>

<p>[edit 2]:</p>

<pre><code>import MultipartPostHandler, urllib2, cookielib,sys
import win32clipboard as w
cookies = cookielib.CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cookies),MultipartPostHandler.MultipartPostHandler)
params = {""uploaded"" : open(""c:/cfoot.js"") }
a=opener.open(""http://www.aquate.us/upload.php"", params)
text = a.read()
w.OpenClipboard()
w.EmptyClipboard()
w.SetClipboardText(text)
w.CloseClipboard()
</code></pre>

<p>That code works like a charm if you run it through the command line.</p>
"
407587,1636,2009-01-02T18:09:07Z,13,Python: Set Bits Count (popcount),"<p>Few blob's  have been duplicated in my database(oracle 11g), performed XOR operations on the blob using UTL_RAW.BIT_XOR. After that i wanted to count the number of set bits in the binary string, so wrote the code above.</p>

<p>During a small experiment, i wanted to see what is the hex and the integer value produced and wrote this procedure..</p>

<pre><code>SQL&gt; declare
2
3 vblob1 blob;
4
5 BEGIN
6
7 select leftiriscode INTO vblob1 FROM irisdata WHERE irisid=1;
8
9 dbms_output.put_line(rawtohex(vblob1));
10
11
12 dbms_output.put_line(UTL_RAW.CAST_TO_binary_integer(vblob1));
13
14
15 END;
16 /
</code></pre>

<p>OUTPUT: HEXVALUE:</p>

<pre><code>0F0008020003030D030C1D1C3C383C330A3311373724764C54496C0A6B029B84840547A341BBA83D
BB5FB9DE4CDE5EFE96E1FC6169438344D604681D409F9F9F3BC07EE0C4E0C033A23B37791F59F84F
F94E4F664E3072B0229DA09D9F0F1FC600C2E380D6988C198B39517D157E7D66FE675237673D3D28
3A016C01411003343C76740F710F0F4F8FE976E1E882C186D316A63C0C7D7D7D7D397F016101B043
0176C37E767C7E0C7D010C8302C2D3E4F2ACE42F8D3F3F367A46F54285434ABB61BDB53CBF6C7CC0
F4C1C3F349B3F7BEB30E4A0CFE1C85180DC338C2C1C6E7A5CE3104303178724CCC5F451F573F3B24
7F24052000202003291F130F1B0E070C0E0D0F0E0F0B0B07070F1E1B330F27073F3F272E2F2F6F7B
2F2E1F2E4F7EFF7EDF3EBF253F3D2F39BF3D7F7FFED72FF39FE7773DBE9DBFBB3FE7A76E777DF55C
5F5F7ADF7FBD7F6AFE7B7D1FBE7F7F7DD7F63FBFBF2D3B7F7F5F2F7F3D7F7D3B3F3B7FFF4D676F7F
5D9FAD7DD17F7F6F6F0B6F7F3F767F1779364737370F7D3F5F377F2F3D3F7F1F2FE7709FB7BCB77B
0B77CF1DF5BF1F7F3D3E4E7F197F571F7D7E3F7F7F7D7F6F4F75FF6F7ECE2FFF793EFFEDB7BDDD1F
FF3BCE3F7F3FBF3D6C7FFF7F7F4FAF7F6FFFFF8D7777BF3AE30FAEEEEBCF5FEEFEE75FFEACFFDF0F
DFFFF77FFF677F4FFF7F7F1B5F1F5F146F1F1E1B3B1F3F273303170F370E250B

INTEGER VALUE: 15
</code></pre>

<p>There was a variance between the hex code and the integer value produced, so used the following python code to check the actual integer value.</p>

<pre><code>print int(""0F0008020003030D030C1D1C3C383C330A3311373724764C54496C0A6B029B84840547A341BBA83D
BB5FB9DE4CDE5EFE96E1FC6169438344D604681D409F9F9F3BC07EE0C4E0C033A23B37791F59F84F
F94E4F664E3072B0229DA09D9F0F1FC600C2E380D6988C198B39517D157E7D66FE675237673D3D28
3A016C01411003343C76740F710F0F4F8FE976E1E882C186D316A63C0C7D7D7D7D397F016101B043
0176C37E767C7E0C7D010C8302C2D3E4F2ACE42F8D3F3F367A46F54285434ABB61BDB53CBF6C7CC0
F4C1C3F349B3F7BEB30E4A0CFE1C85180DC338C2C1C6E7A5CE3104303178724CCC5F451F573F3B24
7F24052000202003291F130F1B0E070C0E0D0F0E0F0B0B07070F1E1B330F27073F3F272E2F2F6F7B
2F2E1F2E4F7EFF7EDF3EBF253F3D2F39BF3D7F7FFED72FF39FE7773DBE9DBFBB3FE7A76E777DF55C
5F5F7ADF7FBD7F6AFE7B7D1FBE7F7F7DD7F63FBFBF2D3B7F7F5F2F7F3D7F7D3B3F3B7FFF4D676F7F
5D9FAD7DD17F7F6F6F0B6F7F3F767F1779364737370F7D3F5F377F2F3D3F7F1F2FE7709FB7BCB77B
0B77CF1DF5BF1F7F3D3E4E7F197F571F7D7E3F7F7F7D7F6F4F75FF6F7ECE2FFF793EFFEDB7BDDD1F
FF3BCE3F7F3FBF3D6C7FFF7F7F4FAF7F6FFFFF8D7777BF3AE30FAEEEEBCF5FEEFEE75FFEACFFDF0F
DFFFF77FFF677F4FFF7F7F1B5F1F5F146F1F1E1B3B1F3F273303170F370E250B"",16)
</code></pre>

<p>Answer:</p>

<pre><code>611951595100708231079693644541095422704525056339295086455197024065285448917042457
942011979060274412229909425184116963447100932992139876977824261789243946528467423
887840013630358158845039770703659333212332565531927875442166643379024991542726916
563271158141698128396823655639931773363878078933197184072343959630467756337300811
165816534945075483141582643531294791665590339000206551162697220540050652439977992
246472159627917169957822698172925680112854091876671868161705785698942483896808137
210721991100755736178634253569843464062494863175653771387230991126430841565373390
924951878267929443498220727531299945275045612499928105876210478958806304156695438
684335624641395635997624911334453040399012259638042898470872203581555352191122920
004010193837249388365999010692555403377045768493630826307316376698443166439386014
145858084176544890282148970436631175577000673079418699845203671050174181808397880
048734270748095682582556024378558289251964544327507321930196203199459115159756564
507340111030285226951393012863778670390172056906403480159339130447254293412506482
027099835944315172972281427649277354815211185293109925602315480350955479477144523
387689192243720928249121486221114300503766209279369960344185651810101969585926336
07333771272398091
</code></pre>

<p>To get the set-bit count I have written the following code in C:</p>

<pre><code>int bitsoncount(unsigned x)
{
    unsigned int b=0;
    if(x &gt; 1)
    	b=1;	
    while(x &amp;= (x - 1))
    	b++;	
    return b;
}
</code></pre>

<p>When I tried the same code in python it did not work. I am new to python through curiosity I'm experimenting, excuse me if am wrong.</p>

<pre><code>def bitsoncount(x):
b=0;
if(x&gt;1):
b=1;
while(x &amp;= (x-1)):
</code></pre>

<p>I get an error at the last line, need some help in resolving this and implementing the logic in python :-)</p>

<p>I was interested in checking out the set bits version in python after what i have seen!</p>

<p>Thank You,
Chaitanya</p>

<p>Related question: <a href=""http://stackoverflow.com/questions/109023/best-algorithm-to-count-the-number-of-set-bits-in-a-32-bit-integer"">Best algorithm to count the number of set bits in a 32-bit integer?</a></p>
"
407734,8206,2009-01-02T19:05:54Z,33,A generic priority queue for Python,"<p>I need to use a priority queue in my Python code. Looking around for something efficient, I came upon <a href=""http://docs.python.org/library/heapq.html"">heapq</a>. It looks good, but seems to be specified only for integers. I suppose it works with any objects that have comparison operators, but it doesn't specify what comparison operators it needs. </p>

<p>Besides, <code>heapq</code> seems to be implemented in Python, so it's not fast.</p>

<p>Are you aware of any fast implementations for priority queues in Python ? Optimally, I'd like the queue to be generic (i.e. work well for any object with a specified comparison operator).</p>

<p>Thanks in advance</p>

<p><strong>Update:</strong></p>

<p>Re comparison in <code>heapq</code>, I can either use a <code>(priority, object)</code> as Charlie Martin suggests, or just implement <code>__cmp__</code> for my object. </p>

<p>I'm still looking for something faster than <code>heapq</code>.</p>
"
408039,51025,2009-01-02T21:08:42Z,1,Prevent Python subprocess from passing fds on Windows?,"<p>Python's subprocess module by default passes all open file descriptors to any child processes it spawns.  This means that if the parent process is listening on a port, and is killed, it cannot restart and begin listening again (even using SO_REUSEADDR) because the child is still in possession of that descriptor.  I have no control over the child process.</p>

<p>The subprocess POpen constructor does accept a close_fds argument, which would close descriptors on the child, just as I want.  However, there is a restriction, only on Windows, that prevents it from being used if stdin/stdout are also overridden, which I need to do.</p>

<p>Does anyone know of a work-around for this on Windows?</p>
"
408046,3594,2009-01-02T21:12:50Z,8,Python Outlook 2007 COM primer,"<p>I've been inspired by <a href=""http://stackoverflow.com/questions/405724/modifying-microsoft-outlook-contacts-from-python"">Modifying Microsoft Outlook contacts from Python</a> -- I'm looking to try scripting some of my more annoying Outlook uses with the <code>win32com</code> package. I'm a Linux user trapped in a Windows users' cubicle, so I don't know much about COM.</p>

<p>I'm looking for information on whether COM allows for reflection via <code>win32com</code> or whether there's documentation on the Outlook 2007 COM objects. Any other pointers that you think will be helpful are welcome!</p>

<p>I've found <a href=""http://wiki.exchange4linux.org/e4lwiki/n-h.support.wiki/uploads/programming_outlook_with_python.pdf"">Programming Outlook With Python</a>, but I'm using Outlook 2007 so I'd like some more information on how much of the Outlook 2000 information is still applicable.</p>

<p>TIA!</p>
"
408334,15055,2009-01-02T23:49:34Z,1,"In Windows, how can I enumerate and get text from another window's controls?","<p>More particularly - I have a window handle of another running application. This application contains a <code>TListControl.UnicodeClass</code> control somewhere (I know this from Winspector). How can I, using the Windows API and that window handle, go through all the items in that list control and get the text from all of the items?</p>

<p>You can assume the language is C/C++, though I'll actually be using win32all for python. References to the appropriate API calls would be great.</p>
"
408541,34479,2009-01-03T03:20:07Z,17,How to produce a 303 Http Response in Django?,"<p>Last couple of days we were discussing at <a href=""http://stackoverflow.com/questions/401191/how-to-return-random-items-restfully"">another question</a> the best to manage randomness in a RESTful way; today I went to play a little bit with some ideas in Django only to find that there is no easy standard way of returning a 303 response (nor a 300 one, btw), that is, there doesn't seem to exist an HttpResponseSeeOther inside django.HTTP or in another place. </p>

<p>Do you know any means for achieving this?</p>
"
408621,18852,2009-01-03T04:53:31Z,2,Convert CVS/SVN to a Programming Snippets Site,"<p>I use cvs to maintain all my python snippets, notes, c, c++ code. As the hosting provider provides a public web- server also, I was thinking that I should convert the cvs automatically to a programming snippets website. </p>

<ol>
<li><a href=""http://www.freebsd.org/projects/cvsweb.html"" rel=""nofollow"">cvsweb</a> is not what I mean.</li>
<li><a href=""http://www.doxygen.org"" rel=""nofollow"">doxygen</a> is for a complete project and to browse the self-referencing codes online.I think doxygen is more like web based ctags.</li>
</ol>

<p>I tried with <a href=""http://www.voidspace.org.uk/python/rest2web/"" rel=""nofollow"">rest2web</a>, it is requires that I write /restweb headers and files to be .txt files and it will interfere with the programming language syntax.</p>

<p>An approach I have thought is:
1) run source-hightlight and create .html pages for all the scripts.
2) now write a script to index those script .htmls and create webpage.
3) Create the website of those pages.</p>

<p>before proceeding, I thought I shall discuss here, if the members have any suggestion.
What do do, when you want to maintain your snippets and notes in cvs and also auto generate it into a good website. I like rest2web for converting notes to html.</p>
"
408810,46914,2009-01-03T09:22:50Z,1,Catch MainLoop exceptions and displaying them in MessageDialogs,"<p>I have a wxPython application that relies on an external config file.  I want provide friendly message dialogs that show up if there are any config errors.  I've tried to make this work by wrapping my app.MainLoop() call in a try/except statement.</p>

<p>The code below works for the init code in my MainWindow frame class, but doesn't catch any exceptions that occur within the MainLoop.  How can I catch these exceptions as well?</p>

<pre><code>if __name__ == '__main__':
    app = MyApp(0)
    try:
        MainWindow(None, -1, 'My Cool App')
        app.MainLoop()
    except ConfigParser.Error, error_message:
        messagebox = wx.MessageDialog(None, error_message, 'Configuration Error', wx.OK | wx.ICON_ERROR)
        messagebox.ShowModal()
</code></pre>

<p>I've read some mention of an OnExceptionInMainLoop method that can be overridden in the wx.App class, but the source I read must be out of date (2004) since wx.App no longer seems to have a method by that name.</p>

<p><strong>EDIT:</strong></p>

<p>I need to be able to catch unhandled exceptions during my mainloop so that I can further handle them and display them in error dialogs, not pass silently, and not terminate the app.</p>

<p>The sys.excepthook solution is too low level and doesn't play nice with the wxPython mainloop thread.  While the link to the other answer does the same try/except wrapping around the mainloop which doesn't work due, once again, to wxPython spawning a different thread for the app/ui.</p>
"
408855,21152,2009-01-03T10:23:46Z,4,How to compare and search list of integers efficiently?,"<p>I have a database populated with 1 million objects. Each object has a 'tags' field - set of integers.</p>

<p>For example:</p>

<pre><code>object1: tags(1,3,4)
object2: tags(2)
object3: tags(3,4)
object4: tags(5)
</code></pre>

<p>and so on.</p>

<p>Query parameter is a set on integers, lets try q(3,4,5)</p>

<pre><code>object1 does not match ('1' not in '3,4,5')
object2 does not match ('2' not in '3,4,5')
object3 matches ('3 and 4' in '3,4,5' )
object4 matches ('5' in '3,4,5' )
</code></pre>

<p>How to select matched objects efficiently?</p>
"
408866,42636,2009-01-03T10:30:40Z,15,Python human readable object serialization,"<p>i need to store Python structures made of lists / dictionaries, tuples into a human readable format. The idea is like using something similar to <a href=""http://docs.python.org/library/pickle.html"">pickle</a>, but pickle is not human-friendly. Other options that come to my mind are <a href=""http://en.wikipedia.org/wiki/Yaml"">YAML</a> (through <a href=""http://pyyaml.org/"">PyYAML</a> and <a href=""http://www.json.org/"">JSON</a> (through <a href=""http://pypi.python.org/pypi/simplejson/"">simplejson</a>) serializers.</p>

<p>Any other option that comes to your mind?</p>

<p>Thanks in advance.</p>
"
409217,33213,2009-01-03T15:32:56Z,6,Python mailbox encoding errors,"<p>First, let me say that I'm a complete beginner at Python. I've never learned the language, I just thought ""how hard can it be"" when Google turned up nothing but Python snippets to solve my problem. :)</p>

<p>I have a bunch of mailboxes in Maildir format (a backup from the mail server on my old web host), and I need to extract the emails from these. 
So far, the simplest way I've found has been to convert them to the mbox format, which Thunderbird supports, and it seems Python has a few classes for reading/writing both formats. Seems perfect.</p>

<p>The Python docs even have this little code snippet doing exactly what I need:</p>

<pre><code>src = mailbox.Maildir('maildir', factory=None)
dest = mailbox.mbox('/tmp/mbox')

for msg in src:   #1
    dest.add(msg) #2
</code></pre>

<p><em>Except</em> it doesn't work. And here's where my complete lack of knowledge about Python sets in.
On a few messages, I get a UnicodeDecodeError during the iteration (that is, when it's trying to read <code>msg</code> from <code>src</code>, on line <code>#1</code>). On others, I get a UnicodeEncodeError when trying to add <code>msg</code> to <code>dest</code> (line <code>#2</code>).</p>

<p>Clearly it makes some wrong assumptions about the encoding used. But I have no clue how to specify an encoding on the mailbox (For that matter, I don't know what the encoding should be either, but I can probably figure that out once I find a way to actually specify an encoding). </p>

<p>I get stack traces similar to the following:</p>

<pre><code> File ""E:\Python30\lib\mailbox.py"", line 102, in itervalues
    value = self[key]
  File ""E:\Python30\lib\mailbox.py"", line 74, in __getitem__
    return self.get_message(key)
  File ""E:\Python30\lib\mailbox.py"", line 317, in get_message
    msg = MaildirMessage(f)
  File ""E:\Python30\lib\mailbox.py"", line 1373, in __init__
    Message.__init__(self, message)
  File ""E:\Python30\lib\mailbox.py"", line 1345, in __init__
    self._become_message(email.message_from_file(message))
  File ""E:\Python30\lib\email\__init__.py"", line 46, in message_from_file
    return Parser(*args, **kws).parse(fp)
  File ""E:\Python30\lib\email\parser.py"", line 68, in parse
    data = fp.read(8192)
  File ""E:\Python30\lib\io.py"", line 1733, in read
    eof = not self._read_chunk()
  File ""E:\Python30\lib\io.py"", line 1562, in _read_chunk
    self._set_decoded_chars(self._decoder.decode(input_chunk, eof))
  File ""E:\Python30\lib\io.py"", line 1295, in decode
    output = self.decoder.decode(input, final=final)
  File ""E:\Python30\lib\encodings\cp1252.py"", line 23, in decode
    return codecs.charmap_decode(input,self.errors,decoding_table)[0]
UnicodeDecodeError: 'charmap' codec can't decode byte 0x9d in position 37: character maps to &lt;undefined&gt;
</code></pre>

<p>And on the UnicodeEncodeErrors:</p>

<pre><code>  File ""E:\Python30\lib\email\message.py"", line 121, in __str__
    return self.as_string()
  File ""E:\Python30\lib\email\message.py"", line 136, in as_string
    g.flatten(self, unixfrom=unixfrom)
  File ""E:\Python30\lib\email\generator.py"", line 76, in flatten
    self._write(msg)
  File ""E:\Python30\lib\email\generator.py"", line 108, in _write
    self._write_headers(msg)
  File ""E:\Python30\lib\email\generator.py"", line 141, in _write_headers
    header_name=h, continuation_ws='\t')
  File ""E:\Python30\lib\email\header.py"", line 189, in __init__
    self.append(s, charset, errors)
  File ""E:\Python30\lib\email\header.py"", line 262, in append
    input_bytes = s.encode(input_charset, errors)
UnicodeEncodeError: 'ascii' codec can't encode character '\xe5' in position 16:
ordinal not in range(128)
</code></pre>

<p>Anyone able to help me out here? (Suggestions for completely different solutions not involving Python are obviously welcome too. I just need a way to access get import the mails from these Maildir files.</p>

<p><em>Updates:</em></p>

<p>sys.getdefaultencoding returns 'utf-8'</p>

<p>I uploaded sample messages which cause both errors.
<a href=""http://jalf.dk/python_problem/1187691008.H199308P14265.c1p.hostingzoom.com_2,S"" rel=""nofollow"">This one</a> throws UnicodeEncodeError, and <a href=""http://jalf.dk/python_problem/1219438193.H364790P13554.c1p.hostingzoom.com_2,S"" rel=""nofollow"">this</a> throws UnicodeDecodeError</p>

<p>I tried running the same script in Python2.6, and got TypeErrors instead:</p>

<pre><code>  File ""c:\python26\lib\mailbox.py"", line 529, in add
    self._toc[self._next_key] = self._append_message(message)
  File ""c:\python26\lib\mailbox.py"", line 665, in _append_message
    offsets = self._install_message(message)
  File ""c:\python26\lib\mailbox.py"", line 724, in _install_message
    self._dump_message(message, self._file, self._mangle_from_)
  File ""c:\python26\lib\mailbox.py"", line 220, in _dump_message
    raise TypeError('Invalid message type: %s' % type(message))
TypeError: Invalid message type: &lt;type 'instance'&gt;
</code></pre>
"
409354,6053,2009-01-03T16:57:11Z,10,Cocoa client/server application,"<p>Is there a way in Cocoa that is currently considered best practice for creating a multi-tier or client server application?</p>

<p>I'm an experienced web developer and I really love Python. I'm new to Cocoa though. The application I'm toying with writing is a patient management system for a large hospital. The system is expected to store huge amounts of data over time but the data transferred during a single session is very light (mostly just text). The communication is assumed to occur over a local network (wired or wireless). It has to be highly secure, of course.</p>

<p>The best I could come up with is to write a Python REST web service and connect to it through the Cocoa app. Maybe I'll even use Python to code the Cocoa app itself.</p>

<p>Looking at Cocoa, I see really great technologies in Cocoa like CoreData but I couldn't find anything similar for client server development. I just want to make sure that I'm not missing anything.</p>

<p>What do you think?</p>

<p>Real world examples will be greatly appreciated.</p>

<p>Thanks in advance.</p>
"
409370,51181,2009-01-03T17:05:30Z,23,Sorting and Grouping Nested Lists in Python,"<p>I have the following data structure (a list of lists)</p>

<pre><code>[
 ['4', '21', '1', '14', '2008-10-24 15:42:58'], 
 ['3', '22', '4', '2somename', '2008-10-24 15:22:03'], 
 ['5', '21', '3', '19', '2008-10-24 15:45:45'], 
 ['6', '21', '1', '1somename', '2008-10-24 15:45:49'], 
 ['7', '22', '3', '2somename', '2008-10-24 15:45:51']
]
</code></pre>

<p>I would like to be able to</p>

<ol>
<li><p>Use a function to reorder the list so that I can group by each item in the list. For example I'd like to be able to group by the second column (so that all the 21's are together) </p></li>
<li><p>Use a function to only display certain values from each inner list. For example i'd like to reduce this list to only contain the 4th field value of '2somename' </p></li>
</ol>

<p>so the list would look like this </p>

<pre><code>[
     ['3', '22', '4', '2somename', '2008-10-24 15:22:03'], 
     ['7', '22', '3', '2somename', '2008-10-24 15:45:51']
]
</code></pre>
"
409449,42974,2009-01-03T17:41:09Z,3,Loop function parameters for sanity check,"<p>I have a Python function in which I am doing some sanitisation of the input parameters:</p>

<pre><code>def func(param1, param2, param3):
    param1 = param1 or ''
    param2 = param2 or ''
    param3 = param3 or ''
</code></pre>

<p>This caters for the arguments being passed as <em>None</em> rather than empty strings. Is there an easier/more concise way to loop round the function parameters to apply such an expression to all of them. My actual function has nine parameters.</p>
"
409529,42974,2009-01-03T18:19:50Z,8,Avoid exceptions?,"<p>This particular example relates to Django in Python, but should apply to any language supporting exceptions:</p>

<pre><code>try:
    object = ModelClass.objects.get(search=value)
except DoesNotExist:
    pass

if object:
    # do stuff
</code></pre>

<p>The Django model class provides a simple method <em>get</em> which allows me to search for <em>one and only one</em> object from the database, if it finds more or less it raises an exception. If can find zero or more with an alternative <em>filter</em> method, which returns a list:</p>

<pre><code>objects = ModelClass.objects.filter(search=value)
if len(objects) == 1:
    object = objects[0]
    # do stuff
</code></pre>

<p><strong>Am I overly averse to exceptions?</strong> To me the exception seems a little wasteful, at a guess, a quarter-to-a-half of the time will be 'exceptional'. I'd much prefer a function that returns <em>None</em> on failure. Would I be better to use Django's <em>filter</em> method and process the list myself?</p>
"
409677,46914,2009-01-03T19:37:41Z,0,What versions of Python and wxPython correspond to each version of OSX?,"<p>I'd like to know what versions of Python and wxPython correspond to each version of OSX.  I'm interested to know exactly how far back some of my apps will remain compatible on a mac before having to install newer versions of Python and wxPython.</p>
"
409732,22897,2009-01-03T20:07:28Z,15,Python: Alter elements of a list,"<p>I have a list of booleans where occasionally I reset them all to false. After first writing the reset as:</p>

<pre><code>for b in bool_list:
    b = False
</code></pre>

<p>I found it doesn't work. I spent a moment scratching my head, then remembered that of course it won't work since I'm only changing a reference to the bool, not its value. So I rewrote as:</p>

<pre><code>for i in xrange(len(bool_list)):
    bool_list[i] = False
</code></pre>

<p>and everything works fine. But I found myself asking, ""Is that really the most pythonic way to alter all elements of a list?"" Are there other ways that manage to be either more efficient or clearer?</p>
"
409769,40619,2009-01-03T20:32:20Z,0,Parsing fixed-format data embedded in HTML in python,"<p>I am using google's appengine api</p>

<pre><code>from google.appengine.api import urlfetch
</code></pre>

<p>to fetch a webpage.  The result of</p>

<pre><code>result = urlfetch.fetch(""http://www.example.com/index.html"")
</code></pre>

<p>is a string of the html content (in result.content).  The problem is the data that I want to parse is not really in HTML form, so I don't think using a python HTML parser will work for me.  I need to parse all of the plain text in the body of the html document.  The only problem is that urlfetch returns a single string of the entire HTML document, removing all newlines and extra spaces.</p>

<p><strong>EDIT:</strong>
Okay, I tried fetching a different URL and apparently urlfetch does not strip the newlines, it was the original webpage I was trying to parse that served the HTML file that way...
<strong>END EDIT</strong></p>

<p>If the document is something like this:</p>

<pre><code>&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;
AAA 123 888 2008-10-30 ABC
BBB 987 332 2009-01-02 JSE
...
A4A       288        AAA
&lt;/body&gt;&lt;/html&gt;
</code></pre>

<p>result.content will be this, after urlfetch fetches it:</p>

<pre><code>'&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;AAA 123 888 2008-10-30 ABCBBB 987     2009-01-02 JSE...A4A     288            AAA&lt;/body&gt;&lt;/html&gt;'
</code></pre>

<p>Using an HTML parser will not help me with the data between the body tags, so I was going to use regular expresions to parse my data, but as you can see the last part of one line gets combined with the first part of the next line, and I don't know how to split it.  I tried</p>

<pre><code>result.content.split('\n')
</code></pre>

<p>and</p>

<pre><code>result.content.split('\r')
</code></pre>

<p>but the resulting list was all just 1 element.  I don't see any options in google's urlfetch function to not remove newlines.</p>

<p>Any ideas how I can parse this data?  Maybe I need to fetch it differently?</p>

<p>Thanks in advance!</p>
"
409783,2147,2009-01-03T20:37:55Z,87,socket.shutdown vs socket.close,"<p>I recently saw a bit of code that looked like this (with sock being a socket object of course):</p>

<pre><code>sock.shutdown(socket.SHUT_RDWR)
sock.close()
</code></pre>

<p>What exactly is the purpose of calling shutdown on the socket and then closing it?  If it makes a difference, this socket is being used for non-blocking IO.</p>
"
409949,NA,2009-01-03T21:59:30Z,21,How do you embed album art into an MP3 using Python?,"<p>I've been using mutagen for reading and writing MP3 tags, but I want to be able to embed album art directly into the file.</p>
"
410163,31026,2009-01-04T00:30:37Z,32,"For Python programmers, is there anything equivalent to Perl's CPAN?","<p>I'm learning Python now because of the Django framework.  I have been a Perl programmer for a number of years and I'm so used to Perl's tools.  One of the things that I really miss is Perl's CPAN and its tools.  Is there anything equivalent in Python?  I would like to be able to search, install and maintain Python modules as easy as CPAN.  Also, a system that can handle dependencies automatically.  I tried to install a module in Python by downloading a zip file from a website, unzipped it, then do:</p>

<p><code>sudo python setup.py install</code></p>

<p>but it's looking for another module.  Now, lazy as I am, I don't like chasing dependencies and such, is there an easy way?</p>
"
410221,9106,2009-01-04T01:20:55Z,31,Natural/Relative days in Python,"<p>I'd like a way to show natural times for dated items in Python. Similar to how Twitter will show a message from ""a moment ago"", ""a few minutes ago"", ""two hours ago"", ""three days ago"", etc.</p>

<p>Django 1.0 has a ""humanize"" method in django.contrib. I'm not using the Django framework, and even if I were, it's more limited than what I'd like.</p>

<p>Please let me (and generations of future searchers) know if there is a good working solution already. Since this is a common enough task, I imagine there must be something. </p>
"
410273,21000,2009-01-04T01:53:27Z,1,Implementing a buffer-like structure in Python,"<p>I'm trying to write a small wsgi application which will put some objects to an external queue after each request. I want to make this in batch, ie. make the webserver put the object to a buffer-like structure in memory, and another thread and/or process for sending these objects to the queue in batch, when buffer is big enough or after certain timeout, and clearing the buffer. I don't want to be in NIH syndrome and not want to bother with threading stuff, however I could not find a suitable code for this job. Any suggestions? </p>
"
410392,40529,2009-01-04T03:37:29Z,15,Using AD as authentication for Django,"<p>I'm working on a Django-based application in a corporate environment and would like to use the existing Active Directory system for authentication of users (so they don't get yet another login/password combo).  I would also like to continue to use Django's user authorization / permission system to manage user capabilities.</p>

<p>Does anyone have a good example of this? </p>
"
410469,2283,2009-01-04T04:36:34Z,4,TKinter windows do not appear when using multiprocessing on Linux,"<p>I want to spawn another process to display an error message asynchronously while the rest of the application continues. </p>

<p>I'm using the <code>multiprocessing</code> module in Python 2.6 to create the process and I'm trying to display the window with <code>TKinter</code>. </p>

<p>This code worked okay on Windows, but running it on Linux the <code>TKinter</code> window does not appear if I call <code>'showerror(""MyApp Error"", ""Something bad happened."")'</code>. It <em>does</em> appear if I run it in the same process by calling <code>showerrorprocess</code> directly. Given this, it seems <code>TKinter</code> is working properly. I can print to the console and do other things from processes spawned by <code>multiprocessing</code>, so it seems to be working too. </p>

<p>They just don't seem to work together. Do I need to do something special to allow spawned subprocesses to create windows?</p>

<pre><code>from multiprocessing import Process
from Tkinter import Tk, Text, END, BOTH, DISABLED
import sys
import traceback

def showerrorprocess(title,text):
    """"""Pop up a window with the given title and text. The
       text will be selectable (so you can copy it to the
       clipboard) but not editable. Returns when the
       window is closed.""""""
    root = Tk()
    root.title(title)
    text_box = Text(root,width=80,height=15)
    text_box.pack(fill=BOTH)
    text_box.insert(END,text)
    text_box.config(state=DISABLED)
    def quit():
        root.destroy()
        root.quit()
    root.protocol(""WM_DELETE_WINDOW"", quit)
    root.mainloop()

def showerror(title,text):
    """"""Pop up a window with the given title and text. The
       text will be selectable (so you can copy it to the
       clipboard) but not editable. Runs asynchronously in
       a new child process.""""""
    process = Process(target=showerrorprocess,args=(title,text))
    process.start()
</code></pre>

<hr>

<p><strong>Edit</strong></p>

<p>The issue seems to be that <code>TKinter</code> was imported by the parent process, and ""inherited"" into the child process, but somehow its state is inextricably linked to the parent process and it cannot work in the child. So long as you make sure not to import <code>TKinter</code> before you spawn the child process, it will work because then it is the child process that is importing it for the first time.</p>
"
410485,48557,2009-01-04T05:00:52Z,12,what's the 5 character alphanumeric id in reddit URL?,"<p>Whats the <code>7n5lu</code> in the reddit URL 
<code>http://www.reddit.com/r/reddit.com/comments/7n5lu/man_can_fly_if_you_watch_one_video_in_2</code></p>

<p>how is it generated?</p>

<p>update:
@Gerald, Thanks for the code. I initially thought this is some obfuscation of the id. 
But, it is just doing the conversion from integer to a more compact representation. I am thinking, why is this being done? why not use the original integer itself!!</p>

<pre><code>&gt;&gt;&gt; to36(4000)
'334'
&gt;&gt;&gt; to36(4001)
'335'
</code></pre>
"
410941,46914,2009-01-04T12:52:23Z,3,Best modules to develop a simple windowed 3D modeling application?,"<p>I want to create a very basic 3D modeling tool.  The application is supposed to be windowed and will need to respond to mouse click and drag events in the 3D viewport.</p>

<p>I've decided on wxPython for the actual window since I'm fairly familiar with it already.  However, I need to produce an OpenGL viewport that can respond to the various mouse events.  It wouldn't hurt to have some convenience math in place for converting the 2D mouse positions in ""camera space"" into world space coordinates to make selection tasks easier.</p>

<p>I'm looking for recommendations on which modules I should be looking at.</p>
"
410954,NA,2009-01-04T13:05:41Z,14,How do I parse XML from a Google app engine app?,"<p>How do I parse XML from a Google app engine app? Any examples?</p>
"
411708,39167,2009-01-04T21:30:01Z,4,"gtk.Builder, container subclass and binding child widgets","<p>I'm trying to use custom container widgets in gtk.Builder definition files. As far as instantiating those widgets, it works great:</p>

<pre><code>#!/usr/bin/env python

import sys 
import gtk 

class MyDialog(gtk.Dialog):
    __gtype_name__ = ""MyDialog""


if __name__ == ""__main__"":
    builder = gtk.Builder()
    builder.add_from_file(""mydialog.glade"")

    dialog = builder.get_object(""mydialog-instance"")
    dialog.run()
</code></pre>

<p>Now the question is that say I have a gtk.TreeView widget inside that dialog. I'm trying to figure out how to bind that widget to an MyDialog instance variable. </p>

<p>One cheap alternative I can think of is to call additional method after getting the dialog widget like so:</p>

<pre><code>dialog = builder.get_object(""mydialog-instance"")
dialog.bind_widgets(builder)
</code></pre>

<p>But that seems fairly awkward. Has anyone solved this already or has a better idea on how to go about doing it?</p>

<p>Thanks,</p>
"
411761,2908,2009-01-04T22:00:33Z,17,Variable number of inputs with Django forms possible?,"<p>Is it possible to have a variable number of fields using django forms?</p>

<p>The specific application is this:</p>

<p>A user can upload as many pictures as they want on the image upload form. Once the pictures are uploaded they are taken to a page where they can give the pictures a name and description. The number of pictures will depend on how many the user has chosen to upload.</p>

<p>So <strong>how do I get django to generate a form using a variable number of input fields</strong> (which could be passed as an argument if necessary)?</p>

<p><strong>edit:</strong> a few things have changed since the <a href=""http://www.b-list.org/weblog/2008/nov/09/dynamic-forms/"">article mentioned in jeff bauer's answer</a> was written. </p>

<p>Namely this line of code which doesn't seem to work:</p>

<pre><code># BAD CODE DO NOT USE!!!
return type('ContactForm', [forms.BaseForm], { 'base_fields': fields })
</code></pre>

<p>So here is what I came up with...</p>

<h1>The Answer I used:</h1>

<pre><code>
from tagging.forms import TagField
from django import forms

def make_tagPhotos_form(photoIdList):
    ""Expects a LIST of photo objects (ie. photo_sharing.models.photo)""

    fields = {}

    for id in photoIdList:
    	id = str(id)

    	fields[id+'_name'] = forms.CharField()
    	fields[id+'_tags'] = TagField()
    	fields[id+'_description'] = forms.CharField(widget=forms.Textarea)

    return type('tagPhotos', (forms.BaseForm,), { 'base_fields': fields })

</code></pre>

<p>note tagging is not part of django, but it is free and very useful. check it out: <a href=""http://code.google.com/p/django-tagging/"">django-tagging</a></p>
"
411810,44440,2009-01-04T22:32:50Z,15,How do I retrieve a Django model class dynamically?,"<p>Without having the full module path of a Django model, is it possible to do something like:</p>

<pre><code>model = 'User' [in Django namespace]
model.objects.all()
</code></pre>

<p>...as opposed to:</p>

<pre><code>User.objects.all().
</code></pre>

<p>EDIT: I am trying to make this call based on command-line input. Is it possible to avoid the import statement, e.g., </p>

<pre><code>model = django.authx.models.User
</code></pre>

<p>Without Django returning the error:</p>

<pre><code>""global name django is not defined.""
</code></pre>
"
411902,NA,2009-01-04T23:28:35Z,8,Django file upload failing occasionally,"<p>I am trying to port my first Django 1.0.2 application to run on OSX/Leopard with Apache + mod_python 3.3.1 + python 2.6.1 (all running in 64-bit mode) and I am experiencing an occasional error when uploading a file that was not present when testing with the Django development server. </p>

<p>The code for the upload is similar to what described in the Django documentation:</p>

<pre><code>class UploadFileForm(forms.Form):
    file  = forms.FileField()
    description = forms.CharField(max_length=100)
    notifygroup = forms.BooleanField(label='Notify Group?', required=False)

def upload_file(request, date, meetingid ):
    print date, meetingid
    if request.method == 'POST':
        print 'before reloading the form...'
        form = UploadFileForm(request.POST, request.FILES)
    print 'after reloading the form'
        if form.is_valid():
            try: 
                handle_uploaded_file(request.FILES['file'], request.REQUEST['date'], request.REQUEST['description'], form.cleaned_data['notifygroup'], meetingid )
            except:
                return render_to_response('uploaded.html', { 'message': 'Error! File not uploaded!' })
            return HttpResponseRedirect('/myapp/uploaded/')
    else:
        form = UploadFileForm()
    return render_to_response('upload.html', {'form': form, 'date':date, 'meetingid':meetingid})
</code></pre>

<p>This code normally works correctly, but sometimes (say, once every 10 uploads) and after a fairly long waiting time, it fails with the following error:</p>

<pre><code>IOError at /myapp/upload/2009-01-03/1
Client read error (Timeout?)
Request Method: POST
Request URL:    http://192.168.0.164/myapp/upload/2009-01-03/1
Exception Type: IOError
Exception Value:    
Client read error (Timeout?)
Exception Location: /Library/Frameworks/Python64.framework/Versions/2.6/lib/python2.6/site-packages/django/http/multipartparser.py in read, line 406
Python Executable:  /usr/sbin/httpd
Python Version: 2.6.1
Python Path:    ['/djangoapps/myapp/', '/djangoapps/', '/Library/Frameworks/Python64.framework/Versions/2.6/lib/python26.zip', '/Library/Frameworks/Python64.framework/Versions/2.6/lib/python2.6', '/Library/Frameworks/Python64.framework/Versions/2.6/lib/python2.6/plat-darwin', '/Library/Frameworks/Python64.framework/Versions/2.6/lib/python2.6/plat-mac', '/Library/Frameworks/Python64.framework/Versions/2.6/lib/python2.6/plat-mac/lib-scriptpackages', '/Library/Frameworks/Python64.framework/Versions/2.6/lib/python2.6/lib-tk', '/Library/Frameworks/Python64.framework/Versions/2.6/lib/python2.6/lib-old', '/Library/Frameworks/Python64.framework/Versions/2.6/lib/python2.6/lib-dynload', '/Library/Frameworks/Python64.framework/Versions/2.6/lib/python2.6/site-packages']
Server time:    Sun, 4 Jan 2009 22:42:04 +0100

Environment:

Request Method: POST
Request URL: http://192.168.0.164/myapp/upload/2009-01-03/1
Django Version: 1.0.2 final
Python Version: 2.6.1
Installed Applications:
['django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.admin',
 'myapp.application1']
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware')

Traceback:
File ""/Library/Frameworks/Python64.framework/Versions/2.6/lib/python2.6/site-packages/django/core/handlers/base.py"" in get_response
  86.                 response = callback(request, *callback_args, **callback_kwargs)
File ""/djangoapps/myapp/../myapp/application1/views.py"" in upload_file
  137.         form = UploadFileForm(request.POST, request.FILES)
File ""/Library/Frameworks/Python64.framework/Versions/2.6/lib/python2.6/site-packages/django/core/handlers/modpython.py"" in _get_post
  113.             self._load_post_and_files()
File ""/Library/Frameworks/Python64.framework/Versions/2.6/lib/python2.6/site-packages/django/core/handlers/modpython.py"" in _load_post_and_files
  87.                 self._post, self._files = self.parse_file_upload(self.META, self._req)
File ""/Library/Frameworks/Python64.framework/Versions/2.6/lib/python2.6/site-packages/django/http/__init__.py"" in parse_file_upload
  124.         return parser.parse()
File ""/Library/Frameworks/Python64.framework/Versions/2.6/lib/python2.6/site-packages/django/http/multipartparser.py"" in parse
  134.             for item_type, meta_data, field_stream in Parser(stream, self._boundary):
File ""/Library/Frameworks/Python64.framework/Versions/2.6/lib/python2.6/site-packages/django/http/multipartparser.py"" in __iter__
  607.         for sub_stream in boundarystream:
File ""/Library/Frameworks/Python64.framework/Versions/2.6/lib/python2.6/site-packages/django/http/multipartparser.py"" in next
  421.             return LazyStream(BoundaryIter(self._stream, self._boundary))
File ""/Library/Frameworks/Python64.framework/Versions/2.6/lib/python2.6/site-packages/django/http/multipartparser.py"" in __init__
  447.         unused_char = self._stream.read(1)
File ""/Library/Frameworks/Python64.framework/Versions/2.6/lib/python2.6/site-packages/django/http/multipartparser.py"" in read
  300.         out = ''.join(parts())
File ""/Library/Frameworks/Python64.framework/Versions/2.6/lib/python2.6/site-packages/django/http/multipartparser.py"" in parts
  293.                 chunk = self.next()
File ""/Library/Frameworks/Python64.framework/Versions/2.6/lib/python2.6/site-packages/django/http/multipartparser.py"" in next
  315.             output = self._producer.next()
File ""/Library/Frameworks/Python64.framework/Versions/2.6/lib/python2.6/site-packages/django/http/multipartparser.py"" in next
  376.             data = self.flo.read(self.chunk_size)
File ""/Library/Frameworks/Python64.framework/Versions/2.6/lib/python2.6/site-packages/django/http/multipartparser.py"" in read
  406.         return self._file.read(num_bytes)

Exception Type: IOError at /myapp/upload/2009-01-03/1
Exception Value: Client read error (Timeout?)
</code></pre>

<p>I tried to run everything using mod_wsgi and no difference.</p>

<p>Does anybody know what am I doing wrong?</p>

<p>Thanks in advance for your help!</p>

<p>ppdo</p>

<p>=====</p>

<p>Updated:</p>

<p>Though I succeeded uploading large files (60+ MB), when it fails it fails with no evident relationship with the size of the upload, i.e. it fails also with 10kB files that have successfully been uploaded before. </p>
"
412214,51517,2009-01-05T03:36:21Z,1,How to bring program to front using python,"<p>I would like to force my python app to the front if a condition occurs. I'm using Kubuntu &amp; QT3.1</p>

<p>I've tried setActiveWindow(), but it only flashes the task bar in KDE.</p>

<p>I think Windows has a function bringwindowtofront() for VB.</p>

<p>Is there something similar for KDE?</p>
"
412368,51532,2009-01-05T05:57:25Z,3,How to (simply) connect Python to my web site?,"<p>I've been playing with Python for a while and wrote a little program to make a database to keep track of some info (its really basic, and hand written). I want to add the ability to create a website from the data that I will then pass to my special little place on the internet. What should I use to build up the website? After dabbling with Django, I've found it overkill and over my head, but if that's the only option I'll learn to use it.</p>

<p>Does anyone know an easy way to output a database of arbitrary format to one or more HTML (or different format) files?</p>
"
412472,50773,2009-01-05T07:16:34Z,4,Using mocking to test derived classes in Python,"<p>I have code that looks like this:</p>

<pre><code>import xmlrpclib

class Base(object):
    def __init__(self, server):
        self.conn = xmlrpclib.ServerProxy(server)

    def foo(self):
        return self.conn.do_something()

class Derived(Base):
    def foo(self):
        if Base.foo():
            return self.conn.do_something_else()
</code></pre>

<p>How should I use mocking to test the behavior of the <code>Derived</code> class? I don't want to assume that whatever the XML-RPC connection talks to will actually exist, but I feel like mocking the <code>xmlrpclib</code> module requires too much knowledge of the implementation of the <code>Base</code> class (which I have other tests for).</p>

<p>Or, I guess, should I even use mocking to test this? If not, how would you test it?</p>
"
412475,NA,2009-01-05T07:17:31Z,2,How to construct notes from a given song file?,"<p>Are there any modules in Python that help us to construct or obtain the musical notes and octaves from a given original song?</p>

<p>Thanks for the help</p>
"
412498,51540,2009-01-05T07:30:03Z,1,How to access to the root path in a mod_python directory?,"<p>In my Apache webserver I put this:</p>

<pre><code>&lt;Directory /var/www/MYDOMAIN.com/htdocs&gt;
    SetHandler mod_python
    PythonHandler mod_python.publisher
    PythonDebug On
&lt;/Directory&gt;
</code></pre>

<p>Then I have a handler.py file with an index function.</p>

<p>When I go to MYDOMAIN.com/handler.py, I see a web page produced by the index function (just a plain vanilla HTML page). Every other page is of this type: MYDOMAIN.com/handler.py/<em>somename</em> where <em>somename</em> corresponds to a funcion in handler.py file.</p>

<p>But when I go to MYDOMAIN.com, I get this:</p>

<blockquote>
  <p>Not Found</p>
  
  <p>The requested URL / was not found on
  this server.</p>
</blockquote>

<p>Is theres a way with mod_python and publisher to just use the root and not a name.py as a starting point?</p>

<p>I already tried with this in the apache conf file:</p>

<blockquote>
  <p>DirectoryIndex handler.py</p>
</blockquote>

<p>To no avail :(</p>
"
412775,51518,2009-01-05T10:48:05Z,3,Apps Similar to Nodebox?,"<p>I'm looking for apps/environments similar to <a href=""http://nodebox.net/code/index.php/Tutorial"" rel=""nofollow"">Nodebox</a>. Nodebox is so cool and I want to know if there were other similar apps out there. </p>

<p>They don't have to be graphics-related; I'm interested in software that uses programming languages in a new way.</p>
"
412943,51627,2009-01-05T12:18:09Z,4,Algorithm to keep a list of percentages to add up to 100%,"<p>(code examples are python)<br />
 Lets assume we have a list of percentages that add up to 100:  </p>

<pre><code>mylist = [2.0, 7.0, 12.0, 35.0, 21.0, 23.0]
</code></pre>

<p>Some values of mylist may be changed, others must stay fixed.<br />
 Lets assume the first 3 (2.0, 7.0, 12.0) must stay fixed and the last three (35.0, 21.0, 23.0) may be changed.  </p>

<pre><code>fix = mylist[:3]
vari = mylist[3:]
</code></pre>

<p>The goal is to add a new item to mylist, while sum(mylist) stays 100.0 and vari<br />
items keep their relations to each other. For that we need to substract a CERTAIN<br />
PERCENTAGE from each vari item. Example: lets assume we want to add 4.0 to mylist.<br />
Using an ugly aproximation loop I found out that i need to substract ca. 5.0634%<br />
of each vari item (CERTAIN PERCENTAGE = 5.0634):</p>

<pre><code>adjusted =[]
for number in vari:
    adjusted.append(number-(number*(5.0634/100.0)))
adjusted.extend(fix)
adjusted.append(4.0)
</code></pre>

<p>adjusted now contains my desired result.  </p>

<h1>My question is how to calculate CERTAIN PERCENTAGE ;.)</h1>
"
412951,51200,2009-01-05T12:19:45Z,9,How to implement property() with dynamic name (in python),"<p>I am programming a simulations for single neurons. Therefore I have to handle a lot of Parameters. Now the Idea is that I have two classes, one for a SingleParameter and a Collection of parameters. I use property() to access the parameter value easy and to make the code more readable. This works perfect for a sinlge parameter but I don't know how to implement it for the collection as I want to name the property in Collection after the SingleParameter. Here an example:</p>

<pre><code>class SingleParameter(object):
  def __init__(self, name, default_value=0, unit='not specified'):
    self.name = name
    self.default_value = default_value
    self.unit = unit
    self.set(default_value)
  def get(self):
    return self._v
  def set(self, value):
    self._v = value
  v = property(fget=get, fset=set, doc='value of parameter')

par1 = SingleParameter(name='par1', default_value=10, unit='mV')
par2 = SingleParameter(name='par2', default_value=20, unit='mA')

# par1 and par2 I can access perfectly via 'p1.v = ...'
# or get its value with 'p1.v'

class Collection(object):
  def __init__(self):
    self.dict = {}
  def __getitem__(self, name):
    return self.dict[name] # get the whole object
    # to get the value instead:
    # return self.dict[name].v
  def add(self, parameter):
    self.dict[parameter.name] = parameter
    # now comes the part that I don't know how to implement with property():
    # It shoule be something like
    # self.__dict__[parameter.name] = property(...) ?

col = Collection()
col.add(par1)
col.add(par2)
col['par1'] # gives the whole object

# Now here is what I would like to get:
# col.par1 -&gt; should result like col['par1'].v
# col.par1 = 5 -&gt; should result like col['par1'].v = 5
</code></pre>

<hr>

<p>Other questions that I put to understand property():</p>

<ul>
<li><a href=""http://stackoverflow.com/questions/428264"" title=""Why do managed attributes just work for class attributes and not for instance attributes in python?"">Why do managed attributes just work for class attributes and not for instance attributes in python?</a></li>
<li><a href=""http://stackoverflow.com/questions/432786/"" title=""setting class attributes with setattr()"">How can I assign a new class attribute via __dict__ in python?</a></li>
</ul>
"
413446,42371,2009-01-05T15:27:37Z,1,Django and units conversion,"<p>I need to store some values in the database, distance, weight etc. In my model, i have field that contains quantity of something and IntegerField whith choices option, that determines what this quantity means(length, time duration etc). Should i create model for units and physical quantity or should i use IntegerField that contains type of unit? </p>
"
414025,4883,2009-01-05T18:20:39Z,16,Is there a Python library than can simulate network traffic from different addresses,"<p>Is there a python library out there than can allow me to send UDP packets to a machine (sending to localhost is ok) from different source addresses and ports?  I remember that one existed, but can't find it anymore.</p>
"
414230,NA,2009-01-05T19:35:09Z,5,"python ""'NoneType' object has no attribute 'encode'""","<p>I wrote this tiny Python snippet that scrapes a feed and prints it out. When I run the code, something in the feed triggers the error message you see here as my question. Here's the complete console output on error:</p>

<pre><code>&gt; Traceback (most recent call last):  
&gt; File ""/home/vijay/ffour/ffour5.py"",
&gt; line 20, in &lt;module&gt;
&gt;     myfeed()   File ""/home/vijay/ffour/ffour5.py"", line
&gt; 15, in myfeed
&gt;     sys.stdout.write(entry[""title""]).encode('utf-8')
&gt; AttributeError: 'NoneType' object has
&gt; no attribute 'encode'
</code></pre>
"
414543,51799,2009-01-05T21:10:09Z,15,Django serialize to JSON,"<p>I have a Django model (schedule) with the class of entity, that is the parent of <code>Activity</code>, that is the parent of <code>Event</code>.</p>

<pre><code>class Entity(models.Model):
    &lt;...&gt;

class Activity(models.Model):
    &lt;...&gt;
    team_entity = models.ForeignKey(Entity)
    &lt;...&gt;   

class Event(models.Model):
    &lt;...&gt;
    activity = models.ForeignKey(Activity)
    &lt;...&gt;
</code></pre>

<p>How do I serialize and get both the child object and grand children as part of the JSON file?</p>
"
414679,22306,2009-01-05T22:05:15Z,16,Add class to Django label_tag() output,"<p>I need some way to add a class attribute to the output of the label_tag() method for a forms field. </p>

<p>I see that there is the ability to pass in an attrs dictionary and I have tested it in the shell and I can do something like:</p>

<pre><code>for field in form:
    print field.label_tag(attrs{'class':'Foo'})
</code></pre>

<p>I will see the class='Foo' in my output, but I don't see a way to add an attrs argument from the template - in fact, templates are designed specifically against that, no?</p>

<p>Is there a way in my form definition to define the class to be displayed in the label?</p>

<p>In the form, I can do the following to give the inputs a class</p>

<pre><code>self.fields['some_field'].widget.attrs['class'] = 'Foo'
</code></pre>

<p>I just need to have it output the class for the  as well.</p>
"
414952,12650,2009-01-05T23:46:02Z,24,SQLAlchemy DateTime timezone,"<p>SQLAlchemy's <code>DateTime</code> type allows for a <code>timezone=True</code> argument to save a non-naive datetime object to the datbase, and to return it as such. Is there any way to modify the timezone of the <code>tzinfo</code> that SQLAlchemy passes in so it could be, for instance, UTC? I realize that I could just use <code>default=datetime.datetime.utcnow</code>; however, this is a naive time that would happily accept someone passing in a naive localtime-based datetime, even if I used <code>timezone=True</code> with it, because it makes local or UTC time non-naive without having a base timezone to normailze it with. I have tried (using <a href=""http://pytz.sourceforge.net/"">pytz</a>) to make the datetime object non-naive, but when I save this to the db it comes back as naive.</p>

<p>Note how datetime.datetime.utcnow does not work with timezone=True so well:</p>

<pre><code>import sqlalchemy as sa
from sqlalchemy.sql import select
import datetime

metadata = sa.MetaData('postgres://user:pass@machine/db')

data_table = sa.Table('data', metadata,
    sa.Column('id',   sa.types.Integer, primary_key=True),
    sa.Column('date', sa.types.DateTime(timezone=True), default=datetime.datetime.utcnow)
)

metadata.create_all()

engine = metadata.bind
conn = engine.connect()
result = conn.execute(data_table.insert().values(id=1))

s = select([data_table])
result = conn.execute(s)
row = result.fetchone()
</code></pre>

<blockquote>
  <p>(1, datetime.datetime(2009, 1, 6, 0, 9, 36, 891887))</p>
</blockquote>

<pre><code>row[1].utcoffset()
</code></pre>

<blockquote>
  <p>datetime.timedelta(-1, 64800) # that's my localtime offset!!</p>
</blockquote>

<pre><code>datetime.datetime.now(tz=pytz.timezone(""US/Central""))
</code></pre>

<blockquote>
  <p>datetime.timedelta(-1, 64800)</p>
</blockquote>

<pre><code>datetime.datetime.now(tz=pytz.timezone(""UTC""))
</code></pre>

<blockquote>
  <p>datetime.timedelta(0) #UTC</p>
</blockquote>

<p>Even if I change it to explicitly use UTC:</p>

<p>...</p>

<pre><code>data_table = sa.Table('data', metadata,
    sa.Column('id',   sa.types.Integer, primary_key=True),
    sa.Column('date', sa.types.DateTime(timezone=True), default=datetime.datetime.now(tz=pytz.timezone('UTC')))
)

row[1].utcoffset()
</code></pre>

<p>...</p>

<blockquote>
  <p>datetime.timedelta(-1, 64800) # it did not use the timezone I explicitly added</p>
</blockquote>

<p>Or if I drop the timezone=True:</p>

<p>...</p>

<pre><code>data_table = sa.Table('data', metadata,
    sa.Column('id',   sa.types.Integer, primary_key=True),
    sa.Column('date', sa.types.DateTime(), default=datetime.datetime.now(tz=pytz.timezone('UTC')))
)

row[1].utcoffset() is None
</code></pre>

<p>...</p>

<blockquote>
  <p>True # it didn't even save a timezone to the db this time</p>
</blockquote>
"
415019,52302,2009-01-06T00:16:30Z,5,can cherrypy receive multipart/mixed POSTs out of the box?,"<p>We're receiving some POST data of xml + arbitrary binary files (like images and audio) from a device that only gives us multipart/mixed encoding.</p>

<p>I've setup a cherrypy upload/POST handler for our receiver end.  I've managed to allow it to do arbitrary number of parameters using multipart/form-data.  However when we try to send the multipart-mixed data, we're not getting any processing.</p>

<pre><code>@cherrypy.expose
def upload(self, *args,**kwargs):
    """"""upload adapted from cherrypy tutorials

    We use our variation of cgi.FieldStorage to parse the MIME
    encoded HTML form data containing the file.""""""

    print args   
    print kwargs

    cherrypy.response.timeout = 1300

    lcHDRS = {}
    for key, val in cherrypy.request.headers.iteritems():
        lcHDRS[key.lower()] = val
    incomingBytes = int(lcHDRS['content-length'])

    print cherrypy.request.rfile 

    #etc..etc...
</code></pre>

<p>So, when submitting multipart/form-data, args and kwargs are well defined.<br />
args are the form fields, kwargs=hash of vars and values.
When I submit multipart/mixed, args and kwargs are empty, and I just have cherrypy.request.rfile as the raw POST information.  </p>

<p>My question is, does cherrypy have a built in handler to handle multipart/mixed and chunked encoding for POST?  Or will I need to override the cherrypy.tools.process_request_body and roll my own decoder?</p>

<p>It seems like the builtin wsgi server with cherrypy handles this as part of the HTTP/1.1 spec, but I could not seem to find documentation in cherrypy in accessing this functionality.</p>

<p><hr /></p>

<p>...to clarify</p>

<p>I'm using latest version 3.1.1 or so of Cherrypy.</p>

<p>Making a default form just involves making parameters in the upload function.</p>

<p>For the multipart/form-data, I've been calling curl -F param1=@file1.jpg -F param2=sometext -F param3=@file3.wav <a href=""http://destination:port/upload"" rel=""nofollow"">http://destination:port/upload</a></p>

<p>In that example, I get:</p>

<pre><code>args = ['param1','param2','param3] 
kwargs = {'param1':CString&lt;&gt;, 'param2': 'sometext', 'param3':CString&lt;&gt;}
</code></pre>

<p>When trying to submit the multipart/mixed, I tried looking at the request.body, but kept on getting None for that, regardless of setting the body processing.</p>

<p>The input we're getting is coming in as this:</p>

<pre><code>user-agent:UNTRUSTED/1.0 Profile/MIDP-2.0 Configuration/CLDC-1.1
content-language:en-US
content-length:565719
mime-version:1.0
content-type:multipart/mixed; boundary='newdivider'
host:192.168.1.1:8180
transfer-encoding:chunked



--newdivider
Content-type: text/xml

&lt;?xml version='1.0' ?&gt;&lt;data&gt;&lt;Stuff&gt;....
etc...etc...

--newdivider
Content-type: image/jpeg
Content-ID: file://localhost/root1/photos/Garden.jpg
Content-transfer-encoding: binary

&lt;binary data&gt;
</code></pre>

<p>I've got a sneaking suspicion that the multipart/mixed is the problem that cherrypy is just giving me just the rfile. Our goal is to have cherrypy process the body into its parts with minimal processing on the receive side (ie, let cherrypy do its magic). If that requires us being tougher on the sending format to be a content-type that cherrypy likes, then so be it. What are the accepted formats? Is it only multipart/form-data?</p>
"
415407,2128,2009-01-06T04:01:41Z,3,Why does gethostbyaddr(gethostname()) return my IPv6 IP?,"<p>I'm working on making a simple server application with python, and I'm trying to get the IP to bind the listening socket to. An example I looked at uses this: </p>

<pre><code>HOST = gethostbyaddr(gethostname())
</code></pre>

<p>With a little more processing after this, it should give me just the host IP as a string. This should return the IPv4 address. But when I run this code, it returns my IPv6 address. Why does it do this and how can I get my IPv4 address?</p>

<p>If its relevant, I'm using windows vista and python 2.5</p>
"
415511,46646,2009-01-06T04:54:23Z,1153,How to get current time in Python,"<p>What is the module/method used to get current time?</p>
"
416315,NA,2009-01-06T12:22:10Z,2,"URLs: Binary Blob, Unicode or Encoded Unicode String?","<p>I wish to store URLs in a database (MySQL in this case) and process it in Python. Though the database and programming language are probably not this relevant to my question.</p>

<p>In my setup I receive unicode strings when  querying a text field in the database. But is a URL actually text? Is encoding from and decoding to unicode an operation that should be done to a URL? Or is it better to make the column in the database  a binary blob?</p>

<p>So, how do you handle this problem?</p>

<p>Clarification:
This question is not about urlencoding non-ASCII characters with the percent notation. It's about the distiction that unicode represents text and byte strings represent a way to encode this text into a sequence of bytes. In Python (prior to 3.0) this distinction is between the unicode and the str types. In MySQL it is TEXT to BLOBS. So the concepts seem to correspond between programming language and database. But what is the best way to handle URLs in this scheme?</p>
"
416406,44639,2009-01-06T12:54:57Z,0,Filtering away nearby points from a list,"<p>I <a href=""http://stackoverflow.com/questions/411837/finding-clusters-of-mass-in-a-matrix-bitmap#411855"">half-answered a question about finding clusters of mass in a bitmap</a>. I say half-answered because I left it in a condition where I had all the points in the bitmap sorted by mass and left it to the reader to filter the list removing points from the same cluster. </p>

<p>Then when thinking about that step I found that the solution didn't jump out at me like I thought it would. So now I'm asking you guys for help. We have a list of points with masses like so (a Python list of tuples, but you can represent it as you see fit in any language):</p>

<pre><code>[ (6, 2, 6.1580555555555554),
  (2, 1, 5.4861111111111107),
  (1, 1, 4.6736111111111107),
  (1, 4, 4.5938888888888885),
  (2, 0, 4.54),
  (1, 5, 4.4480555555555554),
  (4, 7, 4.4480555555555554),
  (5, 7, 4.4059637188208614),
  (4, 8, 4.3659637188208613),
  (1, 0, 4.3611111111111107),
  (5, 8, 4.3342191043083904),
  (5, 2, 4.119574829931973),
  ...
  (8, 8, 0.27611111111111108),
  (0, 8, 0.24138888888888888) ]
</code></pre>

<p>Each tuple is of the form:</p>

<pre><code>(x, y, mass)
</code></pre>

<p>Note that the list is sorted here. If your solution prefers to not have them sorted it's perfectly OK.</p>

<p>The challenge, <a href=""http://stackoverflow.com/questions/411837/finding-clusters-of-mass-in-a-matrix-bitmap"">if you recall</a>, is to find the main clusters of mass. The number of clusters is not known. But you know the dimensions of the bitmap. Sometimes several points within a cluster has more mass than the center of the next (in size) cluster. So what I want to do is go from the higher-mass points and remove points in the same cluster (points nearby).</p>

<p>When I tried this I ended up having to walk through parts of the list over and over again. I have a feeling I'm just stupid about it. How would you do it? Pseudo code or real code. Of course, if you can just take off where I left in that answer with Python code it's easier for me to experiment with it. </p>

<p>Next step is to figure out how many clusters there really are in the bitmap. I'm still struggling with defining that problem so I might return with a question about it.</p>

<p><strong>EDIT:</strong> I should clarify that I know that there's no ""correct"" answer to this question. And the name of the question is key. Phase one of the my clustering is done. <strong>Im in search of a fast, accurate-""enough"" method of filtering away nearby points.</strong> </p>

<p>Let me know if you see how I can make the question clearer.</p>
"
417158,43786,2009-01-06T16:17:01Z,1,Java Servlet Filter Equivalent in Ruby [on Rails] and PHP?,"<p>Not sure if the terminology is correct, but are there rough equivalents to Java Servlet Filters in Ruby and PHP ? Are they actual concrete <em>classes</em> ?</p>

<p>I assume there is also a number of common web app libraries/frameworks in Python. Is there an equivalent there ?</p>

<p>Thanks.</p>

<p><strong>=== ADDENDUM ===</strong></p>

<p>On the good advice of <a href=""http://stackoverflow.com/users/49993/kevin-davis"">Kevin Davis</a>, I just want to quickly elaborate on what Java Servlet Filters are. It is basically an HTTP request interceptor. A chain of filters can be configured between the raw receipt of the request and the final destination of the request. The request parameters (and cookies, headers etc. etc.) are passed to the first filter in the chain and each filter does something with them (or not) and then passes them up the chain (or not. eg. a caching filter may simply return the result, bypassing the rest of the chain and the endpoint).</p>

<p>One of the advantages is the ability to modify or enhance the web app without touching the original endpoint code.</p>

<p>Cheers.</p>
"
417159,46914,2009-01-06T16:17:06Z,3,Cross Platform SWF Playback with Python?,"<p>I'm looking for different solutions to playing back SWF files on Windows, OSX and Linux using Python.  Ideally I'd like to embed the player inside a wxPython frame/window.</p>

<p>One possibility I'm investigating is the Mozilla XPCOM framework since its used by FireFox to load the Flash plugin within the browser.</p>
"
417265,NA,2009-01-06T16:44:18Z,1,"What does ""|"" sign mean in a Django template?","<p>I often see something like that:
<code>something.property|escape</code>
<hr />
<code>something</code> is an object, <code>property</code> is it's string property. <code>escape</code> - i don't know :)
<br />
What does this mean? And what min python version it is used in?</p>

<p><br /></p>

<p>EDIT: The question was asked wrongly, it said ""What does | mean in Python"", so the bitwise or answers are correct, but irrelevant, please do not downvote them</p>
"
417396,5190,2009-01-06T17:18:20Z,7,What does the “|” sign mean in Python?,"<p><a href=""http://stackoverflow.com/questions/417265/what-does-sign-mean-in-django"">This question</a> originally asked (wrongly) what does ""|"" mean in Python, when the actual question was about Django. That question had a wonderful answer by Triptych I want to preserve. </p>
"
417584,46436,2009-01-06T18:14:01Z,0,How can I tell if an Expando subclass has a property defined?,"<p>I'm creating an app that I want to have an expandable set of properties (each a RatingProperty) I also want to validate that any dynamic properties are of the RatingProperty type. </p>

<p>In the Expando documentation it says:</p>

<blockquote>
  <p>Tip: If you want to validate a dynamic property value using a Property class, you can instantiate the Property class and call its validate() method on the value.  </p>
</blockquote>

<p>So if I want to validate a dynamic property I need to know what the class's non-dynamic properties are. How can I ask my class what it's defined properties are?</p>

<p>I've considered creating a class method that takes a string and returns true if that string is in a list of property names that I create and maintain, but it seems like a hack. I've searched the Google for tips, but haven't had any luck.</p>

<p>Thanks,
Pat</p>
"
417664,191808,2009-01-06T18:41:29Z,2,How can I use Numerical Python with Python 2.6,"<p>I'm forced to upgrade to Python 2.6 and am having issues using Numerical Python (<a href=""http://en.wikipedia.org/wiki/NumPy"" rel=""nofollow"">NumPy</a>) with Python 2.6 in Windows.  I'm getting the following error...</p>

<pre><code>Traceback (most recent call last):
  File ""&lt;pyshell#0&gt;"", line 1, in &lt;module&gt;
    from numpy.core.numeric import array,dot,all
  File ""C:\svn\svn_urbansim\UrbanSimDev\Builds\working\urbansim\Tools\Python26\lib\site-packages\numpy\__init__.py"", line 39, in &lt;module&gt;
    import core
  File ""C:\svn\svn_urbansim\UrbanSimDev\Builds\working\urbansim\Tools\Python26\lib\site-packages\numpy\core\__init__.py"", line 5, in &lt;module&gt;
    import multiarray
ImportError: Module use of python25.dll conflicts with this version of Python.
</code></pre>

<p>It appears that the existing module is trying to use the <code>python25.dll</code> file.  Is there any way I can tell it to use the <code>python26.dll</code> file instead without modifying the source code?</p>
"
417703,52142,2009-01-06T18:55:14Z,2,Python: C++-like stream input,"<p>Is there a pythonic way of reading - say - mixed integer and char input without reading the whole input at once and without worrying about linebreaks? For example I have a file with whitespace-separated data of which I only know that there are x integers, then y chars and then z more integers. I don't want to assume anything about linebreaks.</p>

<p>I mean something as mindless as the following in C++:</p>

<p>...</p>

<pre><code>int i, buf;
char cbuf;
vector&lt;int&gt; X, Z;
vector&lt;int&gt; Y;

for (i = 0; i &lt; x; i++) {
    cin &gt;&gt; buf;
    X.push_back(buf);
}

for (i = 0; i &lt; y; i++) {
    cin &gt;&gt; cbuf;
    Y.push_back(cbuf);
}

for (i = 0; i &lt; z; i++) {
    cin &gt;&gt; buf;
    Z.push_back(buf);
}
</code></pre>

<p>EDIT: i forgot to say that I'd like it to behave well under live input from console as well - i.e. there should be no need to press ctrl+d before getting tokens and the function should be able to return them as soon as a line has been entered. :)</p>

<p>Best regards,
Artur Gajowy</p>
"
417763,372664,2009-01-06T19:22:11Z,5,Process size in XP from Python,"<p>I have a python script that can approach the 2 GB process limit under Windows XP.  On a machine with 2 GB physical memory, that can pretty much lock up the machine, even if the Python script is running at below normal priority.</p>

<p>Is there a way in Python to find out my own process size?</p>

<p>Thanks,
Gerry</p>
"
418176,8014,2009-01-06T21:10:31Z,12,Why does Python's string.printable contains unprintable characters?,"<p>I have two String.printable mysteries in the one question.</p>

<p>First, in Python 2.6:</p>

<pre><code>&gt;&gt;&gt; string.printable
'0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!""#$%&amp;\'()*+,-./:;&lt;=&gt;?@[\\]^_`{|}~ \t\n\r\x0b\x0c'
</code></pre>

<p>Look at the end of the string, and you'll find '\x0b\x0c' sticking out like a sore-thumb. Why are they there? I am using a machine set to Australian settings, so there shouldn't be any accented characters or the like.</p>

<p>Next, try running this code:</p>

<pre><code>for x in string.printable: print x,
print
for x in string.printable: print x
</code></pre>

<p>The first line successfully prints all the characters separated by a space. The two odd characters turn out as the Male and Female symbols.</p>

<p>The second line successfully prints all the characters EXCEPT THE LAST separated by a line feed. The Male symbol prints; the female symbol is replaced with a missing character (a box).</p>

<p>I'm sure Python wasn't intended to be gender-biased, so what gives with the difference?</p>
"
418204,36131,2009-01-06T21:16:59Z,1,How to check that a path has a sticky bit in python?,"<p>How to check with python if a path has the sticky bit set?</p>
"
418497,46981,2009-01-06T22:47:14Z,19,How to convert XML to objects?,"<p>I need to load an XML file and put the contents into an object-oriented structure. I want to take this:</p>

<pre><code>&lt;main&gt;
    &lt;object1 attr=""name""&gt;content&lt;/object&gt;
&lt;/main&gt;
</code></pre>

<p>and turn it into something like this:</p>

<pre><code>main
main.object1 = ""content""
main.object1.attr = ""name""
</code></pre>

<p>It'll have a more complicated structure than that and I can't hard code the element names. The names need to be collected when parsing and used as the object properties.</p>

<p>Any thoughts on what would be the best way to go about this?</p>
"
418835,18658,2009-01-07T01:12:41Z,3,Are there any graph/plotting/anything-like-that libraries for Python 3.0?,"<p>As per the title. I am trying to create a simple scater plot, but haven't found any Python 3.0 libraries that can do it. Note, this isn't for a website, so the web ones are a bit useless.</p>
"
418915,20860,2009-01-07T01:59:07Z,12,Pythonic equivalent of unshift or redo?,"<p>I'm learning Python, and I have a situation where I want to consume items from an iterator.  The tricky part is that under certain conditions, I want to ""un-iterate.""  That is, put an item back onto the front of the iterator before I loop.</p>

<p>For example, suppose I'm picking apples from a tree.  My fruit basket can only hold 10kg before it needs to be emptied.  But I have to pick each apple before I can weigh it and determine if this apple would exceed the capacity of the basket.</p>

<p>In a language like Perl, I could <code>unshift()</code> the apple back onto the tree, and then let the loop expression re-pick the apple:</p>

<pre><code>while ($apple = shift(@tree)) {
  $wt = weight($apple);
  if ($wt + weight(@basket) &gt; 10) {
    send(@basket);
    @basket = ();
    unshift(@tree, $apple);
  } else {
    push(@basket, $element);
  }
}
</code></pre>

<p>Or else I can also use <code>redo</code>, which resumes processing at the top of block, without evaluating the loop expression.  So the same apple can be re-processed, after the basket has been emptied.</p>

<pre><code>while ($apple = shift(@tree)) {
  $wt = weight($apple);
  if ($wt + weight(@basket) &gt; 10) {
    send(@basket);
    @basket = ();
    redo;
  } else {
    push(@basket, $apple);
  }
}
</code></pre>

<p>What would be the most <strong>pythonic</strong> solution for this kind of problem?</p>
"
419010,41613,2009-01-07T02:39:56Z,4,How to raise an exception on the version number of a module,"<p>How can you raise an exception when you import a module that is less or greater than a given value for its __version__?</p>

<p>There are a lot of different ways you could do it, but I feel like there must be some really simple way that eludes me at the moment. In this case the version number is of the format x.x.x</p>
"
419145,51518,2009-01-07T03:58:18Z,10,Python Threads - Critical Section,"<p>What is the ""critical section"" of a thread (in Python)?</p>

<blockquote>
  <p>A thread enters the critical section
  by calling the acquire() method, which
  can either be blocking or
  non-blocking. A thread exits the
  critical section, by calling the
  release() method.</p>
</blockquote>

<p>- <a href=""http://linuxgazette.net/107/pai.html"">Understanding Threading in Python, Linux Gazette</a></p>

<p>Also, what is the purpose of a lock?</p>
"
419163,51518,2009-01-07T04:11:00Z,2184,"What does `if __name__ == ""__main__"":` do?","<p>What does the <code>if __name__ == ""__main__"":</code> do?</p>

<pre><code># Threading example
import time, thread

def myfunction(string, sleeptime, lock, *args):
    while 1:
        lock.acquire()
        time.sleep(sleeptime)
        lock.release()
        time.sleep(sleeptime)
if __name__ == ""__main__"":
    lock = thread.allocate_lock()
    thread.start_new_thread(myfunction, (""Thread #: 1"", 2, lock))
    thread.start_new_thread(myfunction, (""Thread #: 2"", 2, lock))
</code></pre>
"
419197,49445,2009-01-07T04:33:53Z,0,How do you query the set of Users in Google App Domain within your Google App Engine project?,"<p>If you have a Google App Engine project you can authenticate based on either a) anyone with a google account or b) a particular google app domain. Since you can connect these two entities I would assume there is some way to query the list of users that can be authenticated. The use case is outputting a roster of all members in an organization to a web page running on Google App Engine. Any thoughts?</p>
"
419235,50522,2009-01-07T04:53:21Z,67,Anyone know of a good Python based web crawler that I could use?,"<p>I'm half-tempted to write my own, but I don't really have enough time right now.  I've seen the Wikipedia list of <a href=""http://en.wikipedia.org/wiki/Web_crawler#Open-source_crawlers"" rel=""nofollow"">open source crawlers</a> but I'd prefer something written in Python.  I realize that I could probably just use one of the tools on the Wikipedia page and wrap it in Python.  I might end up doing that - if anyone has any advice about any of those tools, I'm open to hearing about them.  I've used Heritrix via its web interface and I found it to be quite cumbersome.  I definitely won't be using a browser API for my upcoming project.</p>

<p>Thanks in advance.  Also, this is my first SO question!</p>
"
419260,45620,2009-01-07T05:14:40Z,2,Grabbing text from a webpage,"<p>I would like to write a program that will find bus stop times and update my personal webpage accordingly.</p>

<p>If I were to do this manually I would </p>

<ol>
<li>Visit www.calgarytransit.com</li>
<li>Enter a stop number. ie) 9510</li>
<li>Click the button ""next bus""</li>
</ol>

<p>The results may look like the following:</p>

<blockquote>
  <p>10:16p    Route 154	 
  10:46p Route 154	
  11:32p    Route 154</p>
</blockquote>

<p>Once I've grabbed the time and routes then I will update my webpage accordingly. </p>

<p>I have no idea where to start. I know diddly squat about web programming but can write some C and Python. What are some topics/libraries I could look into?</p>
"
419334,46914,2009-01-07T05:55:55Z,11,How would a system tray application be accomplished on other platforms?,"<p>Windows has the ""system tray"" that houses the clock and alway-running services like MSN, Steam, etc.</p>

<p>I'd like to develop a wxPython tray application but I'm wondering how well this will port to other platforms.  What is the tray equivalent on each platform, and how much manual work would be required to support Windows, OSX and Linux (which shells in particular would be friendliest).</p>
"
419379,46646,2009-01-07T06:21:19Z,4,How to maintain lists and dictionaries between function calls in Python?,"<p>I have a function. Inside that I'm maintainfing a dictionary of values.
I want that dictionary to be maintained between different function calls</p>

<p>Suppose the dic is :</p>

<pre><code>a = {'a':1,'b':2,'c':3}
</code></pre>

<p>At first call,say,I changed a[a] to 100
Dict becomes <code>a = {'a':100,'b':2,'c':3}</code></p>

<p>At another call,i changed a[b] to 200
I want that dic to be <code>a = {'a':100,'b':200,'c':3}</code></p>

<p>But in my code a[a] doesn't remain 100.It changes to initial value 1.</p>

<p>I need an answer ASAP....I m already late...Please help me friends...</p>
"
419698,45211,2009-01-07T09:24:20Z,0,Automated Class timetable optimize crawler?,"<p><strong>Overall Plan</strong></p>

<p>Get my class information to automatically optimize and select my uni class timetable</p>

<p>Overall Algorithm</p>

<ol>
<li>Logon to the website using its
Enterprise Sign On Engine login</li>
<li>Find my current semester and its
related subjects (pre setup)</li>
<li>Navigate to the right page and get the data from each related
subject (lecture, practical and
workshop times)</li>
<li>Strip the data of useless
information</li>
<li>Rank the classes which are closer
to each other higher, the ones on
random days lower</li>
<li>Solve a best time table solution</li>
<li>Output me a detailed list of the
BEST CASE information</li>
<li>Output me a detailed list of the
possible class information (some
might be full for example)</li>
<li>Get the program to select the best
classes automatically</li>
<li>Keep checking to see if we can
achieve 7.</li>
</ol>

<p>6 in detail
Get all the classes, using the lectures as a focus point, would be highest ranked (only one per subject), and try to arrange the classes around that.</p>

<p><strong>Questions</strong></p>

<p>Can anyone supply me with links to something that might be similar to this hopefully written in python?
In regards to 6.: what data structure would you recommend to store this information in? A linked list where each object of uniclass?
Should i write all information to a text file?</p>

<p>I am thinking uniclass to be setup like the following
attributes:</p>

<ul>
<li>Subject</li>
<li>Rank</li>
<li>Time</li>
<li>Type</li>
<li>Teacher</li>
</ul>

<p>I am hardly experienced in Python and thought this would be a good learning project to try to accomplish. 
Thanks for any help and links provided to help get me started, <strong>open to edits to tag appropriately or what ever is necessary</strong> (not sure what this falls under other than programming and python?)</p>

<p>EDIT: can't really get the proper formatting i want for this SO post >&lt;</p>
"
419908,52393,2009-01-07T11:05:14Z,1,Getting selected value from drop down box in a html form without submit,"<p>How to get the text of selected item from a drop down box element in html forms? (using python)
How can I store the value to a variable, when I select one item from the drop down box using mouse? (ie. without using a submit button)</p>

<p>This is for a application which I am doing in app engine which only supports Python.</p>
"
420515,9774,2009-01-07T14:38:58Z,1,python install on leopard,"<p>I'll admit I'm completely dumbed by python install. Can someone help me on how to install module</p>

<p>I want to play with PyGame, PyOpenGL etc. So I install them, but I everytime I type ""import pygame"" error message shows up.</p>

<p>here's my environment so far.</p>

<p>In .bash_profile</p>

<pre><code>PATH=${PATH}:/System/Library/Frameworks/Python.framework/Versions/Current/bin
</code></pre>

<p>Using easy_install PyOpenGL placed this</p>

<pre><code>/Library/Python/2.5/site-packages/PyOpenGL-3.0.0b8-py2.5.egg
</code></pre>

<p>Locating pygame module</p>

<pre><code>dchong:~ danielchong$ locate pygame
/System/Library/Frameworks/Python.framework/Versions/2.5/Extras/lib/python/py2app/recipes/pygame.py
/System/Library/Frameworks/Python.framework/Versions/2.5/Extras/lib/python/py2app/recipes/pygame.pyc

dchong:~ danielchong$ locate pyopengl
/System/Library/Frameworks/Python.framework/Versions/2.5/Extras/lib/python/py2app/recipes/pyopengl.py
/System/Library/Frameworks/Python.framework/Versions/2.5/Extras/lib/python/py2app/recipes/pyopengl.pyc
</code></pre>

<p>when I run python </p>

<pre><code>Python 2.5.1 (r251:54863, Jan 17 2008, 19:35:17) 
[GCC 4.0.1 (Apple Inc. build 5465)] on darwin
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt; import pygame
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
ImportError: No module named pygame
</code></pre>
"
420792,7581,2009-01-07T15:46:10Z,23,Migrating from CPython to Jython,"<p>I'm considering moving my code (around 30K LOC) from CPython to Jython, so that I could have better integration with my java code. </p>

<p>Is there a checklist or a guide I should look at, to help my with the migration? Does anyone have experience with doing something similar?</p>

<p>From reading the <a href=""http://jython.sourceforge.net/docs/differences.html"">Jython site</a>, most of the problems seem too obscure to bother me.</p>

<p>I did notice that:</p>

<ul>
<li>thread safety is an issue</li>
<li>Unicode support seems to be quite different, which may be a problem for me</li>
<li>mysqldb doesn't work and needs to be replaced with zxJDBC</li>
</ul>

<p>Anything else?</p>

<p>Related question: <a href=""http://stackoverflow.com/questions/53543/what-are-some-strategies-to-write-python-code-that-works-in-cpython-jython-and-i"">What are some strategies to write python code that works in CPython, Jython and IronPython</a></p>
"
421050,52490,2009-01-07T16:43:28Z,6,python setup.py develop not updating easy_install.pth,"<p>According to <a href=""http://peak.telecommunity.com/DevCenter/setuptools#development-mode"" rel=""nofollow"">setuptools</a> documentation, setup.py develop is supposed to create the egg-link file and update easy_install.pth when installing into site-packages folder.  However, in my case it's only creating the egg-link file.  How does setuptools decide if it needs to update easy_install.pth?</p>

<p>Some more info:
It works when I have setuptools 0.6c7 installed as a folder under site-packages.  But when I use setuptools 0.6c9 installed as a zipped egg, it does not work.</p>
"
421178,30089,2009-01-07T17:13:32Z,24,How do I enable push-notification for IMAP (Gmail) using Python imaplib?,"<p>Is there a way to monitor a gmail account using imaplib without polling gmail each time I want to see if there is new mail. Or in other words, I just want the script to be notified of a new message so I can process it right away instead of any lag time between polls.</p>

<p>I see that the IMAP protocol supports this with the IDLE command, but I can't see anything documented with it in the imaplib docs, so any help with this would be great!</p>
"
421206,4872,2009-01-07T17:24:50Z,3,"In Python, how I do use subprocess instead of os.system?","<p>I have a Python script that calls an executable program with various arguments (in this example, it is 'sqlpubwiz.exe' which is the ""Microsoft SQL Server Database Publishing Wizard""):</p>

<pre><code>import os

sqlpubwiz = r'""C:\Program Files\Microsoft SQL Server\90\Tools\Publishing\sqlpubwiz.exe""'
server = 'myLocalServer'
database = 'myLocalDatabase'
connection_values = ['server=' + server, 'database=' + database, 'trusted_connection=true']
connection_string = ';'.join(connection_values)
dbms_version = '2000'
sqlscript_filename = 'CreateSchema.sql'

args = [
        sqlpubwiz,
        'script',
        '-C ' + connection_string,
        sqlscript_filename,
        '-schemaonly',
        '-targetserver ' + dbms_version,
        '-f',
]

cmd = ' '.join(args)
os.system(cmd)
</code></pre>

<p>This code runs properly but I have would like to get into the habit of using <a href=""http://docs.python.org/library/subprocess"" rel=""nofollow"">subprocess</a> since it is intended to replace os.system. However, after a few failed attempts, I can not seem to get it work properly. </p>

<p>How would the above code look like if it was converted to use subprocess in place of os.system?</p>
"
421223,42584,2009-01-07T17:30:21Z,5,Running unexported .dll functions with python,"<p>This may seem like a weird question, but I would like to know how I can run a function in a .dll from a memory 'signature'. I don't understand much about how it actually works, but I needed it badly. Its a way of running unexported functions from within a .dll, if you know the memory signature and adress of it.
For example, I have these:</p>

<pre><code>respawn_f ""_ZN9CCSPlayer12RoundRespawnEv""
respawn_sig ""568BF18B06FF90B80400008B86E80D00""
respawn_mask ""xxxxx?xxx??xxxx?""
</code></pre>

<p>And using some pretty nifty C++ code you can use this to run functions from within a .dll.</p>

<p>Here is a well explained article on it:
<a href=""http://wiki.alliedmods.net/Signature_Scanning"" rel=""nofollow"">http://wiki.alliedmods.net/Signature_Scanning</a></p>

<p>So, is it possible using Ctypes or any other way to do this inside python?</p>
"
421618,39061,2009-01-07T19:05:11Z,15,Python script to list users and groups,"<p>I'm attempting to code a script that outputs each user and their group on their own line like so:</p>

<pre><code>user1 group1  
user2 group1  
user3 group2  
...  
user10 group6
</code></pre>

<p>etc.  </p>

<p>I'm writing up a script in python for this but was wondering how SO might do this. Thanks!</p>

<p>p.s. Take a whack at it in any language but I'd prefer python.</p>

<p>EDIT: I'm working on Linux. Ubuntu 8.10 or CentOS =)</p>
"
422091,4960,2009-01-07T21:07:23Z,3,How can the user communicate with my python script using the shell?,"<p>How can I implement the following in python?</p>

<pre><code>#include &lt;iostream&gt;

int main() {
   std::string a; 
   std::cout &lt;&lt;  ""What is your name? "";
   std::cin &gt;&gt; a; 
   std::cout &lt;&lt; std::endl &lt;&lt; ""You said: "" &lt;&lt; a &lt;&lt; std::endl;
}
</code></pre>

<p>Output:</p>

<blockquote>
  <p>What is your name? Nick</p>
  
  <p>You said: Nick</p>
</blockquote>
"
422140,4869,2009-01-07T21:19:13Z,72,How to access the user profile in a Django template?,"<p>I'm storing some additional per-user information using the <a href=""http://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users""><code>AUTH_PROFILE_MODULE</code></a>.</p>

<p>We can access the user in a Django template using <code>{{ request.user }}</code> but how do we access fields in the profile since the profile is only accessible via a function <code>user.get_profile()</code> ?</p>

<p>Is it really required to explicitly pass the profile into the template every time?</p>
"
422247,52568,2009-01-07T21:48:13Z,3,Fixed-point arithmetic,"<p>Does anyone know of a library to do fixed point arithmetic in Python?
Or, does anyone has sample code?</p>
"
422555,14343,2009-01-07T23:05:58Z,2,Drawing with Webdings in PIL,"<p>I've got a Python program using PIL to render text, and it works great with all kinds of fonts.  But it only draws ""missing glyph"" rectangles with wingdings or webdings.</p>

<p>Here's a sample that tries to draw every unicode character:</p>

<pre><code># Run this with .ttf file path as an argument, and also an encoding if you like.
# It will make 16 PNGs with all the characters drawn.
import sys
import Image, ImageDraw, ImageFont

size = 20
per = 64

chars = 0x10000
perpage = per*per

fontfile = sys.argv[1]
encoding = sys.argv[2] if len(sys.argv) &gt; 2 else ''

font = ImageFont.truetype(sys.argv[1], size, encoding=encoding)

for page in range(0, chars//perpage):

    im = Image.new(""RGB"", (size*per+30, size*per+30), '#ffffc0')
    draw = ImageDraw.Draw(im)

    for line in range(0, per):
        for col in range(0, per):
            c = page*perpage + line*per + col
            draw.text((col*size, line*size), unichr(c), font=font, fill='black')

    im.save('allchars_%03d.png' % page)
</code></pre>

<p>With Arial.ttf (or even better, ArialUni.ttf), I get 16 interesting PNGs.  Searching for issues with PIL, some symbol fonts need to have their encoding specified.  If I use Symbol.ttf, I get all missing glyphs until I specify ""symb"" as the encoding.</p>

<p>How do I get wingdings to work?</p>
"
422717,36131,2009-01-08T00:09:01Z,1,"How to get the ""python setup.py"" submits informations on freshmeat?","<p>With this you can easily submit the information about your software on pypi:</p>

<pre><code>python setup.py register
</code></pre>

<p>But there is not a similar command for submitting information to freshmeat.
How could I write a distutils.Command that let me do the following.</p>

<pre><code>python setup.py freshmeat-submit
</code></pre>
"
422903,35335,2009-01-08T01:31:35Z,3,"What's the most pythonic way of access C libraries - for example, OpenSSL?","<p>I need to access the crypto functions of OpenSSL to encode Blowfish data in a CBC streams. I've googled and found some Blowfish libraries (hand written) and some OpenSSL wrappers (none of the seem complete.)</p>

<p>In the end, I need to access the certain OpenSSL functions, such as the full blowfish.h library of <a href=""http://www.openssl.org/docs/crypto/blowfish.html"" rel=""nofollow"">commands</a>. What's the pythonic/right way of accessing them? Using something like SWIG to allow Python/C bindings, or is there a better way?</p>

<p>Thanks!</p>
"
423379,46646,2009-01-08T05:45:02Z,1686,Using global variables in a function other than the one that created them,"<p>If I create a global variable in one function, how can I use that variable in another function?<br>
Do I need to store the global variable in a local variable of the function which needs its access?</p>
"
423404,49994,2009-01-08T06:00:48Z,9,long double returns and ctypes,"<p>i have a c function which returns a <code>long double</code>.  i'd like to call this function from python using ctypes, and it mostly works.  setting <code>so.func.restype = c_longdouble</code> does the trick -- except that python's float type is a <code>c_double</code> so if the returned value is larger than a double, but well within the bounds of a long double, python still gets inf as the return value.  i'm on a 64 bit processor and <code>sizeof(long double)</code> is 16.</p>

<p>any ideas on getting around this (e.g. using the decimal class or numpy) without modifying the c code?</p>
"
423437,34258,2009-01-08T06:28:41Z,3,How to save inline formset models in Django?,"<p>Formsets have a .save() method, and the <a href=""http://docs.djangoproject.com/en/dev/topics/forms/modelforms/#using-an-inline-formset-in-a-view"" rel=""nofollow"">documentation</a> says to save in views like this:</p>

<pre><code>if request.method == ""POST"":
    formset = BookInlineFormSet(request.POST, request.FILES, instance=author)
    if formset.is_valid():
        formset.save()
        # Do something.
else:
    formset = BookInlineFormSet(instance=author)
</code></pre>

<p>I am following this, and it works when the parent is created, but I'm getting an exception in Django when it is saving existing models. The parent actually is saved to the database and the exception occurs when saving related models.</p>

<pre><code>KeyError at /bcdetails/NewProds/1/

None

Request Method:     POST
Request URL:    http://rdif.local/bcdetails/NewProds/1/
Exception Type:     KeyError
Exception Value:    

None

Exception Location:     /usr/lib/python2.5/site-packages/django/forms/models.py in save_existing_objects, line 403
Python Executable:  /usr/bin/python
Python Version:     2.5.2
Python Path:    ['/usr/lib/python2.5/site-packages/paramiko-1.7.4-py2.5.egg', '/usr/lib/python2.5/site-packages/Fabric-0.0.9-py2.5.egg', '/usr/lib/python2.5', '/usr/lib/python2.5/plat-linux2', '/usr/lib/python2.5/lib-tk', '/usr/lib/python2.5/lib-dynload', '/usr/local/lib/python2.5/site-packages', '/usr/lib/python2.5/site-packages', '/usr/lib/python2.5/site-packages/Numeric', '/usr/lib/python2.5/site-packages/PIL', '/usr/lib/python2.5/site-packages/gst-0.10', '/var/lib/python-support/python2.5', '/usr/lib/python2.5/site-packages/gtk-2.0', '/var/lib/python-support/python2.5/gtk-2.0', '/usr/lib/site-python', '/home/www/rdif.com/test/']
Server time:    Wed, 7 Jan 2009 23:18:19 -0700
</code></pre>

<p>I spent some time in Django source but can't find anything there.  Do I need to iterate through each formset and only save models that have changed?</p>
"
423483,3355,2009-01-08T07:00:36Z,18,Python unittest with expensive setup,"<p>My test file is basically:</p>

<pre><code>class Test(unittest.TestCase):
    def testOk():
        pass

if __name__ == ""__main__"":
    expensiveSetup()
    try:
        unittest.main()
    finally:
        cleanUp()
</code></pre>

<p>However, I do wish to run my test through Netbeans testing tools, and to do that I need unittests that don't rely on an environment setup done in <strong>main</strong>. Looking at <a href=""http://stackoverflow.com/questions/402483/caching-result-of-setup-using-python-unittest"">http://stackoverflow.com/questions/402483/caching-result-of-setup-using-python-unittest</a> - it recommends using Nose. However, I don't think Netbeans supports this. I didn't find any information indicating that it does. Additionally, I am the only one here actually writing tests, so I don't want to introduce additional dependencies for the other 2 developers unless they are needed.</p>

<p>How can I do the setup and cleanup once for all the tests in my TestSuite?</p>

<p>The expensive setup here is creating some files with dummy data, as well as setting up and tearing down a simple xml-rpc server. I also have 2 test classes, one testing locally and one testing all methods over xml-rpc.</p>
"
425343,1925,2009-01-08T18:38:09Z,4,Python and different Operating Systems,"<p>I am about to start a personal project using python and I will be using it on both Linux(Fedora) and Windows(Vista), Although I might as well make it work on a mac while im at it. I have found an API for the GUI that will work on all 3. The reason I am asking is because I have always heard of small differences that are easily avoided if you know about them before starting. Does anyone have any tips or suggestions that fall along these lines?</p>
"
425604,15842,2009-01-08T19:46:10Z,15,Best Way To Determine if a Sequence is in another sequence in Python,"<p>This is a generalization of the ""string contains substring"" problem to (more) arbitrary types.</p>

<p>Given an sequence (such as a list or tuple), what's the best way of determining whether another sequence is inside it?   As a bonus, it should return the index of the element where the subsequence starts:</p>

<p>Example usage (Sequence in Sequence):</p>

<pre><code>&gt;&gt;&gt; seq_in_seq([5,6],  [4,'a',3,5,6])
3
&gt;&gt;&gt; seq_in_seq([5,7],  [4,'a',3,5,6])
-1 # or None, or whatever
</code></pre>

<p>So far, I just rely on brute force and it seems slow, ugly, and clumsy.</p>
"
425722,55366,2009-01-08T20:17:05Z,1,Drag button between panels in wxPython,"<p>Does anyone know of an example where it is shown how to drag a button from one panel to another in wxPython?</p>

<p>I have created a bitmap button in a panel, and I would like to be able to drag it to a different panel and drop I there. </p>

<p>I haven't found any examples using buttons, just text and files.</p>

<p>I am using the latest version of Python and wxPython.</p>
"
425990,4642,2009-01-08T21:16:01Z,50,Django on IronPython,"<p>I am interested in getting an install of Django running on IronPython, has anyone had any success getting this running with some level of success?  </p>

<p>If so can you please tell of your experiences, performance, suggest some tips, resources and gotchas?</p>
"
426294,35335,2009-01-08T22:30:01Z,2,How do I (successfully) decode a encoded password from command line openSSL?,"<p>Using PyCrypto (although I've tried this in ObjC with OpenSSL bindings as well) :</p>

<pre><code>from Crypto.Cipher import DES
import base64
obj=DES.new('abcdefgh', DES.MODE_ECB)
plain=""Guido van Rossum is a space alien.XXXXXX""
ciph=obj.encrypt(plain)
enc=base64.b64encode(ciph)
#print ciph
print enc
</code></pre>

<p>outputs a base64 encoded value of :</p>

<pre><code>ESzjTnGMRFnfVOJwQfqtyXOI8yzAatioyufiSdE1dx02McNkZ2IvBg==
</code></pre>

<p>If you were in the interpreter, ciph will give you</p>

<pre><code>'\x11,\xe3Nq\x8cDY\xdfT\xe2pA\xfa\xad\xc9s\x88\xf3,\xc0j\xd8\xa8\xca\xe7\xe2I\xd15w\x1d61\xc3dgb/\x06'
</code></pre>

<p>Easy enough. I should be able to pipe this output to OpenSSL and decode it : </p>

<p>I test to make sure that the b64 decode works - </p>

<pre><code>python enctest.py | openssl enc -base64 -d
+ python enctest.py
+ openssl enc -base64 -d
,?Nq?DY?T?pA???s??,?jب???I?5w61?dgb/
</code></pre>

<p>Not pretty, but you can see that it got decoded fine, ""dgb"" and ""Nq"" are still there.</p>

<p>But go for the full thing :</p>

<pre><code>python enctest.py | openssl enc -base64 -d | openssl enc -nosalt -des-ecb -d -pass pass:abcdefgh
+ python enctest.py
+ openssl enc -nosalt -des-ecb -d -pass pass:abcdefgh
+ openssl enc -base64 -d
bad decrypt
15621:error:06065064:digital envelope routines:EVP_DecryptFinal_ex:bad decrypt:evp_enc.c:461:
j?7????vc]???LE?m³??q?
</code></pre>

<p>What am I doing wrong? I've tried using -k abcdefgh -iv 0000000000000000 or typing in the password interactively - same problem.</p>
"
426298,NA,2009-01-08T22:32:07Z,1,How to use the HTTPPasswordMgrWithDefaultRealm() in Python,"<p>I need to write some python ftp code that uses a ftp proxy. The proxy doesn't require authentication but the ftp server I am connecting to does. I have the following code but I am getting a ""I/O error(ftp error): 501 USER format: proxy-user:auth-method@destination. Closing connection."" error. My code is:</p>

<pre><code>import urllib2

proxies = {'ftp':'ftp://proxy_server:21'}
ftp_server = ' ftp.somecompany.com '
ftp_port='21'
username = 'aaaa'
password = 'secretPW'

password_mgr = urllib2.HTTPPasswordMgrWithDefaultRealm( )
top_level_url = ftp_server
password_mgr.add_password(None , top_level_url, username, password)

proxy_support = urllib2.ProxyHandler(proxies )
handler = urllib2.HTTPBasicAuthHandler(password_mgr )
opener = urllib2.build_opener(proxy_support )
opener = urllib2.build_opener(handler )
a_url = 'ftp://' + ftp_server + ':' + ftp_port + '/'
print a_url

try:
  data = opener.open(a_url )
  print data
except IOError, (errno, strerror):
  print ""I/O error(%s): %s"" % (errno, strerror)
</code></pre>

<p>I would be grateful for any assistance I can get. </p>
"
426500,4766,2009-01-08T23:37:31Z,14,"How do I mock the Python method OptionParser.error(), which does a sys.exit()?","<p>I'm trying to unit test some code that looks like this:</p>

<pre><code>def main():
    parser = optparse.OptionParser(description='This tool is cool', prog='cool-tool')
    parser.add_option('--foo', action='store', help='The foo option is self-explanatory')
    options, arguments = parser.parse_args()
    if not options.foo:
        parser.error('--foo option is required')
    print ""Your foo is %s."" % options.foo
    return 0

if __name__ == '__main__':
   sys.exit(main())
</code></pre>

<p>With code that looks like this:</p>

<pre><code>@patch('optparse.OptionParser')
def test_main_with_missing_p4clientsdir_option(self, mock_optionparser):
    #
    # setup
    #
    optionparser_mock = Mock()
    mock_optionparser.return_value = optionparser_mock
    options_stub = Mock()
    options_stub.foo = None
    optionparser_mock.parse_args.return_value = (options_stub, sentinel.arguments)
    def parser_error_mock(message):
        self.assertEquals(message, '--foo option is required')
        sys.exit(2)
    optionparser_mock.error = parser_error_mock

    #
    # exercise &amp; verify
    #
    self.assertEquals(sut.main(), 2)
</code></pre>

<p>I'm using <a href=""http://www.voidspace.org.uk/python/mock.html"">Michael Foord's Mock</a>, and nose to run the tests.</p>

<p>When I run the test, I get:</p>

<pre><code>  File ""/Users/dspitzer/Programming/Python/test-optparse-error/tests/sut_tests.py"", line 27, in parser_error_mock
    sys.exit(2)
SystemExit: 2

----------------------------------------------------------------------
Ran 1 test in 0.012s

FAILED (errors=1)
</code></pre>

<p>The problem is that OptionParser.error does a sys.exit(2), and so main() naturally relies on that.  But nose or unittest detects the (expected) sys.exit(2) and fails the test.</p>

<p>I can make the test pass by adding ""return 2"" under the parser.error() call in main() and removing the sys.exit() call from parser_error_mock(), but I find it distasteful to modify the code under test to allow a test to pass.  Is there a better solution?</p>

<p><strong>Update</strong>: <a href=""http://stackoverflow.com/users/3002/df"">df</a>'s answer works, although the correct call is ""self.assertRaises(SystemExit, sut.main)"".</p>

<p>Which means the test passes whatever the number is in the sys.exit() in parser_error_mock(). Is there any way to test for the exit code?</p>

<p>BTW, the test is more robust if I add:</p>

<pre><code>self.assertEquals(optionparser_mock.method_calls, [('add_option', ('--foo',), {'action': 'store', 'help': 'The foo option is self-explanatory'}), ('parse_args', (), {})])
</code></pre>

<p>at the end.</p>

<p><strong>Update 2</strong>: I can test for the exit code by replacing ""self.assertRaises(SystemExit, sut.main)"" with:</p>

<pre><code>try:
    sut.main()
except SystemExit, e:
    self.assertEquals(type(e), type(SystemExit()))
    self.assertEquals(e.code, 2)
except Exception, e:
    self.fail('unexpected exception: %s' % e)
else:
    self.fail('SystemExit exception expected')
</code></pre>
"
426607,42303,2009-01-09T00:16:24Z,8,PyObjc vs RubyCocoa for Mac development: Which is more mature?,"<p>I've been wanting  to have a play with either Ruby or Python while at the same time I've been wanting to do a bit of Cocoa programming.</p>

<p>So I thought the best way to achieve both these goals is to develop something using either a Ruby or Python to Objective-C bridge (PyObjc or RubyCocoa).</p>

<p>I know that ideally to get the best learning experience I would learn each techonology independently but I don't have the time. :)</p>

<p>So my question is which is a more mature platform, PyObc or RubyCocoa, main things I am looking for:</p>

<ol>
<li>Documentation of API</li>
<li>Tutorials</li>
<li>Tools</li>
<li>Supportive Community</li>
<li>Completness of Cocoa API avaialble through the bridge </li>
</ol>

<p>Regarding point 5 I don't expect that the entire Cocoa API will be availble through either bridge but I need to have enough Cocoa APIs available to develop a functioning application.</p>
"
426820,9440,2009-01-09T02:09:04Z,6,What is the easiest way to export data from a live google app engine application?,"<p>I'm especially interested in solutions with source code available (django independency is a plus, but I'm willing to hack my way through)</p>
"
427037,8482,2009-01-09T04:06:23Z,1,Scripting LMMS from Python,"<p>Recently I <a href=""http://stackoverflow.com/questions/267628/scripting-fruityloops-or-propellerheads-reason-from-vb-or-python"">asked</a> about scripting FruityLoops or Reason from Python, which didn't turn up much.</p>

<p>Today I found <a href=""http://lmms.sourceforge.net/"" rel=""nofollow"">LMMS</a>, a free-software FruityLoops clone. So, similarly. Has anyone tried scripting this from Python (or similar)? Is there an API or wrapper for accessing its resources from outside?</p>

<p>If not, what would be the right approach to try writing one?</p>
"
427095,53195,2009-01-09T04:46:37Z,4,Does anyone know of a Python equivalent of FMPP?,"<p>Does anyone know of a Python equivalent for <a href=""http://fmpp.sourceforge.net/"" rel=""nofollow"">FMPP</a> the text file preprocessor?</p>

<p>Follow up: I am reading the docs and looking at the examples for the suggestions given. Just to expand. My usage of FMPP is to read in a data file (csv) and use multiple templates depending on that data to create multi page reports in html all linked to a main index.</p>
"
427102,24946,2009-01-09T04:52:26Z,273,"What is a ""slug"" in Django?","<p>When I read Django code I often see in models what is called a ""slug"". I am not quite sure what this is, but I do know it has something to do with URLs. How and when is this slug-thing supposed to be used? </p>

<p>(I have read its definition in <a href=""http://docs.djangoproject.com/en/dev/glossary/"">this glossary</a>.)</p>
"
427152,46646,2009-01-09T05:21:49Z,-1,How do I timestamp simultaneous function calls in Python?,"<p>I have a read function in a module.</p>

<p>If I perform that function simultaneously I need to timestamp it.</p>

<p>How do I do this?</p>
"
427400,209,2009-01-09T08:33:34Z,5,Unit testing and mocking email sender in Python with Google AppEngine,"<p>I'm a newbie to python and the app engine.</p>

<p>I have this code that sends an email based on request params after some auth logic. in my Unit tests (i'm using <a href=""http://code.google.com/p/gaeunit/"" rel=""nofollow"">GAEUnit</a>), how do I confirm an email with specific contents were sent? - i.e. how do I mock the emailer with a fake emailer to verify send was called?</p>

<pre><code>class EmailHandler(webapp.RequestHandler):
 def bad_input(self):
  self.response.set_status(400)
  self.response.headers['Content-Type'] = 'text/plain'
  self.response.out.write(""&lt;html&gt;&lt;body&gt;bad input &lt;/body&gt;&lt;/html&gt;"")

 def get(self):
  to_addr = self.request.get(""to"")
  subj = self.request.get(""subject"")
  msg = self.request.get(""body"")
  if not mail.is_email_valid(to_addr):
    # Return an error message...
    #   self.bad_input()
    pass

  # authenticate here

  message = mail.EmailMessage()
  message.sender = ""my.company@gmail.com""
  message.to = to_addr
  message.subject = subj
  message.body = msg
  message.send()
  self.response.headers['Content-Type'] = 'text/plain'
  self.response.out.write(""&lt;html&gt;&lt;body&gt;success!&lt;/body&gt;&lt;/html&gt;"")
</code></pre>

<p>And the unit tests,</p>

<pre><code>import unittest
from webtest import TestApp
from google.appengine.ext import webapp
from email import EmailHandler

class SendingEmails(unittest.TestCase):

  def setUp(self):
    self.application = webapp.WSGIApplication([('/', EmailHandler)], debug=True)

  def test_success(self):
    app = TestApp(self.application)
    response = app.get('http://localhost:8080/send?to=vijay.santhanam@gmail.com&amp;body=blah_blah_blah&amp;subject=mySubject')
    self.assertEqual('200 OK', response.status)
    self.assertTrue('success' in response)
    # somehow, assert email was sent
</code></pre>
"
427453,NA,2009-01-09T09:02:37Z,127,How can I get the source code of a Python function?,"<p>Suppose I have a Python function as defined below:</p>

<pre><code>def foo(arg1,arg2):
    #do something with args
    a = arg1 + arg2
    return a
</code></pre>

<p>I can get the name of the function using <code>foo.func_name</code>. How can I programmatically get its source code, as I typed above?</p>
"
428149,42371,2009-01-09T14:06:13Z,10,Ordered lists in django,"<p>i have very simple problem. I need to create model, that represent element of ordered list. This model can be implemented like this:</p>

<pre><code>class Item(models.Model):
    data = models.TextField()
    order = models.IntegerField()
</code></pre>

<p>or like this:</p>

<pre><code>class Item(models.Model):
    data = models.TextField()
    next = models.ForeignKey('self')
</code></pre>

<p>What way is preferred? What drawbacks have each solution?</p>
"
428264,51200,2009-01-09T14:38:13Z,2,Why do managed attributes just work for class attributes and not for instance attributes in python?,"<p>To illustrate the question check the following code:</p>

<pre><code>class MyDescriptor(object):
  def __get__(self, obj, type=None):
    print ""get"", self, obj, type
    return self._v
  def __set__(self, obj, value):
    self._v = value
    print ""set"", self, obj, value
    return None

class SomeClass1(object):
  m = MyDescriptor()

class SomeClass2(object):
  def __init__(self):
    self.m = MyDescriptor()

x1 = SomeClass1()
x2 = SomeClass2()

x1.m = 1000
# -&gt;  set &lt;__main__.MyDescriptor object at 0xb787c7ec&gt; &lt;__main__.SomeClass1 object at 0xb787cc8c&gt; 10000
x2.m = 1000 # I guess that this overwrites the function. But why?
# -&gt;
print x1.m
# -&gt; get &lt;__main__.MyDescriptor object at 0xb787c7ec&gt; &lt;__main__.SomeClass1 object at 0xb787cc8c&gt; &lt;class '__main__.SomeClass1'&gt; 10000
print x2.m
# -&gt; 10000
</code></pre>

<ol>
<li>Why doesn't <strong>x2.m = 1000</strong> not call the <strong>__set__</strong>-function? It seems that this overwrites the function. But why?</li>
<li>Where is <strong>_v</strong> in x1? It is not in <strong>x1._v</strong></li>
</ol>
"
428308,27474,2009-01-09T14:46:36Z,1,How to programmatically change urls of images in word documents,"<p>I have a set of word documents that contains a lot of non-embedded images in them. The url that the images point to no longer exist. I would like to programmatically change the domain name of the url to something else. How can I go about doing this in Java or Python ?</p>
"
428704,37986,2009-01-09T16:19:11Z,2,Measure load time for python cgi script?,"<p>I use python cgi for our intranet application.</p>

<p>When I measure time, the script takes 4s to finish. But after that, it still takes another 11s to show the screen in the browser. 
The screen is build with tables (size: 10 KB, 91 KB uncompressed) and has a large css file (5 KB, 58 KB uncompressed).</p>

<p>I used YSlow and did as much optimization as suggested. Gzipping etc. 
Firebug Net says: 11s for the file.</p>

<p>How do I measure where these last 11 seconds are needed for?
Is it just the size of the HTML, or the table structure?
Anyone more ideas for tweaking?</p>
"
428895,30862,2009-01-09T17:11:15Z,1,How can I get the created date of a file on the web (with Python)?,"<p>I have a python application that relies on a file that is downloaded by a client from a website.</p>

<p>The website is not under my control and has no API to check for a ""latest version"" of the file.</p>

<p>Is there a simple way to access the file (in python) via a URL and check it's date (or size) without having to download it to the clients machine each time?</p>

<p><strong>update:</strong> Thanks to those who mentioned the""last-modified"" date.  This is the correct parameter to look at.</p>

<p>I guess I didn't state the question well enough.  How do I do this from a python script?  I want to application to check the file and then download it if (last-modified date &lt; current file date).</p>
"
429162,338,2009-01-09T18:29:48Z,3,How to process a YAML stream in Python,"<p>I have a command line app the continuously outputs YAML data in the form:</p>

<pre>
- col0: datum0
  col1: datum1
  col2: datum2
- col0: datum0
  col1: datum1
  col2: datum2
...
</pre>

<p>It does this for all of eternity. I would like to write a Python script that continuously reads each of these records.</p>

<p>The PyYAML library seems best at taking fully loaded strings and interpreting those as a complete YAML document. Is there a way to put PyYAML into a ""streaming"" mode?</p>

<p>Or is my only option to chunk the data myself and feed it bit by bit into PyYAML?</p>
"
429164,4960,2009-01-09T18:30:09Z,3,Can I use urllib to submit a SOAP request?,"<p>I have a SOAP request that is known to work using a tool like, say, SoapUI, but I am trying to get it to work using urllib.</p>

<p>This is what I have tried so far and it did not work:</p>

<pre><code>import urllib
f = """".join(open(""ws_request_that_works_in_soapui"", ""r"").readlines())
urllib.urlopen('http://url.com/to/Router?wsdl', f)
</code></pre>

<p>I haven't been able to find the spec on how the document should be posted to the SOAP Server.</p>

<p>urllib is not a necessary requirement.</p>
"
429414,53483,2009-01-09T19:42:32Z,9,what's the pythonic way to count the occurrence of an element in a list?,"<p>this is what I did. is there a better way in python?</p>

<pre>
for k in a_list:   
  if kvMap.has_key(k):
    kvMap[k]=kvMap[k]+1   
  else:
    kvMap[k]=1
</pre>

<p>Thanks</p>
"
429437,39339,2009-01-09T19:47:57Z,1,extracting stream from pdf in python,"<p>How can I extract the part of this stream (the one named BLABLABLA) from the pdf file which contains it??</p>

<pre><code>&lt;&lt;/Contents 583 0 R/CropBox[0 0 595.22 842]/MediaBox[0 0 595.22 842]/Parent 29 0  /Resources&lt;&lt;/ColorSpace&lt;&lt;/CS0 563 0 R&gt;&gt;/ExtGState&lt;&lt;/GS0 568 0 R&gt;&gt;/Font&lt;&lt;/TT0 559 0 R/TT1 560 0 R/TT2 561 0 R/TT3 562 0 R&gt;&gt;/ProcSet[/PDF/Text/ImageC]/Properties&lt;&lt;/MC0&lt;&lt;/BLABLABLA 584 0 R&gt;&gt;/MC1&lt;&lt;/SubKey 582 0 R&gt;&gt;&gt;&gt;/XObject&lt;&lt;/Im0 578 0 R&gt;&gt;&gt;&gt;/Rotate 0/StructParents 0/Type/Page&gt;&gt;
</code></pre>

<p>Or, in other worlds, how can I extract a subkey from a pdf stream?</p>

<p>I would like to use some python's library (like pyPdf or ReportLab), but even some C/C++ lib should go well for me.</p>

<p>Can anyone help me?</p>
"
429443,42633,2009-01-09T19:49:53Z,1,Syncing Django users with Google Apps without monkeypatching,"<p>I am writing a Django app, and I would like an account to be created on our Google Apps hosted email using the Provisioning API whenever an account is created locally.</p>

<p>I would solely use signals, but since I would like the passwords to be synchronized across sites, I have monkeypatched <code>User.objects.create_user</code> and <code>User.set_password</code> using wrappers to create Google accounts and update passwords respectively.</p>

<p>Monkeypatching seems to be frowned upon, so I would to know, is there a better way to accomplish this?</p>
"
429648,49808,2009-01-09T20:41:12Z,3,How to do pretty OSD in Python,"<p>Is there a library to do pretty on screen display with Python (mainly on Linux but preferably available on other OS too) ? I know there is python-osd but it uses <a href=""http://sourceforge.net/projects/libxosd"" rel=""nofollow"">libxosd</a> which looks quite old. I would not call it <em>pretty</em>.</p>

<p>Maybe a Python binding for <a href=""http://cia.vc/stats/project/libaosd"" rel=""nofollow"">libaosd</a>. But I did not find any.</p>
"
430047,1244013,2009-01-09T22:47:16Z,3,Regular expression: replace the suffix of a string ending in '.js' but not 'min.js',"<p>Assume infile is a variable holding the name of an input file, and similarly outfile for output file.  If infile ends in <strong>.js</strong>, I'd like to replace with <strong>.min.js</strong> and that's easy enough (I think).</p>

<p><strong>outfile = re.sub(r'\b.js$', '.min.js', infile)</strong></p>

<p>But my question is if infile ends in <strong>.min.js</strong>, then I do not want the substitution to take place.  (Otherwise, I'll end up with <strong>.min.min.js</strong>)  How can I accomplish this by using regular expression?</p>

<p>PS: This is not homework.  If you're curious what this is for: this is for a small python script to do mass compress of JavaScript files in a directory.</p>
"
430079,7029,2009-01-09T23:02:16Z,17,How to split strings into text and number?,"<p>I'd like to split strings like these</p>

<p>'foofo21'
'bar432'
'foobar12345'</p>

<p>into</p>

<p>['foofo', '21']
['bar', '432']
['foobar', '12345']</p>

<p>Does somebody know an easy and simple way to do this in python?</p>
"
430226,NA,2009-01-10T00:10:56Z,4,"Best way to poll a web service (eg, for a twitter app)","<p>I need to poll a web service, in this case twitter's API, and I'm wondering what the conventional wisdom is on this topic. I'm not sure whether this is important, but I've always found feedback useful in the past.</p>

<p>A couple scenarios I've come up with:</p>

<ol>
<li><p>The querying process starts every X seconds, eg a cron job runs a python script</p></li>
<li><p>A process continually loops and queries at each iteration, eg ... well, here is where I enter unfamiliar territory. Do I just run a python script that doesn't end?</p></li>
</ol>

<p>Thanks for your advice.</p>

<p>ps - regarding the particulars of twitter: I know that it sends emails for following and direct messages, but sometimes one might want the flexibility of parsing @replies. In those cases, I believe polling is as good as it gets.</p>

<p>pps - twitter limits bots to 100 requests per 60 minutes. I don't know if this also limits web scraping or rss feed reading. Anyone know how easy or hard it is to be whitelisted?</p>

<p>Thanks again.</p>
"
430379,15890,2009-01-10T02:00:31Z,0,Draw rounded corners on photo with PIL,"<p>My site is full of rounded corners on every box and picture, except for the thumbnails of user uploaded photos.</p>

<p>How can I use the Python Imaging Library to 'draw' white or transparent rounded corners onto each thumbnail?</p>
"
430759,49701,2009-01-10T08:45:09Z,9,Regex for managing escaped characters for items like string literals,"<p>I would like to be able to match a string literal with the option of escaped quotations.
For instance, I'd like to be able to search ""this is a 'test with escaped\' values' ok"" and have it properly recognize the backslash as an escape character. I've tried solutions like the following:</p>

<pre><code>import re
regexc = re.compile(r""\'(.*?)(?&lt;!\\)\'"")
match = regexc.search(r"""""" Example: 'Foo \' Bar'  End. """""")
print match.groups() 
# I want (""Foo \' Bar"") to be printed above
</code></pre>

<p>After looking at this, there is a simple problem that the escape character being used, ""<code>\</code>"", can't be escaped itself. I can't figure out how to do that. I wanted a solution like the following, but negative lookbehind assertions need to be fixed length:</p>

<pre><code># ...
re.compile(r""\'(.*?)(?&lt;!\\(\\\\)*)\'"")
# ...
</code></pre>

<p>Any regex gurus able to tackle this problem? Thanks.</p>
"
430966,51197,2009-01-10T13:45:28Z,7,Regex for links in html text,"<p>I hope this question is not a RTFM one.
I am trying to write a Python script that extracts links from a standard HTML webpage (the <code>&lt;link href...</code> tags).
I have searched the web for matching regexen and found many different patterns. Is there any agreed, standard regex to match links?</p>

<p>Adam</p>

<p><strong>UPDATE:</strong>
I am actually looking for two different answers:  </p>

<ol>
<li>What's the library solution for parsing HTML links. <a href=""http://www.crummy.com/software/BeautifulSoup/"" rel=""nofollow"">Beautiful Soup</a> seems to be a good solution (thanks, <code>Igal Serban</code> and <code>cletus</code>!)   </li>
<li>Can a link be defined using a regex?</li>
</ol>
"
431205,1615,2009-01-10T16:06:48Z,27,How can I programatically change the background in Mac OS X?,"<p>How would I go about programatically changing the desktop background in Mac OS X?  I'd like to use python, but I'm interested in any way possible.  Could I hook up to Terminal and call a certain command?</p>
"
431432,18909,2009-01-10T17:56:27Z,6,Restarting a Python Interpreter Quietly,"<p>I have a python interpreter embedded inside an application. The application takes a long time to start up and I have no ability to restart the interpreter without restarting the whole application. What I would like to do is to essentially save the state of the interpreter and return to that state easily.</p>

<p>I started by storing the names of all modules in sys.modules that the python interpreter started with and then deleting all new modules from sys.modules when requested. This appears to make the interpreter prepared to re-import the same modules even though it has already imported them before. However, this doesn't seem to work in all situations, such as using singleton classes and static methods, etc.</p>

<p>I'd rather not embed another interpreter inside this interpreter if it can be avoided, as the ease of being able to use the applications API will be lost (as well as including a slight speed hit I imagine).</p>

<p>So, does anyone know of a way I could store the interpreter's state and then return to this so that it can cope with all situations?</p>

<p>Thanks,</p>

<p>Dan</p>
"
431684,28835,2009-01-10T20:28:16Z,343,"How do I ""cd"" in Python?","<p><code>cd</code> as in the shell command to change the working directory.</p>

<p>How do I change the current working directory in Python?</p>
"
431752,41718,2009-01-10T21:04:49Z,27,Python csv.reader: How do I return to the top of the file?,"<p>When I'm moving through a file with a csv.reader, how do I return to the top of the file.   If I were doing it with a normal file I could just do something like ""file.seek(0)"".  Is there anything like that for the csv module?</p>

<p>Thanks ahead of time ;)</p>
"
431866,42974,2009-01-10T22:12:49Z,112,Ignore python multiple return value,"<p>Say I have a Python function that returns multiple values in a tuple:</p>

<pre><code>def func():
    return 1, 2
</code></pre>

<p>Is there a nice way to ignore one of the results rather than just assigning to a temporary variable? Say if I was only interested in the first value, is there a better way than this:</p>

<pre><code>x, temp = func()
</code></pre>
"
431944,41718,2009-01-10T23:15:59Z,6,Python: unpack to unknown number of variables?,"<p>How could I unpack a tuple of unknown to, say, a list?</p>

<p>I have a number of columns of data and they get split up into a tuple by some function.  I want to unpack this tuple to variables but I do not know how many columns I will have.  Is there any way to dynamically unpack it to as many variables as I need?</p>

<p>Thanks for your help :)</p>
"
431996,51518,2009-01-10T23:57:46Z,1,Programming Design Help - How to Structure a Sudoku Solver program?,"<p>I'm trying to create a sudoku solver program in Java (maybe Python).
I'm just wondering how I should go about structuring this...</p>

<p>Do I create a class and make each box a object of that class (9x9=81 objects)? If yes, how do I control all the objects - in other words, how do I make them all call a certain method in the class?</p>

<p>Do I just create functions to calculate and just control all the numbers in there with something like an multi-D array?</p>

<p>And actually, even if I could just create multiple functions, how would I control all the objects if I were to make each box an object?</p>

<p>Thanks.</p>
"
432080,1384652,2009-01-11T01:06:05Z,1,3D Polygons in Python,"<p>As far as I am aware there is no inbuilt polygon functionality for Python. I want to create a 3D map and figured that polygons would be the best way to go about it.</p>

<p>Not wanting to reinvent the wheel I did some googling and found that there's a lot of Python stuff out there, but I couldn't find what I wanted. Thus before I reinvent the wheel (or invent it a whole), does anybody know of a Polygon system for Python?</p>

<p>Note that it does need to be 3D (I found quite a few 2D ones). Note also that I am not interested in the displaying of them but in storing them and the datastructure within Python.</p>

<p>Thanks</p>
"
432112,41718,2009-01-11T01:21:39Z,190,Is there a Numpy function to return the first index of something in an array?,"<p>I know there is a method for python list to return the first index of something</p>

<pre><code>l = list(1,2,3)
l.index(2)
&gt;&gt;&gt;  1
</code></pre>

<p>Is there something like that for numpy arrays?</p>
"
432115,53795,2009-01-11T01:23:55Z,1,when to delete user's session,"<p>I'm writing a webapp that will only be used by authenticated users. Some temporary databases and log files will be created during each user session. I'd like to erase all these temp files when the session is finished. </p>

<p>Obviously, a logout or window close event would be sufficient to close the session, but in some cases the user may keep the browser open long after he's finished. </p>

<p>Another approach would be to time user sessions or delete the temp files during routine maintenance.</p>

<p>How do you go about it?</p>
"
432211,51518,2009-01-11T02:21:43Z,6,"Short Python Code to say ""Pick the lower value""?","<p>What I mean is,
I'm looking for really short code that returns the lower value.
for example:</p>

<pre><code>a=[1,2,3,4,5,6,7,8,9,10]
b=[1,2,3,4,5,6,7,8]
len(a) = 10
len(b) = 8
if (fill-this-in):
     print(lesser-value)
</code></pre>

<p>And I forgot to add that if b is lower than a, I want b returned - not len(b) - the variable b.</p>
"
432385,1464733,2009-01-11T04:48:19Z,105,SFTP in Python? (platform independent),"<p>I'm working on a simple tool that transfers files to a hard-coded location with the password also hard-coded.  I'm a python novice, but thanks to ftplib, it was easy:</p>

<pre><code>import ftplib

info= ('someuser', 'password')    #hard-coded

def putfile(file, site, dir, user=(), verbose=True):
    """"""
    upload a file by ftp to a site/directory
    login hard-coded, binary transfer
    """"""
    if verbose: print 'Uploading', file
    local = open(file, 'rb')    
    remote = ftplib.FTP(site)   
    remote.login(*user)         
    remote.cwd(dir)
    remote.storbinary('STOR ' + file, local, 1024)
    remote.quit()
    local.close()
    if verbose: print 'Upload done.'

if __name__ == '__main__':
    site = 'somewhere.com'            #hard-coded
    dir = './uploads/'                #hard-coded
    import sys, getpass
    putfile(sys.argv[1], site, dir, user=info)
</code></pre>

<p>The problem is that I can't find any library that supports sFTP.  What's the normal way to do something like this securely?  </p>

<p>Edit:  Thanks to the answers here, I've gotten it working with Paramiko and this was the syntax.</p>

<pre><code>import paramiko

host = ""THEHOST.com""                    #hard-coded
port = 22
transport = paramiko.Transport((host, port))

password = ""THEPASSWORD""                #hard-coded
username = ""THEUSERNAME""                #hard-coded
transport.connect(username = username, password = password)

sftp = paramiko.SFTPClient.from_transport(transport)

import sys
path = './THETARGETDIRECTORY/' + sys.argv[1]    #hard-coded
localpath = sys.argv[1]
sftp.put(localpath, path)

sftp.close()
transport.close()
print 'Upload done.'
</code></pre>

<p>Thanks again!</p>
"
432637,22076,2009-01-11T09:13:48Z,5,Materials for SICP with python?,"<p>I want to try out SICP with Python.</p>

<p>Can any one point to materials (video.article...) that teaches Structure and Interpretation of Computer Programs in <strong>python</strong>.</p>

<p>Currently learning from SICP videos of Abelson, Sussman, and Sussman.</p>
"
432786,51200,2009-01-11T11:44:17Z,30,How can I assign a new class attribute via __dict__ in python?,"<p>I want to assign a class attribute via a string object - but how?</p>

<p>Example:</p>

<pre><code>class test(object):
  pass

a = test()
test.value = 5
a.value
# -&gt; 5
test.__dict__['value']
# -&gt; 5

# BUT:
attr_name = 'next_value'

test.__dict__[attr_name] = 10
# -&gt; 'dictproxy' object does not support item assignment
</code></pre>
"
432842,50773,2009-01-11T12:34:43Z,310,How do you get the logical xor of two variables in Python?,"<p>How do you get the <a href=""http://en.wikipedia.org/wiki/Exclusive_or"">logical xor</a> of two variables in Python?</p>

<p>For example, I have two variables that I expect to be strings. I want to test that only one of them contains a True value (is not None or the empty string):</p>

<pre><code>str1 = raw_input(""Enter string one:"")
str2 = raw_input(""Enter string two:"")
if logical_xor(str1, str2):
    print ""ok""
else:
    print ""bad""
</code></pre>

<p>The <code>^</code> operator seems to be bitwise, and not defined on all objects:</p>

<pre><code>&gt;&gt;&gt; 1 ^ 1
0
&gt;&gt;&gt; 2 ^ 1
3
&gt;&gt;&gt; ""abc"" ^ """"
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
TypeError: unsupported operand type(s) for ^: 'str' and 'str'
</code></pre>
"
433251,45955,2009-01-11T17:25:11Z,10,How do I add a custom inline admin widget in Django?,"<p>This is easy for non-inlines. Just override the following in the your admin.py AdminOptions:</p>

<pre><code>def formfield_for_dbfield(self, db_field, **kwargs):
    if db_field.name == 'photo':
        kwargs['widget'] = AdminImageWidget()
        return db_field.formfield(**kwargs)
    return super(NewsOptions,self).formfield_for_dbfield(db_field,**kwargs)
</code></pre>

<p>I can't work out how to adapt this to work for inlines.</p>
"
433294,26592,2009-01-11T17:47:51Z,12,Column comparison in Django queries,"<p>I have a following model:</p>

<pre><code>class Car(models.Model):
    make = models.CharField(max_length=40)
    mileage_limit = models.IntegerField()
    mileage = models.IntegerField()
</code></pre>

<p>I want to select all cars where mileage is less than mileage_limit, so in SQL it would be something like:</p>

<pre><code>select * from car where mileage &lt; mileage_limit;
</code></pre>

<p>Using Q object in Django, I know I can compare columns with any value/object, e.g. if I wanted to get cars that have mileage say less than 100,000 it would be something like:</p>

<pre><code>cars = Car.objects.filter(Q(mileage__lt=100000))
</code></pre>

<p>Instead of a fixed value I would like to use the column name (in my case it is mileage_limit). So I would like to be able to do something like:</p>

<pre><code>cars = Car.objects.filter(Q(mileage__lt=mileage_limit))
</code></pre>

<p>However this results in an error, since it is expecting a value/object, not a column name. Is there a way to compare two columns using Q object? I feel like it would be a very commonly used feature and there should be an easy way to do this, however couldn't find anything about it in the documentation.</p>

<p><em>Note: this is a simplified example, for which the use of Q object might seam to be unnecessary. However the real model has many more columns, and the real query is more complex, that's why I am using Q. Here in this question I just wanted to figure out specifically how to compare columns using Q.</em></p>

<p><b>EDIT</b></p>

<p>Apparently after release of Django 1.1 it would be possible to do the following:</p>

<pre><code>cars = Car.objects.filter(mileage__lt=F('mileage_limit'))
</code></pre>

<p>Still not sure if F is supposed to work together with Q like this:</p>

<pre><code>cars = Car.objects.filter(Q(mileage__lt=F('mileage_limit')))
</code></pre>
"
433331,13009,2009-01-11T18:05:15Z,6,Python Library to Generate VCF Files?,"<p>Know of any good libraries for this?  I did some searches and didn't come across anything.  Someone somewhere must have done this before, I hate to reinvent the wheel.</p>
"
433388,33061,2009-01-11T18:36:21Z,6,"Python-Regex, what's going on here?","<p>I've got a book on python recently and it's got a chapter on Regex, there's a section of code which I can't really understand. Can someone explain exactly what's going on here (this section is on Regex groups)?</p>

<pre><code>&gt;&gt;&gt; my_regex = r'(?P&lt;zip&gt;Zip:\s*\d\d\d\d\d)\s*(State:\s*\w\w)'
&gt;&gt;&gt; addrs = ""Zip: 10010 State: NY""
&gt;&gt;&gt; y = re.search(my_regex, addrs)
&gt;&gt;&gt; y.groupdict('zip')
{'zip': 'Zip: 10010'}
&gt;&gt;&gt; y.group(2)
'State: NY'
</code></pre>
"
433507,85,2009-01-11T19:42:06Z,0,Filtering a complete date in django?,"<p>There are several filter methods for dates (year,month,day). If I want to match a full date, say 2008/10/18, is there a better way than this:</p>

<pre><code>Entry.objects.filter(pub_date__year=2008).filter(pub_date__month=10).filter(pub_date__day=18)
</code></pre>
"
433662,NA,2009-01-11T20:47:04Z,1,"Is late binding consistent with the philosophy of ""readibility counts""?","<p>I am sorry all - I am not here to blame Python. This is just a reflection on whether what I believe is right. Being a Python devotee for two years, I have been writing only small apps and singing Python's praises wherever I go. I recently had the chance to read Django's code, and have started wondering if Python really follows its ""readability counts"" philosophy. For example, </p>

<pre><code>class A:
    a = 10
    b = ""Madhu""

    def somemethod(self, arg1):
        self.c = 20.22
        d = ""some local variable""
        # do something
        ....
        ...
    def somemethod2 (self, arg2):
        self.c = ""Changed the variable""
        # do something 2
        ...
</code></pre>

<p>It's difficult to track the flow of code in situations where the instance variables are created upon use (i.e. <code>self.c</code> in the above snippet). It's not possible to see which instance variables are defined when reading a substantial amount of code written in this manner. It becomes very frustrating even when reading a class with just 6-8 methods and not more than 100-150 lines of code.</p>

<p>I am interested in knowing if my reading of this code is skewed by C++/Java style, since most other languages follow the same approach as them. Is there a Pythonic way of reading this code more fluently? What made Python developers adopt this strategy keeping ""readability counts"" in mind?</p>
"
433669,51181,2009-01-11T20:49:16Z,2,Analyse python list with algorithm for counting occurences over date ranges,"<p>The following shows the structure of some data I have (format: a list of lists)</p>

<pre><code>data = 
[ 
  [1,2008-12-01],
  [1,2008-12-01],
  [2,2008-12-01]
  ... (the lists continue)
]
</code></pre>

<p>The dates range from 2008-12-01 to 2008-12-25.</p>

<p>The first field identifies a user by id, the second field (a date field) shows when this user visited a page on my site. </p>

<p>I need to analyse this data so that i get the following results</p>

<p>25 users visted on 1 day<br />
100 users visted on 2 days<br />
300 users visted on 4 days<br />
... upto 25 days</p>

<p>I am using python and don't know where to start ! </p>

<p><strong>EDIT</strong></p>

<p>I'm sorry it seems I wasnt clear enough about what I needed as a few people have given answers that are not what I'm looking for. </p>

<p>I need to find out how many users visited on all the days e.g.<br />
10 users visited on 25 days (or every day)</p>

<p>Then I'd like the to list the same for each frequency of days from 1 - 25. So as per my original example above<br />
25 users visited for only one day (out of the 25)<br />
100 users visited on 2 days (out of the 25)<br />
etc </p>

<p>I DONT need to know how many visited on each day<br />
thanks</p>
"
433795,1384652,2009-01-11T21:52:29Z,7,Shorthand adding/appending in Python,"<p>I like that in PHP I can do the following</p>

<pre><code>$myInteger++;
$myString += 'more text';
</code></pre>

<p>With Python I must do the following</p>

<pre><code>myInteger = myInteger + 1
myString = myString + ""more text""
</code></pre>

<p>Is there a better way to add or append to a variable in Python?</p>
"
433945,41718,2009-01-11T23:03:34Z,3,JFileChooser for Python?,"<p>I was wondering if there is something similar to Java's <code>JFileChooser</code> for Python?</p>

<p><code>JFileChooser</code> is a graphical front end to choose a file.</p>

<p>Preferably something that is already with Python. Maybe with Tkinter.</p>
"
434287,46387,2009-01-12T02:48:22Z,241,"What is the most ""pythonic"" way to iterate over a list in chunks?","<p>I have a Python script which takes as input a list of integers, which I need to work with four integers at a time.  Unfortunately, I don't have control of the input, or I'd have it passed in as a list of four-element tuples.  Currently, I'm iterating over it this way:</p>

<pre><code>for i in xrange(0, len(ints), 4):
    # dummy op for example code
    foo += ints[i] * ints[i + 1] + ints[i + 2] * ints[i + 3]
</code></pre>

<p>It looks a lot like ""C-think"", though, which makes me suspect there's a more pythonic way of dealing with this situation.  The list is discarded after iterating, so it needn't be preserved.  Perhaps something like this would be better?</p>

<pre><code>while ints:
    foo += ints[0] * ints[1] + ints[2] * ints[3]
    ints[0:4] = []
</code></pre>

<p>Still doesn't quite ""feel"" right, though.  :-/</p>

<p>Related question: <a href=""http://stackoverflow.com/questions/312443/how-do-you-split-a-list-into-evenly-sized-chunks-in-python"">How do you split a list into evenly sized chunks in Python?</a></p>
"
434353,44511,2009-01-12T03:23:17Z,5,Comparing dictionaries in Python,"<p>Given two dictionaries, <code>d1</code> and <code>d2</code>, and an integer <code>l</code>, I want to find all keys <code>k</code> in <code>d1</code> such that either <code>d2[k]&lt;l</code> or <code>k not in l</code>. I want to output the keys and the corresponding values in <code>d2</code>, except if <code>d2</code> does not contain the key, I want to print 0. For instance, if <code>d1</code> is </p>

<pre><code>a: 1
b: 1
c: 1
d: 1
</code></pre>

<p>and <code>d2</code> is</p>

<pre><code>a: 90
b: 89
x: 45
d: 90
</code></pre>

<p>and <code>l</code> is 90, the output would be (possibly in a different order)</p>

<pre><code>b 89
c 0
</code></pre>

<p>What is the best way to do this in Python? I am just starting to learn the language, and so far this is what I have:</p>

<pre><code>for k in d1.keys():
    if k not in d2:
        print k, 0
    else:
        if d2[k]&lt;l:
            print k, d2[k]
</code></pre>

<p>This works of course (unless I have a typo), but it seems to me that there would be a more pythonic way of doing it.</p>
"
434407,13202,2009-01-12T04:05:35Z,2,Installing certain packages using virtualenv,"<p>So, I want to start using virtualenv this year.  I like the no-site-packages option, that is nice.  However I was wondering how to install certain packages into each virtualenv.  For example, lets say I want to install django into each virtualenv... is this possible, and if so, how?  Does buildout address this?</p>

<hr>

<p>Well it's not so much django, more like the django applications... I dont mind installing a version of django into each virtualenv... i was just wondering if there was some intermediate option to 'no-site-packages'</p>
"
434580,49701,2009-01-12T06:07:39Z,11,"For Python support, what company would be best to get hosting from?","<p>I want to be able to run WSGI apps but my current hosting restricts it. Does anybody know a company that can accommodate my requirements?</p>
"
434583,37984,2009-01-12T06:08:12Z,20,What is the fastest way to draw an image from discrete pixel values in Python?,"<p>I wish to draw an image based on computed pixel values, as a means to visualize some data. Essentially, I wish to take a 2-dimensional matrix of color triplets and render it. </p>

<p>Do note that this is not image processing, since I'm not transforming an existing image nor doing any sort of whole-image transformations, and it's also not vector graphics as there is no pre-determined structure to the image I'm rendering- I'm probably going to be producing amorphous blobs of color one pixel at a time. </p>

<p>I need to render images about 1kx1k pixels for now, but something scalable would be useful. Final target format is PNG or any other lossless format.</p>

<p>I've been using PIL at the moment via ImageDraw's draw.point , and I was wondering, given the very specific and relatively basic features I require, is there any faster library available?</p>
"
434597,47110,2009-01-12T06:23:51Z,66,Open document with default application in Python,"<p>I need to be able to open a document using its default application in Windows and Mac OS. Basically, I want to do the same thing that happens when you double click on the document icon in Explorer or Finder. What is the best way to do this in Python?</p>
"
434641,3715,2009-01-12T06:51:27Z,27,How do I set permissions (attributes) on a file in a ZIP file using Python's zipfile module?,"<p>When I extract files from a ZIP file created with the Python <a href=""http://docs.python.org/library/zipfile.html""><code>zipfile</code></a> module, all the files are not writable, read only etc.</p>

<p>The file is being created and extracted under Linux and Python 2.5.2.</p>

<p>As best I can tell, I need to set the <code>ZipInfo.external_attr</code> property for each file, but this doesn't seem to be documented anywhere I could find, can anyone enlighten me?</p>
"
434700,3105,2009-01-12T07:22:59Z,9,Cleaning up a database in django before every test method,"<p>By default when Django runs against sqlite backend it creates a new in memory database for a test. That means for every class that derives from unittest.TestCase, I get a new database. Can this be changed so that it is cleared before every test method is run?</p>

<p>Example: I am testing a manager class that provides additional abstraction on top of Django persistent objects. The code looks more-less like that</p>

<pre><code>class TestForManager(unittest.TestCase):
  def testAddingBlah(self):
    manager = Manager()
    self.assertEquals(manager.getBlahs(), 0)
    manager.addBlah(...)
    self.assertEquals(manager.getBlahs(), 1)

  def testAddingBlahInDifferentWay(self):
    manager = Manager()
    self.assertEquals(manager.getBlahs(), 0)
    manager.addBlahInDifferentWay(...)
    self.assertEquals(manager.getBlahs(), 1)
</code></pre>

<p>Now, the first assertion of second test fails, because the state of the database is preserved between test calls and there already is an instance of <code>Blah</code> in the database.</p>
"
436003,15890,2009-01-12T16:33:03Z,2,Ensuring contact form email isn't lost (python),"<p>I have a website with a contact form. User submits name, email and message and the site emails me the details.</p>

<p>Very occasionally my server has a problem with it's email system and so the user gets an error and those contact details are lost. (Don't say: get a better server, any server can have email go down now and then and we do get a lot of submissions).</p>

<p>I would like to implement a system that could store the user's details if the mail sending function returns with an error code. Then on every further submission, check for any stored submissions and try to send them off to me.</p>

<p>But how to store the data?</p>

<p>I'm using python so I thought about using <a href=""http://docs.python.org/library/shelve.html"" rel=""nofollow"">shelve</a> (single file semi-database). Or maybe someone could suggest a better data format? (I do think a full database solution would be overkill.)</p>

<p>The problem I see with a single file approach is <em>race-conditions</em>: two or more failed emails at the same time would cause two edits to the data file resulting in data corruption.</p>

<p>So what to do? Multi-file solution, file locking or something else?</p>
"
436198,54248,2009-01-12T17:23:36Z,154,What is an alternative to execfile in Python 3.0?,"<p>It seems they canceled in Python 3.0 all the easy way to quickly load a script file - both execfile() and reload(). </p>

<p>Is there an obvious alternative I'm missing?</p>
"
436220,41718,2009-01-12T17:30:27Z,97,Python: Is there a way to determine the encoding of text file?,"<p>I know there is something buried in <a href=""http://stackoverflow.com/questions/90838/how-can-i-detect-the-encoding-codepage-of-a-text-file"">here</a>.  But I was just wondering if there is an actual way built into Python to determine text file encoding?</p>

<p>Thanks for your help :)</p>

<p>Edit:  As a side question, it can be ignored if you want but why is the type of encoding not put into the file so it could be detected easier?</p>
"
436394,NA,2009-01-12T18:12:29Z,2,How do I split email address/password string in two in Python?,"<p>Lets say we have this string: <code>[18] email@email.com:pwd:</code></p>

<p><code>email@email.com</code> is the email and <code>pwd</code> is the password.</p>

<p>Also, lets say we have this variable with a value</p>

<pre><code>f = ""[18] email@email.com:pwd:""
</code></pre>

<p>I would like to know if there is a way to make two other variables named <code>var1</code> and <code>var2</code>, where the <code>var1</code> variable will take the exact email info from variable <code>f</code> and <code>var2</code> the exact password info from <code>var2</code>.</p>

<p>The result after running the app should be like:</p>

<pre><code>var1 = ""email@email.com""
</code></pre>

<p>and</p>

<pre><code>var2 = ""pwd""
</code></pre>
"
436474,39339,2009-01-12T18:31:52Z,6,pyPdf for IndirectObject extraction,"<p>Following this example, I can list all elements into a pdf file</p>

<pre><code>import pyPdf
pdf = pyPdf.PdfFileReader(open(""pdffile.pdf""))
list(pdf.pages) # Process all the objects.
print pdf.resolvedObjects
</code></pre>

<p>now, I need to extract a non-standard object from the pdf file. </p>

<p>My object is the one named MYOBJECT and it is a string.</p>

<p>The piece printed by the python script that concernes me is:</p>

<pre><code>{'/MYOBJECT': IndirectObject(584, 0)}
</code></pre>

<p>The pdf file is this:</p>

<pre><code>558 0 obj
&lt;&lt;/Contents 583 0 R/CropBox[0 0 595.22 842]/MediaBox[0 0 595.22 842]/Parent 29 0 R/Resources
  &lt;&lt;/ColorSpace &lt;&lt;/CS0 563 0 R&gt;&gt;
    /ExtGState &lt;&lt;/GS0 568 0 R&gt;&gt;
    /Font&lt;&lt;/TT0 559 0 R/TT1 560 0 R/TT2 561 0 R/TT3 562 0 R&gt;&gt;
    /ProcSet[/PDF/Text/ImageC]
    /Properties&lt;&lt;/MC0&lt;&lt;/MYOBJECT 584 0 R&gt;&gt;/MC1&lt;&lt;/SubKey 582 0 R&gt;&gt; &gt;&gt;
    /XObject&lt;&lt;/Im0 578 0 R&gt;&gt;&gt;&gt;
  /Rotate 0/StructParents 0/Type/Page&gt;&gt;
endobj
...
...
...
584 0 obj
&lt;&lt;/Length 8&gt;&gt;stream

1_22_4_1     ---&gt;&gt;&gt;&gt;  this is the string I need to extract from the object

endstream
endobj
</code></pre>

<p>How can I follow the <code>584</code> value in order to refer to my string (under pyPdf of course)??</p>
"
436497,NA,2009-01-12T18:38:15Z,50,Python: import the containing package,"<p>In a module residing inside a package, i have the need to use a function defined within the <code>__init__.py</code> of that package. how can i import the package within the module that resides within the package, so i can use that function?</p>

<p>Importing <code>__init__</code> inside the module will not import the package, but instead a module named <code>__init__</code>, leading to two copies of things with different names...</p>

<p>Is there a pythonic way to do this?</p>
"
436599,NA,2009-01-12T19:10:57Z,12,Python Split String,"<p>Lets Say we have <code>Zaptoit:685158:zaptoit@hotmail.com</code> </p>

<p>How do you split so it only be left <code>685158:zaptoit@hotmail.com</code></p>
"
436944,36680,2009-01-12T20:40:11Z,3,"What should ""value_from_datadict"" method of a custom form widget return?","<p>I'm trying to build my own custom django form widgets (putting them in widgets.py of my project directory).  What should the value ""value_from_datadict()"" return?  Is it returning a string or the actual expected value of the field?</p>

<p>I'm building my own version of a split date/time widget using JQuery objects, what should each part of the widget return?  Should the date widget return a datetime and the time widget return a datetime?  What glue code merges the two values together?</p>
"
437025,21482,2009-01-12T21:11:44Z,12,How to implement a python REPL that nicely handles asynchronous output?,"<p>I have a Python-based app that can accept a few commands in a simple read-eval-print-loop. I'm using <code>raw_input('&gt; ')</code> to get the input. On Unix-based systems, I also <code>import readline</code> to make things behave a little better. All this is working fine.</p>

<p>The problem is that there are asynchronous events coming in, and I'd like to print output as soon as they happen. Unfortunately, this makes things look ugly. The ""> "" string doesn't show up again after the output, and if the user is halfway through typing something, it chops their text in half. It should probably redraw the user's text-in-progress after printing something.</p>

<p>This seems like it must be a solved problem. What's the proper way to do this?</p>

<p>Also note that some of my users are Windows-based.</p>

<p>TIA</p>

<p>Edit: The accepted answer works under Unixy platforms (when the readline module is available), but if anyone knows how to make this work under Windows, it would be much appreciated!</p>
"
437160,23599,2009-01-12T21:57:38Z,16,IronPython Webframework,"<p>There seem to be many excellent web frameworks for Python.  Has anyone used any of these (Pylons, Web2Py, Django) with IronPython?</p>
"
437166,37522,2009-01-12T21:58:55Z,26,Duplicating model instances and their related objects in Django / Algorithm for recusrively duplicating an object,"<p>I've models for <code>Books</code>, <code>Chapters</code> and <code>Pages</code>. They are all written by a <code>User</code>:</p>

<pre><code>from django.db import models

class Book(models.Model)
    author = models.ForeignKey('auth.User')

class Chapter(models.Model)
    author = models.ForeignKey('auth.User')
    book = models.ForeignKey(Book)

class Page(models.Model)
    author = models.ForeignKey('auth.User')
    book = models.ForeignKey(Book)
    chapter = models.ForeignKey(Chapter)
</code></pre>

<p>What I'd like to do is duplicate an existing <code>Book</code> and update it's <code>User</code> to someone else. The wrinkle is I would also like to duplicate all related model instances to the <code>Book</code> - all it's <code>Chapters</code> and <code>Pages</code> as well!</p>

<p>Things get really tricky when look at a <code>Page</code> - not only will the new <code>Pages</code> need to have their <code>author</code> field updated but they will also need to point to the new <code>Chapter</code> objects!</p>

<p>Does Django support an out of the box way of doing this? What would a generic algorithm for duplicating a model look like?</p>

<p>Cheers,</p>

<p>John</p>

<p><hr /></p>

<p>Update:</p>

<p>The classes given above are just an example to illustrate the problem I'm having!</p>
"
437476,3594,2009-01-12T23:33:46Z,1,Safe escape function for terminal output,"<p>I'm looking for the equivalent of a <a href=""http://docs.python.org/library/urllib.html#urllib.quote_plus"" rel=""nofollow"">urlencode</a> for terminal output -- I need to make sure that garbage characters I (may) print from an external source don't end up doing funky things to my terminal, so a prepackaged function to escape special character sequences would be ideal.</p>

<p>I'm working in Python, but anything I can readily translate works too. TIA!</p>
"
437589,116,2009-01-13T00:33:36Z,410,How do I unload (reload) a Python module?,"<p>I have a long-running Python server and would like to be able to upgrade a service without restarting the server. What's the best way do do this?</p>

<pre><code>if foo.py has changed:
    unimport foo  &lt;-- How do I do this?
    import foo
    myfoo = foo.Foo()
</code></pre>
"
437791,26241,2009-01-13T02:33:57Z,3,Google App Engine - Importing my own source modules (multiple files),"<p>I am writing a GAE application and am having some difficulty with the following problem.</p>

<p>I've created multiple python files (say a.py and b.py) which are both stored in the same folder.  I am able to call code in a.py or b.py by mapping URL's to them (using app.yaml). What I haven't figured out how to do is import the code from one into another.  </p>

<p>Can anyone help me with the syntax and/or any config that is required here?  For instance, I am under the impression that I can include the code from b.py in the file a.py by issuing the following statement in a.py</p>

<pre><code>import b
</code></pre>

<p>I'm not having any success with this approach.  Specifically I receive this error:</p>

<pre><code>ImportError: No module named b
</code></pre>

<p>Any suggestions?</p>

<p>Thanks, </p>

<p>Matt</p>
"
438149,46646,2009-01-13T06:42:52Z,0,Help needed--Is class necessary in Python scripting?,"<p>I am creating an interface for Python scripting.
Later I will be dong Python scripting also for automated testing.
Is it necessary the at i must use class in my code.Now I have created the code
with dictionaries,lists,functions,global and local variables.</p>

<p>Is class necessary?</p>

<p>Help me in this.</p>
"
438185,49386,2009-01-13T07:10:34Z,4,"Python data structure: SQL, XML, or .py file","<p>What is the best way to store large amounts of data in python, given one (or two) 500,000 item+ dictionary used for undirected graph searching?</p>

<p>I've been considering a few options such as storing the data as XML:</p>

<pre><code>&lt;key name=""a""&gt;
    &lt;value data=""1"" /&gt;
    &lt;value data=""2"" /&gt;
&lt;/key&gt;
&lt;key name=""b""&gt;
...
</code></pre>

<p>or in a python file for direct access:</p>

<pre><code>db = {""a"": [1, 2], ""b"": ...}
</code></pre>

<p>or in a SQL database? I'm thinking this would be the best solution, but would I have to rely more on SQL to do the computation than python itself?</p>
"
438315,44639,2009-01-13T08:24:28Z,26,Is there a pure Python Lucene?,"<p>The ruby folks have <a href=""https://github.com/dbalmain/ferret"">Ferret</a>. Someone know of any similar initiative for Python? We're using PyLucene at current, but I'd like to investigate moving to pure Python searching.</p>
"
438401,46646,2009-01-13T09:11:11Z,0,Exception handling of a function in Python,"<p>Suppose I have a function definiton:</p>

<pre><code>def test():
    print 'hi'
</code></pre>

<p>I get a TypeError whenever I gives an argument.</p>

<p>Now, I want to put the def statement in try. How do I do this?</p>
"
438559,45955,2009-01-13T10:36:01Z,5,Is there a way to automatically generate a list of columns that need indexing?,"<p>The beauty of ORM lulled me into a soporific sleep. I've got an existing Django app with a lack of database indexes. Is there a way to automatically generate a list of columns that need indexing?</p>

<p>I was thinking maybe some middleware that logs which columns are involved in WHERE clauses? but is there anything built into MySQL that might help?</p>
"
438594,17160,2009-01-13T10:49:01Z,8,How to call java objects and functions from CPython?,"<p>I have a python program, which runs on the CPython implementation, and inside it I must call a function defined in a java program. How can I do this?</p>

<p>It would be nice to be able to use some java objects too.</p>

<p>Jython is not an option. I must run the python part in CPython.</p>
"
438733,46646,2009-01-13T11:50:25Z,-2,Help in FileNotFoundException -Python,"<p>This is my code:</p>

<pre><code>try:
    import clr, sys
    from xml.dom.minidom import parse
    import datetime
    sys.path.append(""C:\\teest"")
    clr.AddReference(""TCdll"")
    from ClassLibrary1 import Class1
    cl = Class1()
except ( ImportError ) :
    print ""Module may not be existing ""
</code></pre>

<p>My TCdll is in C:\test.I just gave it as C:\teest to know the error.</p>

<p>Exception is this:</p>

<pre><code>   Traceback (most recent call last):
      File ""C:/Python25/13thjan/PSE.py"", line 8, in &lt;module&gt;
        clr.AddReference(""TCdll"")
    FileNotFoundException: Unable to find assembly 'TCdll'.
       at Python.Runtime.CLRModule.AddReference(String name)
</code></pre>

<p>How to handle this exception ??</p>

<p>Help needed immediately</p>
"
438813,11522,2009-01-13T12:42:33Z,1,How do you create a list like PHP's in Python?,"<p>This is an incredibly simple question (I'm new to Python).</p>

<p>I basically want a data structure like a PHP array -- i.e., I want to initialise it and then just add values into it.</p>

<p>As far as I can tell, this is not possible with Python, so I've got the maximum value I might want to use as an index, but I can't figure out how to create an empty list of a specified length.</p>

<p>Also, is a list the right data structure to use to model what feels like it should just be an array? I tried to use an array, but it seemed unhappy with storing strings.</p>

<p>Edit: Sorry, I didn't explain very clearly what I was looking for. When I add items into the list, I do not want to put them in in sequence, but rather I want to insert them into specified slots in the list.</p>

<p>I.e., I want to be able to do this:</p>

<pre><code>list = []

for row in rows:
  c = list_of_categories.index(row[""id""])
  print c
  list[c] = row[""name""]
</code></pre>
"
438844,46646,2009-01-13T12:53:23Z,78,Is there a label/goto in Python?,"<p>Is there a <code>goto</code> or any equivalent in Python to be able to jump to a specific line of code?</p>
"
438894,46646,2009-01-13T13:13:24Z,16,How do I stop a program when an exception is raised in Python?,"<p>I need to stop my program when an exception is raised in Python.
How do I implement this?</p>
"
439115,6950,2009-01-13T14:26:49Z,7,random Decimal in python,"<p>How do I get a random decimal.Decimal? It appears that the random module only returns floats which are a pita to convert to Decimals.</p>
"
439641,1515117,2009-01-13T16:21:17Z,4,PIL vs RMagick/ruby-gd,"<p>For my next project I plan to create images with text and graphics.  I'm comfortable with ruby, but interested in learning python.  I figured this may be a good time because PIL looks like a great library to use.  However, I don't know how it compares to what ruby has to offer (e.g. RMagick and ruby-gd).  From what I can gather PIL had better documentation (does ruby-gd even have a homepage?) and more features. Just wanted  to hear a few opinions to help me decide.</p>

<p>Thanks.</p>

<p>Vince</p>
"
440036,2197,2009-01-13T17:52:42Z,7,Re-creating threading and concurrency knowledge in increasingly popular languages,"<p>I am primarily a Java developer, and I've been reading a lot of in-depth work on threads and concurrency.  Many very smart people (Doug Lea, Brian Goetz, etc) have authored books on these topics and made contributions to new concurrency libraries for Java.</p>

<p>As I start to learn more about Python, Ruby, and other languages, I'm wondering: does all of that work have to be re-created for these languages?</p>

<p>Will there be, or does there need to be, a ""Doug Lea of Python,"" or a ""Brian Goetz of Ruby,"" who make similarly powerful contributions to the concurrency features of those languages?  </p>

<p><b>Does all of this concurrency work done in Java have to be re-created for future languages?</b>  Or will the work done in Java establish lessons and guidance for future languages?</p>
"
440063,2908,2009-01-13T17:59:40Z,1,make a parent function return - super return?,"<p>there is a check I need to perform after each subsequent step in a function, so I wanted to define that step as a function within a function.</p>

<pre><code>&gt;&gt;&gt; def gs(a,b):
...   def ry():
...     if a==b:
...       return a
...
...   ry()
...
...   a += 1
...   ry()
...
...   b*=2
...   ry()
... 
&gt;&gt;&gt; gs(1,2) # should return 2
&gt;&gt;&gt; gs(1,1) # should return 1
&gt;&gt;&gt; gs(5,3) # should return 6
&gt;&gt;&gt; gs(2,3) # should return 3
</code></pre>

<p>so how do I get gs to return 'a' from within ry? I thought of using super but think that's only for classes.</p>

<p>Thanks</p>

<p>There's been a little confusion... I only want to return a if a==b. if a!=b, then I don't want gs to return anything yet.</p>

<p><strong>edit</strong>: I now think <a href=""http://muharem.wordpress.com/2006/10/19/python-decorator-mini-study-part-2-of-3/"" rel=""nofollow"">decorators</a> might be the best solution.</p>
"
440320,41613,2009-01-13T19:06:16Z,28,unicode() vs. str.decode() for a utf8 encoded byte string (python 2.x),"<p>Is there any reason to prefer <code>unicode(somestring, 'utf8')</code> as opposed to <code>somestring.decode('utf8')</code>?</p>

<p>My only thought is that <code>.decode()</code> is a bound method so python may be able to resolve it more efficiently, but correct me if I'm wrong.</p>
"
440356,16148,2009-01-13T19:15:03Z,4,Extracting Embedded Images From Outlook Email,"<p>I am using Microsoft's CDO (Collaboration Data Objects) to programatically read mail from an Outlook mailbox and save embedded image attachments.  I'm trying to do this from Python using the Win32 extensions, but samples in any language that uses CDO would be helpful.</p>

<p>So far, I am here...</p>

<p>The following Python code will read the last email in my mailbox, print the names of the attachments, and print the message body:</p>

<pre><code>from win32com.client import Dispatch

session = Dispatch('MAPI.session')
session.Logon('','',0,1,0,0,'exchange.foo.com\nbar');
inbox = session.Inbox
message = inbox.Messages.Item(inbox.Messages.Count)

for attachment in message.Attachments:
    print attachment

print message.Text

session.Logoff()
</code></pre>

<p>However, the attachment names are things like: ""zesjvqeqcb_chart_0"".  Inside the email source, I see image source links like this:
&lt;IMG src=""cid:zesjvqeqcb_chart_0""&gt;</p>

<p>So.. is it possible to use this CID URL (or anything else) to extract the actual image and save it locally?</p>
"
440541,33061,2009-01-13T19:58:28Z,10,"python, sorting a list by a key that's a substring of each element","<p>Part of a programme builds this list,</p>

<pre><code>[u'1 x Affinity for war', u'1 x Intellect', u'2 x Charisma', u'2 x Perception', u'3 x Population growth', u'4 x Affinity for the land', u'5 x Morale']
</code></pre>

<p>I'm currently trying to sort it alphabetically by the name of the evolution rather than by the number. Is there any way I can do this without just changing the order the two things appear in the list (as in 'intellect x 1)?</p>
"
440547,208,2009-01-13T20:00:20Z,11,Installing Python 3.0 on Cygwin,"<h3>The Question</h3>

<p>What is the correct way to install Python 3.0 alongside Python 2.x using Cygwin?</p>

<h3>Notes</h3>

<p>I already have a working copy of Cygwin, and Python 2.x is installed within Cygwin (<code>/lib/python2.x</code>, not <code>c:\python2.x</code>).</p>

<p>Also, I would like to be able to call python 3 separately (and only intentionally) by leaving <code>python</code> pointing to Python 2.x to preserve existing dependencies.  I would like to use <code>python30</code> or some alternative.</p>

<p>Any pointers to guides on the subject would be much appreciated.  I cannot seem to find one either at the cygwin site or python.org.</p>
"
440676,33061,2009-01-13T20:31:45Z,2,Python classes from a for loop,"<p>I've got a piece of code which contains a for loop to draw things from an XML file;</p>

<pre><code>   for evoNode in node.getElementsByTagName('evolution'):
      evoName    = getText(evoNode.getElementsByTagName(        ""type"")[0].childNodes)
      evoId      = getText(evoNode.getElementsByTagName(      ""typeid"")[0].childNodes)
      evoLevel   = getText(evoNode.getElementsByTagName(       ""level"")[0].childNodes)
      evoCost    = getText(evoNode.getElementsByTagName(""costperlevel"")[0].childNodes)

      evolutions.append(""%s x %s"" % (evoLevel, evoName))
</code></pre>

<p>Currently it outputs into a list called <code>evolutions</code> as it says in the last line of that code, for this and several other for functions with very similar functionality I need it to output into a class instead.</p>

<pre><code>class evolutions:
    def __init__(self, evoName, evoId, evoLevel, evoCost)
        self.evoName = evoName
        self.evoId = evoId
        self.evoLevel = evoLevel
        self.evoCost = evoCost
</code></pre>

<p>How to create a series of instances of this class, each of which is a response from that for function? Or what is a core practical solution? This one doesn't really need the class but one of the others really does.</p>
"
440932,20840,2009-01-13T21:46:40Z,9,Reading Command Line Arguments of Another Process (Win32 C code),"<p>I need to be able to list the command line arguments (if any) passed to other running processes. I have the PIDs already of the running processes on the system, so basically I need to determine the arguments passed to process with given PID <em>XXX</em>. </p>

<p>I'm working on a core piece of a <a href=""http://code.google.com/p/psutil/"">Python module for managing processes</a>. The code is written as a Python extension in C and will be wrapped by a higher level Python library. The goal of this project is to avoid dependency on third party libs such as the pywin32 extensions, or on ugly hacks like calling 'ps' or taskkill on the command line, so I'm looking for a way to do this in C code.</p>

<p>I've Googled this around and found some brief suggestions of using <a href=""http://msdn.microsoft.com/en-us/library/ms682437%28VS.85%29.aspx"">CreateRemoteThread()</a> to inject myself into the other process, then run <a href=""http://msdn.microsoft.com/en-us/library/ms683156%28VS.85%29.aspx"">GetCommandLine()</a> but I was hoping someone might have some working code samples and/or better suggestions.</p>

<p><strong>UPDATE</strong>: I've found full working demo code and a solution using NtQueryProcessInformation on CodeProject: <a href=""http://www.codeproject.com/KB/threads/GetNtProcessInfo.aspx"">http://www.codeproject.com/KB/threads/GetNtProcessInfo.aspx</a> - It's not ideal since it's ""unsupported"" to cull the information directly from the NTDLL structures but I'll live with it. Thanks to all for the suggestions. </p>

<p><strong>UPDATE 2</strong>: I managed through more Googling to dig up a C version that does not use C++ code, and is a little more direct/concisely pointed toward this problem. See <a href=""http://wj32.wordpress.com/2009/01/24/howto-get-the-command-line-of-processes/"">http://wj32.wordpress.com/2009/01/24/howto-get-the-command-line-of-processes/</a> for details.</p>

<p>Thanks!</p>
"
441061,49018,2009-01-13T22:18:32Z,2,Efficient layout for a distributed python server?,"<p>If I wanted to have Python distributed across multiple processors on multiple computers, what would my best approach be? If I have 3 eight-core servers, that would mean I would have to run 24 python processes. I would be using the <a href=""http://docs.python.org/library/multiprocessing.html"" rel=""nofollow"">multiprocessing library</a>, and to share objects it looks like the best idea would be to use a manager. I want all the nodes to work together as one big process, so one manager would be ideal, yet that would give my server a single point of failure. Is there a better solution? Would replicating a manager's object store be a good idea?</p>

<p>Also, if the manager is going to be doing all of the database querying, would it make sense to have it on the same machine as the database?</p>
"
441114,24587,2009-01-13T22:32:28Z,1,How to add additional information to a many-to-many relation?,"<p>I'm writing a program to manage orders and then print them.</p>

<p>An order is an object containing the ordering person, the date and the products this person orders. I'd like to add the amount of a certain product one orderer. E.g. 3 eggs, 2 breads.</p>

<p>Is there a simpler way doing this with storm (the ORM I'm using) than splitting the order into smaller pieces so that every order contains only 1 product? </p>
"
441130,49559,2009-01-13T22:36:28Z,13,"Using ""with"" statement for CSV files in Python","<p>Is it possible to use the <code>with</code> statement directly with CSV files? It seems natural to be able to do something like this:</p>

<pre><code>import csv
with csv.reader(open(""myfile.csv"")) as reader:
    # do things with reader
</code></pre>

<p>But csv.reader doesn't provide the <code>__enter__</code> and <code>__exit__</code> methods, so this doesn't work. I can however do it in two steps:</p>

<pre><code>import csv
with open(""myfile.csv"") as f:
    reader = csv.reader(f)
    # do things with reader
</code></pre>

<p>Is this second way the ideal way to do it? Why wouldn't they make csv.reader directly compatible with the with statement?</p>
"
441147,6007,2009-01-13T22:39:36Z,330,How can I subtract a day from a Python date?,"<p>I have a Python <a href=""https://docs.python.org/library/datetime.html#datetime-objects""><code>datetime.datetime</code></a> object. What is the best way to subtract one day?</p>
"
441256,130795,2009-01-13T23:11:01Z,5,"Py2Exe - ""The application configuration is incorrect.""","<p>I've compiled my Python program using Py2Exe, and on the client's computer we've satisfied all the dependencies using dependency walker, but we still get ""The application configuration is incorrect.  Reinstalling the application may correct the problem.""  I'm also using wxPython.</p>

<p>The client does not have administrator access.</p>

<p>Any ideas?</p>
"
441374,28287,2009-01-13T23:52:10Z,3,Why am I seeing 'connection reset by peer' error?,"<p>I am testing <a href=""http://code.google.com/p/cogen/"" rel=""nofollow"">cogen</a> on a Mac OS X 10.5 box using python 2.6.1.  I have a simple echo server and client-pumper that creates 10,000 client connections as a test.  1000, 5000, etc. all work splendidly.  However at around 10,000 connections, the server starts dropping random clients - the clients see 'connection reset by peer'.</p>

<p>Is there some basic-networking background knowledge I'm missing here?</p>

<p>Note that my system is configured to handle open files (launchctl limit, sysctl (maxfiles, etc.), and ulimit -n are all valid; been there, done that). Also, I've verified that cogen is picking to use kqueue under the covers.</p>

<p>If I add a slight delay to the client-connect() calls everything works great.  Thus, my question is, why would a server under stress drop other clients when there's a high frequency of connections in a short period of time?  Anyone else ever run into this?</p>

<p>For completeness' sake, here's my code.</p>

<p>Here is the server:</p>

<pre><code># echoserver.py

from cogen.core import sockets, schedulers, proactors
from cogen.core.coroutines import coroutine
import sys, socket

port = 1200

@coroutine
def server():
    srv = sockets.Socket()
    srv.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
    addr = ('0.0.0.0', port)
    srv.bind(addr)
    srv.listen(64)
    print ""Listening on"", addr
    while 1:
        conn, addr = yield srv.accept()
        m.add(handler, args=(conn, addr))

client_count = 0

@coroutine
def handler(sock, addr):
    global client_count
    client_count += 1
    print ""SERVER: [connect] clients=%d"" % client_count
    fh = sock.makefile()
    yield fh.write(""WELCOME TO (modified) ECHO SERVER !\r\n"")
    yield fh.flush()
    try:
        while 1:
            line = yield fh.readline(1024)
            #print `line`
            if line.strip() == 'exit':
                yield fh.write(""GOOD BYE"")
                yield fh.close()
                raise sockets.ConnectionClosed('goodbye')
            yield fh.write(line)
            yield fh.flush()
    except sockets.ConnectionClosed:
        pass
    fh.close()
    sock.close()
    client_count -= 1
    print ""SERVER: [disconnect] clients=%d"" % client_count

m = schedulers.Scheduler()
m.add(server)
m.run()
</code></pre>

<p>And here is the client:</p>

<pre><code># echoc.py

import sys, os, traceback, socket, time
from cogen.common import *
from cogen.core import sockets

port, conn_count = 1200, 10000
clients = 0

@coroutine
def client(num):
    sock = sockets.Socket()
    sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
    reader = None
    try:
        try:
            # remove this sleep and we start to see 
            # 'connection reset by peer' errors
            time.sleep(0.001)
            yield sock.connect((""127.0.0.1"", port))
        except Exception:
            print 'Error in client # ', num
            traceback.print_exc()
            return
        global clients
        clients += 1
        print ""CLIENT #=%d [connect] clients=%d"" % (num,clients)
        reader = sock.makefile('r')
        while 1:
            line = yield reader.readline(1024)
    except sockets.ConnectionClosed:
        pass
    except:
        print ""CLIENT #=%d got some other error"" % num
    finally:
        if reader: reader.close()
        sock.close()
        clients -= 1
        print ""CLIENT #=%d [disconnect] clients=%d"" % (num,clients)

m = Scheduler()
for i in range(0, conn_count):
    m.add(client, args=(i,))
m.run()
</code></pre>

<p>Thanks for any information!</p>
"
441397,20712,2009-01-14T00:02:40Z,4,scons: How can I create a link to another repository's target if the target is built in the other repository,"<p>When I add a ""Repository"" to a SConstruct file (<a href=""http://www.scons.org/doc/1.2.0/HTML/scons-user/c3810.html#AEN3814"" rel=""nofollow"">link</a>), if any target in my repository has been built in this other repository ( and the dependencies haven't changed), then SCons will <em>not</em> build the target -- which is really cool.   Unfortunately, I have some tools which rely on the targets being placed in a certain location.  How can I create a link in my current repository to this other repository's target when SCons decides to not build locally because the other repo' already has the target built?</p>

<p>EDIT
It looks like Scons has a 'Local' function which will copy a file from the other repository to the local repository (<a href=""http://www.scons.org/doc/1.2.0/HTML/scons-user/x3986.html"" rel=""nofollow"">link</a>).  What I really need is a soft-link, because these targets are big and there is a lot of redundancy. Still looking...</p>
"
441758,54873,2009-01-14T02:53:26Z,34,Driving Excel from Python in Windows,"<p>We have various spreadsheets that employ deliciously complicated macros and third party extensions to produce complicated models.  I'm working on a project that involves slightly tweaking various inputs and seeing the results.  Rather than doing this by hand or writing VBA, I'd like to see if I can write a python script to drive this. In other words, the python script will start up, load the excel sheet, and then interact with the sheet by making minor changes in some cells and seeing how they affect other cells.</p>

<p>So, my question is twofold:</p>

<ul>
<li><p>What is the best library to use to drive excel from python in such fashion?</p></li>
<li><p>Where's the best documentation/examples on using said library?</p></li>
</ul>

<p>Cheers,
/YGA</p>
"
441815,37491,2009-01-14T03:29:10Z,2,Pythoncard item setsize,"<p>Below is the base class of my pythoncard application</p>

<pre><code>class MyBackground(model.Background):

    def on_initialize(self, event):
        # if you have any initialization
        # including sizer setup, do it here
        self.setLayout()

    def setLayout(self):
        sizer1 = wx.BoxSizer(wx.VERTICAL)   # main sizer

        for item in self.components.itervalues():
            item.SetSize(item.GetBestSize())
            print item.GetBestSize(),item.GetSize() # here
            sizer1.Add(item, 0, wx.ALL, 10)

        sizer1.Fit(self)
        self.panel.SetSizer(sizer1)
        self.panel.Layout()
        self.visible = 1
</code></pre>

<p>which uses the resource file with content below</p>

<pre><code>{'application':{'type':'Application',
      'name':'Template',
'backgrounds': [
{'type':'Background',
      'name':'bgTemplate',
      'title':u'Standard Template with no menus',
      'size': (800, 600),
      'statusBar':1,
      'style':['wx.MINIMIZE_BOX', 'wx.CLOSE_BOX', 'wx.MAXIMIZE_BOX', 'wx.FRAME_SHAPED', 'wx.CAPTION',
               'wx.DEFAULT_FRAME_STYLE', 'wx.FULL_REPAINT_ON_RESIZE', 'wx.HW_SCROLLBAR_AUTO'],

     'components': [


 {'backgroundColor': '&amp;H00FFFFFF&amp;',
  'name': 'MinMax0',
  'position': (1080, 9900),
  'size': (732, 220),
  'text': '10000',
  'type': 'TextField'}]}]}
</code></pre>

<p>line marked with 'here' prints (80, 21) (732, 220) , which i expected to be (80, 21) (80, 21). How can i set the size of the components in pythoncard application? </p>
"
441824,48162,2009-01-14T03:39:32Z,110,"Java ""Virtual Machine"" vs. Python ""Interpreter"" parlance?","<p>It's seems rare to read of a Python ""virtual machine"" while in Java ""virtual machine"" is used all the time. Both interpret byte codes, why call one a virtual machine and the other an interpreter? </p>
"
441838,46914,2009-01-14T03:45:24Z,21,IronPython on ASP.NET MVC,"<p>Has anyone tried ASP.NET MVC using IronPython?  Having done a lot of Python development recently, it would be nice to continue with the language as I go into a potential ASP.NET MVC project.</p>

<p>I'm especially interested in exploiting the dynamic aspects of Python with .NET features such as LINQ and want to know if this will be possible.  The other route that may be viable for certain dynamic programming would be C# 4.0 with its <code>dynamic</code> keyword.</p>

<p>Thoughts, experiences?</p>
"
441849,49018,2009-01-14T03:51:13Z,9,Good Python networking libraries for building a TCP server?,"<p>I was just wondering what network libraries there are out there for Python for building a TCP/IP server. I know that Twisted might jump to mind but the documentation seems scarce, sloppy, and scattered to me. </p>

<p>Also, would using Twisted even have a benefit over rolling my own server with select.select()?</p>
"
441864,NA,2009-01-14T04:01:29Z,0,Which new mp3 player to run old Python scripts,"<p>Which mp3/media player could I buy which will allow me to run an existing set of python scripts.</p>

<p>The existing scripts control xmms on linux: providing ""next tracks"" given data on ratings/last played/genre/how long since acquired/.... so that it all runs on a server upstairs somewhere, and I do not need to choose anything.</p>

<p>I'd like to use these scripts in the car, and I hope there is some media player that will let me change its playlist/current song from Python. Can you recommend such a machine ? </p>

<p>(I'd rather avoid the various types of iPod - they are a bit too ""end-user focussed"" for me)</p>
"
442040,10077,2009-01-14T05:49:25Z,37,Pre-populate an inline FormSet?,"<p>I'm working on an attendance entry form for a band.  My idea is to have a section of the form to enter event information for a performance or rehearsal.  Here's the model for the event table:</p>

<pre><code>class Event(models.Model):
    event_id = models.AutoField(primary_key=True)
    date = models.DateField()
    event_type = models.ForeignKey(EventType)
    description = models.TextField()
</code></pre>

<p>Then I'd like to have an inline FormSet that links the band members to the event and records whether they were present, absent, or excused:</p>

<pre><code>class Attendance(models.Model):
    attendance_id = models.AutoField(primary_key=True)
    event_id = models.ForeignKey(Event)
    member_id = models.ForeignKey(Member)
    attendance_type = models.ForeignKey(AttendanceType)
    comment = models.TextField(blank=True)
</code></pre>

<p>Now, what I'd like to do is to pre-populate this inline FormSet with entries for all the current members and default them to being present (around 60 members).  Unfortunately, Django <a href=""http://groups.google.com/group/django-developers/browse_thread/thread/73af9e58bd7626a8"">doesn't allow initial values in this case.</a></p>

<p>Any suggestions?</p>
"
442062,47110,2009-01-14T06:08:39Z,3,How do I create an HTTP server in Python using the first available port?,"<p>I want to avoid hardcoding the port number as in the following:</p>

<pre><code>httpd = make_server('', 8000, simple_app)
</code></pre>

<p>The reason I'm creating the server this way is that I want to use it as a 'kernel' for an Adobe AIR app so it will communicate using PyAMF. Since I'm running this on the client side it is very possible that any port I define is already in use. If there is a better way to do this and I am asking the wrong question please let me know.</p>
"
442188,49018,2009-01-14T07:34:04Z,3,"ReadInt(), ReadByte(), ReadString(), etc. in Python?","<p>The functions ReadInt(), ReadByte(), and ReadString() (to name a few) exist in other languages for reading input from streams. I am trying to read from a socket, and I want to use functions like these. Are they tucked away in Python somewhere under a different way or has someone made a library for it?</p>

<p>Also, there are Write<em>datatype</em>() counterparts.</p>
"
442218,37984,2009-01-14T07:49:24Z,1,How do I use a 2-d boolean array to select from a 1-d array on a per-row basis in numpy?,"<p>Let me illustrate this question with an example:</p>

<pre><code>import numpy

matrix = numpy.identity(5, dtype=bool) #Using identity as a convenient way to create an array with the invariant that there will only be one True value per row, the solution should apply to any array with this invariant
base = numpy.arange(5,30,5) #This could be any 1-d array, provided its length is the same as the length of axis=1 of matrix from above

result = numpy.array([ base[line] for line in matrix ])
</code></pre>

<p><code>result</code> now holds the desired result, but I'm sure there is a numpy-specific method for doing this that avoids the explicit iteration. What is it?</p>
"
442343,3355,2009-01-14T09:05:20Z,33,Generic catch for python,"<p>I have some extremely weird behavior that seems to result in silent exceptions. How can I write a general try catch where I can debug all exceptions. Something along the lines of:</p>

<pre><code>try:
    # something that fails
except e:
    print e
</code></pre>

<p>A bit more about the problem at hand in detail:</p>

<p>I have a Django app that on the my comp (Ubuntu Linux 8.10) works fine both through runserver and mod-python. On the deploy server (Ubunut Linux 8.10) it works fine through runserver, but fails via apache in mod-python.</p>

<p>I have reduced the cause down to a part off the app that uses Berkeley DB (bsddb.db), and secondary keys. The callback method for secondary keys uses pickle to format the keys. It fails when I call pickle on a single value. However, it only fails when I use cPickle, and using pickle on the same values outside the callback function also works.</p>

<p>I just want to know why it fails with cPickle.</p>
"
442355,53330,2009-01-14T09:11:43Z,2,What is the best approach to implement configuration app with Django?,"<p>I need to program kind of configuration registry for Django-based application. </p>

<p>Requirements:</p>

<ol>
<li>Most likely <code>param_name</code> : <code>param_value</code> structure</li>
<li>Editable via admin interface</li>
<li>Has to work with syncdb. How to deal with a situation in which other apps depend on configuration model and the model itself has not been initialized yet in DB? Let's say I would like to have configurable model fields properties, i.e. the default value setting?</li>
</ol>

<p>Any ideas or suggestions would be appreciated.</p>
"
442442,22035,2009-01-14T09:52:41Z,4,How to know when you are in a symbolic link,"<p>How to know, in Python, that the directory you are in is inside a symbolic link ?</p>

<p>I have a directory <strong>/tmp/foo/kiwi</strong></p>

<p>I create a symlink <strong>/tmp/bar</strong> pointing to <strong>/tmp/foo</strong></p>

<p>I enter into <strong>/tmp/bar/kiwi</strong></p>

<p>the linux command <strong>pwd</strong> tells me I'm in <strong>/tmp/bar/kiwi</strong>, which is correct.</p>

<p>The python command prompt tells me I'm in <strong>/tmp/foo/kiwi</strong>:</p>

<pre><code>Python 2.5.1 (r251:54863, Oct  5 2007, 13:36:32) 
[GCC 4.1.3 20070929 (prerelease) (Ubuntu 4.1.2-16ubuntu2)] on linux2
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt; import os
&gt;&gt;&gt; os.getcwd()
'/tmp/foo/kiwi'
</code></pre>

<p>Is there a way, in Python, to get the directory I'm really in ?</p>
"
442596,54957,2009-01-14T11:04:04Z,3,cascading forms in Django/else using any Pythonic framework,"<p>Can anyone point to an example written in Python (django preferred) with ajax for cascading forms? Cascading Forms is basically forms whose field values change if and when another field value changes. Example Choose Country, and then States will change...</p>
"
443057,54982,2009-01-14T14:07:12Z,6,How to properly interact with a process using subprocess module,"<p>I'm having problems redirecting stdio of another program using subprocess module. Just reading from stdout results in hanging, and Popen.communicate() works but it closes pipes after reading/writing. What's the easiest way to implement this?</p>

<p>I was playing around with this on windows:</p>

<pre><code>import subprocess
proc = subprocess.Popen('python -c ""while True: print \'Hi %s!\' % raw_input()""',
                        shell=True, stdin=subprocess.PIPE, stdout=subprocess.PIPE,
                        stderr=subprocess.STDOUT)
while True:
    proc.stdin.write('world\n')
    proc_read = proc.stdout.readline()
    if proc_read:
        print proc_read</code></pre>
"
443082,NA,2009-01-14T14:17:20Z,1,_lsprof.c profiler behaviour towards python multi-threading,"<p>This is a question about Python native c file _lsprof. 
How does _lsprof.profile() profiler counts total time spent on a function f in a multi-threaded program if the execution of f is interrupted by another thread? </p>

<p>For example:</p>

<p>def f():<br />
  linef1<br />
  linef2<br />
  linef3  </p>

<p>def g():<br />
  lineg1<br />
  lineg2  </p>

<p>And at the execution we have, f and g not being in the same thread:</p>

<p>linef1<br />
linef2<br />
lineg1<br />
linef3<br />
lineg2  </p>

<p>Then will the total runtime of f be perceived as the amount of time needed to do:  </p>

<p>linef1<br />
linef2<br />
linef3    </p>

<p>or will it be the effective latency time:  </p>

<p>linef1<br />
linef2<br />
lineg1<br />
linef3    </p>

<p>in the results of _lsprof.profile()? </p>
"
443224,30786,2009-01-14T14:49:41Z,1,"Jython, Query multiple columns dynamically","<p>I am working with a oracle database and Jython.</p>

<p>I can get data pulled from the database no problem.</p>

<pre><code>results = statement.executeQuery(""select %s from %s where column_id = '%s'"", % (column, table, id))
</code></pre>

<p>This works fine if I want to pull one column of data.</p>

<p>Say I wanted to loop threw a list like this:</p>

<pre><code>columns = ['column1', 'column2', 'column3', 'column4', 'column5']
</code></pre>

<p>So the query ended up looking like this:</p>

<pre><code>results = statement.executeQuery(""select %s, %s, %s, %s, %s from %s where column_id = '%s'"", % (column1, column2, column3, column4, column5, table, id))
</code></pre>

<p>How could I do this?</p>

<p>The reason I want to achive this is because I may want to pull 6 or 7 columns and I would like to store different queries in a external file.</p>

<p>I hope you understand what I mean.  If not I will try to re word it as best as I can.</p>

<p>Cheers</p>

<p>Arthur</p>
"
443387,4105,2009-01-14T15:35:25Z,8,Why does Paramiko hang if you use it while loading a module?,"<p>Put the following into a file <strong>hello.py</strong> (and <code>easy_install paramiko</code> if you haven't got it):</p>

<pre><code>hostname,username,password='fill','these','in'
import paramiko
c = paramiko.SSHClient()
c.set_missing_host_key_policy(paramiko.AutoAddPolicy())
c.connect(hostname=hostname, username=username, password=password)
i,o,e = c.exec_command('ls /')
print(o.read())
c.close()
</code></pre>

<p>Fill in the first line appropriately.</p>

<p>Now type</p>

<pre><code>python hello.py
</code></pre>

<p>and you'll see some ls output.</p>

<p>Now instead type</p>

<pre><code>python
</code></pre>

<p>and then from within the interpreter type</p>

<pre><code>import hello
</code></pre>

<p>and voila!  It hangs!  It will unhang if you wrap the code in a function <code>foo</code> and do <code>import hello; hello.foo()</code> instead.</p>

<p>Why does Paramiko hang when used within module initialization?  <strong>How is Paramiko even aware that it's being used during module initialization in the first place?</strong></p>
"
443650,NA,2009-01-14T16:27:22Z,1,Django template ifequal comparison of decimals,"<p>So, I have a decimalfield that can be 3 different values. In my view,
I pass in a dictionary of values that contains the appropriate decimal
values as keys.</p>

<pre><code>{% for item in booklist %}  
    {% for key, value in numvec.items %}  
        {{item.number}}  
        {% ifequals item.number {{key}} %}  
            {{value}}  
        {% endifequals %}  
    {% endfor %}
{% endfor %}
</code></pre>

<p>this is the dict I pass in as numvec:</p>

<pre><code>numvec = {""TEST"":Decimal(""0.999""), ""TEST2"":Decimal(""0.500""),
</code></pre>

<p>""TEST3"":Decimal(""0.255"")}</p>

<p>the number field was defined as having these choices in my model:</p>

<pre><code>BOOK_CHOICES=((Decimal(""0.999""), 'TEST'),(Decimal(""0.500""), 'TEST2'),(Decimal(""0.255""), 'TEST3'),)
</code></pre>

<p>The item number prints out just fine in the view if I compare the dict
with the attribute, but for some reason the ifequals cannot properly
compare two decimals together. Is this a bug, or am I doing something
wrong in my template with ifequals? </p>
"
443775,85185,2009-01-14T16:55:48Z,4,Addressing instance name string in __init__(self) in Python,"<p>I am doing something like this:</p>

<pre><code>class Class(object):
    def __init__(self):
        self.var=#new instance name string#   
</code></pre>

<p>How do I make the __ init __ method of my instance to use the instance name string for 'c'? Say in case:</p>

<pre><code>c=Class()
</code></pre>

<p>I want c.var equal to 'c'.</p>

<p>Thanks for your replies, I am implementing persistence and Class is persistent object's class. I want __ init __ to add an entry to the database when:</p>

<pre><code>c=Class()
</code></pre>

<p>Then, suppose:</p>

<pre><code>del c
</code></pre>

<p>Later on:</p>

<pre><code>c=Class()
</code></pre>

<p>sholuld create an instance using data from database if there already is an entry 'c', otherwise create new entry.</p>

<hr>

<p>Thanks for your replies, I am implementing persistence and Class is persistent object's class. I want __ init __ to add an entry to the database when:</p>

<pre><code>c=Class()
</code></pre>

<p>Then, suppose:</p>

<pre><code>del c
</code></pre>

<p>Later on:</p>

<pre><code>c=Class()
</code></pre>

<p>sholuld create an instance using data from database if there already is an entry 'c', otherwise create new entry.</p>
"
443813,33061,2009-01-14T17:01:45Z,1,"python, index errors","<p>I've got some code which draws data from an xml file but it seems to have randomly starting throwing;</p>

<pre><code>Traceback (most recent call last):
  File ""C:\Users\mike\Documents\python\arl xml\turn 24 reader"", line 52, in &lt;module&gt;
    unitCount   = getText(evoNode.getElementsByTagName(""count"")[0].childNodes)
IndexError: list index out of range
</code></pre>

<p>it was fine for the first couple of times I ran it then, I dunno if I changed it or not by accident, but now it's throwing the error.</p>

<p>This is an example of the section of the xml it's trying to use;</p>

<pre><code>- &lt;unit&gt;
  &lt;count&gt;1200&lt;/count&gt; 
  &lt;type&gt;Zweihander Doppelsoldners&lt;/type&gt; 
  &lt;typeid&gt;102&lt;/typeid&gt; 
  &lt;/unit&gt;
</code></pre>

<p>and here's the code that it's complains about;</p>

<pre><code>   for unitNode in node.getElementsByTagName('unit'):
      unitName      = getText(evoNode.getElementsByTagName(""type"")[0].childNodes)
      unitId     = getText(evoNode.getElementsByTagName(""typeid"")[0].childNodes)
      unitCount   = getText(evoNode.getElementsByTagName(""count"")[0].childNodes)

      unitList.append(""%s x %s"" % (unitName, unitCount))
</code></pre>

<p>While I accept that it complains about the count line first because count is the highest of the three on the xml file in the units section I'm still not sure why it's complaining, given that it succesfully runs a very similar set of code from which that was cloned and editted.</p>

<p>Anyone know what I can do or can suggest ways to refine the question?</p>
"
443885,35903,2009-01-14T17:20:28Z,21,"Python: Callbacks, Delegates, ... ? What is common?","<p>Just want to know what's the common way to react on events in python. There are several ways in other languages like callback functions, delegates, listener-structures and so on. 
Is there a common way? Which default language concepts or additional modules are there and which can you recommend?</p>
"
443920,28804,2009-01-14T17:30:34Z,3,"Why don't Django admin ""Today"" and ""Now"" buttons show up in Safari?","<p>I'm developing a Django application that contains a model with a date/time field. On my local copy of the application, the admin page for that particular model shows this for the date/time field:</p>

<p><img src=""http://www.cs.wm.edu/~mpd/images/bugs/django-date-local.png"" alt=""alt text"" /></p>

<p>This is as expected. However, when I deploy to my webserver and use the application from there, I get this:</p>

<p><img src=""http://www.cs.wm.edu/~mpd/images/bugs/django-date-server.png"" alt=""alt text"" /></p>

<p>The application on the server is <em>exactly</em> the same as my local copy, <em>except</em> that I have debugging disabled on the server (but I don't think that should matter...should it?). Why does the admin app on the server differ from the local admin app?</p>

<p><hr /></p>

<h2>Update</h2>

<ul>
<li>The issue seems localized to Safari. The ""Today"" and ""Now"" buttons appear when the admin site is accessed via Firefox. It looks like Safari can't download some of the JavaScript files necessary to show these widgets (strange that Firefox can, though).</li>
<li>I noticed that Safari is receiving a ""304 Not Modified"" code for the following files, but I'm not sure what that means, or how to fix it. Obviously, these are the JavaScript files and images that control the date/time widget:
<ul>
<li><code>RelatedObjectLookup.js</code></li>
<li><code>DateTimeShortcuts.js</code></li>
<li><code>icon_calendar.gif</code></li>
<li><code>icon_clock.gif</code></li>
</ul></li>
</ul>
"
443967,44743,2009-01-14T17:42:50Z,39,How to create python bytes object from long hex string?,"<p>I have a long sequence of hex digits in a string, such as </p>

<blockquote>
  <p>000000000000484240FA063DE5D0B744ADBED63A81FAEA390000C8428640A43D5005BD44</p>
</blockquote>

<p>only much longer, several kilobytes.  Is there a builtin way to convert this to a bytes object in python 2.6/3?</p>
"
444058,33061,2009-01-14T18:07:54Z,5,python - readable list of objects,"<p>This is probably a kinda commonly asked question but I could do with help on this. I have a list of class objects and I'm trying to figure out how to make it print an item from that class but rather than desplaying in the;</p>

<pre><code>&lt;__main__.evolutions instance at 0x01B8EA08&gt;
</code></pre>

<p>but instead to show a selected attribute of a chosen object of the class. Can anyone help with that?</p>
"
444475,21711,2009-01-14T20:08:32Z,17,"sqlalchemy, turning a list of IDs to a list of objects","<p>I have sequence of IDs I want to retrieve. It's simple:</p>

<pre><code>session.query(Record).filter(Record.id.in_(seq)).all()
</code></pre>

<p>Is there a better way to do it?</p>
"
444509,55155,2009-01-14T20:17:06Z,10,How are debug consoles implemented in Python?,"<p>I've seen a couple of Python IDE's (e.g. PyDev Extensions, WingIDE) that provide a debug console - an interactive terminal that runs in the context of the method where the breakpoint is. This lets you print members, call other methods and see the results, and redefine methods to try to fix bugs. Cool.</p>

<p>Can anyone tell me how this is implemented? I know there's the Code module, which provides an InteractiveConsole class, but I don't know how this can be run in the context of currently loaded code. I'm quite new to Python, so gentle assistance would be appreciated!</p>
"
444591,41613,2009-01-14T20:46:17Z,76,convert a string of bytes into an int (python),"<p>How can I convert a string of bytes into an int in python? </p>

<p>Say like this: <code>'y\xcc\xa6\xbb'</code></p>

<p>I came up with a clever/stupid way of doing it:</p>

<pre><code>sum(ord(c) &lt;&lt; (i * 8) for i, c in enumerate('y\xcc\xa6\xbb'[::-1]))
</code></pre>

<p>I know there has to be something builtin or in the standard library that does this more simply...</p>

<p>This is different from <a href=""http://stackoverflow.com/questions/209513/convert-hex-string-to-int-in-python"">converting a string of hex digits</a> for which you can use int(xxx, 16), but instead I want to convert a string of actual byte values.</p>

<p>UPDATE:</p>

<p>I kind of like James' answer a little better because it doesn't require importing another module, but Greg's method is faster:</p>

<pre><code>&gt;&gt;&gt; from timeit import Timer
&gt;&gt;&gt; Timer('struct.unpack(""&lt;L"", ""y\xcc\xa6\xbb"")[0]', 'import struct').timeit()
0.36242198944091797
&gt;&gt;&gt; Timer(""int('y\xcc\xa6\xbb'.encode('hex'), 16)"").timeit()
1.1432669162750244
</code></pre>

<p>My hacky method:</p>

<pre><code>&gt;&gt;&gt; Timer(""sum(ord(c) &lt;&lt; (i * 8) for i, c in enumerate('y\xcc\xa6\xbb'[::-1]))"").timeit()
2.8819329738616943
</code></pre>

<p>FURTHER UPDATE:</p>

<p>Someone asked in comments what's the problem with importing another module. Well, importing a module isn't necessarily cheap, take a look:</p>

<pre><code>&gt;&gt;&gt; Timer(""""""import struct\nstruct.unpack(""&gt;L"", ""y\xcc\xa6\xbb"")[0]"""""").timeit()
0.98822188377380371
</code></pre>

<p>Including the cost of importing the module negates almost all of the advantage that this method has. I believe that this will only include the expense of importing it once for the entire benchmark run; look what happens when I force it to reload every time:</p>

<pre><code>&gt;&gt;&gt; Timer(""""""reload(struct)\nstruct.unpack(""&gt;L"", ""y\xcc\xa6\xbb"")[0]"""""", 'import struct').timeit()
68.474128007888794
</code></pre>

<p>Needless to say, if you're doing a lot of executions of this method per one import than this becomes proportionally less of an issue. It's also probably i/o cost rather than cpu so it may depend on the capacity and load characteristics of the particular machine.</p>
"
445037,46914,2009-01-14T22:57:53Z,2,How to make a wx Toolbar buttons larger?,"<p>I've got a wx.Toolbar and I'd like to make the buttons larger.  I've searched and can't seem to find any concrete documentation on how to do this.</p>

<p>I'm also wondering how well this will translate across platforms; what will happen to the buttons and icons on OSX?</p>
"
445595,54873,2009-01-15T04:01:14Z,18,Cleanest way to run/debug python programs in windows,"<p>Python for Windows by default comes with IDLE, which is the barest-bones IDE I've ever encountered.  For editing files, I'll stick to emacs, thank you very much.</p>

<p>However, I want to run programs in some other shell than the crappy windows command prompt, which can't be widened to more than 80 characters.  </p>

<p>IDLE lets me run programs in it <em>if</em> I open the file, then hit F5 (to go Run-> Run Module).    I would rather like to just ""run"" the command, rather than going through the rigmarole of closing the emacs file, loading the IDLE file, etc.  A scan of google and the IDLE docs doesn't seem to give much help about using IDLE's shell but not it's IDE.  </p>

<p>Any advice from the stack overflow guys?  Ideally I'd either like</p>

<ul>
<li><p>advice on running programs using IDLE's shell</p></li>
<li><p>advice on other ways to run python programs in windows outside of IDLE or ""cmd"".</p></li>
</ul>

<p>Thanks,</p>

<p>/YGA</p>
"
445827,37575,2009-01-15T06:07:25Z,13,GAE - How to live with no joins?,"<h2>Example Problem:</h2>

<h3>Entities:</h3>

<ul>
<li>User contains name and a list of friends (User references)</li>
<li>Blog Post contains title, content, date and Writer (User)</li>
</ul>

<h3>Requirement:</h3>

<p>I want a page that displays the title and a link to the blog of the last 10 posts by a user's friend.  I would also like the ability to keep paging back through older entries.</p>

<h2>SQL Solution:</h2>

<p>So in sql land it would be something like:</p>

<pre>
select * from blog_post where user_id in (select friend_id from user_friend where user_id = :userId) order by date
</pre>

<h2>GAE solutions i can think of are:</h2>

<ul>
<li>Load user, loop through the list of friends and load their latest blog posts.  Finally merge all the blog posts to find the latest 10 blog entries</li>
<li>In a blog post have a list of all users that have the writer as a friend.  This would mean a simple read but would result in quota overload when adding a friend who has lots of blog posts.</li>
</ul>

<p>I don't believe either of these solutions will scale. </p>

<p>Im sure others have hit this problem but I've searched, watched google io videos, read other's code ...  What am i missing?</p>
"
445942,NA,2009-01-15T07:38:42Z,3,retrieving XMLHttpRequest parameters in python,"<p>Client-side code submits an object (in the POST request body) or query string (if using GET method) via ajax request to a python cgi script. Please note that the object/query string parameters are <strong>not</strong> coming from a</p>

<pre><code>&lt;form&gt; or &lt;isindex&gt;.
</code></pre>

<p>How can I retrieve these parameters from within the server-side python script using standard library modules (e.g., cgi)?</p>

<p>Thanks very much
<p>
<strong>EDIT:</strong><br>
<em>@codeape</em>: Thanks, but wouldn't that work only for submitted <strong>forms</strong>? In my case, no form is being submitted, just an asynchronous request.<br> Using your script, len(f.keys()) returns 0 if no form is submitted! I can probably recast the request as a form submission, but is there a better way?</p>
"
445980,NA,2009-01-15T08:06:12Z,2,Is there an easy way to send SCSI passthrough on OSX using native python,"<p>On Windows I am able to sent SCSI passthrough to devices using win32file.DeviceIOControl(..), on UN*X I can do it using fnctl.ioctl(...).</p>

<p>I have been searching for something equivalent in OSX that would allow me to send the IOCTL commands using only native python.</p>

<p>I would to send commands to hard drives specifically, not USB devices.</p>

<p>Is there anyway to do it without writing a Kernel Extension or any other code using only standard python libraries? </p>
"
446026,10583,2009-01-15T08:35:50Z,41,Django: how do you serve media / stylesheets and link to them within templates,"<p>Variations of this question have been asked, but I'm still unable to get my stylesheets to load correctly when my templates are rendered.</p>

<p>I'm attempting to serve static media from the Django process during development - which is strongly discouraged in production, I'm aware. I'll post my configuration and my template, and hopefully someone can help me to understand where I'm going wrong.</p>

<p>Note that I did try to follow the example on the Django project website, however it doesn't mention how to refer to your stylesheets from a template. I've also tried many different variations of the same thing, so my code/settings may be a little off from what's described.</p>

<p>settings.py</p>

<pre><code>MEDIA_ROOT = 'D:/Dev Tools/django_projects/dso/media'
MEDIA_URL = '/media/'
ADMIN_MEDIA_PREFIX = '/media/'
</code></pre>

<p>urls.py</p>

<pre><code>from django.conf.urls.defaults import *
from django.conf import settings
from django.contrib import admin

admin.autodiscover()

urlpatterns = patterns('',
    (r'^admin/(.*)', admin.site.root),
    (r'^ovramt/$', 'dso.ovramt.views.index'),
)

if settings.DEBUG:
    urlpatterns += patterns('',
        (r'^media/(?P&lt;path&gt;.*)$', 'django.views.static.serve', {'document_root': settings.MEDIA_ROOT}),
    )
</code></pre>

<p>Within my template:</p>

<pre><code>&lt;head&gt; 
&lt;title&gt; {% block title %} DSO Template {% endblock %} &lt;/title&gt; 
&lt;meta http-equiv=""Content-Type"" content=""text/html;charset=utf-8"" &gt;
&lt;link rel=""stylesheet"" type=""text/css"" href=""../media/styles.css""&gt;
&lt;/head&gt;
</code></pre>

<p>I assure you, the files (templates/media) are in the correct directory on my file system. If there's any extra information I need to provide, please post a comment.</p>

<hr>

<p>Edit:  </p>

<p>One of the problems I was having was the use of a '/' prepending my links. If the forward slash is prepended, the link is opened from the root of the site. If there is no forward slash, the link is opened in the current level. An example:</p>

<p>www.example.com/application/ has a link ""/app2/ and a link ""app3/"".<br>
app2 will open at www.example.com/app2/ and app3 will open at www.example.com/application/app3/. This was confusing me I think.</p>
"
446052,116,2009-01-15T08:45:28Z,194,How can I check for Python version in a program that uses new language features?,"<p>If I have a Python script that requires at least a particular
version of Python, what is the correct way to fail gracefully
when an earlier version of Python is used to launch the script?</p>

<p>How do I get control early enough to issue an error message
and exit?</p>

<p>For example, I have a program that uses the ternery operator (new in 2.5) and ""with"" blocks
(new in 2.6).  I wrote a simple little interpreter-version
checker routine which is the first thing the script would
call ... except it doesn't get that far. Instead, the
script fails during python compilation, before my routines
are even called. Thus the user of the script sees some very
obscure synax error tracebacks - which pretty much require
an expert to deduce that it is simply the case of running
the wrong version of Python.</p>

<p>I know how to check the version of Python. The issue is that some syntax is illegal in older versions of Python. Consider this program:</p>

<pre><code>import sys
if sys.version_info &lt; (2, 4):
    raise ""must use python 2.5 or greater""
else:
    # syntax error in 2.4, ok in 2.5
    x = 1 if True else 2
    print x
</code></pre>

<p>When run under 2.4, I want this result</p>

<pre><code>$ ~/bin/python2.4 tern.py 
must use python 2.5 or greater
</code></pre>

<p>and not this result:</p>

<pre><code>$ ~/bin/python2.4 tern.py 
  File ""tern.py"", line 5
    x = 1 if True else 2
           ^
SyntaxError: invalid syntax
</code></pre>

<p>(Channeling for a coworker.)</p>
"
446209,745,2009-01-15T10:02:59Z,34,Possible values from sys.platform?,"<p>What are the possible return values from the following command?</p>

<pre><code>import sys
print sys.platform
</code></pre>

<p>I know there is a lot of possibilities, so I'm mainly interested in the ""main"" ones (Windows, Linux, Mac OS)</p>
"
446222,1002,2009-01-15T10:08:25Z,5,How do I reverse Unicode decomposition using Python?,"<p>Using Python 2.5, I have some text in stored in a unicode object:</p>

<blockquote>
  <p>Dinis e Isabel, uma difı´cil relac¸a˜o
  conjugal e polı´tica</p>
</blockquote>

<p>This appears to be <a href=""http://www.unicode.org/reports/tr15/#Decomposition"">decomposed Unicode</a>. Is there a generic way in Python to reverse the decomposition, so I end up with:</p>

<blockquote>
  <p>Dinis e Isabel, uma difícil relação
  conjugal e política</p>
</blockquote>
"
446685,3208,2009-01-15T13:21:14Z,21,How can I deploy a Perl/Python/Ruby script without installing an interpreter?,"<p>I want to write a piece of software which is essentially a regex data scrubber. I am going to take a contact list in CSV and remove all non-word characters and such from the person's name.</p>

<p>This project has Perl written all over it but my client base is largely non-technical and installing Perl on Windows would not be worth it for them.</p>

<p>Any ideas on how I can use a Perl/Python/Ruby type language without all the headaches of getting the interpreter on their computer?</p>

<p>Thought about web for a second but it would not work for business reasons.</p>
"
446782,46646,2009-01-15T13:48:51Z,0,Getting out of a function in Python,"<p>I want to get out of a function when an exception occurs or so.
I want to use other method than 'return'</p>
"
446869,55435,2009-01-15T14:12:21Z,3,What's the best way to specify a proxy with username and password for an **https** connection in python?,"<p>I read somewhere that currently urllib2 doesn't support authenticated https connection. My proxy uses a basic authentication only, but how to open an https based webpage through it . 
Please help me. </p>

<p>Thanks.</p>
"
446912,15622,2009-01-15T14:24:18Z,2,python web-services: returning a fault from the server using ZSI,"<p>I'm interested in writing a python client for a web-service, and for testing purposes it would be very interesting also to have a simple stub server. I'm using python 2.3, and ZSI 2.0.</p>

<p>My problem is that I do not manage to return an exception from the server.</p>

<p>If I raise an exception of the type used for the soap fault in the wsdl, I get the TypeError 'exceptions must be classes, instances, or strings (deprecated), not EmptyStringException_Def'. I thought this meant that the fault object was not a subclass of Exception, but modifying the generated code in this way did not help - and of course, not having to modify the generated code would be much better :)</p>

<p>If I return the fault object as part of the response, it is just ignored.</p>

<p>I couldn't find any documentation about faults handling in ZSI. Any hints?</p>

<p>Here's a sample code for a server of a very simple service with just one method, spellBackwards, which should return a soap fault if the input string is empty:</p>

<pre><code>#!/usr/bin/env python
from ZSI.ServiceContainer import AsServer
from SpellBackwardsService_services_server import *
from SpellBackwardsService_services_types import *
class SpellBackwardsServiceImpl(SpellBackwardsService):
    def soap_spellBackwards(self, ps):
        response = SpellBackwardsService.soap_spellBackwards(self, ps)
        input = self.request._in
        if len(input) != 0:
            response._out = input[::-1]
        else:
            e = ns0.EmptyStringException_Def(""fault"")
            e._reason = ""Empty input string""

            # The following just produces an empty return message:
            # response._fault = e

            # The following causes TypeError
            # raise e

        return response

AsServer(port=8666, services=[SpellBackwardsServiceImpl(),])
</code></pre>
"
447015,1353085,2009-01-15T14:48:24Z,5,Where to get/How to build Windows binary of mod_wsgi with python 3.0 support?,"<p>I wanted to experiment a little with python 3.0 at home. I got python 3.0 working, I've played around with some scripts, and I thought it would be fun to try to make a small web-project with it.</p>

<p>As I was googling, it turned out, that mod_python, for some reasons, will not be able to support python 3.0.</p>

<p>The only other alternative I've found is <a href=""http://code.google.com/p/modwsgi/"">mod_wsgi</a>.</p>

<p>On the main page of the <a href=""http://code.google.com/p/modwsgi/"">mod_wsgi</a> project, it says, that if you want to play with python 3.0, you have to get the latest version from subversion repository. I was wondering, if there is somewhere a pre-built windows binaries available?</p>

<p>If there are no such binaries, then I'd be thankful for any resources about building it with VC++ 2008. Or maybe even general resources about building apache and it's modules with VC++ 2008. Thanks.</p>

<p>Oh and, I'm using the latest Apache 2.2 release.</p>

<p>EDIT: Will it be a problem, if I'll be using the official apache build with my own build of a mod_wsgi (I used depends.exe on apache, and seems that it's not built with VC++ 2008)?</p>
"
447086,8206,2009-01-15T15:09:57Z,11,Python's re module - saving state?,"<p>One of the biggest annoyances I find in Python is the inability of the <code>re</code> module to save its state without explicitly doing it in a match object. Often, one needs to parse lines and if they comply a certain regex take out values from them by the same regex. I would like to write code like this:</p>

<pre><code>if re.match('foo (\w+) bar (\d+)', line):
  # do stuff with .group(1) and .group(2)
elif re.match('baz whoo_(\d+)', line):
  # do stuff with .group(1)
# etc.
</code></pre>

<p>But unfortunately it's impossible to get to the matched object of the previous call to <code>re.match</code>, so this is written like this:</p>

<pre><code>m = re.match('foo (\w+) bar (\d+)', line)
if m:
  # do stuff with m.group(1) and m.group(2)
else:
  m = re.match('baz whoo_(\d+)', line)
  if m:
    # do stuff with m.group(1)
</code></pre>

<p>Which is rather less convenient and gets really unwieldy as the list of <code>elif</code>s grows longer.</p>

<p>A hackish solution would be to wrap the re.match and re.search in my own objects that keep state somewhere. Has anyone used this? Are you aware of semi-standard implementations (in large frameworks or something)?</p>

<p>What other workarounds can you recommend?
Or perhaps, am I just misusing the module and could achieve my needs in a cleaner way?</p>

<p>Thanks in advance</p>
"
447107,41613,2009-01-15T15:13:59Z,122,What is the difference between encode/decode?,"<p>I've never been sure that I understand the difference between str/unicode decode and encode.</p>

<p>I know that <code>str().decode()</code> is for when you have a string of bytes that you know has a certain character encoding, given that encoding name it will return a unicode string.</p>

<p>I know that <code>unicode().encode()</code> converts unicode chars into a string of bytes according to a given encoding name.</p>

<p>But I don't understand what <code>str().encode()</code> and <code>unicode().decode()</code> are for. Can anyone explain, and possibly also correct anything else I've gotten wrong above?</p>

<p>EDIT:</p>

<p>Several answers give info on what <code>.encode</code> does on a string, but no-one seems to know what <code>.decode</code> does for unicode.</p>
"
447117,53390,2009-01-15T15:15:31Z,16,Django: Increment blog entry view count by one. Is this efficient?,"<p>I have the following code in my index view.</p>

<pre><code>latest_entry_list = Entry.objects.filter(is_published=True).order_by('-date_published')[:10]
for entry in latest_entry_list:
    entry.views = entry.views + 1
    entry.save()
</code></pre>

<p>If there are ten (the limit) rows returned from the initial query, will the save issue 10 seperate updated calls to the database, or is Django ""smart"" enough to issue just one update call?</p>

<p>Is there a more efficient method to achieve this result?</p>
"
447875,23402,2009-01-15T18:27:40Z,8,urlsafe_b64encode always ends in '=' ?:,"<p>I think this must be a stupid question, but why do the results of urlsafe_b64encode() always end with a '=' for me?
'=' isn't url safe?</p>

<pre><code>from random import getrandbits
from base64 import urlsafe_b64encode
from hashlib import sha256
from time import sleep

def genKey():
   keyLenBits = 64
   a = str(getrandbits(keyLenBits))
   b = urlsafe_b64encode(sha256(a).digest())
   print b

while 1:
   genKey()
   sleep(1)
</code></pre>

<p>output :</p>

<pre><code>DxFOVxWvvzGdOSh2ARkK-2XPXNavnpiCkD6RuKLffvA=
xvA99ZLBrLvtf9-k0-YUFcLsiKl8Q8KmkD7ahIqPZ5Y=
jYbNK7j62KCBA5gnoiSpM2AGOPxmyQTIJIl_wWdOwoY=
CPIKkXPfIX4bd8lQtUj1dYG3ZOBxmZTMkVpmR7Uvu4s=
HlTs0tBW805gaxfMrq3OPOa6Crg7MsLSLnqe-eX0JEA=
FKRu0ePZEppHsvACWYssL1b2uZhjy9UU5LI8sWIqHe8=
aY_kVaT8kjB4RRfp3S6xG2vJaL0vAwQPifsBcN1LYvo=
6Us3XsewqnEcovMb5EEPtf4Fp4ucWfjPVso-UkRuaRc=
_vAI943yOWs3t2F6suUGy47LJjQsgi_XLiMKhYZnm9M=
CcUSXVqPNT_eb8VXasFXhvNosPOWQQWjGlipQp_68aY=
</code></pre>
"
448034,16148,2009-01-15T19:09:13Z,5,Multithreaded Resource Access - Where Do I Put My Locks?,"<p>I have threaded code where each thread needs to write to the same file.  To prevent concurrency issues, I am using a Lock object.</p>

<p>My question is whether I am using the Lock correctly.  If I set the lock from within each thread, is that lock global or only specific to that specific thread?</p>

<p>Basically, should I create a Lock first and pass its reference to each thread, or is it ok to set it from within the thread like I do here:</p>

<pre><code>import time
from threading import Thread, Lock

def main():
    for i in range(20):
        agent = Agent(i)
        agent.start()

class Agent(Thread):
    def __init__(self, thread_num):
        Thread.__init__(self)
        self.thread_num = thread_num

    def run(self):
        while True:
            print 'hello from thread %s' % self.thread_num
            self.write_result()   

    def write_result(self):
        lock = Lock()
        lock.acquire()
        try:
            f = open('foo.txt', 'a')
            f.write('hello from thread %s\n' % self.thread_num)
            f.flush()
            f.close()
        finally:
            lock.release()

if __name__ == '__main__':
    main()
</code></pre>
"
448095,1469605,2009-01-15T19:23:22Z,6,Porting library from Java to Python,"<p>I'm about to port a smallish library from Java to Python and wanted some advice (smallish ~ a few thousand lines of code).  I've studied the Java code a little, and noticed some design patterns that are common in both languages.  However, there were definitely some Java-only idioms (singletons, etc) present that are generally not-well-received in Python-world.</p>

<p>I know at least one tool (j2py) exists that will turn a .java file into a .py file by walking the AST.  Some initial experimentation yielded less than favorable results.</p>

<p>Should I even be considering using an automated tool to generate some code, or are the languages different enough that any tool would create enough re-work to have justified writing from scratch?  </p>

<p>If tools aren't the devil, are there any besides j2py that can at least handle same-project import management?  I don't expect any tool to match 3rd party libraries from one language to a substitute in another.</p>
"
448120,55565,2009-01-15T19:28:59Z,5,Filtering models with ReferenceProperties,"<p>I'm using google app engine, and am having trouble writing querys to filter ReferenceProperties.</p>

<p>eg.</p>

<pre><code>class Group(db.Model):
    name = db.StringProperty(required=True)
    creator = db.ReferenceProperty(User)

class GroupMember(db.Model):
    group = db.ReferenceProperty(Group)
    user = db.ReferenceProperty(User)
</code></pre>

<p>And I have tried writing something like this:</p>

<pre><code>members = models.GroupMember.all().filter('group.name =', group_name)
</code></pre>

<p>and various other things that don't work. Hopefully someone can give me a prod in the right direction...</p>
"
448207,3002,2009-01-15T19:52:18Z,8,Python - downloading a file over HTTP with progress bar and basic authentication,"<p>I'm using <code>urllib.urlretrieve</code> to download a file, and implementing a download progress bar using the <code>reporthook</code> parameter. Since <code>urlretrieve</code> doesn't directly support authentication, I came up with </p>

<pre><code>import urllib

def urlretrieve_with_basic_auth(url, filename=None, reporthook=None, data=None,
                                username="""", password=""""):
    class OpenerWithAuth(urllib.FancyURLopener):
        def prompt_user_passwd(self, host, realm):
            return username, password

    return OpenerWithAuth().retrieve(url, filename, reporthook, data)
</code></pre>

<p>This works -- but it seems like there might be a more direct way to do this (maybe with urllib2 or httplib2 or...) --any ideas? </p>
"
448271,42974,2009-01-15T20:09:09Z,751,What is __init__.py for?,"<p>What is <code>__init__.py</code> for in a Python source directory?</p>
"
448837,23972,2009-01-15T22:58:46Z,18,How do I create a webpage with buttons that invoke various Python scripts on the system serving the webpage?,"<p>I'm a hobbyist (and fairly new) programmer who has written several useful (to me) scripts in python to handle various system automation tasks that involve copying, renaming, and downloading files amongst other sundry activities.</p>

<p>I'd like to create a web page served from one of my systems that would merely present a few buttons which would allow me to initiate these scripts remotely.</p>

<p>The problem is that I don't know where to start investigating how to do this.  Let's say I have a script called:</p>

<p>*file_arranger.py*</p>

<p>What do I need to do to have a webpage execute that script?  This isn't meant for public consumption, so anything lightweight would be great.  For bonus points, what do I need to look into to provide the web user with the output from such scripts?</p>

<p>edit:  The first answer made me realize I forgot to include that this is a Win2k3 system.</p>
"
449055,34170,2009-01-16T00:02:42Z,6,Setting up Python on Windows/ Apache?,"<p>I want to get a simple Python ""hello world"" web page script to run on Windows Vista/ Apache but hit different walls. I'm using WAMP. I've installed <code>mod_python</code> and the module shows, but I'm not quite sure what I'm supposed to do in e.g. http.conf (things like AddHandler mod_python .py either bring me to a file not found, or a forbidden, or module not found errors when accessing <a href=""http://localhost/myfolder/index.py"">http://localhost/myfolder/index.py</a>). I can get <code>mod_python.publisher</code> to work but do I ""want"" this/ need this?</p>

<p>Can anyone help?</p>

<p>Thanks!</p>
"
449168,23599,2009-01-16T01:11:49Z,5,Are there any good 3rd party GUI products for Python?,"<p>In .Net you have companies like DevEpxress, and Infragistics that offer a range of GUI widgets.  Is there any market like that for Python GUI widgets?  I'm thinking specifically about widgets like the DevExpress xtraGrid Suite.</p>

<p>Edit 01-16-09:  For Example:</p>

<p><a href=""http://www.devexpress.com/Downloads/NET/OnlineDemos.xml"" rel=""nofollow"">http://www.devexpress.com/Downloads/NET/OnlineDemos.xml</a>
<a href=""http://demos.devexpress.com/ASPxGridViewDemos/"" rel=""nofollow"">http://demos.devexpress.com/ASPxGridViewDemos/</a></p>

<p><a href=""http://www.infragistics.com/products/default.aspx"" rel=""nofollow"">http://www.infragistics.com/products/default.aspx</a></p>
"
449560,46646,2009-01-16T05:07:12Z,271,How do I determine the size of an object in Python?,"<p>In C, we can find the size of an <code>int</code>, <code>char</code>, etc. I want to know how to get size of objects like a string, integer, etc. in Python.</p>

<p>Related question: <a href=""http://stackoverflow.com/questions/135664/how-many-bytes-per-element-are-there-in-a-python-list-tuple"">How many bytes per element are there in a Python list (tuple)?</a></p>

<p>I am using an XML file which contains size fields that specify the size of value. I must parse this XML and do my coding. When I want to change the value of a particular field, I will check the size field of that value. Here I want to compare whether the new value that I'm gong to enter is of the same size as in XML. I need to check the size of new value. In case of a string I can say its the length. But in case of int, float, etc. I am confused.</p>
"
449734,426,2009-01-16T07:09:38Z,2,"Is there a tool for converting VB to a scripting language, e.g. Python or Ruby?","<p>I've discovered <a href=""http://vb2py.sourceforge.net/"" rel=""nofollow"">VB2Py</a>, but it's been silent for almost 5 years. Are there any other tools out there which could be used to convert VB6 projects to Python, Ruby, Tcl, whatever?</p>
"
449775,NA,2009-01-16T07:43:22Z,9,How can I split a url string up into separate parts in Python?,"<p>I decided that I'll learn python tonight :)
I know C pretty well (wrote an OS in it) so I'm not a noob in programming so everything in python seems pretty easy, but I don't know how to solve this problem :
let's say I have this address:</p>

<p><a href=""http://example.com/random/folder/path.html"">http://example.com/random/folder/path.html</a> 
Now how can I create two strings from this, one containing the ""base"" name of the server, so in this example it would be
<a href=""http://example.com/"">http://example.com/</a> 
and another containing the thing without the last filename, so in this example it would be
<a href=""http://example.com/random/folder/"">http://example.com/random/folder/</a> 
.
Also I of course know the possibility to just find the 3rd and last slash respectively but maybe you know a better way :]
Also it would be cool to have the trailing slash in both cases but I don't care since it can be added easily.
So anyone has a good, fast, effective solution for this? Or is there only ""my"" solution, finding the slashes?</p>

<p>Thanks!</p>
"
450210,46308,2009-01-16T12:01:24Z,5,How to check if a file can be created inside given directory on MS XP/Vista?,"<p>I have a code that creates file(s) in user-specified directory. User can point to a directory in which he can't create files, but he can rename it.</p>

<p>I have created directory for test purposes, let's call it <code>C:\foo</code>.  </p>

<p>I have following permissions to <code>C:\foo</code>:  </p>

<ul>
<li>Traversing directory/Execute file  </li>
<li>Removing subfolders and files</li>
<li>Removing</li>
<li>Read permissions</li>
<li>Change permissions</li>
<li>Take ownership</li>
</ul>

<p>I don't have any of the following permissions to <code>C:\foo</code>:  </p>

<ul>
<li>Full Control  </li>
<li>File creation  </li>
<li>Folder creation  </li>
</ul>

<p>I have tried following approaches, so far:</p>

<p><code><br />
os.access('C:\foo', os.W_OK) == True  </p>

<p>st = os.stat('C:\foo')<br />
mode = st[stat.ST_MODE]<br />
mode &amp; stat.S_IWRITE == True 
</code>  </p>

<p>I believe that this is caused by the fact that I can rename folder, so it is changeable for me. But it's content - not. </p>

<p>Does anyone know how can I write code that will check for a given directory if current user has permissions to create file in that directory?</p>

<p>In brief - I want to check if current user has <strong>File creation</strong> and <strong>Folder creation</strong> permissions for given folder name.</p>

<p>EDIT: The need for such code arisen from the Test case no 3 from 'Certified for Windows Vista' program, which states: </p>

<blockquote>
  <ol>
  <li>The application must not allow the Least-Privileged user to save any files to Windows System directory in order to pass this test case.  </li>
  </ol>
</blockquote>

<p>Should this be understood as 'Application may try to save file in Windows System directory, but shouldn't crash on failure?' or rather 'Application has to perform security checks before trying to save file?' </p>

<p>Should I stop bothering just because Windows Vista itself won't allow the Least-Privileged user to save any files in %WINDIR%? </p>
"
450290,14752,2009-01-16T12:33:20Z,1,Python Path,"<p>I am installing active python, django. I really dont know how to set the python path in vista environment system. first of all will it work in vista.</p>
"
450306,52568,2009-01-16T12:38:18Z,2,Deleting lines from wx.TextCtrl,"<p>I am using a wx.TextCtrl to output text from a network daemon.<br />
As the output is quite verbose, the size of text in the TextCtrl can become huge (BTW is there any limitation on the size of the contents of a TextCtrl?)<br />
I would like to delete the top N lines from the TextCtrl when TextCtrl.GetNumberOfLines() exceeds a predefined treshold.
What is the best way to accomplish this?</p>
"
450787,53646,2009-01-16T15:39:35Z,2,Cookie Problem in Python,"<p>I'm working on a simple HTML scraper for Hulu in python 2.6 and am having problems with logging on to my account.  Here's my code so far:</p>

<pre><code>import urllib
import urllib2
from cookielib import CookieJar
#make a cookie and redirect handlers
cookies = CookieJar() 
cookie_handler= urllib2.HTTPCookieProcessor(cookies)
redirect_handler= urllib2.HTTPRedirectHandler()

opener = urllib2.build_opener(redirect_handler,cookie_handler)#make opener w/ handlers

#build the url
login_info = {'username':USER,'password':PASS}#USER and PASS are defined
data = urllib.urlencode(login_info)

req = urllib2.Request(""http://www.hulu.com/account/authenticate"",data)#make the request
test = opener.open(req) #open the page
print test.read() #print html results
</code></pre>

<p>The code compiles and runs, but all that prints is:</p>

<pre><code>Login.onError(""Please \074a href=\""/support/login_faq#cant_login\""\076enable cookies\074/a\076 and try again."");
</code></pre>

<p>I assume there is some error in how I'm handling cookies, but just can't seem to spot it.  I've heard Mechanize is a very useful module for this type of program, but as this seems to be the only speed bump left, I was hoping to find my bug. </p>
"
450883,4066,2009-01-16T15:59:54Z,0,ImportError when using Google App Engine,"<p>When I add the following line to Google's helloworld example:</p>

<pre><code>  from reportlab.pdfgen import canvas
</code></pre>

<p>I get the following error:</p>

<pre><code>  &lt;type 'exceptions.ImportError'&gt;: No module named reportlab.pdfgen
</code></pre>

<p>I can get at the reportlab.pdfgen library from the python console.  Why can't I get at it from google's dev_appserver?</p>
"
451690,22468,2009-01-16T19:45:51Z,3,What's the most efficient way to access sibling dictionary value in a Python dict?,"<p>In Python, I've got a list of dictionaries that looks like this:</p>

<pre><code>matchings = [
    {'id': 'someid1', 'domain': 'somedomain1.com'},
    {'id': 'someid2', 'domain': 'somedomain2.com'},
    {'id': 'someid3', 'domain': 'somedomain3.com'}
]
</code></pre>

<p>and, I have a variable:</p>

<pre><code>the_id = 'someid3'
</code></pre>

<p>What's the most efficient way to retrieve the domain value of the item?</p>
"
451952,36330,2009-01-16T20:51:01Z,6,What is the correct way to backup ZODB blobs?,"<p>I am using plone.app.blob to store large ZODB objects in a blobstorage directory. This reduces size pressure on Data.fs but I have not been able to find any advice on backing up this data.</p>

<p>I am already backing up Data.fs by pointing a network backup tool at a directory of repozo backups. Should I simply point that tool at the blobstorage directory to backup my blobs? </p>

<p>What if the database is being repacked or blobs are being added and deleted while the copy is taking place? Are there files in the blobstorage directory that must be copied over in a certain order?</p>
"
451963,31610,2009-01-16T20:53:50Z,24,Making a method private in a python subclass,"<p>Is it possible to make a public method private in a subclass ? I don't want other classes extending this one to be able to call some of the methods . Here is an example :</p>

<pre><code>class A:
    def __init__(self):
        #do something here

    def method(self):
        #some code here

class B(A):
    def __init__(self):
        A.__init__(self)
        #additional initialization goes here

    def method(self):
        #this overrides the method ( and possibly make it private here )
</code></pre>

<p>from this point forward , I don't want any class that extends from B to be able to call <code>method</code> .
Is this possible ?</p>

<p>EDIT : a ""logical"" reason for this is that I don't want users to call methods in wrong order.</p>
"
452018,56013,2009-01-16T21:08:16Z,2,Python and Bluetooth/OBEX,"<p>Is there any Python libraries that will let me send files with OBEX (OBject EXchange) and that works cross-platform (Windows, OS X, Linux)? I have found Lightblue, which works for Linux and OS X, but not for Windows.</p>

<p>If none such lib exists, are there any decent ones that only works in Windows?</p>
"
452074,4066,2009-01-16T21:24:12Z,10,Creating a gradient fill in a PDF file using reportlab,"<p>Is it possible to create a gradient fill in a PDF using <a href=""http://www.reportlab.org/"">ReportLab</a> (python)?</p>
"
452104,42974,2009-01-16T21:31:57Z,238,Is it worth using Python's re.compile?,"<p>Is there any benefit in using compile for regular expressions in Python?</p>

<pre><code>h = re.compile('hello')
h.match('hello world')
</code></pre>

<p>vs</p>

<pre><code>re.match('hello', 'hello world')
</code></pre>
"
452283,54964,2009-01-16T22:26:45Z,38,How can I install the Beautiful Soup module on the Mac?,"<p>I read this without finding the solution: <a href=""http://docs.python.org/install/index.html"">http://docs.python.org/install/index.html</a></p>
"
452300,27059,2009-01-16T22:37:18Z,51,Python object.__repr__(self) should be an expression?,"<p>I was looking at the builtin object methods in the <a href=""http://docs.python.org/reference/datamodel.html#objects-values-and-types"">Python documentation</a>, and I was interested in the documentation for <code>object.__repr__(self)</code>. Here's what it says:</p>

<blockquote>
  <p>Called by the repr() built-in function
  and by string conversions (reverse
  quotes) to compute the “official”
  string representation of an object. If
  at all possible, this should look like
  a valid Python expression that could
  be used to recreate an object with the
  same value (given an appropriate
  environment). If this is not possible,
  a string of the form &lt;...some useful
  description...> should be returned.
  The return value must be a string
  object. If a class defines <strong>repr</strong>()
  but not <strong>str</strong>(), then <strong>repr</strong>() is
  also used when an “informal” string
  representation of instances of that
  class is required.</p>
  
  <p>This is typically used for debugging,
  so it is important that the
  representation is information-rich and
  unambiguous</p>
</blockquote>

<p>The most interesting part to me, was...</p>

<blockquote>
  <p>If at all possible, this should look like a valid Python expression that could be used to recreate an object with the same value</p>
</blockquote>

<p>... but I'm not sure exactly what this means. It says it should <em>look</em> like an expression which can be used to recreate the object, but does that mean it should just be an example of the sort of expression you could use, or should it be an actual expression, that can be executed (eval etc..) to recreate the object? Or... should it be just a rehasing of the actual expression which was used, for pure information purposes?</p>

<p>In general I'm a bit confused as to exactly what I should be putting here.</p>
"
452305,46425,2009-01-16T22:38:56Z,9,What are the benefits of using Python for web programming?,"<p>What makes Python stand out for use in web development?  What are some examples of highly successful uses of Python on the web?</p>
"
452430,54964,2009-01-16T23:36:04Z,2,How can I test that I have a Python module successfully installed?,"<p>I tried to install beautifulsoup. I get such an error:<br>
&lt;-- snip --></p>

<pre><code>raise MissingSectionHeaderError(fpname, lineno, line)
ConfigParser.MissingSectionHeaderError: File contains no section headers.
file: /Users/Sam/.pydistutils.cfg, line: 1
'install_lib = ~/Library/Python/$py_version_short/site-packages\n'
</code></pre>

<p>I get an similar error as I run my Python code in vim by: 
:!python %</p>
"
452520,32878,2009-01-17T00:14:24Z,4,A SuggestBox for wxPython?,"<p>Is there a widget for wxPython like the <a href=""http://google-web-toolkit.googlecode.com/svn/javadoc/1.5/index.html"" rel=""nofollow"">SuggestBox</a> in Google Web Toolkit? It is basically a magic text box that can invoke some code to come up with suggestions relevant to whatever the user has entered so far. Like the search box on Google's web page.</p>

<p>If such a widget isn't already floating out there, I'd appreciate a sketch of how I might implement it with the existing widgets.</p>
"
452532,NA,2009-01-17T00:22:25Z,-1,What does this Python message mean?,"<pre><code>ho-fe3fdd00-12:~ Sam$ easy_install BeautifulSoup
Traceback (most recent call last):
  File ""/usr/bin/easy_install"", line 8, in &lt;module&gt;
    load_entry_point('setuptools==0.6c7', 'console_scripts', 'easy_install')()
  File ""/System/Library/Frameworks/Python.framework/Versions/2.5/Extras/lib/python/setuptools/command/easy_install.py"", line 1670, in main
    with_ei_usage(lambda:
  File ""/System/Library/Frameworks/Python.framework/Versions/2.5/Extras/lib/python/setuptools/command/easy_install.py"", line 1659, in with_ei_usage
    return f()
  File ""/System/Library/Frameworks/Python.framework/Versions/2.5/Extras/lib/python/setuptools/command/easy_install.py"", line 1674, in &lt;lambda&gt;
    distclass=DistributionWithoutHelpCommands, **kw
  File ""/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/distutils/core.py"", line 125, in setup
    dist.parse_config_files()
  File ""/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/distutils/dist.py"", line 373, in parse_config_files
    parser.read(filename)
  File ""/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/ConfigParser.py"", line 267, in read
    self._read(fp, filename)
  File ""/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/ConfigParser.py"", line 462, in _read
    raise MissingSectionHeaderError(fpname, lineno, line)
ConfigParser.MissingSectionHeaderError: File contains no section headers.
file: /Users/Sam/.pydistutils.cfg, line: 1
'install_lib = ~/Library/Python/$py_version_short/site-packages\n'
</code></pre>

<p>I am trying to install beautifulsoup.
The first two lines in ~/.pydistutils.cfg:</p>

<pre><code>install_lib = ~/Library/Python/$py_version_short/site-packages
install_scripts = ~/bin
</code></pre>
"
452610,14902,2009-01-17T01:19:13Z,16,How do I create a list of Python lambdas (in a list comprehension/for loop)?,"<p>I want to create a list of lambda objects from a list of constants in Python; for instance:</p>

<pre><code>listOfNumbers = [1,2,3,4,5]
square = lambda x: x * x
listOfLambdas = [lambda: square(i) for i in listOfNumbers]
</code></pre>

<p>This will create a list of lambda objects, however, when I run them:</p>

<pre><code>for f in listOfLambdas:
    print f(),
</code></pre>

<p>I would expect that it would print</p>

<pre><code>1 4 9 16 25
</code></pre>

<p>Instead, it prints:</p>

<pre><code>25 25 25 25 25
</code></pre>

<p>It seems as though the lambdas have all been given the wrong parameter. Have I done something wrong, and is there a way to fix it? I'm in Python 2.4 I think.</p>

<p>EDIT: a bit more of trying things and such came up with this:</p>

<pre><code>listOfLambdas = []
for num in listOfNumbers:
    action = lambda: square(num)
    listOfLambdas.append(action)
    print action()
</code></pre>

<p>Prints the expected squares from 1 to 25, but then using the earlier print statement:</p>

<pre><code>for f in listOfLambdas:
    print f(),
</code></pre>

<p>still gives me all <code>25</code>s. How did the existing lambda objects change between those two print calls?</p>

<p>Related question: <a href=""http://stackoverflow.com/questions/139819/why-results-of-map-and-list-comprehension-are-different"">Why results of map() and list comprehension are different?</a></p>
"
452884,26366,2009-01-17T06:10:41Z,1,What is the best way to handle a bad link given to BeautifulSoup?,"<p>I'm working on something that pulls in urls from delicious and then uses those urls to discover associated feeds. </p>

<p>However, some of the bookmarks in delicious are not html links and cause BS to barf. Basically, I want to throw away a link if BS fetches it and it does not look like html.</p>

<p>Right now, this is what I'm getting. </p>

<pre><code>trillian:Documents jauderho$ ./d2o.py ""green data center"" 
processing http://www.greenm3.com/
processing http://www.eweek.com/c/a/Green-IT/How-to-Create-an-EnergyEfficient-Green-Data-Center/?kc=rss
Traceback (most recent call last):
  File ""./d2o.py"", line 53, in &lt;module&gt;
    get_feed_links(d_links)
  File ""./d2o.py"", line 43, in get_feed_links
    soup = BeautifulSoup(html)
  File ""/Library/Python/2.5/site-packages/BeautifulSoup.py"", line 1499, in __init__
    BeautifulStoneSoup.__init__(self, *args, **kwargs)
  File ""/Library/Python/2.5/site-packages/BeautifulSoup.py"", line 1230, in __init__
    self._feed(isHTML=isHTML)
  File ""/Library/Python/2.5/site-packages/BeautifulSoup.py"", line 1263, in _feed
    self.builder.feed(markup)
  File ""/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/HTMLParser.py"", line 108, in feed
    self.goahead(0)
  File ""/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/HTMLParser.py"", line 150, in goahead
    k = self.parse_endtag(i)
  File ""/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/HTMLParser.py"", line 314, in parse_endtag
    self.error(""bad end tag: %r"" % (rawdata[i:j],))
  File ""/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/HTMLParser.py"", line 115, in error
    raise HTMLParseError(message, self.getpos())
HTMLParser.HTMLParseError: bad end tag: u'&lt;/b  /&gt;', at line 739, column 1
</code></pre>

<p><strong>Update:</strong></p>

<p>Jehiah's answer does the trick. For reference, here's some code to get the content type:</p>

<pre><code>def check_for_html(link):
    out = urllib.urlopen(link)
    return out.info().getheader('Content-Type')
</code></pre>
"
452969,9133,2009-01-17T08:10:48Z,76,Does python have an equivalent to Java Class.forName()?,"<p>I have the need to take a string argument and create an object of the class named in that string in Python.  In Java, I would use <code>Class.forName().newInstance()</code>.  Is there an equivalent in Python?</p>

<hr>

<p>Thanks for the responses.  To answer those who want to know what I'm doing: I want to use a command line argument as the class name, and instantiate it.  I'm actually programming in Jython and instantiating Java classes, hence the Java-ness of the question.  <code>getattr()</code> works great.  Thanks much.</p>
"
453158,56162,2009-01-17T11:19:36Z,5,"What is the practical difference between xml, json, rss and atom when interfacing with Twitter?","<p>I'm new to web services and as an introduction I'm playing around with the Twitter API using the Twisted framework in python. I've read up on the different formats they offer, but it's still not clear to me which one I should use in my fairly simple project.
Specifically the practical difference between using JSON or XML is something I'd like guidance on. All I'm doing is requesting the public timeline and caching it locally.</p>

<p>Thanks.</p>
"
453329,44639,2009-01-17T13:46:27Z,18,Advice regarding IPython + MacVim Workflow,"<p>I've just found <a href=""http://ipython.scipy.org/"">IPython</a> and I can report that I'm in deep love. And the affection was immediate. I think this affair will turn into something lasting, like <a href=""http://stackoverflow.com/questions/431521/run-a-command-in-a-shell-and-keep-running-the-command-when-you-close-the-session#431570"">the one I have with screen</a>. Ipython and screen happen to be the best of friends too so it's a triangular drama. Purely platonic, mind you.</p>

<p>The reason IPython hits the soft spots with me are very much because I generally like command prompts, and especially *nix-inspired prompts with inspiration from ksh, csh (yes, chs is a monster, but as a prompt it sport lots of really good features), bash and zsh. And IPython does sure feel like home for a *nix prompt rider. Mixing the system shell and python is also a really good idea. Plus, of course, IPython helps a lot when solving <a href=""http://www.pythonchallenge.com/"">the Python Challenge</a> riddles. Invaluable even.</p>

<p>Now, I love Vim too. Since I learnt vi back in the days there's no turning back. And I'm on Mac when I have a choice. Now I'd like to glue together my IPython + MacVim workflow. What I've done so far is that I start Ipython using:</p>

<pre><code>ipython -e ""open -a MacVim""
</code></pre>

<p>Thus when I edit from IPython it starts MacVim with the file/module loaded. Could look a bit like so:</p>

<pre><code>In [4]: %run foo #This also ""imports"" foo anew
hello world

In [5]: edit foo
Editing... done. Executing edited code... #This happens immediately
hello world

In [6]: %run foo
hello SO World
</code></pre>

<p>OK. I think this can be improved. Maybe there's a way to tie IPython into MacVim too? Please share your experiences. Of course if you use TextMate or some other fav editor I'm interested too. Maybe some of the lessons are general.</p>
"
453396,56206,2009-01-17T14:50:12Z,7,"Writing a simple ""Rock Paper Scissors"" game bot","<p>I need help with a python game im working on (I just started learning Python about 3 days ago, so I'm still a nOob =)</p>

<p>This is what I came up with:</p>

<pre><code>import random 

from time import sleep 

print ""Please select: "" 
print ""1  Rock"" 
print ""2  Paper"" 
print ""3  Scissors"" 

player = input (""Choose from 1-3: "") 

if player == 1: 
    print ""You choose Rock"" 
    sleep (2) 
    print ""CPU chooses Paper"" 
    sleep (.5) 
    print ""You lose, and you will never win!"" 

elif player == 2: 
    print ""You choose Paper"" 
    sleep (2) 
    print ""CPU chooses Scissors"" 
    sleep (.5) 
    print ""You lose, and you will never win!"" 

else: 
    print ""You choose Scissors"" 
    sleep (2) 
    print ""CPU chooses Rock"" 
    sleep (.5) 
    print ""You lose, and you will never win!""
</code></pre>

<p>and what I want the program to do is to RANDOMLY choose 1 out of the three options (rock paper scissors) no matter what the user inputs!</p>
"
453477,56183,2009-01-17T15:49:11Z,5,Queryset API distinct() does not work?,"<pre><code>class Message(models.Model):
    subject = models.CharField(max_length=100)
    pub_date = models.DateTimeField(default=datetime.now())

class Topic(models.Model):
    title = models.CharField(max_length=100)
    message = models.ManyToManyField(Message, verbose_name='Discussion')
</code></pre>

<p>I want to get order all the topics according to the latest message object attached to that topic.
I executed this query but this does not give the distinct queryset.</p>

<pre><code>&gt;&gt; Topic.objects.order_by('-message__pub_date').distinct()
</code></pre>
"
453576,41718,2009-01-17T16:51:34Z,24,Is there a fast way to generate a dict of the alphabet in Python?,"<p>I want to generate a dict with the letters of the alphabet as the keys, something like </p>

<pre><code>letter_count = {'a': 0, 'b': 0, 'c': 0}
</code></pre>

<p>what would be a fast way of generating that dict, rather than me having to type it in?</p>

<p>Thanks for your help.</p>

<p><b>EDIT</b><br>
Thanks everyone for your solutions :)</p>

<p><a href=""http://stackoverflow.com/users/17160/nosklo"">nosklo's</a>
<a href=""http://stackoverflow.com/questions/453576/simple-python-question-is-there-a-fast-way-to-generate-a-dict-of-the-alphabet#453785"">solution</a> is probably the shortest</p>

<p>Also, thanks for reminding me about the Python <a href=""http://docs.python.org/library/string.html"">string</a> module.</p>
"
453673,54427,2009-01-17T17:41:14Z,5,Is there a Python news site that's the near equivalent of RubyFlow?,"<p>I really like the format and type of links from <a href=""http://rubyflow.com"">RubyFlow</a> for Ruby related topics. Is there an equivalent for Python that's active? There is a <a href=""http://pythonflow.com"">PythonFlow</a>, but I think it's pretty much dead.</p>

<p>I don't really like <a href=""http://planet.python.org/"">http://planet.python.org/</a> because there's lots of non-Python stuff on there and there's very little summarization of posts.</p>
"
453808,54248,2009-01-17T18:51:06Z,5,PYTHONSTARTUP doesn't seem to work,"<p>I'm trying to use the PYTHONSTARTUP environmental variable. I set it to be ""c:\python25\pythonstartup.py"" in My Computer --> Advanced etc., and it doesn't seem to work.</p>

<p>Opening IDLE doesn't run the script, although it recognized the variable:</p>

<pre><code>&gt;&gt;&gt; import os
&gt;&gt;&gt; os.environ['PYTHONSTARTUP']
'c:\\python25\\pythonstartup.py'
&gt;&gt;&gt;
</code></pre>

<p>I'm using XP and Python 2.5.2. I do not wish to upgrade to 3.0 yet.</p>

<p>Thanks</p>
"
454182,36813,2009-01-17T22:22:30Z,4,Invoke Python modules from Java,"<p>I have a Python interface of a graph library written in C - igraph (the name of library). My need is to invoke the python modules pertaining to this graph library from Java code. It goes like this, the core of library is in c. This core has been imported into Python and interfaces to the functions embedded in core are available in Python. My project's rest of the code is in Java and hence I would like to call the graph functions by Java as well.
Jython - which lets you invoke python modules with in Java was an option.I went on trying Jython to discover that it will not work in my case as the core code is in C and Jython wont support anything that is imported as a c dll in python code.I also thought of opting for the approach of calling graph routines directly in c. That is without passing through Python code. I am assuming there must be something which lets you call c code from Java, how ever I am not good in C hence I did not go for it.
My last resort seems to execute Python interpreter from command line using Java. But that is a dirty and shameless. Also to deal with the results produced by Python code I will have to write the results in a file and read it back in java. Again dirty way. 
Is there something that any one can suggest me? Thanks to every one giving time.  </p>

<hr>

<p>Thanks Igal for answering. I had a look at it. At first glance it appears as if it is simply calling the python script. </p>

<pre><code>Jep jep = new Jep(false, SCRIPT_PATH, cl);
jep.set(""query"", query);
jep.runScript(SCRIPT_PATH + file);
jep.close();
</code></pre>

<p>Isnt it very similar to what we would do if called the python interpreter from command line through a Java code.</p>

<pre><code>Runtime runtime = Runtime.getRuntime();
Process proc = runtime.exec(""python test.py"");
</code></pre>

<p>Concern is how do I use the results generated by Python script. The naive way is to write them to file and read it back in Java. I am searching for a smarter approach.Thanks for suggestion anyway.</p>
"
454223,50878,2009-01-17T22:43:53Z,1,"How to create a controller method in Turbogears that can be called from within the controller, or rendered with a template","<p>If you have a controller method like so:</p>

<pre><code>@expose(""json"")
def artists(self, action=""view"",artist_id=None):
    artists=session.query(model.Artist).all()
    return dict(artists=artists)
</code></pre>

<p>How can you call that method from within your controller class, and get the python dict back - rather than the json-encoded string of the dict (which requires you to decode it from json back into a python dict). Is it really necessary to write one function to get the data out of your model, and another to pack that data for use by the templates (KID, JSON)? Why is it that when you call this method from in the same class, e.g.:</p>

<pre><code>artists = self.artists()
</code></pre>

<p>You get a json string, when that's only appropriate if the method is called as part of a HTML request.
What have I missed?</p>
"
454337,49985,2009-01-17T23:58:21Z,13,How do cursors work in Python's DB-API?,"<p>I have been using python with RDBMS' (MySQL and PostgreSQL), and I have noticed that I really do not understand how to use a cursor.</p>

<p>Usually, one have his script connect to the DB via a client DB-API (like psycopg2 or MySQLdb):</p>

<pre><code>connection = psycopg2.connect(host='otherhost', etc)
</code></pre>

<p>And then one creates a cursor:</p>

<pre><code>cursor = connection.cursor()
</code></pre>

<p>And then one can issue queries and commands:</p>

<pre><code>cursor.execute(""SELECT * FROM etc"")
</code></pre>

<p>Now where is the result of the query, I wonder? is it on the server? or a little on my client and a little on my server? And then, if we need to access some results, we fetch 'em:</p>

<pre><code>rows = cursor.fetchone()
</code></pre>

<p>or</p>

<pre><code>rows = cursor.fetchmany()
</code></pre>

<p>Now lets say, I do not retrieve all the rows, and decide to execute another query, what will happen to the previous results? Is their an overhead.</p>

<p>Also, should I create a cursor for every form of command and continuously reuse it for those same commands somehow; I head psycopg2 can somehow optimize commands that are executed many times but with different values, how and is it worth it?</p>

<p>Thx</p>
"
454443,51482,2009-01-18T01:20:33Z,3,Does Django development provide a truly flexible 3 layer architecture?,"<p>A few weeks ago I asked the question <em>""Is a PHP, Python, PostgreSQL design suitable for a non-web business application?""</em> <a href=""http://stackoverflow.com/questions/439759/is-a-php-python-postgresql-design-suitable-for-a-business-application"">http://stackoverflow.com/questions/439759/is-a-php-python-postgresql-design-suitable-for-a-business-application</a></p>

<p>A lot of the answers recommended skipping the <strong>PHP</strong> piece and using <strong>Django</strong> to build the application. As I've explored Django, I've started to question one specific aspect of my goals and how Django comes into play for <strong>a non-web business application</strong>.</p>

<p>Based on my understanding, Django would manage both the view and controller pieces and <strong>PostgreSQL</strong> or <strong>MySQL</strong> would handle the data. But my goal was to clearly separate the layers so that the database, domain logic, and presentation could each be changed without significantly affecting the others. It seems like I'm only separating the M from the VC layers with the Django solution.</p>

<p>So, is it counterproductive for me to build the domain layer in <strong>Python</strong> with an <strong>SQL Alchemy/Elixir ORM tool</strong>, <strong>PostgreSQL</strong> for the database layer, and then still use <strong>Django</strong> or <strong>PHP</strong> for the presentation layer? Is this possible or pure insanity?</p>

<p>Basically, I'd be looking at an architecture of <strong>Django/PHP > Python/SQLAlchemy > PostgreSQL/MySQL</strong>.</p>

<p><em>Edit: Before the fanboys get mad at me for asking a question about Django, just realize: It's a question, not an accusation. If I knew the answer or had my own opinion, I wouldn't have asked!</em></p>
"
454456,49701,2009-01-18T01:27:16Z,19,How do I re.search or re.match on a whole file without reading it all into memory?,"<p>I want to be able to run a regular expression on an entire file, but I'd like to be able to not have to read the whole file into memory at once as I may be working with rather large files in the future. Is there a way to do this? Thanks!</p>

<p><strong>Clarification:</strong> I cannot read line-by-line because it can span multiple lines.</p>
"
454498,4316,2009-01-18T02:07:16Z,4,Find an Image within an Image,"<p>I am looking for the best way to detect an image within another image.  I have a small image and would like to find the location that it appears within a larger image - which will actually be screen captures. Conceptually, it is like a 'Where's Waldo?' sort of search in the larger image.  </p>

<p>Are there any efficient/quick ways to accomplish this?  Speed is more important than memory.</p>

<p>Edit: </p>

<p>The 'inner' image may not always have the same scale but will have the same rotation.  </p>

<p>It is not safe to assume that the image will be perfectly contained within the other, pixel for pixel.</p>
"
454566,54964,2009-01-18T03:04:43Z,3,"How can I make a list in Python like (0,6,12, .. 144)?","<p>I am not sure, whether I should use for -loop. Perhaps, like </p>

<pre><code>for i in range(145): 
  by 6:    //mistake here?
  print i
</code></pre>
"
454648,4977,2009-01-18T04:22:27Z,18,Pythonic macro syntax,"<p>I've been working on an alternative compiler front-end for Python where all syntax is parsed via macros.  I'm finally to the point with its development that I can start work on a superset of the Python language where macros are an integral component.</p>

<p>My problem is that I can't come up with a pythonic macro definition syntax.  I've posted several examples in two different syntaxes in answers below.  Can anyone come up with a better syntax?  It doesn't have to build off the syntax I've proposed in any way -- I'm completely open here.  Any comments, suggestions, etc would be helpful, as would alternative syntaxes showing the examples I've posted.</p>

<p>A note about the macro structure, as seen in the examples I've posted:  The use of MultiLine/MLMacro and Partial/PartialMacro tell the parser how the macro is applied.  If it's multiline, the macro will match multiple line lists; generally used for constructs.  If it's partial, the macro will match code in the middle of a list; generally used for operators.</p>
"
454691,39167,2009-01-18T05:17:19Z,12,Putting separate python packages into same namespace?,"<p>I'm developing a python framework that would have ""addons"" written as separate packages. I.e.:</p>

<pre><code>import myframework
from myframework.addons import foo, bar
</code></pre>

<p>Now, what I'm trying to arrange is so that these addons can be distributed separately from core framework and injected into <code>myframework.addons</code> namespace.</p>

<p>Currently my best solution to this is the following. An add-on would be deployed (most likely into <code>{python_version}/site-packages/</code> like so:</p>

<pre><code>fooext/
fooext/__init__.py
fooext/myframework/
fooext/myframework/__init__.py
fooext/myframework/addons/
fooext/myframework/addons/__init__.py
fooext/myframework/addons/foo.py
</code></pre>

<p>The <code>fooext/myframework/addons/__init__.py</code> would have the pkgutil path extension code:</p>

<pre><code>import pkgutil
__path__ = pkgutil.extend_path(__path__, __name__)
</code></pre>

<p>The problem is that for this to work, the PYTHONPATH needs to have <code>fooext/</code> in it, however the only thing it would have is the parent install directory (most likely, the above-mentioned <code>site-packages</code>). </p>

<p>The solution to this is to have extra code in <code>myframework/addons/__init__.py</code> which would tranverse <code>sys.path</code> and look for any modules with a myframework sub-package, in which case it adds it to <code>sys.path</code> and everything works.</p>

<p>Another idea I had is to write the addon files directly to <code>myframework/addons/</code> install location, but then it would make development and deployed namespace differ.</p>

<p>Is there a better way to accomplish this or perhaps a different approach to the above distribution problem altogether?</p>
"
454725,49701,2009-01-18T06:01:14Z,38,Python get proper line ending,"<p>Is there an easy way to get the type of line ending that the current operating system uses?</p>
"
454854,14752,2009-01-18T09:13:38Z,211,No module named MySQLdb,"<p>I am using Python version 2.5.4 and install MySQL version 5.0 and Django. Django is working fine with Python, but not MySQL. Can anyone help me to solve this issue? I am using it in Vista.</p>
"
454931,NA,2009-01-18T10:30:46Z,2,What's the most efficient way to share large amounts of data between Python and C++,"<p>I'm writing a system that allows python scripts to be executed within a C++ application. </p>

<p>The python scripts are used to modify values within arrays of data (typically 2048x2048x4 arrays of floats)</p>

<p>I'm currently using numpy arrays created using the array API and registered with Python. </p>

<p>In the python scripts I'm accessing the arrays like</p>

<pre><code>for all x in range(0,Width):
    for all y in range(0,Height)
        Array[x][y][0] = blah
        Array[x][y][1] = blah
        Array[x][y][2] = blah
        Array[x][y][3] = blah
</code></pre>

<p>This seems to be pretty slow. Is there a quicker way to set this up?</p>
"
454944,46460,2009-01-18T10:42:53Z,40,Advice on Python/Django and message queues,"<p>I have an application in Django, that needs to send a large number of emails to users in various use cases. I don't want to handle this synchronously within the application for obvious reasons.</p>

<p>Has anyone any recommendations for a message queuing server which integrates well with Python, or they have used on a Django project? The rest of my stack is Apache, mod_python, MySQL.</p>
"
455059,7581,2009-01-18T12:33:03Z,8,Using an ordered dict as object dictionary in python,"<p>I don't know why this doesn't work:</p>

<p>I'm using the <a href=""http://dev.pocoo.org/hg/sandbox/raw-file/tip/odict.py"">odict</a> class from <a href=""http://www.python.org/dev/peps/pep-0372/"">PEP 372</a>, but I want to use it as a <code>__dict__</code> member, i.e.:</p>

<pre><code>class Bag(object):
    def __init__(self):
        self.__dict__ = odict()
</code></pre>

<p>But for some reason I'm getting weird results. This works:</p>

<pre><code>&gt;&gt;&gt; b = Bag()
&gt;&gt;&gt; b.apple = 1
&gt;&gt;&gt; b.apple
1
&gt;&gt;&gt; b.banana = 2
&gt;&gt;&gt; b.banana
2
</code></pre>

<p>But trying to access the actual dictionary doesn't work:</p>

<pre><code>&gt;&gt;&gt; b.__dict__.items()
[]
&gt;&gt;&gt; b.__dict__
odict.odict([])
</code></pre>

<p>And it gets weirder:</p>

<pre><code>&gt;&gt;&gt; b.__dict__['tomato'] = 3
&gt;&gt;&gt; b.tomato
3
&gt;&gt;&gt; b.__dict__
odict.odict([('tomato', 3)])
</code></pre>

<p>I'm feeling very stupid. Can you help me out?</p>
"
455552,42974,2009-01-18T17:39:09Z,40,Break on exception in pydev,"<p>Is it possible to get the pydev debugger to break on exception?</p>
"
455580,NA,2009-01-18T17:51:11Z,331,JSON datetime between Python and JavaScript,"<p>I want to send a datetime.datetime object in serialized form from Python using <a href=""http://en.wikipedia.org/wiki/JSON"">JSON</a> and de-serialize in JavaScript using JSON. What is the best way to do this?</p>
"
455612,NA,2009-01-18T18:16:41Z,610,Limiting floats to two decimal points,"<p>I want <code>a</code> to be rounded to <em>13.95</em>.</p>

<pre><code>&gt;&gt;&gt; a
13.949999999999999
&gt;&gt;&gt; round(a, 2)
13.949999999999999
</code></pre>

<p>The <a href=""https://docs.python.org/2/library/functions.html#round""><code>round</code></a> function does not work the way I expected.</p>
"
455717,893,2009-01-18T19:01:08Z,8,Python 3 development and distribution challenges,"<p>Suppose I've developed a general-purpose end user utility written in Python. Previously, I had just one version available which was suitable for Python later than version 2.3 or so. It was sufficient to say, ""download Python if you need to, then run this script"". There was just one version of the script in source control (I'm using Git) to keep track of.</p>

<p>With Python 3, this is no longer necessarily true. For the foreseeable future, I will need to simultaneously develop two different versions, one suitable for Python 2.x and one suitable for Python 3.x. From a development perspective, I can think of a few options:</p>

<ol>
<li>Maintain two different scripts in the same branch, making improvements to both simultaneously.</li>
<li>Maintain two separate branches, and merge common changes back and forth as development proceeds.</li>
<li>Maintain just one version of the script, plus check in a patch file that converts the script from one version to the other. When enough changes have been made that the patch no longer applies cleanly, resolve the conflicts and create a new patch.</li>
</ol>

<p>I am currently leaning toward option 3, as the first two would involve a lot of error-prone tedium. But option 3 seems messy and my source control system is supposed to be managing patches for me.</p>

<p>For distribution packaging, there are more options to choose from:</p>

<ol>
<li>Offer two different download packages, one suitable for Python 2 and one suitable for Python 3 (the user will have to know to download the correct one for whatever version of Python they have).</li>
<li>Offer one download package, with two different scripts inside (and then the user has to know to run the correct one).</li>
<li>One download package with two version-specific scripts, and a small stub loader that can run in both Python versions, that runs the correct script for the Python version installed.</li>
</ol>

<p>Again I am currently leaning toward option 3 here, although I haven't tried to develop such a stub loader yet.</p>

<p>Any other ideas?</p>
"
456001,42974,2009-01-18T22:09:07Z,15,Is there any advantage in using a Python class?,"<p>I have a Python class full of static methods. What are the advantages and disadvantages of packaging these in a class rather than raw functions?</p>
"
456084,1553,2009-01-18T23:03:45Z,7,"How do I do what strtok() does in C, in Python?","<p>I am learning Python and trying to figure out an efficient way to tokenize a string of numbers separated by commas into a list. Well formed cases work as I expect, but less well formed cases not so much.</p>

<p>If I have this:</p>

<pre><code>A = '1,2,3,4'
B = [int(x) for x in A.split(',')]

B results in [1, 2, 3, 4]
</code></pre>

<p>which is what I expect, but if the string is something more like</p>

<pre><code>A = '1,,2,3,4,'
</code></pre>

<p>if I'm using the same list comprehension expression for B as above, I get an exception. I think I understand why (because some of the ""x"" string values are not integers), but I'm thinking that there would be a way to parse this still quite elegantly such that tokenization of the string a works a bit more directly like <strong><em>strtok(A,"",\n\t"")</em></strong> would have done when called iteratively in C.</p>

<p>To be clear what I am asking; I am looking for an elegant/efficient/typical way in Python to have all of the following example cases of strings:</p>

<pre><code>A='1,,2,3,\n,4,\n'
A='1,2,3,4'
A=',1,2,3,4,\t\n'
A='\n\t,1,2,3,,4\n'
</code></pre>

<p>return with the same list of:</p>

<pre><code>B=[1,2,3,4]
</code></pre>

<p>via some sort of compact expression.</p>
"
456100,68788,2009-01-18T23:13:16Z,3,SCons problem - dont understand Variables class,"<p>I'm working on an SConstruct build file for a project and I'm trying to update from Options to Variables, since Options is being deprecated. I don't understand how to use Variables though. I have 0 python experience which is probably contributing to this.</p>

<p>For example, I have this:</p>

<pre><code>opts = Variables()
opts.Add('fcgi',0)
print opts['fcgi']
</code></pre>

<p>But I get an error:</p>

<pre><code>AttributeError: Variables instance has no attribute '__getitem__':
</code></pre>

<p>Not sure how this is supposed to work</p>
"
456224,54248,2009-01-19T00:33:12Z,0,How to use cvxopt with DSDP?,"<p>I'm trying to use DSDP (semidefinite programming package) with cvxopt. I have both of them installed (matlab version for DSDP). I have Python 2.5.2.</p>

<p>When trying to use </p>

<pre><code>dsp(..., solver='dsdp')
</code></pre>

<p>I get an errors mentioning solvers.dsdp is not installed.</p>

<p>How to I make them work together?</p>
"
456481,49018,2009-01-19T03:53:35Z,40,Can't get Python to import from a different folder,"<p>I can't seem to get Python to import a module in a subfolder. I get the error when I try to create an instance of the class from the imported module, but the import itself succeeds. Here is my directory structure:</p>

<pre><code>Server
    -server.py
    -Models
        --user.py
</code></pre>

<p>Here's the contents of server.py:</p>

<pre><code>from sys import path
from os import getcwd
path.append(getcwd() + ""\\models"") #Yes, i'm on windows
print path
import user

u=user.User() #error on this line
</code></pre>

<p>And user.py:</p>

<pre><code>class User(Entity):
    using_options(tablename='users')

    username = Field(String(15))
    password = Field(String(64))
    email    = Field(String(50))
    status   = Field(Integer)
    created  = Field(DateTime)
</code></pre>

<p>The error is:
AttributeError: 'module' object has no attribute 'User'</p>
"
456649,49701,2009-01-19T05:53:58Z,8,Throttling with urllib2,"<p>is it possible to easily cap the kbps when using <code>urllib2</code>?
If it is, any code examples or resources you could direct me to would be greatly appreciated.</p>
"
456672,NA,2009-01-19T06:08:16Z,46,Class factory in Python,"<p>I'm new to Python and need some advice implementing the scenario below.</p>

<p>I have two classes for managing domains at two different registrars. Both have the same interface, e.g.</p>

<pre><code>class RegistrarA(Object):
    def __init__(self, domain):
        self.domain = domain

    def lookup(self):
        ...

    def register(self, info):
        ...
</code></pre>

<p>and</p>

<pre><code>class RegistrarB(object):
    def __init__(self, domain):
        self.domain = domain

    def lookup(self):
        ...

    def register(self, info):
        ...
</code></pre>

<p>I would like to create a Domain class that, given a domain name, loads the correct registrar class based on the extension, e.g.</p>

<pre><code>com = Domain('test.com') #load RegistrarA
com.lookup()

biz = Domain('test.biz') #load RegistrarB
biz.lookup()
</code></pre>

<p>I know this can be accomplished using a factory function (see below), but is this the best way of doing it or is there a better way using OOP features?</p>

<pre><code>def factory(domain):
  if ...:
    return RegistrarA(domain)
  else:
    return RegistrarB(domain)
</code></pre>
"
456673,46646,2009-01-19T06:09:47Z,0,How to handle the error that occurs on giving wrong number of parameters in a function call in Python?,"<p>When i give wrong number of parameters in a function , i get errors.
How do I handle it?</p>

<p>I gave </p>

<pre><code>def fun_name(...):
    try:
        ...

    except TypeError:
        print 'Wrong no of arg'
</code></pre>

<p>It is not working.</p>

<p>Help please.</p>
"
456753,49018,2009-01-19T06:51:37Z,3,Evaluate my Python server structure,"<p>I'm building a game server in Python and I just wanted to get some input on the architecture of the server that I was thinking up.</p>

<p>So, as we all know, Python cannot scale across cores with a single process. Therefore, on a server with 4 cores, I would need to spawn 4 processes. </p>

<p>Here is the steps taken when a client wishes to connect to the server cluster:</p>

<p>The IP the client initially communicates with is the Gateway node. The gateway keeps track of how many clients are on each machine, and forwards the connection request to the machine with the lowest client count.</p>

<p>On each machine, there is one Manager process and X Server processes, where X is the number of cores on the processor (since Python cannot scale across cores, we need to spawn 4 cores to use 100% of a quad core processor)</p>

<p>The manager's job is to keep track of how many clients are on each process, as well as to restart the processes if any of them crash. When a connection request is sent from the gateway to a manager, the manager looks at its server processes on that machine (3 in the diagram) and forwards the request to whatever process has the least amount of clients.</p>

<p>The Server process is what actually does the communicating with the client.</p>

<p>Here is what a 3 machine cluster would look like. For the sake of the diagram, assume each node has 3 cores.
<img src=""http://img152.imageshack.us/img152/5412/serverlx2.jpg"" alt=""alt text"" /></p>

<p>This also got me thinking - could I implement hot swapping this way? Since each process is controlled by the manager, when I want to swap in a new version of the server process I just let the manager know that it should not send any more connections to it, and then I will register the new version process with the old one. The old version is kept alive as long as clients are connected to it, then terminates when there are no more.</p>

<p>Phew. Let me know what you guys think.</p>
"
456867,14752,2009-01-19T08:19:25Z,14,AttributeError: 'module' object has no attribute 'model',"<p>Can anyone help me please to solve this..</p>

<pre><code>from django.db import models

# Create your models here.
class Poll(models.model):
    question = models.CharField(max_length=200)
    pub_date = models.DateTimeField('date published')

class Choice(models.Model):
    poll = models.ForeignKey(Poll)
    choice = models.CharField(max_length=200)
    votes = models.IntegerField()
</code></pre>

<p>Running:</p>

<pre><code>c:\projects\mysite&gt;python manage.py sql polls
Traceback (most recent call last):
  File ""manage.py"", line 11, in &lt;module&gt;
    execute_manager(settings)
  File ""C:\Python25\Lib\site-packages\django\core\management\__init__.py"", line 340, in execute_manager
    utility.execute()
  File ""C:\Python25\Lib\site-packages\django\core\management\__init__.py"", line 295, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File ""C:\Python25\Lib\site-packages\django\core\management\base.py"", line 195, in run_from_argv
    self.execute(*args, **options.__dict__)
  File ""C:\Python25\Lib\site-packages\django\core\management\base.py"", line 221, in execute
    self.validate()
  File ""C:\Python25\Lib\site-packages\django\core\management\base.py"", line 249, in validate
    num_errors = get_validation_errors(s, app)
  File ""C:\Python25\lib\site-packages\django\core\management\validation.py"", line 28, in get_validation_errors
    for (app_name, error) in get_app_errors().items():
  File ""C:\Python25\lib\site-packages\django\db\models\loading.py"", line 128, in get_app_errors
    self._populate()
  File ""C:\Python25\lib\site-packages\django\db\models\loading.py"", line 57, in _populate
    self.load_app(app_name, True)
  File ""C:\Python25\lib\site-packages\django\db\models\loading.py"", line 72, in load_app
    mod = __import__(app_name, {}, {}, ['models'])
  File ""c:\projects\mysite\..\mysite\polls\models.py"", line 4, in &lt;module&gt;
    class Poll(models.model):
AttributeError: 'module' object has no attribute 'model'
</code></pre>
"
456884,49219,2009-01-19T08:32:06Z,55,"Extending python - to swig, not to swig or Cython","<p>I found the bottleneck in my python code, played around with psycho etc. Then decided to write a c/c++ extension for performance.</p>

<p>With the help of swig you almost don't need to care about arguments etc. Everything works fine.</p>

<p>Now my question: swig creates a quite large py-file which does a lot of 'checkings' and 'PySwigObject' before calling the actual .pyd or .so code.</p>

<p>Does anyone of you have any experience whether there is some more performance to gain if you hand-write this file or let swig do it. </p>
"
456926,NA,2009-01-19T08:52:11Z,1,Code to utilize memory more than 70%,"<p>Please tell me C++/Java code which utilize memory more than 70% .</p>

<p>For Example we have 3 Virtual machine and in memory resources we want to test the<br />
memory utilization as per memory resources allocated by user.</p>
"
457207,367099,2009-01-19T10:43:23Z,9,Cropping pages of a .pdf file,"<p>I was wondering if anyone had any experience in working programmatically with .pdf files. I have a .pdf file and I need to crop every page down to a certain size.</p>

<p>After a quick Google search I found the pyPdf library for python but my experiments with it failed. When I changed the cropBox and trimBox attributes on a page object the results were not what I had expected and appeared to be quite random.</p>

<p>Has anyone had any experience with this? Code examples would be well appreciated, preferably in python.</p>
"
457246,11527,2009-01-19T11:00:38Z,12,What is the best real time plotting widget for wxPython?,"<p>I would like to show a read time graph with one or two curves an up to 50 samples per  second using Python and wxPython.
The widget should support both Win32 and Linux platforms.</p>

<p>Any hints are welcome.</p>

<p>Edited to add:</p>

<p>I don't need to update the display at 50 fps, but up need to show up to 50 samples of data on both curves, with a reasonable update rate for the display (5..10 fps should be okay).</p>

<p>Edited to add:</p>

<p>I have used mathplotlib in a project with good success.
I have then settled for wx.lib.plot for other projects, which I found to be simpler, but somewhat easier to use and consuming less CPU cycles. As wx.lib comes as part of the standard wxPython distribution is is particularly easy to use.</p>
"
457408,41344,2009-01-19T12:10:58Z,36,Is there an easily available implementation of erf() for Python?,"<p>I can implement the error function, erf, myself, but I'd prefer not to. Is there a python package with no external dependencies that contains an implementation of this function? I have found http://pylab.sourceforge.net/packages/included_functions.html>this but this seems to be part of some much larger package (and it's not even clear which one!).</p>

<p>I'm sorry if this is a naive question - I'm totally new to Python.</p>
"
457514,25459,2009-01-19T12:59:53Z,3,How to copy a picture from canvas to clipboard?,"<p>I have some Tkinter canvas and some picture of lines and text on it. Is there an easy way to copy it to a clipboard?</p>
"
457641,24907,2009-01-19T13:57:37Z,1,What is the correct procedure to store a utf-16 encoded rss stream into sqlite3 using python,"<p>I have a python sgi script that attempts to extract an rss items that is posted to it and store the rss in a sqlite3 db.  I am using flup as the WSGIServer.<br>
To obtain the posted content:
    postData = environ[""wsgi.input""].read(int(environ[""CONTENT_LENGTH""]))</p>

<p>To attempt to store in the db:</p>

<pre><code>from pysqlite2 import dbapi2 as sqlite
ldb = sqlite.connect(""/var/vhost/mysite.com/db/rssharvested.db"")
lcursor = ldb.cursor()
lcursor.execute(""INSERT into rss(data) VALUES(?)"", (postData,))
</code></pre>

<p>This results in only the first few characters of the rss being stored in the record:
ÿþ&lt;
I believe the initial chars are the BOM of the rss.</p>

<p>I have tried every permutation I could think of including first encoding rss as utf-8 and then attempting to store but the results were the same.  I could not decode because some characters could not be represented as unicode.</p>

<p>Running python 2.5.2
sqlite 3.5.7</p>

<p>Thanks in advance for any insight into this problem.</p>

<hr>

<p>Here is a sample of the initial data contained in postData as modified by the repr function, written to a file and viewed with less:</p>

<p>'\xef\xbb\xbf</p>

<p>Thanks for the all the replies!  Very helpful.  </p>

<hr>

<p>The sample I submitted didn't make it through the stackoverflow html filters will try again, converting less and greater than to entities (preview indicates this works).</p>

<p>\xef\xbb\xbf&lt;?xml version=""1.0"" encoding=""utf-16""?&gt;&lt;rss xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" xmlns:xsd=""http://www.w3.org/2001/XMLSchema""&gt;&lt;channel&gt;&lt;item d3p1:size=""0"" xsi:type=""tFileItem"" xmlns:d3p1=""http://htinc.com/opensearch-ex/1.0/""&gt;</p>
"
458209,54567,2009-01-19T16:30:57Z,122,Is there a way to detach matplotlib plots so that the computation can continue?,"<p>After these instructions in the Python interpreter one gets a window with a plot:</p>

<pre><code>from matplotlib.pyplot import *
plot([1,2,3])
show()
# other code
</code></pre>

<p>Unfortunately, I don't know how to continue to interactively explore the figure created by <code>show()</code> while the program does further calculations.</p>

<p>Is it possible at all? Sometimes calculations are long and it would help if they would proceed during examination of intermediate results.</p>
"
458311,85185,2009-01-19T16:58:10Z,14,How do I install an .egg file without easy_install in Windows?,"<p>I have Python 2.6 and I want to install easy _ install module. The problem is that the only available installation package of easy _ install for Python 2.6 is an .egg file! What should I do?</p>
"
458436,56763,2009-01-19T17:33:17Z,31,Adding folders to a zip file using python,"<p>I want to create a zip file. Add a folder to the zip file and then add a bunch of files to  that folder.</p>

<p>So I want to end up with a zip file with a single folder with files in.</p>

<p>I dont know if its bad practice to have folders in zip files or something but google gives me nothing on the subject.</p>

<p>I started out with this:</p>

<pre><code>def addFolderToZip(myZipFile,folder):
    folder = folder.encode('ascii') #convert path to ascii for ZipFile Method
    for file in glob.glob(folder+""/*""):
            if os.path.isfile(file):
                print file
                myZipFile.write(file, os.path.basename(file), zipfile.ZIP_DEFLATED)
            elif os.path.isdir(file):
                addFolderToZip(myZipFile,file)

def createZipFile(filename,files,folders):
    curTime=strftime(""__%Y_%m_%d"", time.localtime())
    filename=filename+curTime;
    print filename
    zipFilename=utils.getFileName(""files"", filename+"".zip"")
    myZipFile = zipfile.ZipFile( zipFilename, ""w"" ) # Open the zip file for writing 
    for file in files:
        file = file.encode('ascii') #convert path to ascii for ZipFile Method
        if os.path.isfile(file):
            (filepath, filename) = os.path.split(file)
            myZipFile.write( file, filename, zipfile.ZIP_DEFLATED )

    for folder in  folders:   
        addFolderToZip(myZipFile,folder)  
    myZipFile.close()
    return (1,zipFilename)


(success,filename)=createZipFile(planName,files,folders);
</code></pre>

<p>Taken from: <a href=""http://mail.python.org/pipermail/python-list/2006-August/396166.html"">http://mail.python.org/pipermail/python-list/2006-August/396166.html</a></p>

<p>Which gets rid of all folders and puts all files in the target folder (and its subfolders) into a single zip file. I couldnt get it to add an entire folder.</p>

<p>If I feed the path to a folder in myZipFile.write, I get</p>

<blockquote>
  <p>IOError: [Errno 13] Permission denied: '..\packed\bin'</p>
</blockquote>

<p>Any help is much welcome.</p>

<p>Related question: <a href=""http://stackoverflow.com/questions/296499/how-do-i-zip-the-contents-of-a-folder-using-python-version-2-5"">How do I zip the contents of a folder using python (version 2.5)?</a></p>
"
458550,39167,2009-01-19T18:05:54Z,126,Standard way to embed version into python package?,"<p>Is there a standard way to associate version string with a python package in such way that I could do the following?</p>

<pre><code>import foo
print foo.version
</code></pre>

<p>I would imagine there's some way to retrieve that data without any extra hardcoding, since minor/major strings are specified in <code>setup.py</code> already. Alternative solution that I found was to have <code>import __version__</code> in my <code>foo/__init__.py</code> and then have <code>__version__.py</code> generated by <code>setup.py</code>.</p>
"
458943,56815,2009-01-19T19:56:09Z,3,"wxPython is not throwing exceptions when it should, instead giving raw error messages","<p>I'm coding the menu for an application I'm writing in python, using wxPython libraries for the user interface, and I'm attempting to add icons to some of the menu items.  Because I'm trying to be conscientious about it, I'm trying to limit the damage done if one of the image files referenced doesn't exist, and the most simple method (in my mind) is to use exceptions.</p>

<p>The trouble is, when I link to a file that doesn't exist, an exception isn't thrown.  Instead I get a horrific message box stating:</p>

<p><code>Can't load image from &lt;path&gt;: Image does not exist.</code></p>

<p>This message is exactly the type of thing I'm trying to stop, but even with the broadest exception catching statement nothing works.</p>

<p>This is a cut down version, taking what seems to be relevant, from what I've written:</p>

<pre><code>NewProject = wx.MenuItem(File, -1, ""&amp;New Project\tCtrl+N"", ""Create a new project"")
try:
    # raises an error message but not an exception
    NewProject.SetBitmap(wx.Image( &lt;path&gt;  ), wx.BITMAP_TYPE_PNG).ConvertToBitmap())
except Exception:
    pass
</code></pre>

<p>So these are my questions:   What am I doing wrong?  Am I approaching this in the wrong direction, putting too much emphasis on exceptions, when there are other ways around it (though non that seem in my head to be as simple)?  Is this a bug in the wxPython library, since I'm pretty sure it should be throwing an exception even if it's not the best way around it?</p>

<p>p.s. The best a Google search could do was recommend I converted all the images to python code using the <code>img2py</code> module that comes with wxPython, but I would prefer to keep the images in image format for what I'm doing.</p>
"
459083,56805,2009-01-19T20:40:39Z,64,How do you run your own code alongside Tkinter's event loop?,"<p>My little brother is just getting into programming, and for his Science Fair project, he's doing a simulation of a flock of birds in the sky. He's gotten most of his code written, and it works nicely, but the birds need to move <em>every moment</em>.</p>

<p>Tkinter, however, hogs the time for its own event loop, and so his code won't run. Doing <code>root.mainloop()</code> runs, runs, and keeps running, and the only thing it runs is the event handlers.</p>

<p>Is there a way to have his code run alongside the mainloop (without multithreading, it's confusing and this should be kept simple), and if so, what is it?</p>

<p>Right now, he came up with an ugly hack, tying his <code>move()</code> function to <code>&lt;b1-motion&gt;</code>, so that as long as he holds the button down and wiggles the mouse, it works. But there's got to be a better way.</p>
"
459125,12981,2009-01-19T20:53:54Z,6,Filtering by relation count in SQLAlchemy,"<p>I'm using the SQLAlchemy Python ORM in a Pylons project. I have a class ""Project"" which has a one to many relationship with another class ""Entry"". I want to do a query in SQLAlchemy that gives me all of the projects which have one or more entries associated with them. At the moment I'm doing:</p>

<pre><code>[project for project in Session.query(Project) if len(project.entries)&gt;0]
</code></pre>

<p>which I know isn't ideal, but I can't figure out how to do a filter that does what I require (e.g. Session.query(Project).filter(Project.entries.exists())).</p>

<p>Any ideas?</p>
"
459552,42974,2009-01-19T23:07:02Z,3,BeautifulSoup 3.1 parser breaks far too easily,"<p><em>I was having trouble parsing some dodgy HTML with BeautifulSoup. Turns out that the HTMLParser used in newer versions is less tolerant than the SGMLParser used previously.</em></p>

<p><hr /></p>

<p>Does BeautifulSoup have some kind of debug mode? I'm trying to figure out how to stop it borking on some nasty HTML I'm loading from a crabby website:</p>

<pre><code>&lt;HTML&gt;
    &lt;HEAD&gt;
        &lt;TITLE&gt;Title&lt;/TITLE&gt;
        &lt;HTTP-EQUIV=""PRAGMA"" CONTENT=""NO-CACHE""&gt;
    &lt;/HEAD&gt;
    &lt;BODY&gt;
        ...
        ...
    &lt;/BODY&gt;
&lt;/HTML&gt;
</code></pre>

<p>BeautifulSoup gives up after the <code>&lt;HTTP-EQUIV...&gt;</code> tag</p>

<pre><code>In [1]: print BeautifulSoup(c).prettify()
&lt;html&gt;
 &lt;head&gt;
  &lt;title&gt;
   Title
  &lt;/title&gt;
 &lt;/head&gt;
&lt;/html&gt;
</code></pre>

<p>The problem is clearly the HTTP-EQUIV tag, which is really a <em>very</em> malformed <code>&lt;META HTTP-EQUIV=""PRAGMA"" CONTENT=""NO-CACHE""&gt;</code> tag. Evidently, I need to specify this as self-closing, but no matter what I specify I can't fix it:</p>

<pre><code>In [2]: print BeautifulSoup(c,selfClosingTags=['http-equiv',
                            'http-equiv=""pragma""']).prettify()
&lt;html&gt;
 &lt;head&gt;
  &lt;title&gt;
   Title
  &lt;/title&gt;
 &lt;/head&gt;
&lt;/html&gt;
</code></pre>

<p>Is there a verbose debug mode in which BeautifulSoup will tell me what it is doing, so I can figure out what it is treating as the tag name in this case?</p>
"
459608,56349,2009-01-19T23:26:18Z,2,Thread specific data with webpy,"<p>I'm writing a little web app with webpy, and I'm wondering if anyone has any information on a little problem I'm having.</p>

<p>I've written a little ORM system, and it seems to be working pretty well. Ideally I'd like to stitch it in with webpy, but it appears that just using it as is causes thread issues (DB connection is instantiated/accessed across thread boundaries, or so the exception states).</p>

<p>Does anyone know how I can (within the webpy) create my DB connection on the same thread as the rest of the page handling code will be?</p>
"
459981,49701,2009-01-20T02:52:19Z,13,BeautifulSoup - modifying all links in a piece of HTML?,"<p>I need to be able to modify every single link in an HTML document. I know that I need to use the <code>SoupStrainer</code> but I'm not 100% positive on how to implement it. If someone could direct me to a good resource or provide a code example, it'd be very much appreciated.</p>

<p>Thanks.</p>
"
460068,49018,2009-01-20T03:43:14Z,1,Python/Twisted - Sending to a specific socket object?,"<p>I have a ""manager"" process on a node, and several worker processes. The manager is the actual server who holds all of the connections to the clients. The manager accepts all incoming packets and puts them into a queue, and then the worker processes pull the packets out of the queue, process them, and generate a result. They send the result back to the manager (by putting them into another queue which is read by the manager), but here is where I get stuck: how do I send the result to a specific socket? When dealing with the processing of the packets on a single process, it's easy, because when you receive a packet you can reply to it by just grabbing the ""transport"" object in-context. But how would I do this with the method I'm using?</p>
"
460144,49018,2009-01-20T04:38:17Z,5,Python/Twisted - TCP packet fragmentation?,"<p>In Twisted when implementing the dataReceived method, there doesn't seem to be any examples which refer to packets being fragmented. In every other language this is something you manually implement, so I was just wondering if this is done for you in twisted already or what? If so, do I need to prefix my packets with a length header? Or do I have to do this manually? If so, what way would that be?</p>
"
460479,10293,2009-01-20T08:38:46Z,10,Algorithm to generate spanning set,"<p>Given this input: [1,2,3,4]</p>

<p>I'd like to generate the set of spanning sets:</p>

<pre><code>[1] [2] [3] [4]
[1] [2] [3,4]
[1] [2,3] [4]
[1] [3] [2,4]
[1,2] [3] [4]
[1,3] [2] [4]
[1,4] [2] [3]
[1,2] [3,4]
[1,3] [2,4]
[1,4] [2,3]
[1,2,3] [4]
[1,2,4] [3]
[1,3,4] [2]
[2,3,4] [1]
[1,2,3,4]
</code></pre>

<p>Every set has all the elements of the original set, permuted to appear in unique subsets. What is the algorithm that produces these sets? I've tried Python generator functions using choose, permutation, combination, power set, and so on, but can't get the right combination.</p>

<p>20 Jan 2009</p>

<p>This is not a homework question. This is an improved answer I was working on for www.projecteuler.net problem # 118. I already had a slow solution but came up with a better way -- except I could not figure out how to do the spanning set.</p>

<p>I'll post my code when I get back from an Inauguration Party.</p>

<p>21 Jan 2009</p>

<p>This is the eventual algorithm I used:</p>

<pre><code>def spanningsets(items):
    if len(items) == 1:
    	yield [items]
    else:
    	left_set, last = items[:-1], [items[-1]]
    	for cc in spanningsets(left_set):
    		yield cc + [last]
    		for i,elem in enumerate(cc):
    			yield cc[:i] + [elem + last] + cc[i+1:]
</code></pre>

<p>@Yuval F: I know how to do a powerset. Here's a straightforward implementation:</p>

<pre><code>def powerset(s) :
    length = len(s)
    for i in xrange(0, 2**length) :
    	yield [c for j, c in enumerate(s) if (1 &lt;&lt; j) &amp; i]
    return
</code></pre>
"
460586,38193,2009-01-20T09:32:42Z,23,Simulating a 'local static' variable in python,"<p>Consider the following code:  </p>

<pre><code>def CalcSomething(a):
    if CalcSomething._cache.has_key(a):
      return CalcSomething._cache[a]
    CalcSomething._cache[a] = ReallyCalc(a)
    return CalcSomething._cache[a] 

CalcSomething._cache = { }
</code></pre>

<p>This is the easiest way I can think of for simulating a 'local static' variable in python.<br />
What bothers me is that CalcSomething._cache is mentioned outside the function's definition, but the alternative would be something like that:  </p>

<pre><code>if not hasattr(CalcSomething, ""_cache""):  
    setattr(CalcSomething, ""_cache"", { } )
</code></pre>

<p>inside the function's definition, which is really cumbersome.  </p>

<p>Is there a more elegant way?  </p>

<p>[EDIT]<br />
Just to clarify, this question is not about local function caches, as the example above might suggest. Here is another short example where a 'static local' might be handy:  </p>

<pre><code>def ParseString(s):
    return ParseString._parser.parse(s)  
# Create a Parser object once, which will be used for all parsings.
# Assuming a Parser object is heave on resources, for the sake of this example.
ParseString._parser = Parser()
</code></pre>
"
462038,57160,2009-01-20T16:27:39Z,2,XML-RPC and Continuum from Python / Perl,"<p>Has anyone had any success with getting data via Xml-rpc using Python or Perl...?</p>

<p>I'm using the continuum.py library:</p>

<pre><code>#!/usr/bin/env python

from continuum import *

c = Continuum( ""http://localhost:8080/continuum/xmlrpc"" )
</code></pre>

<p>or:</p>

<pre><code>#!/usr/bin/perl

use Frontier::Client;

my $url = ""http://dev.server.com:8080/continuum/xmlrpc"";

my $client = RPC::XML::Client-&gt;new($url);

my $res = $client-&gt;send_request('system.listMethods');

print ""   Response class = "".(ref $res).""\n"";
print ""   Response type = "".$res-&gt;type.""\n"";
print ""   Response string = "".$res-&gt;as_string.""\n"";
print ""   Response value = "".$res-&gt;value.""\n"";
</code></pre>

<p>Gives: <code>No such handler: system.listMethods</code></p>

<p>Anyone fared any better...?</p>
"
462068,57155,2009-01-20T16:37:53Z,1,Python with Netbeans 6.5,"<p>Can you give me some links or explain how to configure an existing python project onto Netbeans? 
I'm trying it these days and it continues to crash also code navigation doesn't work well and I've problems with debugging. Surely these problems are related to my low eperience about python and I need support also in trivial things as organizing source folders, imports ecc,, thank you very much. 
Valerio</p>
"
462439,NA,2009-01-20T18:18:33Z,5,Packet sniffing in Python (Windows),"<p>What is the best way to sniff network packets using Python?</p>

<p>I've heard from several places that the best module for this is a module called Scapy, unfortunately, it makes python.exe crash on my system. I would assume that it's just a problem with how I installed it, except that many other people have told me that it doesn't work particularly well on Windows. (If anyone is interested, I'm running Windows Vista, which might affect things).</p>

<p>Does anyone know of a better solution?</p>

<p>UPD:</p>

<p>After reading the answer telling me to install PyPcap, I messed around with it a bit and found out that Scapy, which I had tried using, was telling me to install PyPcap as well, except that it's a modified version for it's use. It was this modified PyPcap that was causing the problem, apparently, since the example in the answer also caused a hang.</p>

<p>I installed the original version of PyPcap (from Google's site), and Scapy started working fine (I didn't try many things, but at least it didn't crash as soon as I started sniffing). I sent a new defect ticket to the Scapy developers: <a href=""http://trac.secdev.org/scapy/ticket/166"" rel=""nofollow"">http://trac.secdev.org/scapy/ticket/166</a>, hope they can do something with it.</p>

<p>Anyways, just thought I'd let y'all know.</p>
"
462500,NA,2009-01-20T18:32:16Z,29,Can I get the matrix determinant using Numpy?,"<p>I read in the manual of Numpy that there is function <code>det(M)</code> that can calculate the determinant. However, I can't find the <code>det()</code> method in Numpy.</p>

<p>By the way, I use Python 2.5. There should be no compatibility problems with Numpy.</p>
"
462933,5454,2009-01-20T20:20:18Z,1,Is it possible to make text translucent in wxPython?,"<p>I am adding some wx.StaticText objects on top of my main wx.Frame, which already has a background image applied. However, the StaticText always seems to draw with a solid (opaque) background color, hiding the image. I have tried creating a wx.Color object and changing the alpha value there, but that yields no results. Is there any way I can put text on the frame and have the background shine through? And furthermore, is it possible to make the text itself translucent? Thanks.</p>
"
463032,25547,2009-01-20T20:47:26Z,0,"Schwartzian sort example in ""Text Processing in Python""","<p>I was browsing through ""Text Processing in Python"" and tried its <a href=""http://gnosis.cx/TPiP/038.code"" rel=""nofollow"">example</a> about Schwartzian sort. </p>

<p>I used following structure for sample data which also contains empty lines. I sorted this data by fifth column:<br />
383230 -49 -78 1 <strong>100034</strong> '06 text' 9562 'text' 720 'text' 867<br />
335067 -152 -18 3 <strong>100030</strong> 'text' 2400 'text' 2342 'text' 696<br />
136592 21 230 3 <strong>100035</strong> '03. text' 10368 'text' 1838 'text' 977  </p>

<p>Code used for Schwartzian sorting:</p>

<pre><code>for n in range(len(lines)):       # Create the transform
    lst = string.split(lines[n])
    if len(lst) &gt;= 4:             # Tuple w/ sort info first
        lines[n] = (lst[4], lines[n])
    else:                         # Short lines to end
        lines[n] = (['\377'], lines[n])

lines.sort()    # Native sort

for n in range(len(lines)):       # Restore original lines
    lines[n] = lines[n][1]

open('tmp.schwartzian','w').writelines(lines)
</code></pre>

<p>I don't get how the author intended that short or empty lines should go to end of file by using this code. Lines are sorted after the if-else structure, thus raising empty lines to top of file. Short lines of course work as supposed with the custom sort (fourth_word function) as implemented in the example. </p>

<p>This is now bugging me, so any ideas? If I'm correct about this then how would you ensure that short lines actually stay at end of file?</p>

<p><strong>EDIT:</strong> I noticed the square brackets around '\377'. This messed up sort() so I removed those  brackets and output started working. </p>

<pre><code>else:                         # Short lines to end
    lines[n] = (['\377'], lines[n])
print type(lines[n][0])
&gt;&gt;&gt; (type 'list')
</code></pre>

<p>I accepted nosklo's answer for good clarification about the meaning of '\377' and for his improved algorithm. Many thanks for the other answers also!</p>

<p>If curious, I used 2 MB sample file which took 0.95 secs with the custom sort and 0.09 with the Schwartzian sort while creating identical output files. It works!</p>
"
463215,42024,2009-01-20T21:33:25Z,4,UnicodeEncodeError with BeautifulSoup 3.1.0.1 and Python 2.5.2,"<p>With BeautifulSoup 3.1.0.1 and Python 2.5.2, and trying to parse a web page in French. However, as soon as I call findAll, I get the following error:</p>

<p><em>UnicodeEncodeError: 'ascii' codec can't encode character u'\xe9' in position 1146: ordinal not in range(128)</em></p>

<p>Below is the code I am currently running:</p>

<pre><code>import urllib2
from BeautifulSoup import BeautifulSoup
page = urllib2.urlopen(""http://fr.encarta.msn.com/encyclopedia_761561798/Paris.html"")
soup = BeautifulSoup(page, fromEncoding=""latin1"")
r = soup.findAll(""table"")
print r
</code></pre>

<p>Does anybody have an idea why? </p>

<p>Thanks!</p>

<p><strong>UPDATE</strong>: As resquested, below is the full Traceback </p>

<pre><code>Traceback (most recent call last):
  File ""[...]\test.py"", line 6, in &lt;module&gt;
    print r
UnicodeEncodeError: 'ascii' codec can't encode characters in position 1146-1147: ordinal not in range(128)
</code></pre>
"
463604,6306,2009-01-20T23:58:45Z,20,How can I type-check variables in Python?,"<p>I have a Python function that takes a numeric argument that <strong>must</strong> be an integer in order for it behave correctly. What is the preferred way of verifying this in Python?</p>

<p>My first reaction is to do something like this:</p>

<pre><code>def isInteger(n):
    return int(n) == n
</code></pre>

<p>But I can't help thinking that this is 1) expensive 2) ugly and 3) subject to the tender mercies of machine epsilon. </p>

<p>Does Python provide any native means of type checking variables? Or is this considered to be a violation of the language's dynamically typed design?</p>

<p>EDIT: since a number of people have asked - the application in question works with IPv4 prefixes, sourcing data from flat text files. If any input is parsed into a float, that record should be viewed as malformed and ignored.</p>
"
463643,49018,2009-01-21T00:10:47Z,11,Python - Doing absolute imports from a subfolder,"<p>Basically I'm asking the same question as this guy: <a href=""http://stackoverflow.com/questions/72852/how-to-do-relative-imports-in-python"">http://stackoverflow.com/questions/72852/how-to-do-relative-imports-in-python</a></p>

<p>But no one gave him a correct answer. Given that you are inside a subfolder and you want to go up a directory and then into ANOTHER subfolder, doing what they suggested does not work (as the OP pointed out in his comments to their answers).</p>

<p>I know that you can do this by using sys.path, but I would prefer a cleaner method.</p>

<p>Example:</p>

<pre><code>App
__init__.py
Package_A
--__init__.py
--Module_A.py
Package_B
--__init__.py
--Module_B.py
</code></pre>

<p>How would I import Module_A into Module_B?</p>
"
463714,27214,2009-01-21T00:38:19Z,7,Django missing translation of some strings. Any idea why?,"<p>I have a medium sized Django project, (running on AppEngine if it makes any difference), and have all the strings living in .po files like they should.</p>

<p>I'm seeing strange behavior where certain strings just don't translate.  They show up in the .po file when I run make_messages, with the correct file locations marked where my {% trans %} tags are.  The translations are in place and look correct compared to other strings on either side of them.  But when I display the page in question, about 1/4 of the strings simply don't translate.</p>

<p>Digging into the relevant generated .mo file, I don't see either the msgid or the msgstr present. </p>

<p>Has anybody seen anything similar to this?  Any idea what might be happening?  </p>

<ul>
<li>trans tags look correct</li>
<li>.po files look correct</li>
<li>no errors during compile_messages</li>
</ul>
"
463806,38140,2009-01-21T01:19:13Z,1,Possible to view method/function docs in NetBeans (Python plugin)?,"<p>I just started trying out NetBeans 6.5 with Python support. I like that the IDE provides the docstring documentation for a function/method in a popup when it's auto-completing, but is there any other way to view docstrings, either by mousing over a function/method name, or clicking somewhere? I just can not seem to find a way to do this. The best I can seem to do is ""Go to source"" in the right-click menu. If you know the trick (or can point out the obvious thing I'm missing), I'd really appreciate knowing it!</p>
"
463832,38403,2009-01-21T01:30:50Z,13,Using DPAPI with Python?,"<p>Is there a way to use the DPAPI (Data Protection Application Programming Interface) on Windows XP with Python?</p>

<p>I would prefer to use an existing module if there is one that can do it.  Unfortunately I haven't been able to find a way with Google or Stack Overflow.</p>

<p><strong>EDIT:</strong> I've taken the example code pointed to by ""dF"" and tweaked it into a standalone library which can be simply used at a high level to crypt and decrypt using DPAPI in user mode.  Simply call dpapi.cryptData(text_to_encrypt) which returns an encrypted string, or the reverse decryptData(encrypted_data_string), which returns the plain text.  Here's the library:</p>

<pre><code># DPAPI access library
# This file uses code originally created by Crusher Joe:
# http://article.gmane.org/gmane.comp.python.ctypes/420
#

from ctypes import *
from ctypes.wintypes import DWORD

LocalFree = windll.kernel32.LocalFree
memcpy = cdll.msvcrt.memcpy
CryptProtectData = windll.crypt32.CryptProtectData
CryptUnprotectData = windll.crypt32.CryptUnprotectData
CRYPTPROTECT_UI_FORBIDDEN = 0x01
extraEntropy = ""cl;ad13 \0al;323kjd #(adl;k$#ajsd""

class DATA_BLOB(Structure):
    _fields_ = [(""cbData"", DWORD), (""pbData"", POINTER(c_char))]

def getData(blobOut):
    cbData = int(blobOut.cbData)
    pbData = blobOut.pbData
    buffer = c_buffer(cbData)
    memcpy(buffer, pbData, cbData)
    LocalFree(pbData);
    return buffer.raw

def Win32CryptProtectData(plainText, entropy):
    bufferIn = c_buffer(plainText, len(plainText))
    blobIn = DATA_BLOB(len(plainText), bufferIn)
    bufferEntropy = c_buffer(entropy, len(entropy))
    blobEntropy = DATA_BLOB(len(entropy), bufferEntropy)
    blobOut = DATA_BLOB()

    if CryptProtectData(byref(blobIn), u""python_data"", byref(blobEntropy),
                       None, None, CRYPTPROTECT_UI_FORBIDDEN, byref(blobOut)):
        return getData(blobOut)
    else:
        return """"

def Win32CryptUnprotectData(cipherText, entropy):
    bufferIn = c_buffer(cipherText, len(cipherText))
    blobIn = DATA_BLOB(len(cipherText), bufferIn)
    bufferEntropy = c_buffer(entropy, len(entropy))
    blobEntropy = DATA_BLOB(len(entropy), bufferEntropy)
    blobOut = DATA_BLOB()
    if CryptUnprotectData(byref(blobIn), None, byref(blobEntropy), None, None,
                              CRYPTPROTECT_UI_FORBIDDEN, byref(blobOut)):
        return getData(blobOut)
    else:
        return """"

def cryptData(text):
    return Win32CryptProtectData(text, extraEntropy)

def decryptData(cipher_text):
    return Win32CryptUnprotectData(cipher_text, extraEntropy)
</code></pre>
"
463963,17453,2009-01-21T02:54:45Z,42,"Parallel processing from a command queue on Linux (bash, python, ruby... whatever)","<p>I have a list/queue of 200 commands that I need to run in a shell on a Linux server. </p>

<p>I only want to have a maximum of 10 processes running (from the queue) at once. Some processes will take a few seconds to complete, other processes will take much longer. </p>

<p>When a process finishes I want the next command to be ""popped"" from the queue and executed.</p>

<p>Does anyone have code to solve this problem?</p>

<p><strong>Further elaboration:</strong></p>

<p>There's 200 pieces of work that need to be done, in a queue of some sort. I want to have at most 10 pieces of work going on at once. When a thread finishes a piece of work it should ask the queue for the next piece of work. If there's no more work in the queue, the thread should die. When all the threads have died it means all the work has been done.</p>

<p>The actual problem I'm trying to solve is using <code>imapsync</code> to synchronize 200 mailboxes from an old mail server to a new mail server. Some users have large mailboxes and take a long time tto sync, others have very small mailboxes and sync quickly.</p>
"
464010,NA,2009-01-21T03:32:58Z,0,django application configuration,"<p>I'm dying to get started Django but I'm really struggling with the initial setup. I have Python/MySql/Apache2.2/mod_python installed. Now I'm trying to create a proper directory structure and then update Django and Apache settings.py/httpd docs respectively. Specifically the location tag in the latter. Django and Python are based on simplicity but this is one huge oversight from the Django folks to not provide more guidance in this area. I had a basic page running in the Django dev server but could not get the stylesheet to load. So i decided to install mod_python and try to use apache in my dev environment and I'm even more frustrated. I can't seem find a good example anywhere on the web or in books regarding how to create a realistic directory structure and then based on that strucure, how to configure neccessary settings. Everything in tutorials is as usual not realistic or very helpful. Too simple. If someone here could share how they have their Django directory and settings configured that would be FANTASTIC!</p>
"
464040,49153,2009-01-21T03:59:03Z,103,How are POST and GET variables handled in Python?,"<p>In PHP you can just use <code>$_POST</code> for POST and <code>$_GET</code> for GET (Query string) variables. What's the equivalent in Python?</p>
"
464314,49018,2009-01-21T07:14:19Z,2,Python - Hits per minute implementation?,"<p>This seems like such a trivial problem, but I can't seem to pin how I want to do it. Basically, I want to be able to produce a figure from a socket server that at any time can give the number of packets received in the last minute. How would I do that?</p>

<p>I was thinking of maybe summing a dictionary that uses the current second as a key, and when receiving a packet it increments that value by one, as well as setting the second+1 key above it to 0, but this just seems sloppy. Any ideas?</p>
"
464342,66475,2009-01-21T07:33:47Z,46,Combining two sorted lists in Python,"<p>I have two lists of objects. Each list is already sorted by a property of the object that is of the datetime type. I would like to combine the two lists into one sorted list. Is the best way just to do a sort or is there a smarter way to do this in Python?</p>
"
464543,49032,2009-01-21T09:15:42Z,2,unit testing for an application server,"<p>I wrote an application server (using python &amp; twisted) and I want to start writing some tests. But I do not want to use Twisted's Trial due to time constraints and not having time to play with it now. So here is what I have in mind: write a small test client that connects to the app server and makes the necessary requests (the communication protocol is some in-house XML), store in a static way the received XML and then write some tests on those static data using unitest.</p>

<p>My question is: Is this a correct approach and if yes, what kind of tests are covered with this approach?</p>

<p>Also, using this method has several disadvantages, like: not being able to access the database layer in order to build/rebuild the schema, when will the test client going to connect to the server: per each unit test or before running the test suite?</p>
"
464736,11773,2009-01-21T10:29:31Z,29,Python regular expressions - how to capture multiple groups from a wildcard expression?,"<p>I have a Python regular expression that contains a group which can occur zero or many times - but when I retrieve the list of groups afterwards, only the last one is present. Example:</p>

<p><code>re.search(""(\w)*"", ""abcdefg"").groups</code>()</p>

<p>this returns the list ('g',)</p>

<p>I need it to return ('a','b','c','d','e','f','g',)</p>

<p>Is that possible? How can I do it? </p>
"
464864,11522,2009-01-21T11:13:40Z,123,Python code to pick out all possible combinations from a list?,"<p>I have a list with 15 numbers in, and I need to write some code that produces all 32,768 combinations of those numbers. </p>

<p>I've found <a href=""http://desk.stinkpot.org:8080/tricks/index.php/2008/04/get-all-possible-combinations-of-a-lists-elements-in-python/"">some code</a> (by googling) that apparently does what I'm looking for, but I found the code fairly opaque and am wary of using it. Plus I have a feeling there must be a more elegant solution.</p>

<p>The only thing that occurs to me would be to just loop through the decimal integers 1-32768 and convert those to binary, and use the binary representation as a filter to pick out the appropriate numbers. </p>

<p>Does anyone know of a better way? Using map(), maybe?</p>
"
464970,2128,2009-01-21T11:49:51Z,0,Parsing Functions,"<p>I'm making a script parser in python and I'm a little stuck. I am not quite sure how to parse a line for all its functions (or even just one function at a time) and then search for a function with that name, and if it exists, execute that function short of writing a massive list if elif else block....</p>

<p><em>EDIT</em></p>

<p>This is for my own scripting language that i'm making. its nothing very complex, but i have a standard library of 8 functions or so that i need to be able to be run, how can i parse a line and run the function named in the line?</p>
"
465065,10583,2009-01-21T12:22:24Z,28,Writing unit tests in Django / Python,"<p>I've not used Unit Tests before other than a quick introduction in a Uni course. I'm currently writing an application though and would like to teach myself TDD in the process. The problem is, I've no idea what to test or really how.</p>

<p>I'm writing a Django application, and so far have only created the models (and customised the admin application). This is how I've written the skeletons of my tests so far:</p>

<pre><code>class ModelTests(TestCase):
    fixtures = ['initial_data.json',]

    def setUp(self):
        pass

    def testSSA(self):
        ssa = SSA.objects.create(name=""sdfsdf"", cost_center=1111, street_num=8,
                street_name=""dfsdfsf Street"", suburb=""sdfsdfsdf"",
                post_code=3333)


    def testResident(self):
        pass

    def testSSA_Client(self):
        pass
</code></pre>

<p>I planned to write a function to test each model within the ModelTests class. Is this a good way of writing tests? Also, what exactly should I be testing for? That creating a model with all of the fields completed works? That a half complete model fails? That any special cases are tested (like a null and is_required=False)? I've trust in the ORM, which as far as I'm aware is heavily tested, so I shouldn't need to test all of the methods should I?</p>

<p>What do I need to test for a web application written in Django/Python? Some examples would be nice.</p>
"
465144,15770,2009-01-21T12:45:55Z,3,"Tools for creating text as bitmaps (anti-aliased text, custom spacing, transparent background)","<p>I need to batch create images with text. Requirements:</p>

<ol>
<li>arbitrary size of bitmap</li>
<li>PNG format</li>
<li>transparent background</li>
<li>black text anti-aliased against transparency</li>
<li>adjustable character spacing</li>
<li>adjustable text position (x and y coordinates where text begins)</li>
<li>TrueType and/or Type1 support</li>
<li>Unix command line tool or Python library</li>
</ol>

<p>So far I've evaluated the following:</p>

<ul>
<li><a href=""http://www.pythonware.com/library/pil/"" rel=""nofollow"">Python Imaging Library</a>: fails 5.</li>
<li><a href=""http://www.imagemagick.org/"" rel=""nofollow"">ImageMagick</a> (""caption"" option): hard to figure out 6.</li>
<li><a href=""http://www.cairographics.org/documentation/pycairo/"" rel=""nofollow"">PyCairo</a>: fails 5.</li>
<li><a href=""http://www.w3.org/Graphics/SVG/"" rel=""nofollow"">SVG</a> + <a href=""http://www.imagemagick.org/script/convert.php"" rel=""nofollow"">ImageMagick convert</a>: most promising, although requires multiple tools</li>
</ul>

<p>The problem with PIL is that e.g. the default spacing for Verdana is way too sparse. I need the text to be a bit tighter, but there's no way to adjust it in PIL.</p>

<p>In ImageMagick I haven't found an easy way to specify where in the image the text begins (I'm using -size WIDTHxHEIGHT and caption:'TEXT'). Adding a transparent border will move the text away from the corner it's achored to, but</p>

<ul>
<li>image size needs to be adjusted accordingly since border adds to the extents</li>
<li>it's not possible to adjust horizontal and vertical offset independently</li>
</ul>

<p>Have I missed some obvious alternatives or failed to find necessary features from the above mentioned?</p>
"
465348,34088,2009-01-21T13:43:17Z,10,How can I print over the current line in a command line application?,"<p>On Unix, I can either use \r (carriage return) or \b (backspace) to print over text already visible in the shell (i.e. overwrite the current line again).</p>

<p>Can I achieve the same effect in a Windows command line from a Python script?</p>

<p>I tried the curses module but it doesn't seem to be available on Windows.</p>
"
465421,41718,2009-01-21T14:01:11Z,4,How do I take the output of one program and use it as the input of another?,"<p>I've looked at <a href=""http://stackoverflow.com/questions/316007/what-is-the-best-way-to-make-the-output-of-one-stream-the-input-to-another"">this</a> and it wasn't much help.</p>

<p>I have a Ruby program that puts a question to the cmd line and I would like to write a Python program that can return an answer.  Does anyone know of any links or in general how I might go about doing this?</p>

<p>Thanks for your help.</p>

<p><b>EDIT</b> <br>
Thanks to the guys that mentioned <i>piping</i>.  I haven't used it too much and was glad it was brought up since it forced me too look in to it more.</p>
"
465605,36330,2009-01-21T14:50:32Z,4,How do I make IPython organize tab completion possibilities by class?,"<p>When an object has hundreds of methods, tab completion is hard to use. More often than not the interesting methods are the ones defined or overridden by the inspected object's class and not its base classes.</p>

<p>How can I get IPython to group its tab completion possibilities so the methods and properties defined in the inspected object's class come first, followed by those in base classes?</p>

<p>It looks like the undocumented <code>inspect.classify_class_attrs(cls)</code> function along with <code>inspect.getmro(cls)</code> give me most of the information I need (these were originally written to implement python's <code>help(object)</code> feature).</p>

<p>By default readline displays completions alphabetically, but the function used to display completions can be replaced with ctypes or the readline module included with Python 2.6 and above. I've overridden readline's completions display and it works great.</p>

<p>Now all I need is a method to merge per-class information (from <code>inspect.*</code> per above) with per-instance information, sort the results by method resolution order, pretty print and paginate.</p>

<p>For extra credit, it would be great to store the chosen autocompletion, and display the most popular choices first next time autocomplete is attempted on the same object.</p>
"
465795,4508,2009-01-21T15:43:36Z,17,What is a simple way to generate keywords from a text?,"<p>I suppose I could take a text and remove high frequency English words from it. By keywords, I mean that I want to extract words that are most the characterizing of the content of the text (tags ) . It doesn't have to be perfect, a good approximation is perfect for my needs.</p>

<p>Has anyone done anything like that?  Do you known a Perl or Python library that does that? </p>

<p>Lingua::EN::Tagger is exactly what I asked however I needed a library that could work for french text too.</p>
"
465814,7735,2009-01-21T15:47:39Z,7,Delphi-like GUI designer for Python,"<p>Is there any GUI toolkit for Python with form designer similar to Delphi, eg where one can drag and drop controls to form, move them around etc.</p>
"
466135,19922,2009-01-21T17:11:14Z,3,How to make a model instance read-only after saving it once?,"<p>One of the functionalities in a Django project I am writing is sending a newsletter. I have a model, <code>Newsletter</code> and a function, <code>send_newsletter</code>, which I have registered to listen to <code>Newsletter</code>'s <code>post_save</code> signal. When the newsletter object is saved via the admin interface, <code>send_newsletter</code> checks if <code>created</code> is True, and if yes it actually sends the mail.</p>

<p>However, it doesn't make much sense to edit a newsletter that has already been sent, for the obvious reasons. Is there a way of making the <code>Newsletter</code> object read-only once it has been saved?</p>

<h2>Edit:</h2>

<p>I know I can override the <code>save</code> method of the object to raise an error or do nothin if the object existed. However, I don't see the point of doing that. As for the former, I don't know where to catch that error and how to communicate the user the fact that the object wasn't saved. As for the latter, giving the user false feedback (the admin interface saying that the save succeded) doesn't seem like a Good Thing.</p>

<p>What I really want is allow the user to use the Admin interface to write the newsletter and send it, and then browse the newsletters that have already been sent. I would like the admin interface to show the data for sent newsletters in an non-editable input box, without the ""Save"" button. Alternatively I would like the ""Save"" button to be inactive.</p>
"
466203,12663,2009-01-21T17:25:38Z,12,How can I hide the console window in a PyQt app running on Windows?,"<p>Surely this is possible? I have been hunting through PyQt tutorials and documentation but cannot find the answer to it. Probably I just need to phrase my search query differently.</p>

<p>[Edit]</p>

<p>Thanks PEZ for the answer - more details including use of the <code>.pyw</code> extension in <a href=""http://www.onlamp.com/pub/a/python/excerpts/chpt20/index.html?page=2"">Python Programming on Win32 chapter 20</a></p>
"
466293,20712,2009-01-21T17:44:04Z,3,How can I generate multi-line build commands?,"<p>In SCons, my command generators create  ridiculously long command lines.  I'd
like to be able to split these commands across multiple lines for
readability in the build log.</p>

<p>e.g. I have a SConscipt like:</p>

<pre><code>import os

# create dependency
def my_cmd_generator(source, target, env, for_signature):
    return r'''echo its a small world after all \
        its a small world after all'''

my_cmd_builder = Builder(generator=my_cmd_generator, suffix = '.foo')

env = Environment()
env.Append( BUILDERS = {'MyCmd' : my_cmd_builder } )

my_cmd = env.MyCmd('foo.foo',os.popen('which bash').read().strip())
AlwaysBuild(my_cmd)
</code></pre>

<p>When it executes, I get:</p>

<pre><code>scons: Reading SConscript files ...
scons: done reading SConscript files.
scons: Building targets ...
echo its a small world after all \
its a small world after all
its a small world after all
sh: line 1: its: command not found
scons: *** [foo.foo] Error 127
scons: building terminated because of errors.
</code></pre>

<p>Doing this in the python shell with os.system and os.popen works -- I get a readable command string and the sub-shell process interprets all the lines as one command.</p>

<pre><code>&gt;&gt;&gt; import os
&gt;&gt;&gt; cmd = r'''echo its a small world after all \
... its a small world after all'''
&gt;&gt;&gt; print cmd
echo its a small world after all \
its a small world after all
&gt;&gt;&gt; os.system( cmd)
its a small world after all its a small world after all
0
</code></pre>

<p>When I do this in SCons, it executes each line one at a time, which is
not what I want.</p>

<p>I also want to avoid building up my commands into a shell-script and
then executing the shell script, because that will create string
escaping madness.</p>

<p>Is this possible?</p>

<p>UPDATE:<BR>
cournape,<BR>
Thanks for the clue about the $CCCOMSTR.  Unfortunately, I'm not using any of the languages that SCons supports out of the box, so I'm creating my own command generator.  Using a generator, how can I get SCons to do:</p>

<pre><code>echo its a small world after all its a small world after all'
</code></pre>

<p>but print</p>

<pre><code>echo its a small world after all \
    its a small world after all
</code></pre>

<p>?</p>
"
466345,12870,2009-01-21T18:00:29Z,826,Converting string into datetime,"<p>Short and simple. I've got a huge list of date-times like this as strings:</p>

<pre><code>Jun 1 2005  1:33PM
Aug 28 1999 12:00AM
</code></pre>

<p>I'm going to be shoving these back into proper datetime fields in a database so I need to magic them into real datetime objects. </p>

<p>Any help (even if it's just a kick in the right direction) would be appreciated.</p>

<p>Edit: This is going through Django's ORM so I can't use SQL to do the conversion on insert.</p>
"
466525,4960,2009-01-21T18:59:25Z,0,How can I set it up so that threads communicate they're complete with their task?,"<p>Conceptually, I would like to accomplish the following but have had trouble understand how to code it properly in Python:</p>

<pre><code>from threading import Thread
for i in range(0,3):
    t = Thread(target=myfunction)
    t.start()

# wait until threads have finished executing
print 'complete!'
</code></pre>
"
466611,5304,2009-01-21T19:20:58Z,12,"Why do I have to specify my own class when using super(), and is there a way to get around it?","<p>When using Python's <code>super()</code> to do method chaining, you have to explicitly specify your own class, for example:</p>

<pre><code>class MyDecorator(Decorator):
    def decorate(self):
        super(MyDecorator, self).decorate()
</code></pre>

<p>I have to specify the name of my class <code>MyDecorator</code> as an argument to <code>super()</code>. This is not DRY. When I rename my class now I will have to rename it twice. Why is this implemented this way? And is there a way to weasel out of having to write the name of the class twice(or more)?</p>
"
466684,2183,2009-01-21T19:40:34Z,23,How can I return system information in Python?,"<p>Using Python, how can information such as CPU usage, memory usage (free, used, etc), process count, etc be returned in a generic manner so that the same code can be run on Linux, Windows, BSD, etc?</p>

<p>Alternatively, how could this information be returned on all the above systems with the code specific to that OS being run only if that OS is indeed the operating environment?</p>
"
466692,39339,2009-01-21T19:43:46Z,5,reading/writing xmp metadatas on pdf files through pypdf,"<p>I can read xmp metadatas through pyPdf with this code:</p>

<pre><code>a = pyPdf.PdfFileReader(open(self.fileName))
b = a.getXmpMetadata()                      
c = b.pdf_keywords
</code></pre>

<p>but: is this the best way? </p>

<p>And if I don't use the pdf_keywords property?</p>

<p>And is there any way to set these metadatas with pyPdf?</p>
"
466801,41718,2009-01-21T20:20:05Z,10,Python piping on Windows: Why does this not work?,"<p>I'm trying something like this</p>

<p>Output.py</p>

<pre><code>print ""Hello""
</code></pre>

<p>Input.py</p>

<pre><code>greeting = raw_input(""Give me the greeting. "")
print ""The greeting is:"", greeting
</code></pre>

<p>At the cmd line</p>

<pre><code>Output.py | Input.py
</code></pre>

<p>But it returns an <i>EOFError</i>.  Can someone tell me what I am doing wrong?</p>

<p>Thanks for your help.</p>

<p><b>EDIT</b> <br>
Patrick Harrington <a href=""http://stackoverflow.com/questions/466801/python-piping-on-windows-why-does-this-not-work#466851"">solution</a> works but I don't know why...</p>
"
466897,38206,2009-01-21T20:43:40Z,5,How will Python and Ruby applications be affected by .NET?,"<p>I'm curious about how .NET will affect Python and Ruby applications. </p>

<p>Will applications written in IronPython/IronRuby be so specific to the .NET environment, that they will essentially become platform specific? </p>

<p>If they don't use any of the .NET features, then what is the advantage of IronPython/IronRuby over their non .NET counterparts?</p>
"
467094,NA,2009-01-21T21:27:47Z,8,python: list comprehension tactics,"<p>I'm looking to take a string and create a list of strings that build up the original string.</p>

<p>e.g.:</p>

<pre><code>""asdf"" =&gt; [""a"", ""as"", ""asd"", ""asdf""]
</code></pre>

<p>I'm sure there's a ""pythonic"" way to do it; I think I'm just losing my mind. What's the best way to get this done?</p>
"
467134,42188,2009-01-21T21:38:39Z,2,How to prevent overwriting an object someone else has modified,"<p>I would like to find a generic way of preventing to save an object if it is saved after I checked it out.</p>

<p>We can assume the object has a <code>timestamp</code> field that contains last modification time. If I had checked out (visited a view using a ModelForm for instance) at <code>t1</code> and the object is saved again at <code>t2</code>, given <code>t2</code> > <code>t1</code> I shouldn't be able to save it.</p>
"
467600,2183,2009-01-22T00:08:19Z,1,How can I read system information in Python on OS X?,"<p>Following from this <a href=""http://stackoverflow.com/questions/466684/how-can-i-return-system-information-in-python"">OS-agnostic question</a>, specifically <a href=""http://stackoverflow.com/questions/466684/how-can-i-return-system-information-in-python#467291"">this response</a>, similar to data available from the likes of /proc/meminfo on Linux, how can I read system information from OS X using Python (including, but not limited to memory usage).</p>
"
467602,2183,2009-01-22T00:09:44Z,1,How can I read system information in Python on Windows?,"<p>Following from this <a href=""http://stackoverflow.com/questions/466684/how-can-i-return-system-information-in-python"">OS-agnostic question</a>, specifically <a href=""http://stackoverflow.com/questions/466684/how-can-i-return-system-information-in-python#467291"">this response</a>, similar to data available from the likes of /proc/meminfo on Linux, how can I read system information from Windows using Python (including, but not limited to memory usage).</p>
"
467738,15061,2009-01-22T01:11:24Z,16,"Implementing a ""rules engine"" in Python","<p>I'm writing a log collection / analysis application in Python and I need to write a ""rules engine"" to match and act on log messages.</p>

<p>It needs to feature:</p>

<ul>
<li>Regular expression matching for the message itself</li>
<li>Arithmetic comparisons for message severity/priority</li>
<li>Boolean operators</li>
</ul>

<p>I envision An example rule would probably be something like:</p>

<pre><code>(message ~ ""program\\[\d+\\]: message"" and severity &gt;= high) or (severity &gt;= critical)
</code></pre>

<p>I'm thinking about using <a href=""http://pyparsing.wikispaces.com/"">PyParsing</a> or similar to actually parse the rules and construct the parse tree.</p>

<p>The current (not yet implemented) design I have in mind is to have classes for each rule type, and construct and chain them together according to the parse tree. Then each rule would have a ""matches"" method that could take a message object return whether or not it matches the rule.</p>

<p>Very quickly, something like:</p>

<pre><code>class RegexRule(Rule):
    def __init__(self, regex):
         self.regex = regex

    def match(self, message):
         return self.regex.match(message.contents)

class SeverityRule(Rule):
    def __init__(self, operator, severity):
         self.operator = operator

    def match(self, message):
         if operator == ""&gt;="":
             return message.severity &gt;= severity
         # more conditions here...

class BooleanAndRule(Rule):
    def __init__(self, rule1, rule2):
         self.rule1 = rule1
         self.rule2 = rule2

    def match(self, message):
          return self.rule1.match(message) and self.rule2.match(message)
</code></pre>

<p>These rule classes would then be chained together according to the parse tree of the message, and the match() method called on the top rule, which would cascade down until all the rules were evaluated.</p>

<p>I'm just wondering if this is a reasonable approach, or if my design and ideas are way totally out of whack? Unfortunately I never had the chance to take a compiler design course or anything like that in Unviersity so I'm pretty much coming up with this stuff of my own accord.</p>

<p>Could someone with some experience in these kinds of things please chime in and evaluate the idea?</p>

<p><strong>EDIT:</strong>
Some good answers so far, here's a bit of clarification.</p>

<p>The aim of the program is to collect log messages from servers on the network and store them in the database. Apart from the collection of log messages, the collector will define a set of rules that will either match or ignore messages depending on the conditions and flag an alert if necessary.</p>

<p>I can't see the rules being of more than a moderate complexity, and they will be applied in a chain (list) until either a matching alert or ignore rule is hit. However, this part isn't quite as relevant to the question.</p>

<p>As far the syntax being close to Python syntax, yes that is true, however I think it would be difficult to filter the Python down to the point where the user couldn't inadvertently do some crazy stuff with the rules that was not intended.</p>
"
467800,3594,2009-01-22T01:52:54Z,6,Is there a Perl equivalent of Python's re.findall/re.finditer (iterative regex results)?,"<p>In Python compiled regex patterns <a href=""http://docs.python.org/library/re.html#re.findall"">have a <code>findall</code> method</a> that does the following:</p>

<blockquote>
  <p>Return all non-overlapping matches of
  pattern in string, as a list of
  strings. The string is scanned
  left-to-right, and matches are
  returned in the order found. If one or
  more groups are present in the
  pattern, return a list of groups; this
  will be a list of tuples if the
  pattern has more than one group. Empty
  matches are included in the result
  unless they touch the beginning of
  another match.</p>
</blockquote>

<p>What's the canonical way of doing this in Perl? A naive algorithm I can think of is along the lines of ""while a search and replace with the empty string is successful, do [suite]"". I'm hoping there's a nicer way. :-)</p>

<p>Thanks in advance!</p>
"
467878,52310,2009-01-22T02:38:17Z,1,"Permutations in python, with a twist","<p>I have a list of objects (for the sake of example, let's say 5).  I want a list of some of the possible permutations.  Specifically, given that some pairs are not together, and some triples don't make sandwiches, how can I generate all other permutations?  I realize that I generate all of them first and check that they work, but I think it would be faster to not even consider the pairs and triples that don't work.</p>

<p>Am I wrong that it would be faster to check first and generate later?</p>

<p>How would I do it?</p>
"
467920,66475,2009-01-22T03:03:46Z,21,In what situation should the built-in 'operator' module be used in python?,"<p>I'm speaking of this module:
<a href=""http://docs.python.org/library/operator.html"">http://docs.python.org/library/operator.html</a></p>

<p>From the article:</p>

<blockquote>
  <p>The operator module exports a set of
  functions implemented in C
  corresponding to the intrinsic
  operators of Python. For example,
  operator.add(x, y) is equivalent to
  the expression x+y. The function names
  are those used for special class
  methods; variants without leading and
  trailing __ are also provided for
  convenience.</p>
</blockquote>

<p>I'm not sure I understand the benefit or purpose of this module.</p>
"
467925,55578,2009-01-22T03:07:25Z,3,Sample a running Python app,"<p>I'm used to sampling C-based apps, which every few milliseconds sees what function stack is being called at that moment.</p>

<p>This allows me to see where most of the time is spent in an app so I can optimize it.</p>

<p>When using python, however, sample isn't so helpful, since it's sampling the C functions of the python interpreter, not the python code itself.</p>

<p>Is there a useful sampling tool for python?</p>
"
467985,27462,2009-01-22T03:45:49Z,2,Adding a generic image field onto a ModelForm in django,"<p>I have two models, <code>Room</code> and <code>Image</code>.  <code>Image</code> is a generic model that can tack onto any other model.  I want to give users a form to upload an image when they post information about a room.  I've written code that works, but I'm afraid I've done it the hard way, and specifically in a way that violates DRY.</p>

<p>Was hoping someone who's a little more familiar with django forms could point out where I've gone wrong. </p>

<p><strong>Update:</strong></p>

<p>I've tried to clarify why I chose this design in comments to the current answers.  To summarize: </p>

<p>I didn't simply put an <code>ImageField</code> on the <code>Room</code> model because I wanted more than one image associated with the Room model.  I chose a generic Image model because I wanted to add images to several different models.  The alternatives I considered were were multiple foreign keys on a single <code>Image</code> class, which seemed messy, or multiple <code>Image</code> classes, which I thought would clutter my schema.  I didn't make this clear in my first post, so sorry about that.</p>

<p>Seeing as none of the answers so far has addressed how to make this a little more DRY I did come up with my own solution which was to add the upload path as a class attribute on the image model and reference that every time it's needed.</p>

<pre><code># Models
class Image(models.Model):
    content_type = models.ForeignKey(ContentType)
    object_id = models.PositiveIntegerField()
    content_object = generic.GenericForeignKey('content_type', 'object_id')
    image = models.ImageField(_('Image'),
                                height_field='',
                                width_field='',
                                upload_to='uploads/images',
                                max_length=200)
class Room(models.Model):
    name = models.CharField(max_length=50)
    image_set = generic.GenericRelation('Image') 

# The form
class AddRoomForm(forms.ModelForm):
    image_1 = forms.ImageField()

    class Meta:
        model = Room

# The view
def handle_uploaded_file(f):

    # DRY violation, I've already specified the upload path in the image model
    upload_suffix = join('uploads/images', f.name)
    upload_path = join(settings.MEDIA_ROOT, upload_suffix)
    destination = open(upload_path, 'wb+')
    for chunk in f.chunks():
        destination.write(chunk)
    destination.close()
    return upload_suffix

def add_room(request, apartment_id, form_class=AddRoomForm, template='apartments/add_room.html'):
    apartment  = Apartment.objects.get(id=apartment_id)

    if request.method == 'POST':
        form = form_class(request.POST, request.FILES)
        if form.is_valid():
            room = form.save()
            image_1 = form.cleaned_data['image_1']

            # Instead of writing a special function to handle the image, 
            # shouldn't I just be able to pass it straight into Image.objects.create
            # ...but it doesn't seem to work for some reason, wrong syntax perhaps?

            upload_path = handle_uploaded_file(image_1)
            image = Image.objects.create(content_object=room, image=upload_path)
            return HttpResponseRedirect(room.get_absolute_url())
    else:
        form = form_class()
    context = {'form': form, }
    return direct_to_template(request, template, extra_context=context)
</code></pre>
"
468238,46914,2009-01-22T06:44:52Z,3,Tracking file load progress in Python,"<p>A lot of modules I use import entire files into memory or trickle a file's contents in while they process it.  I'm wondering if there's any way to track this sort of loading progress?  Possibly a wrapper class that takes a callback?</p>
"
468241,13055,2009-01-22T06:47:33Z,0,Python: convert alphabetically spelled out numbers to numerics?,"<p>I'm looking for a library, service, or code suggestions to turn spelled out numbers and amounts (eg. ""thirty five dollars and fifteen cents"", ""one point five"") into numerics ($35.15, 1.5) . Suggestions?</p>
"
468383,13007,2009-01-22T08:07:43Z,1,Python code for sorting files into folders,"<p>Python 2.5.1</p>

<p><a href=""http://www.cgsecurity.org/wiki/After_Using_PhotoRec"" rel=""nofollow"">http://www.cgsecurity.org/wiki/After_Using_PhotoRec</a></p>

<p>I've just run PhotoRec and the code given as a way to sort file types into their own folder is coming back with this error. Any suggestions on how to alter? Thanks :</p>

<p>[EDIT2: Two points:</p>

<ol>
<li>This question was voted down because it was a 'usage' of code, somehow not a programming question. Does it qualify as a coding question? I argue yes.</li>
<li><p>I've gone back and edited the page where the code came from to clarify the need for parameters for the benefit of others.]</p>

<p>gyaresu$ python recovery.py 
Traceback (most recent call last):
  File ""recovery.py"", line 8, in 
    source = sys.argv[1]
IndexError: list index out of range</p></li>
</ol>

<p>Script:</p>

<pre><code>#!/usr/bin/env python
import os
import os.path
import shutil
import string
import sys

source = sys.argv[1]
destination = sys.argv[2]

while os.path.exists(source) != True:
    source = raw_input('Enter a valid source directory\n')
while os.path.exists(destination) != True:
    destination = raw_input('Enter a valid destination directory\n')

for root, dirs, files in os.walk(source, topdown=False):
    for file in files:
        extension = string.upper(os.path.splitext(file)[1][1:])
        destinationPath = os.path.join(destination,extension)

        if os.path.exists(destinationPath) != True:
            os.mkdir(destinationPath)
        if os.path.exists(os.path.join(destinationPath,file)):
            print 'WARNING: this file was not copied :' + os.path.join(root,file)
        else:
            shutil.copy2(os.path.join(root,file), destinationPath)
</code></pre>
"
468421,NA,2009-01-22T08:32:05Z,39,"Ruby equivalent of Python's ""dir""?","<p>In Python we can ""dir"" a module, like this:</p>

<pre><code>&gt;&gt;&gt; import re
&gt;&gt;&gt; dir(re)
</code></pre>

<p>And it lists all functions in the module. Is there a similar way to do this in Ruby?</p>
"
468639,28380,2009-01-22T10:29:33Z,0,Is there a standalone Python type conversion library?,"<p>Are there any standalone type conversion libraries?</p>

<p>I have a data storage system that only understands bytes/strings, but I can tag metadata such as the type to be converted to.</p>

<p>I could hack up some naive system of type converters, as every other application has done before me, or I could hopefully use a standalone library, except I can't find one. Odd for such a common activity.</p>

<p>Just to clarify, I will have something like:</p>

<p>('123', 'integer') and I want to get out 123</p>
"
468736,45955,2009-01-22T11:22:00Z,1,Templates within templates. How to avoid rendering twice?,"<p>I've got a CMS that takes some dynamic content and renders it using a standard template. However I am now using template tags in the dynamic content itself so I have to do a render_to_string and then pass the results of that as a context variable to render_to_response. This seems wasteful.</p>

<p>What's a better way to do this?</p>
"
469110,26143,2009-01-22T13:26:22Z,1,In Django how do i return the total number of items that are related to a model?,"<p>In Django how can i return the total number of items (count) that are related to another model, e.g the way stackoverflow does a list of questions then on the side it shows the count on the answers related to that question.</p>

<p>This is easy if i get the questionid, i can return all answers related to that question  but when am displaying the entire list of question it becomes a bit tricky to display on the side the count showing the total count.</p>

<p>I don't know if am clear but just think how stackoverflow displays its questions with answer,views count next to each question! </p>
"
469200,27098,2009-01-22T13:56:23Z,7,Any Python OLAP/MDX ORM engines?,"<p>I'm new to the MDX/OLAP and I'm wondering if there is any ORM similar like Django ORM for Python that would support OLAP.</p>

<p>I'm a Python/Django developer and if there would be something that would have some level of integration with Django I would be much interested in learning more about it.</p>
"
469219,37491,2009-01-22T14:02:18Z,2,adding scrollbars to pythoncard application,"<p>scrollingwindow as main frame for the application is not supported yet for pythoncard. how can i add scrollbars to main frame(background)?</p>
"
469243,36330,2009-01-22T14:09:59Z,28,"How can I listen for 'usb device inserted' events in Linux, in Python?","<p>I'd like to write a Python script for Amarok in Linux to automatically copy the stackoverflow podcast to my player. When I plug in the player, it would mount the drive, copy any pending podcasts, and eject the player. How can I listen for the ""plugged in"" event? I have looked through hald but couldn't find a good example.</p>
"
469931,NA,2009-01-22T16:54:05Z,4,deleting rows of a numpy array based on uniqueness of a value,"<p>let's say I have a bi-dimensional array like that</p>

<pre><code>numpy.array(
    [[0,1,1.2,3],
    [1,5,3.2,4],
    [3,4,2.8,4], 
    [2,6,2.3,5]])
</code></pre>

<p>I want to have an array formed eliminating whole rows based on uniqueness of values of last column, selecting the row to keep based on value of third column.
e.g. in this case i would like to keep only one of the rows with 4 as last column, and choose the one which has the minor value of third column, having something like that as a result:</p>

<pre><code>array([0,1,1.2,3],
      [3,4,2.8,4],
      [2,6,2.3,5])
</code></pre>

<p>thus eliminating row [1,5,3.2,4]</p>

<p>which would be the best way to do it?</p>
"
469950,31610,2009-01-22T16:58:42Z,4,problem using an instance in a with_statement,"<p>I've recently started to learn python , and I reached the <strong>with</strong> statement . I've tried to use it with a class instance , but I think I'm doing something wrong . Here is the code :</p>

<pre><code>
from __future__ import with_statement
import pdb

class Geo:

  def __init__(self,text):
    self.text = text

  def __enter__(self):
    print ""entering""

  def __exit__(self,exception_type,exception_value,exception_traceback):
    print ""exiting""

  def ok(self):
    print self.text

  def __get(self):
    return self.text


with Geo(""line"") as g :
  g.ok()
</code></pre>

<p>The thing is that when the interpreter reaches the <strong>ok</strong> method inside the with statement , the following exception is raised :</p>

<pre><code>
Traceback (most recent call last):
  File ""dec.py"", line 23, in 
    g.ok()
AttributeError: 'NoneType' object has no attribute 'ok'
</code></pre>

<p>Why does the g object have the type NoneType ? How can I use an instance with the <strong>with</strong> statement ?</p>
"
470008,NA,2009-01-22T17:12:54Z,4,AppEngine and Django: including a template file,"<p>As the title suggests, I'm using Google App Engine and Django.</p>

<p>I have quite a bit of identical code across my templates and would like to reduce this by including template files. So, in my main application directory I have the python handler file, the main template, and the template I want to include in my main template.</p>

<p>I would have thought that including {% include ""fileToInclude.html"" %} would work on its own but that simply doesn't include anything. I assume I have to set something up, maybe using TEMPLATE_DIRS, but can't figure it out on my own.</p>

<p>EDIT:</p>

<p>I've tried:</p>

<pre><code>TEMPLATE_DIRS = (os.path.join(os.path.dirname(__file__), 'templates'), )
</code></pre>

<p>But to no avail. I'll try some other possibilities too.</p>
"
470139,16163,2009-01-22T17:41:44Z,16,Why does 1+++2 = 3 in python?,"<p>I am from C background and I just started learning python... </p>

<p>while trying some programs, I got this doubt...</p>

<p>how python evaluates the expression 1+++2?</p>

<p>No matter how many number of '+' I put in between, it is printing 3 as the answer. Please can anyone explain this behavior</p>

<p>and for 1--2 it is printing 3 and for 1---2 it is printing -1 </p>

<p>please clear my doubt.</p>

<p>Regards</p>

<p>Sunil</p>
"
470567,22459,2009-01-22T19:54:50Z,1,ISO encoded attachment names and python,"<p>First of all i don't have the code example on this computer, but i have an example that is quite similar.</p>

<p>(<a href=""http://docs.python.org/library/email-examples.html"" rel=""nofollow"">http://docs.python.org/library/email-examples.html</a>)</p>

<p>The 4th one.</p>

<p>My issue lies within this bit of code</p>

<pre><code>counter = 1
for part in msg.walk():
    # multipart/* are just containers
    if part.get_content_maintype() == 'multipart':
        continue
    # Applications should really sanitize the given filename so that an
    # email message can't be used to overwrite important files
    filename = part.get_filename()
    if not filename:
        ext = mimetypes.guess_extension(part.get_content_type())
        if not ext:
            # Use a generic bag-of-bits extension
            ext = '.bin'
        filename = 'part-%03d%s' % (counter, ext)
    counter += 1
    fp = open(os.path.join(opts.directory, filename), 'wb')
    fp.write(part.get_payload(decode=True))
    fp.close()
</code></pre>

<p>When i fetch emails that do not have iso or utf encoded filenames, this code works fine.
But when the attachment name is iso encoded, the filename is not within the get_filename, but the filename is in encoded form within part[""Content-type""] (i belive)</p>

<p>The above example tries to guess the extension and if it cant find the filename, it just gives it a part filename. What i would like is the filename.</p>

<p>Has anyone dealt with issues like these, and what did you do to fix it?</p>
"
471000,31610,2009-01-22T21:57:46Z,18,Jython and python modules,"<p>I've just started using the <code>PythonInterpreter</code> from within my Java classes, and it works great! However, if I try to include python modules (<code>re</code>, <code>HTMLParser</code>, etc.), I'm receiving the following exception (for <code>re</code>):</p>

<pre>
Exception in thread ""main"" Traceback (innermost last):
  File """", line 1, in ?
ImportError: no module named re
</pre>

<p>How could I make the classes from the jython jar ""see"" the modules python has available?</p>
"
471190,5862,2009-01-22T22:56:34Z,0,How do I remove VSS hooks from a VS Web Site?,"<p>I have a Visual Studio 2008 solution with 7 various projects included with it.  3 of these 'projects' are Web Sites (the kind of project without a project file).</p>

<p>I have stripped all the various Visual Sourcesafe files from all the directories, removed the Scc references in the SLN file and all the project files that exist.  I deleted the SUO file and all the USER files also.  Visual Studio still thinks that 2 of the Web Sites are still under source control, and it adds the Scc entries back into the SLN file for me.</p>

<p><strong>Does anybody know <em>how</em> VS still knows about the old source control?</strong></p>

<p><em>Edit:</em>
Another thing that I didn't mention is that the files I'm trying to remove VSS hooks from has been copied outside of VSS's known working directories, the python script run and manual edits to files made before the solution is opened in VS 2008 or VS 2005 (I had the problem with both).</p>

<p>Here is a python script that I used to weed out these files and let me know which files needed manually edited.</p>

<pre><code>import os, stat
from os.path import join

def main():
  startDir = r""C:\Documents and Settings\user\Desktop\project""

  manualEdits = []

  for root, dirs, files in os.walk(startDir, topdown=False):
    if '.svn' in dirs:
      dirs.remove('.svn')
    for name in files:
      os.chmod(join(root,name), stat.S_IWRITE)
      if name.endswith("".vssscc"") or name.endswith("".scc"") or name.endswith("".vspscc"") or name.endswith("".suo"") or name.endswith("".user""):
        print ""Deleting:"", join(root, name)
        os.remove(join(root,name))
      if name.endswith(""sln"") or name.endswith(""dbp"") or name.endswith(""vbproj"") or name.endswith(""csproj""):
        manualEdits.append(join(root, name))

  print ""Manual Edits are needed for these files:""
  for name in manualEdits:
    print name

if __name__ == ""__main__"":
  main()
</code></pre>
"
471191,49018,2009-01-22T22:57:34Z,160,Why compile Python code?,"<p>Why would you compile a Python script? You can run them directly from the .py file and it works fine, so is there a performance advantage or something? </p>

<p>I also notice that some files in my application get compiled into .pyc while others do not, why is this?</p>
"
471211,2183,2009-01-22T23:01:19Z,1,What is the best way to extract load average float values from a string in Python?,"<p>If I have a string such as</p>

<p>""17:31:51 up 134 days, 11:26,  1 user,  load average: 0.22, 0.15, 0.10""</p>

<p>what is the best way to extract just the x3 load average values at the end? I have written a regexp that does this but is this the most efficient / fastest method?</p>

<pre><code>&gt;&gt;&gt; s = ""17:31:51 up 134 days, 11:26,  1 user,  load average: 0.22, 0.15, 0.10""
&gt;&gt;&gt; print re.findall(r""([0-9]\.\d+)"", s)
['0.22', '0.15', '0.10']
</code></pre>
"
471279,32617,2009-01-22T23:25:40Z,9,Organising a GUI application,"<p>This is going to be a generic question.</p>

<p>I am struggling in designing a GUI application, esp. with dealing with interactions between different parts.</p>

<p>I don't know how I should deal with shared state. On one hand, shared state is bad, and things should be as explicit as possible. On the other hand, not having shared state introduces unwanted coupling between components.</p>

<p>An example:</p>

<p>I want my application to be extendable in an Emacs/Vim sort of way, via scripts. Clearly, some sort of shared state needs to be modified, so that the GUI will use it. My initial plan was having a global ""session"" that is accessible from everywhere, but I'm not so sure about it.</p>

<p>One tricky use case is key bindings. I want the user to be able to specify custom keybindings from a script. Each keybinding maps to an arbitrary command, that receives the session as the only argument.</p>

<p>Now, the editor component captures keypresses. It has to have access to the keymappings, which are per-session, so it needs access to the session. Is coupling the editor to the session a good idea? Other components will also need to access the keybindings, so the session now becomes shared and can be a singleton...</p>

<p>Is there any good reading about designing GUI applications that goes beyond MVC?</p>

<p>This is Python and wxPython, FWIW.</p>

<p>[EDIT]: Added concrete usecase.</p>
"
471463,15061,2009-01-23T00:43:24Z,3,Is there a Term::ANSIScreen equivalent for Python?,"<p>Perl has the excellent module <code>Term::ANSIScreen</code> for doing all sorts of fancy cursor movement and terminal color control. I'd like to reimplement a program that's currently in Perl in Python instead, but the terminal ANSI colors are key to its function. Is anyone aware of an equivalent?</p>
"
471546,5304,2009-01-23T01:36:42Z,18,Any way to override the and operator in Python?,"<p>I tried overriding <code>__and__</code>, but that is for the &amp; operator, not <em>and</em> - the one that I want. Can I override <em>and</em>?</p>
"
471550,10661,2009-01-23T01:38:17Z,22,Customizing an Admin form in Django while also using autodiscover,"<p>I want to modify a few tiny details of Django's built-in <code>django.contrib.auth</code> module.  Specifically, I want a different form that makes username an email field (and email an alternate email address.   (I'd rather not modify <code>auth</code> any more than necessary -- a simple form change <em>seems</em> to be all that's needed.)</p>

<p>When I use <code>autodiscover</code> with a customized <code>ModelAdmin</code> for <code>auth</code> I wind up conflicting with <code>auth</code>'s own admin interface and get an ""already registered"" error.</p>

<p>It looks like I have to create my own admin site, enumerating all of my Models.  It's only 18 classes, but it seems like a DRY problem -- every change requires both adding to the Model <strong>and</strong> adding to the customized admin site.</p>

<p>Or, should I write my own version of ""<code>autodiscover</code> with exclusions"" to essentially import all the <code>admin</code> modules <strong>except</strong> <code>auth</code>?</p>
"
471660,49018,2009-01-23T02:21:45Z,2,Python/Twisted multiuser server - what is more efficient?,"<p>In Python, if I want my server to scale well CPU-wise, I obviously need to spawn multiple processes. I was wondering which is better (using Twisted):</p>

<p>A) The manager process (the one who holds the actual socket connections) puts received packets into a shared queue (the one from the multiprocessing module), and worker processes pull the packets out of the queue, process them and send the results back to the client.</p>

<p>B) The manager process (the one who holds the actual socket connections) launches a deferred thread and then calls the apply() function on the process pool. Once the result returns from the worker process, the manager sends the result back to the client.</p>

<p>In both implementations, the worker processes use thread pools so they can work on more than one packet at once (since there will be a lot of database querying).</p>
"
471712,55362,2009-01-23T02:49:32Z,16,Pros and cons of IronPython and IronPython Studio,"<p>We are ready in our company to move everything to Python instead of C#, we are a consulting company and we usually write small projects in C# we don't do huge projects and our work is more based on complex mathematical models not complex software structures. So we believe IronPython is a good platform for us because it provides standard GUI functionality on windows and access to all of .Net libraries. </p>

<p>I know Ironpython studio is not complete, and in fact I had a hard time adding my references but I was wondering if someone could list some of the pros and cons of this migration for us, considering Python code is easier to read by our clients and we usually deliver a proof-of-concept prototype instead of a full-functional code, our clients usually go ahead and implement the application themselves</p>
"
471928,49701,2009-01-23T05:02:12Z,25,Way to have compiled python files in a separate folder?,"<p>Is it possible to have Python save the <code>.pyc</code> files to a separate folder location that is in <code>sys.path</code>?</p>

<pre><code>/code
    foo.py
    foo.pyc
    bar.py
    bar.pyc
</code></pre>

<p>To:</p>

<pre><code>/code
   foo.py
   bar.py
/code_compiled
   foo.pyc
   bar.pyc
</code></pre>

<p>I would like this because I feel it'd be more organized. Thanks for any help you can give me.</p>
"
472000,31830,2009-01-23T05:37:23Z,306,Usage of __slots__?,"<p>What is the purpose of <a href=""https://docs.python.org/3/reference/datamodel.html#slots""><code>__slots__</code></a> in Python — especially with respect to when would I want to use it and when not?</p>
"
472170,46646,2009-01-23T07:18:32Z,-4,Incorrect answer in dll import in Python,"<p>In my Python script I'm importing a dll written in VB.NET.
I'm calling a function of initialisation in my script. It takes 2 arguments: a path to XML file and a string. It returns an integer - 0 for success, else error. The second argument is passed by reference. So if success, it will get updated with success message. Otherwise, get updated with error message.</p>

<p>When my script receives the integer, I should print the message in the second variable. I'm not able to do that.</p>
"
472179,473,2009-01-23T07:21:48Z,16,How to read the header with pycurl,"<p>How do I read the response headers returned from a PyCurl request?</p>
"
472392,11527,2009-01-23T09:50:59Z,15,How to specify uniqueness for a tuple of field in a Django model,"<p>Is there a way to specify a Model in Django such that is ensures that pair of fields in unique in the table, in a way similar to the ""unique=True"" attribute for similar field?</p>

<p>Or do I need to check this constraint in the clean() method?</p>
"
472503,14752,2009-01-23T10:42:44Z,0,TypeError: 'tuple' object is not callable,"<p>I was doing the tutorial from  the book teach yourself django in 24 hours and in part1 hour 4 i got stuck on this error. </p>

<pre><code>Traceback (most recent call last):

  File ""C:\Python25\lib\site-packages\django\core\servers\basehttp.py"", line 278, in run
    self.result = application(self.environ, self.start_response)

  File ""C:\Python25\lib\site-packages\django\core\servers\basehttp.py"", line 635, in __call__
    return self.application(environ, start_response)

  File ""C:\Python25\lib\site-packages\django\core\handlers\wsgi.py"", line 239, in __call__
    response = self.get_response(request)

  File ""C:\Python25\lib\site-packages\django\core\handlers\base.py"", line 67, in get_response
    response = middleware_method(request)

  File ""C:\Python25\Lib\site-packages\django\middleware\common.py"", line 56, in process_request
    if (not _is_valid_path(request.path_info) and

  File ""C:\Python25\Lib\site-packages\django\middleware\common.py"", line 142, in _is_valid_path
    urlresolvers.resolve(path)

  File ""C:\Python25\Lib\site-packages\django\core\urlresolvers.py"", line 254, in resolve
    return get_resolver(urlconf).resolve(path)

  File ""C:\Python25\Lib\site-packages\django\core\urlresolvers.py"", line 181, in resolve
    for pattern in self.url_patterns:

  File ""C:\Python25\Lib\site-packages\django\core\urlresolvers.py"", line 205, in _get_url_patterns
    patterns = getattr(self.urlconf_module, ""urlpatterns"", self.urlconf_module)

  File ""C:\Python25\Lib\site-packages\django\core\urlresolvers.py"", line 200, in _get_urlconf_module
    self._urlconf_module = __import__(self.urlconf_name, {}, {}, [''])

  File ""c:\projects\iFriends\..\iFriends\urls.py"", line 17, in &lt;module&gt;
    (r'^admin/', include('django.contribute.admin.urls'))

TypeError: 'tuple' object is not callable
</code></pre>

<p>Can someone help me please..</p>

<p>url.py</p>

<pre><code>from django.conf.urls.defaults import *

####Uncomment the next two lines to enable the admin:
#### from django.contrib import admin
#### admin.autodiscover()

urlpatterns = patterns('',
    (r'^People/$', 'iFriends.People.views.index') ,
    (r'^admin/', include('django.contrib.admin.urls')), 
    # Example:
    # (r'^iFriends/', include('iFriends.foo.urls')),

    # Uncomment the admin/doc line below and add 'django.contrib.admindocs' 
    # to INSTALLED_APPS to enable admin documentation:
    # (r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:


)
</code></pre>
"
472575,18138,2009-01-23T11:16:35Z,2,select single item from a collection : Python,"<p>I created a utility function to return the expected single item from an generator expression</p>

<pre><code>print one(name for name in ('bob','fred') if name=='bob')
</code></pre>

<p>Is this a good way to go about it?</p>

<pre><code>def one(g):
    try:
        val = g.next()
        try:
            g.next()
        except StopIteration:
            return val
        else:
            raise Exception('Too many values')
    except StopIteration:
        raise Exception('No values')
</code></pre>
"
472839,NA,2009-01-23T13:17:23Z,0,Subtract from an input appended list with a running balance output,"<p><em>Noob</em></p>

<p>I am trying to write a script that gives a running balance.  I am messing up on the elementary declared functions of python.</p>

<p>I need it too:</p>

<ul>
<li>accept a balance via input</li>
<li>append a list of transactions </li>
<li>take those out one by one in the order they were input </li>
<li>print a running total  </li>
<li>use <a href=""http://www.pasko.net/PyHtmlTable/"" rel=""nofollow"">pyhtmltable</a> to make the output in html table ready form for copy and pasting</li>
</ul>

<p>Code:</p>

<pre><code># transaction posting on available balance

import PyHtmlTable 
import twodarr
import string,re
import copy
import sys

posting_trans = [] #creating a list of posting debits here

avail_bal = int(input('What is the balance available to pay transactions?')) #getting the starting balance

while True:  #building up the list of transactions
    ans = input('Please enter the debits in order of posting one at a time.  If there is no more, please enter 0:')
    if int(ans) == 0:
        break
    if ans &gt; 0:    # to get out of loop
        posting_trans.append(ans)

num_trans = int(len(posting_trans))   #counting the number of transactions

print ""&lt;b&gt; Beginning available balance of"",avail_bal,"" &lt;/b&gt; ""  # start of the html table

tabledict = {'width':'400','border':2,'bgcolor':'white'}

t  = PyHtmlTable.PyHtmlTable( 2, 1 , tabledict )

t.setCellcontents(0,0,""Transactions"")  #header cells
t.setCellcontents(1,0,""Available Balance"")

while True:      #trying to create the rest of a dynamic table
    if countdown == 0:
        break

    for countdown in range(1,num_trans):
        t.add_row(1)

        def newer_bal():
            newer_bal(avail_bal - posting_trans[countdown])

            t.setCellcontents(0, 1, posting_trans[countdown])
            t.setCellcontents(1, 1, newer_bal)       

t.display()
</code></pre>
"
472977,42968,2009-01-23T14:02:43Z,15,Binary data with pyserial(python serial port),"<p>serial.write() method in pyserial seems to only send string data. I have arrays like [0xc0,0x04,0x00] and want to be able to send/receive them via the serial port? Are there any separate methods for raw I/O?</p>

<p>I think I might need to change the arrays to ['\xc0','\x04','\x00'], still, null character might pose a problem.  </p>
"
473099,11522,2009-01-23T14:35:39Z,163,Check if a given key already exists in a dictionary and increment it,"<p>Given a dictionary, how can I find out if a given key in that dictionary has already been set to a non-None value?</p>

<p>I.e., I want to do this:</p>

<pre><code>my_dict = {}

if (my_dict[key] != None):
  my_dict[key] = 1
else:
  my_dict[key] += 1
</code></pre>

<p>I.e., I want to increment the value if there's already one there, or set it to 1 otherwise.</p>
"
473498,20498,2009-01-23T16:16:33Z,4,"When printing an image, what determines how large it will appear on a page?","<p>Using Python's Imaging Library I want to create a PNG file.<br />
I would like it if when printing this image, without any scaling, it would always print at a known and consistent 'size' on the printed page.</p>

<p>Is the resolution encoded in the image? </p>

<p>If so, how do I specify it?</p>

<p>And even if it is, does this have any relevance when it goes to the printer? </p>
"
473620,2183,2009-01-23T16:48:06Z,185,How do you create a daemon in Python?,"<p><a href=""http://www.google.co.uk/search?q=python+daemon"">Searching on Google</a> reveals x2 code snippets. The first result is to <a href=""http://code.activestate.com/recipes/278731/"">this code recipe</a> which has a lot of documentation and explanation, along with some useful discussion underneath. </p>

<p>However, <a href=""http://www.jejik.com/articles/2007/02/a_simple_unix_linux_daemon_in_python/"">another code sample</a>, whilst not containing so much documentation, includes sample code for passing commands such as start, stop and restart. It also creates a PID file which can be handy for checking if the daemon is already running etc.</p>

<p>These samples both explain how to create the daemon. Are there any additional things that need to be considered? Is one sample better than the other, and why?</p>
"
473937,58385,2009-01-23T18:21:26Z,2,file upload status information,"<p>Im making a small python script to upload files on the net. The script is working correctly, and now I want to add a simple progress bar that indicates the amount of uploading left. my question is -how do I get the upload status  information from the server where im uploading the file, assuming it is possible...I am using curl and pycurl to make the http requests in python. 
Any help will be much appreciated, Thanks!!</p>
"
473961,27958,2009-01-23T18:30:25Z,3,"Best way to create a ""runner"" script in Python?","<p>I have a bunch of Python modules in a directory, all being a derivate class. I need a ""runner"" script that, for each module, instantiate the class that is inside it (the actual class name can be built by the module file name) and than call the ""go"" method on each of them.</p>

<p>I don't know how many modules are there, but I can list all of them globbing the directory via something like ""bot_*.py""</p>

<p>I think this is something about ""meta programming"", but how could be the best (most elegant) way to do it?</p>
"
473973,12930,2009-01-23T18:34:29Z,120,"Shuffle an array with python, randomize array item order with python","<p>What's the easiest way to shuffle an array with python?</p>
"
474034,21778,2009-01-23T18:53:35Z,3,Which GTK widget combination to use for scrollable column of widgets?,"<p>I'm working with PyGTK, trying to come up with a combination of widgets that will do the following:</p>

<ul>
<li>Let me add an endless number of widgets in a column</li>
<li>Provide a vertical scrollbar to get to the ones that run off the bottom</li>
<li>Make the widgets' width adjust to fill available horizontal space when the window is resized</li>
</ul>

<p>Thanks - I'm new to GTK.</p>
"
474203,36832,2009-01-23T19:42:18Z,0,how to pass id from url to post_save_redirect in urls.py,"<p><br />
I have several objects in the database. Url to edit an object using the generic view looks like <code>site.com/cases/edit/123/</code> where <code>123</code> is an id of the particular object. Consider the <code>cases/url.py</code> contents:</p>

<pre><code>url(r'edit/(?P&lt;object_id&gt;\d{1,5})/$', update_object, { ... 'post_save_redirect': ???}, name = 'cases_edit'),
</code></pre>

<p>where <code>update_object</code> is a generic view. How to construct the <code>post_save_redirect</code> to point to <code>site.com/cases/edit/123/</code>. My problem is, that I don't know how to pass the <code>id</code> of the object to redirect function. I tried something like:</p>

<pre><code>'post_save_redirect': 'edit/(?P&lt;object_id&gt;\d{1,5})/'
'post_save_redirect': 'edit/' + str(object_id) + '/'
</code></pre>

<p>but obviously none of these work. <code>reverse</code> function was suggested, but how to pass the particular <code>id</code>?</p>

<pre><code>'post_save_redirect': reverse('cases_edit', kwargs = {'object_id': ???})
</code></pre>

<p><code>{% url %}</code> in the temple also requires passing the <code>id</code> of the particular object. The <code>id</code> can be passed via <code>extra_context</code>:</p>

<pre><code>extra_context = {'object_id': ???}
</code></pre>

<p>In all the cases the problem is to get <code>object_id</code> from the url.
<br /><br /></p>

<p>regards<br />
chriss</p>
"
474261,37840,2009-01-23T19:55:18Z,1,Python pysqlite not accepting my qmark parameterization,"<p>I think I am being a bonehead, maybe not importing the right package, but when I do...</p>

<pre><code>
from pysqlite2 import dbapi2 as sqlite
import types
import re
import sys
...
    def create_asgn(self):
    	stmt = ""CREATE TABLE ? (login CHAR(8) PRIMARY KEY NOT NULL, grade INTEGER NOT NULL)""
    	stmt2 = ""insert into asgn values ('?', ?)""
    	self.cursor.execute(stmt, (sys.argv[2],))
    	self.cursor.execute(stmt2, [sys.argv[2], sys.argv[3]])
...
</code> I get the error pysqlite2.dbapi2.OperationalError: near ""?"": syntax error </pre>

<p>This makes very little sense to me, as the docs show that pysqlite is qmark parametrized.  I am new to python and db-api though, help me out!  THANKS</p>
"
474275,4977,2009-01-23T19:59:01Z,3,Partial evaluation for parsing,"<p>I'm working on a macro system for Python (<a href=""http://stackoverflow.com/questions/454648/pythonic-macro-syntax"">as discussed here</a>) and one of the things I've been considering are units of measure.  Although units of measure could be implemented without macros or via static macros (e.g. defining all your units ahead of time), I'm toying around with the idea of allowing syntax to be extended dynamically at runtime.</p>

<p>To do this, I'm considering using a sort of partial evaluation on the code at compile-time.  If parsing fails for a given expression, due to a macro for its syntax not being available, the compiler halts evaluation of the function/block and generates the code it already has with a stub where the unknown expression is.  When this stub is hit at runtime, the function is recompiled against the current macro set.  If this compilation fails, a parse error would be thrown because execution can't continue.  If the compilation succeeds, the new function replaces the old one and execution continues.</p>

<p>The biggest issue I see is that you can't find parse errors until the affected code is run.  However, this wouldn't affect many cases, e.g. group operators like [], {}, (), and `` still need to be paired (requirement of my tokenizer/list parser), and top-level syntax like classes and functions wouldn't be affected since their ""runtime"" is really load time, where the syntax is evaluated and their objects are generated.</p>

<p>Aside from the implementation difficulty and the problem I described above, what problems are there with this idea?</p>
"
474331,33739,2009-01-23T20:13:10Z,2,"Getting attributes of a Python package that I don't have the name of, until runtime","<p>In a Python package, I have a string containing (presumably) the name of a subpackage.  From that subpackage, I want to retrieve a tuple of constants...I'm really not even sure how to proceed in doing this, though.</p>

<pre><code>#!/usr/bin/python
"""" The Alpha Package
Implements functionality of a base package under the 'alpha' namespace
""""

def get_params(packagename):
    # Here, I want to get alpha.&lt;packagename&gt;.REQUIRED_PARAMS
    pass
</code></pre>

<p>So, later in my code I might have:</p>

<pre><code>#!/usr/bin/python
import alpha

alpha.get_params('bravo') # should return alpha.bravo.REQUIRED_PARAMS
alpha.get_params('charlie') # should return alpha.charlie.REQUIRED_PARAMS
</code></pre>
"
474373,41718,2009-01-23T20:23:38Z,0,Python: Use the codecs module or use string function decode?,"<p>I have a text file that is encoded in UTF-8.  I'm reading it in to analyze and plot some data.  I would like the file to be read in as ascii.  Would it be best to use the codecs module or use the builtin string decode method?  Also, the file is divided up as a csv, so could the csv module also be a valid solution?</p>

<p>Thanks for your help.</p>
"
474528,2183,2009-01-23T21:07:05Z,68,What is the best way to repeatedly execute a function every x seconds in Python?,"<p>I want to repeatedly execute a function in Python every 60 seconds forever (just like an <a href=""http://developer.apple.com/documentation/Cocoa/Reference/Foundation/Classes/NSTimer_Class/Reference/NSTimer.html"">NSTimer</a> in Objective C). This code will run as a daemon and is effectively like calling the python script every minute using a cron, but without requiring that to be set up by the user.</p>

<p>In <a href=""http://stackoverflow.com/questions/373335/suggestions-for-a-cron-like-scheduler-in-python"">this question about a cron implemented in Python</a>, the solution appears to effectively just <a href=""http://docs.python.org/library/time.html#time.sleep"">sleep()</a> for x seconds. I don't need such advanced functionality so perhaps something like this would work</p>

<pre><code>while True:
    # Code executed here
    time.sleep(60)
</code></pre>

<p>Are there any foreseeable problems with this code?</p>
"
474934,23972,2009-01-23T22:48:44Z,0,How do I construct the packets for this UDP protocol?,"<p>Valve Software's Steam Server Query protocol as documented <a href=""http://developer.valvesoftware.com/wiki/Server_Queries"" rel=""nofollow"">here</a> allows you to query their game servers for various data.  This is a little out of my depth and I'm looking for a little guidance as to what I need to learn.</p>

<p>I'm assuming I'll need <a href=""http://docs.python.org/library/socket.html"" rel=""nofollow"">socket</a> and <a href=""http://docs.python.org/library/struct.html"" rel=""nofollow"">struct</a>, correct?</p>

<p>I'm comfortable with basic UDP tasks like <a href=""http://www.prasannatech.net/2008/07/socket-programming-tutorial.html"" rel=""nofollow"">these</a>, so I guess my main question is how do I construct my data with struct, as I'm completely unfamiliar with it.?</p>
"
474949,NA,2009-01-23T22:52:18Z,1,Python 2.2: How to get the lower 32 bits out of a 64 bit number?,"<p>I have a 64 bit number comprised of various bit fields and I'm writing a simple python utility to parse the number.  The problem I'm facing is that the lower 32 bits comprise of one field and using some combination of bit shifts or bit masking doesn't give just the 32 bits.  </p>

<pre><code>big_num = 0xFFFFFFFFFFFFFFFF
some_field = (big_num &amp; 0x00FFFF0000000000) # works as expected
field_i_need = big_num &amp; 0x00000000FFFFFFFF # doesn't work
</code></pre>

<p>What happens is that <code>field_i_need</code> is equal to <code>big_num</code>, not the lower 32 bits.</p>

<p>Am I missing something simple here?</p>

<p>Thanks!</p>

<p>Matthew</p>
"
475073,85185,2009-01-23T23:36:31Z,2,Non-ascii string in verbose_name argument when declaring DB field in Django,"<p>I declare this:</p>

<pre><code>#This file is using encoding:utf-8
...
class Buddy(models.Model):
    name=models.CharField('ФИО',max_length=200)
    ...
</code></pre>

<p>... in models.py. manage.py syncdb works smoothly. However when I go to admin interface and try to add a new Buddy I catch a DjangoUnicodeDecodeError, which says: ""'utf8' codec can't decode bytes in position 0-1: invalid data. You passed in '\xd4\xc8\xce' (&lt;type 'str'&ltr;)"".</p>

<p>I'm using sqlite3, so all strings are stored as bytestrings encoded in utf8 there. Django's encoding is also utf8. Seen django's docs on this topic, no idea.</p>

<p>UPD: Eventually I figured out what the problem was. It turned out to be that I'd saved my source in ANSI encoding.</p>

<p>Solution: I saved the source in UTF-8 and it worked wonders.</p>
"
475216,56349,2009-01-24T00:40:09Z,6,Python Applications: Can You Secure Your Code Somehow?,"<p>If there is truly a 'best' way, what <em>is</em> the best way to ship a python app and ensure people can't (easily) reverse engineer your algorithms/security/work in general?</p>

<p>If there isn't a 'best' way, what are the different options available?</p>

<p>Background:
I love coding in Python and would love to release more apps with it.  One thing that I wonder about is the possibility of people circumventing any licensing code I put in, or being able to just rip off my entire source base.  I've heard of Py2Exe and similar applications, but I'm curious if there are 'preferred' ways of doing it, or if this problem is just a fact of life.</p>
"
475302,49985,2009-01-24T01:38:35Z,2,PostgreSQL procedural languages: to choose?,"<p>I have been working with PostgreSQL, playing around with Wikipedia's millions of hyperlinks and such, for 2 years now. I either do my thing directly by sending SQL commands, or I write a client side script in python to manage a million queries when this cannot be done productively (efficiently and effectively) manually. </p>

<p>I would run my python script on my 32bit laptop and have it communicate with a $6000 64bit server running PostgreSQL; I would hence have an extra 2.10 Ghz, 3 GB of RAM, psyco and a multithreaded SQL query manager.</p>

<p>I now realize that it is time for me to level up. I need to learn to server-side script using a procedural language (PL); I really need to reduce network traffic and its inherent serializing overhead. </p>

<p>Now, I really do not feel like researching all the PLs. Knowing that I already know python, and that I am looking for the means between effort and language efficiency, what PL do you guys fancy I should install, learn and use, and why and how?</p>
"
475552,20955,2009-01-24T05:15:15Z,3,group by in django,"<p>How can i create simple group by query in trunk version of django?</p>

<p>I need something like</p>

<pre><code>SELECT name
FROM mytable
GROUP BY name
</code></pre>

<p>actually what i want to do is simply get all entries with distinct names. </p>
"
475871,49018,2009-01-24T11:13:19Z,68,"Python - why use ""self"" in a class?","<p>How do these 2 classes differ?</p>

<pre><code>class A():
    x=3

class B():
    def __init__(self):
        self.x=3
</code></pre>

<p>Is there any significant difference? </p>
"
475928,49219,2009-01-24T12:05:46Z,4,python IPC (Inter Process Communication) for Vista UAC (User Access Control),"<p>I am writing a Filemanager in (wx)python - a lot already works. When copying files there is already a progress dialog, overwrite handling etc.</p>

<p>Now in Vista when the user wants to copy a file to certain directories (eg %Program Files%) the application/script needs elevation, which cannot be asked for at runtime. So i have to start another app/script elevated, which does the work, but needs to communicate with the main app, so latter can update the progress etc.</p>

<p>I searched and found a lot of articles saying shared memory and pipes are the easiest way. So what i am looking for is a 'high level' platform independent ipc library whith python bindings using shared mem or pipes. </p>

<p>I already found ominORB, fnorb, etc. They look very interesting, but use TCP/IP, is there an equivalent lib using shared mem or pipes ? Since the ipc-client is always on the same machine sockets seems not to be neccesary here. And i am also afraid the user would have to allow ipc-socket-communications on his/her personal firewall.</p>

<p>EDIT: I really mean high level: it would be great to be able to just call some functions like when using omniORB instead of sending strings to stdin/stdout.</p>
"
476017,35903,2009-01-24T13:26:58Z,24,Order a QuerySet by aggregate field value,"<p>Let's say I have the following model:</p>

<pre><code>class Contest:
    title = models.CharField( max_length = 200 )
    description = models.TextField()

class Image:
    title = models.CharField( max_length = 200 )
    description = models.TextField()
    contest = models.ForeignKey( Contest )
    user = models.ForeignKey( User )

    def score( self ):
        return self.vote_set.all().aggregate( models.Sum( 'value' ) )[ 'value__sum' ]

class Vote:
    value = models.SmallIntegerField()
    user = models.ForeignKey( User )
    image = models.ForeignKey( Image )
</code></pre>

<p>The users of a site can contribute their images to several contests. Then other users can vote them up or down.
Everything works fine, but now I want to display a page on which users can see all contributions to a certain contest. The images shall be ordered by their score.
Therefore I tried the following:</p>

<pre><code>Contest.objects.get( pk = id ).image_set.order_by( 'score' )
</code></pre>

<p>As I feared it doesn't work since 'score' is no database field that could be used in queries.</p>
"
476142,46308,2009-01-24T15:29:45Z,2,The OLE way of doing drag&drop in wxPython,"<p>I have wxPython app which is running on MS Windows and I'd like it to support drag&amp;drop between its instances (so the user opens my app 3 times and drags data from one instance to another).</p>

<p>The simple drag&amp;drop in wxPython works that way:</p>

<ol>
<li><strong>User initiates drag</strong>: The source window packs necessary data in wx.DataObject(), creates new wx.DropSource, sets its data and calls dropSource.DoDragDrop()</li>
<li><strong>User drops data onto target window</strong>:  The drop target calls library function GetData() which transfers actual data to its wx.DataObject instance and finally - dataObject.GetData() unpacks the actual data.</li>
</ol>

<p>I'd like to have some more sophisticated drag&amp;drop which would allow user to choose what data is dragged <strong>after</strong> he drops.<br />
Scenario of <em>my dreams</em>:  </p>

<ol>
<li><strong>User initiates drag</strong>: Only some pointer to the source window is packed (some function or object).</li>
<li><strong>User drops data onto target window</strong>: Nice dialog is displayed which asks user which drag&amp;drop mode he chooses (like - dragging only song title, or song title and the artists name or whole album of the dragged artist).</li>
<li><strong>Users chooses drag&amp;drop mode</strong>: Drop target calls some function on the dragged data object, which then retrieves data from the drag source and transfers it to the drop target.</li>
</ol>

<p>The scenario of my dreams seems doable in MS Windows, but the docs for wxWidgets and wxPython are pretty complex and ambigious. Not all wx.DataObject classes are available in wxPython (only wx.PySimpleDataObject), so I'd like someone to share his experience with such approach. Can such behaviour be implemented in wxPython without having to code it directly in winAPI?</p>

<p>EDIT:
Toni Ruža gave an answer with working drag&amp;drop example, but that's not exactly the scenario of <em>my dreams</em>. His code manipulates data when it's dropped (the <strong>HandleDrop()</strong> shows popup menu), but data is prepared when drag is initiated (in <strong>On_ElementDrag()</strong>). In my application there should be three different drag&amp;drop modes, and some of them require time-consuming data preparation. That's why I want to postpone data retrieval to the moment user drops data and chooses (potentially costly) d&amp;d mode.</p>

<p>And for memory protection issue - I want to use OLE mechanisms for inter-process communication, like MS Office does. You can copy Excel diagram and paste it into MS-Word where it will behave like an image (well, sort of). Since it works I believe it can be done in winAPI. I just don't know if I can code it in wxPython.</p>
"
476187,NA,2009-01-24T15:49:59Z,2,Where can i get a wiki formatting widget for my django application?,"<p>Am looking for a wiki formatting widget for my django application, just like the one am using to type this question in stackoverflow?</p>
"
476227,NA,2009-01-24T16:14:12Z,12,Detect duplicate MP3 files with different bitrates and/or different ID3 tags?,"<p>How could I detect (preferably with Python) duplicate MP3 files that can be encoded with different bitrates (but they are the same song) and ID3 tags that can be incorrect?</p>

<p>I know I can do an <a href=""http://en.wikipedia.org/wiki/MD5"">MD5</a> checksum of the files content but that won't work for different bitrates. And I don't know if ID3 tags have influence in generating the MD5 checksum. Should I re-encode MP3 files that have a different bitrate and then I can do the checksum? What do you recommend?</p>
"
476324,9908,2009-01-24T16:56:22Z,4,Trimming Mako output,"<p>I really like the Mako templating system that's used in Pylons and a couple other Python frameworks, and my only complaint is how much WS leaks through even a simple inheritance scheme.</p>

<p>Is there anyway to accomplish below, without creating such huge WS gaps... or packing my code in like I started to do with base.mako?</p>

<p>Otherwise to get a grip on what I'm trying to accomplish with below.</p>

<p>Base is kind of like interface class for all views for the entire application, layout is just a prototype idea for 3-4 different layout files ( tables, pure CSS, etc ), and controller/action is a test to make sure my idea's are sane.</p>

<p>Short summary of question:  How to cut out the WS created in my Mako scheme?</p>

<p>Update: Is not a solution because it involves seeding all of my mako files with \'s
   <a href=""http://www.makotemplates.org/docs/syntax.html#syntax_newline"" rel=""nofollow"">http://www.makotemplates.org/docs/syntax.html#syntax_newline</a></p>

<p>/base.mako </p>

<pre><code>&lt;!DOCTYPE html PUBLIC ""-//W3C//DTD XHTML 1.0 Transitional//EN"" 
""http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd""&gt;
&lt;html&gt;
  &lt;head&gt;&lt;%def name=""headtags()""&gt;&lt;/%def&gt;${self.headtags()}&lt;/head&gt;
  &lt;body&gt;
    &lt;%def name=""header()""&gt;&lt;/%def&gt;${self.header()}${next.body()}&lt;%def name=""footer()""&gt;&lt;/%def&gt;${self.footer()}
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>/layout.mako</p>

<pre><code>&lt;%inherit file=""/base.mako""/&gt;
&lt;%def name=""headtags()""&gt;
   ${parent.headtags()}
   &lt;script src=""http://ajax.googleapis.com/ajax/libs/prototype/1.6.0.3/prototype.js""&gt;&lt;/script&gt;
&lt;/%def&gt;
&lt;%def name=""header()""&gt;
  &lt;h1&gt;My Blogination&lt;/h1&gt;
&lt;/%def&gt;
&lt;div id=""content""&gt;${next.body()}&lt;/div&gt;
</code></pre>

<p>/controller/action.mako</p>

<pre><code>&lt;%inherit file=""/layout.mako"" /&gt;
&lt;%def name=""headtags()""&gt;    
    &lt;title&gt; Hello world, templating system is 1 percent done&lt;/title&gt;
    ${parent.headtags()}
&lt;/%def&gt;
Hello ${c.name}!
</code></pre>

<p>rendered output:</p>

<pre><code>&lt;!DOCTYPE html PUBLIC ""-//W3C//DTD XHTML 1.0 Transitional//EN""
""http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd""&gt;
&lt;html&gt;
  &lt;head&gt;    
    &lt;title&gt; Hello world, templating system is 1 percent done&lt;/title&gt;

   &lt;script src=""http://ajax.googleapis.com/ajax/libs/prototype/1.6.0.3/prototype.js""&gt;&lt;/script&gt;


&lt;/head&gt;
  &lt;body&gt;

  &lt;h1&gt;My Blogination&lt;/h1&gt;


&lt;div id=""content""&gt;

Hello Anonymous!

&lt;/div&gt;

  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
"
476369,5222,2009-01-24T17:26:24Z,3,Is there a way to install the scipy special module without the rest of scipy?,"<p>I'm writing some Python numerical code and would like to use some functions from the <a href=""http://scipy.org/SciPyPackages/Special"" rel=""nofollow"">special module</a>. So far, my code only depends on numpy, which I've found very easy to install in a variety of Python environments. Installing scipy, on the other hand, has generally been an exercise in frustration.  Is there a way to get just the special module?</p>

<p><em>Note, I see now that there is a downloadable scipy package for the Mac, but that hasn't always been the case</em></p>
"
476394,41895,2009-01-24T17:47:30Z,3,"Django ""Did you mean?"" query","<p>I am writing a fairly simple Django application where users can enter string queries. The application will the search through the database for this string.</p>

<pre><code>Entry.objects.filter(headline__contains=query)
</code></pre>

<p>This query is pretty strait forward but not really helpful to someone who isn't 100% sure what they are looking for. So I expanded the search.</p>

<pre><code>from django.utils import stopwords

results = Entry.objects.filter(headline__contains=query)
if(!results):
    query = strip_stopwords(query)
    for(q in query.split(' ')):
        results += Entry.objects.filter(headline__contains=q)
</code></pre>

<p>I would like to add some additional functionality to this. Searching for miss spelled words, plurals, common homophones (sound the same spelled differently), ect. I was just wondering if any of these things were built into Djangos query language. It isn't important enough for me to write a huge algorithm for I am really just looking for something built in.</p>

<p>Thanks in advance for all the answers.</p>
"
476478,49860,2009-01-24T18:48:33Z,4,Python Regular Expression to add links to urls,"<p>I'm trying to make a regular expression that will correctly capture URLs, including ones that are wrapped in parenthesis as in (<a href=""http://example.com"" rel=""nofollow"">http://example.com</a>) and spoken about on coding horror at <a href=""http://www.codinghorror.com/blog/archives/001181.html"" rel=""nofollow"">http://www.codinghorror.com/blog/archives/001181.html</a></p>

<p>I'm currently using the following to create HTML A tags in python for links that start with http and www.</p>

<pre><code>r1 = r""(\b(http|https)://([-A-Za-z0-9+&amp;@#/%?=~_()|!:,.;]*[-A-Za-z0-9+&amp;@#/%=~_()|]))""
r2 = r""((^|\b)www\.([-A-Za-z0-9+&amp;@#/%?=~_()|!:,.;]*[-A-Za-z0-9+&amp;@#/%=~_()|]))""
return re.sub(r2,r'&lt;a rel=""nofollow"" target=""_blank"" href=""http://\1""&gt;\1&lt;/a&gt;',re.sub(r1,r'&lt;a rel=""nofollow"" target=""_blank"" href=""\1""&gt;\1&lt;/a&gt;',text))
</code></pre>

<p>this works well except for the case where someone wraps the url in parens.  Does anyone have a better way?</p>
"
476511,52509,2009-01-24T19:09:59Z,43,Resolving a relative url path to its absolute path,"<p>Is there a library in python that works like this?</p>

<pre><code>&gt;&gt;&gt; resolvePath(""http://www.asite.com/folder/currentpage.html"", ""anotherpage.html"")
'http://www.asite.com/folder/anotherpage.html'
&gt;&gt;&gt; resolvePath(""http://www.asite.com/folder/currentpage.html"", ""folder2/anotherpage.html"")
'http://www.asite.com/folder/folder2/anotherpage.html'
&gt;&gt;&gt; resolvePath(""http://www.asite.com/folder/currentpage.html"", ""/folder3/anotherpage.html"")
'http://www.asite.com/folder3/anotherpage.html'
&gt;&gt;&gt; resolvePath(""http://www.asite.com/folder/currentpage.html"", ""../finalpage.html"")
'http://www.asite.com/finalpage.html'
</code></pre>
"
476586,48814,2009-01-24T20:10:48Z,13,Is anyone using meta-meta-classes / meta-meta-meta-classes in Python/ other languages?,"<p>I recently discovered metaclasses in python. </p>

<p>Basically a metaclass in python is a class that creates a class. There are many useful reasons why you would want to do this - any kind of class initialisation for example. Registering classes on factories, complex validation of attributes, altering how inheritance works, etc. All of this becomes not only possible but simple.</p>

<p>But in python, metaclasses are also plain classes. So, I started wondering if the abstraction could usefully go higher, and it seems to me that it can and that:</p>

<ul>
<li>a metaclass corresponds to or implements a role in a pattern (as in GOF pattern languages). </li>
<li>a meta-metaclass is the pattern itself (if we allow it to create tuples of classes representing abstract roles, rather than just a single class)</li>
<li>a meta-meta-metaclass is a <em>pattern factory</em>, which corresponds to the GOF pattern groupings, e.g. Creational,  Structural, Behavioural. A factory where you could describe a case of a certain type of problem and it would give you a set of classes that solved it.</li>
<li>a meta-meta-meta-metaclass (as far as I could go), is a <em>pattern factory factory</em>, a factory to which you could perhaps describe the type of your problem and it would give you a pattern factory to ask.</li>
</ul>

<p>I have found some stuff about this online, but mostly not very useful. One problem is that different languages define metaclasses slightly differently.</p>

<p>Has anyone else used metaclasses like this in python/elsewhere, or seen this used in the wild, or thought about it? What are the analogues in other languages? E.g. in C++ how deep can the template recursion go?</p>

<p>I'd very much like to research it further.</p>
"
476659,58667,2009-01-24T21:09:26Z,2,Cygwin and Python 2.6,"<p>New to python (and programming).  What exactly do I need from Cygwin?  I'm running python 2.6 on winxp.  Can I safely download the complete Cygwin?  It just seems like a huge bundle of stuff.</p>

<p>Well, I keep running into modules and functionality (i.e. piping output) which suggest downloading various cygwin components. Will cygwin change or modify any other os functionality or have any other side effects?</p>
"
476668,57202,2009-01-24T21:19:07Z,15,Resources for TDD aimed at Python Web Development,"<p>I am a hacker not and not a full-time programmer but am looking to start my own full application development experiment. I apologize if I am missing something easy here. I am looking for recommendations for books, articles, sites, etc for learning more about test driven development specifically compatible with or aimed at Python web application programming. I understand that Python has built-in tools to assist. What would be the best way to learn about these outside of RTFM? I have searched on StackOverflow and found the Kent Beck's and David Astels book on the subject. I have also bookmarked the Wikipedia article as it has many of these types of resources.</p>

<p>Are there any particular ones you would recommend for this language/application?</p>
"
476731,55283,2009-01-24T22:00:43Z,0,Get foreign key without requesting the whole object,"<p>I have a model Foo which have a ForeignKey to the User model.</p>

<p>Later, I need to grab all the User's id and put then on a list</p>

<pre><code>foos = Foo.objects.filter(...)

l = [ f.user.id for f in foos ]
</code></pre>

<p>But when I do that, django grabs the whole User instance from the DB instead of giving me just the numeric user's id, which exist in each Foo row.</p>

<p>How can I get all the ids without querying each user or using a select_related?</p>

<p>Thanks</p>
"
476772,58683,2009-01-24T22:26:13Z,10,python string join performance,"<p>There are a lot of articles around the web concerning python performance, the first thing you read: concatenating strings should not be done using '+': avoid s1+s2+s3, instead use str.join</p>

<p>I tried the following: concatenating two strings as part of a directory path: three approaches:</p>

<ol>
<li>'+' which i should not do</li>
<li>str.join</li>
<li>os.path.join</li>
</ol>

<p>Here is my code:</p>

<pre><code>import os,time

s1='/part/one/of/dir'
s2='part/two/of/dir'
N=10000

t=time.clock()
for i in xrange(N):
    s=s1+os.sep+s2
print time.clock()-t

t=time.clock()
for i in xrange(N):
    s=os.sep.join((s1,s2))
print time.clock()-t

t=time.clock()
for i in xrange(N):
    s=os.path.join(s1,s2)
print time.clock()-t
</code></pre>

<p>Here the results (python 2.5 WinXP)</p>

<pre><code>0.0182201927899
0.0262544541275
0.120238186697
</code></pre>

<p>Shouldn't it be exactly the other way round ?</p>
"
476949,NA,2009-01-25T00:22:01Z,9,Splitting a large XML file in Python,"<p>I'm looking to split a huge XML file into smaller bits. I'd like to scan through the file looking for a specific tag, then grab all info between  and , then save that into a file, then continue on through the rest of the file.</p>

<p>My issue is trying to find a clean way to note the start and end of the tags, so that I can grab the text inside as I scan through the file with ""for line in f""</p>

<p>I'd rather not use sentinel variables. Is there a pythonic way to get this done?</p>

<p>The file is too big to read into memory. </p>
"
476968,48891,2009-01-25T00:41:22Z,25,Using a java library from python,"<p>I have a python app and java app. The python app generates input for the java app and invokes it on the command line.</p>

<p>I'm sure there must be a more elegant solution to this; just like using JNI to invoke C code from Java.</p>

<p>Any pointers?
(FYI I'm v. new to Python)  </p>

<p><strong>Clarification</strong> (at the cost of a long question: apologies)
The py app (which I don't own) takes user input in the form of a number of configuration files. It then interprits these and farms work off to a number of (hidden) tools via a plugin mechanism. I'm looking to add support for the functionality provided by the legacy Java app.</p>

<p>So it doesn't make sense to call the python app from the java app and I can't run the py app in a jython environment (on the JVM).</p>

<p>Since there is no obvious mechanism for this I think the simple CL invocation is the best solution.</p>
"
477061,58713,2009-01-25T02:19:21Z,26,How to read Unicode input and compare Unicode strings in Python?,"<p>I work in Python and would like to read user input (from command line) in Unicode format, ie a Unicode equivalent of <code>raw_input</code>?</p>

<p>Also, I would like to test Unicode strings for equality and it looks like a standard <code>==</code> does not work.</p>

<p>Thank you for your help !</p>
"
477096,49287,2009-01-25T03:06:09Z,46,Python import coding style,"<p>I've discovered a new pattern.  Is this pattern well known or what is the opinion about it?</p>

<p>Basically, I have a hard time scrubbing up and down source files to figure out what module imports are available and so forth, so now, instead of</p>

<pre><code>import foo
from bar.baz import quux

def myFunction():
    foo.this.that(quux)
</code></pre>

<p>I move all my imports into the function where they're actually used., like this:</p>

<pre><code>def myFunction():
    import foo
    from bar.baz import quux

    foo.this.that(quux)
</code></pre>

<p>This does a few things.  First, I rarely accidentally pollute my modules with the contents of other modules.  I could set the <code>__all__</code> variable for the module, but then I'd have to update it as the module evolves, and that doesn't help the namespace pollution for code that actually lives in the module.</p>

<p>Second, I rarely end up with a litany of imports at the top of my modules, half or more of which I no longer need because I've refactored it.  Finally, I find this pattern MUCH easier to read, since every referenced name is right there in the function body.</p>
"
477135,42024,2009-01-25T03:59:08Z,8,How to list the files in a static directory?,"<p>I am playing with Google App Engine and Python and I cannot list the files of a static directory. Below is the code I currently use.</p>

<p><strong>app.yaml</strong></p>

<pre><code>- url: /data
  static_dir: data
</code></pre>

<p><strong>Python code to list the files</strong></p>

<pre><code>myFiles = []
for root, dirs, files in os.walk(os.path.join(os.path.dirname(__file__), 'data/') ):
    for name in files:
        full_name = os.path.join(root, name)
        myFiles.append('%s;%s\n' % (name, datetime.fromtimestamp(os.stat(full_name).st_mtime)))
</code></pre>

<p>When I run this code locally on my machine, everything is alright. I have my Python script at the root of the directory and it walks the files under the data directory. However, when I upload and run the exact same code in GAE, it doesn`t work. It seems to me that the directory structure of my application is not exactly replicated in Google App Engine. <strong>Where are the static files?</strong> </p>

<p>Thanks!</p>
"
477183,10583,2009-01-25T05:02:30Z,2,Generating and submitting a dynamic number of objects in a form with Django,"<p>I want to be able to update a dynamic number of objects within a single form using Django and I'm wondering what the best way to do this would be. An example of a similar situation may help.</p>

<p>Model:</p>

<pre><code>class Customer(Model.models):
    name = models.CharField(max_length=100)
    active = models.BooleanField()
</code></pre>

<p>Form (I know I'm mixing view and template code here which doesn't work but this is a general idea for what the form is supposed to do):</p>

<pre><code>customers = Customer.objects.all()
for c in customers:
    print &lt;li&gt; {{ c.name }} &lt;input type=""checkbox"" value=""{{ c.active }}"" name=""?"" /&gt;
</code></pre>

<p>How would I go about submitting a list of these objects? Would the best bet be to attach the id of the customer into each 'row' and then process based on the id? Is there a mechanism for submitting a list of tuples? What would be the ideal solution?</p>
"
477237,58737,2009-01-25T06:13:00Z,20,How do I simulate flip of biased coin in python?,"<p>In unbiased coin flip H or T occurs 50% of times.</p>

<p>But I want to simulate coin which gives H  with probability 'p' and T with probability '(1-p)'.</p>

<p>something like this:</p>

<pre><code>def flip(p):
   '''this function return H with probability p'''
   # do something
   return result

&gt;&gt; [flip(0.8) for i in xrange(10)]
[H,H,T,H,H,H,T,H,H,H]
</code></pre>
"
477486,49701,2009-01-25T10:20:43Z,283,Python decimal range() step value,"<p>Is there a way to step between 0 and 1 by 0.1? </p>

<p>I thought I could do it like the following, but it failed:</p>

<pre><code>for i in range(0, 1, 0.1):
    print i
</code></pre>

<p>Instead, it says that the step argument cannot be zero, which I did not expect.</p>
"
477573,51532,2009-01-25T11:25:02Z,11,"Easy_install of wxpython has ""setup script"" error","<p>I have an install of python 2.5 that fink placed in /sw/bin/. I use the easy install command</p>

<pre><code>sudo /sw/bin/easy_install wxPython
</code></pre>

<p>to try to install wxpython and I get an error while trying to process wxPython-src-2.8.9.1.tab.bz2 that there is not setup script. Easy-install has worked for several other installations until this one. Any help on why it's busting now?</p>

<p>EDIT: The error occurs before dumping back to shell prompt.</p>

<p><i>Reading <a href=""http://wxPython.org/download.php"">http://wxPython.org/download.php</a><br>
Best match: wxPython src-2.8.9.1<br>
Downloading <a href=""http://downloads.sourceforge.net/wxpython/wxPython-src-2.8.9.1.tar.bz2"">http://downloads.sourceforge.net/wxpython/wxPython-src-2.8.9.1.tar.bz2</a><br>
Processing wxPython-src-2.8.9.1.tar.bz2 <br>
error: Couldn't find a setup script in /tmp/easy_install-tNg6FG/wxPython-src-2.8.9.1.tar.bz2
</i></p>
"
477820,45955,2009-01-25T15:29:44Z,12,What's the idiomatic Python equivalent to Django's 'regroup' template tag?,"<p><a href=""http://docs.djangoproject.com/en/dev/ref/templates/builtins/#regroup"">http://docs.djangoproject.com/en/dev/ref/templates/builtins/#regroup</a></p>

<p>I can think of a few ways of doing it with loops but I'd particularly like to know if there is a neat one-liner.</p>
"
478359,854,2009-01-25T21:39:22Z,2,Python and os.chroot,"<p>I'm writing a web-server in Python as a hobby project. The code is targeted at *NIX machines. I'm new to developing on Linux and even newer to Python itself.</p>

<p>I am worried about people breaking out of the folder that I'm using to serve up the web-site. The most obvious way to do this is to filter requests for documents like /../../etc/passwd. However, I'm worried that there might be clever ways to go up the directory tree that I'm not aware of and consequentially my filter won't catch. </p>

<p>I'm considering adding using the os.chroot so that the root directory is the web-site itself. Is this is a safe way of protecting against these jail breaking attacks? Are there any potential pitfalls to doing this that will hurt me down the road?</p>
"
478382,20955,2009-01-25T21:55:12Z,12,How to send multiple input field values with same name?,"<p>I have m2m field, lets say it have name 'relations', so i want to allow user to send as many relations as he wants. I add new input to html with javascript with same name, like so</p>

<pre><code>&lt;input type='text' name='relations' value='a' /&gt;
&lt;input type='text' name='relations' value='b' /&gt;
</code></pre>

<p>in cleaned_data i receive only value of second input ('b'). How to receive both?</p>
"
478458,49701,2009-01-25T22:48:56Z,13,Python regular expressions with more than 100 groups?,"<p>Is there any way to beat the 100-group limit for regular expressions in Python? Also, could someone explain why there is a limit. Thanks.</p>
"
478655,40149,2009-01-26T01:45:01Z,1,Need to route instance calls inside a python class,"<p>The problem is a need to take the arguments into account before choosing the responder. Here is my attempt so far.</p>

<pre><code>from responders import A, B, C

class RandomResponder(object)
    def init(self, *args, *kwargs):
        self.args = args
        self.kwargs = kwargs

    def __getattr__(self, name):
        # pick a responder based on the args the function was called with
        # I don't know how to do this part
        # for sake of argument lets the args a function was called with lead me to pick responder A
        r = A
        responder = r(*self.args, **self.kwargs)
        return responder.__getattr__(name)
</code></pre>

<p>The desired effect would be:</p>

<pre><code>r = RandomResponder()
r.doSomething(1)
#returns A.doSomething()
r.doSomething(2)
#returns B.doSomething()
r.doSomething(3)
#return C.doSomething()
r.doSomethingElse(1)
#returns A.doSomethingElse()
r.doSomethingElse(2)
#returns B.doSomethingElse()
r.doSomethingElse(3)
#returns C.doSomethingElse()
</code></pre>

<p>I will not know ahead of time all the functions contained with the responders A, B, and C.</p>
"
479043,9106,2009-01-26T07:33:44Z,0,is there a string method to capitalize acronyms in python?,"<p>This is good:</p>

<blockquote>
  <blockquote>
    <blockquote>
      <p>import string
      string.capwords(""proper name"")
      'Proper Name'</p>
    </blockquote>
  </blockquote>
</blockquote>

<p>This is not so good: </p>

<blockquote>
  <blockquote>
    <blockquote>
      <p>string.capwords(""I.R.S"")
      'I.r.s'</p>
    </blockquote>
  </blockquote>
</blockquote>

<p>Is there no string method to do capwords so that it accomodates acronyms?</p>
"
479236,58737,2009-01-26T09:37:47Z,3,How do I simulate biased die in python?,"<p>I want to simulate N-sided biased die? </p>

<pre><code>def roll(N,bias):
     '''this function rolls N dimensional die with biasing provided'''
     # do something
     return result

&gt;&gt; N=6
&gt;&gt; bias=( 0.20,0.20,0.15,0.15,0.14,0.16,)
&gt;&gt; roll(N,bias)
   2
</code></pre>
"
479751,2128,2009-01-26T13:15:03Z,7,All nodeValue fields are None when parsing XML,"<p>I'm building a simple web-based RSS reader in Python, but I'm having trouble parsing the XML. I started out by trying some stuff in the Python command line.</p>

<pre><code>&gt;&gt;&gt; from xml.dom import minidom
&gt;&gt;&gt; import urllib2 
&gt;&gt;&gt; url ='http://www.digg.com/rss/index.xml'
&gt;&gt;&gt; xmldoc = minidom.parse(urllib2.urlopen(url))
&gt;&gt;&gt; channelnode = xmldoc.getElementsByTagName(""channel"")
&gt;&gt;&gt; channelnode = xmldoc.getElementsByTagName(""channel"")
&gt;&gt;&gt; titlenode = channelnode[0].getElementsByTagName(""title"")
&gt;&gt;&gt; print titlenode[0]
&lt;DOM Element: title at 0xb37440&gt; 
&gt;&gt;&gt; print titlenode[0].nodeValue 
None
</code></pre>

<p>I played around with this for a while, but the <code>nodeValue</code> of everything seems to be <code>None</code>. Yet if you look at the XML, there definitely are values there. What am I doing wrong?</p>
"
480214,58994,2009-01-26T15:43:58Z,414,How do you remove duplicates from a list in whilst preserving order?,"<p>Is there a built-in that removes duplicates from list in Python, whilst preserving order? I know that I can use a set to remove duplicates, but that destroys the original order. I also know that I can roll my own like this:</p>

<pre><code>def uniq(input):
  output = []
  for x in input:
    if x not in output:
      output.append(x)
  return output
</code></pre>

<p>(Thanks to <a href=""http://stackoverflow.com/users/28169/unwind"">unwind</a> for that <a href=""http://stackoverflow.com/questions/479897/how-do-you-remove-duplicates-from-a-list-in-python#479921"">code sample</a>.)</p>

<p>But I'd like to avail myself of a built-in or a more Pythonic idiom if possible.</p>

<p>Related question: <a href=""http://stackoverflow.com/questions/89178/in-python-what-is-the-fastest-algorithm-for-removing-duplicates-from-a-list-so-t"">In Python, what is the fastest algorithm for removing duplicates from a list so that all elements are unique <em>while preserving order</em>?</a></p>
"
480866,45959,2009-01-26T18:32:52Z,13,Get the title of the current active Window/Document in Mac OS X,"<p>Refering to a previously asked <a href=""http://stackoverflow.com/questions/373020/finding-the-current-active-window-in-mac-os-x-using-python"" rel=""nofollow"" title=""question"">question</a>, I would like to know how to get the title of the current active document.</p>

<p>I tried the script mention in the answers to the question above. This works, but only gives me the name of the application. For example, I am writing this question: When I fire up the script it gives me the name of the application, i.e. ""Firefox"". This is pretty neat, but does not really help. I would rather like to capture the title of my current active document. See the image. </p>

<p><img src=""http://img.skitch.com/20090126-nq2egknhjr928d1s74i9xixckf.jpg"" alt=""Firefox title"" /></p>

<p>I am using Leopard, so no backward compatibility needed. Also I am using Python's Appkit to gain access to the NSWorkspace class, but if you tell me the Objective-C code, I could figure out the translation to Python.
<hr>
Ok, I've got a solution which is not very satisfing, thats why I don't mark Koen Bok's answer. At least not yet.</p>

<pre><code>tell application ""System Events""
set frontApp to name of first application process whose frontmost is true
end tell
tell application frontApp
if the (count of windows) is not 0 then
	set window_name to name of front window
end if
end tell
</code></pre>

<p>Save as script and invoke it with osascript from the shell.</p>
"
481266,58693,2009-01-26T20:43:24Z,3,Is there a way in python to apply a list of regex patterns that are stored in a list to a single string?,"<p>i have a list of regex patterns  (stored in a list type) that I would like to apply to a string.</p>

<p>Does anyone know a good way to:</p>

<ol>
<li>Apply every regex pattern in the list to the string
and</li>
<li>Call a different function that is associated with that pattern in the list if it matches.</li>
</ol>

<p>I would like to do this in python if possible</p>

<p>thanks in advance.</p>
"
481692,NA,2009-01-26T22:42:42Z,49,Can a lambda function call itself recursively in Python?,"<p>A regular function can contain a call to itself in its definition, no problem.  I can't figure out how to do it with a lambda function though for the simple reason that the lambda function has no name to refer back to.  Is there a way to do it?  How?</p>
"
481862,32117,2009-01-26T23:47:04Z,1,Extracting info from large structured text files,"<p>I need to read some large files (from 50k to 100k lines), structured in groups separated by empty lines. Each group start at the same pattern ""No.999999999  dd/mm/yyyy  ZZZ"". Here´s some sample data.</p>

<blockquote>
  <p>No.813829461  16/09/1987  270<br />
  Tit.SUZANO PAPEL E CELULOSE S.A. (BR/BA)<br />
  C.N.P.J./C.I.C./N INPI : 16404287000155<br />
  Procurador: MARCELLO DO NASCIMENTO  </p>
  
  <p>No.815326777  28/12/1989  351<br />
  Tit.SIGLA SISTEMA GLOBO DE GRAVACOES AUDIO VISUAIS LTDA (BR/RJ)<br />
  C.N.P.J./C.I.C./NºINPI : 34162651000108<br />
  Apres.: Nominativa ; Nat.: De Produto<br />
  Marca: TRIO TROPICAL<br />
  Clas.Prod/Serv: 09.40<br />
  *DEFERIDO CONFORME RESOLUÇÃO 123 DE 06/01/2006, PUBLICADA NA RPI 1829, DE 24/01/2006.<br />
  Procurador: WALDEMAR RODRIGUES PEDRA  </p>
  
  <p>No.900148764  11/01/2007  LD3<br />
  Tit.TIARA BOLSAS E CALÇADOS LTDA<br />
  Procurador: Marcia Ferreira Gomes<br />
  *Escritório: Marcas Marcantes e Patentes  Ltda<br />
  *Exigência Formal não respondida Satisfatoriamente, Pedido de Registro de Marca considerado inexistente, de acordo com Art. 157 da LPI<br />
  *Protocolo da Petição de cumprimento de Exigência Formal: 810080140197</p>
</blockquote>

<p>I wrote some code that´s parsing it accordingly. There´s anything that I can improve, to improve readability or performance? Here´s what I come so far:</p>

<pre><code>import re, pprint

class Despacho(object):
    """"""
    Class to parse each line, applying the regexp and storing the results
    for future use
    """"""
    regexp = {
        re.compile(r'No.([\d]{9})  ([\d]{2}/[\d]{2}/[\d]{4})  (.*)'): lambda self: self._processo,
        re.compile(r'Tit.(.*)'): lambda self: self._titular,
        re.compile(r'Procurador: (.*)'): lambda self: self._procurador,
        re.compile(r'C.N.P.J./C.I.C./N INPI :(.*)'): lambda self: self._documento,
        re.compile(r'Apres.: (.*) ; Nat.: (.*)'): lambda self: self._apresentacao,
        re.compile(r'Marca: (.*)'): lambda self: self._marca,
        re.compile(r'Clas.Prod/Serv: (.*)'): lambda self: self._classe,
        re.compile(r'\*(.*)'): lambda self: self._complemento,
    }

    def __init__(self):
        """"""
        'complemento' is the only field that can be multiple in a single registry
        """"""
        self.complemento = []

    def _processo(self, matches):
        self.processo, self.data, self.despacho = matches.groups()

    def _titular(self, matches):
        self.titular = matches.group(1)

    def _procurador(self, matches):
        self.procurador = matches.group(1)

    def _documento(self, matches):
        self.documento = matches.group(1)

    def _apresentacao(self, matches):
        self.apresentacao, self.natureza = matches.groups()

    def _marca(self, matches):
        self.marca = matches.group(1)

    def _classe(self, matches):
        self.classe = matches.group(1)

    def _complemento(self, matches):
        self.complemento.append(matches.group(1))

    def read(self, line):
        for pattern in Despacho.regexp:
            m = pattern.match(line)
            if m:
                Despacho.regexp[pattern](self)(m)


def process(rpi):
    """"""
    read data and process each group
    """"""
    rpi = (line for line in rpi)
    group = False

    for line in rpi:
        if line.startswith('No.'):
            group = True
            d = Despacho()        

        if not line.strip() and group: # empty line - end of block
            yield d
            group = False

        d.read(line)


arquivo = open('rm1972.txt') # file to process
for desp in process(arquivo):
    pprint.pprint(desp.__dict__)
    print('--------------')
</code></pre>

<p>Thank you.</p>

<p>By the way, sorry for my poor english. :)</p>
"
481943,NA,2009-01-27T00:33:04Z,3,Python with Wiimote using pywiiuse module,"<p>After seeing the abilities and hackibility of wiimotes I really want to use it in my 'Intro to programming' final.  Everyone must make a python program and present it to the class.</p>

<p>I want to make a game with pygame incorporating a wiimote.  I found <a href=""http://sourceforge.net/project/showfiles.php?group_id=82407&amp;package_id=259597"" rel=""nofollow"">pywiiuse</a> which is a very basic wrapper for the <a href=""http://www.wiiuse.net/"" rel=""nofollow"">wiiuse</a> library using c types.</p>

<p>I can NOT get anything beyond LEDs and vibrating to work.  Buttons, IR, motion sensing, nothing.  I've tried different versions of wiiuse, pywiiuse, even python.  I can't even get the examples that came with it to run.  Here's the code I made as a simple test.  I copied some of the example C++ code.</p>

<pre><code>from pywiiuse import *
from time     import sleep

#Init
wiimotes = wiiuse_init()

#Find and start the wiimote
found    = wiiuse_find(wiimotes,1,5)

#Make the variable wiimote to the first wiimote init() found
wiimote  = wiimotes.contents

#Set Leds
wiiuse_set_leds(wiimote,WIIMOTE_LED_1)

#Rumble for 1 second
wiiuse_rumble(wiimote,1)
sleep(1)
wiiuse_rumble(wiimote,0)

#Turn motion sensing on(supposedly)
wiiuse_motion_sensing(wiimote,1)

while 1:
    #Poll the wiimotes to get the status like pitch or roll
    if(wiiuse_poll(wiimote,1)):
        print 'EVENT'
</code></pre>

<p>And here's the output when I run it.</p>

<pre><code>wiiuse version 0.9
wiiuse api version 8
[INFO] Found wiimote [assigned wiimote id 1].
EVENT
EVENT
Traceback (most recent call last):
  File ""C:\Documents and Settings\Nick\Desktop\wiimotetext.py"", line 26, in &lt;mod
ule&gt;
    if(wiiuse_poll(wiimote,1)):
WindowsError: exception: access violation reading 0x00000004
</code></pre>

<p>It seems each time I run it, it prints out EVENT 2-5 times until the trace back.  I have no clue what to do at this point, I've been trying for the past two days to get it working.</p>

<p>Thanks!</p>
"
481995,40529,2009-01-27T00:57:34Z,8,"What does the LDAP response tuple (97, []) mean?","<p>I am using python-ldap to try to authenticate against an existing Active Directory, and when I use the following code:</p>

<pre><code>import ldap
l = ldap.initialize('LDAP://example.com')
m = l.simple_bind_s(username@example.com,password)
</code></pre>

<p>I get the following back:</p>

<pre><code>print m
(97, [])
</code></pre>

<p>What does the 97 and empty list signify coming from a Microsoft Active Directory server?</p>

<p>I gather this is a successful authentication since it doesn't error (which it does if you use the wrong password or non-existent username), but I'd like to know if the tuple means something useful.</p>
"
482014,625,2009-01-27T01:10:43Z,36,How would you do the equivalent of preprocessor directives in Python?,"<p>Is there a way to do the following preprocessor directives in Python?</p>

<pre><code>#if DEBUG

&lt; do some code &gt;

#else

&lt; do some other code &gt;

#endif
</code></pre>
"
482146,30190,2009-01-27T02:27:28Z,5,Replace Nested For Loops... or not,"<p>I have a script that loops through a series of four (or less) characters strings.  For example:</p>

<pre><code>aaaa
aaab
aaac
aaad
</code></pre>

<p>If have been able to implement it with nested for loops like so:</p>

<pre><code>chars = string.digits + string.uppercase + string.lowercase

for a in chars:
    print '%s' % a   
    for b in chars:
        print '%s%s' % (a, b)
        for c in chars:
            print '%s%s%s' % (a, b, c)
            for d in chars:
                print '%s%s%s%s' % (a, b, c, d)
</code></pre>

<p>Is this sort of loop nesting a bad thing, and if so, what would be a better way of accomplishing what I am doing?</p>
"
482263,33383,2009-01-27T03:38:45Z,7,Beginner-level Python threading problems,"<p>As someone new to GUI development in Python (with pyGTK), I've just started learning about threading. To test out my skills, I've written a simple little GTK interface with a start/stop button. The goal is that when it is clicked, a thread starts that quickly increments a number in the text box, while keeping the GUI responsive.</p>

<p>I've got the GUI working just fine, but am having problems with the threading. It is probably a simple problem, but my mind is about fried for the day. Below I have pasted first the trackback from the Python interpreter, followed by the code. You can go to <a href=""http://drop.io/pxgr5id"">http://drop.io/pxgr5id</a> to download it. I'm using bzr for revision control, so if you want to make a modification and re-drop it, please commit the changes. I'm also pasting the code at <a href=""http://dpaste.com/113388/"">http://dpaste.com/113388/</a> because it can have line numbers, and this markdown stuff is giving me a headache.</p>

<p>Update 27 January, 15:52 EST:
Slightly updated code can be found here: <a href=""http://drop.io/threagui/asset/thread-gui-rev3-tar-gz"">http://drop.io/threagui/asset/thread-gui-rev3-tar-gz</a></p>

<p><strong>Traceback</strong></p>

<pre><code>crashsystems@crashsystems-laptop:~/Desktop/thread-gui$ python threadgui.pybtnStartStop clicked
Traceback (most recent call last):
  File ""threadgui.py"", line 39, in on_btnStartStop_clicked
    self.thread.stop()
  File ""threadgui.py"", line 20, in stop
    self.join()
  File ""/usr/lib/python2.5/threading.py"", line 583, in join
    raise RuntimeError(""cannot join thread before it is started"")
RuntimeError: cannot join thread before it is started
btnStartStop clicked
threadStop = 1
btnStartStop clicked
threadStop = 0
btnStartStop clicked
Traceback (most recent call last):
  File ""threadgui.py"", line 36, in on_btnStartStop_clicked
    self.thread.start()
  File ""/usr/lib/python2.5/threading.py"", line 434, in start
    raise RuntimeError(""thread already started"")
RuntimeError: thread already started
btnExit clicked
exit() called
</code></pre>

<p><strong>Code</strong></p>

<pre><code>#!/usr/bin/bash
import gtk, threading

class ThreadLooper (threading.Thread):
    def __init__ (self, sleep_interval, function, args=[], kwargs={}):
        threading.Thread.__init__(self)
        self.sleep_interval = sleep_interval
        self.function = function
        self.args = args
        self.kwargs = kwargs
        self.finished = threading.Event()

    def stop (self):
        self.finished.set()
        self.join()

    def run (self):
        while not self.finished.isSet():
            self.finished.wait(self.sleep_interval)
            self.function(*self.args, **self.kwargs)

class ThreadGUI:
    # Define signals
    def on_btnStartStop_clicked(self, widget, data=None):
        print ""btnStartStop clicked""
        if(self.threadStop == 0):
            self.threadStop = 1
            self.thread.start()
        else:
            self.threadStop = 0
            self.thread.stop()
        print ""threadStop = "" + str(self.threadStop)

    def on_btnMessageBox_clicked(self, widget, data=None):
        print ""btnMessageBox clicked""
        self.lblMessage.set_text(""This is a message!"")
        self.msgBox.show()

    def on_btnExit_clicked(self, widget, data=None):
        print ""btnExit clicked""
        self.exit()

    def on_btnOk_clicked(self, widget, data=None):
        print ""btnOk clicked""
        self.msgBox.hide()

    def on_mainWindow_destroy(self, widget, data=None):
        print ""mainWindow destroyed!""
        self.exit()

    def exit(self):
        print ""exit() called""
        self.threadStop = 1
        gtk.main_quit()

    def threadLoop(self):
        # This will run in a thread
        self.txtThreadView.set_text(str(self.threadCount))
        print ""hello world""
        self.threadCount += 1

    def __init__(self):
        # Connect to the xml GUI file
        builder = gtk.Builder()
        builder.add_from_file(""threadgui.xml"")

        # Connect to GUI widgets
        self.mainWindow = builder.get_object(""mainWindow"")

        self.txtThreadView = builder.get_object(""txtThreadView"")
        self.btnStartStop = builder.get_object(""btnStartStop"")
        self.msgBox = builder.get_object(""msgBox"")
        self.btnMessageBox = builder.get_object(""btnMessageBox"")
        self.btnExit = builder.get_object(""btnExit"")
        self.lblMessage  = builder.get_object(""lblMessage"")
        self.btnOk = builder.get_object(""btnOk"")

        # Connect the signals
        builder.connect_signals(self)

        # This global will be used for signaling the thread to stop.
        self.threadStop = 1

        # The thread
        self.thread = ThreadLooper(0.1, self.threadLoop, (1,0,-1))
        self.threadCounter = 0

if __name__ == ""__main__"":
    # Start GUI instance
    GUI = ThreadGUI()
    GUI.mainWindow.show()
    gtk.main()
</code></pre>
"
482405,46646,2009-01-27T05:38:38Z,-4,Parsing a file with column data in Python,"<p>I have a file that contains the symbol table <code>details.Its</code> in the form of rows and columns.</p>

<p>I need to extract first and last column.</p>

<p>How can I do that?</p>
"
482410,46646,2009-01-27T05:40:38Z,89,How do I convert a string to a double in Python?,"<p>I would like to know how to convert a string containing digits to a double.</p>
"
482612,11527,2009-01-27T08:10:48Z,5,ORM (object relational manager) solution with multiple programming language support,"<p>Is there a good ORM (object relational manager) solution that can use the same database from C++, C#, Python?</p>

<p>It could also be multiple solutions, e.g. one per language, as long as they can can access the same database and use the same schema.</p>

<p>Multi platform support is also needed.</p>

<h2>Clarification:</h2>

<p>The idea is to have one database and access this from software written in several different programming languages. Ideally this would be provided by one ORM having APIs (or bindings) in all of these languages.</p>

<p>One other solution is to have a different ORM in each language, that use compatible schemas. However I believe that schema migration will be very hard in this setting.</p>
"
483072,42636,2009-01-27T11:36:21Z,0,How come my class is behaving like a static class?,"<p>i have a module (a single .py file, actually), with a class called HashedDir.</p>

<p>when i import the file and instanciate 2 instances of that class, when i check the object's fields they're always the same, even if the two objects should be different.</p>

<p>Eg:</p>

<pre><code> h1 = HashedDir('/path/to/dir')
 print h1.getList()['files'] # /path/to/dir
 h2 = HashedDir('some/other/path')
 print h1.getList()['files'] # some/other/path
 print h2.getList()['files'] # some/other/path
</code></pre>

<p>Any idea?</p>

<p>This is the class:</p>

<pre><code>from os  import walk
from os import path
from hashlib import md5
import re

class HashedDir:
    """"""
    A list of files with associated md5 hashes generated retrieving thou
    a recursive walk in the directory tree starting from a provided root
    directory. Also stores the dirs in each dir
    """"""

    #  {'files': [
    #    ('/path/to/file1', '52bc309e11259af15e4623c7a0abc28c'),
    #    ('/path/to/file2', '52bc309e11259af15e4623c7a0abc28c'),
    #    ('/path/to/dir/file3', '52bc309e11259af15e4623c7a0abc28c')
    #   ],
    #   'dirs': ['/path/to/dir1', '/path/to/dir2']
    #  }
    fileList = {'files': [], 'dirs': []}
    ignoreList = []

    def __init__(self, rootDir, ignoreList=[]):
        """"""
        ignoreList is a list of regular expressions. If a file or a dir matches
        that regular expression, don't count it
        """"""
        self.ignoreList = ignoreList

        for dirpath, dirnames, filenames in walk(rootDir):
            for fileName in filenames:
                completeName = path.join(dirpath,fileName)
                hash = md5(open(completeName).read()).hexdigest()
                relativePath = self._relativePath(completeName, rootDir)
                if not self._toBeIgnored(relativePath):
                    self.fileList['files'].append((relativePath, hash))
            for dirName in dirnames:
                completeName = path.join(dirpath, dirName)
                relativePath = self._relativePath(completeName, rootDir)
                if not self._toBeIgnored(relativePath):
                    self.fileList['dirs'].append(relativePath)

    def _relativePath(self, path, base):
        return path.replace(base, '')

    def _toBeIgnored(self, path):
        for regex in self.ignoreList:
            if re.compile(regex).search(path) != None:
                return True
        return False

    def getList(self):
        return self.fileList
</code></pre>

<p>Thanks in advance</p>
"
483208,46646,2009-01-27T12:24:42Z,-1,How to stop a Python script without error messages on the shell?,"<p>I want to stop a Python script on seeing an error message.<br>
I dont want any error message on shell like exit().<br>
How to do it ???</p>
"
483666,19212,2009-01-27T14:46:09Z,269,Python reverse / invert a mapping,"<p>Given a dictionary like so:</p>

<pre><code>my_map = { 'a': 1, 'b':2 }
</code></pre>

<p>How can one invert this map to get:</p>

<pre><code>inv_map = { 1: 'a', 2: 'b' }
</code></pre>

<p><strong>EDITOR NOTE: <code>map</code> changed to <code>my_map</code> to avoid conflicts with the built-in function, <code>map</code>. Some comments may be affected below.</strong></p>
"
484220,31610,2009-01-27T16:57:09Z,1,calling methods on an instance with getattr [ python ],"<p>I was trying to write some code that would check if an item has some attributes , and to call them . I tried to do that with getattr , but the modifications wouldn't be permanent . I made a ""dummy"" class to check upon this .
Here is the code I used for the class :</p>

<pre><code>
class X:                                         
   def __init__(self):
     self.value = 90  
   def __get(self):   
     return self.value
   def __set(self,value):
     self.value = value  
   value = property(__get,__set)

x = X()
print x.value # this would output 90
getattr(x,""value="",99) # when called from an interactive python interpreter this would output 99
print x.value # this is still 90 ( how could I make this be 99 ? ) 
</code></pre>

<p>Thanks !</p>
"
484338,27478,2009-01-27T17:23:20Z,5,Problem with encoding in Django templates,"<p>I'm having problems using {% ifequal s1 ""some text"" %} to compare strings with extended characters in Django templates. When string s1 contains ascii characters >127, I get exceptions in the template rendering. What am I doing wrong? I'm using UTF-8 coding throughout the rest of application in both the data, templates and Python code without any problems.</p>

<p>views.py</p>

<pre><code>def test(request):
    return render_to_response(""test.html"", {
                                            ""s1"": ""dados"",
                                            ""s2"": ""aprovação"",
                                            }
                              )
</code></pre>

<p>test.html</p>

<pre><code>s1={{s1}}&lt;br&gt;
s2={{s2}}&lt;br&gt;

{% ifequal s1 ""dados"" %}
  s1=""dados"" is true
{% endifequal %}

{% ifequal s1 ""aprovação"" %}
  s1=""aprovação"" is true
{% endifequal %}

{% comment %}
The following two comparions cause the following exception:
Caught an exception while rendering: 'ascii' codec can't decode byte 0xc3 in position 6: ordinal not in range(128)

{% ifequal s2 ""dados"" %}
  s2=""dados"" is true
{% endifequal %}

{% ifequal s2 ""aprovação"" %}
  s2=""aprovação"" is true
{% endifequal %}
{% endcomment %}

{% ifequal s2 u""dados"" %}
  s2=""dados"" is true
{% endifequal %}

{% comment %}
The following comparison causes the following exception:
Caught an exception while rendering: 'ascii' codec can't encode characters in position 8-9: ordinal not in range(128)
{% ifequal s2 u""aprovação"" %}
  s2=""aprovação"" is true
{% endifequal %}
{% endcomment %}
</code></pre>

<p>Output</p>

<pre><code>s1=dados
s2=aprovação
s1=""dados"" is true
</code></pre>
"
484389,37491,2009-01-27T17:38:10Z,1,StaticText items disappear in wx.StaticBox,"<p>I'm creating a staticbox and a staticboxsizer in a vertical sizer. Everything works fine for me, but not on the customer's environment. </p>

<p>Everything in the staticbox is displayed, but labels. snippet below shows how i construct the staticboxsizer. </p>

<pre><code>    sbox2 = wx.StaticBox(self, wx.ID_ANY, 'CH1 Only')
    sboxsizer2 = wx.StaticBoxSizer(sbox2, wx.VERTICAL)

    gsizer9 = wx.GridBagSizer(1,1)
    gsizer9.Add(comp.MinMaxLabel_21, (1,0), (1,1), wx.ALL, 1)
    gsizer9.Add(comp.MinMax_21, (1,1), (1,1), wx.ALL, 1)

    gsizer9.Add(comp.MinMax_19, (2,1), (1,1), wx.ALL, 1)
    gsizer9.Add(comp.MinMaxLabel_19, (2,0), (1,1), wx.ALL, 1)

    gsizer9.Add(comp.VcOS_15, (3,1), (1,1), wx.ALL, 1)
    gsizer9.Add(comp.MinMaxLabel_22, (3,0), (1,1), wx.ALL, 1)


    gsizer9.Add(comp.MonLabel_18, (0,3), (1,1), wx.ALL, 1)
    gsizer9.Add(comp.MonLabel_21, (0,4), (1,1), wx.ALL, 1)
    gsizer9.Add(comp.MonLabel_17, (0,5), (1,1), wx.ALL, 1)
    comp.MonLabel_22.Wrap(40)
    gsizer9.Add(comp.MonLabel_22, (0,6), (1,1), wx.ALL, 1)
    comp.MonLabel_19.Wrap(40)
    gsizer9.Add(comp.MonLabel_19, (0,7), (1,1), wx.ALL, 1)

    gsizer9.Add(comp.VcOS_10, (1,3), (1,1), wx.ALL, 1)
    gsizer9.Add(comp.VcOS_11, (1,4), (1,1), wx.ALL, 1)
    gsizer9.Add(comp.VcOS_12, (1,5), (1,1), wx.ALL, 1)
    gsizer9.Add(comp.VcOS_13, (1,6), (1,1), wx.ALL, 1)
    gsizer9.Add(comp.VcOS_14, (1,7), (1,1), wx.ALL, 1)

    sboxsizer2.Add(gsizer9, 0,0,0)
    vsizer4.Add(sboxsizer2, 0,0,0)
</code></pre>

<p>comp.MinMaxLabel_* returns a wx.StaticText(label='blah'), nothing fancy, just a wrapper, which works fine for other ~400 items in other sizers. but in StaticBox or StaticBoxSizers, no StaticText displayed on customer's setup.</p>

<p>normally it is displayed as this in my setup: 
<img src=""http://img152.imageshack.us/img152/8758/normalnu9.jpg"" alt=""alt text"" /></p>

<p>this is what i get on customer's setup:
<img src=""http://img258.imageshack.us/img258/2351/problematiczo2.jpg"" alt=""alt text"" /></p>

<p>both setups have the same wxpython versions, 2.8.9.1. but 2.8.* also displays on my environment.
any suggestions?</p>
"
484890,36330,2009-01-27T19:37:19Z,3,How would you determine where each property and method of a Python class is defined?,"<p>Given an instance of some class in Python, it would be useful to be able to determine which line of source code <em>defined</em> each method and property (e.g. to implement [1]). For example, given a module ab.py</p>

<pre><code>class A(object):
    z = 1
    q = 2
    def y(self): pass
    def x(self): pass

class B(A):
    q = 4
    def x(self): pass
    def w(self): pass
</code></pre>

<p>define a function whither(class_, attribute) returning a tuple containing the filename, class, and line in the source code that defined or subclassed <code>attribute</code>. This means the definition in the class body, not the latest assignment due to overeager dynamism. It's fine if it returns 'unknown' for some attributes.</p>

<pre><code>&gt;&gt;&gt; a = A()
&gt;&gt;&gt; b = B()
&gt;&gt;&gt; b.spigot = 'brass'
&gt;&gt;&gt; whither(a, 'z')
(""ab.py"", &lt;class 'a.A'&gt;, [line] 2)
&gt;&gt;&gt; whither(b,  'q')
(""ab.py"", &lt;class 'a.B'&gt;, 8)
&gt;&gt;&gt; whither(b, 'x')
(""ab.py"", &lt;class 'a.B'&gt;, 9)
&gt;&gt;&gt; whither(b, 'spigot')
(""Attribute 'spigot' is a data attribute"")
</code></pre>

<p>I want to use this while introspecting Plone, where every object has hundreds of methods and it would be really useful to sort through them organized by class and not just alphabetically.</p>

<p>Of course, in Python you can't always reasonably know, but it would be nice to get good answers in the common case of mostly-static code.</p>
"
485076,24039,2009-01-27T20:24:27Z,9,Does anyone have example code of using scipy.stats.distributions?,"<p>I am struggling to figure out how to use the scipy.distributions package and wondered if anyone could post some example code for me.  It appears to do everything I need, I just can't figure out how to use it.</p>

<p>I need to generate two distributions, one log-normal and one poisson.  I know the variance and lambda for each.</p>

<p>Links to resources would work just as well.</p>
"
485095,36330,2009-01-27T20:30:47Z,3,Why aren't all the names in dir(x) valid for attribute access?,"<p>Why would a coder stuff things into <code>__dict__</code> that can't be used for attribute access? For example, in my Plone instance, <code>dir(portal)</code> includes <code>index_html</code>, but <code>portal.index_html</code> raises AttributeError. This is also true for the <code>__class__</code> attribute of <code>Products.ZCatalog.Catalog.mybrains</code>. Is there a good reason why <code>dir()</code> can't be trusted?</p>

<p>Poking around the <code>inspect</code> module, I see they use <code>object.__dict__['x']</code> instead of attribute access for this reason and because they do not want to trigger <code>getattr</code> magic.</p>
"
485789,59568,2009-01-27T23:11:02Z,33,Why do I get TypeError: can't multiply sequence by non-int of type 'float'?,"<p>I am typing to get a sale amount (by input) to be multiplied by a defined sales tax (0.08) and then have it print the total amount (sales tax times sale amount).</p>

<p>I run into this error. Anyone know what could be wrong or have any suggestions? </p>

<pre><code>salesAmount = raw_input ([""Insert sale amount here \n""])
['Insert sale amount here \n']20.99
&gt;&gt;&gt; salesTax = 0.08
&gt;&gt;&gt; totalAmount = salesAmount * salesTax

Traceback (most recent call last):
  File ""&lt;pyshell#57&gt;"", line 1, in &lt;module&gt;
    totalAmount = salesAmount * salesTax
TypeError: can't multiply sequence by non-int of type 'float'
</code></pre>
"
486490,49701,2009-01-28T04:32:14Z,6,Python shelve module question,"<p>Does the Python shelve module have any protection built in to make sure two processes aren't writing to a file at the same time?</p>
"
486995,745,2009-01-28T09:24:14Z,126,Ruby equivalent of virtualenv?,"<p>Is there something similar to the Python utility <a href=""http://pypi.python.org/pypi/virtualenv"">virtualenv</a>?</p>

<p>Basically it allows you to install Python packages into a sandboxed environment, so <code>easy_install django</code> doesn't go in your system-wide site-packages directory, it would go in the virtualenv-created directory.</p>

<p>For example:</p>

<pre><code>$ virtualenv test
New python executable in test/bin/python
Installing setuptools...cd .........done.
$ cd test/
$ source bin/activate
(test)$ easy_install tvnamer
Searching for tvnamer
Best match: tvnamer 0.5.1
Processing tvnamer-0.5.1-py2.5.egg
Adding tvnamer 0.5.1 to easy-install.pth file
Installing tvnamer script to /Users/dbr/test/bin

Using /Library/Python/2.5/site-packages/tvnamer-0.5.1-py2.5.egg
Processing dependencies for tvnamer
Finished processing dependencies for tvnamer
(test)$ which tvnamer 
/Users/dbr/test/bin/tvnamer
</code></pre>

<p>Is there something like this for RubyGems?</p>
"
487184,51647,2009-01-28T10:40:31Z,11,How do I specify input and output data types in python comments?,"<p>I have seen several standards for writing comments about the kind of data a function expects and returns in Python. Is there a consensus on which one is best-practice? </p>

<p>Is the new functionality in <a href=""http://www.python.org/dev/peps/pep-3107/"">http://www.python.org/dev/peps/pep-3107/</a> something I should start using for this?</p>
"
487224,45955,2009-01-28T10:52:19Z,127,Reducing Django Memory Usage. Low hanging fruit?,"<p>My memory usage increases over time and restarting Django is not kind to users.</p>

<p>I am unsure how to go about profiling the memory usage but some tips on how to start measuring would be useful.</p>

<p>I have a feeling that there are some simple steps that could produce big gains. Ensuring 'debug' is set to 'False' is an obvious biggie.</p>

<p>Can anyone suggest others? How much improvement would caching on low-traffic sites?</p>

<p>In this case I'm running under Apache 2.x with mod_python. I've heard mod_wsgi is a bit leaner but it would be tricky to switch at this stage unless I know the gains would be significant.</p>

<p>Edit: Thanks for the tips so far. Any suggestions how to discover what's using up the memory? Are there any guides to Python memory profiling?</p>

<p>Also as mentioned there's a few things that will make it tricky to switch to mod_wsgi so I'd like to have some idea of the gains I could expect before ploughing forwards in that direction. </p>

<p><b>Edit:</b> Carl posted a slightly more detailed reply here that is worth reading: <a href=""http://stackoverflow.com/questions/488864/django-deployment-cutting-apaches-overhead"">http://stackoverflow.com/questions/488864/django-deployment-cutting-apaches-overhead</a></p>

<p><b>Edit:</b> <a href=""http://blog.dscpl.com.au/2009/03/load-spikes-and-excessive-memory-usage.html"">Graham Dumpleton's article</a> is the best I've found on the MPM and mod_wsgi related stuff. I am rather disappointed that no-one could provide any info on debugging the memory usage in the app itself though. </p>

<p><b>Final Edit:</b> Well I have been discussing this with Webfaction to see if they could assist with recompiling Apache and this is their word on the matter:</p>

<blockquote>""I really don't think that you will get much of a benefit by switching to an MPM Worker + mod_wsgi setup.  I estimate that you might be able to save around 20MB, but probably not much more than that.""</blockquote>

<p>So! This brings me back to my original question (which I am still none the wiser about). How does one go about identifying where the problems lies? It's a well known maxim that you don't optimize without testing to see where you need to optimize but there is very little in the way of tutorials on measuring Python memory usage and none at all specific to Django.</p>

<p>Thanks for everyone's assistance but I think this question is still open!</p>

<p><strong>Another final edit ;-)</strong></p>

<p>I asked this on the django-users list and got some <a href=""http://groups.google.com/group/django-users/browse%5Fthread/thread/1d56d48fc192ceed?fwc=1&amp;pli=1""><em>very</em> helpful replies</a></p>

<p><strong>Honestly the last update ever!</strong></p>

<p>This was just released. Could be the best solution yet: <a href=""http://www.rkblog.rk.edu.pl/w/p/profiling-django-object-size-and-memory-usage-pympler/"">Profiling Django object size and memory usage with Pympler</a></p>
"
487229,58737,2009-01-28T10:55:51Z,8,Client Server programming in python?,"<p>Here is source code for multithreaed server and client in python.</p>

<p>In the code client and server closes connection after the job is finished.
I want to keep the connections alive and send more data over the same connections to <strong>avoid overhead of closing and opening sockets every time</strong>.</p>

<p>Following code is from : <a href=""http://www.devshed.com/c/a/Python/Basic-Threading-in-Python/1/"" rel=""nofollow"">http://www.devshed.com/c/a/Python/Basic-Threading-in-Python/1/</a></p>

<pre><code>import pickle
import socket
import threading

# We'll pickle a list of numbers:
someList = [ 1, 2, 7, 9, 0 ]
pickledList = pickle.dumps ( someList )

# Our thread class:
class ClientThread ( threading.Thread ):

   # Override Thread's __init__ method to accept the parameters needed:
   def __init__ ( self, channel, details ):

      self.channel = channel
      self.details = details
      threading.Thread.__init__ ( self )

   def run ( self ):

      print 'Received connection:', self.details [ 0 ]
      self.channel.send ( pickledList )
      for x in xrange ( 10 ):
         print self.channel.recv ( 1024 )
      self.channel.close()
      print 'Closed connection:', self.details [ 0 ]

# Set up the server:
server = socket.socket ( socket.AF_INET, socket.SOCK_STREAM )
server.bind ( ( '', 2727 ) )
server.listen ( 5 )

# Have the server serve ""forever"":
while True:
   channel, details = server.accept()
   ClientThread ( channel, details ).start()
</code></pre>

<hr>

<pre><code>import pickle
import socket
import threading

# Here's our thread:
class ConnectionThread ( threading.Thread ):

   def run ( self ):

      # Connect to the server:
      client = socket.socket ( socket.AF_INET, socket.SOCK_STREAM )
      client.connect ( ( 'localhost', 2727 ) )

      # Retrieve and unpickle the list object:
      print pickle.loads ( client.recv ( 1024 ) )

      # Send some messages:
      for x in xrange ( 10 ):
         client.send ( 'Hey. ' + str ( x ) + '\n' )

      # Close the connection
      client.close()

# Let's spawn a few threads:
for x in xrange ( 5 ):
   ConnectionThread().start()
</code></pre>
"
487484,49032,2009-01-28T12:44:30Z,2,pyqt import problem,"<p>I am having some trouble doing this in Python:</p>

<pre><code>from PyQt4 import QtCore, QtGui
from dcopext import DCOPClient, DCOPApp
</code></pre>

<p>The traceback I get is</p>

<pre><code>from dcopext import DCOPClient, DCOPApp 
File ""/usr/lib/python2.5/site-packages/dcopext.py"", line 35, in &lt;module&gt;
from dcop    import DCOPClient
RuntimeError: the qt and PyQt4.QtCore modules both wrap the QObject class
</code></pre>

<p>I tried switching the imports, importing dcopext later in the file, but none worked.
Thanks for any suggestions.</p>

<p><strong>Edit:</strong> I have narrowed it down to one problem: I am using dcopext which internally uses qt3, but I want it to use PyQt4.</p>
"
487553,38218,2009-01-28T13:07:31Z,4,Transfering object through Pyro,"<p>I'm using Pyro in a project, and can't seem to understand how to transfer a complete object over the wire. The object is <strong>not</strong> distributed (my distributed objects works perfectly fine), but should function as an argument to an already available distributed object. </p>

<p>My object is a derived from a custom class containing some methods and some variables - an integer and a list. The class is available for both the server and the client. When using my object as an argument to a method of a distributed object the integer variable is ""received"" correctly, but the list is empty, even though I can see that it contains values just before it's ""sent"".</p>

<p>Why is this?</p>

<p>Short version of the class:</p>

<pre><code>class Collection(Pyro.core.ObjBase):
    num = 0
    operations = [(""Operation:"", ""Value:"", ""Description"", ""Timestamp"")]

def __init__(self):
	Pyro.core.ObjBase.__init__(self)

def add(self, val, desc):
	entry = (""Add"", val, desc, strftime(""%Y-%m-%d %H:%M:%S""))
	self.operations.append(entry)
	self.num = self.num + 1

def printop(self):
	print ""This collection will execute the following operations:""
	for item in self.operations:
		print item
</code></pre>

<p>The receving method in the distributed object:</p>

<pre><code>def apply(self, collection):
	print ""Todo: Apply collection""
	#op = collection.getop()
	print ""Number of collected operations:"", collection.a
	collection.printop()
</code></pre>
"
487642,25465,2009-01-28T13:39:54Z,0,Inventory Control Across Multiple Servers .. Ideas?,"<p>We currently have an inventory management system that was built in-house. It works great, and we are constantly innovating it. </p>

<p>This past Fall, we began selling products directly on one of our websites via a Shopping Cart checkout.</p>

<p>Our inventory management system runs off a server in the office, while the three websites we currently have (only one actually sells things) runs off an outside source, obviously.</p>

<p>See my problem here? Basically, I am trying to think of ways I can create a central inventory control system that allows both the internal software and external websites to communicate so that inventory is always up to date and we are not selling something we don't have.</p>

<p>Our internal inventory tracking works great and flows well, but I have no idea on how I would implement a solid tracking system that can communicate between the two.</p>

<p>The software is all written in Python, but it does not matter as I am mostly looking for ideas and methods on how would this be implemented.</p>

<p>Thanks in advance for any answers, and I hope that made sense .. I can elaborate.</p>
"
487800,41344,2009-01-28T14:26:28Z,3,How can I get interactive Python to avoid using readline while allowing utf-8 input?,"<p>I use a terminal (9term) that does command-line editing itself - programs that use readline just get in its way. It's fully utf-8 aware. How can I make an interactive python session disable readline while retaining utf-8 input and output?</p>

<p>Currently I use:</p>

<pre><code>LANG=en_GB.UTF-8 export LANG
cat | python -i
</code></pre>

<p>however this causes sys.stdin.encoding to be None, which implies Ascii
(the system default encoding, which doesn't seem to be changeable)</p>

<pre><code>TERM=dumb python
</code></pre>

<p>doesn't disable readline (and it mangles utf-8 input also).</p>

<p>I'm new to python, so apologies if this is an obvious question.</p>
"
487971,51025,2009-01-28T15:11:32Z,57,Is there a standard way to list names of Python modules in a package?,"<p>Is there a straightforward way to list the names of all modules in a package, without using <code>__all__</code>?</p>

<p>For example, given this package:</p>

<pre><code>/testpkg
/testpkg/__init__.py
/testpkg/modulea.py
/testpkg/moduleb.py
</code></pre>

<p>I'm wondering if there is a standard or built-in way to do something like this:</p>

<pre><code>&gt;&gt;&gt; package_contents(""testpkg"")
['modulea', 'moduleb']
</code></pre>

<p>The manual approach would be to iterate through the module search paths in order to find the package's directory.  One could then list all the files in that directory, filter out the uniquely-named py/pyc/pyo files, strip the extensions, and return that list.  But this seems like a fair amount of work for something the module import mechanism is already doing internally.  Is that functionality exposed anywhere?</p>
"
488036,59797,2009-01-28T15:30:02Z,18,Django: ModelMultipleChoiceField doesn't select initial choices,"<p>ModelMultipleChoiceField doesn't select initial choices and I can't make the following fix (link below) work in my example:</p>

<p><a href=""http://code.djangoproject.com/ticket/5247#comment:6"">http://code.djangoproject.com/ticket/5247#comment:6</a></p>

<p>My models and form:</p>

<pre><code>class Company(models.Model):
    company_name = models.CharField(max_length=200)

class Contact(models.Model):
    company = models.ForeignKey(Company)
    first_name = models.CharField(max_length=100)
    last_name = models.CharField(max_length=100)

class Action(models.Model):
    company = models.ForeignKey(Company, blank=True, null=True)
    from_company = models.ManyToManyField(Contact, verbose_name='Participant(s) from ""Company""', blank=True, null=True)

class Action_Form(ModelForm):
    from_company = forms.ModelMultipleChoiceField(queryset=Contact.objects.none(), widget=forms.CheckboxSelectMultiple())
    class Meta:
        model = Action
</code></pre>

<p>What I do and the results:</p>

<pre>
>>> contacts_from_company = Contact.objects.filter(company__exact=1) # ""1"" for test, otherwise a variable
>>> form = Action_Form(initial={'from_company': [o.pk for o in contacts_from_company]}) # as suggested in the fix
>>> print form['from_company']
&lt;ul&gt;
&lt;/ul&gt;
>>> print contacts_from_company
[&lt;Contact: test person&gt;, &lt;Contact: another person&gt;]

>>> form2 = Action_Form(initial={'from_company': contacts_from_company})
>>> print form2['from_company']
&lt;ul&gt;
&lt;/ul&gt;

>>> form3 = Action_Form(initial={'from_company': Contact.objects.all()})
>>> print form3['from_company']
&lt;ul&gt;
&lt;/ul&gt;
</pre>

<p>The way I was hoping it would work:<br />
1. My view gets ""company"" from request.GET<br />
2. It then filters all ""contacts"" for that ""company""<br />
3. Finally, it creates a form and passes those ""contacts"" as ""initial={...}""  </p>

<p><strong>Two questions:</strong><br />
<strong>1. [not answered yet]</strong> How can I make ModelMultipleChoiceField take those ""initial"" values?<br />
<strong>2. [answered]</strong> As an alternative, can I pass a variable to Action_Form(ModelForm) so that in my ModelForm I could have:</p>

<pre>
from_company = forms.ModelMultipleChoiceField(queryset=Contact.objects.filter(company__exact=some_id) # where some_id comes from a view
</pre>
"
488054,42546,2009-01-28T15:34:11Z,1,"ZipFile complains, is there a way around using the zipfile module?","<p>I am trying to decompress some MMS messages sent to me zipped. The problem is that sometimes it works, and others not. And when it doesnt work, the python zipfile module complains and says that it is a bad zip file. But the zipfile decompresses fine using the unix unzip command.</p>

<p>This is what ive got</p>

<pre><code>zippedfile = open('%stemp/tempfile.zip' % settings.MEDIA_ROOT, 'w+')
zippedfile.write(string)
z = zipfile.ZipFile(zippedfile)
</code></pre>

<p>I am using 'w+' and writing a string to it, the string contains a base64 decoded string representation of a zip file.</p>

<p>Then I do like this:</p>

<pre><code>filelist = z.infolist()  
images = []  

for f in filelist:  
    raw_mimetype = mimetypes.guess_type(f.filename)[0]  
    if raw_mimetype:  
        mimetype = raw_mimetype.split('/')[0]  
    else:  
        mimetype = 'unknown'  
    if mimetype == 'image':  
        images.append(f.filename)
</code></pre>

<p>This way I've got a list of all the images in the zip file. But this doesnt always work, since the zipfile module complains about some of the files.</p>

<p>Is there a way to do this, without using the zipfile module?</p>

<p>Could I somehow use the unix command unzip instead of zipfile and then to the same thing to retrive all the images from the archive?</p>
"
488366,46914,2009-01-28T16:36:47Z,10,How do I make environment variable changes stick in Python?,"<p>From what I've read, any changes to the environment variables in a Python instance are only available within that instance, and disappear once the instance is closed.  Is there any way to make them stick by committing them to the system?</p>

<p>The reason I need to do this is because at the studio where I work, tools like Maya rely heavily on environment variables to configure paths across multiple platforms.</p>

<p>My test code is</p>

<pre><code>import os
os.environ['FAKE'] = 'C:\\'
</code></pre>

<p>Opening another instance of Python and requesting <code>os.environ['FAKE']</code> yields a <code>KeyError</code>.</p>

<p><strong>NOTE:</strong> Portability will be an issue, but the small API I'm writing will be able to check OS version and trigger different commands if necessary.</p>

<p>That said, I've gone the route of using the Windows registry technique and will simply write alternative methods that will call shell scripts on other platforms as they become requirements.</p>
"
488449,46411,2009-01-28T17:00:53Z,6,Can a python script persistently change a Windows environment variable? (elegantly),"<p>Following on from my <a href=""http://stackoverflow.com/questions/488294/how-can-i-make-a-windows-batch-file-which-changes-an-environment-variable"">previous question</a>, is it possible to make a Python script which persistently changes a Windows environment variable? </p>

<p>Changes to os.environ do not persist once the python interpreter terminates. If I were scripting this on UNIX, I might do something like:</p>

<pre><code>set foo=`myscript.py`
</code></pre>

<p>But alas, cmd.exe does not have anything that works like sh's back-tick behavior. I have seen a very long-winded solution... it 'aint pretty so surely we can improve on this:</p>

<pre><code>for /f ""tokens=1* delims="" %%a in ('python  ..\myscript.py') do set path=%path%;%%a
</code></pre>

<p>Surely the minds at Microsoft have a better solution than this!</p>

<p><strong>Note</strong>: exact duplicate of <a href=""http://stackoverflow.com/questions/488366/how-do-i-make-environment-variable-changes-stick-in-python"">this question</a>.</p>
"
488498,NA,2009-01-28T17:17:57Z,4,about one to many relationship in datastore and dereferncing in google app engine?,"<p>i have a one to many relationship between two entities the first one is a satellite and the second one is channel and the satellite form returns a satellite name which i want to appear in another html page with the channel data where you can say that this channel is related to that satellite
how to make this</p>
"
488504,16148,2009-01-28T17:19:56Z,1,MS Outlook CDO/MAPI Blocking Python File Output?,"<p>Here is an example of the problem I am running into.  I am using the Python Win32 extensions to access an Outlook mailbox and retrieve messages.</p>

<p>Below is a script that should write ""hello world"" to a text file.  I need to grab some messages from an Outlook mailbox and I noticed something weird.  After I attach to the mailbox once, I can no longer print anything to a file.  Here is a trimmed down version showing the problem:</p>

<pre><code>#!/usr/bin/env python

from win32com.client import Dispatch

fh = open('foo.txt', 'w')
fh.write('hello ')
fh.close()

session = Dispatch('MAPI.session')
session.Logon('','',0,1,0,0,'exchange.foo.com\nprodreport');
session.Logoff()

fh = open('foo.txt', 'a')
fh.write('world')
fh.close()
</code></pre>

<p>If I don't attach to the mailbox and comment out the following lines, it obviously works fine:</p>

<pre><code>session = Dispatch('MAPI.session')
session.Logon('','',0,1,0,0,'exchange.foo.com\ncorey');
session.Logoff()
</code></pre>

<p>Why is opening a session to a mailbox in the middle of my script blocking further file output?  any ideas?  (other operations are not blocked, just this file i/o asfaik)</p>
"
488670,681,2009-01-28T18:01:44Z,14,calculate exponential moving average in python,"<p>I have a range of dates and a measurement on each of those dates.  I'd like to calculate an exponential moving average for each of the dates.  Does anybody know how to do this?</p>

<p>I'm new to python.  It doesn't appear that averages are built into the standard python library, which strikes me as a little odd.  Maybe I'm not looking in the right place.</p>

<p>So, given the following code, how could I calculate the moving weighted average of IQ points for calendar dates?</p>

<pre><code>from datetime import date
days = [date(2008,1,1), date(2008,1,2), date(2008,1,7)]
IQ = [110, 105, 90]
</code></pre>

<p>(there's probably a better way to structure the data, any advice would be appreciated)</p>
"
488772,18909,2009-01-28T18:31:42Z,0,Validating Python Arguments in Subclasses,"<p>I'm trying to validate a few python arguments. Until we get the new static typing in Python 3.0, what is the best way of going about this.</p>

<p>Here is an example of what I am attempting:</p>

<pre><code>class A(object):
    @accepts(int, int, int)
    def __init__(a, b, c):
        pass

class B(A):
    @accepts(int, int, int, int)
    def __init__(a, b, c, d):
        A.__init__(a, b, c)
</code></pre>

<p>As you can see the decorator is nicely performing type checking of the inputs to my class, but I have to define all the arguments to the second class, which gets very nasty when I have multiple levels of inheritance. I can use kwargs with some success, but it's not quite as nice as the above approach for type checking.</p>

<p>Essentially I want to pop one argument off the kwargs list and check it's type, then pass the remainder to it's parent, but do this in a very flexible and clean way as this scales.</p>

<p>Any suggestions?</p>
"
489113,18446,2009-01-28T20:12:07Z,5,"Given an rpm package name, query the yum database for updates","<p>I was imagining a 3-line Python script to do this but the yum Python API is impenetrable.  Is this even possible?</p>

<p>Is writing a wrapper for 'yum list package-name' the only way to do this?</p>
"
489269,31610,2009-01-28T20:47:10Z,98,Python super() raises TypeError,"<p>In Python 2.5.2, the following code raises a TypeError:</p>

<pre><code>&gt;&gt;&gt; class X:
...   def a(self):
...     print ""a""
...
&gt;&gt;&gt; class Y(X):
...   def a(self):
...     super(Y,self).a()
...     print ""b""
...
&gt;&gt;&gt; c = Y()
&gt;&gt;&gt; c.a()
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
  File ""&lt;stdin&gt;"", line 3, in a
TypeError: super() argument 1 must be type, not classobj
</code></pre>

<p>If I replace the <code>class X</code> with <code>class X(object)</code>, it will work. What's the explanation for this?</p>
"
489497,14723,2009-01-28T21:37:27Z,11,"Why am I getting the following error in Python ""ImportError: No module named py""?","<p>I'm a Python newbie, so bear with me :)</p>

<p>I created a file called test.py with the contents as follows:</p>

<pre><code>test.py
import sys
print sys.platform
print 2 ** 100
</code></pre>

<p>I then ran <code>import test.py</code> file in the interpreter to follow an example in my book.
When I do this, I get the output with the import error on the end.</p>

<pre><code>win32
1267650600228229401496703205376
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
ImportError: No module named py
</code></pre>

<p>Why do I get this error and how do I fix it? Thanks!</p>
"
489524,91385,2009-01-28T21:43:58Z,1,Is there a way to make a user-defined Python function act like a built-in statement?,"<p>Is it possible to make a user-defined Python function act like a statement? In other words, I'd like to be able to say:</p>

<pre><code>myfunc
</code></pre>

<p>rather than:</p>

<pre><code>myfunc()
</code></pre>

<p>and have it get called anyway -- the way that, say, <code>print</code> would.</p>

<p>I can already hear you all composing responses about how this is a horrible thing to do and I'm stupid for asking it and why do I want to do this and I really should do something else instead, but please take my word that it's something I need to do to debug a problem I'm having and it's not going to be checked in or used for, like, an air traffic control system.</p>
"
489807,23972,2009-01-28T22:57:04Z,1,Connecting to MySQL with Python 2.6...how?,"<p>All my searches, including <a href=""http://stackoverflow.com/questions/372885/how-to-connect-to-a-mysql-database-from-python"">this question</a> on Stack, point me to MySQLdb.  Unfortunately MySQLdb doesn't have a version for Python 2.6.</p>

<p>What am I to do?</p>
"
489861,49701,2009-01-28T23:20:03Z,81,Locking a file in Python,"<p>I need to lock a file for writing in Python. It will be accessed from multiple Python processes at once. I have found some solutions online, but most fail for my purposes as they are often only Unix based or Windows based.</p>
"
489901,54964,2009-01-28T23:36:31Z,0,"How can I extract x, y and z coordinates from geographical data by Python?","<p>I have geographical data which has 14 variables. The data is in the following format:</p>

<blockquote>
  <p>QUADNAME: rockport_colony_SD      RESOLUTION: 10      ULLAT: 43.625<br />
  ULLON: -97.87527466      LRLAT: 43.5<br />
  LRLON: -97.75027466      HDATUM: 27<br />
  ZMIN: 361.58401489      ZMAX:
  413.38400269      ZMEAN: 396.1293335      ZSIGMA: 12.36359215      PMETHOD: 5<br />
  QUADDATE: 20001001</p>
</blockquote>

<p>The whole data has many previous variables in the sequence.</p>

<p>How can I extract the coordinates ULLAT, ULLON and LRLAT from the data into three lists, so that the each row corresponds to one location?</p>

<p>This question was raised by the problem in <a href=""http://stackoverflow.com/questions/486807/where-can-i-get-the-x-y-z-coordinates-for-california-to-use-a-contour-plot"">the post</a>.</p>
"
489999,41718,2009-01-29T00:16:23Z,29,Convert list of ints to one number?,"<p>I have a list of integers that I would like to convert to one number like:</p>

<pre><code>numList = [1, 2, 3]
num = magic(numList)

print num, type(num)
&gt;&gt;&gt; 123, &lt;type 'int'&gt;
</code></pre>

<p>What is the best way to implement the <em>magic</em> function?</p>

<p><strong>EDIT</strong> <br>
I did find <a href=""http://bytes.com/groups/python/722951-int-str-list-elements"" rel=""nofollow"">this</a>, but it seems like there has to be a better way.</p>
"
490130,NA,2009-01-29T01:10:18Z,1,QScintilla scrollbar,"<p>When I add a QsciScintilla object to my main window the horizontal scrollbar is active and super wide (tons of apparent white space). Easy fix?</p>
"
490195,24718,2009-01-29T01:35:48Z,20,split a multi-page pdf file into multiple pdf files with python?,"<p>I'd like to take a multi-page pdf file and create separate pdf files per page.</p>

<p>I've downloaded <a href=""http://www.reportlab.org/index.html"">reportlab</a> and have browsed the documentation, but it seems aimed at pdf generation, I haven't yet seen anything about processing pdf's themselves.</p>

<p>Is there an easy way to do this in python?</p>
"
490429,5222,2009-01-29T03:55:06Z,3,What is the most pythonic way to make a bound method act like a function?,"<p>I'm using a Python API that expects me to pass it a function.  However, for various reasons, I want to pass it a method, because I want the function to behave different depending on the instance it belongs to. If I pass it a method, the API will not call it with the correct 'self' argument, so I'm wondering how to turn a method into a function that knows what 'self' it belongs to.</p>

<p>There are a couple of ways that I can think of to do this, including using a lambda and a closure.  I've included some examples of this below, but I'm wondering if there is a standard mechanism for achieving the same effect.</p>

<pre><code>class A(object):
    def hello(self, salutation):
        print('%s, my name is %s' % (salutation, str(self)))

    def bind_hello1(self):
        return lambda x: self.hello(x)

    def bind_hello2(self):
        def hello2(*args):
            self.hello(*args)
        return hello2


&gt;&gt;&gt; a1, a2 = A(), A()
&gt;&gt;&gt; a1.hello('Greetings'); a2.hello('Greetings')
Greetings, my name is &lt;__main__.A object at 0x71570&gt;
Greetings, my name is &lt;__main__.A object at 0x71590&gt;

&gt;&gt;&gt; f1, f2 = a1.bind_hello1(), a2.bind_hello1()
&gt;&gt;&gt; f1('Salutations'); f2('Salutations')
Salutations, my name is &lt;__main__.A object at 0x71570&gt;
Salutations, my name is &lt;__main__.A object at 0x71590&gt;

&gt;&gt;&gt; f1, f2 = a1.bind_hello2(), a2.bind_hello2()
&gt;&gt;&gt; f1('Aloha'); f2('Aloha')
Aloha, my name is &lt;__main__.A object at 0x71570&gt;
Aloha, my name is &lt;__main__.A object at 0x71590&gt;
</code></pre>
"
490439,2696,2009-01-29T04:00:49Z,23,django-cart or Satchmo?,"<p>I'm looking to implement a very basic shopping cart.  <a href=""http://www.satchmoproject.com/"">Satchmo</a> seems to install a <strong>lot</strong> of applications and extra stuff that I don't need.  I've heard others mention <a href=""http://code.google.com/p/django-cart/"">django-cart</a>.  Has anyone tried this Django app (django-cart)?  Anything to watch for or any other experiences?</p>
"
490597,49701,2009-01-29T05:43:24Z,42,Regex replace (in Python) - a simpler way?,"<p>Any time I want to replace a piece of text that is part of a larger piece of text, I always have to do something like:</p>

<pre><code>""(?P&lt;start&gt;some_pattern)(?P&lt;replace&gt;foo)(?P&lt;end&gt;end)""
</code></pre>

<p>And then concatenate the <code>start</code> group with the new data for <code>replace</code> and then the <code>end</code> group.</p>

<p>Is there a better method for this?</p>
"
490634,54056,2009-01-29T06:09:33Z,2,Statistics & other add-on tools for Planet blog aggregator software,"<p>The Planet software is often used for particular topics or large projects, to collect blogs that post on a particular theme. <a href=""http://www.planetplanet.org/"" rel=""nofollow"">http://www.planetplanet.org/</a></p>

<p>I think there are lots of interesting add-ons that could be done for it but so far I haven't seen any. Does anyone know any? (Because of the name, it's kinda hard to search for...)</p>

<p>Like:
- for users, subscribe to a planet, but block particular posters (maybe some kind of Greasemonkey script for google reader?)
- Statistics for a planet - how long have various blogs been 'members', how regularly do each of them post? Which posters typically get the most comments?</p>

<p>BTW this should have the tag ""planet"" :)</p>
"
490762,NA,2009-01-29T07:21:53Z,1,regex: Matching parts of a string when the string contains part of a regex pattern,"<p>I want to reduce the number of patterns I have to write by using a regex that picks up any or all of the pattern when it appears in a string.</p>

<p>Is this possible with Regex?</p>

<pre><code>E.g. Pattern is: ""the cat sat on the mat""

I would like pattern to match on following strings:
""the""
""the cat""
""the cat sat""
...
""the cat sat on the mat""
</code></pre>

<p>But it should not match on the following string because although some words match, they are split by a non matching word: 
    ""the dog sat""</p>
"
490929,1384652,2009-01-29T08:51:45Z,2,MSN with Python,"<p>I have plans to create a simple bot for a game I run and have it sit on MSN and answer queries. I want to use Python to do this and googled around and found <a href=""http://msnp.sourceforge.net/"" rel=""nofollow"">MSNP</a>. I thought ""great"" and ""how awesome"" but it appears that it's about 5 years old and oddly enough doesn't connect to MSN as they've probably changed one or two small little things over the years.</p>

<p>Does anybody know of something equivalent to that?</p>
"
491053,55562,2009-01-29T09:50:56Z,12,No code completion and syntax highlighting in Pydev,"<p>I just configured Eclipse with PyDev latest version, but when I import external modules, neither code completion nor syntax highlighting works. How do I enable it?</p>

<p>Komodo Edit does a better synax highlighting, apparently. - But Ctrl+R doesnt run the program. </p>

<p>I prefer a SciTE kind of editor with similar highlighting and fonts (aesthetics) and F5 working but with display of folder and files dynamically like Komodo Edit and a better code completion and vi emulation. Suggestions, please.</p>

<p>If I want to buy a Py IDE, Komodo or Wingware, which is better?-- Wrt syntax highlighting and code completion</p>
"
491085,54964,2009-01-29T10:04:13Z,5,How can I pass a filename as a parameter into my module?,"<p>I have the following code in .py file:</p>

<pre><code>import re

regex = re.compile(
    r""""""ULLAT:\ (?P&lt;ullat&gt;-?[\d.]+).*?
    ULLON:\ (?P&lt;ullon&gt;-?[\d.]+).*?
    LRLAT:\ (?P&lt;lrlat&gt;-?[\d.]+)"""""", re.DOTALL|re.VERBOSE)
</code></pre>

<p>I have the data in .txt file as a sequence:</p>

<pre><code>QUADNAME: rockport_colony_SD
RESOLUTION: 10 ULLAT: 43.625 ULLON:
-97.87527466 LRLAT: 43.5 LRLON: -97.75027466 HDATUM: 27 ZMIN: 361.58401489 ZMAX: 413.38400269 ZMEAN: 396.1293335 ZSIGMA: 12.36359215 PMETHOD: 5 QUADDATE: 20001001
</code></pre>

<p>How can I use the Python -file to process the .txt -file? </p>

<p>I guess that we need a parameter in the .py file, so that we can use a syntax like in terminal: </p>

<pre><code>$ py-file file-to-be-processed
</code></pre>

<p>This question was raised by the post <a href=""http://stackoverflow.com/questions/489901/how-can-i-extract-x-y-and-z-coordinates-from-geographical-data-by-python/490347#490347"">here</a>.</p>
"
491404,10040,2009-01-29T12:27:47Z,3,Can you recommend a Python SOAP client that can accept WS-Attachments?,"<p>I've read mixed reviews of both <a href=""https://fedorahosted.org/suds/"" rel=""nofollow"">Suds</a> and <a href=""http://pywebsvcs.sourceforge.net/"" rel=""nofollow"">ZSI</a> -- two Python SOAP libraries.  However, I'm unclear whether either of them can support WS-Attachments.  I'd prefer to use Suds (appears to be more straightforward), but I'll defer to whichever library suits my needs.</p>
"
491705,53850,2009-01-29T14:04:51Z,9,Python: Problem with local modules shadowing global modules,"<p>I've got a package set up like so:</p>

<pre><code>packagename/
    __init__.py
    numbers.py
    tools.py
    ...other stuff
</code></pre>

<p>Now inside <code>tools.py</code>, I'm trying to import the standard library module <code>fractions</code>. However, the <code>fractions</code> module itself imports the <code>numbers</code> module, which is supposed to be the one in the standard library.</p>

<p>The problem is that it tries to import the <code>numbers</code> modules from <em>my</em> package instead (ie my <code>numbers.py</code> is shadowing the stdlib <code>numbers</code> module), and then complains about it, instead of importing the stdlib module.</p>

<p>My question is, is there a workaround so that I can keep the current structure of my package, or is the only solution to rename my own offending module (<code>numbers.py</code>)?</p>
"
491837,46646,2009-01-29T14:39:54Z,0,Using the input collected from raw_input in Python,"<p>If I do the following in python,</p>

<pre><code>string = raw_input('Enter the value')
</code></pre>

<p>it will return </p>

<blockquote>
  <p>Enter the value</p>
</blockquote>

<p>and wait until I enter something into the prompt.</p>

<p>Is there a way to retrieve/collect the input I entered in a variable <code>string</code>?</p>

<p>I would like to use the entered value in the following way :</p>

<pre><code>if dict.has_key('string'):
          print dict[string]
</code></pre>

<p><sub>Note: <em>I previously made the error of using <code>raw_string</code> but I meant to say <code>raw_input</code></em></sub></p>
"
491921,15842,2009-01-29T15:01:15Z,189,Unicode (utf8) reading and writing to files in python,"<p>I'm having some brain failure in understanding reading and writing text to a file (Python 2.4).</p>

<pre><code># the string, which has an a-acute in it.
ss = u'Capit\xe1n'
ss8 = ss.encode('utf8')
repr(ss), repr(ss8)
</code></pre>

<blockquote>
  <p>(""u'Capit\xe1n'"", ""'Capit\xc3\xa1n'"")</p>
</blockquote>

<pre><code>print ss, ss8    
print &gt;&gt; open('f1','w'), ss8

&gt;&gt;&gt; file('f1').read() 
'Capit\xc3\xa1n\n'
</code></pre>

<p>So I type in <code>Capit\xc3\xa1n</code> into my favorite editor, in file f2.</p>

<p>then:</p>

<pre><code>&gt;&gt;&gt; open('f1').read()
'Capit\xc3\xa1n\n'
&gt;&gt;&gt; open('f2').read()
'Capit\\xc3\\xa1n\n'
&gt;&gt;&gt; open('f1').read().decode('utf8')
u'Capit\xe1n\n'
&gt;&gt;&gt; open('f2').read().decode('utf8')
u'Capit\\xc3\\xa1n\n'
</code></pre>

<p>What am I not understanding here?  Clearly there is some vital bit of magic (or good sense) that I'm missing.  What does one type into text files to get proper conversions.</p>

<p><strong>Edit</strong>:  What I'm truly failing to grok here, is what the point of the UTF-8 representation is, if you can't actually get Python to recognize it, when it comes from outside.  Maybe I should just JSON dump the string, and use that instead, since that has an asciiable representation!  More to the point, is there an ascii representation of this unicode object that Python will recognize and decode, when coming in from a file?  If so, how do I get it?</p>

<pre><code>&gt;&gt;&gt; print simplejson.dumps(ss)
'""Capit\u00e1n""'
&gt;&gt;&gt; print &gt;&gt; file('f3','w'), simplejson.dumps(ss)
&gt;&gt;&gt; simplejson.load(open('f3'))
u'Capit\xe1n'
</code></pre>
"
492223,21000,2009-01-29T16:01:51Z,3,How can I order objects according to some attribute of the child in sqlalchemy?,"<p>Here is the situation: I have a parent model say <code>BlogPost</code>. It has many <code>Comment</code>s. What I want is the list of <code>BlogPost</code>s ordered by the creation date of its' <code>Comment</code>s. I.e. the blog post which has the most newest comment should be on top of the list. Is this possible with SQLAlchemy?</p>
"
492377,36330,2009-01-29T16:31:41Z,3,How do I use ctypes to set a library's extern function pointer to a Python callback function?,"<p>Some C libraries export function pointers such that the user of the library sets that function pointer to the address of their own function to implement a hook or callback.</p>

<p>In this example library <code>liblibrary.so</code>, how do I set library_hook to a Python function using ctypes?</p>

<p>library.h:</p>

<pre><code>typedef int exported_function_t(char**, int);
extern exported_function_t *library_hook;
</code></pre>
"
492387,29505,2009-01-29T16:34:46Z,243,IndentationError: unindent does not match any outer indentation level,"<p>When I compile the Python code below, I get </p>

<blockquote>
  <p>IndentationError: unindent does not match any outer indentation level</p>
</blockquote>

<hr>

<pre><code>import sys

def Factorial(n): # Return factorial
    result = 0
    for i in range (1,n):
        result = result * i
    print ""factorial is "",result
    return result
</code></pre>

<p>Why?</p>
"
492452,NA,2009-01-29T16:49:56Z,1,Using Python split to splice a variable together,"<p>I have this list </p>

<pre><code>[""camilla_farnestam@hotmail.com : martin00"", """"],
</code></pre>

<p>How do I split so it only be left with:</p>

<pre><code>camilla_farnestam@hotmail.com:martin00
</code></pre>
"
492483,51647,2009-01-29T16:57:59Z,224,Setting the correct encoding when piping stdout in Python,"<p>When piping the output of a Python program, the Python interpreter gets confused about encoding and sets it to None. This means a program like this:</p>

<pre><code># -*- coding: utf-8 -*-
print u""åäö""
</code></pre>

<p>will work fine when run normally, but fail with:</p>

<blockquote>
  <p>UnicodeEncodeError: 'ascii' codec can't encode character u'\xa0' in position 0: ordinal not in range(128)</p>
</blockquote>

<p>when used in a pipe sequence.</p>

<p>What is the best way to make this work when piping? Can I just tell it to use whatever encoding the shell/filesystem/whatever is using? </p>

<p>The suggestions I have seen thus far is to modify your site.py directly, or hardcoding the defaultencoding using this hack:</p>

<pre><code># -*- coding: utf-8 -*-
import sys
reload(sys)
sys.setdefaultencoding('utf-8')
print u""åäö""
</code></pre>

<p>Is there a better way to make piping work?</p>
"
492519,1384652,2009-01-29T17:08:29Z,95,Timeout on a function call,"<p>I'm calling a function in Python which I know may stall and force me to restart the script. </p>

<p>How do I call the function or what do I wrap it in so that if it takes longer than 5 seconds the script cancels it and does something else?</p>
"
492716,161922,2009-01-29T18:05:22Z,33,Reversing a regular expression in Python,"<p>I want to reverse a regular expression. I.e. given a regular expression, I want to produce <em>any</em> string that will match that regex.</p>

<p>I know how to do this from a theoretical computer science background using a finite state machine, but I just want to know if someone has already written a library to do this. :)</p>

<p>I'm using Python, so I'd like a Python library.</p>

<p>To reiterate, I only want <em>one</em> string that will match the regex. Things like ""."" or "".*"" would make an infinite amount of strings match the regex, but I don't care about all options.</p>

<p>I'm willing for this library to only work on a certain subset of regex.</p>
"
492860,29505,2009-01-29T18:37:51Z,9,python: restarting a loop,"<p>i have:</p>

<pre><code>for i in range(2,n):
    if(something):
       do something
    else:
       do something else
       i = 2 **restart the loop
</code></pre>

<p>But that doesn't seem to work. Is there a way to restart that loop? </p>

<p>Thanks</p>
"
493046,14723,2009-01-29T19:31:48Z,6,I don't understand slicing with negative bounds in Python. How is this supposed to work?,"<p>I am a newbie to Python and have come across the following example in my book that is not explained very well. Here is my print out from the interpreter:</p>

<pre><code>&gt;&gt;&gt; s = 'spam'
&gt;&gt;&gt; s[:-1]
'spa'
</code></pre>

<p>Why does slicing with no beginning bound and a <code>'-1'</code> return every element except the last one? Is calling <code>s[0:-1]</code> logically the same as calling <code>s[:-1]</code>? They both return the same result. But I'm not sure what python is doing exactly. Any help would be greatly appreciated.</p>
"
493174,NA,2009-01-29T20:07:43Z,24,Is there a way to convert number words to Integers?,"<p>I need to convert <code>one</code> into <code>1</code>, <code>two</code> into <code>2</code> and so on.</p>

<p>Is there a way to do this with a library or a class or anything?</p>
"
493304,43367,2009-01-29T20:38:21Z,15,"In Django, how do you retrieve data from extra fields on many-to-many relationships without an explicit query for it?","<p>Given a situation in Django 1.0 where you have <a href=""http://docs.djangoproject.com/en/dev/topics/db/models/#intermediary-manytomany"">extra data on a Many-to-Many relationship</a>:</p>

<pre><code>class Player(models.Model):
  name = models.CharField(max_length=80)

class Team(models.Model):
  name = models.CharField(max_length=40)
  players = models.ManyToManyField(Player, through='TeamPlayer', related_name='teams')

class TeamPlayer(models.Model):
  player = models.ForeignKey(Player)
  team = models.ForeignKey(Team)
  captain = models.BooleanField()
</code></pre>

<p>The many-to-many relationship allows you to access the related data using attributes (the ""players"" attribute on the Team object or using the ""teams"" attribute on the Player object by way of its related name).  When one of the objects is placed into a context for a template (e.g. a Team placed into a Context for rendering a template that generates the Team's roster), the related objects can be accessed (i.e. the players on the teams), but how can the extra data (e.g. 'captain') be accessed along with the related objects from the object in context (e.g.the Team) without adding additional data into the context?</p>

<p>I know it is possible to query directly against the intermediary table to get the extra data.  For example:</p>

<pre><code>TeamPlayer.objects.get(player=790, team=168).captain
</code></pre>

<p>Or:</p>

<pre><code>for x in TeamPlayer.objects.filter(team=168):
  if x.captain:
    print ""%s (Captain)"" % (x.player.name)
  else:
    print x.player.name
</code></pre>

<p>Doing this directly on the intermediary table, however requires me to place additional data in a template's context (the result of the query on TeamPlayer) which I am trying to avoid if such a thing is possible.</p>
"
493367,NA,2009-01-29T20:53:15Z,23,Python: For each list element apply a function across the list,"<p>Given <code>[1,2,3,4,5]</code>, how can I do something like </p>

<pre><code>1/1, 1/2, 1/3,1/4,1/5, ...., 3/1,3/2,3/3,3/4,3/5,.... 5/1,5/2,5/3,5/4,5/5
</code></pre>

<p>I would like to store all the results, find the minimum, and return the two numbers used to find the minimum. So in the case I've described above I would like to return <code>(1,5)</code>.</p>

<p>So basically I would like to do something like</p>

<p>for each element <code>i</code> in the list
map some function across all elements in the list, taking <code>i</code> and <code>j</code> as parameters
store the result in a master list, find the minimum value in the master list, and return the arguments <code>i</code>, <code>j</code>used to calculate this minimum value.</p>

<p>In my real problem I have a list objects/coordinates, and the function I am using takes two coordinates and calculates the euclidean distance. I'm trying to find minimum euclidean distance between any two points but I don't need a fancy algorithm.</p>
"
493386,21384,2009-01-29T20:58:25Z,781,How to print in Python without newline or space?,"<p>The question is in the title.</p>

<p>I'd like to do in  <a href=""/questions/tagged/python"" class=""post-tag"" title=""show questions tagged &#39;python&#39;"" rel=""tag"">python</a> what I do in this example in <a href=""/questions/tagged/c"" class=""post-tag"" title=""show questions tagged &#39;c&#39;"" rel=""tag"">c</a>:</p>

<pre class=""lang-c prettyprint-override""><code>#include &lt;stdio.h&gt;

int main() {
    int i;
    for (i=0; i&lt;10; i++) printf(""."");
    return 0;
}
</code></pre>

<p>Output:</p>

<pre><code>..........
</code></pre>

<p>In Python:</p>

<pre><code>&gt;&gt;&gt; for i in xrange(0,10): print '.'
.
.
.
.
.
.
.
.
.
.
&gt;&gt;&gt; for i in xrange(0,10): print '.',
. . . . . . . . . .
</code></pre>

<p>In Python <code>print</code> will add a <code>\n</code> or a space, how can I avoid that? Now, it's just an example. Don't tell me I can first make a string then print it. I'd like to know how to ""append"" strings to the <code>stdout</code> (I don't know if it's worded correctly).</p>
"
493484,9789,2009-01-29T21:19:31Z,3,What's the best way(error proof / foolproof) to parse a file using python with following format?,"<pre><code>########################################
# some comment
# other comment
########################################

block1 {
    value=data
    some_value=some other kind of data
    othervalue=032423432
    }

block2 {
    value=data
    some_value=some other kind of data
    othervalue=032423432
    }
</code></pre>
"
493816,57854,2009-01-29T22:44:05Z,2,Outputting to a text file,"<p>How to print the following code to a .txt file</p>

<pre><code>y = '10.1.1.' # /24 network, 
for x in range(255):
    x += 1
    print y + str(x) # not happy that it's in string, but how to print it into a.txt
</code></pre>

<p>There's copy paste, but would rather try something more interesting. </p>
"
493819,49701,2009-01-29T22:45:13Z,919,"Python join, why is it string.join(list) instead of list.join(string)?","<p>This has always confused me. It seems like this would be nicer:</p>

<pre><code>my_list = [""Hello"", ""world""]
print my_list.join(""-"")
# Produce: ""Hello-world""
</code></pre>

<p>Than this:</p>

<pre><code>my_list = [""Hello"", ""world""]
print ""-"".join(my_list)
# Produce: ""Hello-world""
</code></pre>

<p>Is there a specific reason it does it like this?</p>
"
493853,54964,2009-01-29T22:54:02Z,3,Which Python module is suitable for data manipulation in a list?,"<p>I have a sequence of x, y and z -coordinates, which I need to manipulate. They are in one list of three tuples, like {(x1, y1, z1), (x2, y2, z2), ...}.</p>

<p>I need addition, multiplication and logarithm to manipulate my data.</p>

<p>I would like to study a module, which is as powerful as Awk -language.</p>
"
493973,23903,2009-01-29T23:42:47Z,8,Uses for Dynamic Languages,"<p>My primary language right now is D, and I'm in the process of learning Python because it's required for a course I'm taking.  While I understand why dynamic languages would be a breath of fresh air for people programming in static languages without type inference or templates (IMHO templates are to a large extent compile-time duck typing), I'm curious what the benefits are of dynamic languages even when you have those.  </p>

<p>The bottom line is that, if I'm going to learn Python, I want to learn it in a way that really changes my thinking about programming, rather than just writing D in Python.  I have not used dynamic languages since I was a fairly novice programmer and unable to appreciate the flexibility they supposedly offer, and want to learn to take full advantage of them now.  What can be done easily/elegantly in a dynamically typed, interpreted language that's awkward or impossible in a static language, <strong>even with templates, polymorphism, static type inference, and maybe runtime reflection?</strong></p>
"
493978,20955,2009-01-29T23:44:47Z,4,retrieving current URL from FireFox with python,"<p>I want to know what is the current url of active tab in running firefox instance from python module. Does FireFox have any API for this and does python know to work with it?</p>
"
493981,60436,2009-01-29T23:45:54Z,2,CDN options for image resizing,"<p>Background:</p>

<p>I working on an application on Google App Engine. Its been going really well until I hit one of their limitations in file size -- 1MB. One of the components of my application resizes images, which have been uploaded by users. The files are directly uploaded to S3 (<a href=""http://developer.amazonwebservices.com/connect/entry.jspa?externalID=1434"" rel=""nofollow"">http://developer.amazonwebservices.com/connect/entry.jspa?externalID=1434</a>) via POST. I was planning on using a CDN to delivered the resized images.</p>

<p>Question:</p>

<p>I was wondering if there was CDN that provided an API for resizing images through HTTP call. I found out that SimpleCDN once provided the service, but has sense removed it. I would like to tell the CDN to resize the image I am requesting from the URL.</p>

<p>For example,</p>

<p>original URL:
<a href=""http://cdn.example.com/images/large_picture.jpg"" rel=""nofollow"">http://cdn.example.com/images/large_picture.jpg</a>
resized image to 125x100:
<a href=""http://cdn.example.com/images/large_picture.jpg/125/100"" rel=""nofollow"">http://cdn.example.com/images/large_picture.jpg/125/100</a></p>

<p>Does anyone know of CDN that provides a functionality like this? Or have a suggestion to get around the 1MB limit on Google App Engine (not a hack, but alternative method of code).</p>
"
494054,3207,2009-01-30T00:22:40Z,10,How can I disable quoting in the Python 2.4 CSV reader?,"<p>I am writing a Python utility that needs to parse a large, regularly-updated CSV file I don't control.  The utility must run on a server with only Python 2.4 available.  The CSV file does not quote field values at all, but the <a href=""http://www.python.org/doc/2.4.3/lib/csv-fmt-params.html#csv-fmt-params"" rel=""nofollow"">Python 2.4 version of the csv library</a> does not seem to give me any way to turn off quoting, it just allows me to set the quote character (<code>dialect.quotechar = '""'</code> or whatever).  If I try setting the quote character to <code>None</code> or the empty string, I get an error.</p>

<p>I can sort of work around this by setting <code>dialect.quotechar</code> to some ""rare"" character, but this is brittle, as there is no ASCII character I can absolutely guarantee will not show up in field values (except the delimiter, but if I set <code>dialect.quotechar = dialect.delimiter</code>, things go predictably haywire).</p>

<p>In <a href=""http://docs.python.org/library/csv.html"" rel=""nofollow"">Python 2.5 and later</a>, if I set <code>dialect.quoting</code> to <code>csv.QUOTE_NONE</code>, the CSV reader respects that and does not interpret any character as a quote character.  Is there any way to duplicate this behavior in Python 2.4?</p>

<p><strong>UPDATE</strong>: Thanks Triptych and Mark Roddy for helping to narrow the problem down.  Here's a simplest-case demonstration:</p>

<pre><code>&gt;&gt;&gt; import csv
&gt;&gt;&gt; import StringIO
&gt;&gt;&gt; data = """"""
... 1,2,3,4,""5
... 1,2,3,4,5
... """"""
&gt;&gt;&gt; reader = csv.reader(StringIO.StringIO(data))
&gt;&gt;&gt; for i in reader: print i
... 
[]
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in ?
_csv.Error: newline inside string
</code></pre>

<p>The problem only occurs when there's a single double-quote character in the <em>final</em> column of a row.  Unfortunately, this situation exists in my dataset.  I've accepted Tanj's solution: manually assign a nonprinting character (<code>""\x07""</code> or <code>BEL</code>) as the quotechar.  This is hacky, but it works, and I haven't yet seen another solution that does.  Here's a demo of the solution in action:</p>

<pre><code>&gt;&gt;&gt; import csv
&gt;&gt;&gt; import StringIO
&gt;&gt;&gt; class MyDialect(csv.Dialect):
...     quotechar = '\x07'
...     delimiter = ','
...     lineterminator = '\n'
...     doublequote = False
...     skipinitialspace = False
...     quoting = csv.QUOTE_NONE
...     escapechar = '\\'
... 
&gt;&gt;&gt; dialect = MyDialect()
&gt;&gt;&gt; data = """"""
... 1,2,3,4,""5
... 1,2,3,4,5
... """"""
&gt;&gt;&gt; reader = csv.reader(StringIO.StringIO(data), dialect=dialect)
&gt;&gt;&gt; for i in reader: print i
... 
[]
['1', '2', '3', '4', '""5']
['1', '2', '3', '4', '5']
</code></pre>

<p>In Python 2.5+ setting quoting to csv.QUOTE_NONE would be sufficient, and the value of <code>quotechar</code> would then be irrelevant.  (I'm actually getting my initial dialect via a <code>csv.Sniffer</code> and then overriding the quotechar value, not by subclassing <code>csv.Dialect</code>, but I don't want that to be a distraction from the real issue; the above two sessions demonstrate that <code>Sniffer</code> isn't the problem.)</p>
"
494594,59568,2009-01-30T05:49:13Z,68,How to write the Fibonacci Sequence in Python,"<p>I had originally coded the program wrongly. Instead of returning the Fibonacci numbers between a range (ie. startNumber 1, endNumber 20 should = only those numbers between 1 &amp; 20), I have written for the program to display all Fibonacci numbers between a range (ie. startNumber 1, endNumber 20 displays = First 20 Fibonacci numbers). I thought I had a sure-fire code. I also do not see why this is happening.</p>

<pre><code>startNumber = int(raw_input(""Enter the start number here ""))
endNumber = int(raw_input(""Enter the end number here ""))

def fib(n):
    if n &lt; 2:
        return n
    return fib(n-2) + fib(n-1)

print map(fib, range(startNumber, endNumber))
</code></pre>

<p>Someone pointed out in my Part II (which was closed for being a duplicate - <a href=""http://stackoverflow.com/questions/504193/how-to-write-the-fibonacci-sequence-in-python-part-ii"">http://stackoverflow.com/questions/504193/how-to-write-the-fibonacci-sequence-in-python-part-ii</a>) that I need to pass the startNumber and endNumber through a generator using a while loop. Can someone please point me in the direction on how to do this? Any help is welcome.</p>

<hr>

<p>I'm a learning programmer and I've run into a bit of a jumble. I am asked to write a program that will compute and display Fibonacci's Sequence by a user inputted start number and end number (ie. startNumber = 20 endNumber = 100 and it will display only the numbers between that range). The trick is to use it inclusively (which I do not know how to do in Python? - I'm assuming this means to use an inclusive range?).</p>

<p>What I have so far is no actual coding but rather:</p>

<ul>
<li>Write Fib sequence formula to infinite</li>
<li>Display startNumber to endNumber only from Fib sequence.</li>
</ul>

<p>I have no idea where to start and I am asking for ideas or insight into how to write this. I also have tried to write the Fib sequence forumla but I get lost on that as well.</p>
"
494769,60459,2009-01-30T07:16:22Z,6,Create a cross-platform protocol helper that runs a python script,"<p>I'd like to register a protocol handler, like ""myapp:"", across OS X, Linux, and Windows, so that when someone clicks a url like ""myapp://some/params"" in a web browser, a python script will be called and passed in those params.</p>

<p>Obviously this would require something being installed on each machine to enable it, but just trying to figure out a way to make it work on all three platforms.</p>
"
494881,7581,2009-01-30T08:33:12Z,3,refactor this dictionary-to-xml converter in python,"<p>It's a small thing, really: I have this function that converts dict objects to xml.</p>

<p>Here's the function:</p>

<pre><code>def dictToXml(d):
    from xml.sax.saxutils import escape

    def unicodify(o):
        if o is None:
            return u'';
        return unicode(o)

    lines = []
    def addDict(node, offset):
        for name, value in node.iteritems():
            if isinstance(value, dict):
                lines.append(offset + u""&lt;%s&gt;"" % name)
                addDict(value, offset + u"" "" * 4)
                lines.append(offset + u""&lt;/%s&gt;"" % name)
            elif isinstance(value, list):
                for item in value:
                    if isinstance(item, dict):
                        lines.append(offset + u""&lt;%s&gt;"" % name)
                        addDict(item, offset + u"" "" * 4)
                        lines.append(offset + u""&lt;/%s&gt;"" % name)
                    else:
                        lines.append(offset + u""&lt;%s&gt;%s&lt;/%s&gt;"" % (name, escape(unicodify(item)), name))
            else:
                lines.append(offset + u""&lt;%s&gt;%s&lt;/%s&gt;"" % (name, escape(unicodify(value)), name))

    addDict(d, u"""")
    lines.append(u"""")
    return u""\n"".join(lines)
</code></pre>

<p>For example, it converts this dictionary</p>

<pre><code>{ 'site': { 'name': 'stackoverflow', 'blogger': [ 'Jeff', 'Joel' ] } }
</code></pre>

<p>to:</p>

<pre><code>&lt;site&gt;
    &lt;name&gt;stackoverflow&lt;/name&gt;
    &lt;blogger&gt;jeff&lt;/blogger&gt;
    &lt;blogger&gt;joel&lt;/blogger&gt;
&lt;/site&gt;
</code></pre>

<p>It works, but the <code>addDict</code> function looks a little too repetitive. I'm sure there's a way to refactor it into 3 co-recursive functions named <code>addDict</code>, <code>addList</code> and <code>addElse</code>, but my brain is stuck. Any help?</p>

<p>Also, any way to get rid of the <code>offset +</code> thing in every line would be nice.</p>

<p><strong>NOTE</strong>: I chose these semantics because I'm trying to match the behavior of the <a href=""http://www.json.org/javadoc/org/json/XML.html#toString(java.lang.Object)"" rel=""nofollow"">json-to-xml converter</a> in <a href=""http://www.json.org/java/index.html"" rel=""nofollow"">org.json</a>, which I use in a different part of my project. If you got to this page just looking for a dictionary to xml converter, there are some <a href=""#494905"" rel=""nofollow"">really</a> good <a href=""#495512"" rel=""nofollow"">options</a> in some of the answers. (Especially <a href=""http://foss.cpcc.edu/pyfo/"" rel=""nofollow"">pyfo</a>).</p>
"
494919,46646,2009-01-30T09:10:03Z,-2,File and space in Python,"<p>I have a file like:</p>

<pre><code>&lt;space&gt;
&lt;space&gt;
line1
&lt;space&gt;
column 1    column 2    column 3   ...

.
.
.


&lt;space&gt;
&lt;space&gt;
</code></pre>

<p>How to remove this extra spaces?</p>

<p>I need to extract the heading which will be on <code>line1</code>. Also, I need to extract <code>column 1</code>, <code>column 2</code>, <code>column 3</code> etc.</p>

<p>At the end of last column content there is '\n'.How to get rid of it ???</p>

<p>Help me with this...</p>

<p>Thank you</p>
"
494997,58737,2009-01-30T09:54:23Z,1,HOWTO: XML-RPC dynamic function registration in python?,"<p>I am new to XML-RPC.</p>

<pre><code>#client code
import xmlrpclib
proxy = xmlrpclib.ServerProxy(""http://localhost:8000/"")
x,y = arg1,arg2
print proxy.fun1(x,y)
print proxy.fun2(x,y)
</code></pre>

<p>What server should do:</p>

<ol>
<li>load fun1</li>
<li>register fun1</li>
<li>return result</li>
<li>unload fun1</li>
</ol>

<p>and then do same with fun2.</p>

<p>What is the best way to do this?</p>

<p>I have figured out a way to do this but it sounds ""clumsy,far fetched and unpythonic"".</p>
"
495294,27478,2009-01-30T12:02:34Z,3,Refactor this Python code to iterate over a container,"<p>Surely there is a better way to do this?</p>

<pre><code>results = []
if not queryset is None:
    for obj in queryset:
        results.append((getattr(obj,field.attname),obj.pk))
</code></pre>

<p>The problem is that sometimes queryset is None which causes an exception when I try to iterate over it. In this case, I just want result to be set to an empty list. This code is from a Django view, but I don't think that matters--this seems like a more general Python question.</p>

<p><strong>EDIT:</strong> I turns out that it was my code that was turning an empty queryset into a ""None"" instead of returning an empty list. Being able to assume that queryset is always iteratable simplifies the code by allowing the ""if"" statement to be removed. The answers below maybe useful to others who have the same problem, but cannot modify their code to guarantee that queryset is not ""None"".</p>
"
495422,11522,2009-01-30T12:56:57Z,11,Confusion about global variables in python,"<p>I'm new to python, so please excuse what is probably a pretty dumb question. </p>

<p>Basically, I have a single global variable, called _debug, which is used to determine whether or not the script should output debugging information. My problem is, I can't set it in a different python script than the one that uses it.</p>

<p>I have two scripts:</p>

<pre><code>one.py:
-------

def my_function():
  if _debug:
    print ""debugging!""


two.py:
-------

from one import *
_debug = False

my_function()
</code></pre>

<p>Running two.py generates an error:</p>

<pre><code>NameError: global name '_debug' is not defined
</code></pre>

<p>Can anyone tell me what I'm doing wrong?</p>
"
495424,46646,2009-01-30T12:58:46Z,1,Get rid of '\n' in Python,"<p>How to get rid of '\n' at the end of a line ?</p>
"
495595,1384652,2009-01-30T14:09:29Z,2,Python's version of PHP's time() function,"<p>I've looked at the <a href=""http://docs.python.org/library/time.html"" rel=""nofollow"">Python Time module</a> and can't find anything that gives the integer of how many seconds since 1970 as PHP does with time().</p>

<p>Am I simply missing something here or is there a common way to do this that's simply not listed there?</p>
"
496009,1447,2009-01-30T15:58:58Z,5,Is there any case where len(someObj) does not call someObj's __len__ function?,"<p>Is there any case where len(someObj) does not call someObj's <code>__len__</code> function?</p>

<p>I recently replaced the former with the latter in a (sucessful) effort to speed up some code.  I want to make sure there's not some edge case somewhere where len(someObj) is not the same as someObj.<code>__len__</code>().</p>
"
496582,46821,2009-01-30T18:21:13Z,8,What's a good way to keep track of class instance variables in Python?,"<p>I'm a C++ programmer just starting to learn Python.  I'd like to know how you keep track of instance variables in large Python classes.  I'm used to having a <code>.h</code> file that gives me a neat list (complete with comments) of all the class' members.  But since Python allows you to add new instance variables on the fly, how do you keep track of them all?</p>

<p>I'm picturing a scenario where I mistakenly add a new instance variable when I already had one - but it was 1000 lines away from where I was working.  Are there standard practices for avoiding this?</p>

<p><strong>Edit:</strong> It appears I created some confusion with the term ""member variable.""  I really mean instance variable, and I've edited my question accordingly.</p>
"
496814,58385,2009-01-30T19:17:39Z,7,Progress bar not updating during operation,"<p>in my python program to upload a file to the internet, im using a GTK progress bar to show the upload progress.  But the problems that im facing is that the progress bar does not show any activity until the upload is complete, and then  it abruptly indicates upload complete. im using pycurl to make the http requests...my question is -
do i need to have a multi-threaded application to upload the file and simultaneously update the gui? or is there some other mistake that im making? </p>

<p>Thanks in advance!</p>
"
497114,42974,2009-01-30T20:27:49Z,11,Is there a Python equivalent of Perl's x operator?,"<p>In Perl, I can replicate strings with the 'x' operator:</p>

<pre><code>$str = ""x"" x 5;
</code></pre>

<p>Can I do something similar in Python?</p>
"
497233,8206,2009-01-30T21:03:24Z,13,Python's os.path choking on Hebrew filenames,"<p>I'm writing a script that has to move some file around, but unfortunately it doesn't seem <code>os.path</code> plays with internationalization very well. When I have files named in Hebrew, there are problems. Here's a screenshot of the contents of a directory:</p>

<p><img src=""http://eli.thegreenplace.net/files/temp/hebfilenameshot.png"" alt=""alt text"" /></p>

<p>Now consider this code that goes over the files in this directory:</p>

<pre><code>files = os.listdir('test_source')

for f in files:
    pf = os.path.join('test_source', f)
    print pf, os.path.exists(pf)
</code></pre>

<p>The output is:</p>

<pre><code>test_source\ex True
test_source\joe True
test_source\mie.txt True
test_source\__()'''.txt True
test_source\????.txt False
</code></pre>

<p>Notice how <code>os.path.exists</code> thinks that the hebrew-named file doesn't even exist?
How can I fix this?</p>

<p>ActivePython 2.5.2 on Windows XP Home SP2</p>
"
497426,NA,2009-01-30T21:59:38Z,78,Deleting multiple elements from a list,"<p>Is it possible to delete multiple elements from a list at the same time? If I want to delete elements at index 0 and 2, and try something like del somelist[0], followed by del somelist[2], the second statement will actually delete somelist[3].</p>

<p>I suppose I could always delete the higher numbered elements first but I'm hoping there is a better way.</p>
"
497654,14716,2009-01-30T23:18:54Z,24,Django workflow when modifying models frequently?,"<p>as I usually don't do the up front design of my models in Django projects I end up modifying the models a lot and thus deleting my test database every time (because ""syncdb"" won't ever alter the tables automatically for you). Below lies my workflow and I'd like to hear about yours. Any thoughts welcome.. </p>

<ol>
<li>Modify the model.</li>
<li>Delete the test database. (always a simple sqlite database for me.)</li>
<li>Run ""syncdb"".</li>
<li>Generate some test data via code.</li>
<li>goto 1.</li>
</ol>

<p>A secondary question regarding this.. In case your workflow is like above, how do you execute the 4. step? Do you generate the test data manually or is there a proper hook point in Django apps where you can inject the test-data-generating-code at server startup?\</p>

<p>TIA.</p>
"
497704,49701,2009-01-30T23:35:05Z,1,Python 3.0 `wsgiref` server not functioning,"<p>I can't seem to get the <code>wsgiref</code> module to work at all under Python 3.0. It works fine under 2.5 for me, however. Even when I try the <a href=""http://docs.python.org/3.0/library/wsgiref.html?highlight=wsgiref#examples"" rel=""nofollow"">example in the docs</a>, it fails. It fails so hard that even if I have a print function above where I do: ""<code>from wsgiref.simple_server import make_server</code>"", it never gets printed for some reason. It doesn't thow any errors when run, and it just displays a blank page in the browser and doesn't log any sort of request.</p>

<p>Does anybody know what the problem may be? Thanks!</p>
"
497747,38146,2009-01-30T23:59:34Z,8,IronPython vs. C# for small-scale projects,"<p>I currently use Python for most of my programming projects (mainly rapid development of small programs and prototypes). I'd like to invest time in learning a language that gives me the flexibility to use various Microsoft tools and APIs whenever the opportunity arises. I'm trying to decide between IronPython and C#. Since Python is my favorite programming language (mainly because of its conciseness and clean syntax), IronPython sounds like the ideal option. Yet after reading about it a little bit I have several questions.</p>

<p>For those of you who have used IronPython, does it ever become unclear where classic Python ends and .NET begins? For example, there appears to be significant overlap in functionality between the .NET libraries and the Python standard library, so when I need to do string operations or parse XML, I'm unclear which library I'm supposed to use. Also, I'm unclear when I'm supposed to use Python versus .NET data types in my code. For example, which of the following would I be using in my code?</p>

<pre><code>d = {}
</code></pre>

<p>or </p>

<pre><code>d = System.Collections.Hashtable()
</code></pre>

<p>(By the way, it seems that if I do a lot of things like the latter I might lose some of the conciseness, which is why I favor Python in the first place.)</p>

<p>Another issue is that a number of Microsoft's developer tools, such as .NET CF and Xbox XNA, are not available in IronPython. Are there more situations where IronPython wouldn't give me the full reach of C#?</p>
"
497765,42974,2009-01-31T00:06:07Z,134,Python string.join(list) on object array rather than string array,"<p>In Python, I can do:</p>

<pre><code>&gt;&gt;&gt; list = ['a', 'b', 'c']
&gt;&gt;&gt; ', '.join(list)
'a, b, c'
</code></pre>

<p>Is there any easy way to do the same when I have a list of objects?</p>

<pre><code>&gt;&gt;&gt; class Obj:
...     def __str__(self):
...         return 'name'
...
&gt;&gt;&gt; list = [Obj(), Obj(), Obj()]
&gt;&gt;&gt; ', '.join(list)
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
TypeError: sequence item 0: expected string, instance found
</code></pre>

<p>Or do I have to resort to a for loop?</p>
"
497885,14006,2009-01-31T00:51:48Z,52,Python element-wise tuple operations like sum,"<p>Is there anyway to get tuple operations in Python to work like this:</p>

<pre><code>&gt;&gt;&gt; a = (1,2,3)
&gt;&gt;&gt; b = (3,2,1)
&gt;&gt;&gt; a + b
(4,4,4)
</code></pre>

<p>instead of:</p>

<pre><code>&gt;&gt;&gt; a = (1,2,3)
&gt;&gt;&gt; b = (3,2,1)
&gt;&gt;&gt; a + b
(1,2,3,3,2,1)
</code></pre>

<p>I know it works like that because the <code>__add__</code> and <code>__mul__</code> methods are defined to work like that. So the only way would be to redefine them?</p>
"
497952,60893,2009-01-31T01:22:08Z,13,How to make python gracefully fail?,"<p>I was just wondering how do you make python fail in a user defined way in all possible errors. </p>

<p>For example, I'm writing a program that processes a (large) list of items, and some of the items may not be in the format I defined. If python detects an error, it currently just spits out an ugly error message and stop the whole process. However, I want it to just outputs the error to somewhere together with some context and then move on to the next item. </p>

<p>If anyone can help me with this it would be greatly appreciated!</p>

<p>Thanks a lot!</p>

<p>Jason</p>
"
498106,2242,2009-01-31T02:52:25Z,76,How do I compile a Visual Studio project from the command-line?,"<p>I'm scripting the checkout, build, distribution, test, and commit cycle for a large C++ solution that is using <a href=""http://en.wikipedia.org/wiki/Monotone_%28software%29"">Monotone</a>, <a href=""http://en.wikipedia.org/wiki/CMake"">CMake</a>, Visual Studio Express 2008, and custom tests.  </p>

<p>All of the other parts seem pretty straight-forward, but I don't see how to compile the Visual Studio solution without getting the GUI.  </p>

<p>The script is written in Python, but an answer that would allow me to just make a call to: os.system would do.</p>
"
498199,NA,2009-01-31T03:56:54Z,11,Valid use case for django admin?,"<p>I want to build a django site where a certain group of trusted users can edit their profile information. Does it make sense to have each trusted user go through the django admin interface? I'd only want them to be able to see and edit their own information (obviously). It doesn't seem like this fits the way the django people define ""trust"", especially the bolded bit...</p>

<p>From <a href=""http://74.125.95.132/search?q=cache:fw9E1c2Oa7AJ:www.djangobook.com/en/beta/chapter18/+django+admin+use+cases&amp;hl=en&amp;ct=clnk&amp;cd=2&amp;gl=ca&amp;client=firefox-a"">The Django Book, Chapter 18</a>:</p>

<blockquote>
  <p>The admin is designed to be used by
  people who you, the developer, trust.
  This doesn’t just mean “people who
  have been authenticated;” it means
  that Django assumes that your content
  editors can be trusted to do the right
  thing.</p>
  
  <p>This means that there’s no “approval”
  process for editing content — if you
  trust your users, nobody needs to
  approve of their edits. It also means
  that the permission system, while
  powerful, has no support for limiting
  access on a per-object basis. <strong>If you
  trust someone to edit their own
  stories, you trust them not to edit
  anyone else’s without permission.</strong></p>
</blockquote>

<p>Is this one of those use cases that fits with django's admin module, or is it just a specialized view for a non-trusted user?</p>
"
498630,3885,2009-01-31T10:46:37Z,22,Is Django a good choice for a security critical application?,"<p>Is Django a good choice for a security critical application?</p>

<p>I am asking this because most of the online banking software is built using Java. Is there any real reason for this?</p>
"
499084,61000,2009-01-31T16:15:33Z,8,"Minimal, Standalone, Distributable, cross platform web server","<p>I've been writing a fair number of smaller wsgi apps lately and am looking to find a web server that can be distributed, preconfigured to run the specific app.  I know there are things like twisted and cherrypy which can serve up wsgi apps, but they seem to be missing a key piece of functionality for me, which is the ability to ""pseudostream"" large files using the http range header.  Is there a web server available under a BSD or similar license which can be distributed as a standalone executable on any of the major platforms which is capable of both proxying to a a wsgi server (like cherrypy or the like) AND serving large files using the http range header?</p>
"
499345,NA,2009-01-31T19:02:34Z,22,Regular expression to extract URL from an HTML link,"<p>I’m a newbie in Python. I’m learning regexes, but I need help here.</p>

<p>Here comes the HTML source:</p>

<pre><code>&lt;a href=""http://www.ptop.se"" target=""_blank""&gt;http://www.ptop.se&lt;/a&gt;
</code></pre>

<p>I’m trying to code a tool that only prints out <code>http://ptop.se</code>. Can you help me please?</p>
"
499593,61035,2009-01-31T21:17:24Z,23,What's the best serialization method for objects in memcached?,"<p>My Python application currently uses the <a href=""http://www.tummy.com/Community/software/python-memcached/"">python-memcached API</a> to set and get objects in memcached.  This API uses Python's native <a href=""http://docs.python.org/library/pickle.html"">pickle module</a> to serialize and de-serialize  Python objects. <p>This API makes it simple and fast to store nested Python lists, dictionaries and tuples in memcached, and reading these objects back into the application is completely transparent -- it just works.<p>But I don't want to be limited to using Python exclusively, and if all the memcached objects are serialized with pickle, then clients written in other languages won't work.<p>Here are the cross-platform serialization options I've considered:<p></p>

<ol>
<li>XML - the main benefit is that it's human-readable, but that's not important in this application.  XML also takes a lot space, and it's expensive to parse.<p></li>
<li>JSON - seems like a good cross-platform standard, but I'm not sure it retains the character of object types when read back from memcached.  For example, according to <a href=""http://stackoverflow.com/questions/408866/python-human-readable-object-serialization"">this post</a> tuples are transformed into lists when using <a href=""http://pypi.python.org/pypi/simplejson/"">simplejson</a>; also, it seems like adding elements to the JSON structure could break code written to the old structure<p></li>
<li><a href=""http://code.google.com/apis/protocolbuffers/docs/overview.html"">Google Protocol Buffers</a> - I'm really interested in this because it seems very fast and compact -- at least 10 times smaller and faster than XML; it's not human-readable, but that's not important for this app; and it seems designed to support growing the structure without breaking old code<p></li>
</ol>

<p>Considering the priorities for this app, what's the ideal object serialization method for memcached?<p></p>

<ol>
<li>Cross-platform support (Python, Java, C#, C++, Ruby, Perl)<p></li>
<li>Handling nested data structures<p></li>
<li>Fast serialization/de-serialization<p></li>
<li>Minimum memory footprint<p></li>
<li>Flexibility to change structure without breaking old code</li>
</ol>
"
499596,56963,2009-01-31T21:18:00Z,-3,Passing JSON strings larger than 80 characters,"<p>I'm having a problem passing strings that exceed 80 characters in JSON. When I pass a string that's exactly 80 characters long it works like magic. But once I add the 81st letter it craps out. I've tried looking at the json object in firebug and it seems to think the string is an array because it has an expander next to it. Clicking the expander though does nothing. I've tried searching online for caps on JSON string sizes and work arounds but am coming up empty :(. Anybody know anything about this?</p>

<p>edit:</p>

<p>It actually doesn't matter what the string is... using ""abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz"" yields the same results.</p>

<p>Here's my code: (I'm using python)</p>

<p>result = {""test"": ""abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz""}
self.response.out.write(simplejson.dumps(result))</p>

<p>would you happen to know the class that encodes strings properly for python? Thanks so much :)</p>
"
499705,42974,2009-01-31T22:29:21Z,7,Can I use IPython in an embedded interactive Python console?,"<p>I use the following snippet to drop into a Python shell mid-program. This works fine, but I only get the standard console. Is there a way to do the same but using the <a href=""http://ipython.scipy.org/"">IPython</a> shell?</p>

<pre><code>import code

class EmbeddedConsole(code.InteractiveConsole):
    def start(self):
        try:
                self.interact(""Debug console starting..."")
        except:
                print(""Debug console closing..."")

def print_names():
    print(adam)
    print(bob)

adam = ""I am Adam""
bob = ""I am Bob""

print_names()
console = EmbeddedConsole(locals())
console.start()
print_names()
</code></pre>
"
499964,66731,2009-02-01T01:10:43Z,3,How do you create python methods(signature and content) in code?,"<p>I've created a method that generates a new class and adds some methods into the class, but there is a strange bug, and I'm not sure what's happening:</p>

<pre><code>def make_image_form(image_fields):
    ''' Takes a list of image_fields to generate images '''
    images = SortedDict()
    for image_name in image_fields:
        images[image_name] = forms.ImageField(required=False)
    new_form = type('ListingImagesForm2', (forms.BaseForm,), {'base_fields' : images})
    #now we add the validation methods to the class
    for image_name in image_fields:
       print ""image name is: "", image_name
       setattr(new_form, 'clean_' + image_name, lambda self: self._clean_photo(image_name))
    #Add the _clean_photo method to the class
    setattr(new_form, '_clean_photo', _clean_photo)
    return new_form
</code></pre>

<p>This is my method, which takes a list of image_fields (I'm making a site in Django), and it creates a whole bunch of ImageField fields, and creates a class ListingImagesForm2, and assigns the image fields to the class.</p>

<p>The problem is in creating the methods, and more specifically the method content.</p>

<p>In the loop:</p>

<pre><code>for image_name in image_fields:
    print ""image name is: "", image_name
    setattr(new_form, 'clean_' + image_name, lambda self: self._clean_photo(image_name))
</code></pre>

<p>The methods signatures are created correctly (e.g. clean_pic_1, clean_pic_2...) , but I think there is a problem in the lambda expression, as the _clean_photo method is always called with the same image name (which happens to be the last image name in the image_fields list).</p>

<p>Is there any nicer way to create dynamic method content(code), than using lambda expressions?  </p>

<p>And why would my lambda expression only pass _clean_photo the last image_name in the for loop?</p>
"
500134,10583,2009-02-01T03:37:44Z,2,Can I log into a web application automatically using a users windows logon?,"<p>On the intranet at my part time job (not IT related) there are various web applications that we use that do not require logging in explicitly. We are required to login to Windows obviously, and that then authenticates us some how.</p>

<p>I'm wondering how this is done? Without worrying about security TOO much, how would I go about authenticating a user to a web application, utilizing the windows login information? I'd be using Python (and Django). </p>

<p>Are there limitations on how this can be achieved? For instance, would a specific browser be required? Would the application and intranet backend have to be hosted at the same location or at least have to communicate? Or is it simply getting the users Windows credentials, and passing that to the authentication software of the web application?</p>
"
500168,66475,2009-02-01T03:59:27Z,14,Python's timedelta: can't I just get in whatever time unit I want the value of the entire difference?,"<p>I am trying to have some clever dates since a post has been made on my site (""seconds since, hours since, weeks since, etc.."") and I'm using datetime.timedelta difference between utcnow and utc dated stored in the database for a post.</p>

<p>Looks like, according to the docs, I have to use the days attribute AND the seconds attribute, to get the fancy date strings I want. </p>

<p>Can't I just get in whatever time unit I want the value of the entire difference? Am I missing something? </p>

<p>It would be perfect if I could just get the entire difference in seconds.</p>
"
500328,56541,2009-02-01T06:17:38Z,11,Identifying numeric and array types in numpy,"<p>Is there an existing function in numpy that will tell me if a value is either a numeric type or a numpy array? I'm writing some data-processing code which needs to handle numbers in several different representations (by ""number"" I mean any representation of a numeric quantity which can be manipulated using the standard arithmetic operators, +, -, *, /, **).</p>

<p>Some examples of the behavior I'm looking for</p>

<pre><code>&gt;&gt;&gt; is_numeric(5)
True
&gt;&gt;&gt; is_numeric(123.345)
True
&gt;&gt;&gt; is_numeric('123.345')
False
&gt;&gt;&gt; is_numeric(decimal.Decimal('123.345'))
True
&gt;&gt;&gt; is_numeric(True)
False
&gt;&gt;&gt; is_numeric([1, 2, 3])
False
&gt;&gt;&gt; is_numeric([1, '2', 3])
False
&gt;&gt;&gt; a = numpy.array([1, 2.3, 4.5, 6.7, 8.9])
&gt;&gt;&gt; is_numeric(a)
True
&gt;&gt;&gt; is_numeric(a[0])
True
&gt;&gt;&gt; is_numeric(a[1])
True
&gt;&gt;&gt; is_numeric(numpy.array([numpy.array([1]), numpy.array([2])])
True
&gt;&gt;&gt; is_numeric(numpy.array(['1'])
False
</code></pre>

<p>If no such function exists, I know it shouldn't be hard to write one, something like </p>

<pre><code>isinstance(n, (int, float, decimal.Decimal, numpy.number, numpy.ndarray))
</code></pre>

<p>but are there other numeric types I should include in the list?</p>
"
500406,46914,2009-02-01T07:55:43Z,3,How to vertically align Paragraphs within a Table using Reportlab?,"<p>I'm using Reportlab to generate report cards.  The report cards are basically one big Table object.  Some of the content in the table cells needs to wrap, specifically titles and comments, and I also need to bold certain elements.</p>

<p>To accomplish both the wrapping and ability to bold, I'm using Paragraph objects within the Table.  My table needs several of these elements vertically aligned to 'middle' but the Paragraph alignment and snaps my text to the bottom of the cell.</p>

<p>How can I vertically align my Paragraph within a Table cell?</p>
"
500434,4697,2009-02-01T08:29:44Z,9,using django-rest-interface with http put,"<p>I'm trying to figure out how to implement my first RESTful interface using Django and django-rest-interface. I'm having problems with the HTTP PUT requests.</p>

<p>How do I access the parameters of the PUT request? 
I thought they would be in the request.POST array, as PUT is somewhat similar to POST in my understanding, but that array is always empty.</p>

<p>What am I doing wrong?</p>

<p>Thanks for the help</p>
"
500477,11515,2009-02-01T09:20:45Z,8,In Python - how to execute system command with no output,"<p>Is there a built-in method in Python to execute a system command without displaying the output? I only want to grab the return value.</p>

<p>It is important that it be cross-platform, so just redirecting the output to /dev/null won't work on Windows, and the other way around. I know I can just check os.platform and build the redirection myself, but I'm hoping for a built-in solution.</p>
"
500578,31610,2009-02-01T10:48:46Z,3,is there an alternative way of calling next on python generators?,"<p>I have a generator and I would like to know if I can use it without having to worry about StopIteration , and I would like to use it without the <strong><code>for item in generator</code></strong> . I would like to use it with a while statement for example ( or other constructs ). How could I do that ?</p>
"
500650,31610,2009-02-01T11:43:27Z,9,How do Django model fields work?,"<p>First of all,I'm not into web programming. I bumped into django and read a bit about models. I was intrigued by the following code ( from djangoproject.com ) :</p>

<pre><code>
class Person(models.Model):
    first_name = models.CharField(max_length=50)
    last_name = models.CharField(max_length=50)

    def __str__(self):
        # Note use of django.utils.encoding.smart_str() here because
        # first_name and last_name will be unicode strings.
        return smart_str('%s %s' % (self.first_name, self.last_name))
</code></pre>

<p>By my understanding of python , first_name and last_name are class variables , right ? How is that used in code ( because I guess that setting Person.first_name or Person.last_name will affect all Person instances ) ? Why is it used that way ?</p>
"
500822,55283,2009-02-01T13:39:48Z,5,How to deploy Django with Spawning,"<p>There's no much documentation on how to deploy a Django project with <a href=""http://pypi.python.org/pypi/Spawning/"">Spawning</a> and yet people are recommending it over apache/mod_wsgi.</p>

<p><a href=""http://stackoverflow.com/questions/487224/reducing-django-memory-usage-low-hanging-fruit/487261#487261"">In another similar question</a>, other SO user suggested me to open a new question specific to Spawning, so hopefully others can share their experiences too.</p>
"
500864,42974,2009-02-01T13:56:14Z,132,Case insensitive Python regular expression without re.compile,"<p>In Python, I can compile a regular expression to be case-insensitive using <code>re.compile</code>:</p>

<pre><code>&gt;&gt;&gt; s = 'TeSt'
&gt;&gt;&gt; casesensitive = re.compile('test')
&gt;&gt;&gt; ignorecase = re.compile('test', re.IGNORECASE)
&gt;&gt;&gt; 
&gt;&gt;&gt; print casesensitive.match(s)
None
&gt;&gt;&gt; print ignorecase.match(s)
&lt;_sre.SRE_Match object at 0x02F0B608&gt;
</code></pre>

<p>Is there a way to do the same, but without using <code>re.compile</code>. I can't find anything like Perl's <code>i</code> suffix (e.g. <code>m/test/i</code>) in the documentation.</p>
"
500935,51627,2009-02-01T14:47:24Z,14,Using web.py as non blocking http-server,"<p>while learning some basic programming with python, i found web.py. i
got stuck with a stupid problem:</p>

<p>i wrote a simple console app with a main loop that proccesses items
from a queue in seperate threads. my goal is to use web.py to add
items to my queue and report status of the queue via web request. i
got this running as a module but can´t integrate it into my main app.
my problem is when i start the http server with app.run() it blocks my
main loop.
also tried to start it with thread.start_new_thread but it still
blocks.
is there an easy way to run web.py´s integrated http server in the
background within my app.</p>

<p>in the likely event that i am a victim of a fundamental
missunderstanding, any attempt to clarify my error in reasoning would
help ;.) ( please bear with me, i am a beginner :-) </p>
"
501021,58693,2009-02-01T15:45:53Z,1,Python + SQLite query to find entries that sit in a specified time slot,"<p>I want to store a row in an SQLite 3 table for each booking in my diary.</p>

<p>Each row will have a 'start time' and a 'end time'.</p>

<p>Does any one know how I can query the table for an event at a given time?</p>

<p>E.g. Return any rows that happen at say 10:30am</p>

<p>Thanks </p>
"
501027,33061,2009-02-01T15:48:34Z,1,list named with a function argument in python,"<p>I get the feeling this is probably something I should know but I can't think of it right now. I'm trying to get a function to build a list where the name of the list is an argument given in the function;</p>

<p>e.g.</p>

<pre><code>def make_hand(deck, handname):
    handname = []
    for c in range(5):
        handname.append(deck.pop())
    return handname

    # deck being a list containing all the cards in a deck of cards earlier
</code></pre>

<p>The issue is that this creates a list called handname when i want it to be called whatever the user enters as handname when creating the hand.</p>

<p>Anyone can help? thanks</p>
"
501087,53687,2009-02-01T16:28:14Z,2,XMP image tagging and Python,"<p>If I were to tag a bunch of images via XMP, in Python, what would be the best way? I've used Perl's <strong>Image::ExifTool</strong> and I am very much used to its reliability. I mean the thing never bricked on tens of thousands of images.</p>

<p>I found <a href=""http://code.google.com/p/python-xmp-toolkit/"" rel=""nofollow"">this</a>, backed by some heavy-hitters like the European Space Agency, but it's clearly marked as unstable.</p>

<p>Now, assuming I am comfortable with C++, how easy is it to, say, use the <a href=""http://www.adobe.com/devnet/xmp/"" rel=""nofollow"">Adobe XMP toolkit</a> directly, in Python? Having never done this before, I am not sure what I'd sign up for.</p>

<p><strong>Update:</strong> I tried some libraries out there and, including the fore mentioned toolkit, they are still pretty immature and have glaring problems. I resorted to actually writing an Perl-based server that accepts XML requests to read and write metadata, with the combat-tested Image::EXIF. The amount of code is actually very light, and definitely beats torturing yourself by trying to get the Python libraries to work. The server solution is language-agnostic, so it's a twofer. </p>
"
501187,NA,2009-02-01T17:20:02Z,1,"""EOL while scanning single-quoted string""? (backslash in string)","<pre><code>import os
xp1 = ""\Documents and Settings\""
xp2 = os.getenv(""USERNAME"")
print xp1+xp2
</code></pre>

<p>Gives me error</p>

<pre><code> File ""1.py"", line 2 
xp1 = ""\Documents and Settings\""
                               ^
SyntaxError: EOL while scannning single-quoted string
</code></pre>

<p>Can you help me please, do you see the problem?</p>
"
501308,54964,2009-02-01T18:22:26Z,4,Problem in understanding Python list comprehensions,"<p>What does the last line mean in the following code?</p>

<pre><code>import pickle, urllib                                                                                                                                                     

  handle = urllib.urlopen(""http://www.pythonchallenge.com/pc/def/banner.p"")
  data = pickle.load(handle)
  handle.close()

  for elt in data:
         print """".join([e[1] * e[0] for e in elt])
</code></pre>

<p>My attempt to the problem:</p>

<ul>
<li>"""".join... uses join -method to empty text</li>
<li>e[1] * e[0] multiplies two subsequent values in the sequence, e</li>
<li>I am not sure what is e</li>
<li>I am not sure, what it means, when you have something before for -loop, like: <code>e[1] * e[0] for e in elt</code></li>
</ul>
"
501585,54964,2009-02-01T21:10:02Z,50,How can you use Python in Vim?,"<p>I waste a lot of time between Vim and Python. I find it too slow to manually copy-paste from Python to Vim and vice versa. A good broken example is:</p>

<blockquote>
  <p>%!python for i in xrange(25); print 6*i \n     </p>
</blockquote>

<p>How can you do such tweaks direcly in Vim?   <strong>[Solved]</strong></p>

<p><strong>[Clarification]</strong>  I need things to Vim, like printing sequences, arithmetics... - things I cannot do in Vim.</p>

<p><strong>[?]</strong> Can someone elaborate this point:
""your script can read from stdin to operate directly on the lines given <em>(., %, ...).</em>"" </p>

<p><strong>[Further Clarification]</strong></p>

<p>If I want to print 'Hello' to lines 4,5, 6 and 7, what is wrong:</p>

<blockquote>
  <p>:4-7!python -c ""print 'hello'""</p>
</blockquote>

<p>The dot . modifies the current line. Can I print on multiple lines 7, 32 and 99:</p>

<blockquote>
  <p>:7,32,99!python -c ""print 'hello'""</p>
</blockquote>

<p>Clearly not working. How?</p>
"
501597,34996,2009-02-01T21:18:01Z,8,How to distribute `.desktop` files and icons for a Python package in Gnome (with distutils or setuptools)?,"<p>Currently I'm using the auto-tools to build/install and package a project of mine, but I would really like to move to something that feels more ""pythonic"".</p>

<p>My project consists of two scripts, one module, two glade GUI descriptions, and two .desktop files.  It's currently a pure python project, though that's likely to change soon-ish.</p>

<p>Looking at setuptools I can easily see how to deal with everything except the .desktop files; they have to end up in a specific directory so that Gnome can find them.</p>

<p>Is using distuils/setuptools a good idea to begin with?</p>
"
501626,NA,2009-02-01T21:32:47Z,16,Both Python 2 and 3 in Emacs,"<p>I have been using Emacs to write Python 2 code. Now I have both Python 2.6 and 3.0 installed on my system, and I need to write Python 3 code as well.</p>

<p>Here is how the different versions are set up in /usr/bin:</p>

<pre><code>python -&gt; python2.6*
python2 -&gt; python2.6*
python2.6*

python3 -&gt; python3.0*
python3.0*
</code></pre>

<p>Is there any way to set this up so that Emacs uses the correct version of Python, depending on which language I am using? For instance, C-c C-c currently runs the buffer, but it always calls python2.6, even if I am writing Python 3 code.</p>
"
501817,NA,2009-02-01T23:19:44Z,-1,How can I execute Python code without Komodo -ide?,"<p>I do that without the IDE: </p>

<pre><code>$ ipython
$ edit file.py
$ :x (save and close)
</code></pre>

<p>It executes Python code, but not the one, where I use Pygame. It gives:</p>

<blockquote>
  <p>WARNING: Failure executing file:
  </p>
</blockquote>

<p>In the IDE, my code executes.</p>
"
501940,54964,2009-02-02T00:55:03Z,7,Simple simulations for Physics in Python?,"<p>I would like to know similar, concrete simulations, as the simulation about watering a field <a href=""http://stackoverflow.com/questions/494184/simulation-problem-with-mouse-in-pygame"">here</a>.</p>

<p>What is your favorite library/internet page for such simulations in Python?</p>

<p>I know little Simpy, Numpy and Pygame. I would like to get examples about them.</p>
"
501945,35070,2009-02-02T00:59:26Z,5,How to modularize a Python application,"<p>I've got a number of scripts that use common definitions. How do I split them in multiple files? Furthermore, the application can not be installed in any way in my scenario; it must be possible to have an arbitrary number of versions concurrently running and it must work without superuser rights. Solutions I've come up with are:</p>

<ul>
<li><b>Duplicate code</b> in every
script. Messy, and probably the worst
scheme.</li>
<li><b>Put all scripts and common
code in a single directory,</b> and
use <code>from . import</code> to load them.
The downside of this approach is that
I'd like to put my libraries in other
directory than the applications.</li>
<li><b>Put common
code in its own directory</b>, write a <code>__init__.py</code> that imports all submodules and finally use <code>from . import</code> to load them.
Keeps code organized, but it's a little bit of overhead to maintain <code>__init__.py</code> and qualify names.</li>
<li><b>Add the library directory to
<code>sys.path</code> and
<code>import</code>.</b> I tend to
this, but I'm not sure whether
fiddling with <code>sys.path</code>
is nice code.</li>
<li><b>Load using
<code>execfile</code></b>
(<code>exec</code> in Python 3).
Combines the advantages of the
previous two approaches: Only one
line per module needed, and I can use
a dedicated. On the other hand, this
evades the python module concept and
polutes the global namespace.</li>
<li><b>Write and install a module using
<code>distutils</code>.</b> This
installs the library for all python
scripts and needs superuser rights
and impacts other applications and is hence not applicable in my case.</li>
</ul>

<p>What is the best method?</p>
"
502282,1142,2009-02-02T05:38:09Z,5,Finding the workspace size (screen size less the taskbar) using GTK,"<p>How do you create a main window that fills the entire desktop <strong>without covering (or being covered by) the task bar</strong> and <strong>without being maximized</strong>? I can find the entire screen size with and set the main window accordingly with this:</p>

<pre><code>window = gtk.Window()
screen = window.get_screen()
window.resize(screen.get_width(), screen.get_height())
</code></pre>

<p>but the bottom of the window is covered by the task bar.</p>
"
502610,3355,2009-02-02T08:59:40Z,2,Running SimpleXMLRPCServer in separate thread and shutting down,"<p>I have a class that I wish to test via SimpleXMLRPCServer in python. The way I have my unit test set up is that I create a new thread, and start SimpleXMLRPCServer in that. Then I run all the test, and finally shut down.</p>

<p>This is my ServerThread:</p>

<pre><code>class ServerThread(Thread):
    running = True
    def run(self):
        self.server = #Creates and starts SimpleXMLRPCServer

        while (self.running):
            self.server.handle_request()

    def stop(self):
        self.running = False
        self.server.server_close()
</code></pre>

<p>The problem is, that calling ServerThread.stop(), followed by Thread.stop() and Thread.join() will not cause the thread to stop properly if it's already waiting for a request in handle_request. And since there doesn't seem to be any interrupt or timeout mechanisms here that I can use, I am at a loss for how I can cleanly shut down the server thread.</p>
"
502726,NA,2009-02-02T10:01:49Z,12,Converting date between DD/MM/YYYY and YYYY-MM-DD?,"<p>Using a Python script, I need to read a CVS file where dates are formated as DD/MM/YYYY, and convert them to YYYY-MM-DD before saving this into a SQLite database.</p>

<p>This almost works, but fails because I don't provide time:</p>

<pre><code>from datetime import datetime

lastconnection = datetime.strptime(""21/12/2008"", ""%Y-%m-%d"")

#ValueError: time data did not match format:  data=21/12/2008  fmt=%Y-%m-%d
print lastconnection
</code></pre>

<p>I assume there's a method in the datetime object to perform this conversion very easily, but I can't find an example of how to do it. Thank you.</p>
"
502916,42188,2009-02-02T11:35:52Z,41,Django: How to create a model dynamically just for testing,"<p>I have a Django app that requires a <code>settings</code> attribute in the form of:</p>

<pre><code>RELATED_MODELS = ('appname1.modelname1.attribute1',
                  'appname1.modelname2.attribute2', 
                  'appname2.modelname3.attribute3', ...)
</code></pre>

<p>Then hooks their post_save signal to update some other fixed model depending on the <code>attributeN</code> defined.</p>

<p>I would like to test this behaviour and tests should work even if this app is the only one in the project (except for its own dependencies, no other wrapper app need to be installed). How can I create and attach/register/activate mock models just for the test database? (or is it possible at all?)</p>

<p>Solutions that allow me to use test fixtures would be great.</p>
"
503148,9789,2009-02-02T13:11:09Z,4,How to parse nagios status.dat file?,"<p>I'd like to parse status.dat file for nagios3 and output as xml with a python script.
The xml part is the easy one but how do I go about parsing the file? Use multi line regex? 
It's possible the file will be large as many hosts and services are monitored, will loading the whole file in memory be wise?<br />
I only need to extract services that have critical state and host they belong to.</p>

<p>Any help and pointing in the right direction will be highly appreciated.</p>

<p><strong>LE</strong> Here's how the file looks:</p>

<pre><code>########################################
#          NAGIOS STATUS FILE
#
# THIS FILE IS AUTOMATICALLY GENERATED
# BY NAGIOS.  DO NOT MODIFY THIS FILE!
########################################

info {
    created=1233491098
    version=2.11
    }

program {
    modified_host_attributes=0
    modified_service_attributes=0
    nagios_pid=15015
    daemon_mode=1
    program_start=1233490393
    last_command_check=0
    last_log_rotation=0
    enable_notifications=1
    active_service_checks_enabled=1
    passive_service_checks_enabled=1
    active_host_checks_enabled=1
    passive_host_checks_enabled=1
    enable_event_handlers=1
    obsess_over_services=0
    obsess_over_hosts=0
    check_service_freshness=1
    check_host_freshness=0
    enable_flap_detection=0
    enable_failure_prediction=1
    process_performance_data=0
    global_host_event_handler=
    global_service_event_handler=
    total_external_command_buffer_slots=4096
    used_external_command_buffer_slots=0
    high_external_command_buffer_slots=0
    total_check_result_buffer_slots=4096
    used_check_result_buffer_slots=0
    high_check_result_buffer_slots=2
    }

host {
    host_name=localhost
    modified_attributes=0
    check_command=check-host-alive
    event_handler=
    has_been_checked=1
    should_be_scheduled=0
    check_execution_time=0.019
    check_latency=0.000
    check_type=0
    current_state=0
    last_hard_state=0
    plugin_output=PING OK - Packet loss = 0%, RTA = 3.57 ms
    performance_data=
    last_check=1233490883
    next_check=0
    current_attempt=1
    max_attempts=10
    state_type=1
    last_state_change=1233489475
    last_hard_state_change=1233489475
    last_time_up=1233490883
    last_time_down=0
    last_time_unreachable=0
    last_notification=0
    next_notification=0
    no_more_notifications=0
    current_notification_number=0
    notifications_enabled=1
    problem_has_been_acknowledged=0
    acknowledgement_type=0
    active_checks_enabled=1
    passive_checks_enabled=1
    event_handler_enabled=1
    flap_detection_enabled=1
    failure_prediction_enabled=1
    process_performance_data=1
    obsess_over_host=1
    last_update=1233491098
    is_flapping=0
    percent_state_change=0.00
    scheduled_downtime_depth=0
    }

service {
    host_name=gateway
    service_description=PING
    modified_attributes=0
    check_command=check_ping!100.0,20%!500.0,60%
    event_handler=
    has_been_checked=1
    should_be_scheduled=1
    check_execution_time=4.017
    check_latency=0.210
    check_type=0
    current_state=0
    last_hard_state=0
    current_attempt=1
    max_attempts=4
    state_type=1
    last_state_change=1233489432
    last_hard_state_change=1233489432
    last_time_ok=1233491078
    last_time_warning=0
    last_time_unknown=0
    last_time_critical=0
    plugin_output=PING OK - Packet loss = 0%, RTA = 2.98 ms
    performance_data=
    last_check=1233491078
    next_check=1233491378
    current_notification_number=0
    last_notification=0
    next_notification=0
    no_more_notifications=0
    notifications_enabled=1
    active_checks_enabled=1
    passive_checks_enabled=1
    event_handler_enabled=1
    problem_has_been_acknowledged=0
    acknowledgement_type=0
    flap_detection_enabled=1
    failure_prediction_enabled=1
    process_performance_data=1
    obsess_over_service=1
    last_update=1233491098
    is_flapping=0
    percent_state_change=0.00
    scheduled_downtime_depth=0
    }
</code></pre>

<p>It can have any number of hosts and a host can have any number of services.</p>
"
503295,NA,2009-02-02T14:02:55Z,1,Query distinct list of choices for Django form with App Engine Datastore,"<p>I've been trying to figure this out for hours across a couple of days, and can not get it to work. I've been everywhere. I'll continue trying to figure it out, but was hoping for a quicker solution. I'm using App Engine datastore + Django.</p>

<p>Using a query in a view and custom forms, I was able to get a list to the form but then I was not able to post. I have been trying to figure out how to dynamically add the choices as part of the Django form... I've tried various ways with no success. Help!</p>

<p>Below are the two models. I'd like to get a distinct list of address_id to show in the location field in InfoForm. This fields could (and maybe should) be named the same, but I thought it'd be easier if they were named different.</p>

<pre><code>class Info(db.Model):
    user = db.UserProperty()
    location = db.StringProperty()
    info = db.StringProperty()
    created = db.DateTimeProperty(auto_now_add=True)
    modified = db.DateTimeProperty(auto_now=True)

class Locations(db.Model):
    user = db.UserProperty()
    address_id = db.StringProperty()
    address = db.StringProperty()

class InfoForm(djangoforms.ModelForm):
    info = forms.ChoiceField(choices=INFO_CHOICES)
    location = forms.ChoiceField()
    class Meta:
            model = Info
            exclude = ['user','created','modified']
</code></pre>
"
503462,2908,2009-02-02T14:57:05Z,0,django facebook connect missing libs?,"<p>I'm trying to integrate some photo related functionality with my site and facebook. I checked out facebook connect and it seems like the way to go for this (since I don't want to make an app, just have users authenticate and then grab some content from facebook to integrate into our site)</p>

<p>First of all, if you think there is a better way to do this (infinite session maybe?) let me know.</p>

<p>Otherwise here is the problem I'm having... I downloaded <a href=""http://code.google.com/p/django-fbconnect/"" rel=""nofollow"">django-fbconnect</a> and installed it as an app (as per the readme.txt included in the svn) but python is complaining about a missing signals.py</p>

<pre><code>Error: No module named signals
</code></pre>

<p>which I assume should be fbconnect/signals.py because of this line of code:</p>

<pre><code>from fbconnect.signals import facebook_update
</code></pre>

<p>Anyway does anyone have experience with django-fbconnect? or any advice on getting the developer to update google code?</p>

<p>Thanks</p>

<p><strong>edit</strong>: Found this: ""<a href=""http://nyquistrate.com/django/facebook-connect/"" rel=""nofollow"">Integrating Facebook Connect with Django in 15 minutes</a>"" which uses middleware instead of the django-fbconnect app. I prefer the app because it's lighter and the code is clearer. Also, it sticks to the 'everything is an app' culture of django. but I guess I'll look into this other possibility</p>

<p><strong>edit 2</strong>: I contacted the original author of django-fbconnect, and he graciously updated the project with the missing file (he also answered on this post)</p>
"
504716,30529,2009-02-02T20:21:28Z,8,Why is IronPython faster than the Official Python Interpreter,"<p>According to this: </p>

<p><a href=""http://www.codeplex.com/IronPython/Wiki/View.aspx?title=IP20VsCPy25Perf&amp;referringTitle=IronPython%20Performance"">http://www.codeplex.com/IronPython/Wiki/View.aspx?title=IP20VsCPy25Perf&amp;referringTitle=IronPython%20Performance</a></p>

<p>IronPython (Python for .Net) is faster than regular Python (cPython) on the same machine.  Why is this?  I would think compiled C code would always be faster than the equivalent CLI bytecode.</p>
"
505230,61695,2009-02-02T22:28:40Z,28,Py2exe for Python 3.0,"<p>I am looking for a Python3.0 version of ""py2exe"". I tried running 2to3 on the source for py2exe but the code remained broken.</p>

<p>Any ideas?</p>
"
505559,658,2009-02-03T00:13:06Z,6,Closures in Python,"<p>I've been trying to learn Python, and while I'm enthusiastic about using closures in Python, I've been having trouble getting some code to work properly:</p>

<pre><code>def memoize(fn):
    def get(key):
        return (False,)

    def vset(key, value):
        global get
        oldget = get
        def newget(ky):
            if key==ky: return (True, value)
            return oldget(ky)
        get = newget

    def mfun(*args):
        cache = get(args)
        if (cache[0]): return cache[1]

        val = apply(fn, args)
        vset(args, val)
        return val

    return mfun

def fib(x):
    if x&lt;2: return x
    return fib(x-1)+fib(x-2)

def fibm(x):
    if x&lt;2: return x
    return fibm(x-1)+fibm(x-2)

fibm = memoize(fibm)
</code></pre>

<p>Basically, what this is supposed to do is use closures to maintain the memoized state of the function. I realize there are probably many faster, easier to read, and in general more 'Pythonic' ways to implement this; however, my goal is to understand exactly how closures work in Python, and how they differ from Lisp, so I'm not interested in alternative solutions, just why my code doesn't work and what I can do (if anything) to fix it.</p>

<p>The problem I'm running into is when I try to use <code>fibm</code> - Python insists that <code>get</code> isn't defined:</p>

<pre><code>Python 2.6.1 (r261:67515, Feb  1 2009, 11:39:55) 
[GCC 4.0.1 (Apple Inc. build 5488)] on darwin
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt; import memoize
&gt;&gt;&gt; memoize.fibm(35)
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
  File ""memoize.py"", line 14, in mfun
    cache = get(args)
NameError: global name 'get' is not defined
&gt;&gt;&gt;
</code></pre>

<p>Seeing as I'm new to Python, I don't know if I've done something wrong, or if this is just a limitation of the language. I'm hoping it's the former. :-)</p>
"
505703,46914,2009-02-03T01:13:26Z,4,How to chain views in Django?,"<p>I'm implementing <a href=""http://www.b-list.org/about/"" rel=""nofollow"">James Bennett</a>'s excellent <a href=""http://code.google.com/p/django-contact-form/"" rel=""nofollow"">django-contact-form</a> but have hit a snag.  My contact page not only contains the form, but also additional flat page information.  </p>

<p>Without rewriting the existing view the contact form uses, I'd like to be able to wrap, or chain, the views.  This way I could inject some additional information via the context so that both the form and the flat page data could be rendered within the same template.</p>

<p>I've heard it mentioned that this is possible, but I can't seem to figure out how to make it work.  I've created my own wrapper view, called the contact form view, and attempted to inspect the HttpResponse object for an attribute I can append to, but I can't seem to figure out which, if any, it is.</p>

<p><strong>EDIT:</strong> James commented that the latest code can new be found <a href=""http://bitbucket.org/ubernostrum/django-contact-form/overview/"" rel=""nofollow"">here</a> at BitBucket.</p>
"
505925,40529,2009-02-03T03:27:53Z,5,Extracting data from MS Word,"<p>I am looking for a way to extract / scrape data from Word files into a database.  Our corporate procedures have Minutes of Meetings with clients documented in MS Word files, mostly due to history and inertia.</p>

<p>I want to be able to pull the action items from these meeting minutes into a database so that we can access them from a web-interface, turn them into tasks and update them as they are completed.</p>

<p>Which is the best way to do this:</p>

<ol>
<li>VBA macro from inside Word to create CSV and then upload to the DB?</li>
<li>VBA macro in Word with connection to DB (how does one connect to MySQL from VBA?)</li>
<li>Python script via win32com then upload to DB?</li>
</ol>

<p>The last one is attractive to me as the web-interface is being built with Django, but I've never used win32com or tried scripting Word from python.</p>

<p><strong>EDIT:</strong> I've started extracting the text with VBA because it makes it a little easier to deal with the Word Object Model.  I am having a problem though - all the text is in Tables, and when I pull the strings out of the CELLS I want, I get a strange little box character at the end of each string.  My code looks like:</p>

<pre><code>sFile = ""D:\temp\output.txt""
fnum = FreeFile
Open sFile For Output As #fnum

num_rows = Application.ActiveDocument.Tables(2).Rows.Count

For n = 1 To num_rows
    Descr = Application.ActiveDocument.Tables(2).Cell(n, 2).Range.Text
    Assign = Application.ActiveDocument.Tables(2).Cell(n, 3).Range.Text
    Target = Application.ActiveDocument.Tables(2).Cell(n, 4).Range.Text
    If Target = """" Then
        ExportText = """"
    Else
        ExportText = Descr &amp; Chr(44) &amp; Assign &amp; Chr(44) &amp; _
            Target &amp; Chr(13) &amp; Chr(10)
        Print #fnum, ExportText
    End If
Next n

Close #fnum
</code></pre>

<p>What's up with the little control character box?  Is some kind of character code coming across from Word?</p>
"
506594,NA,2009-02-03T10:12:30Z,2,Is there a widely used STOMP adapter for Twisted?,"<p>I checked out stomper and it didn't look complete. (I'm very new to Python) Is anybody out there using stomper in a production environment?</p>

<p>If not, I guess I'll have to roll out my own Twisted Stomp adapter.</p>

<p>Thanks in advance!</p>
"
507006,NA,2009-02-03T13:09:04Z,1,Problem using django mptt,"<p>I am having problem implementing django mptt.</p>

<p>Here is my model:</p>

<pre><code>   class Company(models.Model):
       name = models.CharField( max_length=100)
       parent = models.ForeignKey('self', null=True, blank=True, related_name='children')

   mptt.register(Company, order_insertion_by=['name'])
</code></pre>

<p>And </p>

<pre><code>class Financials(models.Model):
    company = models.ForeignKey(Company, related_name=""financials"")
    year = models.IntegerField()
    revenue = models.DecimalField(max_digits = 10, decimal_places = 2)
</code></pre>

<p>So what I am looking at is how to add Financial as an child to Company.
I tried <code>mptt.register(Financials, parent = Company)</code> which of course give me error.</p>

<p>so mytree structure will be:</p>

<pre><code>company1
....................&gt; Financial1
--------------------&gt; Financial 2

company2
--------------------&gt;Financial 3
</code></pre>

<p>Thanks</p>
"
507405,55366,2009-02-03T14:59:17Z,10,Python xml minidom. generate <text>Some text</text> element,"<p>I have the following code.</p>

<pre><code>from xml.dom.minidom import Document

doc = Document()

root = doc.createElement('root')
doc.appendChild(root)
main = doc.createElement('Text')
root.appendChild(main)

text = doc.createTextNode('Some text here')
main.appendChild(text)

print doc.toprettyxml(indent='\t')
</code></pre>

<p>The result is:</p>

<pre><code>&lt;?xml version=""1.0"" ?&gt;
&lt;root&gt;
    &lt;Text&gt;
    	Some text here
    &lt;/Text&gt;
&lt;/root&gt;
</code></pre>

<p>This is all fine and dandy, but what if I want the output to look like this?</p>

<pre><code>&lt;?xml version=""1.0"" ?&gt;
&lt;root&gt;
    &lt;Text&gt;Some text here&lt;/Text&gt;
&lt;/root&gt;
</code></pre>

<p>Can this easily be done?</p>

<p>Orjanp...</p>
"
507425,NA,2009-02-03T15:02:03Z,2,"Python includes, module scope issue","<p>I'm working on my first significant Python project and I'm having trouble with scope issues and executing code in included files. Previously my experience is with PHP. </p>

<p>What I would like to do is have one single file that sets up a number of configuration variables, which would then be used throughout the code. Also, I want to make certain functions and classes available globally. For example, the main file would include a single other file, and that file would load a bunch of commonly used functions (each in its own file) and a configuration file. Within those loaded files, I also want to be able to access the functions and configuration variables. What I don't want to do, is to have to put the entire routine at the beginning of each (included) file to include all of the rest. Also, these included files are in various sub-directories, which is making it much harder to import them (especially if I have to re-import in every single file).</p>

<p>Anyway I'm looking for general advice on the best way to structure the code to achieve what I want.</p>

<p>Thanks!</p>
"
507927,34537,2009-02-03T16:50:24Z,22,How do i install pyCurl?,"<p>I am VERY new to python. I used libcurl with no problems and used pyCurl once in the past. Now i want to set it up on my machine and dev. However i have no idea how to do it. I rather not DL libcirl files and compile that along with pycurl, i want to know the simplest method. I have libcurl installed on my machine.</p>

<p>i'm on windows, i tried DLing the sources and use pycurl setup script, i had no luck.</p>
"
508144,62048,2009-02-03T17:42:37Z,4,Fast PDF splitter library,"<p>pyPdf is a great library to split, merge PDF files. 
I'm using it to split pdf documents into 1 page documents. pyPdf is pure python and spends quite a lot of time in the _sweepIndirectReferences() method of the PdfFileWriter object when saving the extracted page. I need something with better performance. I've tried using multi-threading but since most of the time is spent in python code there was no speed gain because of the GIL (it actually ran slower).</p>

<p>Is there any library written in c that provides the same functionality? or does anyone have a good idea on how to improve performance (other than spawning a new process for each pdf file that I want to split)</p>

<p>Thank you in advance.</p>

<p>Follow up. 
Links to a couple of command line solutions, that can prove sometimes faster than pyPDF: </p>

<ul>
<li><a href=""http://multivalent.sourceforge.net/Tools/pdf/Split.html"" rel=""nofollow"">http://multivalent.sourceforge.net/Tools/pdf/Split.html</a></li>
<li><a href=""http://www.linuxsolutions.fr/how-to-extract-pages-from-a-pdf/"" rel=""nofollow"">http://www.linuxsolutions.fr/how-to-extract-pages-from-a-pdf/</a></li>
</ul>

<p>I modified pyPDF PdfWriter class to keep track of how much time has been spent on the _sweepIndirectReferences() method. If it has been too long (right now I use the magical value of 3 seconds) then I revert to using ghostscript by making a call to it from python. </p>

<p>Thanks for all your answers. (codelogic's xpdf reference is the one that made me look for a different approach)</p>
"
508183,34537,2009-02-03T17:53:30Z,1,get site name from a URL in python,"<p>I am new to Python and it seems to have a lot of nice functions that I don't know about. What function can I use to get the root site name? For example, how would I get <em>faqs.org</em> if I gave the function the URL ""<a href=""http://ttp://www.faqs.org/docs/diveintopython/kgp_commandline.html"" rel=""nofollow"">http://www.faqs.org/docs/diveintopython/kgp_commandline.html</a>""?</p>
"
508277,36330,2009-02-03T18:18:07Z,23,Is there a good dependency analysis tool for Python?,"<p>Dependency analysis programs help us organize code by controlling the dependencies between modules in our code. When one module is a circular dependency of another module, it is a clue to find a way to turn that into a unidirectional dependency or merge two modules into one module.</p>

<p>What is the best dependency analysis tool for Python code?</p>
"
508609,12828,2009-02-03T19:45:25Z,1,Why does Django only serve files containing a space?,"<p>I'm writing a basic Django application. For testing / development purposes I'm trying to serve the static content of the website using Django's development server as per <a href=""http://docs.djangoproject.com/en/dev/howto/static-files/#howto-static-files"" rel=""nofollow"">http://docs.djangoproject.com/en/dev/howto/static-files/#howto-static-files</a>.</p>

<p>My urls.py contains:</p>

<pre><code>    (r'^admin/(.*)', admin.site.root),

    (r'^(?P&lt;page_name&gt;\S*)$', 'Blah.content.views.index'),

    (r'^static/(?P&lt;path&gt;.*)$', 'django.views.static.serve',
        {'document_root': 'C:/Users/My User/workspace/Blah/media',
         'show_indexes': True})
</code></pre>

<p>However, when I try to access a file such as <a href=""http://localhost:8000/static/images/Logo.jpg"" rel=""nofollow"">http://localhost:8000/static/images/Logo.jpg</a> Django gives me a 404 error claiming that ""No Page matches the given query.""</p>

<p>When I try to access a file such as <a href=""http://localhost:8000/static/images/Blah%20Logo.jpg"" rel=""nofollow"">http://localhost:8000/static/images/Blah%20Logo.jpg</a> it serves the file!</p>

<p>What's going on?</p>
"
508627,34537,2009-02-03T19:49:59Z,8,AUTO_INCREMENT in sqlite problem with python,"<p>I am using sqlite with python 2.5. I get a sqlite error with the syntax below. I looked around and saw AUTOINCREMENT on this page <a href=""http://www.sqlite.org/syntaxdiagrams.html#column-constraint"">http://www.sqlite.org/syntaxdiagrams.html#column-constraint</a> but that did not work either. Without AUTO_INCREMENT my table can be created.</p>

<pre><code>An error occurred: near ""AUTO_INCREMENT"": syntax error 
CREATE TABLE fileInfo
(
fileId int NOT NULL AUTO_INCREMENT,
name varchar(255),
status int NOT NULL,
PRIMARY KEY (fileId)
);
</code></pre>
"
508657,56376,2009-02-03T19:54:37Z,8,Multidimensional array in Python,"<p>I have a little Java problem I want to translate to Python. Therefor I need a multidimensional array. In Java it looks like:</p>

<pre><code>double dArray[][][] = new double[x.length()+1][y.length()+1][x.length()+y.length()+3];
dArray[0][0][0] = 0;
dArray[0][0][1] = POSITIVE_INFINITY;
</code></pre>

<p>Further values will be created bei loops and written into the array.</p>

<p>How do I instantiate the array?</p>

<p>PS: There is no matrix multiplication involved...</p>
"
508727,32933,2009-02-03T20:12:06Z,2,Python time to age,"<p>I'm trying to convert a date string into an age.</p>

<p>The string is like: ""Mon, 17 Nov 2008 01:45:32 +0200"" and I need to work out how many days old it is.</p>

<p>I have sucessfully converted the date using:</p>

<pre><code>&gt;&gt;&gt; time.strptime(""Mon, 17 Nov 2008 01:45:32 +0200"",""%a, %d %b %Y %H:%M:%S +0200"")
(2008, 11, 17, 1, 45, 32, 0, 322, -1)
</code></pre>

<p>For some reason %z gives me an error for the +0200 but it doesn't matter that much.</p>

<p>I can get the current time using:</p>

<pre><code>&gt;&gt;&gt; time.localtime()
(2009, 2, 3, 19, 55, 32, 1, 34, 0)
</code></pre>

<p>but how can I subtract one from the other without going though each item in the list and doing it manually?</p>
"
508817,46411,2009-02-03T20:36:21Z,9,A replacement for python's httplib?,"<p>I have a python client which pushes a great deal of data through the standard library's httlib. Users are complainging that the application is slow. I suspect that this may be partly due to the HTTP client I am using.</p>

<p>Could I improve performance by replacing httplib with something else? </p>

<p>I've seen that twisted offers a HTTP client. It seems to be very basic compared to their other protocol offerings. </p>

<p>PyCurl might be a valid alternative, however it's use seems to be very un-pythonic, on the other hand if it's performance is really good then I can put up with a bit of un-pythonic code.</p>

<p>So if you have experience of better HTTP client libraries of python please tell me about it. I'd like to know what you thought of the performance relative to httplib and what you thought of the quality of implementation.</p>

<p>UPDATE 0: My use of httplib is actually very limited - the replacement needs to do the following:</p>

<pre><code>conn = httplib.HTTPConnection(host, port)
conn.request(""POST"", url, params, headers)
compressedstream = StringIO.StringIO(conn.getresponse().read())
</code></pre>

<p>That's all: No proxies, redirection or any fancy stuff. It's plain-old HTTP. I just need to be able to do it as fast as possible.</p>

<p>UPDATE 1: I'm stuck with Python2.4 and I'm working on Windows 32. Please do not tell me about better ways to use httplib - I want to know about some of the alternatives to httplib.</p>
"
508983,62142,2009-02-03T21:31:53Z,11,How to overwrite some bytes in the middle of a file with Python?,"<p>I'd like to be able to overwrite some bytes at a given offset in a file using Python.</p>

<p>My attempts have failed miserably and resulted in:</p>

<ul>
<li>overwriting the bytes at the offset but also truncating the file just after (file mode = ""w"" or ""w+"")  </li>
<li>appending the bytes at the end of the file (file mode = ""a"" or ""a+"")    </li>
</ul>

<p>Is it possible to achieve this with Python in a portable way? </p>
"
509211,24039,2009-02-03T22:31:02Z,1331,Explain Python's slice notation,"<p>I need a good explanation (references are a plus) on Python's slice notation. </p>

<p>To me, this notation needs a bit of picking up. </p>

<p>It looks extremely powerful, but I haven't quite got my head around it.</p>
"
509446,34537,2009-02-03T23:23:57Z,3,python reading lines w/o \n?,"<p>Would this work on all platforms? i know windows does \r\n, and remember hearing mac does \r while linux did \n. I ran this code on windows so it seems fine, but do any of you know if its cross platform?</p>

<pre><code>while 1:
    line = f.readline()
    if line == """":
        break
    line = line[:-1]
    print ""\"""" + line + ""\""""
</code></pre>
"
509449,38749,2009-02-03T23:25:04Z,2,Python M2Crypto - generating a DSA key pair and separating public/private components,"<p>Could anybody explain what is the cause of the following:</p>

<pre><code>&gt;&gt;&gt; from M2Crypto import DSA, BIO
&gt;&gt;&gt; dsa = DSA.gen_params(1024)
..+........+++++++++++++++++++++++++++++++++++++++++++++++++++*
............+.+.+..+.........+.............+.....................+.
...+.............+...........+.........................................
+.........+................+..........+......+..+.+...+..........+..+..
..+...+......+....+.............+.................+.......+.........+..
....+......+.+..+..........+........+.+...+..+...............+.........
..+.....+........+..........+++++++++++++++++++++++++++++++++++++++++++
++++++++*
&gt;&gt;&gt; mem = BIO.MemoryBuffer()
&gt;&gt;&gt; dsa.save_key_bio(mem, cipher=None)
1
&gt;&gt;&gt; dsa.save_pub_key_bio(mem)
0
&gt;&gt;&gt; print mem.getvalue()
-----BEGIN DSA PRIVATE KEY-----
MIIBIgIBAAKBgQDPGRFSTqqx8vet5kaW5m99A83REotTcX9HOv+zrqMxQpaTlinS
MDz49I4psDPJ+bWH7vySEdOYO2JGUj6kYZdz/ZwyNjphWNjQkaUrmfaVLzS3PHpW
aMrPEweLesf/PT4KXm2HaDbaW/g2Ds5h+Zlq9LDKcN2vfvyeiTCmf1esyQIVAO9I
ippU4PIdvJVO9HQRkqrD2bxPAoGBAIwVgM7dgNVwihJva6qeeh7ypy3ESNB9k8nY
fOnES+SqZGQbkPrJIusRCJNKERiMATJXNRMfBeWD8htNRezbgtr0OpuYSBurAQjp
hKKVI3DHSv7XT49BQ3tdJww8lQfkOhHOfFTG6U1dJhWdggp0WN3EjYlt77agRsjR
4t5sD1f3
-----END DSA PRIVATE KEY-----
-----BEGIN PUBLIC KEY-----
-----END PUBLIC KEY-----
&gt;&gt;&gt;
</code></pre>

<p>clearly I'm missing something. M2Crypto nonexistant docs don't help.</p>
"
509710,4593,2009-02-04T01:05:46Z,-2,Python quotient vs remainder,"<p>The python 2.6 docs state that <code>x % y</code> is defined as the remainder of x / y (<a href=""http://docs.python.org/library/stdtypes.html#numeric-types-int-float-long-complex"" rel=""nofollow"">http://docs.python.org/library/stdtypes.html#numeric-types-int-float-long-complex</a>). I am not clear on what is really occurring though, as:</p>

<pre><code>for i in range(2, 11):
    print 1.0 % i
</code></pre>

<p>prints ""1.0"" ten times, rather than ""0.5, 0.333333, 0.25"" etc. as I expected (1/2 = 0.5, etc). </p>
"
509742,34537,2009-02-04T01:24:43Z,4,Change directory to the directory of a Python script,"<p>How do i change directory to the directory with my python script in? So far I figured out I should use <code>os.chdir</code> and <code>sys.argv[0]</code>. I'm sure there is a better way then to write my own function to parse argv[0].</p>
"
509994,51532,2009-02-04T03:49:20Z,6,Best way to write a Python function that integrates a gaussian?,"<p>In attempting to use scipy's quad method to integrate a gaussian (lets say there's a gaussian method named gauss), I was having problems passing needed parameters to gauss and leaving quad to do the integration over the correct variable. Does anyone have a good example of how to use quad w/ a multidimensional function?</p>

<p>But this led me to a more grand question about the best way to integrate a gaussian in general. I didn't find a gaussian integrate in scipy (to my surprise). My plan was to write a simple gaussian function and pass it to quad (or maybe now a fixed width integrator). What would you do?</p>

<p>Edit: Fixed-width meaning something like trapz that uses a fixed dx to calculate areas under a curve.</p>

<p>What I've come to so far is a method make___gauss that returns a lambda function that can then go into quad. This way I can make a normal function with the average and variance I need before integrating.</p>

<pre><code>def make_gauss(N, sigma, mu):
    return (lambda x: N/(sigma * (2*numpy.pi)**.5) *
            numpy.e ** (-(x-mu)**2/(2 * sigma**2)))

quad(make_gauss(N=10, sigma=2, mu=0), -inf, inf)
</code></pre>

<p>When I tried passing a general gaussian function (that needs to be called with x, N, mu, and sigma) and filling in some of the values using quad like</p>

<pre><code>quad(gen_gauss, -inf, inf, (10,2,0))
</code></pre>

<p>the parameters 10, 2, and 0 did NOT necessarily match N=10, sigma=2, mu=0, which prompted the more extended definition.</p>

<p>The erf(z) in scipy.special would require me to define exactly what t is initially, but it nice to know it is there.</p>
"
510085,25077,2009-02-04T04:39:02Z,4,How to call a python function from a foreign language thread (C++),"<p>I am developing a program that use DirectShow to grab audio data from
media files. DirectShow use thread to pass audio data to the callback
function in my program, and I let that callback function call another
function in Python.</p>

<p>I use Boost.Python to wrapper my library, the callback function :</p>

<pre><code>class PythonCallback {
private:
    object m_Function;
public:
    PythonCallback(object obj)
        : m_Function(obj)
    {}

    void operator() (double time, const AudioData &amp;data) {
        // Call the callback function in python
        m_Function(time, data);
    }

};
</code></pre>

<p>Here comes the problem, a thread of DirectShow calls my
PythonCallback, namely, call the function in Python. Once it calls, my
program just crash. I found this should be threading problem. Then I
found this document:</p>

<p><a href=""http://docs.python.org/c-api/init.html"" rel=""nofollow"">http://docs.python.org/c-api/init.html</a></p>

<p>It seems that my program can't call to Python's function from thread
directly, because there is Global Interpreter Lock. The python's GIL
is so complex, I have no idea how it works. I'm sorry, what I can do
is to ask. My question is. What should I do before and after I call a
Python function from threads?</p>

<p>It may looks like this.</p>

<pre><code>void operator() (double time, const AudioData &amp;data) {
    // acquire lock
    m_Function(time, data);
    // release lock
}
</code></pre>

<p>Thanks.
Victor Lin. </p>
"
510135,34537,2009-02-04T05:06:34Z,3,"creating blank field and receving the INTEGER PRIMARY KEY with sqlite, python","<p>I am using sqlite with python. When i insert into table A i need to feed it an ID from table B. So what i wanted to do is insert default data into B, grab the id (which is auto increment) and use it in table A. Whats the best way receive the key from the table i just inserted into?</p>
"
510339,NA,2009-02-04T07:01:32Z,1,How do I use django mptt?,"<p>I have a model:</p>

<pre><code>class Company(models.Model):
    name = models.CharField( max_length=100)
    parent = models.ForeignKey('self', null=True, blank=True, related_name='children')
mptt.register(Company, order_insertion_by=['name'])
</code></pre>

<p>and </p>

<pre><code>class Financials(models.Model):
    year = models.IntegerField()
    revenue = models.DecimalField(max_digits = 10, decimal_places = 2)
</code></pre>

<p>So how can I add <code>Financials</code> as a child to <code>Company</code> in the mptt tree structure?</p>
"
510348,46646,2009-02-04T07:04:09Z,1061,How can I make a time delay in Python?,"<p>I would like to know how to put a time delay in a Python script.</p>
"
510357,49701,2009-02-04T07:08:03Z,157,Python read a single character from the user,"<p>Is there a way of reading one single character from the user input? For instance, they press one key at the terminal and it is returned (sort of like <code>getch()</code>). I know there's a function in Windows for it, but I'd like something that is cross-platform.</p>
"
510406,NA,2009-02-04T07:32:51Z,34,Is there a way to get the current ref count of an object in Python?,"<p>Is there a way to get the current ref count of an object in Python?</p>
"
510443,62307,2009-02-04T07:52:50Z,2,Using Python Ctypes for ssdeep's fuzzy.dll but receive error,"<p>I am trying to use Python and ctypes to use the <code>fuzzy.dll</code> from ssdeep. So far everything I have tried fails with an access violation error. Here is what I do after changing to the proper directory which contains the <code>fuzzy.dll</code> and <code>fuzzy.def</code> files:</p>

<pre><code>&gt;&gt;&gt; import os,sys
&gt;&gt;&gt; from ctypes import *
&gt;&gt;&gt; fn = create_string_buffer(os.path.abspath(""fuzzy.def""))
&gt;&gt;&gt; fuzz = windll.fuzzy
&gt;&gt;&gt; chash = c_char_p(512)
&gt;&gt;&gt; hstat = fuzz.fuzzy_hash_filename(fn,chash)
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
WindowsError: exception: access violation writing 0x00000200
&gt;&gt;&gt;
</code></pre>

<p>From what I understand, I have passed the proper <code>c_types</code>.  From <code>fuzzy.h</code>:</p>

<pre><code>extern int fuzzy_hash_filename(char * filename, char * result)
</code></pre>

<p>I just cannot get past that access violation.</p>
"
510751,62343,2009-02-04T10:07:18Z,4,Spawn subprocess that expects console input without blocking?,"<p>I am trying to do a CVS login from Python by calling the cvs.exe process.
When calling cvs.exe by hand, it prints a message to the console and then waits for the user to input the password. </p>

<p>When calling it with subprocess.Popen, I've noticed that the call blocks. The code is </p>

<pre><code>subprocess.Popen(cvscmd, shell = True, stdin = subprocess.PIPE, stdout = subprocess.PIPE,
    stderr = subprocess.PIPE)
</code></pre>

<p>I assume that it blocks because it's waiting for input, but my expectation was that calling Popen would return immediately and then I could call subprocess.communicate() to input the actual password. How can I achieve this behaviour and avoid blocking on Popen?</p>

<p>OS: Windows XP<br />
Python: 2.6<br />
cvs.exe: 1.11</p>
"
510821,43662,2009-02-04T10:29:14Z,12,How to write a functional test for a DBUS service written in Python?,"<p>(Title was: ""How to write a unit test for a DBUS service written in Python?"")</p>

<p>I've started to write a DBUS service using dbus-python, but I'm having trouble writing a test case for it.</p>

<p>Here is an example of the test I am trying to create. Notice that I have put a GLib event loop in the setUp(), this is where the problem hits:</p>

<pre><code>import unittest

import gobject
import dbus
import dbus.service
import dbus.glib

class MyDBUSService(dbus.service.Object):
    def __init__(self):
    	bus_name = dbus.service.BusName('test.helloservice', bus = dbus.SessionBus())
    	dbus.service.Object.__init__(self, bus_name, '/test/helloservice')

    @dbus.service.method('test.helloservice')
    def hello(self):
    	return ""Hello World!""


class BaseTestCase(unittest.TestCase):

    def setUp(self):
    	myservice = MyDBUSService()
    	loop = gobject.MainLoop()
    	loop.run()
    	# === Test blocks here ===

    def testHelloService(self):
    	bus = dbus.SessionBus()
    	helloservice = bus.get_object('test.helloservice', '/test/helloservice')
    	hello = helloservice.get_dbus_method('hello', 'test.helloservice')
    	assert hello() == ""Hello World!""

if __name__ == '__main__':
    unittest.main()
</code></pre>

<p>My problem is that the DBUS implementation requires you to start an event loop so that it can start dispatching events. The common approach is to use GLib's gobject.MainLoop().start() (although I'm not married to this approach, if someone has a better suggestion). If you don't start an event loop, the service still blocks, and you also cannot query it.</p>

<p>If I start my service in the test, the event loop blocks the test from completing. I know the service is working because I can query the service externally using the qdbus tool, but I can't automate this inside the test that starts it.</p>

<p>I'm considering doing some kind of process forking inside the test to handle this, but I was hoping someone might have a neater solution, or at least a good starting place for how I would write a test like this.</p>
"
510972,18909,2009-02-04T11:37:48Z,689,Getting the class name of an instance in Python,"<p>How do I find out a name of class that created an instance of an object in Python if the function I am doing this from is the base class of which the class of the instance has been derived?</p>

<p>Was thinking maybe <a href=""https://docs.python.org/2/library/inspect.html"">the inspect module</a> might have helped me out here, but it doesn't seem to give me what I want. And short of parsing the <code>__class__</code> member, I'm not sure how to get at this information.</p>
"
511011,11522,2009-02-04T11:48:54Z,2,How can I tell python which version of libmysqlclient.so to use?,"<p>I'm running a python script on a shared hosting server which until this morning had MySQL version 4. Now it has version 5. My python script can no longer connect to MySQL, as it can't find libmysqlclient_r.so.14:</p>

<pre><code>$ python my_script.py
Traceback (most recent call last):
File ""my_script.py"", line 6, in ?
import MySQLdb
 File ""/home/lib/python2.4/site-packages/PIL-1.1.6-py2.4-linux-i686.egg/__init__.py"", line 19, in ?

 File ""build/bdist.linux-i686/egg/_mysql.py"", line 7, in ?
 File ""build/bdist.linux-i686/egg/_mysql.py"", line 6, in __bootstrap__
ImportError: libmysqlclient_r.so.14: cannot open shared object file: No such file or directory
</code></pre>

<p>There are various other versions of libmysqlclient in /usr/lib:</p>

<pre><code>/usr/lib/libmysqlclient.so.15
/usr/lib/libmysqlclient.so.14
/usr/lib/mysql/libmysqlclient.la
/usr/lib/mysql/libmysqlclient.so
/usr/lib/mysql/libmysqlclient_r.so
/usr/lib/mysql/libmysqlclient_r.a
/usr/lib/mysql/libmysqlclient_r.la
/usr/lib/mysql/libmysqlclient.a
/usr/lib/libmysqlclient.so
/usr/lib/libmysqlclient_r.so
/usr/lib/libmysqlclient_r.so.15
/usr/lib/libmysqlclient_r.so.15.0.0
/usr/lib/libmysqlclient.so.15.0.0
</code></pre>

<p>So my question is this: how can I tell python (version 2.4.3) which version of libmysqlclient to use?</p>
"
511204,46646,2009-02-04T12:52:14Z,15,How to print a string without including '\n' in Python,"<p>Suppose my string is:</p>

<pre><code>' Hai Hello\nGood eve\n'
</code></pre>

<p>How do I eliminate the <code>'\n'</code> in between and make a string print like :</p>

<pre><code> Hai Hello Good eve 
</code></pre>

<p>?</p>
"
511291,NA,2009-02-04T13:15:59Z,13,Django Installed Apps Location,"<p>I am an experienced PHP programmer using Django for the first time, and I think it is incredible!</p>

<p>I have a project that has a lot of apps, so I wanted to group them in an apps folder.</p>

<p>So the structure of the project is:</p>

<pre><code>/project/
/project/apps/
/project/apps/app1/
/project/apps/app2
</code></pre>

<p>Then in Django settings I have put this:</p>

<pre><code>INSTALLED_APPS = (
    'project.apps.app1',
    'project.apps.app2',
)
</code></pre>

<p>This does not seem to work?</p>

<p>Any ideas on how you can put all your apps into a seprate folder and not in the project root?</p>

<p>Many thanks.</p>
"
511412,4702,2009-02-04T13:42:04Z,7,Combined Python & Ruby extension module,"<p>I have a C extension module for Python and I want to make it available to Rubyists.</p>

<p>The source has a number of C modules, with only one being Python-dependent. The rest depend only on each other and the standard library. I can build it with <code>python setup.py build</code> in the usual way.</p>

<p>I've been experimenting with adding Ruby support using <code>newgem</code> and I can build a version of the extension with <code>rake gem</code>. However, the combined source has an ugly directory layout (mixing Gem-style and Setuptools-style structures) and the build process is a kludge.</p>

<p>I can't just keep all the sources in the same directory because <code>mkmf</code> automatically picks up the Python-dependent module and tries to build that, and users shouldn't have to install Python to compile a module that won't be used. My current hack is for <code>extconf.rb</code> to copy the Python-independent source-files into the same directory as the Ruby-dependent extension module.</p>

<p>Is there a saner way to make the code available to both languages? Should I just duplicate the Python-independent code in a separate Gem? Should I release the independent code as a separate lib built with autotools? Is there a version of <code>mkmf</code> that can skip the unwanted module?</p>
"
512036,60531,2009-02-04T16:10:14Z,4,Why doesn't PyRun_String evaluate bool literals?,"<p>I need to evaluate a Python expression from C++. This code seems to work:</p>

<pre><code>PyObject * dict = PyDict_New();
PyObject * val = PyRun_String(expression, Py_eval_input, dict, 0);
Py_DECREF(dict);
</code></pre>

<p>Unfortunately, it fails horribly if expression is ""True"" of ""False"" (that is, val is 0 and PyErr_Occurred() returns true). What am I doing wrong? Shouldn't they evaluate to Py_True and Py_False respectively?</p>
"
512173,46914,2009-02-04T16:41:12Z,32,How to copy a directory and its contents to an existing location using Python?,"<p>I'm trying to copy a directory and all its contents to a path that already exists.  The problem is, between the os module and the shutil module, there doesn't seem to be a way to do this.  the <code>shutil.copytree()</code> function expects that the destination path not exist beforehand.</p>

<p>The exact result I'm looking for is to copy an entire folder structure on top of another, overwriting silently on any duplicates found.  Before I jump in and start writing my own function to do this I thought I'd ask if anyone knows of an existing recipe or snippet that does this.</p>
"
512499,15649,2009-02-04T17:45:28Z,2,How to access templates in Python?,"<p>Sometimes, for a program with a lot of data, it is common to place the data in an external file. An example is a script that produces an HTML report, using an external file to hold a template.</p>

<p>In Java, the most recommended way to retrieve a resource of the program is to use <code>getClass().getClassLoader().getResource()</code> or <code>getClass().getClassLoader().getResourceAsStream()</code> for a stream.</p>

<p>The advantage is that this is independent of the file system. Also, it works whether the classes are in the file system or the application is distributed as a Jar file.</p>

<p>How do you achieve the same in Python ? What if you're using <a href=""http://www.py2exe.org/"" rel=""nofollow"">py2exe</a> or <a href=""http://wiki.python.org/moin/Freeze"" rel=""nofollow"">Freeze</a> to generate a stand-alone running app, as seen in <a href=""http://stackoverflow.com/questions/331377/how-to-pack-python-libs-im-using-so-i-can-distribute-them-with-my-app-and-have-a"">this question</a> ?</p>
"
512600,31610,2009-02-04T18:15:16Z,10,gedit plugin development in python,"<p>Does anyone know where information about writing gedit plugins can be found ? I'm interested in writing them in Python. I know of <a href=""http://live.gnome.org/Gedit/PythonPluginHowTo"">Gedit/PythonPluginHowTo</a>
 , but it isn't very good . Besides the code of writing a plugin that does nothing , I can't seem to find more information . I started to look at other people's code , but I think this shouldn't be the natural way of writing plugins . Can someone help ?</p>
"
512893,12855,2009-02-04T19:25:03Z,4,memory use in large data-structures manipulation/processing,"<p>I have a number of large (~100 Mb) files which I'm regularly processing. While I'm trying to delete unneeded data structures during processing, memory consumption is a bit too high. I was wondering if there is a way to efficiently manipulate large data, e.g.:</p>

<pre><code>def read(self, filename):
    fc = read_100_mb_file(filename)
    self.process(fc)
def process(self, content):
    # do some processing of file content
</code></pre>

<p>Is there a duplication of data structures? Isn't it more memory efficient to use a class-wide attribute like self.fc?</p>

<p>When should I use garbage collection? I know about the gc module, but do I call it after I <code>del fc</code> for example?</p>

<p><strong>update</strong><br>
p.s. 100 Mb is not a problem in itself. but float conversion, further processing add significantly more to both working set and virtual size (I'm on Windows).</p>
"
513023,16363,2009-02-04T20:01:09Z,0,Invoking Wine From Apache,"<p>I have Apache/2.2.11 using mod_python 3.3.1/Python 2.5 running under Gentoo linux.  In my python script I invoke a win32 exe using wine (os.popen2 call).  This works fine outside of Apache but under mod_python I get:</p>

<p>wine: cannot open /root/.wine : Permission denied</p>

<p>in /var/log/apache/error_log.  My apache install is not running as the root user/group.  Any ideas why it's looking into /root/.wine?</p>

<p>Thanks,</p>

<p>LarsenMTL</p>
"
513173,44856,2009-02-04T20:34:13Z,3,pure web based versioning system,"<p>My hosting service does not currently run/allow svn, git, cvs on their server. I would really like to be able to 'sync' my current source on my development machine with my production server. </p>

<p>I am looking for a <strong>pure php/python/ruby version control system</strong> (not just a <em>client</em> for a version control system) that does not require any services running on the server machine, something that could use the http interface to upload/download and sync files - basically offering a back end into my 'live' site for version control.</p>

<p>Additionally, I would think that such a system would be easy to develop an 'online' ide for, so that I could develop directly on the production server. (issues of testing aside of course)</p>

<p>Does anyone know if such a system exists?</p>

<p>==Edit==</p>

<p>Really, I want a wiki front end for a version control / development system - Basically look like a wiki and edit development files so that I could easily make and roll back changes via the web. I doubt this exists, but it would be easy to extend an existing php port of svn... </p>
"
513291,31516,2009-02-04T20:54:50Z,2,Various Python datetime issues,"<p>I have two methods that I'm using as custom tags in a template engine:</p>

<pre><code># Renders a &lt;select&gt; form field
def select_field(options, selected_item, field_name):
    options = [(str(v),str(v)) for v in options]
    html = ['&lt;select name=""%s""&gt;' % field_name]
    for k,v in options:
    	tmp = '&lt;option '
    	if k == selected_item:
    		tmp += 'selected '
    	tmp += 'value=""%s""&gt;%s&lt;/option&gt;' % (k,v)
    	html.append(tmp)
    html.append('&lt;/select&gt;')
    return '\n'.join(html)

# Renders a collection of &lt;select&gt; fields for datetime values
def datetime_field(current_dt, field_name):
    if current_dt == None:
    	current_dt = datetime.datetime.now()
    day = select_field(range(1, 32), current_dt.day, field_name + ""_day"")
    month = select_field(range(1, 13), current_dt.month, field_name + ""_month"")
    year = select_field(range(datetime.datetime.now().year, datetime.datetime.now().year + 10), current_dt.year, field_name + ""_year"")
    hour = select_field(range(1, 13), current_dt.hour, field_name + ""_hour"")
    minute = select_field(range(1, 60), current_dt.minute, field_name + ""_minute"")
    period = select_field(['AM', 'PM'], 'AM', field_name + ""_period"")
    return ""\n"".join([day, '/', month, '/', year, ' at ', hour, ':', minute, period])
</code></pre>

<p>As you can see in the comments, I'm attempting to generate select fields for building a date and time value.</p>

<p>My first question is, how do I make the day, month, hour, and minute ranges use two digits? For example, the code generates ""1, 2, 3..."" while I would like ""01, 02, 03"".</p>

<p>Next, when the fields get generated, the values of the supplied datetime are not selected automatically, even though I'm telling the select_field method to add a ""selected"" attribute when the value is equal to the supplied datetime's value.</p>

<p>Finally, how do I get the 12-hour period identifier (AM/PM) for the supplied datetime? For the moment, I'm simply selecting 'AM' by default, but I would like to supply this value from the datetime itself.</p>
"
513675,43399,2009-02-04T22:28:09Z,1,Newline characters in non ASCII encoded files,"<p>I'm using Python 2.6 to read latin2 encoded file with windows line endings ('\r\n').</p>

<pre><code>import codecs

file = codecs.open('stackoverflow_secrets.txt', encoding='latin2', mode='rt')
line = file.readline()
print(repr(line))
</code></pre>

<p>outputs : <code>u'login: yabcok\n'</code></p>

<pre><code>file = codecs.open('stackoverflow_secrets.txt', encoding='latin2', mode='r')
line = file.readline()
print(repr(line))
</code></pre>

<p>or</p>

<pre><code>file = codecs.open('stackoverflow_secrets.txt', encoding='latin2', mode='rb')
line = file.readline()
print(repr(line))
</code></pre>

<p>outputs : <code>u'password: l1x1%Dm\r\n'</code></p>

<p>My questions:</p>

<ol>
<li>Why text mode is not the default? Documentation states otherwise. Is <code>codecs</code> module commonly used with binary files?</li>
<li>Why newline chars aren't stripped from readline() output? This is annoying and redundant.</li>
<li>Is there a way to specify newline character for files not ASCII encoded.</li>
</ol>
"
513788,49219,2009-02-04T23:00:26Z,22,Delete file from zipfile with the ZipFile Module,"<p>The only way i came up for deleting a file from a zipfile was to create a temporary zipfile without the file to be deleted and then rename it to the original filename.</p>

<p>In python 2.4 the ZipInfo class had an attribute <code>file_offset</code>, so it was possible to create a second zip file and copy the data to other file without decompress/recompressing.</p>

<p>This <code>file_offset</code> is missing in python 2.6, so is there another option than creating another zipfile by uncompressing every file and then recompressing it again?</p>

<p>Is there maybe a direct way of deleting a file in the zipfile, i searched and didn't find anything.</p>

<p>Thanks in advance.</p>
"
513806,62673,2009-02-04T23:06:11Z,3,How to distribute script using gdata-python-client?,"<p>I've written several scripts that make use of the gdata API, and they all (obviously) have my API key and client ID in plain-text. How am I supposed to distribute these?</p>
"
513882,41718,2009-02-04T23:28:41Z,79,Python: List vs Dict for look up table,"<p>I have about 10million values that I need to put in some type of look up table, so I was wondering which would be more efficient a <i>list</i> or <i>dict</i>?</p>

<p>I know you can do something like this for both:</p>

<pre><code>if something in dict_of_stuff:
    pass
</code></pre>

<p>and</p>

<pre><code>if something in list_of_stuff:
    pass
</code></pre>

<p>My thought is the dict will be faster and more efficient.</p>

<p>Thanks for your help.</p>

<p><b>EDIT 1</b> <br>
Little more info on what I'm trying to do.  <a href=""http://projecteuler.net/index.php?section=problems&amp;id=92"">Euler Problem 92</a>.  I'm making a look up table to see if a value calculated has all ready been calculated. </p>

<p><b>EDIT 2</b> <br>
Efficiency for look up.</p>

<p><b>EDIT 3</b> <br>
There are no values assosiated with the value...so would a <i>set</i> be better?</p>
"
514029,51816,2009-02-05T00:37:27Z,2,How to split a string by using [] in Python,"<p>So from this string:</p>

<p>""name[id]""</p>

<p>I need this:</p>

<p>""id""</p>

<p>I used str.split ('[]'), but it didn't work. Does it only take a single delimiter?</p>
"
514038,23903,2009-02-05T00:39:48Z,27,Elegant ways to return multiple values from a function,"<p>It seems like in most mainstream programming languages, <strong>returning multiple values from a function</strong> is an extremely awkward thing. </p>

<p>The typical solutions are to make either a <strong>struct</strong> or a plain old data <strong>class</strong> and return that, or to pass at least some of the parameters by reference or pointer instead of returning them. </p>

<p>Using references/pointers is pretty awkward because it relies on side effects and means you have yet another parameter to pass. </p>

<p>The class/struct solution is also IMHO pretty awkward because you then end up with a million little classes/structs that are only used to return values from functions, generating unnecessary clutter and verbosity. </p>

<p>Furthermore, a lot of times there's one return value that is always needed, and the rest are only used by the caller in certain circumstances. Neither of these solutions allow the caller to ignore unneeded return types.</p>

<p>The one language I'm aware of that handles multiple return values elegantly is Python. For those of you who are unfamiliar, it uses tuple unpacking:</p>

<pre><code>a, b = foo(c)  # a and b are regular variables.
myTuple = foo(c)  # myTuple is a tuple of (a, b)
</code></pre>

<p>Does anyone have any other good solutions to this problem? Both idioms that work in existing mainstream languages besides Python and language-level solutions you've seen in non-mainstream languages are welcome.</p>
"
514068,51816,2009-02-05T00:47:37Z,23,Extension methods in Python,"<p>Does Python have extension methods like C#? Is it possible to call a method like:</p>

<pre><code>MyRandomMethod()
</code></pre>

<p>on existing types like <code>int</code>?</p>

<pre><code>myInt.MyRandomMethod()
</code></pre>
"
514371,28035,2009-02-05T02:59:47Z,140,What's the bad magic number error?,"<p>What's the ""Bad magic number"" ImportError in python, and how do I fix it?</p>

<p>The only thing I can find online suggests this is caused by compiling a .py -> .pyc file and then trying to use it with the wrong version of python. In my case, however, the file seems to import fine some times but not others, and I'm not sure why.</p>

<p>The information python's providing in the traceback isn't particularly helpful (which is why I was asking here...), but here it is in case it helps:</p>

<pre><code>Traceback (most recent call last):
  File ""run.py"", line 7, in &lt;module&gt;
    from Normalization import Normalizer
</code></pre>
"
514448,61923,2009-02-05T03:41:31Z,8,Python: loop over consecutive characters?,"<p>In Python (specifically Python 3.0 but I don't think it matters), how do I easily write a loop over a sequence of characters having consecutive character codes? I want to do something like this pseudocode:</p>

<pre><code>for Ch from 'a' to 'z' inclusive: #
    f(Ch)
</code></pre>

<p>Example: how about a nice ""pythonic"" version of the following?</p>

<pre><code>def Pangram(Str):
    ''' Returns True if Str contains the whole alphabet, else False '''
    for Ch from 'a' to 'z' inclusive: #
        M[Ch] = False
    for J in range(len(Str)):
        Ch = lower(Str[J])
        if 'a' &lt;= Ch &lt;= 'z':
            M[Ch] = True
    return reduce(and, M['a'] to M['z'] inclusive) #
</code></pre>

<p>The lines marked # are pseudocode. Of course reduce() is real Python! </p>

<p>Dear wizards (specially old, gray-bearded wizards), perhaps you can tell that my favorite language used to be Pascal.</p>
"
514475,62740,2009-02-05T03:51:27Z,1,Help building a regular expression in python using the re module,"<p>im writing a simple propositional logic formula parser in python which uses regular expressions re module and the lex/yacc module for lexing/parsing. Originally my code could pick out implication as ->, but adding logical equivalence (&lt;->) caused issues with the compiled expressions</p>

<pre><code>IMPLICATION = re.compile('[\s]*\-\&gt;[\s]*')
EQUIVALENCE = re.compile('[\s]*\&lt;\-\&gt;[\s]*')
...
elif self.IMPLICATION.search(formula[0].strip()):
...
elif self.EQUIVALENCE.search(formula[0].strip()):
...
</code></pre>

<p>I originally tried adding [^&lt;] to the front of -> to make it ignore instances of equivalence but this just made it not accept any instances of implication at all. Any possible help would be warmly welcome :)</p>
"
514617,31307,2009-02-05T04:51:24Z,4,Random name generator strategy - help me improve it,"<p>I have a small project I am doing in Python using web.py. It's a name generator, using 4 ""parts"" of a name (<code>firstname, middlename, anothername, surname</code>). Each part of the name is a collection of entites in a MySQL databse (<code>name_part (id, part, type_id)</code>, and <code>name_part_type (id, description)</code>). Basic stuff, I guess.</p>

<p>My generator picks a random entry of each ""type"", and assembles a comical name. Right now, I am using <code>select * from name_part where type_id=[something] order by rand() limit 1</code> to select a random entry of each type (so I also have 4 queries that run per pageview, I figured this was better than one fat query returning potentially hundreds of rows; if you have a suggestion for how to pull this off in one query w/o a sproc I'll listen).</p>

<p>Obviously I want to make this more random. Actually, I want to give it better coverage, not necessarily randomness. I want to make sure it's using as many possibilities as possible. That's what I am asking in this question, <strong>what sorts of strategies can I use to give coverage over a large random sample</strong>? </p>

<p>My idea, is to implement a counter column on each <code>name_part</code>, and increment it each time I use it. I would need some logic to then say like: ""get a name_part that is less than the highest ""counter"" for this ""name_part_type"", unless there are none then pick a random one"". I am not very good at SQL, is this kind of logic even possible? The only way I can think to do this would require up to 3 or 4 queries for each part of the name (so up to 12 queries per pageview). </p>

<p>Can I get some input on my logic here? Am I overthinking it? This actually sounds ideal for a stored procedure... but can you guys at least help me solve how to do it without a sproc? (I don't know if I can even use a sproc with the built-in database stuff of web.py).</p>

<p>I hope this isn't terribly dumb but thanks ahead of time. </p>

<p>edit: Aside from my specific problem I am still curious if there are any alternate strategies I can use that may be better.</p>
"
514767,60664,2009-02-05T06:10:39Z,1,Translating Python Regexp to Shell,"<p>I'm writing an Applescript playlist generator.  Part of the process is to read the iTunes Library XML file to get a list of all of the genres in a user's library.  This is the python implementation, which works as I'd like:</p>

<pre><code>    #!/usr/bin/env python

# script to get all of the genres from itunes

import re,sys,sets


## Boosted from the internet to handle HTML entities in Genre names
def unescape(text):
    def fixup(m):
        text = m.group(0)
        if text[:2] == ""&amp;#"":
            # character reference
            try:
                if text[:3] == ""&amp;#x"":
                    return unichr(int(text[3:-1], 16))
                else:
                    return unichr(int(text[2:-1]))
            except ValueError:
                pass
        else:
            # named entity
            try:
                text = unichr(htmlentitydefs.name2codepoint[text[1:-1]])
            except KeyError:
                pass
        return text # leave as is
    return re.sub(""&amp;#?\w+;"", fixup, text)


# probably faster to use a regex than to try to walk
# the entire xml document and aggregate the genres
try:
    xml_path = ""/Users/%s/Music/iTunes/iTunes Music Library.xml"" % sys.argv[1]
except:
    print '\tUsage: python '+sys.argv[0]+' &lt;your OSX username&gt;'
    raise SystemExit

pattern = ""&lt;key&gt;Genre&lt;/key&gt;&lt;string&gt;([^&lt;]+)&lt;/string&gt;"" 

try:
    xml = file(xml_path,'r').read()
except:
    print '\tUnable to load your iTunes Library XML file'
    raise SystemExit

matches = re.findall(pattern,xml)
uniques = map(unescape,list(sets.Set(matches)))
## need to write these out somewhere so the applescript can read them
sys.stdout.write('|'.join(uniques))
raise SystemExit
</code></pre>

<p>The problem is, I'd like the Applescript to be self-contained and not require that this additional file be present (I plan on making this available to other people).  And, as far as I can tell, Applescript doesn't offer any type of regular expression capabilities out of the box.  I could loop over each track in the library to get all of the genres, but this is a prohibitively long process that I already do once when building the playlist.  So, I'm looking for alternatives.</p>

<p>Since Applescript allows me to run a shell script and capture the results, I imagine that I can accomplish the same behavior using some type of shell command, be it grep, perl, or something else.  My *nix command line skills are extremely rusty and I'm looking for some guidance.</p>

<p>So, in short, I'd like to find a way to translate the above python code into something I can call directly from the shell and get a similar result.  Thanks!</p>
"
514912,NA,2009-02-05T07:27:05Z,2,Web based wizard with Python,"<p>What is a good/simple way to create, say a five page wizard, in Python, where the web server component composes the wizard page content mostly dynamically by fetching the data via calls to a XML-RPC back-end. I have experienced a bit with the XML-RPC Python module, but I don't know which Python module would be providing the web server, how to create the static content for the wizard and I don't know how to extend the web server component to make the XML-RPC calls from the web server to the XML-RPC back-end to be able to create the dynamic content.</p>
"
515522,50878,2009-02-05T11:35:01Z,1,How best to pass database objects to a turbogears WidgetList?,"<p>I am trying to set up form widgets for adding some objects to the database but I'm getting stuck because it seems impossible to pass any arguments to Widgets contained within a WidgetList. To clarify that, here is my WidgetList:</p>

<pre><code>class ClientFields(forms.WidgetsList):
    """"""Form to create a client""""""

    name = forms.TextField(validator=validators.NotEmpty())
    abbreviated = forms.TextField(validator=validators.NotEmpty(), attrs={'size':2})
    address = forms.TextArea(validator=validators.NotEmpty())
    country = forms.TextField(validator=validators.NotEmpty())
    vat_number = forms.TextField(validator=validators.NotEmpty())
    email_address = forms.TextField(validator=validators.Email(not_empty=True))
    client_group = forms.SingleSelectField(validator=validators.NotEmpty(),
                                       options=[(g.id, g.name) for g in ClientGroup.all_client_groups().all()])
</code></pre>

<p>You see I have had to resort to grabbing objects from the database from within the WidgetList, which means that it's rather tightly coupled with the database code (even though it's using a classmethod in the model). </p>

<p>The problem is that once the WidgetList instance is created, you can't access those fields (otherwise I could just call client_fields.client_group.options=[(key,value)] from the controller) - the fields are removed from the class and added to a list, so to find them again, I'd have to iterate through that list to find the Field class I want to alter - not clean. Here's the output from ipython as I check out the WidgetsList:</p>

<pre>In [8]: mad.declared_widgets
Out[8]: 
[TextField(name='name', attrs={}, field_class='textfield', css_classes=[], convert=True),
 TextField(name='abbreveated', attrs={'size': 2}, field_class='textfield', css_classes=[], convert=True),
 TextArea(name='address', rows=7, cols=50, attrs={}, field_class='textarea', css_classes=[], convert=True),
 TextField(name='country', attrs={}, field_class='textfield', css_classes=[], convert=True),
 TextField(name='vat_number', attrs={}, field_class='textfield', css_classes=[], convert=True),
 TextField(name='email_address', attrs={}, field_class='textfield', css_classes=[], convert=True),
 SingleSelectField(name='client_group', attrs={}, options=[(1, u""Proporta's Clients"")], field_class='singleselectfield', css_classes=[], convert=False)]</pre>

<p>So...what would be the right way to set these Widgets and WidgetLists up without coupling them too tightly to the database and so on?</p>
"
515801,22185,2009-02-05T13:03:36Z,4,Detect key press combination in Linux with Python?,"<p>I'm trying to capture key presses so that when a given combination is pressed I trigger an event.</p>

<p>I've searched around for tips on how to get started and the simplest code snippet I can find is in Python - I grabbed the code below for it from <a href=""http://www.daniweb.com/forums/thread112975.html"" rel=""nofollow"">here</a>. However, when I run this from a terminal and hit some keys, after the ""Press a key..."" statement nothing happens. </p>

<p>Am I being stupid? Can anyone explain why nothing happens, or suggest a better way of achieving this on Linux (any language considered!)?</p>

<pre><code>import Tkinter as tk

def key(event):
    if event.keysym == 'Escape':
        root.destroy()
    print event.char

root = tk.Tk()
print ""Press a key (Escape key to exit):""
root.bind_all('&lt;Key&gt;', key)
# don't show the tk window
root.withdraw()
root.mainloop()
</code></pre>
"
516039,62398,2009-02-05T14:11:32Z,6,Most pythonic way to extend a potentially incomplete list,"<p>What I'm looking for is the best way to say, 'If this list is too short, lengthen it to 9 elements and add 'Choice 4', 'Choice 5', etc, as the additional elements. Also, replace any 'None' elements with 'Choice x'.' It is ok to replace """" and 0 too.</p>

<p>An example transformation would be</p>

<pre><code>['a','b',None,'c']
</code></pre>

<p>to</p>

<pre><code>['a','b','Choice 3','c','Choice 5','Choice 6','Choice 7','Choice 8','Choice 9']
</code></pre>

<p>My initial code abused try/except and had an off-by-one error I didn't notice; thanks to joeforker and everyone who pointed it out. Based on the comments I tried two short solutions that test equally well:</p>

<pre><code>def extendChoices(cList):
  for i in range(0,9):
    try:
      if cList[i] is None:
        cList[i] = ""Choice %d""%(i+1)
    except IndexError:
      cList.append(""Choice %d""%(i+1)
</code></pre>

<p>and</p>

<pre><code>def extendChoices(cList):
  # Fill in any blank entries
  for i, v in enumerate(cList):
    cList[i] = v or ""Choice %s"" % (i+1)

  # Extend the list to 9 choices  
  for j in range(len(cList)+1, 10):
    cList.append(""Choice %s"" % (j))
</code></pre>

<p>I think #2 wins as being more pythonic, so it's the one I'll use. It's easy to understand and uses common constructs. Splitting the steps is logical and would make it easier for someone to understand at a glance.</p>
"
516335,62673,2009-02-05T15:22:28Z,1,Is it possible to google search with the gdata API?,"<p>I might be just thick (nothing new), but I can't seem to find anything related to an old-fashioned, vanilla google search in the gdata API docs. Anyone know if it's possible? (I know it probably is with a little tinkering, but I already have a Python web-scraping class created that does it for me, but I was wondering if using gdata would be the <em>right thing to do</em>)</p>
"
516451,681,2009-02-05T15:46:33Z,2,"Python regex: Turn ""ThisFileName.txt"" into ""This File Name.txt""","<p>I'm trying to add a space before every capital letter, except the first one.</p>

<p>Here's what I have so far, and the output I'm getting:</p>

<pre><code>&gt;&gt;&gt; tex = ""ThisFileName.txt""
&gt;&gt;&gt; re.sub('[A-Z].', ' ', tex)
' his ile ame.txt'
</code></pre>

<p>I want:
   'This File Name.txt'</p>

<p>(It'd be nice if I could also get rid of .txt, but I can do that in a separate operation.)</p>
"
516501,48837,2009-02-05T15:56:00Z,6,"Is there a Vim equivalent to the Linux/Unix ""fold"" command?","<p>I realize there's a way in Vim to hide/fold lines, but what I'm looking for is a way to select a block of text and have Vim wrap lines at or near column 80.  </p>

<p>Mostly I want to use this on comments in situations where I'm adding some text to an existing comment that pushes it over 80 characters.  It would also be nice if it could insert the comment marker at the beginning of the line when it wraps too.  Also I'd prefer the solution to not autowrap the entire file since I have a particular convention that I use when it comes to keeping my structured code under the 80 character line-length.  </p>

<p>This is mostly for Python code, but I'm also interested in learning the general solution to the problem in case I have to apply it to other types of text.</p>
"
516798,51647,2009-02-05T16:57:15Z,5,Mixed language source directory layout,"<p>We are running a large project with several different languages: Java, Python, PHP, SQL and Perl. </p>

<p>Until now people have been working in their own private repositories, but now we want to merge the entire project in a single repository. The question now is: how should the directory structure look? Should we have separate directories for each language, or should we separate it by component/project? How well does python/perl/java cope with a common directory layout?</p>
"
516935,21716,2009-02-05T17:28:10Z,8,Is plotting an image on a map with matplotlib possible?,"<p>Using basemap it's easy to plot a set of coordinates, like so:</p>

<pre><code>x, y = m(lons, lats)    
m.plot(x, y, 'go')
</code></pre>

<p>but would it be possible to use an image instead of the green circle ('go')? I didn't find a direct way of doing this from the documentation.</p>

<p>So, let's clarify this a bit: I'm using a map generated with basemap as a background and would like to plot some .png images on top of it instead of the regular plain markers.</p>
"
516946,46411,2009-02-05T17:32:22Z,5,Control 2 separate Excel instances by COM independently... can it be done?,"<p>I've got a legacy application which is implemented in a number of Excel workbooks. It's not something that I have the authority to re-implement, however another application that I do maintain does need to be able to call functions in the Excel workbook. </p>

<p>It's been given a python interface using the Win32Com library. Other processes can call functions in my python package which in turn invokes the functions I need via Win32Com.</p>

<p>Unfortunately COM does not allow me to specify a particular COM process, so at the moment no matter how powerful my server I can only control one instance of Excel at a time on the computer. If I were to try to run more than one instance of excel there would be no way of ensuring that the python layer is bound to a specific Excel instance. </p>

<p>I'd like to be able to run more than 1 of my excel applications on my Windows server concurrently. Is there a way to do this? For example, could I compartmentalize my environment so that I could run as many Excel _ Python combinations as my application will support?</p>
"
517060,17160,2009-02-05T17:59:35Z,13,return eats exception,"<p>I found the following behavior at least <em>weird</em>:</p>

<pre><code>def errors():
    try:
        ErrorErrorError
    finally:
        return 10

print errors()
# prints: 10
# It should raise: NameError: name 'ErrorErrorError' is not defined
</code></pre>

<p>The exception disappears when you use <code>return</code> inside a <code>finally</code> clause. Is that a bug? Is that documented anywhere?</p>

<p>But the real question (and the answer I will mark as correct) is:<br>
What is the python developers' reason to allow that odd behavior?</p>
"
517127,53007,2009-02-05T18:11:47Z,82,How do I write output in same place on the console?,"<p>I am new to python and am writing some scripts to automate downloading files from FTP servers, etc. I want to show the progress of the download, but I want it to stay in the same position, such as:</p>

<p>output:</p>

<blockquote>
  <p>Downloading File FooFile.txt [47%]</p>
</blockquote>

<p>I'm trying to avoid something like this:</p>

<pre><code>     Downloading File FooFile.txt [47%]
     Downloading File FooFile.txt [48%]
     Downloading File FooFile.txt [49%]
</code></pre>

<p>How should I go about doing this?</p>

<p><hr /></p>

<p><strong>Duplicate</strong>:  <a href=""http://stackoverflow.com/questions/465348/how-can-i-print-over-the-current-line-in-a-command-line-application/465360#465360"">http://stackoverflow.com/questions/465348/how-can-i-print-over-the-current-line-in-a-command-line-application/465360#465360</a></p>
"
517237,62993,2009-02-05T18:29:07Z,21,HOWTO: Write Python API wrapper?,"<p>I'd like to write a python library to wrap a REST-style API offered by a particular Web service. Does anyone know of any good learning resources for such work, preferably aimed at intermediate Python programmers?</p>

<p>I'd like a good article on the subject, but I'd settle for nice, clear code examples.</p>

<p><strong>CLARIFICATION:</strong> What I'm looking to do is write a Python client to interact with a Web service -- something to construct HTTP requests and parse XML/JSON responses, all wrapped up in Python objects.</p>
"
517349,62997,2009-02-05T18:51:49Z,6,Storing a binary hash value in a Django model field,"<p>I have a twenty byte hex hash that I would like to store in a django model. 
If I use a text field, it's interpreted as unicode and it comes back garbled. </p>

<p>Currently I'm encoding it and decoding it, which really clutters up the code,
because I have to be able to filter by it.</p>

<pre><code>def get_changeset(self):
    return bin(self._changeset)

def set_changeset(self, value):
    self._changeset = hex(value)

changeset = property(get_changeset, set_changeset)
</code></pre>

<p>Here's an example for filtering</p>

<pre><code>Change.objects.get(_changeset=hex(ctx.node()))
</code></pre>

<p>This is the approach that was recommended by a django developer, but I'm really struggling to come to terms with the fact that it's this ugly to just store twenty bytes.</p>

<p>Maybe I'm too much of a purist, but ideally I would be able to write</p>

<pre><code>Change.objects.get(changeset=ctx.node())
</code></pre>

<p>The properties allow me to write:</p>

<pre><code>change.changeset = ctx.node()
</code></pre>

<p>So that's as good as I can ask.</p>
"
517355,51816,2009-02-05T18:53:29Z,21,String formatting in Python,"<p>I want to do something like String.Format (""[{0}, {1}, {2}]"", 1, 2, 3) which returns:</p>

<pre><code>[1, 2, 3]
</code></pre>

<p>How do I do this in Python?</p>
"
517491,45629,2009-02-05T19:23:05Z,1,Execute a string as a command in python,"<p>I am developing my stuff in python. In this process I encountered a situation where I have a string called ""import django"". And I want to validate this string. Which means, I want to check whether the module mentioned('django' in this case) is in the python-path. How can I do it?</p>
"
517923,38626,2009-02-05T21:10:40Z,230,What is the best way to remove accents in a Python unicode string?,"<p>I have a Unicode string in Python, and I would like to remove all the accents (diacritics).</p>

<p>I found on the Web an elegant way to do this in Java:</p>

<ol>
<li>convert the Unicode string to its long normalized form (with a separate character for letters and diacritics)</li>
<li>remove all the characters whose Unicode type is ""diacritic"".</li>
</ol>

<p>Do I need to install a library such as pyICU or is this possible with just the python standard library?  And what about python 3?</p>

<p>Important note: I would like to avoid code with an explicit mapping from accented characters to their non-accented counterpart.</p>
"
517970,46914,2009-02-05T21:19:20Z,169,How to clear python interpreter console?,"<p>Like most Python developers, I typically keep a console window open with the Python interpreter running to test commands, dir() stuff, help() stuff, etc.</p>

<p>Like any console, after a while the visible backlog of past commands and prints gets to be cluttered, and sometimes confusing when re-running the same command several times.  I'm wondering if, and how, to clear the Python interpreter console.</p>

<p>I've heard about doing a system call and either calling <code>cls</code> on Windows or <code>clear</code> on Linux, but I was hoping there was something I could command the interpreter itself to do.</p>

<p><strong>Note:</strong> I'm running on Windows, so Ctrl+L doesn't work.</p>
"
518021,51816,2009-02-05T21:26:47Z,400,Getting the length of an array in Python,"<p>In <a href=""http://en.wikipedia.org/wiki/Python_%28programming_language%29"">Python</a>, is the following the only way to get the number of elements?</p>

<pre><code>arr.__len__()
</code></pre>

<p>If so, why the strange syntax?</p>
"
518162,3506,2009-02-05T22:01:17Z,4,How to work with unsaved many-to-many relations in django?,"<p>I have a couple of models in django which are connected many-to-many. I want to create instances of these models <em>in memory</em>, present them to the user (via custom method-calls inside the view-templates) and if the user is satisfied, save them to the database.</p>

<p>However, if I try to do anything on the model-instances (call rendering methods, e.g.), I get an error message that says that I have to save the instances first. The documentation says that this is because the models are in a many-to-many relationship.</p>

<p>How do I present objects to the user and allowing him/her to save or discard them without cluttering my database?</p>

<p>(I guess I could turn off transactions-handling and do them myself throughout the whole project, but this sounds like a potentially error-prone measure...)</p>

<p>Thx!</p>
"
518679,54964,2009-02-06T00:48:23Z,1,How can I manipulate lists?,"<p>In the computer algebra system <a href=""http://www.sagemath.org/"" rel=""nofollow"">Sage</a>, 
I need to multiply a list by 2.</p>

<p>I tried the code</p>

<pre><code>sage: list = [1, 2, 3];
sage: 2 * list 
</code></pre>

<p>which returns</p>

<pre><code>[1, 2, 3, 1, 2, 3]
</code></pre>

<p>How can I just multiply each element by two?</p>
"
518782,51518,2009-02-06T01:35:00Z,0,List/Arrays - Check Dates,"<p>I'm trying to make a program that checks an array to make sure there are four folders with partially same names.</p>

<p>So</p>

<p>For a date like 0103 (jan 3rd), there should be 0103-1, 0103-2, 0103-3, and 0103-4. Other folders are like 0107-1, 0107-2, 0107-3, 0107-4. How do I go about doing this? I thought about using glob.glob (python) and wildcards to make sure there are only four matches...but I don't like this method.</p>

<p>Any suggestions?</p>
"
519296,18926,2009-02-06T06:15:50Z,3,"Getting OperationalError: FATAL: sorry, too many clients already using psycopg2","<p>I am getting the error OperationalError: FATAL: sorry, too many clients already when using psycopg2. I am calling the close method on my connection instance after I am done with it. I am not sure what could be causing this, it is my first experience with python and postgresql, but I have a few years experience with php, asp.net, mysql, and sql server.</p>

<p>EDIT: I am running this locally, if the connections are closing like they should be then I only have 1 connection open at a time. I did have a GUI open to the database but even closed I am getting this error. It is happening very shortly after I run my program. I have a function I call that returns a connection that is opened like:</p>

<p>psycopg2.connect(connectionString)</p>

<p>Thanks</p>

<p>Final Edit:
It was my mistake, I was recursively calling the same method on mistake that was opening the same method over and over. It has been a long day..</p>
"
519633,58737,2009-02-06T09:11:13Z,156,Lazy Method for Reading Big File in Python?,"<p>I have a very big file 4GB and when I try to read it my computer hangs.
So I want to read it piece by piece and after processing each piece store the processed piece into another file and read next piece.</p>

<p>Is there any method to <code>yield</code> these pieces ?</p>

<p>I would love to have a <strong>lazy method</strong>.</p>
"
519671,11527,2009-02-06T09:30:01Z,68,Is there a HAML implementation for use with Python and Django,"<p>I happened to stumble across <a href=""http://haml-lang.com/"">HAML</a>, an interesting and beautiful way to mark up contents and write templates for HTML.</p>

<p>Since I use Python and Django for my web developing need, I would like to see if there is a Python implementation of HAML (or some similar concepts -- need not be exactly identical) that can be used to replace the Django template engine.</p>
"
519851,NA,2009-02-06T10:48:24Z,1,Good Sound processing/Analysis/Capturing Modules,"<p>We are working on Sound processing and Analysis where we need to extract frequencies, pitches, octaves and other parameters of sound including dBPowerSpectrum Analysis. </p>

<p>We also need to do this irrespective of the file formats or do the conversion between quite a file format(though conversion is not a very critical requirement if those parameters can be analyzed on most file formats).<br>
We also need to capture/record sound from Mic. We found a Python module called Snack which does almost everything we need, but the whole problem is that it requires tkinter to be installed.<br>
Since we are planning to write a Web client for this program, I feel installing tkinter and initializing and passing its object to Sound Processing module is an overhead.<br>
Can you please suggest us few good Sound Processing Module. We don't expect an all in one module. Its OK even if these functionalities are spread over several modules.  </p>

<p>Kindly suggest.</p>

<p>Thanks in Advance</p>
"
520015,61314,2009-02-06T11:43:30Z,45,Cross-platform gui toolkit for deploying Python applications,"<p>Building on:
<a href=""http://www.reddit.com/r/Python/comments/7v5ra/whats_your_favorite_gui_toolkit_and_why/"">http://www.reddit.com/r/Python/comments/7v5ra/whats_your_favorite_gui_toolkit_and_why/</a></p>

<h1>Merits:</h1>

<p>1 - ease of design / integration - learning curve</p>

<p>2 - support / availability for *nix, Windows, Mac, extra points for native l&amp;f, support for mobile or web</p>

<p>3 - pythonic API</p>

<p>4 - quality of documentation - I want to do something a bit more complicated, now what?</p>

<p>5 - light weight packaging so it's not necessary to include a full installer (py2exe, py2app would ideally work as-is and not generate a gazillion MBs file)</p>

<p>6 - licensing</p>

<p>7 - others? (specify)
<hr /></p>

<h1>Contenders:</h1>

<p>1 - tkinter, as currently supported (as of 2.6, 3.0)</p>

<p>2 - pyttk library</p>

<p>3 - pyGTK</p>

<p>4 - pyQt</p>

<p>5 - wxPython</p>

<p>6 - HTML-CGI via Python-based framework (Django, Turbogears, web.py, Pylons...) or Paste</p>

<p>7 - others? (specify)</p>
"
520031,912,2009-02-06T11:51:57Z,18,What's the cleanest way to extract URLs from a string using Python?,"<p>Although I know I could use some hugeass regex such as the one posted <a href=""http://geekswithblogs.net/casualjim/archive/2005/12/01/61722.aspx"">here</a> I'm wondering if there is some tweaky as hell way to do this either with a standard module or perhaps some third-party add-on?</p>

<p>Simple question, but nothing jumped out on Google (or Stackoverflow).</p>

<p>Look forward to seeing how y'all do this!</p>
"
520152,1662031,2009-02-06T12:45:09Z,4,"Python ""property object has no attribute"" Exception","<pre><code>confirmation = property(_get_confirmation, _set_confirmation)
confirmation.short_description = ""Confirmation""
</code></pre>

<p>When I try the above I get an Exception I don't quite understand:</p>

<pre><code>AttributeError: 'property' object has no attribute 'short_description'
</code></pre>

<p>This was an <a href=""http://stackoverflow.com/questions/435544/django-custom-virtual-model-field-with-companion-stored-field/435580#435580"">answer</a> to another question on here but I couldn't comment on it as I don't have enough points or something. :-(</p>

<p>In other tests I've also got this error under similar circumstances:</p>

<pre><code>TypeError: 'property' object has only read-only attributes (assign to .short_description)
</code></pre>

<p>Any ideas anybody?</p>
"
520210,63314,2009-02-06T13:08:13Z,8,Where is Python used? I read about it a lot on Reddit,"<p>I have downloaded the Pyscripter and learning Python. But I have no Idea if it has any job value , especially in India. I am learning Python as a Hobby. But it would be comforting to know if Python programmers are in demand in India.</p>
"
520362,NA,2009-02-06T13:55:31Z,0,Search Files& Dirs on Website,"<p>Hi im coding to code a Tool that searchs for Dirs and files.</p>

<p>have done so the tool searchs for dirs, but need help to make it search for files on websites.</p>

<p>Any idea how it can be in python?</p>
"
520615,59279,2009-02-06T15:09:13Z,8,Event handling with Jython & Swing,"<p>I'm making a GUI by using Swing from Jython. Event handling seems to be particularly elegant from Jython, just set</p>

<pre><code>JButton(""Push me"", actionPerformed = nameOfFunctionToCall)
</code></pre>

<p>However, trying same thing inside a class gets difficult. Naively trying</p>

<pre><code>JButton(""Push me"", actionPerformed = nameOfMethodToCall)
</code></pre>

<p>or</p>

<pre><code>JButton(""Push me"", actionPerformed = nameOfMethodToCall(self))
</code></pre>

<p>from a GUI-construction method of the class doesn't work, because the first argument of a method to be called should be <em>self</em>, in order to access the data members of the class, and on the other hand, it's not possible to pass any arguments to the event handler through AWT event queue. The only option seems to be using lambda (as advised at <a href=""http://www.javalobby.org/articles/jython/"" rel=""nofollow"">http://www.javalobby.org/articles/jython/</a>) which results in something like this:</p>

<pre><code>JButton(""Push me"", actionPerformed = lambda evt : ClassName.nameOfMethodToCall(self))
</code></pre>

<p>It works, but the elegance is gone. All this just because the method being called needs a <em>self</em> reference from somewhere. Is there any other way around this?</p>
"
520865,11522,2009-02-06T16:01:35Z,10,Has anyone installed MySQLdb for Python on Cygwin?,"<p>I'm trying to install MySQLdb for python on Cygwin. Unfortunately, when I run <code>python setup.py build</code>, I get the following error:</p>

<pre><code>$ python setup.py build
/bin/sh: /usr/local/bin/mysql_config: No such file or directory
Traceback (most recent call last):
  File ""setup.py"", line 16, in &lt;module&gt;
    metadata, options = get_config()
  File ""/home/Ben/python/MySQL-python-1.2.2/setup_posix.py"", line 43, in get_config
    libs = mysql_config(""libs_r"")
  File ""/home/Ben/python/MySQL-python-1.2.2/setup_posix.py"", line 24, in mysql_config
    raise EnvironmentError, ""%s not found"" % mysql_config.path
EnvironmentError: /usr/local/bin/mysql_config not found
</code></pre>

<p>Clearly I don't have <code>mysql_config</code> installed, which I guess is the problem. This is mentioned in the README for MySQLdb, but it doesn't explain how to either get around it or how to install mysql_config.</p>

<p>So maybe this is as easy as: How can I install <code>mysql_config</code> for Cygwin?</p>

<p>Or maybe it's harder than that.</p>

<p>FYI: I have python 2.5.2 and MySQL 5.1.30, running under Cygwin.</p>
"
520881,NA,2009-02-06T16:05:16Z,0,How to convert a list of number to html in Python?,"<p>hey guys, my last problem ^^ say i have a string which contains html, like</p>

<pre><code>html = '&lt;td class=""p11_666699""&gt;&lt;strong&gt;100&lt;/strong&gt;&lt;/td&gt;'
</code></pre>

<p>and a list like</p>

<pre><code>numbers = [100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 
           113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125,
           126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138,
           139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150]
</code></pre>

<p>basically i want to do something like this:</p>

<pre><code>html = '&lt;td class=""p11_666699""&gt;&lt;strong&gt;' + numbers + '&lt;/strong&gt;&lt;/td&gt;'
</code></pre>

<p>edit: for some reason the code tags add curly brackets when i post this, so it messes up, sorry.</p>
"
520963,26416,2009-02-06T16:21:16Z,8,pagination with the python cmd module,"<p>I'm prototyping a Python app with the <a href=""http://docs.python.org/library/cmd.html"">cmd</a> module.</p>

<p>Some messages to the user will be quite long and I'd like to paginate them.
The first 10 (or a configurable number) lines of the message would appear, and pressing the SPACE bar would display the next page, until the end of the message.</p>

<p>I don't want to reinvent something here, is there a simple mean to implement this feature?</p>
"
521111,63401,2009-02-06T16:55:56Z,2,Further Processing of Output of Undefined Methods (Python),"<p>How do I write a Python class that handles calls on undefined methods by first, getting the output of a function of the same name from a given module, and then, doing something further with that output?</p>

<p>For example, given add(x, y), doublerInstance.add(1, 1) should return 4.</p>

<p>I know _ _ getattr _ _() intercepts calls on undefined methods, and getattr() can retrieve a function object.  But I don't know how get the arguments passed to the undefined call caught by _ _ getattr _ _() to the function retrieved by getattr().</p>

<pre><code>EXAMPLE
Module functions.py:
def add(x, y):
    return x + 

Module doubler.py:
class Doubler:
  def __init__(self, source):
    self.source = source

  def __getattr__(self, attrname):
    fnc = getattr(self.source, attrname)
    return fnc() * 2

Session:
&gt;import functions as f
&gt;import doubler as d
&gt;doublerInstance = d.Doubler(f)
&gt;doublerInstance.add(1, 2)
&lt;snip&gt; TypeError: add() takes exactly 2 arguments, (0 given) 
END
</code></pre>

<p>I do understand the error -- getattr() returns a function to be run, and the call fnc() doesn't pass any arguments to that function -- here, add().  But how do I get the arguments passed in to the call dblr.add(1, 2) and pass those to the function returned by the getattr() call?  </p>

<p>I'm looking for the right way to do this, not some usage of _ _ getattr _ _.  I realize that decorator functions using @ might be a better tool here, but I don't yet understand those well enough to see whether they could be applied here.</p>

<p>ALSO -- what resource should I have looked at to figure this out for myself?  I haven't found it in the Lutz books, the Cookbook, or the Python Library Reference.</p>
"
521321,NA,2009-02-06T17:42:27Z,15,Python loops with multiple lists?,"<p><strong>&lt;edit></strong>
Thanks to everyone who has answered so far. The zip and os.path.join are really helpful. Any suggestions on ways to list the counter in front, without doing something like this:</p>

<pre><code>zip(range(len(files)), files, directories)
</code></pre>

<p><strong>&lt;/edit></strong></p>

<p>Hi,</p>

<p>I'm in the process of learning Python, but I come from a background where the following pseudocode is typical:</p>

<pre><code>directories = ['directory_0', 'directory_1', 'directory_2']
files = ['file_a', 'file_b', 'file_c']

for(i = 0; i &lt; directories.length; i++) {
    print (i + 1) + '. ' + directories[i] + '/' + files[i] + '\n'
}

# Output:
# 1. directory_0/file_a
# 2. directory_1/file_b
# 3. directory_2/file_c
</code></pre>

<p>In Python, the way I would write the above right now, would be like this:</p>

<pre><code>directories = ['directory_0', 'directory_1', 'directory_2']
files = ['file_a', 'file_b', 'file_c']

for i in range(len(directories)):
    print '%s. %s/%s' % ((i + 1), directories[i], files[i]

# Output:
# 1. directory_0/file_a
# 2. directory_1/file_b
# 3. directory_2/file_c
</code></pre>

<p>While reading Dive into Python, Mark Pilgrim says that using for loops for counters is ""Visual Basic-style thinking"" (<a href=""http://diveintopython.net/file_handling/for_loops.html#fileinfo.for.counter"">Simple Counters</a>). He goes on to show how to use loops with dictionaries, but never really addresses a python solution in regards to how for loop counters are typically used in other languages.</p>

<p>I was hoping somebody could show me how to properly write the above scenario in Python. Is it possible to do it a different way? </p>

<p>If I took out the incrementing line count, is it possible to just match the two lists together using some kind of list comprehension?</p>

<p>For example, if all I wanted from the output was this (no counters, is that possible with list comprehension):</p>

<pre><code># Output:
# directory_0/file_a
# directory_1/file_b
# directory_2/file_c
</code></pre>

<p>Thanks in advance for any help.</p>
"
521326,19212,2009-02-06T17:43:21Z,3,"How does one parse simple inline markup (i.e. *bold*), in Python?","<p>How does one implement a parser (in Python) for a subset of wikitext that modifies text, namely:</p>

<pre><code>*bold*, /italics/, _underline_
</code></pre>

<p>I'm converting it to LaTeX, so the conversion is from:</p>

<pre><code>Hello, *world*! Let's /go/.
</code></pre>

<p>to:</p>

<pre><code>Hello \textbf{world}! Let's \textit{go}.
</code></pre>

<p>Though there's nothing specific about it being a conversion to LaTeX (notably except nested cases like ""*bold /italics* whatami/"" => ""textbf{bold \textit{italics} whatami}"").</p>

<p>I've looked at <a href=""http://stackoverflow.com/questions/154592"">existing markup libraries</a>, but they're (a) not quite the wiki language I'd like, and (b) seemingly overpowered for this problem.</p>

<p>I've considered reverse engineering <a href=""http://creoleparser.googlecode.com/svn/docs/index.html"" rel=""nofollow"">Creoleparser</a>, but I'd like to know what suggestions others have before I undertake that effort.</p>

<p>Thanks!</p>
"
521476,51816,2009-02-06T18:13:04Z,34,Why True/False is capitalized in Python?,"<p>All members are camel case, right? Why True/False but not true/false, which is more relaxed?</p>
"
521505,51816,2009-02-06T18:19:26Z,1,Comparison function in Python using Lambdas,"<p>I am trying to understand lambdas and I get the idea but how do I define multiple conditions for a Point2 [x,y] comparison, so something like:</p>

<pre><code>if x1 &lt; x2: -1
if x1 == x2: 0
if x1 &gt; x2: 1
</code></pre>
"
521532,63439,2009-02-06T18:25:53Z,76,How do i get python's pprint to return a string instead of printing?,"<p>In other words, what's the sprintf equivalent to pprint?  </p>
"
521710,NA,2009-02-06T19:06:37Z,4,How can I get only class variables?,"<p>I have this class definition:</p>

<pre><code>class cols:
    name = 'name'
    size = 'size'
    date = 'date'
    @classmethod
    def foo(cls):
        print ""This is a class method""
</code></pre>

<p>With __dict__ I get all class attributes (members and variables). Also there are the ""Internal attributes"" too (like __main__). How can I get only the class variables without instantiation?</p>
"
521759,46411,2009-02-06T19:18:01Z,24,Is there a way to decode numerical COM error-codes in pywin32,"<p>Here is part of a stack-trace from a recent run of an unreliable application written in Python which controls another application written in Excel:</p>

<pre><code>pywintypes.com_error: (-2147352567, 'Exception occurred.', (0, None, None, None, 0, -2146788248), None)
</code></pre>

<p>Obviously something has gone wrong ... but what?[1] These COM error codes seem to be excessively cryptic. </p>

<p>How can I decode this error message? Is there a table somewhere that allows me to convert this numerical error code into something more meaningful? </p>

<p>[1] I actually know what went wrong in this case, it was attempting to access a Name prperty on a Range object which did not have a Name property... not all bugs are this easy to find!</p>
"
522229,63503,2009-02-06T21:23:49Z,0,How to use storeHtmlSource in python code (Selenium RC),"<p>I found storeHtmlSource method description in <a href=""http://seleniumhq.org/projects/core/reference.html"" rel=""nofollow"">Selenium reference</a>, but can't figure out how to use it in python code I generated by exporting recording of my actions from the Selenium IDE.</p>

<p>I need to pass the html source code of the current page into a function for processing. How to do that? Can anyone show example of code for calling this method? Could it at all to be called from python?</p>
"
522372,51816,2009-02-06T22:00:00Z,23,Finding first and last index of some value in a list in Python,"<p>Is there any built-in methods that are part of lists that would give me the first and last index of some value, like:</p>

<pre><code>verts.IndexOf(12.345)
verts.LastIndexOf(12.345)
</code></pre>
"
522430,51816,2009-02-06T22:15:20Z,3,Is there a way to loop through a sub section of a list in Python,"<p>So for a list that has 1000 elements, I want to loop from 400 to 500. How do you do it?</p>

<p>I don't see a way by using the for each and for range techniques.</p>
"
522563,51816,2009-02-06T22:47:54Z,1512,Accessing the index in Python 'for' loops,"<p>How do I access the index itself for a list like the following?</p>

<pre><code>ints = [8, 23, 45, 12, 78]
</code></pre>

<p>When I loop through it using a <code>for</code> loop, how do I access the loop index, from 1 to 5 in this case?</p>
"
522586,NA,2009-02-06T22:55:04Z,3,AppEngine: Maintaining DataStore Consistency When Creating Records,"<p>I've hit a small dilemma! I have a handler called vote; when it is invoked it sets a user's vote to whatever they have picked. To remember what options they previously picked, I store a VoteRecord options which details what their current vote is set to.</p>

<p>Of course, the first time they vote, I have to create the object and store it. But successive votes should just change the value of the existing VoteRecord. But he comes the problem: under some circumstances two VoteRecords can be created. It's rare (only happened once in all 500 votes we've seen so far) but still bad when it does.</p>

<p>The issue happens because two separate handlers both do essentially this:</p>

<pre><code>query = VoteRecord.all().filter('user =', session.user).filter('poll =', poll)

if query.count(1) &gt; 0:
 vote = query[0]

 poll.votes[vote.option] -= 1
 poll.votes[option] += 1
 poll.put()

 vote.option = option
 vote.updated = datetime.now()
 vote.put()
else:
 vote = VoteRecord()
 vote.user = session.user
 vote.poll = poll
 vote.option = option
 vote.put()

 poll.votes[option] += 1
 poll.put()

 session.user.votes += 1
 session.user.xp += 3
 session.user.put()

 incr('votes')
</code></pre>

<p>My question is: what is the most effective and fastest way to handle these requests while ensuring that no request is lost and no request creates two VoteRecord objects?</p>
"
522730,3594,2009-02-07T00:08:11Z,25,How can I strip Python logging calls without commenting them out?,"<p>Today I was thinking about a Python project I wrote about a year back where I used <code>logging</code> pretty extensively. I remember having to comment out a lot of logging calls in inner-loop-like scenarios (the 90% code) because of the overhead (<code>hotshot</code> indicated it was one of my biggest bottlenecks).</p>

<p>I wonder now if there's some canonical way to programmatically strip out logging calls in Python applications without commenting and uncommenting all the time. I'd think you could use inspection/recompilation or bytecode manipulation to do something like this and <strong>target only the code objects that are causing bottlenecks</strong>. This way, you could add a manipulator as a post-compilation step and use a centralized configuration file, like so:</p>

<pre><code>[Leave ERROR and above]
my_module.SomeClass.method_with_lots_of_warn_calls

[Leave WARN and above]
my_module.SomeOtherClass.method_with_lots_of_info_calls

[Leave INFO and above]
my_module.SomeWeirdClass.method_with_lots_of_debug_calls
</code></pre>

<p>Of course, <strong>you'd want to use it sparingly and probably with per-function granularity</strong> -- only for code objects that have shown <code>logging</code> to be a bottleneck. Anybody know of anything like this?</p>

<p><strong>Note:</strong> There are a few things that make this more difficult to do in a performant manner because of dynamic typing and late binding. For example, any calls to a method named <code>debug</code> may have to be wrapped with an <code>if not isinstance(log, Logger)</code>. In any case, I'm assuming all of the minor details can be overcome, either by a gentleman's agreement or some run-time checking. :-)</p>
"
522781,63503,2009-02-07T00:27:40Z,1,how to search for specific file type with yahoo search API?,"<p>Does anyone know if there is some parameter available for programmatic search on yahoo allowing to restrict results so only links to files of specific type will be returned (like PDF for example)?
It's possible to do that in GUI, but how to make it happen through API?</p>

<p>I'd very much appreciate a sample code in Python, but any other solutions might be helpful as well.</p>
"
522921,16313,2009-02-07T01:39:29Z,4,Python cannot create instances,"<p>I am trying to create a simple Python extension using [PyCXX]. And I'm compiling against my Python 2.5 installation.</p>

<p>My goal is to be able to do the following in Python:</p>

<pre><code>import Cats

kitty = Cats.Kitty()

if type(kitty) == Cats.Kitty:
    kitty.Speak()
</code></pre>

<p>But every time I try, this is the error that I get:</p>

<p><code>TypeError: cannot create 'Kitty' instances</code></p>

<p>It does see <code>Cats.Kitty</code> as a type object, but I can't create instances of the Kitty class, any ideas?</p>

<p>Here is my current source:</p>

<pre><code>#include ""CXX/Objects.hxx""
#include ""CXX/Extensions.hxx""
#include &lt;iostream&gt;

using namespace Py;
using namespace std;

class Kitty : public Py::PythonExtension&lt;Kitty&gt;
{
    public:
        Kitty()
        {
        }

        virtual ~Kitty()
        {
        }

        static void init_type(void)
        {
            behaviors().name(""Kitty"");
            behaviors().supportGetattr();

            add_varargs_method(""Speak"", &amp;Kitty::Speak);
        }

        virtual Py::Object getattr( const char *name )
        {
            return getattr_methods( name );
        }

        Py::Object Speak( const Py::Tuple &amp;args )
        {
            cout &lt;&lt; ""Meow!"" &lt;&lt; endl;
            return Py::None();
        }
};

class Cats : public ExtensionModule&lt;Cats&gt;
{
    public:
        Cats()
            : ExtensionModule&lt;Cats&gt;(""Cats"")
        {
            Kitty::init_type();

            initialize();

            Dict d(moduleDictionary());
            d[""Kitty""] = Type((PyObject*)Kitty::type_object());
        }

        virtual ~Cats()
        {
        }

        Py::Object factory_Kitty( const Py::Tuple &amp;rargs )
        {
            return Py::asObject( new Kitty );
        }
};

void init_Cats()
{
    static Cats* cats = new Cats;
}


int main(int argc, char* argv[])
{
    Py_Initialize();

    init_Cats();

    return Py_Main(argc, argv);

    return 0;
}
</code></pre>
"
523356,58843,2009-02-07T07:08:03Z,131,Python + Django page redirect,"<p>How do I accomplish a simple redirect (e.g. <code>cflocation</code> in ColdFusion, or <code>header(location:http://)</code> in Django)?</p>
"
523363,2661,2009-02-07T07:12:13Z,5,How do I layout a 3 pane window using wxPython?,"<p>I am trying to find a simple way to layout a 3 pane window using wxPython.</p>

<p>I want to have a tree list in the left pane, then have a right pane that is split into two - with an edit component in the top part and a grid component in the bottom part.</p>

<p>Something along the lines of:</p>

<pre>
--------------------------------------
|             |                      |
|             |        Edit          |
|  Tree       |        Control       |
|  Control    |                      |
|             |----------------------|
|             |                      |
|             |        Grid          |
|             |                      |
--------------------------------------
</pre>

<p>I would like the window to be re-sizable and give the user the ability to change the (relative) size of each of the components within the windows by dragging the borders.</p>

<p>I figure that I need some combination of sizers and/or splitter-window components but can't find a decent example of this kind of window in the documentation or on the web. </p>
"
523503,49407,2009-02-07T09:29:37Z,-1,How to scale an image without occasionally inverting it (with the Python Imaging Library),"<p>When resizing images along the lines shown <a href=""http://stackoverflow.com/questions/400788/resize-image-in-python-without-losing-exif-data"">in this question</a> occasionally the resulting image is inverted. About 1% of the images I resize are inverted, the rest is fine. So far I was unable to find out what is different about these images.</p>

<p>See <a href=""http://images.hudora.de/640x480/NIRV2MRR3XJGR52JATL6BOVMQMFSV54I01.jpeg"" rel=""nofollow"">resized example</a> and <a href=""http://images.hudora.de/o/NIRV2MRR3XJGR52JATL6BOVMQMFSV54I01.jpeg"" rel=""nofollow"">original image</a> for examples.</p>

<p>Any suggestions on how to track down that problem?</p>
"
523579,58260,2009-02-07T10:27:18Z,0,Google Apps HTTP Streaming with Python question,"<p>I got a little question here:</p>

<p>Some time ago I implemented HTTP Streaming using PHP code, something similar to what is on this page:</p>

<p><a href=""http://my.opera.com/WebApplications/blog/show.dml/438711#comments"" rel=""nofollow"">http://my.opera.com/WebApplications/blog/show.dml/438711#comments</a></p>

<p>And I get data with very similar solution. Now I tried to use second code from this page (in Python), but no matter what I do, I receive responseText from python server after everything completes. Here are some python code:</p>

<pre><code>print ""Content-Type: application/x-www-form-urlencoded\n\n""

i=1
while i&lt;4:
 print(""Event: server-time&lt;br&gt;"")
 print(""data: %f&lt;br&gt;"" % (time.time(),))
 sys.stdout.flush()
 i=i+1
 time.sleep(1)
</code></pre>

<p>And here is Javascript Code:</p>

<pre><code>ask = new XMLHttpRequest();
ask.open(""GET"",""/Chat"",true);
setInterval(function()
{
if (ask.responseText) document.write(ask.responseText);
},200);
ask.send(null);
</code></pre>

<p>Anyone got idea what I do wrong ? How can I receive those damn messages one after another, not just all of them at the end of while loop? Thanks for any help here!</p>

<p>Edit:</p>

<p>Main thing I forgot to add: server is google app server (i'm not sure is that google own implementation), here is a link with some explanation (i think uhh):</p>

<p><a href=""http://code.google.com/intl/pl-PL/appengine/docs/python/gettingstarted/devenvironment.html"" rel=""nofollow"">http://code.google.com/intl/pl-PL/appengine/docs/python/gettingstarted/devenvironment.html</a>
<a href=""http://code.google.com/intl/pl-PL/appengine/docs/whatisgoogleappengine.html"" rel=""nofollow"">http://code.google.com/intl/pl-PL/appengine/docs/whatisgoogleappengine.html</a></p>
"
523885,261019,2009-02-07T14:57:29Z,0,BaseHTTPRequestHandler freezes while writing to self.wfile after installing Python 3.0,"<p>I'm starting to lose my head with this one.</p>

<p>I have a class that extends BaseHTTPRequestHandler. It works fine on
Python 2.5. And yesterday I was curious and decided to install Python
3.0 on my Mac (I followed this tutorial, to be sure I wasn't messing
things up: <a href=""http://farmdev.com/thoughts/66/python-3-0-on-mac-os-x-alongside-2-6-2-5-etc-/"" rel=""nofollow"">http://farmdev.com/thoughts/66/python-3-0-on-mac-os-x-alongside-2-6-2-5-etc-/</a>
). I tried my application on Python 3.0 and the code just freezed on
this line:</p>

<pre><code>self.wfile.write(f.read())
</code></pre>

<p>I searched and got to this bug <a href=""http://bugs.python.org/issue3826"" rel=""nofollow"">http://bugs.python.org/issue3826</a>. I
couldn't understand if there's already a fix for that. But, the
strangest thing was that, when I tried my application on 2.5, it
started freezing on the same spot! I then removed everything I
installed from 3.0, fixed the paths, and it still gives me the error.
I don't know what else to do.</p>

<p>The app works fine on 2.5, because I tried it on another computer.</p>

<p>Thanks for your help.</p>
"
524068,15595,2009-02-07T16:30:31Z,0,Insert Command into Bash Shell,"<p>Is there any way to inject a command into a bash prompt in Linux? I am working on a command history app - like the Ctrl+R lookup but different. I am using python for this.</p>

<p>I will show a list of commands from history based on the user's search term - if the user presses enter, the app will execute the command and print the results. So far, so good.</p>

<p>If the user chooses a command and then press the right or left key, I want to insert the command into the prompt - so that the user can edit the command before executing it.</p>

<p>If you are on Linux, just fire up a bash console, press Ctrl+r, type cd(or something), and then press the right arrow key - the selected command will be shown at the prompt. This is the functionality I am looking for - but I want to know how to do that from within python.</p>
"
524147,NA,2009-02-07T17:21:41Z,3,Is there a Python equivalent of Groovy/Grails for Java,"<p>I'm thinking of something like Jython/Jango? Does this exist? Or does Jython allow you to do everything-Python in Java including Django (I'm not sure how Jython differs from Python)?</p>
"
524214,4712,2009-02-07T17:54:54Z,8,How to externally populate a Django model?,"<p>What is the best idea to fill up data into a Django model from an external source?</p>

<p>E.g. I have a model Run, and runs data in an XML file, which changes weekly.</p>

<p>Should I create a view and call that view URL from a curl cronjob (with the advantage that that data can be read anytime, not only when the cronjob runs), or create a python script and install that script as a cron (with DJANGO _SETTINGS _MODULE variable setup before executing the script)?</p>
"
524291,42584,2009-02-07T18:22:48Z,5,How to 'zoom' in on a section of the Mandelbrot set?,"<p>I have created a Python file to generate a Mandelbrot set image. The original maths code was not mine, so I do not understand it - I only heavily modified it to make it about 250x faster (Threads rule!).</p>

<p>Anyway, I was wondering how I could modify the maths part of the code to make it render one specific bit. Here is the maths part:</p>

<pre><code>for y in xrange(size[1]):
        coords = (uleft[0] + (x/size[0]) * (xwidth),uleft[1] - (y/size[1]) * (ywidth))
        z = complex(coords[0],coords[1])
        o = complex(0,0)
        dotcolor = 0  # default, convergent
        for trials in xrange(n):
            if abs(o) &lt;= 2.0:
                o = o**2 + z
            else:
                dotcolor = trials
                break  # diverged
        im.putpixel((x,y),dotcolor)
</code></pre>

<p>And the size definitions:</p>

<pre><code>size1 = 500
size2 = 500
n=64
box=((-2,1.25),(0.5,-1.25))
plus = size[1]+size[0]
uleft = box[0]
lright = box[1]
xwidth = lright[0] - uleft[0]
ywidth = uleft[1] - lright[1]
</code></pre>

<p>what do I need to modify to make it render a certain section of the set?</p>
"
524548,1304,2009-02-07T20:43:52Z,25,Regular expression to detect semi-colon terminated C++ for & while loops,"<p>In my Python application, I need to write a regular expression that matches a C++ <code>for</code> or <code>while</code> loop that has been terminated with a semi-colon (<code>;</code>). For example, it should match this:</p>

<pre><code>for (int i = 0; i &lt; 10; i++);
</code></pre>

<p>... but not this:</p>

<pre><code>for (int i = 0; i &lt; 10; i++)
</code></pre>

<p>This looks trivial at first glance, until you realise that the text between the opening and closing parenthesis may contain other parenthesis, for example:</p>

<pre><code>for (int i = funcA(); i &lt; funcB(); i++);
</code></pre>

<p>I'm using the python.re module. Right now my regular expression looks like this (I've left my comments in so you can understand it easier):</p>

<pre><code># match any line that begins with a ""for"" or ""while"" statement:
^\s*(for|while)\s*
\(  # match the initial opening parenthesis
    # Now make a named group 'balanced' which matches a balanced substring.
    (?P&lt;balanced&gt;
        # A balanced substring is either something that is not a parenthesis:
        [^()]
        | # …or a parenthesised string:
        \( # A parenthesised string begins with an opening parenthesis
            (?P=balanced)* # …followed by a sequence of balanced substrings
        \) # …and ends with a closing parenthesis
    )*  # Look for a sequence of balanced substrings
\)  # Finally, the outer closing parenthesis.
# must end with a semi-colon to match:
\s*;\s*
</code></pre>

<p>This works perfectly for all the above cases, but it breaks as soon as you try and make the third part of the for loop contain a function, like so:</p>

<pre><code>for (int i = 0; i &lt; 10; doSomethingTo(i));
</code></pre>

<p>I think it breaks because as soon as you put some text between the opening and closing parenthesis, the ""balanced"" group matches that contained text, and thus the <code>(?P=balanced)</code> part doesn't work any more since it won't match (due to the fact that the text inside the parenthesis is different).</p>

<p>In my Python code I'm using the VERBOSE and MULTILINE flags, and creating the regular expression like so:</p>

<pre><code>REGEX_STR = r""""""# match any line that begins with a ""for"" or ""while"" statement:
^\s*(for|while)\s*
\(  # match the initial opening parenthesis
    # Now make a named group 'balanced' which matches
    # a balanced substring.
    (?P&lt;balanced&gt;
        # A balanced substring is either something that is not a parenthesis:
        [^()]
        | # …or a parenthesised string:
        \( # A parenthesised string begins with an opening parenthesis
            (?P=balanced)* # …followed by a sequence of balanced substrings
        \) # …and ends with a closing parenthesis
    )*  # Look for a sequence of balanced substrings
\)  # Finally, the outer closing parenthesis.
# must end with a semi-colon to match:
\s*;\s*""""""

REGEX_OBJ = re.compile(REGEX_STR, re.MULTILINE| re.VERBOSE)
</code></pre>

<p>Can anyone suggest an improvement to this regular expression? It's getting too complicated for me to get my head around.</p>
"
524714,42974,2009-02-07T22:21:50Z,20,Does Python have class prototypes (or forward declarations)?,"<p>I have a series of Python classes in a file. Some classes reference others.</p>

<p>My code is something like this:</p>

<pre><code>class A():
    pass

class B():
    c = C()

class C():
    pass
</code></pre>

<p>Trying to run that, I get <code>NameError: name 'C' is not defined</code>. Fair enough, but is there any way to make it work, or do I have to manually re-order my classes to accommodate? In C++, I can create a class prototype. Does Python have an equivalent?</p>

<p>(I'm actually playing with Django models, but I tried not complicate matters).</p>
"
524734,34537,2009-02-07T22:39:47Z,1,"python, how to tell what type of obj was returned","<p>How can i find out if the obj returned by a func is a int or something else (like a sqlite cursor)</p>
"
524797,9789,2009-02-07T23:18:03Z,7,"Python, SQLite and threading","<p>I'm working on an application that will gather data through HTTP from several places, cache the data locally and then serve it through HTTP.</p>

<p>So I was looking at the following. My application will first create several threads that will gather data at a specified interval and cache that data locally into a SQLite database.   </p>

<p>Then in the main thread start a CherryPy application that will query that SQLite database and serve the data.</p>

<p>My problem is: how do I handle connections to the SQLite database from my threads and from the CherryPy application?</p>

<p>If I'd do a connection per thread to the database will I also be able to create/use an in memory database?</p>
"
524831,1384652,2009-02-08T00:17:52Z,3,Python's equivalent of $this->$varName,"<p>In PHP I can do the following:</p>

<pre><code>$myVar = 'name';

print $myClass-&gt;$myVar;
// Identical to $myClass-&gt;name
</code></pre>

<p>I wish to do this in Python but can't find out how</p>
"
524930,55985,2009-02-08T01:15:16Z,21,"NumPy, PIL adding an image","<p>I'm trying to add two images together using NumPy and PIL. The way I would do this in <a href=""http://en.wikipedia.org/wiki/MATLAB"">MATLAB</a> would be something like:</p>

<pre><code>&gt;&gt; M1 = imread('_1.jpg');
&gt;&gt; M2 = imread('_2.jpg');
&gt;&gt; resM = M1 + M2;
&gt;&gt; imwrite(resM, 'res.jpg');
</code></pre>

<p>I get something like this:</p>

<p><img src=""http://www.deadlink.cc/matlab.jpg"" alt=""alt text""></p>

<p>Using a compositing program and adding the images the MATLAB result seems to be right.</p>

<p>In Python I'm trying to do the same thing like this:</p>

<pre><code>from PIL import Image
from numpy import *

im1 = Image.open('/Users/rem7/Desktop/_1.jpg')
im2 = Image.open('/Users/rem7/Desktop/_2.jpg')

im1arr = asarray(im1)
im2arr = asarray(im2)

addition = im1arr + im2arr

resultImage = Image.fromarray(addition)
resultImage.save('/Users/rem7/Desktop/a.jpg')
</code></pre>

<p>and I get something like this:</p>

<p><img src=""http://www.deadlink.cc/python.jpg"" alt=""alt text""></p>

<p>Why am I getting all those funky colors? I also tried using <code>ImageMath.eval(""a+b"", a=im1, b=im2)</code>, but I get an error about RGB unsupported.</p>

<p>I also saw that there is an <code>Image.blend()</code> but that requires an alpha.</p>

<p>What's the best way to achieve what I'm looking for?</p>

<p>Source Images (images have been removed):</p>

<p><img src=""http://www.deadlink.cc/_1.jpg"" alt=""alt text"">
<img src=""http://www.deadlink.cc/_2.jpg"" alt=""alt text""></p>

<p>Humm, OK, well I added the source images using the add image icon and they show up when I'm editing the post, but for some reason the images don't show up in the post. </p>

<p>(images have been removed) 2013 05 09</p>
"
524992,12983,2009-02-08T02:02:04Z,11,"Django templates: create a ""back"" link?","<p>I'm tooling around with <a href=""http://www.djangoproject.com/"">Django</a> and I'm wondering if there is a simple way to create a ""back"" link to the previous page using the template system.</p>

<p>I figure that in the worst case I can get this information from the request object in the view function, and pass it along to the template rendering method, but I'm hoping I can avoid all this boilerplate code somehow.</p>

<p>I've checked the Django template docs and I haven't seen anything that mentions this explicitly.</p>
"
525056,51025,2009-02-08T02:51:32Z,5,Is there an alternative to rexec for Python sandboxing?,"<p>Implementing a 'sandbox' environment in Python used to be done with the rexec module (<a href=""http://docs.python.org/library/rexec.html"">http://docs.python.org/library/rexec.html</a>).  Unfortunately, it has been deprecated/removed due to some security vulnerabilities.  Is there an alternative?</p>

<p>My goal is to have Python code execute semi-trusted Python scripts.  In a perfect world, calls to any functions outside of a pre-defined set would raise exceptions.  From what I've read about rexec's deprecation, this may not be possible.  So I'll settle for as much as I can get.  I can spawn a separate process to run the scripts, which helps a lot.  But they could still abuse I/O or processor/memory resources.</p>
"
525080,34537,2009-02-08T03:14:04Z,0,python coding speed and cleanest,"<p>Python is pretty clean, and I can code neat apps quickly.
But I notice I have some minor error someplace and I dont find the error at compile but at run time. Then I need to change and run the script again. Is there a way to have it break and let me modify and run?</p>

<p>Also, I dislike how python has no enums. If I were to write code that needs a lot of enums and types, should I be doing it in C++? It feels like I can do it quicker in C++.</p>
"
525244,34537,2009-02-08T06:08:00Z,2,pycurl and unescape,"<p>curl_unescape doesnt seem to be in pycurl, what do i use instead?</p>
"
525272,20794,2009-02-08T06:34:52Z,7,Python truncate lines as they are read,"<p>I have an application that reads lines from a file and runs its magic on each line as it is read. Once the line is read and properly processed, I would like to delete the line from the file. A backup of the removed line is already being kept. I would like to do something like</p>

<pre><code>file = open('myfile.txt', 'rw+')
for line in file:
   processLine(line)
   file.truncate(line)
</code></pre>

<p>This seems like a simple problem, but I would like to do it right rather than a whole lot of complicated seek() and tell() calls.</p>

<p>Maybe all I really want to do is remove a particular line from a file.</p>

<p>After spending far to long on this problem I decided that everyone was probably right and this it just not a good way to do things. It just seemed so elegant solution. What I was looking for was something akin to a FIFO that would just let me pop lines out of a file.</p>
"
525329,109696,2009-02-08T07:26:06Z,15,"Embedding icon in .exe with py2exe, visible in Vista?","<p>I've been trying to embed an icon (.ico) into my ""compyled"" .exe with py2exe.</p>

<p>Py2Exe does have a way to embed an icon:</p>

<pre><code>windows=[{
    'script':'MyScript.py',
    'icon_resources':[(1,'MyIcon.ico')]
}]
</code></pre>

<p>And that's what I am using. The icon shows up fine on Windows XP or lower, but doesn't show at all on Vista. I suppose this is because of the new Vista icon format, which can be in PNG format, up to 256x256 pixels.</p>

<p>So, how can I get py2exe to embed them into my executable, without breaking the icons on Windows XP?</p>

<p>I'm cool with doing it with an external utility rather than py2exe - I've tried <a href=""http://www.rw-designer.com/compile-vista-icon"">this command-line utility</a> to embed it, but it always corrupts my exe and truncates its size for some reason.</p>
"
525405,34537,2009-02-08T08:32:58Z,2,pycurl request exist in header function?,"<p>in C do return -1 when i want to cancel the download in either the header or the write function. In pycurl i get this error</p>

<pre><code>pycurl.error: invalid return value for write callback -1 17
</code></pre>

<p>I dont know what the 17 means but what am i not doing correctly?</p>
"
525635,42974,2009-02-08T12:38:08Z,25,Regular expression: match start or whitespace,"<p><strong>Can a regular expression match whitespace <em>or</em> the start of a string?</strong></p>

<p>I'm trying to replace currency the abbreviation GBP with a £ symbol. I could just match anything starting GBP, but I'd like to be a bit more conservative, and look for certain delimiters around it.</p>

<pre><code>&gt;&gt;&gt; import re
&gt;&gt;&gt; text = u'GBP 5 Off when you spend GBP75.00'

&gt;&gt;&gt; re.sub(ur'GBP([\W\d])', ur'£\g&lt;1&gt;', text) # matches GBP with any prefix
u'\xa3 5 Off when you spend \xa375.00'

&gt;&gt;&gt; re.sub(ur'^GBP([\W\d])', ur'£\g&lt;1&gt;', text) # matches at start only
u'\xa3 5 Off when you spend GBP75.00'

&gt;&gt;&gt; re.sub(ur'(\W)GBP([\W\d])', ur'\g&lt;1&gt;£\g&lt;2&gt;', text) # matches whitespace prefix only
u'GBP 5 Off when you spend \xa375.00'
</code></pre>

<p>Can I do both of the latter examples at the same time?</p>
"
525773,NA,2009-02-08T14:09:04Z,10,Accept Cookies in Python,"<p>How can I accept cookies in a python script?</p>
"
526255,49985,2009-02-08T19:52:22Z,17,Probability distribution in Python,"<p>I have a bunch of keys that each have an unlikeliness variable. I want to randomly choose one of these keys, yet I want it to be more unlikely for unlikely (key, values) to be chosen than a less unlikely (a more likely) object. I am wondering if you would have any suggestions, preferably an existing python module that I could use, else I will need to make it myself.</p>

<p>I have checked out the random module; it does not seem to provide this.</p>

<p>I have to make such choices many millions of times for 1000 different sets of objects each containing 2,455 objects. Each set will exchange objects among each other so the random chooser needs to be dynamic. With 1000 sets of 2,433 objects, that is 2,433 million objects; low memory consumption is crucial. And since these choices are not the bulk of the algorithm, I need this process to be quite fast; CPU-time is limited.</p>

<p>Thx  </p>

<p>Update:</p>

<p>Ok, I tried to consider your suggestions wisely, but time is so limited... </p>

<p>I looked at the binary search tree approach and it seems too risky (complex and complicated). The other suggestions all resemble the ActiveState recipe. I took it and modified it a little in the hope of making more efficient:</p>

<pre><code>def windex(dict, sum, max):
    '''an attempt to make a random.choose() function that makes
    weighted choices accepts a dictionary with the item_key and
    certainty_value as a pair like:
    &gt;&gt;&gt; x = [('one', 20), ('two', 2), ('three', 50)], the
    maximum certainty value (max) and the sum of all certainties.'''
    n = random.uniform(0, 1)
    sum = max*len(list)-sum 
    for key, certainty in dict.iteritems():
        weight = float(max-certainty)/sum
        if n &lt; weight:
            break
        n = n - weight
    return key
</code></pre>

<p>I am hoping to get an efficiency gain from dynamically maintaining the sum of certainties and the maximum certainty. Any further suggestions are welcome. You guys saves me so much time and effort, while increasing my effectiveness, it is crazy. Thx! Thx! Thx!</p>

<p>Update2:</p>

<p>I decided to make it more efficient by letting it choose more choices at once. This will result in an acceptable loss in precision in my algo for it is dynamic in nature. Anyway, here is what I have now:</p>

<pre><code>def weightedChoices(dict, sum, max, choices=10):
    '''an attempt to make a random.choose() function that makes
    weighted choices accepts a dictionary with the item_key and
    certainty_value as a pair like:
    &gt;&gt;&gt; x = [('one', 20), ('two', 2), ('three', 50)], the
    maximum certainty value (max) and the sum of all certainties.'''
    list = [random.uniform(0, 1) for i in range(choices)]
    (n, list) = relavate(list.sort())
    keys = []
    sum = max*len(list)-sum 
    for key, certainty in dict.iteritems():
        weight = float(max-certainty)/sum
        if n &lt; weight:
            keys.append(key)
            if list: (n, list) = relavate(list)
            else: break
        n = n - weight
    return keys
def relavate(list):
    min = list[0]
    new = [l - min for l in list[1:]]
    return (min, new)
</code></pre>

<p>I haven't tried it out yet. If you have any comments/suggestions, please do not hesitate. Thx!</p>

<p>Update3:</p>

<p>I have been working all day on a task-tailored version of Rex Logan's answer. Instead of a 2 arrays of objects and weights, it is actually a special dictionary class; which makes things quite complex since Rex's code generates a random index... I also coded a test case that kind of resembles what will happen in my algo (but I can't really know until I try!). The basic principle is: the more a key is randomly generated often, the more unlikely it will be generated again: </p>

<pre><code>import random, time
import psyco
psyco.full()

class ProbDict():
    """"""
    Modified version of Rex Logans RandomObject class. The more a key is randomly
    chosen, the more unlikely it will further be randomly chosen. 
    """"""
    def __init__(self,keys_weights_values={}):
        self._kw=keys_weights_values
        self._keys=self._kw.keys()
        self._len=len(self._keys)
        self._findSeniors()
        self._effort = 0.15
        self._fails = 0
    def __iter__(self):
        return self.next()
    def __getitem__(self, key):
        return self._kw[key]
    def __setitem__(self, key, value):
        self.append(key, value)
    def __len__(self):
        return self._len
    def next(self):
        key=self._key()
        while key:
            yield key
            key = self._key()
    def __contains__(self, key):
        return key in self._kw
    def items(self):
        return self._kw.items()
    def pop(self, key):  
        try:
            (w, value) = self._kw.pop(key)
            self._len -=1
            if w == self._seniorW:
                self._seniors -= 1
                if not self._seniors:
                    #costly but unlikely:
                    self._findSeniors()
            return [w, value]
        except KeyError:
            return None
    def popitem(self):
        return self.pop(self._key())
    def values(self):
        values = []
        for key in self._keys:
            try:
                values.append(self._kw[key][1])
            except KeyError:
                pass
        return values
    def weights(self):
        weights = []
        for key in self._keys:
            try:
                weights.append(self._kw[key][0])
            except KeyError:
                pass
        return weights
    def keys(self, imperfect=False):
        if imperfect: return self._keys
        return self._kw.keys()
    def append(self, key, value=None):
        if key not in self._kw:
            self._len +=1
            self._kw[key] = [0, value]
            self._keys.append(key)
        else:
            self._kw[key][1]=value
    def _key(self):
        for i in range(int(self._effort*self._len)):
            ri=random.randint(0,self._len-1) #choose a random object
            rx=random.uniform(0,self._seniorW)
            rkey = self._keys[ri]
            try:
                w = self._kw[rkey][0]
                if rx &gt;= w: # test to see if that is the value we want
                    w += 1
                    self._warnSeniors(w)
                    self._kw[rkey][0] = w
                    return rkey
            except KeyError:
                self._keys.pop(ri)
        # if you do not find one after 100 tries then just get a random one
        self._fails += 1 #for confirming effectiveness only
        for key in self._keys:
            if key in self._kw:
                w = self._kw[key][0] + 1
                self._warnSeniors(w)
                self._kw[key][0] = w
                return key
        return None
    def _findSeniors(self):
        '''this function finds the seniors, counts them and assess their age. It
        is costly but unlikely.'''
        seniorW = 0
        seniors = 0
        for w in self._kw.itervalues():
            if w &gt;= seniorW:
                if w == seniorW:
                    seniors += 1
                else:
                    seniorsW = w
                    seniors = 1
        self._seniors = seniors
        self._seniorW = seniorW
    def _warnSeniors(self, w):
        #a weight can only be incremented...good
        if w &gt;= self._seniorW:
            if w == self._seniorW:
                self._seniors+=1
            else:
                self._seniors = 1
                self._seniorW = w
def test():
    #test code
    iterations = 200000
    size = 2500
    nextkey = size 


    pd = ProbDict(dict([(i,[0,i]) for i in xrange(size)]))
    start = time.clock()
    for i in xrange(iterations):
        key=pd._key()
        w=pd[key][0]
        if random.randint(0,1+pd._seniorW-w):
            #the heavier the object, the more unlikely it will be removed
            pd.pop(key)
        probAppend = float(500+(size-len(pd)))/1000
        if random.uniform(0,1) &lt; probAppend:
            nextkey+=1
            pd.append(nextkey)
    print (time.clock()-start)*1000/iterations, ""msecs / iteration with"", pd._fails, ""failures /"", iterations, ""iterations""
    weights = pd.weights()
    weights.sort()
    print ""avg weight:"", float(sum(weights))/pd._len, max(weights), pd._seniorW, pd._seniors, len(pd), len(weights)
    print weights
test()
</code></pre>

<p>Any comments are still welcome. @Darius: your binary trees are too complex and complicated for me; and I do not think its leafs can be removed efficiently... Thx all</p>
"
526325,34537,2009-02-08T20:39:16Z,1,pycurl cancel a transfer and try & except,"<p>How do i cancel a transfer in pycurl? i use to return -1 in libcurl but pycurl doesnt seem to like that (""pycurl.error: invalid return value for write callback -1 17"") return 0 doesnt work either, i get ""error: (23, 'Failed writing body')"" . Also how do i do a try/except with pycurl? i dont see any examples online nor the pycurl examples from the site</p>
"
526457,53687,2009-02-08T21:36:23Z,16,Django form fails validation on a unique field,"<p>I have a simple model that is defined as:</p>

<pre><code>class Article(models.Model):
    slug  = models.SlugField(max_length=50,  unique=True)
    title = models.CharField(max_length=100, unique=False)
</code></pre>

<p>and the form:</p>

<pre><code>class ArticleForm(ModelForm):
    class Meta:
       model = Article
</code></pre>

<p>The validation here fails when I try to update an existing row:</p>

<pre><code> if request.method == 'POST':
     form = ArticleForm(request.POST)

     if form.is_valid(): # POOF
         form.save()
</code></pre>

<p>Creating a new entry is fine, however, when I try to update any of these fields, the validation no longer passes. </p>

<p>The ""errors"" property had nothing, but I dropped into the debugger and deep within the Django guts I saw this:</p>

<p>slug: ""Article with this None already exists""</p>

<p>So it looks like is_valid() fails on a unique value check, but all I want to do is <strong>update</strong> the row.</p>

<p>I can't just do:</p>

<pre><code>form.save(force_update=True)
</code></pre>

<p>... because the form will fail on validation.</p>

<p>This looks like something very simple, but I just can't figure it out.</p>

<p>I am running Django 1.0.2</p>

<p>What croaks is BaseModelForm.validate_unique() which is called on form initialization.</p>
"
526734,2577336,2009-02-09T00:10:49Z,3,subprocess.Popen error,"<p>I am running an msi installer in silent mode and caching logs in the specific file. The following is the command i need to execute.</p>

<p><code>C:\Program Files\ My Installer\Setup.exe  /s /v ""/qn /lv %TEMP%\log_silent.log""</code></p>

<p>I used:</p>

<pre><code>subprocess.Popen(['C:\Program Files\ My Installer\Setup.exe', '/s /v ""/qn /lv %TEMP%\log_silent.log""'],stdout=subprocess.PIPE).communicate()[0]
</code></pre>

<p>to execute the command however it does not recognise the operation and gives error regarding wrong option selected. I have cross-verified and found that the command only works this way.</p>
"
526795,46914,2009-02-09T00:47:25Z,6,How to add custom fields to InlineFormsets?,"<p>I'm trying to add custom fields to an InlineFormset using the following code, but the fields won't show up in the Django Admin.  Is the InlineFormset too locked down to allow this?  My print ""ding"" test fires as expected, I can print out the form.fields and see them all there, but the actual fields are never rendered in the admin.</p>

<p><strong>admin.py</strong></p>

<pre><code>from django.contrib import admin
import models
from django.forms.models import BaseInlineFormSet
from django import forms
from forms import ProgressForm
from django.template.defaultfilters import slugify

class ProgressInlineFormset(BaseInlineFormSet):
    def add_fields(self, form, index):
    	print ""ding""
    	super(ProgressInlineFormset, self).add_fields(form, index)
    	for criterion in models.Criterion.objects.all():
    		form.fields[slugify(criterion.name)] = forms.IntegerField(label=criterion.name)

class ProgressInline(admin.TabularInline):
    model = models.Progress
    extra = 8
    formset = ProgressInlineFormset

class ReportAdmin(admin.ModelAdmin):
    list_display = (""name"", ""pdf_column"",)
    search_fields = [""name"",]
    inlines = (ProgressInline,)

admin.site.register(models.Report, ReportAdmin)
</code></pre>
"
526955,34537,2009-02-09T02:07:21Z,0,python console intrupt? and cross platform threads,"<p>I want my app to loop in python but have a way to quit. Is there a way to get input from the console, scan it for letter q and quick when my app is ready to quit? in C i would just create a pthread that waits for cin, scans, locks a global quit var, change, unlock and exit the thread allowing my app to quit when its done dumping a file or w/e it is doing. DO i do this the same way in python and will it be cross platform? (i see a global single instance in python that was windows specific)</p>
"
527013,49985,2009-02-09T02:46:33Z,1,Dynamic data in postgresql,"<p>I intend to have a python script do many UPDATEs per second on 2,433,000 rows. I am currently trying to keep the dynamic column in python as a value in a python dict. Yet to keep my python dict synchronized with changes in the other columns is becoming more and more difficult or nonviable.</p>

<p>I know I could put the autovacuum on overdrive, but I wonder if this would be enough to catch up with the sheer amount of UPDATEs. If only I could associate a python variable to each row... </p>

<p>I fear that the VACUUM and diskwrite overhead will kill my server?</p>

<p>Any suggestions on how to associate extremely dynamic variables to rows/keys?</p>

<p>Thx </p>
"
527134,62617,2009-02-09T04:48:10Z,6,Python or java which language will exposed a self taught programmer to more computer science concept?,"<p>Of the two which one would exposed someone just learning to program to more
computer science concept/problems?</p>
"
527197,31676,2009-02-09T05:43:35Z,21,Intercepting stdout of a subprocess while it is running,"<p>If this is my subprocess:</p>

<pre><code>import time, sys
for i in range(200):
    sys.stdout.write( 'reading %i\n'%i )
    time.sleep(.02)
</code></pre>

<p>And this is the script controlling and modifying the output of the subprocess:</p>

<pre><code>import subprocess, time, sys

print 'starting'

proc = subprocess.Popen(
    'c:/test_apps/testcr.py',
    shell=True,
    stdin=subprocess.PIPE,
    stdout=subprocess.PIPE  )

print 'process created'

while True:
    #next_line = proc.communicate()[0]
    next_line = proc.stdout.readline()
    if next_line == '' and proc.poll() != None:
        break
    sys.stdout.write(next_line)
    sys.stdout.flush()

print 'done'
</code></pre>

<p>Why is <code>readline</code> and <code>communicate</code> waiting until the process is done running?  Is there a simple way to pass (and modify) the subprocess' stdout real-time?</p>

<p>BTW, I've seen <a href=""http://devlishgenius.blogspot.com/2008/10/logging-in-real-time-in-python.html"">this</a>, but I don't need the logging features (and havn't bothered understand much of it).</p>

<p>I'm on Windows XP.</p>
"
527296,25077,2009-02-09T06:49:07Z,4,How to debug deadlock with python?,"<p>I am developing a multi-threading application, which is deadlocking. </p>

<p>I am using Visual C++ Express 2008 to trace the program. Once the deadlock occurs, I just pause the program and trace. I found that when deadlock occurs, there will be two threads called python from my C++ extension. </p>

<p>All of them use Queue in python code, so I guess the deadlock might caused by Queue. But however, once the extension goes into python code, I can't see nothing but asm code and binary from the VC++ debugger.</p>

<p>I would like to know are there any way to dump the call stack of python code after I paused the program? And how can I know what lock are there in threads caused the deadlock?</p>
"
527314,46914,2009-02-09T07:05:27Z,1,How to modify existing panels in Maya using MEL or Python?,"<p>I've been writing tools in Maya for years using MEL and Python.  I'd consider myself an expert in custom window/gui design in Maya except for one area; modifying existing panels and editors.</p>

<p>Typically, I'm building tools that need totally custom UIs, so its customary for me to build them from scratch.  However, recently I've found myself wanting to add some additional functionality to the layer editor in Maya.  I've seen tutorials that explain how to do this, but now that I want to do it, I can't find any.</p>

<p>Links to tutorials or a brief code snippet to get me started would be great.  I just need to know how to find the layer editor/panel and, say, add a button or text field to it.</p>
"
527420,34537,2009-02-09T08:34:41Z,0,"input and thread problem, python","<p>I am doing something like this in python</p>

<pre><code>class MyThread ( threading.Thread ):
    def run (s):
        try:
            s.wantQuit = 0
            while(not s.wantQuit):
                button = raw_input()
                if button == ""q"":
                    s.wantQuit=1
        except KeyboardInterrupt:
            s.wantQuit = 1

myThread = MyThread ()
myThread.start()

a=5
while not myThread.wantQuit:
    print ""hey""
    if (a == 0):
        break;
    a = a-1;
    time.sleep(1)
#""""""
sys.exit()
</code></pre>

<p>What happens is my app locks up for 5 seconds printing ""hey"" (5 times) THEN i get the raw_input dialog. How can i have the dialog show up so i can quit anytime instead of when my loop runs out?</p>
"
527510,1996,2009-02-09T09:20:17Z,12,How to deploy a Python application with libraries as source with no further dependencies?,"<p><strong>Background</strong>: I have a small Python application that makes life for developers releasing software in our company a bit easier. I build an executable for Windows using py2exe. The application as well as the binary are checked into Subversion. Distribution happens by people just checking out the directory from SVN. The program has about 6 different Python library dependencies (e.g. ElementTree, Mako)</p>

<p><strong>The situation</strong>: Developers want to hack on the source of this tool and then run it without having to build the binary. Currently this means that they need a python 2.6 interpreter (which is fine) and also have the 6 libraries installed locally using easy_install.</p>

<p><strong>The Problem</strong></p>

<ul>
<li>This is not a public, classical open source environment: I'm inside a corporate network, the tool will never leave the ""walled garden"" and we have seriously inconvenient barriers to getting to the outside internet (NTLM authenticating proxies and/or machines without direct internet access).</li>
<li>I want the hurdles to starting to hack on this tool to be minimal: nobody should have to hunt for the right dependency in the right version, they should have to execute as little setup as possible. Optimally the prerequisites would be having a Python installation and just checking out the program from Subversion.</li>
</ul>

<p><strong>Anecdote</strong>: The more self-contained the process is the easier it is to repeat it. I had my machine swapped out for a new one and went through the unpleasant process of having to reverse engineer the dependencies, reinstall distutils, hunting down the libraries online and getting them to install (see corporate internet restrictions above). </p>
"
527629,56183,2009-02-09T10:09:05Z,1,How to embed p tag inside some text using Beautifulsoup?,"<p>I wanted to embed  <code>&lt;p</code>> tag where ever there is a \r\n\r\n.</p>

<p>u""Finally Sri Lanka showed up, prevented their first 5-0 series whitewash, and stopped India at nine ODI wins in a row. \r\n\r\nFor 62 balls Yuvraj Singh played a dream knock, keeping India in the game despite wickets falling around him. \r\n\r\nPerhaps the toss played a big part. This was only the second time Mahela Jayawardene beat Mahendra Singh Dhoni with the coin in the last 11 occasions. \r\n\r\nIt was Jayasuriya who provided Sri Lanka with the springboard. \r\n\r\nThe pyrotechnics may have stopped upon Jayasuriya's dismissal, but the runs kept coming at a fair pace.""</p>

<p>I tried solving this using BeautifulSoup but couldn't find the way out of it. Can anyone through some light on this. Thanks in advance.</p>
"
527757,42580,2009-02-09T11:13:30Z,4,Can I instantiate a subclass object from the superclass,"<p>I have the following example code:</p>

<pre><code>class A(object):
    def __init__(self, id):
        self.myid = id
    def foo(self, x):
        print 'foo', self.myid*x

class B(A):
    def __init__(self, id):
        self.myid = id
        self.mybid = id*2
    def bar(self, x):
        print 'bar', self.myid, self.mybid, x
</code></pre>

<p>When used, the following could be generated:</p>

<pre><code>&gt;&gt;&gt; a = A(2)
&gt;&gt;&gt; a.foo(10)
foo 20
&gt;&gt;&gt; 
&gt;&gt;&gt; b = B(3)
&gt;&gt;&gt; b.foo(10)
foo 30
&gt;&gt;&gt; b.bar(12)
bar 3 6 12
</code></pre>

<p>Now lets say I have some more subclasses <code>class C(A):</code> and <code>class D(A):</code>. I also know that the id will always fit in either B, C or D, but never in 2 of them at the same time.</p>

<p>Now I would like to call A(23) and get an object of the correct subclass. Something like this:</p>

<blockquote>
<pre><code>&gt;&gt;&gt; type(A(2))
&lt;class '__main__.B'&gt;
&gt;&gt;&gt; type(A(22))
&lt;class '__main__.D'&gt;
&gt;&gt;&gt; type(A(31))
&lt;class '__main__.C'&gt;
&gt;&gt;&gt; type(A(12))
&lt;class '__main__.B'&gt;
</code></pre>
</blockquote>

<p>Is this impossible or is it possible but just bad design? How should problems like this be solved?</p>
"
527919,78374,2009-02-09T12:19:02Z,2,How to properly organize a package/module dependency tree?,"<p>Good morning,</p>

<p>I am currently writing a python library. At the moment, modules and classes are deployed in an unorganized way, with no reasoned design. As I approach a more official release, I would like to reorganize classes and modules so that they have a better overall design. I drew a diagram of the import dependencies, and I was planning to aggregate classes by layer level. Also, I was considering some modification to the classes so to reduce these dependencies.</p>

<p>What is your strategy for a good overall design of a potentially complex and in-the-making python library? Do you have interesting suggestions ?</p>

<p>Thanks</p>

<p><b>Update:</b></p>

<p>I was indeed looking for a rule of thumb. For example, suppose this case happens (<strong>init</strong>.py removed for clarity)</p>

<pre><code>foo/bar/a.py
foo/bar/b.py
foo/hello/c.py
foo/hello/d.py
</code></pre>

<p>now, if you happen to have d.py importing bar.b and a.py importing hello.c, I would consider this a bad setting. Another case would be</p>

<pre><code>foo/bar/a.py
foo/bar/baz/b.py
foo/bar/baz/c.py
</code></pre>

<p>suppose that both a.py and b.py import c. you have three solutions:
1) b imports c, a import baz.c
2) you move c in foo/bar. a.py imports c, b.py imports .c 
3) you move c somewhere else (say foo/cpackage/c.py) and then both a and b import cpackage.c</p>

<p>I tend to prefer 3), but if c.py has no meaning as a standalone module, for example because you want to keep it ""private"" into the bar package, I would preferentially go for 1).</p>

<p>There are many other similar cases. My rule of thumb is to reduce the number of dependencies and crossings at a minimum, so to prevent a highly branched, highly interweaved setup, but I could be wrong. </p>
"
528116,NA,2009-02-09T13:25:34Z,-2,TypeError: 'NoneType' object is not iterable,"<p>I need to process mysql data one row at a time and i have selected all rows put them in a tuple but i get the error above.</p>

<p>what does this mean and how do I go about it?</p>
"
528817,46411,2009-02-09T16:21:49Z,1,Is there a better way (besides COM) to remote-control Excel?,"<p>I'm working on a regression-testing tool that will validate a very large number of Excel spreadsheets. At the moment I control them via COM from a Python script using the latest version of the pywin32 product. Unfortunately COM seems to have a number of annoying drawbacks:</p>

<p>For example, the slightest upset seems to be able to break the connection to the COM-Server, once severed there seems to be no safe way to re-connect to the Excel application. There's absolutely no safety built into the COM Application object.</p>

<p>The Excel COM interface will not allow me to safely remote-control two seperate instances of the Excel application operating on the same workbook file, even if they are read-only.</p>

<p>Also when something does go wrong I seldom get any useful error-messages... at best I can except a numerical error-code or a barely useful message such as ""An Exception has occurred"". It's almost impossible to know why something went wrong.</p>

<p>Finally, COM lacks the ability to control some of the most fundamental aspects of Excel? For example there's no way to do a guaranteed close of just the Excel process that a COM client is connected to. You cannot even use COM to find Excel's PID.</p>

<p><strong>So what if I were to completely abandon COM?</strong> Is there an alternative way to control Excel? </p>

<p>All I want to do is run macros, open and close workbooks and read and write cell-ranges? Perhaps some .NET experts know a trick or two which have not yet bubbled into the Python community? What about you office-hackers? Could there be a better way to get at Excel's innards than COM?</p>
"
529034,13203,2009-02-09T17:15:42Z,19,Python: Pass or Sleep for long running processes?,"<p>I am writing an queue processing application which uses threads for waiting on and responding to queue messages to be delivered to the app.  For the main part of the application, it just needs to stay active.  For a code example like:</p>

<pre>
while True:
  pass
</pre>

<p>or</p>

<pre>
while True:
  time.sleep(1)
</pre>

<p>Which one will have the least impact on a system?  What is the preferred way to do nothing, but keep a python app running?</p>
"
529395,51649,2009-02-09T19:00:14Z,3,Python Script: Print new line each time to shell rather than update existing line,"<p>I am a noob when it comes to python. I have a python script which gives me output like this:</p>

<pre><code>[last] ZVZX-W3vo9I: Downloading video webpage
[last] ZVZX-W3vo9I: Extracting video information
[download] Destination: myvideo.flv
[download]   9.9% of 10.09M at    3.30M/s ETA 00:02
</code></pre>

<p>The last line keeps getting updated with new values of progress. I want to change this. Instead of updating I want a new line to be printed each time. How can i do this? I think the part concerned is this bit:</p>

<pre><code>def report_progress(self, percent_str, data_len_str, speed_str, eta_str):
    """"""Report download progress.""""""
    self.to_stdout(u'\r[download] %s of %s at %s ETA %s' %
    	(percent_str, data_len_str, speed_str, eta_str), skip_eol=True)
</code></pre>

<p>If more code needs to be seen please let me know so that I can show you what is needed to solve this.</p>

<p>Thank you very much for any help.</p>
"
529424,51816,2009-02-09T19:04:58Z,309,Traverse a list in reverse order in Python,"<p>So I can start from <code>len(collection)</code> and end in <code>collection[0]</code>.</p>

<p>EDIT: Sorry, I forgot to mention I also want to be able to access the loop index.</p>
"
529425,48721,2009-02-09T19:05:40Z,16,Easy_install cache downloaded files,"<p>Is there a way to configure easy_install to avoid having to download the files again when an installation fails?</p>
"
529678,51532,2009-02-09T20:02:17Z,3,"Python, ROOT, and MINUIT integration?","<p>I'm a modest graduate student in a high energy particle physics department. With an unfounded distaste for C/C++ and a founded love of python, I have resorted to python for my data analysis so far (just the easy stuff) and am about to attempt backing python scripts against ROOT libraries and, particularly, utilize MINUIT for some parameter minimization.</p>

<p>As well as asking if anyone has any tips for the installation and usage of these, I wondered if it was worth it to even attempt it or just to slip into the ""norm"" of using C/C++, or if things like pyminuit are usable. Or do you think I could wrap entire C/C++ scripts into python code to make use of my existing self-written analysis methods (I have no wrapper experience as of yet). Sorry for the vagueness; I'm headed into a great unknown that far outweighs my current experience.</p>
"
529830,91385,2009-02-09T20:39:31Z,5,Do Python regexes support something like Perl's \G?,"<p>I have a Perl regular expression (shown <a href=""http://stackoverflow.com/questions/529657/how-do-i-write-a-regex-that-performs-multiple-substitutions-on-each-line-except/529735#529735"">here</a>, though understanding the whole thing isn't hopefully necessary to answering this question) that contains the \G metacharacter. I'd like to translate it into Python, but Python doesn't appear to support \G. What can I do?</p>
"
529890,NA,2009-02-09T20:52:34Z,13,Django - How to prepopulate admin form fields,"<p>I know that you can prepopulate admin form fields based on other fields. For example, I have a slug field that is automatically populated based on the title field.</p>

<p>However, I would also like to make other automatic prepopulations based on the date. For example, I have an URL field, and I want it to automatically be set to <a href=""http://example.com/20090209.mp3"" rel=""nofollow"">http://example.com/20090209.mp3</a> where 20090209 is YYYYMMDD. </p>

<p>I would also like to have a text field that automatically starts with something like ""Hello my name is author"" where author is the current user's name. Of course, I also want the person to be able to edit the field. The point is to just make it so the user can fill out the admin form more easily, and not just to have fields that are completely automatic.</p>
"
530114,51816,2009-02-09T21:39:49Z,0,Print method question Python,"<p>In python, what does the 2nd % signifies?</p>

<pre><code>print ""%s"" % ( i )
</code></pre>
"
530127,9161,2009-02-09T21:41:59Z,7,"What is Python's ""built-in method acquire""? How can I speed it up?","<p>I'm writing a Python program with a lot of file access.  It's running surprisingly slowly, so I used cProfile to find out what was taking the time.</p>

<p>It seems there's a <em>lot</em> of time spent in what Python is reporting as ""{built-in method acquire}"".  I have no idea what this method is.  What is it, and how can I speed up my program?</p>
"
530329,5287,2009-02-09T22:25:28Z,0,Why does concatenation work differently in these two samples?,"<p>I am raising exceptions in two different places in my Python code:</p>

<pre><code>holeCards = input(""Select a hand to play: "")
try:
    if len(holeCards) != 4:
        raise ValueError(holeCards + ' does not represent a valid hand.')
</code></pre>

<p>AND <strong>(edited to correct raising code)</strong></p>

<pre><code>def __init__(self, card):
  [...]

  if self.cardFace == -1 or self.cardSuit == -1:
    raise ValueError(card, 'is not a known card.')
</code></pre>

<p>For some reason, the first outputs a concatenated string like I expected:</p>

<pre><code>ERROR: Amsterdam does not represent a valid hand.
</code></pre>

<p>But, the second outputs some weird hybrid of set and string:</p>

<pre><code>ERROR: ('Kr', 'is not a known card.')
</code></pre>

<p>Why is the ""+"" operator behaving differently in these two cases?</p>

<p><strong>Edit:</strong> The call to init looks like this:</p>

<pre><code>  card1 = PokerCard(cardsStr[0:2])
  card2 = PokerCard(cardsStr[2:4])
</code></pre>
"
530480,4985,2009-02-09T23:07:03Z,0,Deploying bluechannel with fastcgi,"<p>I am trying to get a basic blue-channel website running through fcgi, I have a django.fcgi file. How do I do this.
Thank you</p>
"
530526,49701,2009-02-09T23:23:20Z,26,Accessing POST Data from WSGI,"<p>I can't seem to figure out how to access POST data using WSGI. I tried the example on the wsgi.org website and it didn't work. I'm using Python 3.0 right now. Please don't recommend a WSGI framework as that is not what I'm looking for. </p>

<p>I would like to figure out how to get it into a fieldstorage object.</p>
"
530530,9908,2009-02-09T23:25:00Z,56,Python 2.x gotcha's and landmines,"<p>The purpose of my question is to strengthen my knowledge base with Python and get a better picture of it, which includes knowing its faults and surprises.  To keep things specific, I'm only interested in the CPython interpreter.</p>

<p>I'm looking for something similar to what learned from my <a href=""http://stackoverflow.com/questions/512120/php-landmines-in-general"">PHP landmines</a>
question where some of the answers were well known to me but a couple were borderline horrifying.</p>

<p>Update:
   Apparently one maybe two people are upset that I asked a question that's already partially answered outside of Stack Overflow.  As some sort of compromise here's the URL
<a href=""http://www.ferg.org/projects/python_gotchas.html"">http://www.ferg.org/projects/python_gotchas.html</a></p>

<p>Note that one or two answers here already are original from what was written on the site referenced above.</p>
"
530546,91385,2009-02-09T23:30:53Z,2,"Is there a single Python regex that can change all ""foo"" to ""bar"" on lines starting with ""#""?","<p>Is it possible to write a single Python regular expression that can be applied to a multi-line string and change all occurrences of ""foo"" to ""bar"", but only on lines beginning with ""#""?</p>

<p>I was able to get this working in Perl, using Perl's \G regular expression sigil, which matches the end of the previous match. However, Python doesn't appear to support this.</p>

<p>Here's the Perl solution, in case it helps:</p>

<pre><code>my $x =&lt;&lt;EOF;
# foo
foo
# foo foo
EOF

$x =~ s{
        (            # begin capture
          (?:\G|^\#) # last match or start of string plus hash
          .*?        # followed by anything, non-greedily
        )            # end capture
        foo
      }
      {$1bar}xmg;

print $x;
</code></pre>

<p>The proper output, of course, is:</p>

<pre><code># bar
foo
# bar bar
</code></pre>

<p>Can this be done in Python?</p>

<p><hr /></p>

<h2>Edit: Yes, I know that it's possible to split the string into individual lines and test each line and then decide whether to apply the transformation, but please take my word that doing so would be non-trivial in this case. I really do need to do it with a single regular expression.</h2>
"
530601,51816,2009-02-09T23:51:19Z,0,Huge collections in Python,"<p>Basically I am storing millions of vector3 values in a list. But right now the vector3s are defined like so:</p>

<pre><code>[5,6,7]
</code></pre>

<p>which I believe is a list. The values will not be modified nor I need any vector3 functionality.</p>

<p>Is this the most performant way to do this?</p>
"
530645,6209,2009-02-10T00:18:50Z,3,Is there a way to determine if a subdirectory is in the same filesystem from python when using os.walk?,"<p>I'm writing a python script that uses os.walk() to walk a directory tree.  I'd like to give it the ability to skip subdirectories that are mounted to a different file system, the way <code>find -xdev</code> does.  Checking through the documentation on os.walk(), I didn't see any argument to pass in for it to do that automatically.  Is there something I can use to do the filtering myself?  Hopefully something that runs on both Linux and Mac OS X?</p>
"
530682,35781,2009-02-10T00:39:56Z,2,copy & paste isolation with win32com & python,"<p>Is there a way of using python and win32com to copy and paste such that python scripts can run in the background and not mess up the ""users"" copy and paste ability?</p>

<pre><code>from win32com.client import Dispatch
import win32com.client

xlApp = Dispatch(""Excel.Application"")
xlWb = xlApp.Workbooks.Open(filename_xls)
ws = xlWb.Worksheets(1)
xlApp.Visible=False

ws.Range('a1:k%s' % row).select
ws.Range('a1:k%s' % row).cut
ws.Range('a7').select
ws.paste
</code></pre>

<p>assume that the script will be running continuously on a large collection of datasets...</p>

<p>Ok, some more clarity to the question, I need the formating, all of it, so just grabbing t values is of course simple, but not exactly what is needed.</p>

<p>So then let me phrase the question as:
What is there a why to grab both the value and its excel formating in python without the select, copy, and paste routine?</p>
"
530715,66731,2009-02-10T00:53:45Z,0,Django - how to remove cached results from previous form posts?,"<p>I've got a django Form which contains a dictionary of strings.  I've given the form a submit button and a preview button.  When the preview button is pressed after entering some information, a POST is sent, and the strings in the dictionary are automagically recovered (I assume that it's done using session state or something).  This is great, exactly what I wanted.</p>

<p>The problem is that if I don't submit the form, then do a GET (i.e. browse to the page with the form on it), enter some info and hit preview, the information that was stored in the dictionary from the first preview is still there.</p>

<p>How do you clear this information?</p>

<p>The following is my form:</p>

<pre><code>class ListingImagesForm(forms.Form):   
#the following should be indented
def clear_dictionaries(self):
    self.statuses = {}
    self.thumbnail_urls = {}
    self.image_urls = {}

statuses = {}
thumbnail_urls = {}
image_urls = {}

valid_images = SortedDict() #from the django framework
photo_0 = forms.ImageField(required=False, label='First photo')
photo_1 = forms.ImageField(required=False, label='Second photo')

def clean_photo_0(self):
    return self._clean_photo(""photo_0"")

def clean_photo_1(self):
    return self._clean_photo(""photo_1"")


def _clean_photo(self, dataName):
    data = self.cleaned_data[dataName]
    if data != None:
        if data.size &gt; max_photo_size:
            raise forms.ValidationError(""The maximum image size allowed is 500KB"")
        elif data.size == 0:
            raise forms.ValidationError(""The image given is empty."")
        else:
            self.valid_images[dataName] = data
            self.statuses[dataName] = True
            list_of_image_locs = thumbs.save_image_and_thumbs(data.name, data)
            self.image_urls[dataName] = list_of_image_locs[0]
            self.thumbnail_urls[dataName] = list_of_image_locs[1]
    return data
</code></pre>

<p>And here is the view:</p>

<pre><code>@login_required
def add(request):
#the following should be indented
preview = False
added = False
new_listing = None
owner = None

if request.POST:
    form = GeneralListingForm(request.POST)
    image_form = ListingImagesForm(request.POST, request.FILES)

    if image_form.is_valid() and form.is_valid(): 
        new_listing = form.save(commit=False)
        new_listing.owner = request.user.get_profile()

        if request.POST.get('preview', False):
            preview = True
            owner = new_listing.owner

        elif request.POST.get('submit', False):
            new_listing.save()
            for image in image_form.image_urls:
                url = image_form.image_urls[image]
                try:
                    new_image = Image.objects.get(photo=url)
                    new_image.listings.add(new_listing)
                    new_image.save()
                except:
                    new_image = Image(photo=url)
                    new_image.save()
                    new_image.listings.add(new_listing)
                    new_image.save()

            form = GeneralListingForm()
            image_form = ListingImagesForm()
            image_form.clear_dictionaries() 
            added = True

else:
    form = GeneralListingForm()
    image_form = ListingImagesForm()
    image_form.clear_dictionaries()

return render_to_response('add_listing.html', {'form': form, 'image_form' : image_form, 
                                                'preview': preview, 'added': added,
                                                'owner': owner, 'listing': new_listing,
                                                'currentmaintab': 'listings',
                                                'currentcategory': 'all'},
                                                                        context_instance=RequestContext(request))
</code></pre>

<p>I haven't been programming with django or python all that long, so any pointers on fixing up some of the code is welcome :)</p>
"
531157,23657,2009-02-10T05:35:08Z,13,Parsing datetime strings with microseconds,"<p>I have a text file with a lot of datetime strings in isoformat. The strings are similar to this:</p>

<p>'2009-02-10 16:06:52.598800'</p>

<p>These strings were generated using <code>str(datetime_object)</code>. The problem is that, for some reason, <code>str(datetime_object)</code> generates a different format when the datetime object has microseconds set to zero and some strings look like this:</p>

<p>'2009-02-10 16:06:52'</p>

<p>How can I parse these strings and convert them into a <a href=""http://docs.python.org/library/datetime.html#datetime.datetime"">datetime object</a>?</p>

<p>It's very important to get all the data in the object, including microseconds.</p>

<p>I have to use <strong>Python 2.5</strong>, I've found that the format directive <code>%f</code> for microseconds doesn't exist in 2.5.</p>
"
531224,24718,2009-02-10T06:18:56Z,1,Setting up Django on an internal server (os.environ() not working as expected?),"<p>I'm trying to setup Django on an internal company server. (No external connection to the Internet.)</p>

<p>Looking over the server setup documentation it appears that the ""<a href=""http://docs.djangoproject.com/en/dev/howto/deployment/fastcgi/#running-django-on-a-shared-hosting-provider-with-apache"" rel=""nofollow"">Running Django on a shared-hosting provider with Apache</a>"" method seems to be the most-likely to work in this situation.</p>

<p>Here's the server information:</p>

<ul>
<li>Can't install <code>mod_python</code></li>
<li>no root access</li>
<li>Server is SunOs 5.6</li>
<li>Python 2.5</li>
<li>Apache/2.0.46 </li>
<li>I've installed Django (and <a href=""http://trac.saddi.com/flup"" rel=""nofollow"">flup</a>) using the --<a href=""http://docs.python.org/install/index.html#alternate-installation-the-home-scheme"" rel=""nofollow"">prefix option</a> (reading again I probably should've used --home, but at the moment it doesn't seem to matter)</li>
</ul>

<p>I've added the <code>.htaccess</code> file and <code>mysite.fcgi</code> file to my root web directory as mentioned <a href=""http://docs.djangoproject.com/en/dev/howto/deployment/fastcgi/#running-django-on-a-shared-hosting-provider-with-apache"" rel=""nofollow"">here</a>.
When I run the <em>mysite.fcgi</em> script from the server I get my expected output (the correct site HTML output).  But, it won't when trying to access it from a browser.</p>

<p>It seems that it may be a problem with the <code>PYTHONPATH</code> setting since I'm using the prefix option.  </p>

<p>I've noticed that if I run <code>mysite.fcgi</code> from the command-line without setting the <code>PYTHONPATH</code> enviornment variable it throws the following error:</p>

<pre><code>prompt$ python2.5 mysite.fcgi 
 ERROR:
 No module named flup   Unable to load
 the flup package.  In order to run
 django   as a FastCGI application, you
 will need to get flup from  
 http://www.saddi.com/software/flup/  
 If you've already   installed flup,
 then make sure you have it in your
 PYTHONPATH.
</code></pre>

<p>I've added <strong>sys.path.append(prefixpath)</strong> and <strong>os.environ['PYTHONPATH'] = prefixpath</strong> to <code>mysite.fcgi</code>, but if I set the enviornment variable to be empty on the command-line then run <code>mysite.fcgi</code>, I still get the above error.</p>

<p>Here are some command-line results:</p>

<pre><code>&gt;&gt;&gt; os.environ['PYTHONPATH'] = 'Null'
&gt;&gt;&gt;
&gt;&gt;&gt; os.system('echo $PYTHONPATH')
Null
&gt;&gt;&gt; os.environ['PYTHONPATH'] = '/prefix/path'
&gt;&gt;&gt;
&gt;&gt;&gt; os.system('echo $PYTHONPATH')
/prefix/path
&gt;&gt;&gt; exit()
prompt$ echo $PYTHONPATH
Null
</code></pre>

<p>It looks like Python is setting the variable OK, but the variable is only applicable inside of the script.  Flup appears to be distributed as an .egg file, and my guess is that the egg implementation doesn't take into account variables added by <code>os.environ['key'] = value</code> (?) at least when installing via the <code>--prefix</code> option.</p>

<p>I'm not that familiar with .pth files, but it seems that the easy-install.pth file is the one that points to flup:</p>

<pre><code>import sys; sys.__plen = len(sys.path)
./setuptools-0.6c6-py2.5.egg
./flup-1.0.1-py2.5.egg
import sys; new=sys.path[sys.__plen:]; del sys.path[sys.__plen:]; p=getattr(sys,'__egginsert',0); sy
s.path[p:p]=new; sys.__egginsert = p+len(new)
</code></pre>

<p>It looks like it's doing something funky, anyway to edit this or add something to my code so it will find flup?</p>
"
531377,4172,2009-02-10T07:39:57Z,1,What's a way to create flash animations with Python?,"<p>I'm having a set of Python scripts that process the photos. What I would like is to be able to create some kind of flash-presentation out of those images.<br />
Is there any package or 'framework' that would help to do this?</p>
"
531382,361127,2009-02-10T07:43:51Z,19,Adding a shebang causes No such file or directory error when running my python script,"<p>I'm trying to run a python script. It works fine when I run it:</p>

<pre><code>python2.5 myscript.py inpt0
</code></pre>

<p>The problem starts when I add a shebang:</p>

<pre><code>#!/usr/bin/env python2.5
</code></pre>

<p>Result in:</p>

<pre><code>$ myscript.py inpt0
: No such file or directory
</code></pre>

<p>Try 2:</p>

<pre><code>#!/usr/local/bin/python2.5
</code></pre>

<p>Result in:</p>

<pre><code>$ myscript.py inpt0
: bad interpreter: No such file or directoryon2.5
</code></pre>

<p>When I run them directly in the terminal they both work just fine:</p>

<pre><code>$ /usr/local/bin/python2.5
Python 2.5.4 (r254:67916, Feb  9 2009, 12:50:32)
[GCC 3.2.3 20030502 (Red Hat Linux 3.2.3-52)] on linux2
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt;

$ /usr/bin/env python2.5
Python 2.5.4 (r254:67916, Feb  9 2009, 12:50:32)
[GCC 3.2.3 20030502 (Red Hat Linux 3.2.3-52)] on linux2
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt;
</code></pre>

<p>Any hints on how to make this work with shebang?</p>
"
531487,11110,2009-02-10T08:33:55Z,4,DOM Aware Browser Python GUI Widget,"<p>I'm looking for a python browser widget (along the lines of pyQT4's <a href=""http://doc.trolltech.com/3.3/qtextbrowser.html"" rel=""nofollow"">QTextBrowser</a> class or <a href=""http://www.wxpython.org/docs/api/wx.html-module.html"" rel=""nofollow"">wxpython's HTML module</a>) that has events for interaction with the DOM. For example, if I highlight an h1 node, the widget class should have a method that notifies me something was highlighted and what dom properties that node had (<code>&lt;h1&gt;</code>, contents of the tag, sibling and parent tags, etc). Ideally the widget module/class would give access to the DOM tree object itself so I can traverse it, modify it, and re-render the new tree.</p>

<p>Does something like this exist? I've tried looking but I'm unfortunately not able to find it. Thanks in advance!</p>
"
531708,3862,2009-02-10T09:49:39Z,2,Logging output of external program with (wx)python,"<p>I'm writing a GUI for using the oracle exp/imp commands and starting sql-scripts through sqlplus. The subprocess class makes it easy to launch the commands, but I need some additional functionality. I want to get rid of the command prompt when using my wxPython GUI, but I still need a way to show the output of the exp/imp commands.  </p>

<p>I already tried these two methods:</p>

<pre><code>command = ""exp userid=user/pwd@nsn file=dump.dmp""

process = subprocess.Popen(command, stdout=subprocess.PIPE)
output = process.communicate()[0]

process = subprocess.Popen(command, stdout=subprocess.PIPE)
process.wait()
output = process.stdout.read()
</code></pre>

<p>Through one of these methods (forgot which one) I really got the output of exp/imp, but only after the command finishes, which is quite worthless to me, as I need a frequent update during these potentially long running operations. And sqlplus made even more problems, as sqlplus mostly wants some input when an error occurs. When this happens python waits for the process to finish but the user can't see the prompt, so you don't know how long to wait or what to do...  </p>

<p>What I'd like to have is a wrapper that outputs everything I can see on the standard commandline. I want to log this to a file and show it inside a wxPython control.</p>

<p>I also tried the code from this page: <a href=""http://code.activestate.com/recipes/440554/"" rel=""nofollow"">http://code.activestate.com/recipes/440554/</a>
but this can't read the output either.
The OutputWrapper from this answer doesn't work either: <a href=""http://stackoverflow.com/questions/166198/how-can-i-capture-all-exceptions-from-a-wxpython-application"">How can I capture all exceptions from a wxPython application?</a></p>

<p>Any help would be appreciated!</p>

<p><strong>EDIT:</strong><br>
The subprocesses don't seem to flush their output. I already tried it with .readline().<br>
My Tool has to run on windows and unix, so pexpect is no solution if there's no windows version. And using cx_oracle would be extreme overkill as I would have to rebuild the whole functionality of exp, imp and sqlplus.</p>
"
531711,34537,2009-02-10T09:50:22Z,1,"python, sqlite error? db is locked? but it isnt?","<p>I get ""database table is locked"" error in my sqlite3 db. My script is single threaded, no other app is using the program (i did have it open once in ""SQLite Database Browser.exe""). I copied the file, del the original (success) and renamed the copy so i know no process is locking it yet when i run my script everything in table B cannot be written to and it looks like table A is fine. Whats happening?</p>

<p>-edit-
I fixed it but unsure how. I notice the code not doing the correct things (i copied the wrong field) and after fixing it up and cleaning it, it magically started working again.</p>

<p>-edit2-</p>

<p>Someone else posted so i might as well update. I think the problem was i was trying to do a statement with a command/cursor in use.</p>
"
531892,8024,2009-02-10T11:16:41Z,6,Django: Perform case-insensitive lookups by default,"<p>I need to perform case-insensitive queries on <code>username</code> by default
when using the Django Auth framework.</p>

<p>I tried fixing the issue by writing a custom subclass of <code>Queryset</code>
and overriding the <code>_filter_or_exclude</code> method and then using that
subclass in a custom manager for the User model-</p>

<pre><code>from django.db.models import Manager
from django.db.models.query import QuerySet
from django.contrib.auth.models import UserManager

class MyQuerySet(QuerySet):
    def _filter_or_exclude(self, negate, *args, **kwargs):
        if 'username' in kwargs:
            kwargs['username__iexact'] = kwargs['username']
            del kwargs['username']
        return super(MyQuerySet, self)._filter_or_exclude(negate, *args, **kwargs)

class MyUserManager(UserManager):
    def get_query_set(self):
        return MyQuerySet(self.model)

User.objects = MyUserManager()
</code></pre>

<p>But this approach didn't work and I am getting an weird error when I
try doing <code>User.objects.get(username='Foo')</code>.</p>

<p>Any help would be appreciated.</p>

<p><strong>Update</strong>: I am including the exact error that I am getting.</p>

<pre><code>/usr/lib/python2.5/site-packages/django/db/models/query.py in get(self, *args, **kwargs)
    295         keyword arguments.
    296         """"""
--&gt; 297         clone = self.filter(*args, **kwargs)
    298         num = len(clone)
    299         if num == 1:

/usr/lib/python2.5/site-packages/django/db/models/query.py in filter(self, *args, **kwargs)
    481         set.
    482         """"""
--&gt; 483         return self._filter_or_exclude(False, *args, **kwargs)
    484 
    485     def exclude(self, *args, **kwargs):

/home/ghoseb/src/git/ocricket.git/ocricket/user/models.py in _filter_or_exclude(self, negate, *args, **kwargs)
     38             kwargs['username__iexact'] = kwargs['username']
     39             del kwargs['username']
---&gt; 40         return super(MyQuerySet, self)._filter_or_exclude(negate, *args, **kwargs)
     41 
     42 class MyUserManager(UserManager):

/usr/lib/python2.5/site-packages/django/db/models/query.py in _filter_or_exclude(self, negate, *args, **kwargs)
    499             clone.query.add_q(~Q(*args, **kwargs))
    500         else:
--&gt; 501             clone.query.add_q(Q(*args, **kwargs))
    502         return clone
    503 

/usr/lib/python2.5/django/db/models/sql/query.py in add_q(self, q_object, used_aliases)

/usr/lib/python2.5/django/db/models/sql/query.py in add_filter(self, filter_expr, connector, negate, trim, can_reuse, process_extras)

/usr/lib/python2.5/django/db/models/sql/query.py in get_meta(self)

&lt;type 'exceptions.AttributeError'&gt;: 'NoneType' object has no attribute '_meta'
</code></pre>

<p><strong>Update</strong>: By the way, I just wanted to mention that when I copy the logic inside my <code>_filter_or_exclude</code> method into the actual <code>QuerySet</code> class, it works flawlessly.</p>
"
532312,3355,2009-02-10T13:27:29Z,9,Python file indexing and searching,"<p>I have a large set off files (hdf) that I need to enable search for. For Java I would use Lucene for this, as it's a file and document indexing engine. I don't know what the python equivalent would be though.</p>

<p>Can anyone recommend which library I should use for indexing a large collection of files for fast search? Or is the prefered way to roll your own?</p>

<p>I have looked at <a href=""http://lucene.apache.org/pylucene/"">pylucene</a> and <a href=""http://pypi.python.org/pypi/Lupy/0.2.1"">lupy</a>, but both projects seem rather inactive and unsupported, so I am not sure if should rely on them.</p>

<p>Final notes:
Woosh and pylucene seems promising, but woosh is still alpha so I am not sure I want to rely on it, and I have problems compiling pylucene, and there are no actual releases off it. After I have looked a bit more at the data, it's mostly numbers and default text strings, so as off now an indexing engine won't help me. Hopefully these libraries will stabilize and later visitors will find some use for them. </p>
"
532814,4737,2009-02-10T15:31:46Z,1,What tools would you used to write a modular database in Python?,"<p>I am building a modular application in python. The plugins are not known until runtime.</p>

<p>I envisage that many plugins will create/read/update data, which they themselves care about, and other plugins may care about too.</p>

<p>An approach I am considering: </p>

<ul>
<li>one plugin may be concerned with <code>Users</code>. </li>
<li>Another plugin may be interested in one or more email addresses for those users. </li>
<li>The Users plugin would expose the data, but the email data would not be available for joins outside .</li>
</ul>

<p><strong>What strategies/tools would you suggest I start constructing and using a modular database?</strong> Is this something an ORM tool could cater for? Is there any other magic I haven't considered?</p>

<p>I am envisaging that a side effect of a plugin architecture will make it more likely that the data will end up fairly normalized.</p>

<p><strong>Edit</strong>:</p>

<ul>
<li>by plugins, I mean that the consumers of the plugins do not know about them upfront - they don't import them, rather the host plugins discover the extension plugins, or have them injected in.</li>
<li>I am not looking for a database engine/ORM tool that is modular, I am looking to allow plugins to create a modular data model, which can be added to as more plugins are found.</li>
<li>I am happy to write my own, but don't want to badly re-implement something that is already existing and much better</li>
<li>I am happy to write my own, but don't want to implement a weak design where much stronger ones are more obviously suited to Python.</li>
</ul>
"
532934,41613,2009-02-10T16:03:57Z,6,Lightweight pickle for basic types in python?,"<p>All I want to do is serialize and unserialize tuples of strings or ints.</p>

<p>I looked at pickle.dumps() but the byte overhead is significant. Basically it looks like it takes up about 4x as much space as it needs to. Besides, all I need is basic types and have no need to serialize objects.</p>

<p>marshal is a little better in terms of space but the result is full of nasty \x00 bytes. Ideally I would like the result to be human readable.</p>

<p>I thought of just using repr() and eval(), but is there a simple way I could accomplish this without using eval()?</p>

<p>This is getting stored in a db, not a file. Byte overhead matters because it could make the difference between requiring a TEXT column versus a varchar, and generally data compactness affects all areas of db performance.</p>
"
533048,333261,2009-02-10T16:29:23Z,41,"Extend standard python logging, to include the line number where a log method was invoked","<p>Is it possible to somehow decorate/extend the python standard logging system, 
so that when a logging method is invoked it also logs the file and the line number where it was invoked or maybe the method that invoked it.</p>
"
533125,64653,2009-02-10T16:42:14Z,9,How to integrate Django and Cygwin?,"<p>I have a Windows box with cygwin, python and django installed.</p>

<p>Now I want to run django-admin, but when I do I get the error:</p>

<pre><code>$ django-admin.py
c:\Python26\python.exe: can't open file '/usr/bin/django-admin.py': [Errno 2] No such file or directory
</code></pre>
"
533300,5287,2009-02-10T17:18:53Z,15,What does 'self' refer to in a @classmethod?,"<p>I thought I was starting to get a grip on ""the Python way"" of programming. Methods of a class accept self as the first parameter to refer to the instance of the class whose context the method is being called in. The @classmethod decorator refers to a method whose functionality is associated with the class, but which doesn't reference a specific instance.</p>

<p>So, what does the first parameter of a @classmethod (canonically 'self') refer to if the method is meant to be called without an instance reference?</p>
"
533321,64673,2009-02-10T17:25:31Z,3,Disable pixmap background defined by GTK theme per application,"<p>For our (open source) fullscreen text editor we're changing background colors of <code>gtk.Window</code>, <code>gtk.Fixed</code>, etc. to custom colors. This works fine, but some <a href=""http://en.wikipedia.org/wiki/GTK%2B"" rel=""nofollow"">GTK</a> themes (e.g. <a href=""http://sourceforge.net/projects/mac4lin/"" rel=""nofollow"">Mac4Lin</a>) define background pixmaps instead of background colors for some widgets. Those background pixmaps won't go away when calling modify_bg() methods of those widgets.</p>

<p>I know I can set pixmaps with <code>bg_pixmap[NORMAL] = 'blabla.png'</code> and that I can define my own gtkrc overrides with gtk.rc_parse_string(). But I don't know how to unset <code>bg_pixmap[NORMAL]</code>.</p>

<p>So, how would I do that?</p>
"
533382,8206,2009-02-10T17:40:05Z,32,Dynamic/runtime method creation (code generation) in Python,"<p>I need to generate code for a method at runtime. It's important to be able to run arbitrary code and have a docstring.</p>

<p>I came up with a solution combining <code>exec</code> and <code>setattr</code>, here's a dummy example:</p>

<pre><code>class Viking(object):
    def __init__(self):
        code = '''
            def dynamo(self, arg):
                """""" dynamo's a dynamic method!
                """"""
                self.weight += 1
                return arg * self.weight
            '''
        self.weight = 50

        d = {}
        exec code.strip() in d
        setattr(self.__class__, 'dynamo', d['dynamo'])


if __name__ == ""__main__"":
    v = Viking()
    print v.dynamo(10)
    print v.dynamo(10)
    print v.dynamo.__doc__
</code></pre>

<p>Is there a better / safer / more idiomatic way of achieving the same result?</p>
"
533398,20712,2009-02-10T17:44:23Z,2,"In python 2.4, how can I execute external commands with csh instead of bash?","<p>Without using the new 2.6 subprocess module, how can I get either os.popen or os.system to execute my commands using the tcsh instead of bash?  I need to source some scripts which are written in tcsh before executing some other commands and I need to do this within python2.4.</p>

<p>EDIT
Thanks for answers using 'tcsh -c', but I'd like to avoid this because I have to do escape madness.  The string will be interpreted by bash and then interpreted by tcsh.  I'll have to do something like:</p>

<pre><code>os.system(""tcsh -c '""+re.compile(""'"").sub(r""""""'""'""'"""""",my_cmd)+""'"")
</code></pre>

<p>Can't I just tell python to open up a 'tcsh' sub-process instead of a 'bash' subprocess?  Is that possible?</p>

<p>P.S.
I realize that bash is the cat's meow, but I'm working in a corporate environment and I'm going to choose to <em>not</em> fight a tcsh vs bash battle -- bigger fish to fry.</p>
"
533631,55155,2009-02-10T18:50:42Z,540,"What is a mixin, and why are they useful?","<p>In ""<a href=""http://rads.stackoverflow.com/amzn/click/0596009259"">Programming Python</a>"", Mark Lutz mentions ""mixins"". I'm from a C/C++/C# background and I have not heard the term before. What is a mixin? </p>

<p>Reading between the lines of <a href=""http://books.google.com/books?id=5zYVUIl7F0QC&amp;pg=RA1-PA584&amp;lpg=RA1-PA584&amp;dq=programming+python+guimixin&amp;source=bl&amp;ots=HU833giXzH&amp;sig=jwLpxSp4m_VbOYQ897UDkGNx_2U&amp;hl=en&amp;ei=x8iRSaTTF5iq-ganpbGPCw&amp;sa=X&amp;oi=book_result&amp;resnum=3&amp;ct=result"">this example</a> (which I've linked to because it's quite long), I'm presuming it's a case of using multiple inheritance to extend a class as opposed to 'proper' subclassing. Is this right? </p>

<p>Why would I want to do that rather than put the new functionality into a subclass? For that matter, why would a mixin/multiple inheritance approach be better than using composition?</p>

<p>What separates a mixin from multiple inheritance? Is it just a matter of semantics?</p>
"
533726,10040,2009-02-10T19:12:06Z,5,How do I use the the Django ORM to query this many-to-many example?,"<p>I have the following models:</p>

<pre><code>class Author(models.Model):
  author_name = models.CharField()

class Book(models.Model):
  book_name = models.CharField()

class AuthorBook(models.Model):
  author_id = models.ForeignKeyField(Author)
  book_id = models.ForeignKeyField(Book)
</code></pre>

<p>With that being said, I'm trying to emulate this query using the Django ORM (select all of the books written by a specific author, noting that Authors can have many books and Books can have many Authors):</p>

<pre><code>SELECT book_name 
FROM authorbook, book
WHERE authorbook.author_id = 1
AND authorbook.book_id = book.id
</code></pre>

<p>I've read <a href=""http://www.djangoproject.com/documentation/models/many_to_many/"">this FAQ page</a> on the Django website, but before I modify my model structure and remove AuthorBook, I was curious if I could emulate that query using the current structure.</p>
"
533905,41613,2009-02-10T19:54:17Z,131,Get the cartesian product of a series of lists in Python,"<p>How can I get the Cartesian product (every possible combination of values) from a group of lists?</p>

<p>Input: </p>

<pre><code>somelists = [
   [1, 2, 3],
   ['a', 'b'],
   [4, 5]
]
</code></pre>

<p>Desired output:</p>

<pre><code>[(1, 'a', 4), (1, 'a', 5), (1, 'b', 4), (1, 'b', 5), (2, 'a', 4), (2, 'a', 5) ...]
</code></pre>
"
534608,NA,2009-02-10T22:49:02Z,3,Python Golf: what's the most concise way of turning this list of lists into a dictionary:,"<p>I have a list of lists that looks like this:</p>

<pre><code>[['Tom', 'Dick'], ['Harry', 'John', 'Mike'], ['Bob']]
</code></pre>

<p>and I want to turn it into a dictionary where each key is a name and each value is a number corresponding to the position of its sublist in the list:</p>

<pre><code>{'Tom': 0, 'Dick': 0, 'Harry': 1, 'John': 1, 'Mike': 1, 'Bob': 2}
</code></pre>

<p>I tried various list comprehensions, but I couldn't get it to work right with the nested lists. I could use a nested loop, like this:</p>

<pre><code>names = [['Tom', 'Dick'], ['Harry', 'John', 'Mike'], ['Bob']]
names_dict = {}
for i, name_sublist in enumerate(names):
    for name in name_sublist:
        names_dict[name] = i
</code></pre>

<p>but I suspect there is a shorter, more elegant way of doing it.</p>
"
534839,59180,2009-02-10T23:51:21Z,245,How to create a GUID/UUID in Python,"<p>How do I create a GUID in Python that is platform independent? I hear there is a method using ActivePython on Windows but it's Windows only because it uses COM. Is there a method using plain Python?</p>
"
534855,51816,2009-02-10T23:57:22Z,33,Subtracting 2 lists in Python,"<p>Right now I have vector3 values represented as lists. is there a way to subtract 2 of these like vector3 values, like</p>

<pre><code>[2,2,2] - [1,1,1] = [1,1,1]
</code></pre>

<p>Should I use tuples?</p>

<p>If none of them defines these operands on these types, can I define it instead?</p>

<p>If not, should I create a new vector3 class?</p>
"
535331,50,2009-02-11T03:42:33Z,2,practice with threads in python,"<p>I know that Python has a <a href=""http://docs.python.org/c-api/init.html#thread-state-and-the-global-interpreter-lock"" rel=""nofollow"">global lock</a> and i've read Glyph's explaination of <a href=""http://stackoverflow.com/questions/203912/does-python-support-multiprocessor-multicore-programming/204150#204150"">python multithreading</a>. But I still want to try it out. What I decided to do as an easy (conceptually) task was to do horizontal and vertical edge detection on a picture. </p>

<p>Here's what's happening (pseudocode):</p>

<pre><code>for pixels in picture:
    apply sobel operator horizontal
for pixels in picture:
    apply sobel operator vertical
</code></pre>

<p><a href=""http://en.wikipedia.org/wiki/Sobel_operator"" rel=""nofollow"">info on sobel operator</a>.</p>

<p>These two loops can run completely independent of each other, and so would be prime candidates for multithreading. (running these two loops on any significantly large picture can take 10+ seconds). However, when I have tried to use the <code>threading</code> module in python, it takes twice as long because of the global lock. My question is should I abandon all hope of doing this in two threads in python and try in another language? If i can forge ahead, what module(s) should I use? If not, what language should I experiment in?</p>
"
535426,38140,2009-02-11T04:22:19Z,3,Python libraries to construct classes from a relational database? (ORM in reverse),"<p>Are there any Python object-relational mapping libraries that, given a database schema, can generate a set of Python classes? I know that the major libraries such as <a href=""http://www.sqlobject.org/"" rel=""nofollow"">SQLObject</a>, <a href=""http://www.sqlalchemy.org/"" rel=""nofollow"">SQLAlchemy</a>, and <a href=""http://www.djangoproject.com/"" rel=""nofollow"">Django</a>'s internal SQL ORM library do a very good job of creating a DB schema given a set of classes, but I'm looking for a library that works in reverse.</p>

<p>There is a <a href=""http://stackoverflow.com/questions/362929/is-there-a-perl-orm-with-database-reverse-engineering"">related question for Perl libraries</a> on Stack Overflow.</p>
"
535743,9161,2009-02-11T07:12:34Z,3,How can I create a tag in Jinja that contains values from later in the template?,"<p>I'm using Jinja2, and I'm trying to create a couple tags that work together, such that if I have a template that looks something like this:</p>

<pre><code>{{ my_summary() }}
... arbitrary HTML ...
{{ my_values('Tom', 'Dick', 'Harry') }}
... arbitrary HTML ...
{{ my_values('Fred', 'Barney') }}
</code></pre>

<p>I'd end up with the following:</p>

<pre><code>This page includes information about &lt;b&gt;Tom&lt;/b&gt;, &lt;b&gt;Dick&lt;/b&gt;, &lt;b&gt;Harry&lt;/b&gt;, &lt;b&gt;Fred&lt;/b&gt;, and &lt;b&gt;Barney&lt;/b&gt;.
... arbitrary HTML ...
&lt;h1&gt;Tom, Dick, and Harry&lt;/h1&gt;
... arbitrary HTML ...
&lt;h1&gt;Fred and Barney&lt;/h1&gt;
</code></pre>

<p>In other words, the my_summary() at the start of the page includes information provided later on in the page.  It should be smart enough to take into account expressions which occur in <code>include</code> and <code>import</code> statements, as well.</p>

<p>What's the best way to do this?</p>
"
535973,34537,2009-02-11T08:57:38Z,1,python sleep == IDE lock up,"<p>When my script sleeps for 50sec my IDE locks up which is very annoying. I cant switch tabs, look through my source, type code, etc. It happens in pylde and pyscripter, i havent tried other IDEs. What can i do to fix this? i'm actually doing </p>

<pre><code>for i in range(0, timeInSeconds): time.sleep(1)
</code></pre>

<p>hoping the IDE will update once per second but it doesnt look that way. What can i do to fix this?</p>
"
536051,NA,2009-02-11T09:19:22Z,0,Outputting data a row at a time from mysql using sqlalchemy,"<p>I want to fetch data from a mysql database using sqlalchemy and use the data in a different class.. Basically I fetch a row at a time, use the data, fetch another row, use the data and so on.. I am running into some problem doing this.. </p>

<p>Basically, how do I output data a row at a time from mysql data?.. I have looked into all tutorials but they are not helping much.</p>
"
536148,35364,2009-02-11T09:49:23Z,15,C++ string parsing (python style),"<p>I love how in python I can do something like:</p>

<pre><code>points = []
for line in open(""data.txt""):
    a,b,c = map(float, line.split(','))
    points += [(a,b,c)]
</code></pre>

<p>Basically it's reading a list of lines where each one represents a point in 3D space, the point is represented as three numbers separated by commas</p>

<p>How can this be done in C++ without too much headache?</p>

<p>Performance is not very important, this parsing only happens one time, so simplicity is more important.</p>

<p>P.S. I know it sounds like a newbie question, but believe me I've written a lexer in D (pretty much like C++) which involves reading some text char by char and recognizing tokens,<br />
it's just that, coming back to C++ after a long period of python, just makes me not wanna waste my time on such things.</p>
"
536370,46411,2009-02-11T11:21:41Z,3,Execute arbitrary python code remotely - can it be done?,"<p>I'm working on a grid system which has a number of very powerful computers. These can be used to execute python functions very quickly. My users have a number of python functions which take a long time to calculate on workstations, ideally they would like to be able to call some functions on a remote powerful server, but have it appear to be running locally.</p>

<p>Python has an old function called ""apply"" - it's mostly useless these days now that python supports the extended-call syntax (e.g. **arguments), however I need to implement something that works a bit like this:</p>

<pre><code>rapply = Rapply( server_hostname ) # Set up a connection
result = rapply( fn, args, kwargs ) # Remotely call the function
assert result == fn( *args, **kwargs ) #Just as a test, verify that it has the expected value.
</code></pre>

<p>Rapply should be a class which can be used to remotely execute some arbitrary code (<code>fn</code> could be literally anything) on a remote server. It will send back the result which the <code>rapply</code> function will return. The ""result"" should have the same value as if I had called the function locally.</p>

<p>Now let's suppose that <code>fn</code> is a user-provided function I need some way of sending it over the wire to the execution server. If I could guarantee that fn was always something simple it could could just be a string containing python source code... but what if it were not so simple? </p>

<p>What if <code>fn</code> might have local dependencies: It could be a simple function which uses a class defined in a different module, is there a way of encapsulating <code>fn</code> and everything that <code>fn</code> requires which is not standard-library? An ideal solution would not require the users of this system to have much knowledge about python development. They simply want to write their function and call it.</p>

<p>Just to clarify, I'm not interested in discussing what kind of network protocol might be used to implement the communication between the client &amp; server. My problem is how to encapsulate a function and its dependencies as a single object which can be serialized and remotely executed. </p>

<p>I'm also not interested in the security implications of running arbitrary code on remote servers - let's just say that this system is intended purely for research and it is within a heavily firewalled environment. </p>
"
537077,11515,2009-02-11T14:38:06Z,8,"Python, Sqlite3 - How to convert a list to a BLOB cell","<p>What is the most elegant method for dumping a list in python into an sqlite3 DB as binary data (i.e., a BLOB cell)?</p>

<pre><code>data = [ 0, 1, 2, 3, 4, 5 ]
# now write this to db as binary data
# 0000 0000
# 0000 0001
# ...
# 0000 0101
</code></pre>
"
537086,23903,2009-02-11T14:41:14Z,30,Reserve memory for list in Python?,"<p>When programming in Python, is it possible to reserve memory for a list that will be populated with a known number of items, so that the list will not be reallocated several times while building it?  I've looked through the docs for a Python list type, and have not found anything that seems to do this.  However, this type of list building shows up in a few hotspots of my code, so I want to make it as efficient as possible.</p>

<p>Edit:  Also, does it even make sense to do something like this in a language like Python?  I'm a fairly experienced programmer, but new to Python and still getting a feel for its way of doing things.  Does Python internally allocate <strong>all</strong> objects in separate heap spaces, defeating the purpose of trying to minimize allocations, or are primitives like ints, floats, etc. stored directly in lists?</p>
"
537196,34537,2009-02-11T15:02:29Z,0,"python, funny business with threads and IDEs?","<p>Maybe i cant do what i want? I want to have 1 thread do w/e it wants and a 2nd thread to recv user input to set the quit flag. using this code i want to enter q anytime to quit or have it timeout after printing hey 6 times</p>

<pre><code>import sys
import threading
import time

class MyThread ( threading.Thread ):
    def run (s):
        try:
            s.wantQuit = 0
            while(not s.wantQuit):
                print ""want input""
                button = raw_input()
                if button == ""q"":
                    s.wantQuit=1
        except KeyboardInterrupt:
            s.wantQuit = 1
            print ""abort with KeyboardInterrupt""
        print ""done mythread""

myThread = MyThread ()
myThread.start()

a=5
while not myThread.wantQuit:
    print ""hey""
    if (a == 0):
        break;
    a = a-1;
    time.sleep(1)
myThread.wantQuit=1
print ""main thread done""
</code></pre>

<p>what happens is instead of two threads i have the main one printing hey 4/6 times, then a dialog poping up asking for my input and the app being locked up until i enter it. WTF?! </p>

<pre><code>want input
hey
hey
hey
hey
abort with KeyboardInterrupt
done mythread
main thread done
</code></pre>

<p>i am using PyScripter (it has debugging), i also tried pydle which doesnt seem to allow me to enter input and locks up eventually after running it once.</p>
"
537399,65136,2009-02-11T15:46:06Z,1,How would you set up a python web server with multiple vhosts?,"<p>I've been told wsgi is the way to go and not mod_python. But more specifically, how would you set up your multi website server environment? Choice of web server, etc?</p>
"
537522,25756,2009-02-11T16:11:44Z,20,Standard python interpreter has a vi command mode?,"<p>this is going to sound pretty ignorant, but:</p>

<p>I was working a bit in the python interpreter (python 2.4 on RHEL 5.3), and suddenly found myself in what seems to be a 'vi command mode'. That is, I can edit previous commands with typical vi key bindings, going left with h, deleting with x...</p>

<p>I love it - the only thing is, I don't know how I got here (perhaps it's through one of the modules I've imported: pylab/matplotlib?).</p>

<p>Can anyone shed some light on how to enable this mode in the interpreter?</p>
"
537542,34537,2009-02-11T16:17:38Z,6,How can I create multiple hashes of a file using only one pass?,"<p>How can I get a MD5, SHA and other hashes from a file but only doing one pass? I have 100mb files, so I'd hate to process those 100MB files multiple times.</p>
"
537689,19929,2009-02-11T16:42:09Z,16,Python IDE built into Visual Studio 2008?,"<p>Hi I develop in Visual Studio 2008 a lot and would like to find an addin like vsphp which  enables intellisense and debugging in Visual Studio. Is IronStudio what I am looking for? As far as I understand IronStudio is a Plugin for .NET.</p>

<p>If there is no Plugin for Visual Studio 2008 whats a great IDE for a python newbee who loves Visual Studio (hate netbeans and eclipse sorry just don't feel the love)</p>

<p>Also if IronPython Studio is an IDE do I want the Isolated or Integrated Version? I don't seem to understand the name.</p>

<p>I installed integrated and got this: <a href=""http://dl.getdropbox.com/u/5910/Jing/2009-02-11_1750.png"">http://dl.getdropbox.com/u/5910/Jing/2009-02-11_1750.png</a> :( no console like here: <a href=""http://www.codeplex.com/IronPythonStudio"">http://www.codeplex.com/IronPythonStudio</a></p>
"
538346,57627,2009-02-11T19:22:15Z,282,Iterating over a string,"<p>In C++, I could do:</p>

<pre><code>for (int i = 0; i &lt; str.length(); ++i)
    std::cout &lt;&lt; str[i] &lt;&lt; std::endl;
</code></pre>

<p>How do I iterate over a string in Python?</p>
"
538551,5287,2009-02-11T20:13:45Z,48,Handling very large numbers in Python,"<p>I've been considering fast poker hand evaluation in Python. It occurred to me that one way to speed the process up would be to represent all the card faces and suits as prime numbers and multiply them together to represent the hands. To whit:</p>

<pre><code>class PokerCard:
    faces = '23456789TJQKA'
    suits = 'cdhs'
    facePrimes = [11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 53, 59, 61]
    suitPrimes = [2, 3, 5, 7]
</code></pre>

<p>AND</p>

<pre><code>    def HashVal(self):
      return PokerCard.facePrimes[self.cardFace] * PokerCard.suitPrimes[self.cardSuit]
</code></pre>

<p>This would give each hand a numeric value that, through modulo could tell me how many kings are in the hand or how many hearts. For example, any hand with five or more clubs in it would divide evenly by 2^5; any hand with four kings would divide evenly by 59^4, etc.</p>

<p>The problem is that a seven-card hand like AcAdAhAsKdKhKs has a hash value of approximately 62.7 quadrillion, which would take considerably more than 32 bits to represent internally. Is there a way to store such large numbers in Python that will allow me to perform arithmetic operations on it?</p>
"
538666,65279,2009-02-11T20:40:43Z,125,Python format timedelta to string,"<p>I'm a Python newbie (2 weeks) and I'm having trouble formatting a <code>datetime.timedelta</code> object.</p>

<p>Here's what I'm trying to do: 
  I have a list of objects and one of the members of the class of the object is a timedelta object that shows the duration of an event.  I would like to display that duration in the format of hours:minutes.</p>

<p>I have tried a variety of methods for doing this and I'm having difficulty.  My current approach is to add methods to the class for my objects that return hours and minutes.  I can get the hours by dividing the timedelta.seconds by 3600 and rounding it. I'm having trouble with getting the remainder seconds and converting that to minutes.</p>

<p>By the way, I'm using <code>Google AppEngine</code> with <code>Django Templates</code> for presentation.</p>

<p>If anyone can help or knows of a better way to resolve this, I would be very happy.</p>

<p>Thanks,</p>
"
538875,13055,2009-02-11T21:25:10Z,1,Parallel/Async Download of S3 data into EC2 in Python?,"<p>I have large data files stored in S3 that I need to analyze. Each batch consists of ~50 files, each of which can be analyzed independently. </p>

<p>I'd like to setup parallel downloads of the S3 data into the EC2 instance, and setup triggers that start the analysis process on each file that downloads.</p>

<p>Are there any libraries that handle an async download, trigger on complete model? </p>

<p>If not, I'm thinking of setting up multiple download processes with pyprocessing, each of which will download and analyze a single piece of the file. Does that sound reasonable or are there better alternatives?</p>
"
539066,5287,2009-02-11T22:10:10Z,21,Return a tuple of arguments to be fed to string.format(),"<p>Currently, I'm trying to get a method in Python to return a list of zero, one, or two strings to plug into a string formatter, and then pass them to the string method. My code looks something like this:</p>

<pre><code>class PairEvaluator(HandEvaluator):
  def returnArbitrary(self):
    return ('ace', 'king')

pe = PairEvaluator()
cards = pe.returnArbitrary()
print('Two pair, {0}s and {1}s'.format(cards))
</code></pre>

<p>When I try to run this code, the compiler gives an IndexError: tuple index out of range.<br>
How should I structure my return value to pass it as an argument to <code>.format()</code>?</p>
"
539116,12138,2009-02-11T22:22:39Z,4,Context processor using Werkzeug and Jinja2,"<p>My application is running on App Engine and is implemented using <a href=""http://werkzeug.pocoo.org/"" rel=""nofollow"">Werkzeug</a> and <a href=""http://jinja.pocoo.org/2/"" rel=""nofollow"">Jinja2</a>. I'd like to have something functionally equivalent of Django's own context processor: a callable that takes a request and adds something to the template context. I already have a ""context processors"" that add something to the template context, but how do I get this <em>request</em> part working? I implemented context processors as a callables that just return a dictionary that later is used to update context.</p>

<p>For example, I'd like to add something that is contained in <code>request.environ</code>.</p>
"
539133,44133,2009-02-11T22:26:47Z,5,Python - Test directory permissions,"<p>In Python on Windows, is there a way to determine if a user has permission to access a directory?  I've taken a look at <code>os.access</code> but it gives false results.</p>

<pre><code>&gt;&gt;&gt; os.access('C:\haveaccess', os.R_OK)
False
&gt;&gt;&gt; os.access(r'C:\haveaccess', os.R_OK)
True
&gt;&gt;&gt; os.access('C:\donthaveaccess', os.R_OK)
False
&gt;&gt;&gt; os.access(r'C:\donthaveaccess', os.R_OK)
True
</code></pre>

<p>Am I doing something wrong?  Is there a better way to check if a user has permission to access a directory?</p>
"
539313,NA,2009-02-11T23:17:52Z,0,Background Image on Jython GUI,"<p>I am trying to create a GUI in Jython. I want to import a background image that I can place buttons and textfields on. I've already created the frame with the buttons and labels in their appropriate places, I just need to know how to import a background image. The GUI is implemented in Jython.</p>
"
539430,65348,2009-02-11T23:59:39Z,4,Connecting to MS SQL Server using python on linux with 'Windows Credentials',"<p>Is there any way to connect to an MS SQL Server database with python on linux using Windows Domain Credentials?</p>

<p>I can connect perfectly fine from my windows machine using Windows Credentials, but attempting to do the same from a linux python with pyodbs + freetds + unixodbc </p>

<pre><code>&gt;&gt;import pyodbc
&gt;&gt;conn = pyodbc.connect(""DRIVER={FreeTDS};SERVER=servername;UID=username;PWD=password;DATABASE=dbname"")
</code></pre>

<p>results in this error:</p>

<pre><code>class 'pyodbc.Error'&gt;: ('28000', '[28000] [unixODBC][FreeTDS][SQL Server]Login incorrect. (20014) (SQLDriverConnectW)')
</code></pre>

<p>I'm sure the password is written correctly, but I've tried many different combinations of username:</p>

<pre><code>DOMAIN\username
DOMAIN\\username
</code></pre>

<p>or even</p>

<pre><code>UID=username;DOMAIN=domain
</code></pre>

<p>to no avail. Any ideas?</p>
"
539578,23903,2009-02-12T00:56:34Z,0,Namespace Specification In Absence of Ambuguity,"<p>Why do some languages, like C++ and Python, require the namespace of an object be specified even when no ambiguity exists?  I understand that there are backdoors to this, like <code>using namespace x</code> in C++, or <code>from x import *</code> in Python.  However, I can't understand the rationale behind not wanting the language to just ""do the right thing"" when only one accessible namespace contains a given identifier and no ambiguity exists.  To me it's just unnecessary verbosity and a violation of DRY, since you're being forced to specify something the compiler already knows.</p>

<p>For example:</p>

<pre><code>import foo  # Contains someFunction().

someFunction()  # imported from foo.  No ambiguity.  Works.
</code></pre>

<p>Vs.</p>

<pre><code>import foo  # Contains someFunction()
import bar  # Contains someFunction() also.

# foo.someFunction or bar.someFunction?  Should be an error only because
# ambiguity exists.
someFunction()
</code></pre>
"
539676,35335,2009-02-12T01:45:41Z,0,Obtaining all possible states of an object for a NP-Complete(?) problem in Python,"<p>Not sure that the example (nor the actual usecase) qualifies as NP-Complete, but I'm wondering about the most Pythonic way to do the below assuming that this was the algorithm available.</p>

<p>Say you have :</p>

<pre><code>class Person:
  def __init__(self):
    self.status='unknown'
  def set(self,value):
    if value:
      self.status='happy'
    else :
      self.status='sad'
  ... blah . Maybe it's got their names or where they live or whatev.
</code></pre>

<p>and some operation that requires a group of Persons. (The key value is here whether the Person is happy or sad.)</p>

<p>Hence, given PersonA, PersonB, PersonC, PersonD - I'd like to end up a list of the possible 2**4 combinations of sad and happy Persons. i.e.</p>

<pre><code>[
[ PersonA.set(true), PersonB.set(true), PersonC.set(true), PersonD.set(true)], 
[ PersonA.set(true), PersonB.set(true), PersonC.set(true), PersonD.set(false)], 
[ PersonA.set(true), PersonB.set(true), PersonC.set(false), PersonD.set(true)], 
[ PersonA.set(true), PersonB.set(true), PersonC.set(false), PersonD.set(false)], 
etc..
</code></pre>

<p>Is there a good Pythonic way of doing this? I was thinking about list comprehensions (and modifying the object so that you could call it and get returned two objects, true and false), but the comprehension formats I've seen would require me to know the number of Persons in advance. I'd like to do this independent of the number of persons.</p>

<p>EDIT : Assume that whatever that operation that I was going to run on this is part of a larger problem set - we need to test out all values of Person for a given set in order to solve our problem. (i.e. I know this doesn't look NP-complete right now =) ) 
any ideas?</p>

<p>Thanks!</p>
"
539899,22306,2009-02-12T03:30:40Z,3,Custom django widget - decompress() arg not populated,"<p>As an exercise I am trying to create a custom django widget for a 24 hour clock. The widget will is a MultiWidget - a select box for each field.</p>

<p>I am trying to follow docs online (kinda sparse) and looking at the Pro Django book, but I can't seem to figure it out. Am I on the right track? I can save my data from the form, but when I prepopulate the form, the form doesn't have the previous values. </p>

<p>It seems the issue is that the decompress() methods 'value' argument is always empty, so I have nothing to interpret.</p>

<pre><code>from django.forms import widgets

import datetime

class MilitaryTimeWidget(widgets.MultiWidget):
    """"""
    A widget that displays 24 hours time selection.
    """"""
    def __init__(self, attrs=None):
        hours = [ (i, ""%02d"" %(i)) for i in range(0, 24) ]
        minutes = [ (i, ""%02d"" %(i)) for i in range(0, 60) ]
        _widgets = (
            widgets.Select(attrs=attrs, choices=hours), 
            widgets.Select(attrs=attrs, choices=minutes),
            )
        super(MilitaryTimeWidget, self).__init__(_widgets, attrs)

    def decompress(self, value):
        print ""******** %s"" %value
        if value:
            return [int(value.hour), int(value.minute)]
        return [None, None]

    def value_from_datadict(self, data, files, name):
        hour = data.get(""%s_0"" %name, None)
        minute = data.get(""%s_1"" %name, None)
        if hour and minute:
            hour = int(hour)
            minute = int(minute)
            return datetime.time(hour=hour, minute=minute)
        return None
</code></pre>

<p>In my form, I am calling the widget like:</p>

<pre><code>arrival_time = forms.TimeField(label=""Arrival Time"", required=False, widget=MilitaryTimeWidget())
</code></pre>
"
540046,46914,2009-02-12T04:40:04Z,0,How to Install Satchmo in Windows?,"<p>I'm working on a Django project that's slated to be using Satchmo for its e-commerce aspects.  I'd like to install it on my Windows Vista machine but some of the cPython modules it needs can't be compiled or easy_installed.</p>

<p>Has anyone been able to get Satchmo working on Windows, and if so, what additional steps does it take over the installation instructions?</p>
"
540342,49701,2009-02-12T07:24:05Z,21,"Python 3.0 urllib.parse error ""Type str doesn't support the buffer API""","<pre><code>  File ""/usr/local/lib/python3.0/cgi.py"", line 477, in __init__
    self.read_urlencoded()
  File ""/usr/local/lib/python3.0/cgi.py"", line 577, in read_urlencoded
    self.strict_parsing):
  File ""/usr/local/lib/python3.0/urllib/parse.py"", line 377, in parse_qsl
    pairs = [s2 for s1 in qs.split('&amp;') for s2 in s1.split(';')]
TypeError: Type str doesn't support the buffer API
</code></pre>

<p>Can anybody direct me on how to avoid this? I'm getting it through feeding data into the <code>cgi.Fieldstorage</code> and I can't seem to do it any other way.</p>
"
540427,2683,2009-02-12T08:04:16Z,7,C to Python via SWIG: can't get void** parameters to hold their value,"<p>I have a C interface that looks like this (simplified):</p>

<pre><code>extern bool Operation(void ** ppData);
extern float GetFieldValue(void* pData);
extern void Cleanup(p);
</code></pre>

<p>which is used as follows:</p>

<pre><code>void * p = NULL;
float theAnswer = 0.0f;
if (Operation(&amp;p))
{
   theAnswer = GetFieldValue(p);
   Cleanup(p);
}
</code></pre>

<p>You'll note that Operation() allocates the buffer p, that GetFieldValue queries p, and that Cleanup frees p. I don't have any control over the C interface -- that code is widely used elsewhere.</p>

<p>I'd like to call this code from Python via <a href=""http://www.swig.org/"" rel=""nofollow"">SWIG</a>, but I was unable to find any good examples of how to pass a pointer to a pointer -- and retrieve its value.</p>

<p>I think the correct way to do this is by use of typemaps, so I defined an interface that would automatically dereference p for me on the C side:</p>

<pre><code>%typemap(in) void** {
   $1 = (void**)&amp;($input);
}
</code></pre>

<p>However, I was unable to get the following python code to work:</p>

<pre><code>import test
p = None
theAnswer = 0.0f
if test.Operation(p):
   theAnswer = test.GetFieldValue(p)
   test.Cleanup(p)
</code></pre>

<p>After calling test.Operation(), p always kept its initial value of None. </p>

<p>Any help with figuring out the correct way to do this in SWIG would be much appreciated. Otherwise, I'm likely to just write a C++ wrapper around the C code that stops Python from having to deal with the pointer. And then wrap <em>that</em> wrapper with SWIG. Somebody stop me!</p>

<p>Edit:</p>

<p>Thanks to <a href=""http://stackoverflow.com/users/7161/jorenko"">Jorenko</a>, I now have the following SWIG interface:</p>

<pre><code>% module Test 
%typemap (in,numinputs=0) void** (void *temp)
{
    $1 = &amp;temp;
}

%typemap (argout) void**
{
    PyObject *obj = PyCObject_FromVoidPtr(*$1, Cleanup);
    $result = PyTuple_Pack(2, $result, obj);
}
%{
extern bool Operation(void ** ppData); 
extern float GetFieldValue(void *p); 
extern void Cleanup(void *p);
%} 
%inline 
%{ 
    float gfv(void *p){ return GetFieldValue(p);} 
%} 

%typemap (in) void*
{
    if (PyCObject_Check($input))
    {
        $1 = PyCObject_AsVoidPtr($input);
    }
}
</code></pre>

<p>The python code that uses this SWIG interface is as follows:</p>

<pre><code>import test 
success, p = test.Operation()
if success:
   f = test.GetFieldValue(p) # This doesn't work 
   f = test.gvp(p) # This works! 
   test.Cleanup(p) 
</code></pre>

<p>Oddly, in the python code, test.GetFieldValue(p) returns gibberish, but test.gfv(p) returns the correct value. I've inserting debugging code into the typemap for void*, and both have the same value of p! The call Any ideas about that?</p>

<p><strong>Update:</strong> I've decided to use ctypes. MUCH easier.</p>
"
540538,64993,2009-02-12T08:53:12Z,3,"Pydev and Pylons inside virtual environment, auto completion won’t work","<p>I have Pydev installed and running without problem with Python 2.6. I installed Pylons 0.9.7 RC 4 into virtual environment, then configured new interpreter to pint into virtual environment and this one is used for pylons project. My problem is that code auto completion does not work for a classes from base library (one that are installed with base python installation), and it works without any problem with classes from virtual environment.</p>

<p>TIA</p>
"
540976,28149,2009-02-12T11:52:40Z,4,Specify a sender when sending mail with Python (smtplib),"<p>I have a very simple piece of code (just for testing):</p>

<pre><code>import smtplib
import time

server = 'smtp.myprovider.com'
recipients = ['johndoe@somedomain.com']
sender = 'me@mydomain.com'
message = 'Subject: [PGS]: Results\n\nBlaBlaBla'

session = smtplib.SMTP(server)

session.sendmail(sender,recipients,message);
</code></pre>

<p>This works but the problem is that e-mail clients don't display a sender.
I want to be able to add a sender name to the e-mail. Suggestions?</p>
"
540991,1384652,2009-02-12T12:04:12Z,2,Python Imaging Library and JPEGs on MacOsX,"<p>I've gotten a hold of <a href=""http://www.pythonware.com/products/pil/"" rel=""nofollow"">Python Imaging Library (PIL)</a> and installed the PNG support stuff just fine. I am however having issues with the<a href=""http://www.ijg.org/"" rel=""nofollow"">JPEG Library</a>.</p>

<p>The default setting for it is nothing but they suggest ""/home/libraries/jpeg-6b"". On the Mac that directory doesn't exist, the library is however installed fine, here's the output of the install.</p>

<pre><code>/usr/bin/install -c cjpeg /usr/local/bin/cjpeg
/usr/bin/install -c djpeg /usr/local/bin/djpeg
/usr/bin/install -c jpegtran /usr/local/bin/jpegtran
/usr/bin/install -c rdjpgcom /usr/local/bin/rdjpgcom
/usr/bin/install -c wrjpgcom /usr/local/bin/wrjpgcom
/usr/bin/install -c -m 644 ./cjpeg.1 /usr/local/man/man1/cjpeg.1
/usr/bin/install -c -m 644 ./djpeg.1 /usr/local/man/man1/djpeg.1
/usr/bin/install -c -m 644 ./jpegtran.1 /usr/local/man/man1/jpegtran.1
/usr/bin/install -c -m 644 ./rdjpgcom.1 /usr/local/man/man1/rdjpgcom.1
/usr/bin/install -c -m 644 ./wrjpgcom.1 /usr/local/man/man1/wrjpgcom.1
</code></pre>

<p>I tried pointing PIL to /usr/local/bin/cjpeg, cjpeg and so on but it never recognised it. Does anybody know what I'm doing wrong?</p>
"
541100,38193,2009-02-12T12:50:15Z,3,Finding top-level xml comments using Python's ElementTree,"<p>I'm parsing an xml file using Python's ElementTree, like that:  </p>

<pre><code>et = ElementTree(file=file(""test.xml""))
</code></pre>

<p>test.xml starts with a few lines of xml comments.  </p>

<p>Is there a way to get those comments from et?</p>
"
541115,65523,2009-02-12T12:54:42Z,3,How to lookup custom ip address field stored as integer in Django-admin?,"<p>In my Django model I've created custom MyIPAddressField which is stored as integer in mysql backend. To do that I've implemented to_python, get_db_prep_value, get_iternal_type (returns PositiveIntegerField) and formfield methods (uses stock IPAddressField as form_class).</p>

<p>The only problem is field lookup in cases like builtin search in ModelAdmin. So, the question is how to implement get_db_prep_lookup to perform string-based lookup types like 'contains', 'regex', 'startswith', 'endswith'?</p>

<p>Mysql has special function inet_ntoa() but I don't know how to instruct ORM to use it in admin search queries. For example: SELECT inet_ntoa(ip_address) as ip FROM table WHERE ip LIKE '%search_term%'. Why custom fields perform type casting on python side but not on database side?</p>

<p>EDIT1: probably there is another way to solve search problem - don't transform integer column to string, but instead split search argument into subnet/mask and perform some binary math to compare them against integer IP value.</p>

<p>EDIT2: this is my code so far:</p>

<p>models.py:</p>

<pre><code>class MyIPField(models.Field):
    empty_strings_allowed = False

    __metaclass__ = models.SubfieldBase

    def get_db_prep_value(self, value):
        if value is None: return None
        return unpack('!L', inet_aton(value))[0]

    def get_internal_type(self):
        return ""PositiveIntegerField""

    def to_python(self, value):
         if type(value).__name__ in ('NoneType', 'unicode'): return value
         return inet_ntoa(pack('!L', value))

    def formfield(self, **kwargs):
        defaults = {'form_class': IPAddressField}
        defaults.update(kwargs)
        return super(MyIPField, self).formfield(**defaults)


class MyManager(models.Manager):
    def get_query_set(self):
        return super(MyManager, self).get_query_set().extra(select={'fakeip': ""inet_ntoa(ip)""})

class Address(models.Model):
    # ... other fields are skipped (Note: there was several foreign keys)
    ip = MyIPField(u""IP address"", unique=True)

    objects = AddressManager()

    def __unicode__(self):
            return self.ip
</code></pre>

<p>admin.py:</p>

<pre><code>class AddressAdmin(admin.ModelAdmin):
    list_display = ('address',)  # ... some fields are skipped from this example
    list_display_links = ('address',)
    search_fields = ('fakeip', )

admin.site.register(Address, AddressAdmin)
</code></pre>

<p>But when I use admin changelist search box, I get error ""Can not resolve keyword 'fakeip' into field. Choices are: ip, id"".  Is it possible to fool Django and make it think that fakeip is a real field?</p>

<p>Using standard IPAddressField (string based) is not appropriate for my needs, as well as switching to Postgres where it stored in proper format.</p>

<p>Also I've looked to Django admin internals (options.py and views/main.py), and I see no easy way to customize ChangeList class or search mechanics without massive copy/pasting. I thought that Django admin is more powerful than it is.</p>
"
541329,15401,2009-02-12T13:53:02Z,20,Is it possible to programmatically construct a Python stack frame and start execution at an arbitrary point in the code?,"<p>Is it possible to programmatically construct a stack (one or more stack frames) in CPython and start execution at an arbitrary code point?  Imagine the following scenario:</p>

<ol>
<li><p>You have a workflow engine where workflows can be scripted in Python with some constructs (e.g. branching, waiting/joining) that are calls to the workflow engine.</p></li>
<li><p>A blocking call, such as a wait or join sets up a listener condition in an event-dispatching engine with a persistent backing store of some sort.</p></li>
<li><p>You have a workflow script, which calls the Wait condition in the engine, waiting for some condition that will be signalled later.  This sets up the listener in the event dispatching engine.</p></li>
<li><p>The workflow script's state, relevant stack frames including the program counter (or equivalent state) are persisted - as the wait condition could occur days or months later.</p></li>
<li><p>In the interim, the workflow engine might be stopped and re-started, meaning that it must be possible to programmatically store and reconstruct the context of the workflow script.</p></li>
<li><p>The event dispatching engine fires the event that the wait condition picks up.</p></li>
<li><p>The workflow engine reads the serialised state and stack and reconstructs a thread with the stack.  It then continues execution at the point where the wait service was called.</p></li>
</ol>

<p><strong>The Question</strong></p>

<p>Can this be done with an unmodified Python interpreter?  Even better, can anyone point me to some documentation that might cover this sort of thing or an example of code that programmatically constructs a stack frame and starts execution somewhere in the middle of a block of code?</p>

<p><strong>Edit:</strong> To clarify 'unmodified python interpreter', I don't mind using the C API (is there enough information in a PyThreadState to do this?) but I don't want to go poking around the internals of the Python interpreter and having to build a modified one.</p>

<p><strong>Update:</strong> From some initial investigation, one can get the execution context with <code>PyThreadState_Get()</code>.  This returns the thread state in a <code>PyThreadState</code> (defined in <code>pystate.h</code>), which has a reference to the stack frame in <code>frame</code>.  A stack frame is held in a struct typedef'd to <code>PyFrameObject</code>, which is defined in <code>frameobject.h</code>.  <code>PyFrameObject</code> has a field <code>f_lasti</code> (props to <a href=""http://stackoverflow.com/questions/541329/is-it-possible-to-programatically-construct-a-python-stack-frame-and-start-execut/541529#541529"">bobince</a>) which has a program counter expressed as an offset from the beginning of the code block.</p>

<p>This last is sort of good news, because it means that as long as you preserve the actual compiled code block, you should be able to reconstruct locals for as many stack frames as necessary and re-start the code.  I'd say this means that it is theoretically possible without having to make a modified python interpereter, although it means that the code is still probably going to be fiddly and tightly coupled to specific versions of the interpreter.</p>

<p>The three remaining problems are: </p>

<ul>
<li><p>Transaction state and 'saga' rollback, which can probably be accomplished by the sort of metaclass hacking one would use to build an O/R mapper.  I did build a prototype once, so I have a fair idea of how this might be accomplished.</p></li>
<li><p>Robustly serialising transaction state and arbitrary locals.  This might be accomplished by reading <code>__locals__</code> (which is available from the stack frame) and programatically constructing a call to pickle.  However, I don't know what, if any, gotchas there might be here.</p></li>
<li><p>Versioning and upgrade of workflows.  This is somewhat trickier, as the system is not providing any symbolic anchors for workflow nodes.  All we have is the anchor
In order to do this, one would have to identify the offsets of all of the entry points and map them to the new version.  Probably feasible to do manually, but I suspect it would be hard to automate.  This is probably the biggest obstacle if you want to support this capability.  </p></li>
</ul>

<p><strong>Update 2:</strong> <code>PyCodeObject</code> (<code>code.h</code>) has a list of addr (<code>f_lasti</code>)-> line number mappings in <code>PyCodeObject.co_lnotab</code> (correct me if wrong here).  This might be used to facilitate a migration process to update workflows to a new version, as frozen instruction pointers could be mapped to the appropriate place in the new script, done in terms of the line numbers.  Still quite messy but a little more promising.</p>

<p><strong>Update 3:</strong> I think the answer to this might be <a href=""http://www.stackless.com"">Stackless Python.</a>  You can suspend tasks and serialise them.  I haven't worked out whether this will also work with the stack as well.</p>
"
541390,85185,2009-02-12T14:11:50Z,599,Extracting extension from filename in Python,"<p>Is there a function to extract the extension from a filename?</p>
"
541926,17523,2009-02-12T15:53:59Z,6,How can one create new scopes in python,"<p>In many languages (and places) there is a nice practice of creating local scopes by creating a block like <a href=""http://stackoverflow.com/questions/541705/is-iftrue-a-good-idea-in-c"">this</a>.</p>

<pre><code>void foo()
{
     ... Do some stuff ...

     if(TRUE)
     {
         char a;
         int b;

         ... Do some more stuff ...
     }

     ... Do even more stuff ...
 }
</code></pre>

<p>How can I implement this  in python without getting the unexpected indent error and without using some sort of <a href=""http://stackoverflow.com/questions/541705/is-iftrue-a-good-idea-in-c""><em>if True:</em></a>  tricks</p>
"
542212,65635,2009-02-12T16:44:14Z,12,How to do variable assignment inside a while(expression) loop in Python?,"<p>I have the variable assignment in order to return the assigned value and compare that to an empty string, directly in the while loop.</p>

<p>Here is how I'm doing it in PHP:</p>

<pre><code>while((name = raw_input(""Name: "")) != ''):
    names.append(name)
</code></pre>

<p>What I'm trying to do is identical to this in functionality:   </p>

<pre><code>names = []
while(True):
    name = raw_input(""Name: "")
    if (name == ''):
        break
    names.append(name)
</code></pre>

<p>Is there any way to do this in Python?</p>
"
542289,4872,2009-02-12T16:59:28Z,14,Are there any good build frameworks written in Python?,"<p>I switched from NAnt to using Python to write build automation scripts.  I am curious if whether any build frameworks worth using that are similar to Make, Ant, and NAnt, but, instead, are Python-based.  For example, Ruby has Rake.  What about Python?</p>
"
542594,39540,2009-02-12T18:10:45Z,3,Should I use Django's contrib applications or build my own?,"<p>The Django apps come with their own features and design. If your requirements don't match 100% with the features of the contib app, you end up customizing and tweaking the app. I feel this involves more effort than just building your own app to fit your requirements.</p>

<p>What do you think?</p>
"
542596,65664,2009-02-12T18:10:51Z,23,Benefits of os.path.splitext over regular .split?,"<p>In <a href=""http://stackoverflow.com/questions/541390/extracting-extension-from-filename-in-python"">this other question</a>, the votes clearly show that the <code>os.path.splitext</code> function is preferred over the simple <code>.split('.')[-1]</code> string manipulation. Does anyone have a moment to explain exactly why that is? Is it faster, or more accurate, or what? I'm willing to accept that there's something better about it, but I can't immediately see what it might be. Might importing a whole module to do this be overkill, at least in simple cases?</p>

<p>EDIT: The OS specificity is a big win that's not immediately obvious; but even I should've seen the ""what if there isn't a dot"" case! And thanks to everybody for the general comments on library usage.</p>
"
542908,61976,2009-02-12T19:42:23Z,0,Help needed to convert code from C# to Python,"<p>Can you please convert this code from C# to Python to be run on IronPython?</p>

<p>I don’t have any experience with Python.</p>

<pre><code>using System;
using Baz;

namespace ConsoleApplication
{
  class Program
  {
    static void Main()
    {
        Portal foo = new Portal(""Foo""); 
        Agent bar = new Agent(""Bar"");

        foo.Connect(""127.0.0.1"", 1234); 
        foo.Add(bar);

        bar.Ready += new Agent.ReadyHandler(bar_Ready);               
    }

    static void bar_Ready(object sender, string msg)
    {    
       Console.WriteLine(msg.body);  
    }
}
}
</code></pre>
"
542929,46821,2009-02-12T19:47:23Z,11,Highlighting unmatched brackets in vim,"<p>I'm getting burned repeatedly by unmatched parentheses while writing python code in vim.  I like how they're handled for C code - vim highlights in red all of the curly braces following the unmatched paren.  I looked at the <code>c.vim</code> syntax file briefly to try to understand it, but the section that handles bracket errors is very complex.  Can anyone explain how that code works and suggest how I might write something similar for python code?</p>

<p>Example C code with unmatched parens:</p>

<pre><code>int main(void
{  /* brace highlighted in red */
}  /* brace highlighted in red */
</code></pre>

<p>Since python code doesn't have curly braces to highlight, we'll have to choose something else (perhaps other parentheses).</p>

<p>BTW, I tried out <a href=""http://www.vim.org/scripts/script.php?script_id=350"">this vim plugin</a> but I wasn't happy with the behavior.</p>

<p>Edit:</p>

<p>I'm using python to generate C++ code (a language that likes parentheses and semicolons).  I have a nasty habit of leaving the trailing paren off a <code>file.write()</code> method call.  It would be nice if I could get vim to make that mistake more visually obvious.</p>

<p><strong>Update:</strong></p>

<p>Ok, here's what I've tried so far.</p>

<pre><code>:syn region pParen transparent start=""("" end="")"" contains=ALL
:syn match pError display "")""
:hi def link pError Error
</code></pre>

<p>Unfortunately, all this does is highlight as an error the right paren of all <strong>balanced</strong> parentheses, the opposite of what I want to do.  I really don't understand what I'm doing here (just copied off of the existing C syntax file).  If anyone could explain what I did (wrong), I would appreciate it.</p>
"
542987,NA,2009-02-12T20:01:23Z,2,Invoking built-in operators indirectly in Python,"<p>Let's say you have a small calculator program that takes numbers and an operator to perform on those numbers as input, then prints out the result of applying the specified operation. So if you input ""4 + 5"" it will print out ""9"". Simple, right? Well what I want to be able to write is something this:</p>

<pre><code>a, op, b = raw_input().split()
print somehowInvokeOperator(op, a, b)
</code></pre>

<p>The problem is that ""somehowInvokeOperator()"" part. Is there anyway to do this without resorting to either (a) eval() or (b) some type of dictionary mapping keys like ""+"" and ""-"" to functions that perform the appropriate operation? getattr() doesn't appear to work for this. I don't really need this code for anything, I'm just curious to see if this can be solved in Python as elegantly as it can in other dynamic languages.</p>
"
543096,6833,2009-02-12T20:31:56Z,-2,"two questions (RFC822, login info) about sending email via python","<h1>1 -</h1>

<p>In my email-sending script, I store spaced-out emails in a string, then I use "", "".join(to.split()). However, it looks like the script only sends to the 1st email - is it something to do with RFC822 format? If so, how can I fix this? </p>

<h1>2 -</h1>

<p>I feel a bit edgy having my password visable in my script. Is there a way to retrieve this info from cookies or saved passwords from firefox?</p>

<p>Thanks in advance!</p>
"
543140,23903,2009-02-12T20:41:14Z,2,Granularity of Paradigm Mixing,"<p>When using a multi-paradigm language such as Python, C++, D, or Ruby, how much do you mix paradigms within a single application?  Within a single module?  Do you believe that mixing the functional, procedural and OO paradigms at a fine granularity leads to clearer, more concise code because you're using the right tool for every subproblem, or an inconsistent mess because you're doing similar things 3 different ways?</p>
"
543196,36330,2009-02-12T20:54:08Z,47,How do I attach a remote debugger to a Python process?,"<p>I'm tired of inserting</p>

<pre><code>import pdb; pdb.set_trace()
</code></pre>

<p>lines into my Python programs and debugging through the console. How do I connect a remote debugger and insert breakpoints from a civilized user interface?</p>
"
543199,65122,2009-02-12T20:54:42Z,2,Add Quotes in url string from file,"<p>I need script to add quotes in url string from url.txt</p>

<p>from <code>http://www.site.com/info.xx</code> to <code>""http://www.site.com/info.xx""</code></p>
"
543399,65122,2009-02-12T21:34:14Z,2,Python string formatting,"<p>I see you guys using</p>

<pre><code>url = '""%s""' % url # This part

&gt;&gt;&gt; url = ""http://www.site.com/info.xx""
&gt;&gt;&gt; print url
http://www.site.com/info.xx
&gt;&gt;&gt; url = '""%s""' % url
&gt;&gt;&gt; print url
""http://www.site.com/info.xx""
</code></pre>

<p>Is it advanced Python? Is there a tutorial for it? How can I learn about it?</p>
"
543466,1179,2009-02-12T21:45:27Z,12,Using different versions of python for different projects in Eclipse,"<p>So, I'm slowly working in some Python 3.0, but I still have a lot of things that rely on 2.5. </p>

<p>But, in Eclipse, every time I change projects between a 3.0 and a 2.5, I need to go through </p>

<p>Project -> Properties -> project type.</p>

<p><strong>Issue 1:</strong> if I just switch the interpreter in the drop down box, that doesn't seem to change anything. I need to click ""click here to configure an interpreter not listed"", and <strong>UP</strong> the interpreter I wish to use. </p>

<p><strong>Issue 2:</strong> That would be fine if I was switching to 3.0 for every project for the rest of my life, but I still am doing a lot of switching between projects and I don't see that changing anytime soon. So, I'm just trying to save a few operations. </p>

<p>Is there a way to configure Eclipse so that it remembers which interpreter I want associated with which project? </p>

<p>What if I created an entirely new workspace? Is ""interpreter"" a property of a workspace? </p>

<p>Also, it doesn't seem to matter what I choose when I create a new project via File -> New -> Pydev Project. Whatever I last selected through ""Properties"" is what eclipse is using.</p>

<p>This is Eclipse 3.4.0, running in Windows XP. </p>
"
543483,15061,2009-02-12T21:47:04Z,3,Struct with a pointer to its own type in ctypes,"<p>I'm trying to map a struct definition using ctypes:</p>

<pre><code>struct attrl {
               struct attrl *next;
               char         *name;
               char         *resource;
               char         *value;
           };
</code></pre>

<p>I'm unsure what to do with the ""next"" field of the struct in the ctypes mapping. A definition like:</p>

<pre><code>class attrl(Structure):
    _fields_ = [
        (""next"", attrl),
        (""name"", c_char_p), 
        (""resource"", c_char_p), 
        (""value"", c_char_p)
    ]
</code></pre>

<p>results in:</p>

<pre><code>NameError: name 'attrl' is not defined
</code></pre>
"
543534,63503,2009-02-12T21:53:42Z,3,Why is KeyboardInterrupt not working in python?,"<p>Why doesn't code like the following catch CTRL-C?</p>

<pre><code>MAXVAL = 10000
STEP_INTERVAL = 10

for i in range(1, MAXVAL, STEP_INTERVAL):
    try:
        print str(i)
    except KeyboardInterrupt:
        break

print ""done""
</code></pre>

<p>My expectation is -- if CTRL-C is pressed while program is running, <code>KeyboardInterrupt</code> is supposed to leave the loop. It does not.</p>

<p>Any help on what I'm doing wrong?</p>
"
544173,15061,2009-02-13T00:11:38Z,12,Mapping a global variable from a shared library with ctypes,"<p>I'd like to map an int value <code>pbs_errno</code> declared as a global in the library <code>libtorque.so</code> using ctypes.</p>

<p>Currently I can load the library like so:</p>

<pre><code>from ctypes import *
libtorque = CDLL(""libtorque.so"")
</code></pre>

<p>and have successfully mapped a bunch of the functions. However, for error checking purposes many of them set the <code>pbs_errno</code> variable so I need access to that as well. However if I try to access it I get:</p>

<pre><code>&gt;&gt;&gt; pytorque.libtorque.pbs_errno
&lt;_FuncPtr object at 0x9fc690&gt;
</code></pre>

<p>Of course, it's not a function pointer and attempting to call it results in a seg fault.</p>

<p>It's declared as <code>int pbs_errno;</code> in the main header and <code>extern int pbs_errno;</code> in the API header files.</p>

<p>Objdump shows the symbol as:</p>

<pre><code>00000000001294f8 g    DO .bss   0000000000000004  Base        pbs_errno
</code></pre>
"
544433,65385,2009-02-13T01:50:48Z,27,How do you verify an RSA SHA1 signature in Python?,"<p>I've got a string, a signature, and a public key, and I want to verify the signature on the string. The key looks like this:</p>

<pre><code>-----BEGIN PUBLIC KEY-----
MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDfG4IuFO2h/LdDNmonwGNw5srW
nUEWzoBrPRF1NM8LqpOMD45FAPtZ1NmPtHGo0BAS1UsyJEGXx0NPJ8Gw1z+huLrl
XnAVX5B4ec6cJfKKmpL/l94WhP2v8F3OGWrnaEX1mLMoxe124Pcfamt0SPCGkeal
VvXw13PLINE/YptjkQIDAQAB
-----END PUBLIC KEY-----
</code></pre>

<p>I've been reading the pycrypto docs for a while, but I can't figure out how to make an RSAobj with this kind of key. If you know PHP, I'm trying to do the following:</p>

<pre><code>openssl_verify($data, $signature, $public_key, OPENSSL_ALGO_SHA1);
</code></pre>

<p>Also, if I'm confused about any terminology, please let me know.</p>
"
544542,30181,2009-02-13T02:41:45Z,8,Python plotting: How can I make matplotlib.pyplot stop forcing the style of my markers?,"<p>I am trying to plot a bunch of data points (many thousands) in Python using <a href=""http://matplotlib.sourceforge.net/index.html"">matplotlib</a> so I need each marker to be very small and precise.  How do I get the smallest most simple marker possible?  I use this command to plot my data:</p>

<pre><code> matplotlib.pyplot( x , y ,'.',markersize=0.1,linewidth=None,markerfacecolor='black')
</code></pre>

<p>Then I can look at it either with <code>pl.show()</code> and then save it.  Or directly use <code>plt.savefig('filename.ps')</code> in the code to save it.  The problem is this: when I use <code>pl.show()</code> to view the file in the GUI it looks great with small tiny black marks, however when I save from the <code>show()</code> GUI to a file or use directly <code>savefig</code> and then view the <code>ps</code> I created it looks different!  Each marker has gained a little blue halo around it (as if it started at each point to connect them with the default blue lines, but did not) and the style is all wrong.  Why does it change the style when saved?  How do I stop python from forcing the style of the markers?  And yes I have looked at some alternative packages like <a href=""http://linil.wordpress.com/2008/09/16/cairoplot-11/"">CairoPlot</a>, but I want to keep using matplotlib for now.</p>

<p><strong>Update:</strong> It turns out that the save to PNG first makes the colors turn out okay, but it forces a conversion of the image when I want to save it again as a <code>.ps</code> later (for inclusion in a PDF) and then I lose quality.  How do I preserve the vector nature of the file and get the right formatting?</p>
"
544597,6007,2009-02-13T03:25:23Z,1,problem ordering by votes with django-voting,"<p>I have a model Post, and a model Vote. Vote (form django-voting) is essentially just a pointer to a Post and -1, 0, or 1. </p>

<p>There is also Tourn, which is a start date and an end date. A Post made between the start and end of a Tourn is submitted to that tournament.</p>

<p>For the sake of rep calculation, I'm trying to find the top 3 winners of a tournament. This is what I have:</p>

<pre><code>    posts = Post.objects.filter(status=2, created_at__range=(tourn.start_date, tourn.end_date))

    start = tourn.start_date - timedelta(days=1)
    end = tourn.end_date + timedelta(days=1)
    qn = connection.ops.quote_name
    ctype = ContentType.objects.get_for_model(Post)

    posts.extra(select={'score': """"""
            SELECT SUM(vote)
            FROM %s
            WHERE content_type_id = %s
            AND object_id = %s.id
            AND voted_at &gt; DATE(%s)
            AND voted_at &lt; DATE(%s)
        """""" % (qn(Vote._meta.db_table), ctype.id, qn(Post._meta.db_table), start, end)},
                order_by=['-score'])

    if tourn.limit_to_category:
        posts.filter(category=tourn.category)

    if len(posts) &gt;= 1:
        tourn_winners_1.append(posts[0].author)
        resp += "" 1: "" + posts[0].author.username + ""\n""

    if len(posts) &gt;= 2:
        tourn_winners_2.append(posts[1].author)
        resp += "" 2: "" + posts[1].author.username + ""\n""

    if len(posts) &gt;= 3:
        tourn_winners_3.append(posts[2].author)
        resp += "" 3: "" + posts[2].author.username + ""\n""
</code></pre>

<p>It seems simple enough, but for some reason the results are wrong.</p>

<p>The query that gets made is thus:</p>

<pre><code>SELECT ""blog_post"".""id"", ""blog_post"".""title"", ""blog_post"".""slug"", ""blog_post"".""a
uthor_id"", ""blog_post"".""creator_ip"", ""blog_post"".""body"", ""blog_post"".""tease"", ""b
log_post"".""status"", ""blog_post"".""allow_comments"", ""blog_post"".""publish"", ""blog_p
ost"".""created_at"", ""blog_post"".""updated_at"", ""blog_post"".""markup"", ""blog_post"".""
tags"", ""blog_post"".""category_id"" FROM ""blog_post"" WHERE (""blog_post"".""status"" =
2  AND ""blog_post"".""created_at"" BETWEEN 2008-12-21 00:00:00 and 2009-01-04 00:00
:00) ORDER BY ""blog_post"".""publish"" DESC
</code></pre>

<p>It seems that posts.extra() isn't getting applied to the query at all...</p>
"
544919,34537,2009-02-13T06:30:06Z,31,Can I print original variable's name in Python?,"<p>I have enum and use the variables like <code>myEnum.SomeNameA</code>, <code>myEnum.SomeNameB</code>, etc.  When I return one of these variables from a function, can I print their names (such as <code>myEnum.SomeNameA</code>) instead of the value they returned?</p>
"
544921,2519,2009-02-13T06:31:11Z,68,Best method for reading newline delimited files in Python and discarding the newlines?,"<p>I am trying to determine the best way to handle getting rid of newlines when reading in newline delimited files in Python.</p>

<p>What I've come up with is the following code, include throwaway code to test.</p>

<pre><code>import os

def getfile(filename,results):
   f = open(filename)
   filecontents = f.readlines()
   for line in filecontents:
     foo = line.strip('\n')
     results.append(foo)
   return results

blahblah = []

getfile('/tmp/foo',blahblah)

for x in blahblah:
    print x
</code></pre>

<p>Suggestions?</p>
"
544923,41713,2009-02-13T06:32:56Z,5,Switching Printer Trays,"<p>I know this question has been asked before, but there was no clear answer.  </p>

<p>How do I change the printer tray programmatically?</p>

<p>I am trying to use python to batch print some PDFs.  I need to print different pages from different trays.  The printer is a Ricoh 2232C.  Is there a way to do it through and Acrobat Reader command line parameter?  I am able to use the Win32 api to find out which bins correspond to which binnames, but that is about it.  Any advice/shortcuts/etc?</p>
"
545294,65967,2009-02-13T09:15:43Z,10,Kerberos authentication with python,"<p>I need to write a script in python to check a webpage, which is protected by kerberos. Is there any possibility to do this from within python and how? The script is going to be deployed on a linux environment with python 2.4.something installed.</p>

<p>dertoni</p>
"
545387,22185,2009-02-13T09:51:40Z,33,Linux: compute a single hash for a given folder & contents?,"<p>Surely there must be a way to do this easily! </p>

<p>I've tried the linux command-line apps sha1sum &amp; md5sum but they seem only to be able to compute hashes of individual files and output a list of hash values, one for each file. </p>

<p>I need to generate a single hash for the entire contents of a folder (not just the filenames).</p>

<p>I'd like to do something like</p>

<pre><code>sha1sum /folder/of/stuff &gt; singlehashvalue
</code></pre>

<p><strong>Edit:</strong> to clarify, my files are at multiple levels in a directory tree, they're not all sitting in the same root folder.</p>
"
545419,65736,2009-02-13T10:03:19Z,5,Using base class constructor as factory in Python?,"<p>I'm using base class constructor as factory and changing class in this constructor/factory to select appropriate class -- is this approach is good python practice or there are more elegant ways? </p>

<p>I've tried to read help about metaclasses but without big success.</p>

<p>Here example of what I'm doing.</p>

<pre><code>class Project(object):
  ""Base class and factory.""
  def __init__(self, url):
      if is_url_local(url):
        self.__class__ = ProjectLocal
      else:
        self.__class__ = ProjectRemote
      self.url = url

class ProjectLocal(Project):
  def do_something(self):
    # do the stuff locally in the dir pointed by self.url

class ProjectRemote(Project):
  def do_something(self):
    # do the stuff communicating with remote server pointed by self.url
</code></pre>

<p>Having this code I can create the instance of ProjectLocal/ProjectRemote via base class Project:</p>

<pre><code>project = Project('http://example.com')
project.do_something()
</code></pre>

<p>I know that alternate way is to using fabric function that will return the class object based on url, then code will looks similar:</p>

<pre><code>def project_factory(url):
      if is_url_local(url):
        return ProjectLocal(url)
      else:
        return ProjectRemote(url)

project = project_factory(url)
project.do_something()
</code></pre>

<p>Is my first approach just matter of taste or it has some hidden pitfalls?</p>
"
545730,48721,2009-02-13T12:20:56Z,9,Tool (or combination of tools) for reproducible environments in Python,"<p>I used to be a java developer and we used tools like ant or maven to manage our development/testing/UAT environments in a standardized way. This allowed us to handle library dependencies, setting OS variables, compiling, deploying, running unit tests, and all the required tasks. Also, the scripts generated guaranteed that all the environments were almost equally configured, and all the task were performed in the same way by all the members of the team. </p>

<p>I'm starting to work in Python now and I'd like your advice in which tools should I use to accomplish the same as described for java.</p>
"
546321,30786,2009-02-13T15:16:25Z,143,How do I calculate the date six months from the current date using the datetime Python module?,"<p>I am using the datetime Python module.  I am looking to calculate the date 6 months from the current date. Could someone give me a little help doing this?</p>

<p>The reason I want to generate a date 6 months from the current date is to produce a Review Date.  If the user enters data into the system it will have a review date of 6 months from the date they entered the data.  </p>
"
546337,NA,2009-02-13T15:22:50Z,22,How Do I Perform Introspection on an Object in Python 2.x?,"<p>I'm using Python 2.x and I have an object I'm summoning from the aether; the documentation on it is not particularly clear.  I would like to be able to get a list of properties for that object and the type of each property.  </p>

<p>Similarly, I'd like to get a list of methods for that object, as well, plus any other information I could find on that method, such as number of arguments and their respective types.</p>

<p>I have a feeling that I am simply missing the correct jargon in my Google searches.  Not that I want to derail with specifics, but it's Active Directory, so that's always fun.</p>
"
546385,25465,2009-02-13T15:37:31Z,5,Generating lists/reports with in-line summaries in Django,"<p>I am trying to write a view that will generate a report which displays all Items within my Inventory system, and provide summaries at a certain point. This report is purely just an HTML template by the way.</p>

<p>In my case, each Item is part of an Order. An Order can have several items, and I want to be able to display SUM based summaries after the end of each order.</p>

<p>So the report kind of looks like this:</p>

<pre><code>Order #25        &lt;Qty&gt; &lt;Qty Sold&gt; &lt;Cost&gt; &lt;Cost Value&gt;
Some Item          2       1       29.99    29.99
Another Item       4       0       10.00    40.00
&lt;Subtotal Line&gt;    6       1       39.99    69.99
Order #26        &lt;Qty&gt; &lt;Qty Sold&gt; &lt;Cost&gt; &lt;Cost Value&gt;
... Etc, you get the point
</code></pre>

<p>Now, I'm perfectly capable of displaying all the values and already have a report showing all the Items, but I have no idea how I can place Subtotals within the report like that without doing <strong>alot</strong> of queries. The Quantity, Qty Sold, and Cost fields are just part of the Item model, and Cost Value is just a simple model function.</p>

<p>Any help would be appreciated. Thanks in advance :-)</p>
"
546479,681,2009-02-13T16:00:06Z,24,Do OO design principles apply to Python?,"<p>It seems like many OO discussions use Java or C# as examples (e.g. Head First Design Patterns).</p>

<p>Do these patterns apply equally to Python?  Or if I follow the design patterns, will I just end up writing Java in Python (which apparently is a very bad thing)?</p>
"
546508,65122,2009-02-13T16:06:29Z,8,How can I split a file in python?,"<p>Is it possible to split a file? For example you have huge wordlist, I want to split it so that it becomes more than one file. How is this possible? </p>
"
546753,NA,2009-02-13T17:01:22Z,2,Multiple-instance Django forum software,"<p>Does anyone know of a django forum plugin that allows each member to have his own forum? If there isn't anything, than what would be the best way to accomplish this with a ""regular"" forum plugin for Django?</p>
"
547450,65122,2009-02-13T19:59:51Z,2,Send Info from Script to Module Python,"<p>Hi I wonder how you can send info over to a module </p>

<p>An Example
main.py Looks like this</p>

<pre><code>from module import *
print helloworld()
</code></pre>

<p>module.py looks like this</p>

<pre><code>def helloworld():    
    print ""Hello world!""
</code></pre>

<p>Anyway i want to send over info from main.py to module.py is it possible?</p>
"
547743,NA,2009-02-13T21:19:39Z,5,dead simple Django file uploading not working :-((,"<p>I am trying desperately to do a very simple file upload with Django, without (for now) bothering with templating &amp; co.</p>

<p>My HTML is:</p>

<pre><code> &lt;form 
      id=""uploader"" 
      action=""bytes/""
      enctype=""multipart/form-data"" 
      method=""post""
  &gt;
      &lt;input type=""file"" name=""uploaded""/&gt;
      &lt;input type=""submit"" value=""upload""/&gt;
  &lt;/form&gt;
</code></pre>

<p>My Python is (knowing it is a POST):</p>

<pre><code>if path==""bytes/"":
        if 'uploaded' in request.FILES:
            return HttpResponse(""you uploaded a file"")
        else:
            return HttpResponse(""did not get the file"")
</code></pre>

<p>I don't understand why I'm always getting the ""did not get the file"" message...</p>

<p>Can anyone help me, please???</p>
"
547798,28486,2009-02-13T21:38:30Z,5,Python using result of function for Regular Expression Substitution,"<p>I have a block of text, and for every regex match, I want to substitute that match with the return value from another function.  The argument to this function is of course the matched text.</p>

<p>I have been having trouble trying to come up with a one pass solution to this problem.  It feels like it should be pretty simple.</p>
"
547829,1296737,2009-02-13T21:49:04Z,74,How to dynamically load a Python class,"<p>Given a string of a Python class, e.g. <code>my_package.my_module.MyClass</code>, what is the best possible way to load it?</p>

<p>In other words I am looking for a equivalent <code>Class.forName()</code> in Java, function in Python. It needs to work on Google App Engine.</p>

<p>Preferably this would be a function that accepts the FQN of the class as a string, and returns a reference to the class:</p>

<pre><code>my_class = load_class('my_package.my_module.MyClass')
my_instance = my_class()
</code></pre>
"
548442,25968,2009-02-14T03:44:08Z,3,Creating an inheritable Python type with PyCxx,"<p>A friend and I have been toying around with various Python C++ wrappers lately, trying to find one that meets the needs of both some professional and hobby projects. We've both honed in on <a href=""http://cxx.sourceforge.net/"" rel=""nofollow"">PyCxx</a> as a good balance between being lightweight and easy to interface with while hiding away some of the ugliest bits of the Python C api. PyCxx is not terribly robust when it comes to exposing types, however (ie: it instructs you to create type factories rather than implement constructors), and we have been working on filling in the gaps in order to expose our types in a more functional manner. In order to fill these gaps we turn to the C api.</p>

<p>This has left us with some questions, however, that the api documentation doesn't seem to cover in much depth (and when it does, the answers are occasionally contradictory). The basic overarching question is simply this: What must be defined for a Python type to function as a base type? We've found that for the PyCxx class to function as a type we need to define tp_new and tp_dealloc explicitly and set the type as a module attribute, and that we need to have Py_TPFLAGS_BASETYPE set on [our type]->tp_flags, but beyond that we're still groping in the dark.</p>

<p>Here is our code thus far:</p>

<pre><code>class kitty : public Py::PythonExtension&lt;kitty&gt; {
public:
    kitty() : Py::PythonExtension&lt;kitty&gt;() {}
    virtual ~kitty() {}

    static void init_type() {
    	behaviors().name(""kitty"");
    	add_varargs_method(""speak"", &amp;kitty::speak);
    }

    static PyObject* tp_new(PyTypeObject *subtype, PyObject *args, PyObject *kwds) {
    	return static_cast&lt;PyObject*&gt;(new kitty());
    }

    static void tp_dealloc(PyObject *obj) {
    	kitty* k = static_cast&lt;kitty*&gt;(obj);
    	delete k;
    }

private:
    Py::Object speak(const Py::Tuple &amp;args) {
    	cout &lt;&lt; ""Meow!"" &lt;&lt; endl;
    	return Py::None();
    }
};

// cat Module
class cat_module : public Py::ExtensionModule&lt;cat_module&gt; {
public: 
    cat_module() : Py::ExtensionModule&lt;cat_module&gt;(""cat"") {

    	kitty::init_type();

    	// Set up additional properties on the kitty type object
    	PyTypeObject* kittyType = kitty::type_object();
    	kittyType-&gt;tp_new = &amp;kitty::tp_new;
    	kittyType-&gt;tp_dealloc = &amp;kitty::tp_dealloc;
    	kittyType-&gt;tp_flags |= Py_TPFLAGS_BASETYPE;

    	// Expose the kitty type through the module
    	module().setAttr(""kitty"", Py::Object((PyObject*)kittyType));

    	initialize();
    }
    virtual ~cat_module() {}
};

extern ""C"" void initcat() {
    static cat_module* cat = new cat_module();
}
</code></pre>

<p>And our Python test code looks like this:</p>

<pre><code>import cat

class meanKitty(cat.kitty):
    def scratch(self):
    	print ""hiss! *scratch*""

myKitty = cat.kitty()
myKitty.speak()

meanKitty = meanKitty()
meanKitty.speak()
meanKitty.scratch()
</code></pre>

<p>The curious bit is that if you comment all the meanKitty bits out, the script runs and the cat meows just fine, but if you uncomment the meanKitty class suddenly Python gives us this:</p>

<pre><code>AttributeError: 'kitty' object has no attribute 'speak'
</code></pre>

<p>Which confuses the crap out of me. It's as if inheriting from it hides the base class entirely! If anyone could provide some insight into what we are missing, it would be appreciated! Thanks!</p>

<p><hr /></p>

<p>EDIT: Okay, so about five seconds after posting this I recalled something that we had wanted to try earlier. I added the following code to kitty -</p>

<pre><code>virtual Py::Object getattr( const char *name ) {
    return getattr_methods( name );
}
</code></pre>

<p>And now we're meowing on both kitties in Python! still not fully there, however, because now I get this:</p>

<pre><code>Traceback (most recent call last):
    File ""d:\Development\Junk Projects\PythonCxx\Toji.py"", line 12, in &lt;module&gt;
    meanKitty.scratch()
AttributeError: scratch
</code></pre>

<p>So still looking for some help! Thanks!</p>
"
548493,65167,2009-02-14T04:39:28Z,3,jcc.initVM() doesn't return when mod_wsgi is configured as daemon mode,"<p>I am using mod-wsgi with django, and in django I use pylucene to do full text search.</p>

<p>While mod-wsgi is configured to be embedded mode, there is no problem at all.
But when mod-wsgi is configured to be daemon mode, the apache just gets stuck, 
and the browser just keep loading but nothing appears.</p>

<p>Then I identity the problem to be the jcc.initVM().
Here is my wsgi script:</p>

<pre><code>import os, sys, jcc
sys.stderr.write('jcc.initVM\n')
jcc.initVM()
sys.stderr.write('finished jcc.initVM\n')
....
</code></pre>

<p>After I restart my apache, and make a request from my browser, I find that /var/log/apache2/error.log 
only has:</p>

<pre><code>jcc.initVM
</code></pre>

<p>Meaning that it gets stuck at the line jcc.initVM(). (If the mod_wsgi is configured as embedded mode, there is no problem.)</p>

<p>And here is my /etc/apache2/sites-available/default:</p>

<pre><code>WSGIDaemonProcess site user=ross group=ross threads=1
WSGIProcessGroup site
WSGIScriptAlias / /home/ross/apache/django.wsgi

&lt;Directory /home/ross/apache/&gt;
  Order deny,allow
  Allow from all
&lt;/Directory&gt;
</code></pre>

<p>And finally, I find out that in the source code of jcc (jcc.cpp), it hangs at the function:</p>

<pre><code>JNI_CreateJavaVM(&amp;vm, (void **) &amp;vm_env, &amp;vm_args)
</code></pre>

<p>How to solve the problem?</p>

<p>Program versions:</p>

<pre><code>libapache2-mod-wsgi 2.3-1
jcc 2.1
python 2.5
Apache 2.2.9-8ubuntu3
Ubuntu 8.10
</code></pre>
"
548952,49018,2009-02-14T11:14:06Z,9,SQLAlchemy and empty columns,"<p>When I try to insert a new record into the database using SQLAlchemy and I don't fill out all values, it tries to insert them as ""None"" (instead of omitting them). It then complains about ""can't be null"" errors. Is there a way to have it just omit columns from the sql query if I also omitted them when declaring the instance?</p>
"
549130,66437,2009-02-14T13:46:31Z,2,Delete Chars in Python,"<p>does anybody know how to delete all characters behind a specific character??</p>

<p>like this:</p>

<pre><code>http://google.com/translate_t
</code></pre>

<p>into </p>

<pre><code>http://google.com
</code></pre>
"
549340,65034,2009-02-14T16:38:44Z,0,"In the windows python console, how to make Tab = four spaces?","<p>Hello I would like that when I am in the python
console tabbing will give me four spaces. Any ideas? </p>
"
549391,66468,2009-02-14T17:20:58Z,3,Python 3.0 smtplib,"<p>I have a very simple piece of code that I used in previous versions of Python without issues (version 2.5 and prior).  Now with 3.0, the following code give the error on the login line ""argument 1 must be string or buffer, not str"".</p>

<pre><code>import smtplib

   smtpserver = 'mail.somedomain.com'
   AUTHREQUIRED = 1                     # if you need to use SMTP AUTH set to 1
   smtpuser = 'admin@somedomain.com'    # for SMTP AUTH, set SMTP username here
   smtppass = 'somepassword'            # for SMTP AUTH, set SMTP password here
   msg = ""Some message to send""

   RECIPIENTS = ['admin@somedomain.com']
   SENDER = 'someone@someotherdomain.net'

   session = smtplib.SMTP(smtpserver)

   if AUTHREQUIRED:
      session.login(smtpuser, smtppass)

   smtpresult = session.sendmail(SENDER, RECIPIENTS, msg)
</code></pre>

<p>Google shows there are some issues with that error not being clear, but I still can't figure out what I need to try to make it work.  Suggestions included defining the username as b""username"", but that doesn't seem to work either.</p>
"
549536,2128,2009-02-14T18:44:53Z,1,Simple unique non-priority queue system,"<p>I'm working on a simple web crawler in python and I wan't to make a simple queue class, but I'm not quite sure the best way to start. I want something that holds only unique items to process, so that the crawler will only crawl each page once per script run (simply to avoid infinite looping). Can anyone give me or point me to a simple queue example that I could run off of?</p>
"
549674,2128,2009-02-14T19:48:04Z,42,Skipping Iterations in Python,"<p>I have a loop going, but there is the possibility for exceptions to be raised inside the loop. This of course would stop my program all together. To prevent that I catch the exceptions and handle them. But then the rest of the iteration runs even though an exception occurred. Is there a keyword to use in my <code>except:</code> clause to just skip the rest of the current iteration?</p>
"
550001,38666,2009-02-14T23:40:50Z,4,Fully transparent windows in Pygame?,"<p>Is it possible to get a fully transparent window in Pygame (see the desktop through it)?  I've found how to create a window without a frame, but there doesn't seem to be any obvious way to make it transparent.</p>

<p>I'd be willing to tie into system-specific technology/frameworks as long as there are solutions for both Windows and Mac OS X, but I'm not sure which direction to be looking.</p>

<p>The only topic I was able to find <a href=""http://stackoverflow.com/questions/396791/desktop-graphics-or-skinned-windows"">recommended using wxPython</a>, which isn't something I can do for this particular project (needs to be Pygame).</p>
"
550009,NA,2009-02-14T23:49:22Z,9,"Parsing ""From"" addresses from email text","<p>I'm trying to extract email addresses from plain text transcripts of emails.
I've cobbled together a bit of code to find the addresses themselves, but I don't know how to make it discriminate between them; right now it just spits out all email addresses in the file.  I'd like to make it so it only spits out addresses that are preceeded by ""From:"" and a few wildcard characters, and ending with "">""  (because the emails are set up as From [name]&lt;[email]>).  </p>

<p>Here's the code now:</p>

<pre><code>import re #allows program to use regular expressions
foundemail = []
#this is an empty list

mailsrch = re.compile(r'[\w\-][\w\-\.]+@[\w\-][\w\-\.]+[a-zA-Z]{1,4}')
 #do not currently know exact meaning of this expression but assuming
 #it means something like ""[stuff]@[stuff][stuff1-4 letters]""

        # ""line"" is a variable is set to a single line read from the file
# (""text.txt""):
for line in open(""text.txt""):

    foundemail.extend(mailsrch.findall(line))

    # this extends the previously named list via the ""mailsrch"" variable
      #which was named before

print foundemail
</code></pre>
"
550032,NA,2009-02-15T00:12:53Z,10,What causes Python socket error?,"<pre><code>  File ""C:\Python25\lib\SocketServer.py"", line 330, in __init__
    self.server_bind()
  File ""C:\Python25\lib\BaseHTTPServer.py"", line 101, in server_bind
    SocketServer.TCPServer.server_bind(self)
  File ""C:\Python25\lib\SocketServer.py"", line 341, in server_bind
    self.socket.bind(self.server_address)
  File ""&lt;string&gt;"", line 1, in bind
socket.error: (10013, 'Permission denied')
</code></pre>

<p>I tried to start up the Google App Engine development server and received this error the first time I tried to run it. Any ideas? I'm new to python.</p>
"
550050,49701,2009-02-15T00:27:10Z,16,Removing the TK icon on a Tkinter window,"<p>Does anybody know how to make the icon not show up? I'm looking for a way to have no icon at all.</p>
"
550148,8123,2009-02-15T01:50:34Z,6,Does python have something like C++'s using keyword?,"<p>In C++ you can often drastically improve the readability of your code by careful usage of the ""using"" keyword, for example: </p>

<pre><code>void foo()
{
    std::vector&lt; std::map &lt;int, std::string&gt; &gt; crazyVector;
    std::cout &lt;&lt; crazyVector[0].begin()-&gt;first;
}
</code></pre>

<p>becomes</p>

<pre><code>void foo()
{
    using namespace std; // limited in scope to foo
    vector&lt; map &lt;int, string&gt; &gt; crazyVector;
    cout &lt;&lt; crazyVector[0].begin()-&gt;first;
}
</code></pre>

<p>Does something similar exist for python, or do I have to fully qualify everything?</p>

<p>I'll add the disclaimer that I know that using has its pitfalls and it should be appropriately limited in scope. </p>
"
550300,10583,2009-02-15T04:03:13Z,4,Django Model API reverse lookup of many to many relationship through intermediary table,"<p>I have a Resident and can not seem to get the set of SSA's the resident belongs to. I've tried <code>res.ssa_set.all()</code> <code>.ssas_set.all()</code> and <code>.ssa_resident_set.all()</code>. Can't seem to manage it. What's the syntax for a reverse m2m lookup through another table? </p>

<p>EDIT: I'm getting an 'QuerySet as no attribute' error. Erm?</p>

<pre><code>class SSA(models.Model):
    name = models.CharField(max_length=100)
    cost_center = models.IntegerField(max_length=4)
    street_num = models.CharField(max_length=9)
    street_name = models.CharField(max_length=40)
    suburb = models.CharField(max_length=40)
    post_code = models.IntegerField(max_length=4, blank=True, null=True)

    def __unicode__(self):
        return self.name

class Resident(models.Model):
    cris_id = models.CharField(max_length=10, primary_key=True)
    first_name = models.CharField(max_length=20)
    last_name = models.CharField(max_length=20)
    ssas = models.ManyToManyField('SSA', through='SSA_Resident', verbose_name=""SSAs"")

    def __unicode__(self):
        return self._get_full_name()

    def _get_full_name(self):
        return u""%s %s"" %(self.first_name, self.last_name)

    full_name = property(_get_full_name)

class SSA_Resident(models.Model):
    id = models.AutoField(primary_key=True)
    resident = models.ForeignKey('Resident')
    ssa = models.ForeignKey('SSA', verbose_name=""SSA"")
    active = models.BooleanField(default=True)
    def __unicode__(self):
        return u""%s - %s"" %(self.resident.full_name, self.ssa.name)
</code></pre>
"
550337,25077,2009-02-15T04:44:31Z,0,How can I provide safety template for user to modify with python?,"<p>I am building a multi-user web application. Each user can have their own site under my application. I am considering how to allow user to modify template without security problem? I have evaluated some python template engine. For example, genshi, it is a pretty wonderful template engine, but however it might be dangerous to allow user to modify genshi template. It have a syntax like this:</p>

<pre><code>&lt;?python

?&gt;
</code></pre>

<p>This syntax allow you run whatever you want python can do. I notice that it seems can be shutdown by passing some parameter. But there are still a lots of potential problems. For example, user can access build-in functions, and methods of passed variables. For example, if I pass a ORM object to template. It might contain some method and variable that I don't want to allow user touch it. May like this:</p>

<pre><code>site.metadata.connection.execute(""drop table xxx"")
</code></pre>

<p>So my question is how can I allow user to modify template of their site without security problems? Any python template engine can be used.</p>

<p>Thanks.</p>
"
550446,3153,2009-02-15T07:06:26Z,10,py2exe to generate dlls?,"<p>Is there a way using py2exe or some other method to generate dll files instead of exe files?</p>

<p>I would want to basically create a normal win32 dll with normal functions but these functions would be coded in python instead of c++.</p>
"
550450,3153,2009-02-15T07:08:18Z,0,Quick primer on implementing a COM object that implement some custom IDLs in python?,"<p>Does anyone have experience using python to create a COM object that implements some custom IDLs? </p>

<p>Basically I'd like to know if it's extremely simple to do compared to c++, and if it is do you know of a good tutorial?</p>
"
550470,34537,2009-02-15T07:26:05Z,26,overload print python,"<p>Am i able to overload the print function? and call the normal function? What i want to do is after a specific line i want print to call my print which will call the normal print and write a copy to file.</p>

<p>Also i dont know how to overload print. I dont know how to do variable length arguments. i'll look it up soon but  <a href=""http://stackoverflow.com/questions/550470/overload-print-python/550477#550477"">http://stackoverflow.com/questions/550470/overload-print-python/550477#550477</a> just told me i cant overload print in 2.x which is what i am using.</p>
"
550632,4993,2009-02-15T10:06:22Z,309,Favorite Django Tips & Features?,"<p>Inspired by the question series 'Hidden features of ...', I am curious to hear about your favorite Django tips or lesser known but useful features you know of.</p>

<ul>
<li>Please, include only one tip per answer.</li>
<li>Add Django version requirements if there are any.</li>
</ul>
"
550653,66473,2009-02-15T10:23:56Z,36,Cross-platform way to get PIDs by process name in python,"<p>Several processes with the same name are running on host. What is the cross-platform way to get PIDs of those processes by name using <strong>python</strong> or <strong>jython</strong>?</p>

<ol>
<li>I want something like <code>pidof</code> but in python. (I don't have <code>pidof</code> anyway.)</li>
<li>I can't parse <code>/proc</code> because it might be unavailable (on HP-UX).</li>
<li>I do not want to run <code>os.popen('ps')</code> and parse the output because I think it is ugly (field sequence may be different in different OS).</li>
<li>Target platforms are Solaris, HP-UX, and maybe others.</li>
</ol>
"
550673,34537,2009-02-15T10:37:57Z,0,"python, dictionary and int error","<p>I have a very frustrating python problem. In this code</p>

<pre><code>fixedKeyStringInAVar = ""SomeKey""

def myFunc(a, b):
    global sleepTime
    global fixedKeyStringInAVar
    varMe=int(""15"")
    sleepTime[fixedKeyStringInAVar] = varMe*60*1000
    #more code
</code></pre>

<p>Now this works. BUT sometimes when I run this function I get</p>

<pre><code>TypeError: 'int' object does not support item assignment
</code></pre>

<p>It is extremely annoying since I tried several test cases and could not reproduce the error, yet it happens very often when I run the full code. The code reads data from a db, access sites, etc. so its hard for me to go through the data since it reads from several sources and depends on 3rd party input that changes (websites).</p>

<p>What could this error be?</p>
"
550804,34537,2009-02-15T12:29:46Z,2,"python runtime error, can dump a file?","<p>I am using libcurl to DL a webpage, then i am scanning it for data and doing something with one of the links. However, once in a while the page is different then i except thus i extract bad data and pycurl throws an exception. I tried finding the exception name for pycurl but had no luck.</p>

<p>Is there a way i can get the traceback to execute a function so i can dump the file so i can look at the file input and see were my code went wrong?</p>
"
551038,38096,2009-02-15T15:29:40Z,50,"""Private"" (implementation) class in Python","<p>I am coding a small Python module composed of two parts:</p>

<ul>
<li>some functions defining a public interface,</li>
<li>an implementation class used by the above functions, but which is not meaningful outside the module.</li>
</ul>

<p>At first, I decided to ""hide"" this implementation class by defining it inside the function using it, but this hampers readability and cannot be used if multiple functions reuse the same class.</p>

<p>So, in addition to comments and docstrings, is there a mechanism to mark a class as ""private"" or ""internal""? I am aware of the underscore mechanism, but as I understand it it only applies to variables, function and methods name.</p>
"
551227,1640962,2009-02-15T17:12:33Z,14,Deploying application with Python or another embedded scripting language,"<p>I'm thinking about using Python as an <strong>embedded scripting language</strong> in a hobby project written in <strong>C++</strong>. I would not like to depend on separately installed Python distribution. Python documentation seems to be quite clear about general usage, but I couldn't find a clear answer to this.</p>

<p>Is it feasible to deploy a Python interpreter + standard library with my application? Would some other language like Lua, Javascript (Spidermonkey), Ruby, etc. be better for this use?</p>

<p>Here's the criteria I'm weighing the different languages against:</p>

<ul>
<li>No/Few dependencies on externally installed packages</li>
<li>Standard library with good feature set</li>
<li>Nice language :)</li>
<li>Doesn't result in a huge install package</li>
</ul>

<p>edit: </p>

<p>I guess the question should be: 
How do I deploy my own python library + standard library with the installer of my program, so that it doesn't matter whether the platform already has python installed or not?</p>

<p>edit2: </p>

<p>One more clarification. I don't need info about specifics of linking C and Python code.</p>
"
551797,658,2009-02-15T23:15:40Z,58,"Getting ""global name 'foo' is not defined"" with Python's timeit","<p>I'm trying to find out how much time it takes to execute a Python statement, so I looked online and found that the standard library provides a module called <a href=""http://docs.python.org/library/timeit.html"">timeit</a> that purports to do exactly that:</p>

<pre><code>import timeit

def foo():
    # ... contains code I want to time ...

def dotime():
    t = timeit.Timer(""foo()"")
    time = t.timeit(1)
    print ""took %fs\n"" % (time,)

dotime()
</code></pre>

<p>However, this produces an error:</p>

<pre><code>Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
  File ""&lt;stdin&gt;"", line 3, in dotime
  File ""/usr/local/lib/python2.6/timeit.py"", line 193, in timeit
    timing = self.inner(it, self.timer)
  File ""&lt;timeit-src&gt;"", line 6, in inner
NameError: global name 'foo' is not defined
</code></pre>

<p>I'm still new to Python and I don't fully understand all the scoping issues it has, but I don't know why this snippet doesn't work. Any thoughts?</p>
"
551840,NA,2009-02-15T23:34:26Z,3,Help me implement Blackjack in Python (updated),"<p>I am in the process of writing a blackjack code for python, and i was hoping someone would be able to tell me how to make it:</p>

<ol>
<li>Recognize what someone has typed i.e. ""Hit"" or ""Stand"" and react accordingly.</li>
<li>Calculate what the player's score is and whether it is an ace and a jack together, and automatically wins.</li>
</ol>

<p>Ok, this is what i have gotten so far.</p>

<pre><code>""This imports the random object into Python, it allows it to generate random numbers.""
import random
print(""Hello and welcome to Sam's Black Jack!"")
input(""Press &lt;ENTER&gt; to begin."")
card1name = 1
card2name = 1
card3name = 1
card4name = 1
card5name = 1

""This defines the values of the character cards.""
Ace = 1
Jack = 10
Queen = 10
King = 10

decision = 0

""This generates the cards that are in your hand and the dealer's hand to begin with.
card1 = int(random.randrange(12) + 1)
card2 = int(random.randrange(12) + 1)
card3 = int(random.randrange(12) + 1)
card4 = int(random.randrange(12) + 1)
card5 = int(random.randrange(12) + 1)

total1 = card1 + card2

""This makes the value of the Ace equal 11 if the total of your cards is under 21""
if total1 &lt;= 21:
    Ace = 11

""This defines what the cards are""
if card1 == 11:
    card1 = 10
    card1name = ""Jack""
if card1 == 12:
    card1 = 10
    card1name = ""Queen""
if card1 == 13:
    card1 = 10
    card1name = ""King""
if card1 == 1:
    card1 = Ace
    card1name = ""Ace""

elif card1:
    card1name = card1

if card2 == 11:
    card2 = 10
    card2name = ""Jack""
if card2 == 12:
    card2 = 10
    card2name = ""Queen""
if card2 == 13:
    card2 = 10
    card2name = ""King""
if card2 == 1:
    card2 = Ace
    card2name = ""Ace""

elif card2:
    card2name = card2

if card3 == 11:
    card3 = 10
    card3name = ""Jack""
if card3 == 12:
    card3 = 10
    card3name = ""Queen""
if card3 == 13:
    card3 = 10
    card3name= ""King""
if card3 == 1:
    card3 = Ace
    card3name = ""Ace""

elif card3:
    card3name = card3

if card4 == 11:
    card4 = 10
    card4name = ""Jack""
if card4 == 12:
    card4 = 10
    card4name = ""Queen""
if card4 == 13:
    card4 = 10
    card4name = ""King""
if card4 == 1:
    card4 = Ace
    card4name = ""Ace""

elif card4:
    card4name = card4

if card5 == 11:
    card5 = 10
    card5name = ""Jack""
if card5 == 12:
    card5 = 10
    card5name = ""Queen""
if card5 == 13:
    card5 = 10
    card5name = ""King""
if card5 == 1:
    card5 = Ace
    card5name = ""Ace""

elif card5:
    card5name = card5
""This creates the totals of your hand""
total2 = card1 + card2
total3 = card1 + card2 + card3

print(""You hand is "", card1name,"" and"", card2name)
print(""The total of your hand is"", total2)
decision = input(""Do you want to HIT or STAND?"").lower()

""This is the decision for Hit or Stand""
if 'hit' or 'HIT' or 'Hit' in decision:
    decision = 1
    print(""You have selected HIT"")
    print(""Your hand is "", card1name,"","",card2name,"" and"", card3name)
    print(""The total of your hand is"", total3)

if 'STAND' or 'stand' or 'Stand' in decision:
    print(""You have selected STAND"")

""Dealer's Hand""
dealer = card4 + card5
print()
print(""The dealer's hand is"", card4name,"" and"", card5name)

if decision == 1 and dealer &lt; total3:
    print(""Congratulations, you beat the dealer!"")

if decision == 1 and dealer &gt; total3:
    print(""Too bad, the dealer beat you!"")
</code></pre>

<p>Ok, nevermind, i fixed it :D</p>

<p>I just changed the Hit and Stand to Yes or No</p>

<pre><code>if total2 &lt; 21:
    decision = input(""Do you want to hit? (Yes or No)"")

    ""This is the decision for Hit or Stand""
    if  decision == 'Yes':
        print(""You have selected HIT"")
        print(""Your hand is "", card1name,"","",card2name,"" and"", card3name)
        print(""The total of your hand is"", total3)

    if decision == 'No':
            print(""You have selected STAND"")
</code></pre>
"
552058,2147,2009-02-16T02:15:17Z,16,"""Interfaces"" in Python: Yea or Nay?","<p>So I'm starting a project using Python after spending a significant amount of time in static land.  I've seen some projects that make ""interfaces"" which are really just classes without any implementations.  Before, I'd scoff at the idea and ignore that section of those projects.  But now, I'm beginning to warm up to the idea.</p>

<p>Just so we're clear, an interface in Python would look something like this:</p>

<pre><code>class ISomething(object):
    def some_method():
        pass
    def some_other_method(some_argument):
        pass
</code></pre>

<p>Notice that you aren't passing self to any of the methods, thus requiring that the method be overriden to be called.  I see this as a nice form of documentation and completeness testing.  </p>

<p>So what is everyone here's opinion on the idea?  Have I been brainwashed by all the C# programming I've done, or is this a good idea?</p>
"
552073,53569,2009-02-16T02:30:50Z,9,"What's the best way to make a time from ""Today"" or ""Yesterday"" and a time in Python?","<p>Python has pretty good date parsing but is the only way to recognize a datetime such as ""Today 3:20 PM"" or ""Yesterday 11:06 AM"" by creating a new date today and doing subtractions?</p>
"
552328,54091,2009-02-16T05:26:27Z,0,Missing first line when downloading .rar file using urllib2.urlopen(),"<p>Okey this is really strange. I have this script which basically downloads bunch of achieve files and extracts them. Usually those files are .zip files. Today I sat down and decided to make it work with rar files and I got stuck. At first I thought that the problem is in my unrar code, but it wasn't there. So I did:</p>

<pre><code>f = urllib2.urlopen(file_location)
data = StringIO(f.read())
print data.getvalue()
</code></pre>

<p>heck I even did:</p>

<pre><code>f = urllib2.urlopen(file_location)
print f.read()
</code></pre>

<p>because I just wanted to see the first chunk and the result is the same - I'm missing first line of the .rar file.</p>

<p>If I use web browser to download the very same file everything is fine, it's not corrupt.</p>

<p>Can anyone please explain me what the hell is going on here? And what does it have to do with file type.</p>
"
552329,66813,2009-02-16T05:26:35Z,4,How do python classes work?,"<p>I have a code file from the boto framework pasted below, all of the print statements are mine, and the one commented out line is also mine, all else belongs to the attributed author.</p>

<p>My question is what is the order in which instantiations and allocations occur in python when instantiating a class?  The author's code below is under the assumption that 'DefaultDomainName' will exist when an instance of the class is created (e.g. __init__() is called), but this does not seem to be the case, at least in my testing in python 2.5 on OS X.  </p>

<p>In the class Manager __init__() method, my print statements show as 'None'.  And the print statements in the global function set_domain() further down shows 'None' prior to setting Manager.DefaultDomainName, and shows the expected value of 'test_domain' after the assignment.  But when creating an instance of Manager again after calling set_domain(), the __init__() method still shows 'None'.</p>

<p>Can anyone help me out, and explain what is going on here.  It would be greatly appreciated.  Thank you.</p>

<pre>
<code>

# Copyright (c) 2006,2007,2008 Mitch Garnaat http://garnaat.org/
#
# Permission is hereby granted, free of charge, to any person obtaining a
# copy of this software and associated documentation files (the
# ""Software""), to deal in the Software without restriction, including
# without limitation the rights to use, copy, modify, merge, publish, dis-
# tribute, sublicense, and/or sell copies of the Software, and to permit
# persons to whom the Software is furnished to do so, subject to the fol-
# lowing conditions:
#
#
# The above copyright notice and this permission notice shall be included
# in all copies or substantial portions of the Software.
#
# THE SOFTWARE IS PROVIDED ""AS IS"", WITHOUT WARRANTY OF ANY KIND, EXPRESS
# OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABIL-
# ITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT
# SHALL THE AUTHOR BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, 
# WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
# OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
# IN THE SOFTWARE.

import boto
from boto.utils import find_class

class Manager(object):

    DefaultDomainName = boto.config.get('Persist', 'default_domain', None)

    def __init__(self, domain_name=None, aws_access_key_id=None, aws_secret_access_key=None, debug=0):
        self.domain_name = domain_name
        self.aws_access_key_id = aws_access_key_id
        self.aws_secret_access_key = aws_secret_access_key
        self.domain = None
        self.sdb = None
        self.s3 = None
        if not self.domain_name:
            print ""1: %s"" % self.DefaultDomainName
            print ""2: %s"" % Manager.DefaultDomainName
            self.domain_name = self.DefaultDomainName
            #self.domain_name = 'test_domain'
            if self.domain_name:
                boto.log.info('No SimpleDB domain set, using default_domain: %s' % self.domain_name)
            else:
                boto.log.warning('No SimpleDB domain set, persistance is disabled')
        if self.domain_name:
            self.sdb = boto.connect_sdb(aws_access_key_id=self.aws_access_key_id,
                                        aws_secret_access_key=self.aws_secret_access_key,
                                        debug=debug)
            self.domain = self.sdb.lookup(self.domain_name)
            if not self.domain:
                self.domain = self.sdb.create_domain(self.domain_name)

    def get_s3_connection(self):
        if not self.s3:
            self.s3 = boto.connect_s3(self.aws_access_key_id, self.aws_secret_access_key)
        return self.s3

def get_manager(domain_name=None, aws_access_key_id=None, aws_secret_access_key=None, debug=0):
    return Manager(domain_name, aws_access_key_id, aws_secret_access_key, debug=debug)

def set_domain(domain_name):
    print ""3: %s"" % Manager.DefaultDomainName
    Manager.DefaultDomainName = domain_name
    print ""4: %s"" % Manager.DefaultDomainName

def get_domain():
    return Manager.DefaultDomainName

def revive_object_from_id(id, manager):
    if not manager.domain:
        return None
    attrs = manager.domain.get_attributes(id, ['__module__', '__type__', '__lineage__'])
    try:
        cls = find_class(attrs['__module__'], attrs['__type__'])
        return cls(id, manager=manager)
    except ImportError:
        return None

def object_lister(cls, query_lister, manager):
    for item in query_lister:
        if cls:
            yield cls(item.name)
        else:
            o = revive_object_from_id(item.name, manager)
            if o:
                yield o
</code>
</pre>
"
552423,43158,2009-02-16T06:41:55Z,9,Use Python 2.6 subprocess module in Python 2.5,"<p>I would like to use Python 2.6's version of subprocess, because it allows the <a href=""http://docs.python.org/library/subprocess.html#subprocess.Popen.terminate"">Popen.terminate()</a> function, but I'm stuck with Python 2.5. Is there some reasonably clean way to use the newer version of the module in my 2.5 code? Some sort of <code>from __future__ import subprocess_module</code>?</p>
"
552521,62118,2009-02-16T07:44:23Z,2,Django Model returning NoneType,"<p>I have a model Product</p>

<p>it has  two fields size &amp; colours among others</p>

<pre><code>colours = models.CharField(blank=True, null=True, max_length=500)
size = models.CharField(blank=True, null=True, max_length=500)
</code></pre>

<p>In my view I have </p>

<pre><code>current_product = Product.objects.get(slug=title)
if len(current_product.size) != 0 :
    current_product.size = current_product.size.split("","")
</code></pre>

<p>and get this error:</p>

<p>object of type 'NoneType' has no len()</p>

<p>What is NoneType and how can I test for it?</p>
"
552627,34537,2009-02-16T08:35:37Z,0,python ide vs cmd line detection?,"<p>When programming in the two IDEs i used, bad things happen when i use raw_input. However on the command line it works EXACTLY how i expect it to. Typically this app is ran in cmd line but i like to edit and debug it in an IDE. Is there a way to detect if i executed the app in an IDE or not?</p>
"
552744,1512,2009-02-16T09:34:43Z,87,How do I profile memory usage in Python?,"<p>I've recently become interested in algorithms and have begun exploring them by writing a naive implementation and then optimizing it in various ways.</p>

<p>I'm already familiar with the standard Python module for profiling runtime (for most things I've found the timeit magic function in IPython to be sufficient), but I'm also interested in memory usage so I can explore those tradeoffs as well (e.g. the cost of caching a table of previously computed values versus recomputing them as needed). Is there a module that will profile the memory usage of a given function for me?</p>
"
552996,34537,2009-02-16T11:22:48Z,2,python exit a blocking thread?,"<p>in my code i loop though raw_input() to see if the user has requested to quit. My app can quit before the user quits, but my problem is the app is still alive until i enter a key to return from the blocking function raw_input(). Can i do to force raw_input() to return? by maybe sending it fake input? could i terminate the thread its on? (the only data it has is a single var call wantQuit).</p>
"
553019,62699,2009-02-16T11:30:16Z,5,python excel making reports,"<p>I've been given the task of connecting my code (fortran) with py (2.5), and generate a number of excel reports if possible. The first part went fine - and is done with, but now I'm working on the second.   </p>

<p>What are my choices for making excel (2007 if possible) sheets from python ? In general, I would need to put some array values in them in a table (formatting doesn't matter), and draw a number of charts from those tables. Is there a way to do this automatically ?
Some library ?</p>

<p>Anyone done something like this in the past ?</p>
"
553303,66950,2009-02-16T13:30:04Z,53,Generate a random date between two other dates,"<p>How would I generate a random date that has to be between two other given dates? 
The functions signature should something like this-</p>

<pre><code>randomDate(""1/1/2008 1:30 PM"", ""1/1/2009 4:50 AM"", 0.34)
                  ^                       ^          ^

           date generated has   date generated has  random number
           to be after this     to be before this
</code></pre>

<p>and would return a date such as-
""2/4/2008 7:20 PM""</p>
"
553372,6848,2009-02-16T13:58:23Z,1,Windows Server 2008 or Vista?,"<p>What is an easy (to implement) way to check whether I am on Windows Vista or Windows Server 2008 from a Python script?</p>

<p><code>platform.uname()</code> gives the same result for both versions.</p>
"
553784,53007,2009-02-16T16:00:26Z,27,Can you use a string to instantiate a class in python?,"<p>I'm using a builder pattern to seperate a bunch of different configuration possibilities. Basically, I have a bunch of classes that are named an ID (something like ID12345). These all inherit from the base builder class. In my script, I need to instantiate an instance for each class (about 50) every time this app runs. So, I'm trying to see if instead of doing something like this:</p>

<pre><code>ProcessDirector = ProcessDirector()
ID12345 = ID12345()
ID01234 = ID01234()

ProcessDirector.construct(ID12345)
ProcessDirector.construct(ID01234)

ID12345.run()
ID01234.run()
</code></pre>

<p>Can I do something like this (I know this doesn't work):</p>

<pre><code>IDS = [""ID12345"", ""ID01234""]

ProcessDirector = ProcessDirector()
for id in IDS:
  builder = id() #some how instantiate class from string
  ProcessDirector.construct(builder)
  builder.run()
</code></pre>

<p>That way, when I need to add a new one in the future, all I have to do is add the id to the IDS list, rather than peppering the new ID throughout the code. </p>

<h2>EDIT</h2>

<p>Looks like there are some different opinions based on where the data is coming from. These IDs are entered in a file that no one else has access to. I'm not reading the strings from the command line, and I'd like to be able to do as little alteration when adding a new ID in the future. </p>
"
553871,7407,2009-02-16T16:24:53Z,5,Can anyone provide a more pythonic way of generating the morris sequence?,"<p>I'm trying to generate the <a href=""http://www.ocf.berkeley.edu/~stoll/answer.html"" rel=""nofollow"">morris sequence</a> in python. My current solution is below, but I feel like I just wrote c in python. Can anyone provide a more pythonic solution?</p>

<pre><code>def morris(x):
    a = ['1', '11']
    yield a[0]
    yield a[1]
    while len(a) &lt;= x:
        s = ''
        count = 1
        al = a[-1]
        for i in range(0,len(al)):
            if i+1 &lt; len(al) and al[i] == al[i+1]:
                count += 1
            else:
                s += '%s%s' % (count, al[i])
                count = 1
        a.append(s)
        yield s
a = [i for i in morris(30)]
</code></pre>
"
554446,61663,2009-02-16T20:29:30Z,40,How do I prevent Python's urllib(2) from following a redirect,"<p>I am currently trying to log into a site using Python however the site seems to be sending a cookie and a redirect statement on the same page.  Python seems to be following that redirect thus preventing me from reading the cookie send by the login page.  How do I prevent Python's urllib (or urllib2) urlopen from following the redirect?</p>
"
554805,452521,2009-02-16T22:16:06Z,8,Stackless python network performance degrading over time?,"<p>So i'm toying around with stackless python, writing a <em>very simple</em> webserver to teach myself programming with microthreads/tasklets. But now to my problem, when I run something like <code>ab -n 100000 -c 50 http://192.168.0.192/</code> (100k requests, 50 concurrency) in apache bench I get something like 6k req/s, the second time I run it I get 5.5k, third time 5k, fourth time, 4.5k, etc. all the way down to 100req/s or something.</p>

<p>The problem goes away when I restart the python script, though.</p>

<p>Now my question is why? Am i forgetting to delete tasklets? I've checked the stackless.getruncount() (and it always seems to return 1, for some reason) so it doesn't seem like there would be any dead tasklets hanging around? I've tried calling .kill() on all tasklets that are done, didn't help. I just can't figure this one out.</p>

<pre><code>import socket
import select
import stackless
import time

class socket_wrapper(object):
    def __init__(self, sock, sockets):
        super(socket_wrapper, self).__init__()
        self.sock = sock
        self.fileno = sock.fileno
        self.sockets_list = sockets
        self.channel = stackless.channel()
        self.writable = False
        self.error = False

    def remove(self):
        self.sock.close()
        self.sockets_list.remove(self)

    def send(self, data):
        self.sock.send(data)

    def push(self, bytes):
        self.channel.send(self.sock.recv(bytes))

def stackless_accept(accept, handler, recv_size=1024, timeout=0):
    sockets = [accept]

    while True:
        read, write, error = select.select(sockets, sockets, sockets, timeout)

        for sock in read:
            if sock is accept:
                # Accept socket and create wrapper
                sock = socket_wrapper(sock.accept()[0], sockets)

                # Create tasklett for this connection
                tasklet = stackless.tasklet(handler)
                tasklet.setup(sock)

                # Store socket
                sockets.append(sock)

            else:
                # Send data to handler
                sock.push(recv_size)

        # Tag all writable sockets
        for sock in write:
            if sock is not accept:
                sock.writable = True

        # Tag all faulty sockets
        for sock in error:
            if sock is not accept:
                sock.error = True
            else:
                pass # should do something here if the main socket is faulty

        timeout = 0 if socket else 1
        stackless.schedule() 

def simple_handler(tsock):
    data = """"

    while data[-4:] != ""\r\n\r\n"":
        data += tsock.channel.receive()

    while not tsock.writable and not tsock.error:
        stackless.schedule()

    if not tsock.error:
        tsock.send(""HTTP/1.1 200 OK\r\nContent-length: 8\r\n\r\nHi there"")
        tsock.remove()

sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
sock.bind((""192.168.0.192"", 8000))
sock.listen(5)

stackless.tasklet(stackless_accept)(sock, simple_handler)
stackless.run()
</code></pre>
"
554957,42974,2009-02-16T23:07:59Z,3,Parameterised regular expression in Python,"<p>In Python, is there a better way to <strong>parameterise strings into regular expressions</strong> than doing it manually like this:</p>

<pre><code>test = 'flobalob'
names = ['a', 'b', 'c']
for name in names:
    regexp = ""%s"" % (name)
    print regexp, re.search(regexp, test)
</code></pre>

<p><em>This noddy example tries to match each name in turn. I know there's better ways of doing that, but its a simple example purely to illustrate the point.</em></p>

<p><hr /></p>

<p><strong>The answer appears to be no, there's no real alternative. The best way to paramaterise regular expressions in python is as above or with derivatives such as <code>str.format()</code>.</strong> I tried to write a generic question, rather than <em>'fix ma codez, kthxbye'</em>. For those still interested, I've fleshed out an example closer to my needs here:</p>

<pre><code>for diskfilename in os.listdir(''):
    filenames = ['bob.txt', 'fred.txt', 'paul.txt']
    for filename in filenames:
        name, ext = filename.split('.')
        regexp = ""%s.*\.%s"" % (name, ext)
        m = re.search(regexp, diskfilename)
        if m:
          print diskfilename, regexp, re.search(regexp, diskfilename)
          # ...
</code></pre>

<p>I'm trying to figure out the 'type' of a file based on its filename, of the form <code>&lt;filename&gt;_&lt;date&gt;.&lt;extension&gt;</code>. In my real code, the <code>filenames</code> array is a dict, containing a function to call once a match is found.</p>

<p>Other ways I've considered doing it:</p>

<ul>
<li><p><strong>Have a regular expression in the array.</strong> I already have an array of filenames without any regular expression magic, so I am loathe to do this. I have done this elsewhere in my code and its a mess (though necessary there).</p></li>
<li><p><strong>Match only on the start of the filename.</strong> This would work, but would break with .bak copies of files, etc. At some point I'll probably want to extract the date from the filename so would need to use a regular expression anyway.</p></li>
</ul>

<p><hr /></p>

<p>Thanks for the responses suggesting alternatives to regular expressions to achieve the same end result. I was more interested in parameterising regular expressions for now and for the future. I never come across <em>fnmatch</em>, so its all useful in the long run.</p>
"
555009,47204,2009-02-16T23:21:46Z,2,Euler problem number #4,"<p>Using Python, I am trying to solve <a href=""http://projecteuler.net/index.php?section=problems&amp;id=4"" rel=""nofollow"">problem #4</a> of the <a href=""http://projecteuler.net/"" rel=""nofollow"">Project Euler</a> problems. Can someone please tell me what I am doing incorrectly?  The problem is to <strong>Find the largest palindrome made from the product of two 3-digit numbers</strong>.  Here is what I have thus far.</p>

<pre><code>import math

def main(): 
    for z in range(100, 1000):
    	for y in range(100, 1000):
    		for x in range(1, 1000000):
    			x = str(x)
    			if x == x[::-1] and x == z*y:
    				print x 

if __name__ == '__main__':
    main()
</code></pre>
"
555146,NA,2009-02-17T00:29:18Z,0,Multiple output files,"<p>edit: Initially I was trying to be general but it came out vague. I've included more detail below. </p>

<p>I'm writing a script that pulls in data from two large CSV files, one of people's schedules and the other of information about their schedules. The data is mined and combined to eventually create pajek format graphs for Monday-Sat of peoples connections, with a seventh graph representing all connections over the week with a string of 1's and 0's to indicate which days of the week the connections are made. This last graph is a break from the pajek format and is used by a seperate program written by another researcher.</p>

<p>Pajek format has a large header, and then lists connections as (vertex1 vertex2) unordered pairs. It's difficult to store these pairs in a dictionary, because there are often multiple connections on the same day between two pairs.</p>

<p>I'm wondering what the best way to output to these graphs are. Should I make the large single graph and have a second script deconstruct it into several smaller graphs? Should I keep seven streams open and as I determine a connection write to them, or should I keep some other data structure for each and output them when I can (like a queue)?</p>
"
555344,41613,2009-02-17T02:29:03Z,3,Match series of (non-nested) balanced parentheses at end of string,"<p>How can I match one or more parenthetical expressions appearing at the end of string?</p>

<p>Input:</p>

<pre><code>'hello (i) (m:foo)'
</code></pre>

<p>Desired output:</p>

<pre><code>['i', 'm:foo']
</code></pre>

<p>Intended for a python script. Paren marks cannot appear inside of each other (<a href=""http://i89.photobucket.com/albums/k220/kipper_308/fran_web.jpg"" rel=""nofollow"">no nesting</a>), and the parenthetical expressions may be separated by whitespace.</p>

<p>It's harder than it might seem at first glance, at least so it seems to me.</p>
"
555571,2147,2009-02-17T05:02:44Z,0,Getting a list of all modules in the current package,"<p>Here's what I want to do:  I want to build a test suite that's organized into packages like tests.ui, tests.text, tests.fileio, etc.  In each <code>__</code>init<code>__</code>.py in these packages, I want to make a test suite consisting of all the tests in all the modules in that package.  Of course, getting all the tests can be done with unittest.TestLoader, but it seems that I have to add each module individually.  So supposing that test.ui has editor<code>_</code>window<code>_</code>test.py and preview<code>_</code>window<code>_</code>test.py, I want the <code>__</code>init<code>__</code>.py to import these two files and get a list of the two module objects.  The idea is that I want to automate making the test suites so that I can't forget to include something in the test suite.</p>

<p>What's the best way to do this?  It seems like it would be an easy thing to do, but I'm not finding anything.</p>

<p>I'm using Python 2.5 btw.</p>
"
555578,49018,2009-02-17T05:06:35Z,1,SQLAlchemy/Elixir validation rules?,"<p>I just found out how to validate my database input before saving it, but I'm kinda bummed to find there are no premade rules (like validate email, length, etc) that are found in some web based frameworks. Are there any validation libraries laying around anywhere or somewhere that some premade validation lists are hiding that I haven't found yet?</p>
"
555705,42303,2009-02-17T06:33:06Z,28,Character Translation using Python (like the tr command),"<p>Is there a way to do character translation (kind of like the tr command) using python</p>
"
556269,17349,2009-02-17T10:42:58Z,13,ImportError: No module named copy_reg pickle,"<p>I'm trying to unpickle an object stored as a blob in a MySQL database. I've manually generated and stored the pickled object in the database, but when I try to unpickle the object, I get the following rather cryptic exception:</p>

<p>ImportError: No module named copy_reg</p>

<p>Any ideas as to why this happens?</p>

<p><strong>Method of Reproduction</strong></p>

<p>Note: Must do step 1 on a Windows PC and steps 3 and 4 on a Linux PC.</p>

<p>1) On a Windows PC:</p>

<pre><code>file = open(""test.txt"", ""w"")
thing = {'a': 1, 'b':2}
cPickle.dump(thing, file)
</code></pre>

<p>2) Manually insert contents of text.txt into blob field of MySQL database running on linux</p>

<p>3) In Python running on a linux machine, fetch the contents of column from MySQL</p>

<p>4) Assuming that you put the contents of the blob column into a variable called data, try this:</p>

<pre><code>cPickle.loads(rawString)
</code></pre>
"
556342,55562,2009-02-17T11:11:11Z,1,Python code to find if x is following y on twitter. More Pythonic way please,"<p>I wrote a twitter application in Python. Following is the code I used for a module where I find if x is following y. This code can be obviously improved upon. A pythonic way to do that?</p>

<pre><code>import urllib2
import sys
import re
import base64
from urlparse import urlparse
import simplejson

def is_follows(follower, following):

    theurl = 'http://twitter.com/friendships/exists.json?user_a='+follower+'&amp;user_b='+following

    username = 'uname1'
    password = 'pwd1'

    handle = urllib2.Request(theurl)

    base64string = base64.encodestring('%s:%s' % (username, password))
    authheader =  ""Basic %s"" % base64string
    handle.add_header(""Authorization"", authheader)
    fol=True
    try:
        fol = simplejson.load(urllib2.urlopen(handle))
    except IOError, e:
        # here we shouldn't fail if the username/password is right
        print ""It looks like the username or password is wrong.""
    return fol
</code></pre>

<p>Update: Indentation fixed.</p>
"
556730,8206,2009-02-17T13:16:25Z,11,Python list serialization - fastest method,"<p>I need to load (de-serialize) a pre-computed list of integers from a file in a Python script (into a Python list). The list is large (upto millions of items), and I can choose the format I store it in, as long as loading is fastest.</p>

<p>Which is the fastest method, and why?</p>

<ol>
<li>Using <code>import</code> on a .py file that just contains the list assigned to a variable</li>
<li>Using <code>cPickle</code>'s <code>load</code></li>
<li>Some other method (perhaps <code>numpy</code>?)</li>
</ol>

<p>Also, how can one benchmark such things reliably?</p>

<p><strong>Addendum:</strong> measuring this reliably is difficult, because <code>import</code> is cached so it can't be executed multiple times in a test. The loading with pickle also gets faster after the first time probably because page-precaching by the OS. Loading 1 million numbers with <code>cPickle</code> takes 1.1 sec the first time run, and 0.2 sec on subsequent executions of the script.</p>

<p>Intuitively I feel <code>cPickle</code> should be faster, but I'd appreciate numbers (this is quite a challenge to measure, I think). </p>

<p>And yes, it's important for me that this performs quickly.</p>

<p>Thanks</p>
"
556785,NA,2009-02-17T13:28:35Z,0,WingIDE no autocompletion for my modules,"<p>If anyone using WingIDE for their python dev needs:
For some reason I get auto-completion on all the standard python libraries (like datetime....) but not on my own modules.
So if I create my own class and then import it from another class, I get no auto-completion on it.</p>

<p>Does anyone know why this is?</p>
"
556907,48837,2009-02-17T13:58:41Z,7,How to get distinct Django apps on same subdomain to share session cookie?,"<p>We have a couple of Django applications deployed on the same subdomain.  A few power users need to jump between these applications.  I noticed that each time they bounce between applications their session cookie receives a new session ID from Django.  </p>

<p>I don't use the Django session table much except in one complex workflow.  If the user bounces between applications while in this workflow they lose their session and have to start over.</p>

<p>I dug through the Django session code and discovered that the:</p>

<blockquote>
  <p>django.conf.settings.SECRET_KEY</p>
</blockquote>

<p>is used to perform an integrity check on the sessions on each request.  If the integrity check fails, a new session is created. Realizing this, I changed the secret key in each of these applications to use the same value, thinking this would allow the integrity check to pass and allow them to share Django sessions.  However, it didn't seem to work.  </p>

<p>Is there a way to do this?  Am I missing something else?</p>

<p>Thanks in advance</p>
"
556967,3355,2009-02-17T14:12:24Z,4,Where should I post my python code?,"<p>Today I needed to parse some data out from an xlsx file (Office open XML Spreadsheet). I could have just opened the files in openoffice and exported to csv. However I will need to reimport data from this spreadsheet later, and I wanted to eliminate the manual operation.</p>

<p>I searched on the net for xlsx parser, and all I found was a stackoverflow question asking the same thing: <a href=""http://stackoverflow.com/questions/173246/parsing-and-generating-microsoft-office-2007-files-docx-xlsx-pptx"">http://stackoverflow.com/questions/173246/parsing-and-generating-microsoft-office-2007-files-docx-xlsx-pptx</a></p>

<p>So I rolled my own. </p>

<p>It's 134 lines of code for the parsing and accessing off a spreadsheet, and 54 lines of code of unit tests. This of course is only tested on the 1 file I needed it, and aside from how it's used in the unit tests there are is no documentation as off now. It uses zipfile, minidom, re and unittest, so perfectly portable and platform independent.</p>

<p>Since I don't blog, and I don't have any desire to turn this into a python library for OfficeOpen XML, I am stuck wondering where I should post this code. I have solved a problem that I am sure others will get in the future. So I want to post my code under public domain somewhere for anyone to copy and paste into their app and adjust to fix their problem.</p>

<p>The implementation is simple, and here is a quick overview off the features:</p>

<pre><code>workbook = Workbook(filename) # open a file
for sheet in workbook: pass # iterate over the worksheets
workbook[""sheetname""] # access a sheet by name, also possible to do by index from 0
sheet[""A1""] # Access cell
sheet[""A""] # Access column
sheet[""1""] # Access row
cell.value # Cell value - only tested with ints and strings.
</code></pre>

<p>Thanks for all the replies. I was going to hoste it on activestate, but the page kept crashing when sending me the activation mail. So I can't activate my code to post it.</p>

<p>My second choice was codeproject, and I wrote up a nice article about the file. Sadly that page crashes when I try to submit my post.</p>

<p>So I put it on github for any to see and branch off:
<a href=""http://github.com/staale/python-xlsx/tree/master"" rel=""nofollow"">http://github.com/staale/python-xlsx/tree/master</a></p>

<p>I don't want to do all the work for the python project hosting, so that's out.</p>

<p>Accepting the git answer, as that was the only thing that worked for me. And git rocks.</p>

<p>Edit: Gah, lost my entire post at codeproject, and I did such a nice writeup. Screw it, I have spent more time trying to share this than it took coding it. So I am calling it done for my part as off now. Unless I decide to tweak it more later.</p>
"
557069,7161,2009-02-17T14:30:39Z,1,Quick and dirty stripchart in python?,"<p>I have some python code that receives a message every so often containing a timestamp and an edge transition, either low-to-high, or high-to-low. I'd like to graph each transition on a stripchart for a quick and dirty visualization of the digital waveform with the minimal amount of effort.</p>

<p>Can you recommend any methods or packages that would make this easy?</p>

<p>I'm also not opposed to exporting the data in, for instance, csv format and loading it into another program if that would be easier.</p>

<p>Edit:</p>

<p>Tried CairoPlot:</p>

<pre><code>&gt;&gt;&gt; data = [(10, 0), (11, 1), (12.5, 0), (15, 1)]
&gt;&gt;&gt; def fn(t):
...     for d in data:
...             if t &gt; d[0]:
...                     return d[1]
...     return data[-1][1]
...
&gt;&gt;&gt; CairoPlot.function_plot( 'tester.png', data, 500, 300, discrete = True, h_bounds=( data[0][0],data[-1][0]), step = 1 )
</code></pre>

<p>This pinned my CPU at 100% for more than 10 minutes and was steadily eating memory. I killed it before it used up all of swap. Am I doing something wrong or is CairoPlot just broken?</p>

<p>Further edit:</p>

<p>I now have something more workable using CairoPlot, based loosely on the above code. However, it's not perfect because of the resolution: I may need up to tens of nanoseconds (1e-8) resolution in order to catch some of the shorter pulses. For a multi-second graph, this takes a <em>very</em> long time with this method.</p>
"
557101,61855,2009-02-17T14:38:19Z,0,Which Version of TurboGears should I use for a new project?,"<p>I'm planing a new project and I want to use <a href=""http://www.turbogears.org"" rel=""nofollow"">TurboGears</a>. The problem is: I'm not sure which version to choose. There are three choices:
Turbogears 1.0.8 (stable)
Turbogears 1.1 (beta 3)
Turbogears 2.0 (beta 4)</p>

<p>As this is a new project I dont want to choose the wrong framework. So where are the differeneces, how ""beta"" is 2.0?</p>

<p>Thanks for any help!</p>
"
557171,1712,2009-02-17T14:50:22Z,17,How to re-use a reusable app in Django,"<h2>Hello Django experts</h2>

<p>I am trying to create my first site in Django and as I'm looking for example apps out there to draw inspiration from, I constantly stumble upon a term called <em>""reusable apps""</em>.</p>

<p>I understand the <em>concept</em> of an app  that is reusable easy enough, but the means of reusing an app in Django are quite lost for me. Few questions that are bugging me in the whole business are:</p>

<p>What is the preferred way to re-use an existing Django app? Where do I put it and how do I reference it?</p>

<p>From what I understand, the recommendation is to put it on your ""PYTHONPATH"", but that breaks as soon as I need to deploy my app to a remote location that I have limited access to (e.g. on a hosting service).</p>

<p>So, if I develop my site on my local computer and intend to deploy it on an ISP where I only have ftp access, how do I re-use 3rd party Django apps so that if I deploy my site, the site keeps working (e.g. the only thing I can count on is that the service provider has Python 2.5 and Django 1.x installed)?</p>

<p>How do I organize my Django project so that I could easily deploy it along with all of the reusable apps I want to use?</p>
"
557199,11522,2009-02-17T14:56:13Z,0,"Converting a database-driven (non-OO) python script into a non-database driven, OO-script","<p>I have some software that is heavily dependent on MySQL, and is written in python without any class definitions. For performance reasons, and because the database is really just being used to store and retrieve large amounts of data, I'd like to convert this to an object-oriented python script that does not use the database at all.</p>

<p>So my plan is to export the database tables to a set of files (not many -- it's a pretty simple database; it's big in that it has a lot of rows, but only a few tables, each of which has just two or three columns).</p>

<p>Then I plan to read the data in, and have a set of functions which provide access to and operations on the data.</p>

<p>My question is this:</p>

<p>is there a preferred way to convert a set of database tables to classes and objects? For example, if I have a table which contains fruit, where each fruit has an id and a name, would I have a ""CollectionOfFruit"" class which contains a list of ""Fruit"" objects, or would I just have a ""CollectionOfFruit"" class which contains a list of tuples? Or would I just have a list of Fruit objects?</p>

<p>I don't want to add any extra frameworks, because I want this code to be easy to transfer to different machines. So I'm really just looking for general advice on how to represent data that might more naturally be stored in database tables, in objects in Python.</p>

<p>Alternatively, is there a good book I should read that would point me in the right direction on this?</p>
"
557213,41613,2009-02-17T14:58:21Z,1,Make pyunit show output for every assertion,"<p>How can I make python's unittest module show output for every assertion, rather than failing at the first one per test case? It would be much easier to debug if I could see the complete pattern of failures rather than just the first one.</p>

<p>In my case the assertions are based on a couple loops over an array containing an object plus some function names and the expected output (see below), so there isn't an obvious way (at least to me) to just separate every assertion into a separate TestCase:</p>

<pre><code>import unittest
import get_nodes

class mytest2(unittest.TestCase):
    def testfoo(self):
        root = get_nodes.mmnode_plus.factory('mytree.xml')

        tests = [
            (root, {'skip_traversal': False, 'skip_as_child': True, 'skip_as_parent': False, 'is_leaf': False}),
            (root[0], {'skip_traversal': False, 'skip_as_child': False, 'skip_as_parent': False, 'is_leaf': False}),
            (root[1], {'skip_traversal': True, 'skip_as_child': True, 'skip_as_parent': True}),
            (root[1][0], {'skip_traversal': True}),
            (root[0][0], {'is_leaf': False, 'skip_traversal': False, 'skip_as_child': False, 'skip_as_parent': False}),
            (root[0][0][0], {'is_leaf': True, 'skip_traversal': False, 'skip_as_child': False, 'skip_as_parent': True}),
            (root[0][4], {'skip_traversal': True, 'skip_as_child': True, 'skip_as_parent': True}),
            (root[0][7], {'skip_traversal': False, 'skip_as_child': False, 'skip_as_parent': True}),
        ]       

        for (node, states) in tests:
            for test_state, exp_result in states.iteritems():
                self.assertEqual(node.__getattribute__(test_state)(), exp_result, ""unexpected %s for state %s of node %s %s"" % (not exp_result, test_state, repr(node), repr(node.__dict__)))

unittest.main()
</code></pre>

<p><code>obj.__getattribute__('hello')</code> returns <code>obj.hello</code> so <code>node.__getattribute__(test_state)()</code> is my way of calling the member function of node whose name is stored in the test_state variable.</p>
"
557460,16417,2009-02-17T15:47:49Z,7,Django - having middleware communicate with views/templates,"<p>Alright, this is probably a really silly question but I am new to Python/Django so I can't really wrap my head around its scoping concepts just yet. Right now I am writing a <a href=""http://docs.djangoproject.com/en/dev/topics/http/middleware/#topics-http-middleware"">middleware</a> class to handle some stuff, and I want to set 'global' variables that my views and templates can access. What is the ""right"" way of doing this? I considered doing something like this:</p>

<h2>middleware.py</h2>

<pre><code>from django.conf import settings

class BeforeFilter(object):
    def process_request(self, request):
        settings.my_var = 'Hello World'
        return None
</code></pre>

<h2>views.py</h2>

<pre><code>from django.conf import settings
from django.http import HttpResponse

def myview(request):
    return HttpResponse(settings.my_var)
</code></pre>

<p>Although this works, I am not sure if it is the ""Django way"" or the ""Python way"" of doing this.</p>

<p>So, my questions are:<br />
1. Is this the right way?<br />
2. If it is the right way, what is the right way of adding variables that can be used in the actual template from the middleware? Say I want to evaluate something and I want to set a variable <code>headername</code> as 'My Site Name' in the middleware, and I want to be able to do <code>{{ headername }}</code> in all templates. Doing it the way I have it now I'd have to add <code>headername</code> to the context inside every view. Is there anyway to bypass this? I am thinking something along the lines of CakePHP's <code>$this-&gt;set('headername','My Site Name');</code><br />
3. I am using the middleware class as an equivalent of CakePHP's <code>beforeFilter</code> that runs before every view (or controller in CakePHP) is called. Is this the right way of doing this?<br />
4. Completely unrelated but it is a small question, what is a nice way of printing out the contents of a variable to the browser ala <code>print_r</code>? Say I want to see all the stuff inside the <code>request</code> that is passed into the view? Is <code>pprint</code> the answer?</p>
"
557462,36330,2009-02-17T15:48:23Z,13,How do I use easy_install and buildout when pypi is down?,"<p>I am using <a href=""http://pypi.python.org/pypi/zc.buildout"">buildout</a> to automatically download and setup the many dependencies of my Plone installation. buildout more or less uses easy_install to download and install a bunch of Python eggs. This usually works, but it doesn't work if any of the dependencies cannot be downloaded or if I want buildout to find an internal package not appropriate for pypi. How can I set up my own local version of pypi to automatically mirror the packages I need? Will it still depend on third-party servers for packages that use pypi for their metadata but not their code?</p>
"
557555,52513,2009-02-17T16:10:51Z,5,How do I suppress python-mode's output buffer?,"<p>In python-mode (for emacs), hitting Control-C\Control-C will execute the current buffer.  However, when execution is finished, the output buffer springs up and splits my editing window in half.  This is a <em>complete</em> pain, especially given that there's generally no output in the buffer anyway!</p>

<p>Is there a way to stop the buffer from appearing?  Also, how can I send painful electric shocks to the programmer who thought unexpectedly interrupting my train of thought with an empty buffer was a good idea?</p>

<p><strong>Edit:</strong>  Apparently, there are uses for this behavior, most notably in seeing the output of a program.  That's fine, but if there's no output (as in the program with which I'm tinkering), it is <em>really</em> dumb to cut my buffer in half with a blank window.</p>
"
557906,45629,2009-02-17T17:37:23Z,9,"Want procmail to run a custom python script, everytime a new mail shows up","<p>I have a pretty usual requirement with procmail but I am unable to get the results somehow. I have procmailrc file with this content:</p>

<pre><code>:0
* ^To.*@myhost
| /usr/bin/python /work/scripts/privilege_emails_forward.py
</code></pre>

<p>Wherein my custom python script(privilege_emails_forward.py) will be scanning through the email currently received and do some operations on the mail content. But I am unable to get the script getting executed at the first shot(let alone scanning through the mail content).</p>

<ul>
<li>Is this a correct way of invoking an external program(python) as soon as new mail arrives? </li>
<li>And how does my python program(privilege_emails_forward.py) will receive the mail as input? I mean as sys.argv or stdin????</li>
</ul>
"
557927,1179,2009-02-17T17:43:59Z,8,Debugging web apps,"<p>I've gotten pretty used to step-through debuggers over the years, both in builder, and using the pydev debugger in Eclipse. </p>

<p>Currently, I'm making something in Python and running it on Google App Engine, and I should add that I'm pretty new to developing any real web app; I've never really done much beyond editing HTML code.</p>

<p>So, I'm running Google's dev_appserver and viewing my work at <a href=""http://localhost"">http://localhost</a>, dig, and right now, the only tool I'm using to identify issues is PMD (poor man's debugger). . .basically writing things to the html pages to see the value of local variables. </p>

<p>Is there a better technique for dealing with this? </p>
"
558105,55562,2009-02-17T18:22:07Z,6,"String separation in required format, Pythonic way? (with or w/o Regex)","<p>I have a string in the format:</p>

<pre><code>t='@abc @def Hello this part is text'
</code></pre>

<p>I want to get this:</p>

<pre><code>l=[""abc"", ""def""] 
s='Hello this part is text'
</code></pre>

<p>I did this:</p>

<pre><code>a=t[t.find(' ',t.rfind('@')):].strip()
s=t[:t.find(' ',t.rfind('@'))].strip()
b=a.split('@')
l=[i.strip() for i in b][1:]
</code></pre>

<p>It works for the most part, but it fails when the text part has the '@'. 
Eg, when: </p>

<pre><code>t='@abc @def My email is red@hjk.com'
</code></pre>

<p>it fails. The @names are there in the beginning and there can be text after @names, which may possibly contain @.</p>

<p>Clearly I can append initally with a space and find out first word without '@'. But that doesn't seem an elegant solution.</p>

<p>What is a pythonic way of solving this?</p>
"
558216,46411,2009-02-17T18:49:20Z,13,Function to determine if two numbers are nearly equal when rounded to n significant decimal digits,"<p>I have been asked to test a library provided by a 3rd party. The library is known to be accurate to <em>n</em> significant figures. Any less-significant errors can safely be ignored. I want to write a function to help me compare the results:</p>

<pre><code>def nearlyequal( a, b, sigfig=5 ):
</code></pre>

<p>The purpose of this function is to determine if two floating-point numbers (a and b) are approximately equal. The function will return True if a==b (exact match) or if a and b have the same value when rounded to <strong>sigfig</strong> significant-figures when written in decimal. </p>

<p>Can anybody suggest a good implementation? I've written a mini unit-test. Unless you can see a bug in my tests then a good implementation should pass the following:</p>

<pre><code>assert nearlyequal(1, 1, 5) 
assert nearlyequal(1.0, 1.0, 5) 
assert nearlyequal(1.0, 1.0, 5) 
assert nearlyequal(-1e-9, 1e-9, 5) 
assert nearlyequal(1e9, 1e9 + 1 , 5) 
assert not nearlyequal( 1e4, 1e4 + 1, 5) 
assert nearlyequal( 0.0, 1e-15, 5 ) 
assert not nearlyequal( 0.0, 1e-4, 6 ) 
</code></pre>

<p>Additional notes:</p>

<ol>
<li>Values a and b might be of type int, float or numpy.float64. Values a and b will always be of the same type. It's vital that conversion does not introduce additional error into the function.</li>
<li>Lets keep this numerical, so functions that convert to strings or use non-mathematical tricks are not ideal. This program will be audited by somebody who is a mathematician who will want to be able to prove that the function does what it is supposed to do.</li>
<li>Speed... I've got to compare a lot of numbers so the faster the better.</li>
<li>I've got numpy, scipy and the standard-library. Anything else will be hard for me to get, especially for such a small part of the project.</li>
</ol>
"
558219,8024,2009-02-17T18:50:18Z,19,Bayesian spam filtering library for Python,"<p>I am looking for a Python library which does Bayesian Spam Filtering. I looked at SpamBayes and OpenBayes, but both seem to be unmaintained (I might be wrong).</p>

<p>Can anyone suggest a good Python (or Clojure, Common Lisp, even Ruby) library which implements Bayesian Spam Filtering?</p>

<p>Thanks in advance.</p>

<p><strong>Clarification</strong>: I am actually looking for a <em>Bayesian Spam Classifier</em> and not necessarily a spam filter. I just want to train it using some data and later tell me whether some given data is spam. Sorry for any confusion.</p>
"
558539,41094,2009-02-17T20:19:26Z,0,What is wrong with my nested loops in Python?,"<p>How do I make nested loops in Python (version 3.0)?</p>

<p>I am trying to get the following loops to show me the products of two numbers:</p>

<pre><code>def PrintProductsBelowNumber(number):
    number1 = 1
    number2 = 1
    while number1 &lt;= number:
        while number2 &lt;= number:
            print(number1, ""*"", number2, ""="", number1 * number2)
            number2 += 1
        number1 += 1

PrintProductsBelowNumber(2)
</code></pre>

<p>As a result I get:</p>

<pre><code>1 * 1 = 1
1 * 2 = 2
</code></pre>

<p>So it seems the outer loop over number1 does not run.</p>

<p>How do I get the loop over number1 to run, and thus obtain:</p>

<pre><code>1 * 1 = 1
1 * 2 = 2
2 * 1 = 2
2 * 2 = 4
</code></pre>
"
558776,4166,2009-02-17T21:20:24Z,4,"Detect script start up from command prompt or ""double click"" on Windows","<p>Is is possible to detect if a Python script was started from the command prompt or by a user ""double clicking"" a .py file in the file explorer on Windows?</p>
"
558926,10040,2009-02-17T22:05:10Z,2,"Issue with PyAMF, Django, and Python's ""property"" feature","<p>So far, I've had great success using PyAMF to communicate between my Flex front-end and my Django back-end.  However, I believe I've encountered a bug.  The following example (emphasis on the word ""example"") demonstrates the (potential) bug:</p>

<p>My Flex app contains the following VO:</p>

<pre><code>package myproject.model.vo
{
    [Bindable]
    [RemoteClass(alias=""myproject.models.Book"")]

    public class BookVO
    {
        public var id:int;
        public var title:String;
        public var numberOfOddPages:int;
    }
}
</code></pre>

<p>My Django app contains the following model:</p>

<pre><code>class Book(models.Models):
    title = models.CharField(max_length=20)

    def _get_number_of_odd_pages(self):
        #some code that calculates odd pages
       return odd_page_total

    numberOfOddPages = property(_get_number_of_odd_pages)
</code></pre>

<p>When I attempt to retrieve the book objects to display in a DataGrid, the books display in the grid as expected.  However, ""numberOfOddPages"" is always set to 0.  I have even attempted to explicitly set this attribute with a default value (i.e., ""numberOfOddPages=100"") to see if my ""_get_number_of_odd_pages()"" method had an error in it.  Unfortunately, it yields the same result: the value in the VO remains at 0.</p>

<p>Does anyone have any insight into what I may be doing wrong?</p>
"
558999,8965,2009-02-17T22:25:46Z,4,Eclipse PyDev: setting breakpoints in site-packages source,"<p>I am debugging a problem in Django with <strong>Pydev</strong>.<br />
I <strong>can set breakpoint</strong> in my django <strong>project code</strong> with out a problem.<br />
However I <strong>can't set breakpoints</strong> in the <strong>Django library source code</strong> (in site-packages).  </p>

<p>The PyDev debugger user interface in this case <strong>simply does nothing when I click</strong> to set the breakpoint and does not break at that location when I run the debugger.</p>

<p>Am I missing some PyDev configuration? In other debuggers I have used, this behavior indicates a problem relating the debug information with the source code.
Any ideas on next steps would be a help.</p>

<p>I also have the <strong>site-packages</strong> configured in PyDev to be in my <strong>PYTHONPATH</strong></p>

<p>I am using Eclipse on Max OS X if that helps.</p>

<p>Thanks</p>
"
559096,61855,2009-02-17T22:53:27Z,10,Check whether a PDF-File is valid (Python),"<p><strong>I get a File via a HTTP-Upload and need to be sure its a pdf-file.</strong> Programing Language is Python, but this should not matter.</p>

<p>I thought of the following solutions:</p>

<ol>
<li><p>Check if the first bytes of the string are ""%PDF"". <em>This is not a good check but prevents the use from uploading other files accidentally.</em></p></li>
<li><p>Try the libmagic (the ""file"" command on the bash uses it). <em>This does exactly the same check as 1.</em></p></li>
<li><p>Take a lib and try to read the page-count out of the file. <em>If the lib is able to read a pagecount it should be a valid pdf. Problem: I dont know a lib for python which can do this</em></p></li>
</ol>

<p>So anybody got any solutions for a lib or another trick?</p>

<p>Thanks </p>
"
559431,24718,2009-02-18T01:03:40Z,12,How to display data using openlayers with OpenStreetMap in geodjango?,"<p>I've got geodjango running using <a href=""http://openlayers.org/"">openlayers</a> and <a href=""http://www.openstreetmap.org/"">OpenStreetMaps</a> with the admin app.</p>

<p>Now I want to write some views to display the data. Basically, I just want to add a list of points (seen in the admin) to the map.</p>

<p>Geodjango appears to use a <em>special</em> <a href=""http://code.djangoproject.com/browser/django/tags/releases/1.0.2/django/contrib/gis/templates/gis/admin/openlayers.js"">openlayers.js</a> file to do it's magic in the admin.  Is there a good way to interface with this?</p>

<p>How can I write a view/template to display the geodjango data on a open street map window, as is seen in the admin?</p>

<p>At the moment, I'm digging into the <a href=""http://openlayers.org/"">openlayers.js</a> file and api looking for an 'easy' solution.  (I don't have js experience so this is taking some time.)  </p>

<p>The current way I can see to do this is add the following as a template, and use django to add the code needed to display the points.  (Based on the example <a href=""http://openlayers.org/dev/examples/vector-features.html"">here</a>)</p>

<pre><code>&lt;html xmlns=""http://www.w3.org/1999/xhtml""&gt;
    &lt;head&gt;
        &lt;title&gt;Draw Feature Example&lt;/title&gt;

        &lt;script src=""http://www.openlayers.org/api/OpenLayers.js""&gt;&lt;/script&gt;
      &lt;script type=""text/javascript""&gt;
            var map;

            function init(){
                map = new OpenLayers.Map('map');
                var layer = new OpenLayers.Layer.WMS( ""OpenLayers WMS"",
                        ""http://labs.metacarta.com/wms/vmap0"", {layers: 'basic'} );
                map.addLayer(layer);

                /*
                 * Layer style
                 */
                // we want opaque external graphics and non-opaque internal graphics
                var layer_style = OpenLayers.Util.extend({}, OpenLayers.Feature.Vector.style['default']);
                layer_style.fillOpacity = 0.2;
                layer_style.graphicOpacity = 1;

                /*
                 * Blue style
                 */
                var style_blue = OpenLayers.Util.extend({}, layer_style);
                style_blue.strokeColor = ""blue"";
                style_blue.fillColor = ""blue"";
                style_blue.graphicName = ""star"";
                style_blue.pointRadius = 10;
                style_blue.strokeWidth = 3;
                style_blue.rotation = 45;
                style_blue.strokeLinecap = ""butt"";

                var vectorLayer = new OpenLayers.Layer.Vector(""Simple Geometry"", {style: layer_style});

                // create a point feature
                var point = new OpenLayers.Geometry.Point(-111.04, 45.68);
                var pointFeature = new OpenLayers.Feature.Vector(point,null,style_blue);
                // Add additional points/features here via django

                map.addLayer(vectorLayer);
                map.setCenter(new OpenLayers.LonLat(point.x, point.y), 5);
                vectorLayer.addFeatures([pointFeature]);
            }
        &lt;/script&gt;
    &lt;/head&gt;
    &lt;body onload=""init()""&gt;
        &lt;div id=""map"" class=""smallmap""&gt;&lt;/div&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>Is this how it's done, or is there a better way?</p>
"
559436,46411,2009-02-18T01:06:20Z,13,How do I validate the MX record for a domain in python?,"<p>I have a large number of email addresses to validate. Initially I parse them with a regexp to throw out the completely crazy ones. I'm left with the ones that look sensible but still might contain errors. </p>

<p>I want to find which addresses have valid domains, so given me@abcxyz.com I want to know if it's even possible to send emails to abcxyz.com .</p>

<p>I want to test that to see if it corresponds to a valid A or MX record - is there an easy way to do it using only Python standard library? I'd rather not add an additional dependency to my project just to support this feature.</p>
"
559578,52626,2009-02-18T02:02:08Z,4,Need a better way to execute console commands from python and log the results,"<p>I have a python script which needs to execute several command line utilities. The stdout output is sometimes used for further processing. In all cases, I want to log the results and raise an exception if an error is detected. I use the following function to achieve this:</p>

<pre><code>def execute(cmd, logsink):
    logsink.log(""executing: %s\n"" % cmd)
    popen_obj = subprocess.Popen(\
          cmd, shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
    (stdout, stderr) = popen_obj.communicate()
    returncode = popen_obj.returncode
    if (returncode &lt;&gt; 0):
       logsink.log(""   RETURN CODE: %s\n"" % str(returncode))
    if (len(stdout.strip()) &gt; 0):
       logsink.log(""   STDOUT:\n%s\n"" % stdout)
    if (len(stderr.strip()) &gt; 0):
       logsink.log(""   STDERR:\n%s\n"" % stderr)
    if (returncode &lt;&gt; 0):
       raise Exception, ""execute failed with error output:\n%s"" % stderr
    return stdout
</code></pre>

<p>""logsink"" can be any python object with a log method. I typically use this to forward the logging data to a specific file, or echo it to the console, or both, or something else...</p>

<p>This works pretty good, except for three problems where I need more fine-grained control than the communicate() method provides:</p>

<ol>
<li>stdout and stderr output can be interleaved on the
console, but the above function logs
them separately. This can
complicate the interpretation of the
log. How do I log stdout and stderr
lines interleaved, in the same order
as they were output?</li>
<li>The above function will only log the
command output once the command has
completed. This complicates diagnosis of issues when commands get stuck in an infinite loop or take a very long time for some other reason. How do I get the log in real-time, while the command is still executing?</li>
<li>If the logs are large, it can get
hard to interpret which command
generated which output. Is there a
way to prefix each line with
something (e.g. the first word of
the cmd string followed by :).</li>
</ol>
"
559662,10660,2009-02-18T02:48:10Z,1,Shared folder sessions in Python,"<p>I'm trying to get a list of currently-open sessions in Python via WMI.</p>

<p>What I'm after is the exact information displayed in the Computer Management thingy, when you go to <strong>System Tools</strong> -> <strong>Shared Folders</strong> -> <strong>Sessions</strong> (ie username, computer name, connected time, that sort of thing).</p>

<p>I know (or at least believe) it has something to do with *Win32_ConnectionShare*...</p>

<p>If it makes a difference, I'm using <a href=""http://timgolden.me.uk/python/wmi.html"" rel=""nofollow"">Tim Golden's wmi module</a>.</p>

<p>Of course, if there's another (non-WMI) way of getting this information then that's welcome too...</p>
"
559701,16417,2009-02-18T03:12:29Z,2,Django - queries made repeat/inefficient,"<p>Alright, I have a Django view, like this:</p>

<pre><code>@render_to('home/main.html')
def login(request):
    # also tried Client.objects.select_related().all()
    clients = Client.objects.all()
    return {'clients':clients}
</code></pre>

<p>And I have a template, <code>main.html</code>, like this:</p>

<pre><code>&lt;ul&gt;
{% for client in clients %}
&lt;li&gt;{{ client.full_name }}&lt;/li&gt;
    &lt;ul&gt;
    {% for pet in client.pets.all %}
        &lt;li&gt;{{ pet.full_name }}&lt;/li&gt;
    {% endfor %}
    &lt;/ul&gt;
{% endfor %}
&lt;/ul&gt;
</code></pre>

<p>I also print out all the queries in <a href=""http://docs.djangoproject.com/en/dev/ref/templates/api/#django-core-context-processors-debug"" rel=""nofollow""><code>sql_queries</code></a> at the bottom of my base template. When I run this view, the following queries are made:</p>

<pre><code>SELECT `home_client`.`id`, ... FROM `home_client`;
SELECT `home_pet`.`id`, ... FROM `home_pet` WHERE `home_pet`.`client_id` = 1;
SELECT `home_client`.`id`, ... FROM `home_client` WHERE `home_client`.`id` = 1;
SELECT `home_client`.`id`, ... FROM `home_client` WHERE `home_client`.`id` = 1;
SELECT `home_pet`.`id`, ... FROM `home_pet` WHERE `home_pet`.`client_id` = 2;
SELECT `home_client`.`id`, ... FROM `home_client` WHERE `home_client`.`id` = 2;
</code></pre>

<p>My question is, why are all these queries being made? Shouldn't it just be 1 query to retrieve all the clients and a query per client to retrieve all the pets from each client? I have 2 clients in the <code>home_client</code> table, so it should be 3 queries total. Most troubling of all is that queries 3 and 4 are 100% identical. I don't want to ""prematurely optimize"" or anything but I do want to make sure Django isn't being wildly inefficient. Any help on this would be appreciated. Thanks.</p>
"
560040,46646,2009-02-18T06:26:54Z,10,Conditional compilation in Python,"<p>How to do conditional compilation in Python ?</p>

<p>Is it using DEF ?</p>
"
560283,30181,2009-02-18T08:45:47Z,1,How do you construct an array suitable for numpy sorting?,"<p>I need to sort two arrays simultaneously, or rather I need to sort one of the arrays and bring the corresponding element of its associated array with it as I sort.  That is if the array is [(5, 33), (4, 44), (3, 55)] and I sort by the first axis (labeled below dtype='alpha') then I want: [(3.0, 55.0) (4.0, 44.0) (5.0, 33.0)].  These are really big data sets and I need to sort first ( for nlog(n) speed ) before I do some other operations.  I don't know how to merge my two separate arrays though in the proper manner to get the sort algorithm working.  I think my problem is rather simple.  I tried three different methods:</p>

<pre><code>import numpy
x=numpy.asarray([5,4,3])
y=numpy.asarray([33,44,55])

dtype=[('alpha',float), ('beta',float)]

values=numpy.array([(x),(y)])
values=numpy.rollaxis(values,1)
#values = numpy.array(values, dtype=dtype)
#a=numpy.array(values,dtype=dtype)
#q=numpy.sort(a,order='alpha')
print ""Try 1:\n"", values

values=numpy.empty((len(x),2))
for n in range (len(x)):
        values[n][0]=y[n]
        values[n][1]=x[n]
print ""Try 2:\n"", values
#values = numpy.array(values, dtype=dtype)
#a=numpy.array(values,dtype=dtype)
#q=numpy.sort(a,order='alpha')

###
values = [(x[0], y[0]), (x[1],y[1]) , (x[2],y[2])]
print ""Try 3:\n"", values
values = numpy.array(values, dtype=dtype)
a=numpy.array(values,dtype=dtype)
q=numpy.sort(a,order='alpha')

print ""Result:\n"",q
</code></pre>

<p>I commented out the first and second trys because they create errors, I knew the third one would work because that was mirroring what I saw when I was RTFM.  Given the arrays x and y (which are very large, just examples shown) how do I construct the array (called values) that can be called by numpy.sort properly?</p>

<p>*** Zip works great, thanks.  Bonus question: How can I later unzip the sorted data into two arrays again?</p>
"
560936,56183,2009-02-18T12:51:28Z,2,How do i extract my required data from HTML file?,"<p>This is the HTML I have:</p>

<pre><code>p_tags = '''&lt;p class=""foo-body""&gt;
  &lt;font class=""test-proof""&gt;Full name&lt;/font&gt; Foobar&lt;br /&gt;
  &lt;font class=""test-proof""&gt;Born&lt;/font&gt; July 7, 1923, foo, bar&lt;br /&gt;
  &lt;font class=""test-proof""&gt;Current age&lt;/font&gt; 27 years 226 days&lt;br /&gt;
  &lt;font class=""test-proof""&gt;Major teams&lt;/font&gt; &lt;span style=""white-space: nowrap""&gt;Japan,&lt;/span&gt; &lt;span style=""white-space: nowrap""&gt;Jakarta,&lt;/span&gt; &lt;span style=""white-space: nowrap""&gt;bazz,&lt;/span&gt; &lt;span style=""white-space: nowrap""&gt;foo,&lt;/span&gt; &lt;span style=""white-space: nowrap""&gt;foobazz&lt;/span&gt;&lt;br /&gt;
  &lt;font class=""test-proof""&gt;Also&lt;/font&gt; bar&lt;br /&gt;
  &lt;font class=""test-proof""&gt;foo style&lt;/font&gt; hand &lt;br /&gt;
  &lt;font class=""test-proof""&gt;bar style&lt;/font&gt; ball&lt;br /&gt;
  &lt;font class=""test-proof""&gt;foo position&lt;/font&gt; bak&lt;br /&gt;
  &lt;br class=""bar"" /&gt;
&lt;/p&gt;'''
</code></pre>

<p>This is my Python code, using Beautiful Soup:</p>

<pre><code>def get_info(p_tags):
    """"""Returns brief information.""""""

    head_list = []
    detail_list = []
    # This works fine
    for head in p_tags.findAll('font', 'test-proof'):
        head_list.append(head.contents[0])

    # Some problem with this?
    for index in xrange(2, 30, 4):
        detail_list.append(p_tags.contents[index])


    return dict([(l, detail_list[head_list.index(l)]) for l in head_list])
</code></pre>

<p>I get the proper <code>head_list</code> from the HTML but the <code>detail_list</code> is not working.</p>

<pre>
head_list = [u'Full name',
 u'Born',
 u'Current age',
 u'Major teams',
 u'Also',
 u'foo style',
 u'bar style',
 u'foo position']
</pre>

<p>I wanted something like this</p>

<pre>
{
  'Full name': 'Foobar', 
  'Born': 'July 7, 1923, foo, bar', 
  'Current age': '78 years 226 days', 
  'Major teams': 'Japan, Jakarta, bazz, foo, foobazz', 
  'Also': 'bar', 
  'foo style': 'hand', 
  'bar style': 'ball', 
  'foo position': 'bak'
}
</pre>

<p>Any help would be appreciable. Thanks in advance.</p>
"
561301,49018,2009-02-18T14:38:01Z,3,Implementing chat in an application?,"<p>I'm making a game and I am using Python for the server side.  </p>

<p>It would be fairly trivial to implement chat myself using Python - that's not my question.<br>
<strong>My question is</strong><br>
I was just wondering if there were any pre-made chat servers or some kind of service that I would be able to implement inside of my game instead of rolling my own chat server?<br>
Maybe like a different process I could run next to my game server process?</p>
"
561486,6083,2009-02-18T15:25:25Z,60,How to convert an integer to the shortest url-safe string in Python?,"<p>I want the shortest possible way of representing an integer in a URL. For example, 11234 can be shortened to '2be2' using hexadecimal. Since base64 uses is a 64 character encoding, it should be possible to represent an integer in base64 using even less characters than hexadecimal. The problem is I can't figure out the cleanest way to convert an integer to base64 (and back again) using Python.</p>

<p>The base64 module has methods for dealing with bytestrings - so maybe one solution would be to convert an integer to its binary representation as a Python string... but I'm not sure how to do that either.</p>
"
561626,67875,2009-02-18T15:47:53Z,5,Import python functions into a .NET language?,"<p>I am a C# .NET programmer and am learning Python.  I have downloaded IronPython, and know that it can call into .NET libraries.  </p>

<p>I'm wondering whether there is a way to do the reverse, that is to call into some existing ""classic"" Python libraries in my C# code, maybe using .NET Interop.</p>

<p>I'd like to be able to access functions in libraries such as pygame.</p>
"
561791,563932,2009-02-18T16:16:36Z,2,python MySQL module class file name,"<p>I am confused how directory name, file name and class name all work together.</p>

<p>This is what I have at the moment</p>

<pre class=""lang-none prettyprint-override""><code>  app.py
  database/
     client.py
     staff.py
     order.py
</code></pre>

<p>Inside <code>client.py</code> I have a single class called <code>client</code>, which acts as the database model (MVC). The same with my other files: <code>staff.py</code> has a class called <code>staff</code>, <code>order.py</code> has <code>order</code>.</p>

<p>Then in <code>app.py</code> I do:</p>

<pre class=""lang-py prettyprint-override""><code>  from database import client as model
  c = model.client()
</code></pre>

<p>And then I get confused. In an ideal world <strong>this is what I want to do</strong>:</p>

<ol>
<li><p>Keep my database model classes in separate files in their own directory.</p></li>
<li><p>Use them like this:</p></li>
</ol>

<pre class=""lang-py prettyprint-override""><code>  c = model.client()
  o = model.order()
  s = model.staff()
</code></pre>

<p>The only way I can see to do this is to put all my classes in a single file called <code>model.py</code> and save this at the root.</p>

<p>I'm sure I am missing something very basic here.</p>
"
561988,NA,2009-02-18T17:09:13Z,7,Detect file handle leaks in python?,"<p>My program appears to be leaking file handles. How can I find out where?</p>

<p>My program uses file handles in a few different places—output from child processes, call <code>ctypes</code> API (ImageMagick) opens files, and they are copied.</p>

<p>It crashes in <code>shutil.copyfile</code>, but I'm pretty sure this is not the place it is leaking.</p>

<pre class=""lang-none prettyprint-override""><code>Traceback (most recent call last):
  File ""&lt;string&gt;"", line 1, in &lt;module&gt;
  File ""C:\Python25\Lib\site-packages\magpy\magpy.py"", line 874, in main
    magpy.run_all()
  File ""C:\Python25\Lib\site-packages\magpy\magpy.py"", line 656, in run_all
    [operation.operate() for operation in operations]
  File ""C:\Python25\Lib\site-packages\magpy\magpy.py"", line 417, in operate
    output_file = self.place_image(output_file)
  File ""C:\Python25\Lib\site-packages\magpy\magpy.py"", line 336, in place_image
    shutil.copyfile(str(input_file), str(self.full_filename))
  File ""C:\Python25\Lib\shutil.py"", line 47, in copyfile
    fdst = open(dst, 'wb')
IOError: [Errno 24] Too many open files: 'C:\\Documents and Settings\\stuart.axon\\Desktop\\calzone\\output\\wwtbam4\\Nokia_NCD\\nl\\icon_42x42_V000.png'
Press any key to continue . . .
</code></pre>
"
561991,NA,2009-02-18T17:09:37Z,0,wxPython - Redrawing Error when replacing wxFrame's Panel,"<p>I'm creating a small wxPython utility for the first time, and I'm stuck on a problem. </p>

<p>I would like to add components to an already created frame. To do this, I am destroying the frame's old panel, and creating a new panel with all new components. </p>

<p>1: Is there a better way of dynamically adding content to a panel?</p>

<p>2: Why, in the following example, do I get a a strange redraw error in which in the panel is drawn only in the top left hand corner, and when resized, the panel is drawn correctly?
(WinXP, Python 2.5, latest wxPython)</p>

<p>Thank you for the help!</p>

<pre><code>    import wx

class MainFrame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None, -1, 'TimeTablr')


        #Variables
        self.iCalFiles = ['Empty', 'Empty', 'Empty']
        self.panel = wx.Panel(self, -1)
        self.layoutElements()        


    def layoutElements(self):
        self.panel.Destroy()
        self.panel = wx.Panel(self, -1)
        #Buttons
        self.getFilesButton = wx.Button(self.panel, 1, 'Get Files')
        self.calculateButton = wx.Button(self.panel, 2, 'Calculate')
        self.quitButton = wx.Button(self.panel, 3, 'Quit Application')

        #Binds
        self.Bind(wx.EVT_BUTTON, self.Quit, id=3)
        self.Bind(wx.EVT_BUTTON, self.getFiles, id=1)

        #Layout Managers
        vbox = wx.BoxSizer(wx.VERTICAL)

        #Panel Contents
        self.ctrlsToDescribe = []
        self.fileNames = []
        for iCalFile in self.iCalFiles:
            self.ctrlsToDescribe.append(wx.TextCtrl(self.panel, -1))
            self.fileNames.append(wx.StaticText(self.panel, -1, iCalFile))

        #Add Components to Layout Managers
        for i in range(0, len(self.ctrlsToDescribe)):
            hboxtemp = wx.BoxSizer(wx.HORIZONTAL)
            hboxtemp.AddStretchSpacer()
            hboxtemp.Add(self.fileNames[i], 1, wx.EXPAND)
            hboxtemp.AddStretchSpacer()
            hboxtemp.Add(self.ctrlsToDescribe[i], 2, wx.EXPAND)
            hboxtemp.AddStretchSpacer()
            vbox.Add(hboxtemp)

        finalHBox = wx.BoxSizer(wx.HORIZONTAL)
        finalHBox.Add(self.getFilesButton)
        finalHBox.Add(self.calculateButton)
        finalHBox.Add(self.quitButton)

        vbox.Add(finalHBox)
        self.panel.SetSizer(vbox)
        self.Show()


    def Quit(self, event):
        self.Destroy()

    def getFiles(self, event):
        self.iCalFiles = ['Example1','Example1','Example1','Example1','Example1','Example1']
        self.layoutElements()
        self.Update()



app = wx.App()
MainFrame()
app.MainLoop()
del app
</code></pre>
"
562278,39385,2009-02-18T18:27:21Z,0,python upload - where are tmp/FILES?,"<p>I'm running python 2.4 from cgi and I'm trying to upload to a cloud service using a python api.  In php, the $_FILE array contains a ""tmp"" element which is where the file lives until you place it where you want it.  What's the equivalent in python?  </p>

<p>if I do this </p>

<pre><code>fileitem = form['file']
</code></pre>

<p><code>fileitem.filename</code> is the name of the file </p>

<p>if i print fileitem, the array simply contains the file name and what looks to be the file itself.  </p>

<p>I am trying to stream things and it requires the tmp location when using the php api. </p>
"
562349,46411,2009-02-18T18:44:56Z,0,"I want to load all of the unit-tests in a tree, can it be done?","<p>I have a heirarchical folder full of Python unit-tests. They are all importable "".py"" files which define TestCase objects. This folder contains thousands of files in many nested subdirectories and was written by somebody else. I do not have permission to change it, I just have to run it.</p>

<p>I want to generate a single TestSuite object which contains all of the TestCases in the folder. Is there an easy and elegant way to do this? </p>

<p>Thanks</p>
"
562519,33061,2009-02-18T19:38:57Z,11,Python Imaging Library save function syntax,"<p>Simple one I think but essentially I need to know what the syntax is for the save function on the PIL. The help is really vague and I can't find anything online. Any help'd be great, thanks :).</p>
"
563022,25466,2009-02-18T21:58:01Z,12,What's Python good practice for importing and offering optional features?,"<p>I'm writing a piece of software over on github. It's basically a tray icon with some extra features. I want to provide a working piece of code without actually having to make the user install what are essentially dependencies for optional features and I don't actually want to import things I'm not going to use so I thought code like this would be ""good solution"":</p>

<pre><code>---- IN LOADING FUNCTION ----
features = []

for path in sys.path:
       if os.path.exists(os.path.join(path, 'pynotify')):
              features.append('pynotify')
       if os.path.exists(os.path.join(path, 'gnomekeyring.so')):
              features.append('gnome-keyring')

#user dialog to ask for stuff
#notifications available, do you want them enabled?
dlg = ConfigDialog(features)

if not dlg.get_notifications():
    features.remove('pynotify')


service_start(features ...)

---- SOMEWHERE ELSE ------

def service_start(features, other_config):

        if 'pynotify' in features:
               import pynotify
               #use pynotify...
</code></pre>

<p>There are some issues however. If a user formats his machine and installs the newest version of his OS and redeploys this application, features suddenly disappear without warning. The solution is to present this on the configuration window:</p>

<pre><code>if 'pynotify' in features:
    #gtk checkbox
else:
    #gtk label reading ""Get pynotify and enjoy notification pop ups!""
</code></pre>

<p>But if this is say, a mac, how do I know I'm not sending the user on a wild goose chase looking for a dependency they can never fill?</p>

<p>The second problem is the:</p>

<pre><code>if os.path.exists(os.path.join(path, 'gnomekeyring.so')):
</code></pre>

<p>issue. Can I be sure that the file is always called gnomekeyring.so across all the linux distros?</p>

<p>How do other people test these features? The problem with the basic</p>

<pre><code>try:
    import pynotify
except:
    pynotify = disabled
</code></pre>

<p>is that the code is global, these might be littered around and even if the user doesn't want pynotify....it's loaded anyway.</p>

<p>So what do people think is the best way to solve this problem?</p>
"
563182,31319,2009-02-18T22:42:25Z,6,"Getting return values from a MySQL stored procedure in Python, using MySQLdb","<p>I've got a stored procedure in a MySQL database that simply updates a date column and returns the previous date.  If I call this stored procedure from the MySQL client, it works fine, but when I try to call the stored procedure from Python using MySQLdb I can't seem to get it to give me the return value.</p>

<p>Here's the code to the stored procedure:</p>

<pre><code>CREATE PROCEDURE test_stuff.get_lastpoll()
BEGIN
    DECLARE POLLTIME TIMESTAMP DEFAULT NULL;
    START TRANSACTION;

    SELECT poll_date_time
      FROM test_stuff.poll_table
      LIMIT 1 
      INTO POLLTIME
    FOR UPDATE;

    IF POLLTIME IS NULL THEN
        INSERT INTO 
               test_stuff.poll_table 
               (poll_date_time)
        VALUES 
               ( UTC_TIMESTAMP() );

        COMMIT;
        SELECT NULL as POLL_DATE_TIME;
    ELSE
        UPDATE test_stuff.poll_table SET poll_date_time = UTC_TIMESTAMP();
        COMMIT;
        SELECT DATE_FORMAT(POLLTIME, '%Y-%m-%d %H:%i:%s') as POLL_DATE_TIME;
    END IF;
END
</code></pre>

<p>The code I'm using to try to call the stored procedure is similar to this:</p>

<pre><code>#!/usr/bin/python

import sys
import MySQLdb

try:
    mysql = MySQLdb.connect(user=User,passwd=Passwd,db=""test_stuff"")
    mysql_cursor = mysql.cursor()

    results=mysql_cursor.callproc( ""get_lastpoll"", () )
    print results

    mysql_cursor.close()
    mysql.close()

except MySQLdb.Error, e:
    print ""MySQL Error %d:  %s"" % ( e.args[0], e.args[1] )
    sys.exit(1)
</code></pre>

<p>I know that you can do IN and OUT parameters, but from what I can determine from the MySQLdb documentation, this isn't possible with MySQLdb.  Does anyone have any clue how I could get the results of the stored procedure?</p>

<p>If I run it from a SQL tool, here's the output:</p>

<pre><code>POLL_DATE_TIME       
-------------------  
2009-02-18 22:27:07
</code></pre>

<p>If I run the Python script, it returns back an empty set, like this:</p>

<pre><code>()
</code></pre>
"
563384,46411,2009-02-18T23:46:48Z,2,What's the fastest way to test the validity of a large number of well-formed URLs,"<p>My project requires me to validate a large number of web URLs. These URLs have been captured by a very unreliable process which I do not control. All of the URLs have already been regexp validated and are known to be well-formed. I also know that they all have valid TLDs</p>

<p>I want to be able to filter these URLs quickly in order to determine which of these are incorrect. At this point I do not care what content is on the pages - I'd just like to know as quickly as possible which of the pages are inaccessible (e.g. produce a 404 error).</p>

<p>Given that there are a lot of these I do not want to download the entire page, just the HTTP header and then take a good guess from the content of the header whether the page is likely to exist.</p>

<p>Can it be done? </p>
"
563827,68185,2009-02-19T03:21:07Z,27,How to stop Tkinter Frame from shrinking to fit its contents?,"<p>This is the code that's giving me trouble. </p>

<pre><code>f = Frame(root, width=1000, bg=""blue"")
f.pack(fill=X, expand=True)

l = Label(f, text=""hi"", width=10, bg=""red"", fg=""white"")
l.pack()
</code></pre>

<p>If I comment out the lines with the Label, the Frame displays with the right width.  However, adding the Label seems to shrink the Frame down to the Label's size.  Is there a way to prevent that from happening? </p>
"
563840,65167,2009-02-19T03:27:34Z,15,How can I check the memory usage of objects in iPython?,"<p>I am using iPython to run my code. I wonder if there is any module or command which would allow me to check the memory usage of an object. For instance:</p>

<pre><code>In [1]: a = range(10000)
In [2]: %memusage a
Out[2]: 1MB
</code></pre>

<p>Something like <code>%memusage &lt;object&gt;</code> and return the memory used by the object.</p>

<p><strong>Duplicate</strong></p>

<blockquote>
  <p><a href=""http://stackoverflow.com/questions/33978/find-out-how-much-memory-is-being-used-by-an-object-in-python"">Find out how much memory is being used by an object in Python</a></p>
</blockquote>
"
564460,12138,2009-02-19T09:01:04Z,1,Anybody tried mosso CloudFiles with Google AppEngine?,"<p>I'm wondering if anybody tried to integrate mosso CloudFiles with an application running on Google AppEngine (mosso does not provide testing sandbox so I cann't check for myself without registering)? Looking at the code it seems that this will not work due to httplib and urllib limitations in AppEngine environment, but maybe somebody has patched cloudfiles?</p>
"
564662,NA,2009-02-19T10:27:21Z,1,Python - ConfigParser throwing comments,"<p>Based on ConfigParser module how can I filter out and throw every comments from an ini file?</p>

<pre><code>import ConfigParser
config = ConfigParser.ConfigParser()
config.read(""sample.cfg"")

for section in config.sections():
    print section
    for option in config.options(section):
        print option, ""="", config.get(section, option)
</code></pre>

<p>eg. in the ini file below the above basic script prints out the further comments lines as well like:</p>

<pre><code>something  = 128     ; comment line1
                      ; further comments 
                       ; one more line comment
</code></pre>

<p>What I need is having only the section names and pure key-value pairs inside them without any comments. Does ConfigParser handles this somehow or should I use regexp...or? Cheers</p>
"
564695,39796,2009-02-19T10:37:12Z,50,Is there a way to change effective process name in Python?,"<p>Can I change effective process name of a Python script? I want to show a different name instead of the real name of the process when I get the system process list. In C I can set</p>

<pre><code>strcpy(argv[0],""othername"");
</code></pre>

<p>But in Python </p>

<pre><code>argv[0] = ""othername""
</code></pre>

<p>doesn't seem to work. When i get process list (with <code>ps ax</code> in my linux box) the real name doesn't change. I prefer a portable solution (or else one solution for posix and another for windows environments), if it exists.</p>

<p>Thanks in advance</p>
"
565030,11522,2009-02-19T12:14:31Z,5,can my programs access more than 4GB of memory?,"<p>if I run python on a 64bit machine with a 64bit operating system, will my programs be able to access the full range of memory? I.e. Could I build a list with 10billion entries, assuming I had enough RAM? If not, are there other programming languages that would allow this?</p>
"
565034,10583,2009-02-19T12:15:44Z,0,Setting values to the output of a formset in Django,"<p>This question is somewhat linked to a question I asked previously:</p>

<p><a href=""http://stackoverflow.com/questions/477183/generating-and-submitting-a-dynamic-number-of-objects-in-a-form-with-django"">http://stackoverflow.com/questions/477183/generating-and-submitting-a-dynamic-number-of-objects-in-a-form-with-django</a></p>

<p>I'm wondering, if I've got separate default values for each form within a formset, am I able to pre-populate the fields? For instance, a form requiring extra customer information to be pre-populated with the users names? In cases like adding an email field to an already existing table, and updating many of them at once.</p>

<p>Does Django provide an easy way to do this?</p>
"
565060,NA,2009-02-19T12:24:00Z,0,Using jep.invoke() method,"<p>I need to call a function from a python script and pass in parameters into it. I have a test python script which I can call and run from java using Jepp - this then adds the person. </p>

<p>Eg Test.py</p>

<pre><code>import Finding
from Finding import *

f = Finding()
f.addFinding(""John"", ""Doe"", 27)
</code></pre>

<p>Within my Finding class I have <code>addFinding(firstname, lastName, age)</code></p>

<p>However, I wish to be able to do this from within java. Should I be using the <code>jep.invoke()</code> method. Does anyone have a hello world example of such a thing being done or forward me to some good examples? </p>

<p>Does anyone have any suggestions please?  </p>

<p>Thanks in advance</p>
"
565264,45956,2009-02-19T13:19:03Z,0,Parsing HTML generated from Legacy ASP Application to create ASP.NET 2.0 Pages,"<p>One of my friends is working on having a good solution to generate aspx pages, out of html pages generated from a legacy asp application.</p>

<p>The idea is to run the legacy app, capture html output, clean the html using some tool (say HtmlTidy) and parse it/transform it to aspx,  (using Xslt or a custom tool) so that existing html elements, divs, images, styles etc gets converted neatly to an aspx page (too much ;) ).</p>

<p>Any existing tools/scripts/utilities to do the same?</p>
"
565823,68443,2009-02-19T15:25:47Z,2,How can I anonymise XML data for selected tags?,"<p>My question is as follows:</p>

<p>I have to read a big XML file, 50 MB; and anonymise some tags/fields that relate to private issues, like name surname address, email, phone number, etc...</p>

<p>I know exactly which tags in XML are to be anonymised.</p>

<pre><code> s|&lt;a&gt;alpha&lt;/a&gt;|MD5ed(alpha)|e;
 s|&lt;h&gt;beta&lt;/h&gt;|MD5ed(beta)|e;
</code></pre>

<p>where <code>alpha</code> and <code>beta</code> refer to any characters within, which will also be hashed, using probably an algorithm like <a href=""http://en.wikipedia.org/wiki/MD5"" rel=""nofollow"">MD5</a>.</p>

<p>I will only convert the tag value, not the tags themselves.</p>

<p>I hope, I am clear enough about my problem. How do I achieve this?</p>
"
566083,NA,2009-02-19T16:24:39Z,2,python code for django view,"<p>MODEL:</p>

<pre><code>class Pathology(models.Model):
    pathology = models.CharField(max_length=100)

class Publication(models.Model):
    pubtitle = models.TextField()

class Pathpubcombo(models.Model):
    pathology = models.ForeignKey(Pathology)
    publication = models.ForeignKey(Publication)
</code></pre>

<ol>
<li>List of pathology sent to HTML template as drop down menu</li>
</ol>

<p>VIEW:</p>

<pre><code>def search(request):
    pathology_list = Pathology.objects.select_related().order_by('pathology')
</code></pre>

<ol>
<li>User selects one pathology name from drop down menu and id retrieved by</li>
</ol>

<p>VIEW:</p>

<pre><code>def pathology(request):
    pathology_id = request.POST['pathology_id'] 
    p = get_object_or_404(Pathology, pk=pathology_id)
</code></pre>

<p>Where I'm stuck.  I need the python/django syntax to write the following:</p>

<p>The pathology_id must now retrieve the publication_id from the table Pathpubcombo (the intermediary manytomany table). Once the publication_id is retrieved then it must be used to retrieve all the attributes from the publication table and those attributes are sent to another html template for display to the user.</p>
"
566559,65034,2009-02-19T18:29:30Z,5,How can I make this one-liner work in DOS?,"<pre><code>python -c ""for x in range(1,10) print x""
</code></pre>

<p>I enjoy python one liners with -c, but it is limited when indentation is needed.</p>

<p>Any ideas?</p>
"
566574,68557,2009-02-19T18:33:44Z,0,"Building a ""complete"" number range w/out overlaps","<p>I need to build a full ""number range"" set given a series of numbers.  I start with a list such as :</p>

<pre><code>ID   START  
*    0  
a    4  
b    70  
c    700  
d    701  
e    85
</code></pre>

<ul>
<li>where ""def"" is the default range &amp; should ""fill-in"" the gaps  </li>
<li>""overlaps"" are value (70, 700, 701) in starting data</li>
</ul>

<p>And need the following result:  </p>

<pre><code>ID  START  END  
*     0 - 39  
a     4 - 49  
*     5 - 69  
c   700 - 7009  
d   701 - 7019  
b   702 - 709  
*    71 - 849  
e    85 - 859  
*    86 - 9
</code></pre>

<p>What I am trying to figure out is if there is some sort of algorithm out there or design pattern to tackle this.  I have some ideas but I thought I'd run it by the ""experts"" first.  I am using Python. </p>

<p>Any ideas / direction would be greatly appreciated.  Some initial ideas I have: </p>

<ul>
<li>Build a ""range"" list w/ the start &amp; end values padded to the full length.  So default would be 0000 to 9999</li>
<li>Build a ""splits"" list that is built on the fly</li>
<li>Loop through ""range"" list comparing each value to the values in the splits list.</li>
<li>In the event that an overlap is found, remove the value in the splits list and add the new range(s).</li>
</ul>
"
566746,26592,2009-02-19T19:17:19Z,151,How to get console window width in python,"<p>Is there a way in python to programmatically determine the width of the console? I mean the number of characters that fits in one line without wrapping, not the pixel width of the window.</p>

<p><b>Edit</b></p>

<p>Looking for a solution that works on Linux</p>
"
566819,8965,2009-02-19T19:36:57Z,1,PyDev debugger different from command line django runserver command,"<p>I am trying to debug a problem with a django view. When I run it on the command line.
I don't get any of these messages. However when I run the it in the PyDev debugger i get these error messages. I am running with the <strong>--noreload</strong> option.</p>

<p>What do these error messages mean?</p>

<p>Why do I not get them when I run it on the command line?</p>

<pre><code>/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/threading.py:697: RuntimeWarning: tp_compare didn't return -1 or -2 for exception
  return _active[_get_ident()]
Exception exceptions.SystemError: 'error return without exception set' in &lt;generator object at 0x786c10&gt; ignored
Exception exceptions.SystemError: 'error return without exception set' in &lt;generator object at 0x7904e0&gt; ignored
</code></pre>
"
567222,47204,2009-02-19T21:22:24Z,21,Simple Prime Generator in Python,"<p>could someone please tell me what I'm doing wrong with this code. It is just printing 'count' anyway.  I just want a very simple prime generator (nothing fancy). Thanks a lot. lincoln.</p>

<pre><code>import math

def main():
    count = 3
    one = 1
    while one == 1:
    	for x in range(2, int(math.sqrt(count) + 1)):
    		if count % x == 0: 
    			continue
    		if count % x != 0:
    			print count

    	count += 1
</code></pre>
"
567324,36680,2009-02-19T21:47:29Z,2,Is it safe to use Python UUID module generated values in URL's of a webpage?,"<p>Is it safe to use Python UUID module generated values in URL's of a webpage?  Wnat to use those ID's as part of URL's.  Are there any non-safe characters ever generated by Python UUID that shouldn't be in URL's?</p>
"
567542,28421,2009-02-19T22:33:16Z,19,running a command as a super user from a python script,"<p>So I'm trying to get a process to be run as a super user from within a python script using subprocess.  In the ipython shell something like</p>

<pre><code>proc = subprocess.Popen('sudo apach2ctl restart',
                        shell=True, stdin=subprocess.PIPE,
                        stdout=subprocess.PIPE,
                        stderr=subprocess.PIPE)
</code></pre>

<p>works fine, but as soon as I stick it into a script I start getting: <code>sudo: apach2ctl: command not found</code>.</p>

<p>I would guess this is due to the way sudo handles environments on ubuntu. (I've also tried <code>sudo -E apche2ctl restart</code> and <code>sudo env path=$PATH apache2ctl restart</code> with no avail)</p>

<p>So my question is basically, if I want to run <code>apache2ctl restart</code> as super user that prompts the user for the super user password when required, how should I go about doing this?  I have no intention of storing passwords in the script.</p>

<p>Edit:</p>

<p>I've tried passing in the commands as both a string and tokenized into a list.  In the python interpreter, with a string I'll get the password prompt properly (still doesnt work in a python script as in my original problem), a list just gives the help screen for sudo.</p>

<p>Edit 2:</p>

<p>So what I gather is that while Popen will work with some commands just as strings when shell=True, it takes </p>

<pre><code>proc = subprocess.Popen(['sudo','/usr/sbin/apache2ctl','restart'])
</code></pre>

<p>without 'shell=True' to get sudo to work.</p>

<p>Thanks!</p>
"
567622,11522,2009-02-19T22:52:01Z,59,is there a pythonic way to try something up to a maximum number of times?,"<p>I have a python script which is querying a MySQL server on a shared linux host. For some reason, queries to MySQL often return a ""server has gone away"" error:</p>

<pre><code>_mysql_exceptions.OperationalError: (2006, 'MySQL server has gone away')
</code></pre>

<p>If you try the query again immediately afterwards, it usually succeeds. So, I'd like to know if there's a sensible way in python to try to execute a query, and if it fails, to try again, up to a fixed number of tries. Probably I'd want it to try 5 times before giving up altogether.</p>

<p>Here's the kind of code I have:</p>

<pre><code>conn = MySQLdb.connect(host, user, password, database)
cursor = conn.cursor()

try:
    cursor.execute(query)
    rows = cursor.fetchall()
    for row in rows:
        # do something with the data
except MySQLdb.Error, e:
    print ""MySQL Error %d: %s"" % (e.args[0], e.args[1])
</code></pre>

<p>Clearly I could do it by having another attempt in the except clause, but that's incredibly ugly, and I have a feeling there must be a decent way to achieve this.</p>
"
567879,63503,2009-02-20T00:41:02Z,18,How can I process command line arguments in Python?,"<p>What would be an easy expression to process command line arguments if I'm expecting anything like 001 or 999 (let's limit expectations to 001...999 range for this time), and few other arguments passed, and would like to ignore any unexpected?</p>

<p>I understand if for example I need to find out if ""debug"" was passed among parameters it'll be something like that:</p>

<pre><code>if 'debug' in argv[1:]:
  print 'Will be running in debug mode.'
</code></pre>

<p>How to find out if 009 or 575 was passed?</p>

<p>All those are expected calls:</p>

<pre><code>python script.py
python script.py 011
python script.py 256 debug
python script.py 391 xls
python script.py 999 debug pdf
</code></pre>

<p>At this point I don't care about calls like that:</p>

<pre><code>python script.py 001 002 245 568
python script.py some unexpected argument
python script.py 0001
python script.py 02
</code></pre>

<p>...first one - because of more than one ""numeric"" argument; second - because of... well, unexpected arguments; third and fourth - because of non-3-digits arguments.</p>
"
567999,38146,2009-02-20T01:52:26Z,7,Preventing BeautifulSoup from converting my XML tags to lowercase,"<p>I am using BeautifulStoneSoup to parse an XML document and change some attributes. I noticed that it automatically converts all XML tags to lowercase. For example, my source file has <code>&lt;DocData&gt;</code> elements, which BeautifulSoup converts to <code>&lt;docdata&gt;</code>. This appears to be causing problems since the program I am feeding my modified XML document to does not seem to accept the lowercase versions. Is there a way to prevent this behavior in BeautifulSoup?</p>
"
568028,35070,2009-02-20T02:08:38Z,4,"Flexible, Solid and Portable Service Discovery","<p>I am looking for a way for clients in a LAN to find all the instances of my server application without any configuration. Instead of hacking something myself, I'd like to use an existing solution. Personally, I need it to be done in Python, but I'd happy to hear about solutions in any other language.</p>

<p>So why am I not using <a href=""http://avahi.org/"" rel=""nofollow"">avahi</a> or <a href=""http://www.openslp.org/"" rel=""nofollow"">OpenSLP</a> or some other <a href=""http://en.wikipedia.org/wiki/Zeroconf#Service_discovery"" rel=""nofollow"">Zeroconf</a>/<a href=""http://tools.ietf.org/html/rfc2608"" rel=""nofollow"">SLP</a> solution? Well, there are a couple of additional criteria, and I'm under the impression neither of the aforementioned systems matches them.</p>

<p>I'm looking for a solution that is:</p>

<ul>
<li><strong>Flexible</strong>. It must not require superuser rights, i.e. only use ports>1024. </li>
<li><strong>Solid</strong>. It must allow multiple services of the same and different service type on a single machine and continue advertising the services even when the instance that started the advertisement server stops or crashes.</li>
<li><strong>Portable</strong>. It must run nearly everywhere, or at least on *BSD, Debian/gentoo/RedHat/SuSe Linux, Mac OS X, Solaris and Windows NT.</li>
<li><strong>Light</strong>. Ideally, one Python script would be the whole solution. I'm not in the least interested in address autoconfiguration or something like that, although I'd begrudgingly accept a solution that has lots of features I don't need. Furthermore, any one-time setup is a strict no-no.</li>
</ul>

<p>I expect something like this:</p>

<pre><code>def registerService(service): # (type, port)
    if listen(multicast, someport):
    	if fork() == child:
    		services = [service]
    		for q in queriesToMe():
    			if q == DISCOVERY:
    				answer(filter(q.criteria, services))
    			elif q == ADVERTISE and q.sender == ""localhost"":
    				services.append(q.service)
    else:
    	advertiseAt(""localhost"", service)
</code></pre>
"
568247,NA,2009-02-20T04:07:39Z,3,pycurl fails but curl (from bash) works in ubuntu,"<p>I'm using curl and pycurl to connect to a secure 3rd party api and when I use pycurl I'm getting authentication errors back from the server, but when I use curl on the command line and do the same thing it works. I set both to verbose mode and am seeing some differences in the request, but I can't seem to figure out what the error is.</p>

<p>They seem to be using different encryption methods, perhaps that is the problem? If anyone has ideas on different options to try with pycurl or suggestions for recompiling pycurl to work like curl, that would be awesome. Thanks.</p>

<p>Here are my pycurl settings, fyi:</p>

<pre><code>    buffer = cStringIO.StringIO()

    curl = pycurl.Curl()
    curl.setopt(pycurl.VERBOSE,1) 
    curl.setopt(pycurl.POST, 1)
    curl.setopt(pycurl.POSTFIELDS, post_data)
    curl.setopt(pycurl.TIMEOUT_MS, self.HTTP_TIMEOUT)
    curl.setopt(pycurl.URL, url)
    curl.setopt(pycurl.FOLLOWLOCATION, self.HTTP_FOLLOW_REDIRECTS)
    curl.setopt(pycurl.MAXREDIRS, self.HTTP_MAX_REDIRECTS)
    curl.setopt(pycurl.WRITEFUNCTION, buffer.write)
    curl.setopt(pycurl.NOSIGNAL, 1)
    curl.setopt(pycurl.SSLCERT, self.path_to_ssl_cert)

    curl.setopt(pycurl.SSL_VERIFYPEER, 0)

    # 1/0

    try:
        curl.perform()
</code></pre>

<p>...</p>

<p>Oh, last thing: the same python script I'm using works on my Mac laptop but doesn't work on the ubuntu server I'm trying to setup.</p>

<pre><code>python test.py 
18:09:13,299 root INFO fetching: https://secure.....
* About to connect() to secure.... 1129 (#0)
*   Trying 216....... * connected
* Connected to secure.... port 1129 (#0)
* found 102 certificates in /etc/ssl/certs/ca-certificates.crt
*        server certificate verification OK
*        common name: secure.... (matched)
*        server certificate expiration date OK
*        server certificate activation date OK
*        certificate public key: RSA
*        certificate version: #3
*        subject: .......
*        start date: Sat, 14 Feb 2009 22:45:27 GMT
*        expire date: Mon, 15 Feb 2010 22:45:27 GMT
*        issuer: ...
*        compression: NULL
*        cipher: AES 128 CBC
*        MAC: SHA
User-Agent: PycURL/7.16.4
Host: secure....
Accept: */*
Content-Length: 387
Content-Type: application/x-www-form-urlencoded

&lt; HTTP/1.1 200 OK
&lt; Content-Length: 291
&lt; 
* Connection #0 to host secure.... left intact
* Closing connection #0


 curl -v -d '...' --cert cert.pem  https://secure....
* About to connect() to secure.... port 1129 (#0)
*   Trying 216....... connected
* Connected to secure.... port 1129 (#0)
* successfully set certificate verify locations:
*   CAfile: /etc/ssl/certs/ca-certificates.crt
  CApath: none
* SSLv2, Client hello (1):
* SSLv3, TLS handshake, Server hello (2):
* SSLv3, TLS handshake, CERT (11):
* SSLv3, TLS handshake, Request CERT (13):
* SSLv3, TLS handshake, Server finished (14):
* SSLv3, TLS handshake, CERT (11):
* SSLv3, TLS handshake, Client key exchange (16):
* SSLv3, TLS handshake, CERT verify (15):
* SSLv3, TLS change cipher, Client hello (1):
* SSLv3, TLS handshake, Finished (20):
* SSLv3, TLS change cipher, Client hello (1):
* SSLv3, TLS handshake, Finished (20):
* SSL connection using AES256-SHA
* Server certificate:
*        subject: .......
*        start date: 2009-02-14 22:45:27 GMT
*        expire date: 2010-02-15 22:45:27 GMT
*        common name: secure.... (matched)
*        issuer: ... Certificate Authority
* SSL certificate verify ok.
&gt; User-Agent: curl/7.16.4 (i486-pc-linux-gnu) libcurl/7.16.4 OpenSSL/0.9.8e zlib/1.2.3.3 libidn/1.0
&gt; Host: secure....:1129
&gt; Accept: */*
&gt; Content-Length: 387
&gt; Content-Type: application/x-www-form-urlencoded
&gt; 
&lt; HTTP/1.1 200 OK
&lt; Content-Length: 342
</code></pre>
"
568271,49701,2009-02-20T04:22:43Z,53,How to check if there exists a process with a given pid?,"<p>Is there a way to check to see if a pid corresponds to a valid process? I'm getting a pid from a different source other than from <code>os.getpid()</code> and I need to check to see if a process with that pid doesn't exist on the machine. </p>

<p>I need it to be available in Unix and Windows. I'm also checking to see if the PID is NOT in use.</p>
"
568962,11522,2009-02-20T09:58:11Z,103,How do I create an empty array/matrix in NumPy?,"<p>I can't figure out how to use an array or matrix in the way that I would normally use a list. I want to create an empty array (or matrix) and then add one column (or row) to it at a time.</p>

<p>At the moment the only way I can find to do this is like:</p>

<pre><code>mat = None
for col in columns:
    if mat is None:
        mat = col
    else:
        mat = hstack((mat, col))
</code></pre>

<p>Whereas if it were a list, I'd do something like this:</p>

<pre><code>list = []
for item in data:
    list.append(item)
</code></pre>

<p>Is there a way to use that kind of notation for <a href=""http://en.wikipedia.org/wiki/NumPy"">NumPy</a> arrays or matrices?</p>
"
568972,53943,2009-02-20T10:02:47Z,9,How to programmatically insert comments into a Microsoft Word document?,"<p>Looking for a way to programmatically insert comments (using the comments feature in Word) into a specific location in a MS Word document. I would prefer an approach that is usable across recent versions of MS Word standard formats and implementable in a non-Windows environment (ideally using Python and/or Common Lisp). I have been looking at the OpenXML SDK but can't seem to find a solution there.</p>
"
569468,66422,2009-02-20T12:50:26Z,85,Django: multiple models in one template using forms,"<p>I'm building a support ticket tracking app and have a few models I'd like to create from one page. Tickets belong to a Customer via a ForeignKey. Notes belong to Tickets via a ForeignKey as well. I'd like to have the option of selecting a Customer (that's a whole separate project) OR creating a new Customer, then creating a Ticket and finally creating a Note assigned to the new ticket.</p>

<p>Since I'm fairly new to Django, I tend to work iteratively, trying out new features each time. I've played with ModelForms but I want to hide some of the fields and do some complex validation. It seems like the level of control I'm looking for either requires formsets or doing everything by hand, complete with a tedious, hand-coded template page, which I'm trying to avoid.</p>

<p>Is there some lovely feature I'm missing? Does someone have a good reference or example for using formsets? I spent a whole weekend on the API docs for them and I'm still clueless. Is it a design issue if I break down and hand-code everything?</p>
"
569477,NA,2009-02-20T12:54:57Z,0,Getting Forms on Page in Python,"<p>I'm working on a web vulnerability scanner. I have completed 30% of the program, in that it can scan only HTTP GET methods. But I've hit a snag now: I have no idea how I shall make the program pentest the POST method.</p>

<p>I had the idea to make it extract the form data/names from all the pages on the website, but I have no idea how I should do that. Any ideas?</p>
"
569547,2147,2009-02-20T13:19:32Z,3,What's a good embedded browser for a pygtk application?,"<p>I'm planning on using an embedded browser in my pygtk application and I'm debating between gtkmozembed and pywebkitgtk.  Is there any compelling difference between the two?  Are there any third options that I don't know about?</p>

<p>It should be noted that I won't be using this to access content on the web.  I'm mainly using it for UI purposes.</p>

<p>My priorities are:</p>

<ol>
<li>It needs to be stable.</li>
<li>It needs to be cross-platform.</li>
<li>It should be easy to use.</li>
<li>It should be actively maintained.</li>
<li>It should be extensible.</li>
<li>It should be fast.</li>
</ol>
"
569650,64206,2009-02-20T14:00:06Z,18,How to keep track of thread progress in Python without freezing the PyQt GUI?,"<h2><strong>Questions:</strong></h2>

<ol>
<li>What is the best practice for 
keeping track of a tread's 
progress without locking the GUI 
(""Not Responding"")?</li>
<li>Generally, what are the best practices for
threading as it applies to GUI
development?</li>
</ol>

<h2><strong>Question Background:</strong></h2>

<ul>
<li>I have a PyQt GUI for Windows.</li>
<li>It is used to process sets of HTML
documents.</li>
<li>It takes anywhere from three seconds
to three hours to process a set of
documents.</li>
<li>I want to be able to process
multiple sets at the same time.</li>
<li>I don't want the GUI to lock.</li>
<li>I'm looking at the threading module
to achieve this.</li>
<li>I am relatively new to threading.</li>
<li>The GUI has one progress bar.</li>
<li>I want it to display the progress of
the selected thread.</li>
<li>Display results of the selected
thread if it's finished.</li>
<li>I'm using Python 2.5.</li>
</ul>

<p><strong>My Idea:</strong> Have the threads emit a QtSignal when the progress is updated that triggers some function that updates the progress bar.  Also signal when finished processing so results can be displayed.</p>

<pre><code>#NOTE: this is example code for my idea, you do not have
#      to read this to answer the question(s).

import threading
from PyQt4 import QtCore, QtGui
import re
import copy

class ProcessingThread(threading.Thread, QtCore.QObject):

    __pyqtSignals__ = ( ""progressUpdated(str)"",
                        ""resultsReady(str)"")

    def __init__(self, docs):
        self.docs = docs
        self.progress = 0   #int between 0 and 100
        self.results = []
        threading.Thread.__init__(self)

    def getResults(self):
        return copy.deepcopy(self.results)

    def run(self):
        num_docs = len(self.docs) - 1
        for i, doc in enumerate(self.docs):
            processed_doc = self.processDoc(doc)
            self.results.append(processed_doc)
            new_progress = int((float(i)/num_docs)*100)

            #emit signal only if progress has changed
            if self.progress != new_progress:
                self.emit(QtCore.SIGNAL(""progressUpdated(str)""), self.getName())
            self.progress = new_progress
            if self.progress == 100:
                self.emit(QtCore.SIGNAL(""resultsReady(str)""), self.getName())

    def processDoc(self, doc):
        ''' this is tivial for shortness sake '''
        return re.findall('&lt;a [^&gt;]*&gt;.*?&lt;/a&gt;', doc)


class GuiApp(QtGui.QMainWindow):

    def __init__(self):
        self.processing_threads = {}  #{'thread_name': Thread(processing_thread)}
        self.progress_object = {}     #{'thread_name': int(thread_progress)}
        self.results_object = {}      #{'thread_name': []}
        self.selected_thread = ''     #'thread_name'

    def processDocs(self, docs):
        #create new thread
        p_thread = ProcessingThread(docs)
        thread_name = ""example_thread_name""
        p_thread.setName(thread_name)
        p_thread.start()

        #add thread to dict of threads
        self.processing_threads[thread_name] = p_thread

        #init progress_object for this thread
        self.progress_object[thread_name] = p_thread.progress  

        #connect thread signals to GuiApp functions
        QtCore.QObject.connect(p_thread, QtCore.SIGNAL('progressUpdated(str)'), self.updateProgressObject(thread_name))
        QtCore.QObject.connect(p_thread, QtCore.SIGNAL('resultsReady(str)'), self.updateResultsObject(thread_name))

    def updateProgressObject(self, thread_name):
        #update progress_object for all threads
        self.progress_object[thread_name] = self.processing_threads[thread_name].progress

        #update progress bar for selected thread
        if self.selected_thread == thread_name:
            self.setProgressBar(self.progress_object[self.selected_thread])

    def updateResultsObject(self, thread_name):
        #update results_object for thread with results
        self.results_object[thread_name] = self.processing_threads[thread_name].getResults()

        #update results widget for selected thread
        try:
            self.setResultsWidget(self.results_object[thread_name])
        except KeyError:
            self.setResultsWidget(None)
</code></pre>

<p>Any commentary on this approach (e.g. drawbacks, pitfalls, praises, etc.) will be appreciated.</p>

<h2><strong>Resolution:</strong></h2>

<p>I ended up using the QThread class and associated signals and slots to communicate between threads.  This is primarily because my program already uses Qt/PyQt4 for the GUI objects/widgets.  This solution also required fewer changes to my existing code to implement.</p>

<p>Here is a link to an applicable Qt article that explains how Qt handles threads and signals, <a href=""http://www.linuxjournal.com/article/9602"">http://www.linuxjournal.com/article/9602</a>. Excerpt below:</p>

<blockquote>
  <p>Fortunately, Qt permits
  signals and slots to be connected
  across threads—as long as the threads
  are running their own event loops.
  This is a much cleaner method of
  communication compared to sending and
  receiving events, because it avoids
  all the bookkeeping and intermediate
  QEvent-derived classes that become
  necessary in any nontrivial
  application. Communicating between
  threads now becomes a matter of
  connecting signals from one thread to
  the slots in another, and the mutexing
  and thread-safety issues of exchanging
  data between threads are handled by
  Qt.</p>
  
  <p>Why is it necessary to run an event
  loop within each thread to which you
  want to connect signals? The reason
  has to do with the inter-thread
  communication mechanism used by Qt
  when connecting signals from one
  thread to the slot of another thread.
  When such a connection is made, it is
  referred to as a queued connection.
  When signals are emitted through a
  queued connection, the slot is invoked
  the next time the destination object's
  event loop is executed. If the slot
  had instead been invoked directly by a
  signal from another thread, that slot
  would execute in the same context as
  the calling thread. Normally, this is
  not what you want (and especially not
  what you want if you are using a
  database connection, as the database
  connection can be used only by the
  thread that created it). The queued
  connection properly dispatches the
  signal to the thread object and
  invokes its slot in its own context by
  piggy-backing on the event system.
  This is precisely what we want for
  inter-thread communication in which
  some of the threads are handling
  database connections. The Qt
  signal/slot mechanism is at root an
  implementation of the inter-thread
  event-passing scheme outlined above,
  but with a much cleaner and
  easier-to-use interface.</p>
</blockquote>

<p><strong>NOTE:</strong> <em>eliben</em> also has a good answer, and if I weren't using PyQt4, which handles thread-safety and mutexing, his solution would have been my choice.</p>
"
569696,15890,2009-02-20T14:18:37Z,16,Lazy choices in Django form,"<p>I have a Django my_forms.py like this:</p>

<pre><code>class CarSearchForm(forms.Form):  
    # lots of fields like this
    bodystyle = forms.ChoiceField(choices=bodystyle_choices())
</code></pre>

<p>Each choice is e.g. (""Saloon"", ""Saloon (15 cars)""). So the choices are computed by this function.</p>

<pre><code>def bodystyle_choices():  
    return [(bodystyle.bodystyle_name, '%s (%s cars)' %  
          (bodystyle.bodystyle_name, bodystyle.car_set.count()))  
          for bodystyle in Bodystyle.objects.all()]
</code></pre>

<p>My problem is the choices functions are getting executed every time I merely import my_forms.py. I think this is due to the way Django declares its fields: in the class but not in a class method. Which is fine but my views.py imports my_forms.py so the choices lookups are done on every request no matter which view is used.</p>

<p>I thought that maybe putting choices=bodystyle_choices with no bracket would work, but I get: <pre>'function' object is not iterable</pre></p>

<p>Obviously I can use caching and put the ""import my_forms"" just in the view functions required but that doesn't change the main point: my choices need to be lazy!</p>
"
569754,11992,2009-02-20T14:36:09Z,28,How to tell for which object attribute pickle fails?,"<p>When you pickle an object that has some attributes which cannot be pickled it will fail with a generic error message like:</p>

<pre><code>PicklingError: Can't pickle &lt;type 'instancemethod'&gt;: attribute lookup __builtin__.instancemethod failed
</code></pre>

<p>Is there any way to tell which attribute caused the exception? I am using Python 2.5.2.</p>

<p>Even though I understand in principle the root cause of the problem (e.g. in the above example having an instance method) it can still be very hard to <em>exactly pinpoint it</em>. In my case I already defined a custom <code>__getstate__</code> method, but forgot about a critical attribute. This happened in a complicated structure of nested objects, so it took me a while to identify the bad attribute.</p>

<p>As requested, here is one simple example were pickle intentionally fails:</p>

<pre><code>import cPickle as pickle
import new

class Test(object):
    pass

def test_func(self):
    pass

test = Test()
pickle.dumps(test)
print ""now with instancemethod...""
test.test_meth = new.instancemethod(test_func, test)
pickle.dumps(test)
</code></pre>

<p>This is the output:</p>

<pre><code>now with instancemethod...
Traceback (most recent call last):
  File ""/home/wilbert/develop/workspace/Playground/src/misc/picklefail.py"", line 15, in &lt;module&gt;
    pickle.dumps(test)
  File ""/home/wilbert/lib/python2.5/copy_reg.py"", line 69, in _reduce_ex
    raise TypeError, ""can't pickle %s objects"" % base.__name__
TypeError: can't pickle instancemethod objects
</code></pre>

<p>Unfortunately there is no hint that the attribute <code>test_meth</code> causes the problem.</p>
"
570137,49032,2009-02-20T16:04:25Z,1,Statistics with numpy,"<p>I am working at some plots and statistics for work and I am not sure how I can do some statistics using numpy: I have a list of prices and another one of basePrices. And I want to know how many prices are with X percent above basePrice, how many are with Y percent above basePrice.</p>

<p>Is there a simple way to do that using numpy?</p>
"
570138,NA,2009-02-20T16:05:00Z,1,admin template for manytomany,"<p>I have a manytomany relationship between publication and pathology.  Each publication can have many pathologies.  When a publication appears in the admin template, I need to be able to see the many pathologies associated with that publication.  Here is the model statement:</p>

<pre><code>class Pathology(models.Model):
    pathology = models.CharField(max_length=100)
    def __unicode__(self):
        return self.pathology
    class Meta:
        ordering = [""pathology""]

class Publication(models.Model):
    pubtitle = models.TextField()
    pathology = models.ManyToManyField(Pathology)
    def __unicode__(self):
        return self.pubtitle
    class Meta:
        ordering = [""pubtitle""]
</code></pre>

<p>Here is the admin.py.  I have tried variations of the following, but always
get an error saying either publication or pathology doesn't have a foreign key 
associated.</p>

<pre><code>from myprograms.cpssite.models import Pathology
class PathologyAdmin(admin.ModelAdmin):
    # ...
    list_display = ('pathology', 'id')

admin.site.register(Pathology, PathologyAdmin)

class PathologyInline(admin.TabularInline):
    #...
    model = Pathology
    extra = 3

class PublicationAdmin(admin.ModelAdmin):
    # ...
    ordering = ('pubtitle', 'year')
    inlines = [PathologyInline]
admin.site.register(Publication,PublicationAdmin)
</code></pre>

<p>Thanks for any help.</p>
"
570397,51025,2009-02-20T17:03:48Z,2,"With Twisted, how can 'connectionMade' fire a specific Deferred?","<p>This is part of a larger program; I'll explain only the relevant parts.  Basically, my code wants to create a new connection to a remote host.  This should return a Deferred, which fires once the connection is established, so I can send something on it.</p>

<p>I'm creating the connection with <code>twisted.internet.interfaces.IReactorSSL.connectSSL</code>.  That calls <code>buildProtocol</code> on my <code>ClientFactory</code> instance to get a new connection (<code>twisted.internet.protocol.Protocol</code>) object, and returns a <code>twisted.internet.interfaces.IConnector</code>.  When the connection is started, Twisted calls <code>startedConnecting</code> on the factory, giving it the <code>IConnector</code>.  When the connection is actually made, the protocol's <code>connectionMade</code> callback is called, with no arguments.</p>

<p>Now, if I only needed one connection per host/port, the rest would be easy.  Before calling <code>connectSSL</code>, I would create a Deferred and put it in a dictionary keyed on (host, port).  Then, in the protocol's connectionMade, I could use <code>self.transport.getPeer()</code> to retrieve the host/port, use it to look up the Deferred, and fire its callbacks.  But this obviously breaks down if I want to create more than one connection.</p>

<p>The problem is that I can't see any other way to associate a Deferred I created before calling <code>connectSSL</code> with the <code>connectionMade</code> later on.</p>
"
570433,53007,2009-02-20T17:10:20Z,3,How can I get the newest file from an FTP server?,"<p>I am using Python to connect to an FTP server that contains a new list of data once every hour. I am only connecting once a day, and I only want to download the newest file in the directory. Is there a way to do this?</p>
"
570522,275432,2009-02-20T17:30:00Z,3,How do I add plain text info to forms in a formset in Django?,"<p>I want to show a title and description from a db query in each form, but I don't want it to be in a charfield, I want it to be html-formatted text.</p>

<p>sample template code:</p>

<pre><code>{% for form, data in zipped_data %}
   &lt;div class=""row""&gt;
      &lt;div class=""first_col""&gt;
         &lt;span class=""title""&gt;{{ data.0 }}&lt;/span&gt;
         &lt;div class=""desc""&gt;
            {{ data.1|default:""None"" }}
         &lt;/div&gt;
      &lt;/div&gt;
      {% for field in form %}
         &lt;div class=""fieldWrapper"" style=""float: left; ""&gt;
            {{ field.errors }}
            {{ field }}
         &lt;/div&gt;
      {% endfor %}
{% endfor %}
</code></pre>

<p>Is this the most idiomatic way of doing this?  Or, is there a way to add text that will not be displayed inside of a textarea or text input to my model:</p>

<pre><code>class ReportForm(forms.Form):
   comment = forms.CharField()
</code></pre>

<p>?</p>
"
570636,36683,2009-02-20T18:00:23Z,7,Detect when a Python module unloads,"<p>I have a module that uses ctypes to wrap some functionality from a static library into a class. When the module loads, it calls an initialize function in the static library. When the module is unloaded (presumably when the interpreter exits), there's an unload function in the library that I'd like to be called. How can I create this hook?</p>
"
570781,6266,2009-02-20T18:47:34Z,4,Python c-api and unicode strings,"<p>I need to convert between python objects and c strings of various encodings. Going from a c string to a unicode object was fairly simple using PyUnicode_Decode, however Im not sure how to go the other way</p>

<pre><code>//char* can be a wchar_t or any other element size, just make sure it is correctly terminated for its encoding
Unicode(const char *str, size_t bytes, const char *encoding=""utf-16"", const char *errors=""strict"")
    :Object(PyUnicode_Decode(str, bytes, encoding, errors))
{
    //check for any python exceptions
    ExceptionCheck();
}
</code></pre>

<p>I want to create another function that takes the python Unicode string and puts it in a buffer using a given encodeing, eg:</p>

<pre><code>//fills buffer with a null terminated string in encoding
void AsCString(char *buffer, size_t bufferBytes,
    const char *encoding=""utf-16"", const char *errors=""strict"")
{
    ...
}
</code></pre>

<p>I suspect it has somthing to do with PyUnicode_AsEncodedString however that returns a PyObject so I'm not sure how to put that into my buffer...</p>

<p>Note: both methods above are members of a c++ Unicode class that wraps the python api
I'm using Python 3.0</p>
"
570952,53390,2009-02-20T19:41:08Z,2,"Django ""SuspiciousOperation"" Error While Deleting Uploaded File","<p>I'm developing in Django on Windows XP using the <code>manage.py runserver</code> command to serve files. Apache isn't involved. When I login to the administration and try to delete a file I get a ""SuspiciousOperation"" error.</p>

<p>Here's the traceback:<br />
<a href=""http://dpaste.com/123112/"" rel=""nofollow"">http://dpaste.com/123112/</a> </p>

<p>Here's my full model:<br />
<a href=""http://dpaste.com/hold/123110/"" rel=""nofollow"">http://dpaste.com/hold/123110/</a></p>

<p>How can I get rid of this ""SuspiciousOperation"" error?</p>

<p><strong>EDIT:</strong> Here are my media settings:</p>

<pre><code>MEDIA_ROOT = 'C:/Server/Projects/postnzb/static/'
MEDIA_URL = '/static/'
</code></pre>
"
571083,NA,2009-02-20T20:20:18Z,3,"In Python, how might one log in, answer a web form via HTTP POST (not url-encoded), and fetch a returned XML file?","<p>I am basically trying to export a configuration file, once a week.  While the product in question allows you to log in manually via a web client, enter some information, and get an XML file back when you submit, there's no facility for automating this.  I can get away with using Python 2.5 (have used for a while) or 2.6 (unfamiliar) to do this.</p>

<ol>
<li><p>I think I need to have some way to authenticate against the product.  Although I can view the cookie in Firefox, when I looked through the actual <code>cookie.txt</code> file, it was not present.  Didn't show up after clearing my private data and re-authenticating.  Odd.  Should I be shooting for the <code>Cookie</code> module, or could this be some arcane method of authentication that only <em>looks</em> like cookies?  How would I know?</p></li>
<li><p>I think I need the <code>httplib</code> module to do the HTTP POST, but I don't know how to do the <code>multipart/form-data</code> encoding.  Have I overlooked a handy option, or is this something where I must roll my own?</p></li>
<li><p>I assume I can get the XML file back in the <code>HTTPesponse</code> from <code>httplib</code>.</p></li>
</ol>

<p>I've fetched web things via Python before, but not with POST, multipart encoding, and authentication in the mix.</p>
"
571186,42153,2009-02-20T20:50:04Z,3,Split tags in python,"<p>I have a file that contains this:</p>



<pre class=""lang-none prettyprint-override""><code>&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt; Hello! - {{ today }}&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    {{ runner_up }} 
         avasd
         {{ blabla }}
        sdvas
        {{ oooo }}
   &lt;/body&gt;
&lt;/html&gt;
</code></pre>

<p>What is the best or most Pythonic way to extract the <code>{{today}}</code>, <code>{{runner_up}}</code>, etc.?</p>

<p>I know it can be done with splits/regular expressions, but I wondered if there were another way.</p>

<p>PS: consider the data loaded in a variable called <code>thedata</code>.</p>

<p>Edit: I think that the HTML example was bad, because it directed some commenters to BeautifulSoup. So, here is a new input data:</p>

<pre class=""lang-none prettyprint-override""><code>Fix grammatical or {{spelling}} errors.

Clarify meaning without changing it.

Correct minor {{mistakes}}.

Add related resources or links.

Always respect the original {{author}}.
</code></pre>

<p>Output:</p>

<pre class=""lang-none prettyprint-override""><code>spelling
mistakes
author
</code></pre>
"
571488,47204,2009-02-20T22:27:36Z,10,triangle numbers in python,"<p>I'm trying to solve the problem:</p>

<blockquote>
  <p>What is the value of the first triangle number to have over five hundred divisors?</p>
</blockquote>

<p><em>A triangle number is a number in the sequence of the sum of numbers i.e. 1+2+3+4+5...</em></p>

<p>I'm pretty sure that this is working code but I don't know because my computer is taking too long to calculate it. Does anybody have any idea of how to make the program a little faster.<br>
 Thanks.</p>

<pre><code>import math

def main():
    l = []
    one = 0
    a = 1
    b = 2
    while one == 0:
        a = a + b 
        b += 1
        for x in range(1, int(a/2 + 1)):
            if a % x == 0:
                l.append(x)
                if len(l) &gt; 499:
                    print a 

if __name__ == '__main__':
    main()
</code></pre>
"
571514,51816,2009-02-20T22:34:34Z,9,Are there any declaration keywords in Python?,"<p>Are there any declaration keywords in python, like local, global, private, public etc. I know it's type free but how do you know if this statement:</p>

<pre><code>x = 5;
</code></pre>

<ul>
<li>Creates a new variable.</li>
</ul>

<p>or</p>

<ul>
<li>Sets an existing one.</li>
</ul>
"
571522,51816,2009-02-20T22:37:44Z,1,What's the reason of providing some of the default methods in the global scope in Python?,"<p>What's the reason of providing some of the default methods in the global scope, like the len function, instead of providing them on an instance level, like:</p>

<pre><code>list.len()
</code></pre>

<p>instead of:</p>

<pre><code>len (list)
</code></pre>

<p>I find methods like len to be harder to discover than instance methods.</p>

<p>Is there any reason behind this?</p>
"
571538,47204,2009-02-20T22:43:06Z,0,The `%` operator,"<p>I want to find all the numbers divisble by all the numbers between 1 and 5. how do I write the program so that if the remainder of 'start' divided by all the numbers that x goes through is equal to 0 that it will print start. Is there any syntax that will calculate what I'm looking for. thanks.</p>

<p>import math</p>

<pre><code>def main():
    one = 1
    start = 1
    while one == 1:
    	for x in range(1, 5):
    		if start % x == 0:
    			print start

    		start += 1
</code></pre>
"
571850,69177,2009-02-21T01:11:36Z,15,Adding elements to python generators,"<p>Is it possible to append elements to a python generator?</p>

<p>I'm currently trying to get all images from a set of disorganized folders and write them to a new directory. To get the files, I'm using os.walk() which returns a list of image files in a single directory. While I can make a generator out of this single list, I don't know how to combine all these lists into one single generator. Any help would be much appreciated.</p>

<p>Related:</p>

<ul>
<li><a href=""http://stackoverflow.com/questions/406121/flattening-a-shallow-list-in-python"">Flattening a shallow list in python</a></li>
</ul>
"
572009,10583,2009-02-21T02:48:27Z,4,Django and Sqlite Concurrency issue,"<p>I've done a bit of reading related to the concurrency issues with sqlite, but I don't see how they'd apply to Django since it's inherently single threaded. I'm not using any multiprocess modules either. I have absolutely no experience with concurrent programming either, so if someone can identify WHY the following code is causing an OperationalError: 'database is locked' I'd be grateful.</p>

<p>views.py  </p>

<pre><code>def screening(request, ovramt=None):
errors = []
if request.method == ""POST"":
    form = ScreeningForm(request.POST)
    if form.is_valid():
       print ""Woo valid!!""
    return HttpResponse()

else: # GET            
    if ovramt is None:
        o = Ovramt.objects.select_related(depth=1).latest(""date_completed"")
        print ""found?""
        print o.id
    else:
        try:
            o = Ovramt.objects.select_related(depth=1).get(id=ovramt)
        except:
            errors.append(""OVRAMT NOT FOUND"") 


    if o.residents.count() &lt;= 0:
        o.add_active_residents()
    residents = list(o.residents)
</code></pre>

<p>models.py</p>

<pre><code>def add_active_residents(self):
    ssa_res = SSA_Resident.objects.select_related(depth=1).filter(ssa=self.ssa, active=True)
    for r in ssa_res:
        self.residents.add(r.resident) # Fails Here
    self.save()
</code></pre>

<p>The add_active_residents method works fine, until it is called from the views module. Is there an open connection to the database open in the view which prevents writing from the model? Does someone have an explanation why this code will error?</p>
"
572263,9047,2009-02-21T04:18:17Z,28,How do I create a Django form that displays a checkbox label to the right of the checkbox?,"<p>When I define a Django form class similar to this:</p>

<pre><code>def class MyForm(forms.Form):
    check = forms.BooleanField(required=True, label=""Check this"")
</code></pre>

<p>It expands to HTML that looks like this:</p>

<pre><code>&lt;form action=""."" id=""form"" method=POST&gt;
&lt;p&gt;&lt;label for=""check""&gt;Check this:&lt;/label&gt; &lt;input type=""checkbox"" name=""check"" id=""check"" /&gt;&lt;/p&gt;
&lt;p&gt;&lt;input type=submit value=""Submit""&gt;&lt;/p&gt;
&lt;/form&gt;
</code></pre>

<p>I would like the checkbox input element to have a label that follows the checkbox, not the other way around. Is there a way to convince Django to do that?</p>

<p><strong>[Edit]</strong></p>

<p>Thanks for the answer from Jonas - still, while it fixes the issue I asked about (checkbox labels are rendered to the right of the checkbox) it introduces a new problem (all widget labels are rendered to the right of their widgets...)</p>

<p>I'd like to avoid overriding _html_output() since it's obviously not designed for it. The design I would come up with would be to implement a field html output method in the Field classes, override the one for the Boolean field and use that method in _html_output(). Sadly, the Django developers chose to go a different way, and I would like to work within the existing framework as much as possible. </p>

<p>CSS sounds like a decent approach, except that I don't know enough CSS to pull this off or even to decide whether I like this approach or not. Besides, I prefer markup that still resembles the final output, at least in rendering order.</p>

<p>Furthermore, since it can be reasonable to have more than one style sheet for any particular markup, doing this in CSS could mean having to do it multiple times for multiple styles, which pretty much makes CSS the wrong answer. </p>

<p><strong>[Edit]</strong></p>

<p>Seems like I'm answering my own question below. If anyone has a better idea how to do this, don't be shy.</p>
"
572599,2220518,2009-02-21T07:46:45Z,4,Solr search with escaping solr reserved keywords,"<p>How do i query fields that contain solr reserved keywords as "":"" in solr?</p>

<p>For instance,</p>

<pre><code>q = 'uri:http://www.example.com'
</code></pre>

<p>throws up an error for ""http://www.example.com"" containing reserved word "":""</p>
"
572780,38592,2009-02-21T10:41:40Z,3,CPython internal structures,"<p>GAE has various limitations, one of which is size of biggest allocatable block of memory amounting to 1Mb (now 10 times more, but that doesn't change the question). The limitation means that one cannot put more then some number of items in list() as CPython would try to allocate contiguous memory block for element pointers. Having huge list()s can be considered bad programming practice, but even if no huge structure is created in program itself, CPython maintains some behind the scenes.</p>

<p>It appears that CPython is maintaining single global list of objects or something. I.e. application that has many small objects tend to allocate bigger and bigger single blocks of memory.</p>

<p>First idea was gc, and disabling it changes application behavior a bit but still some structures are maintained.</p>

<p>A simplest short application that experience the issue is:</p>

<pre><code>a = b = []
number_of_lists = 8000000
for i in xrange(number_of_lists):
    b.append([])
    b = b[0]
</code></pre>

<p>Can anyone enlighten me how to prevent CPython from allocating huge internal structures when having many objects in application?</p>
"
572808,3497,2009-02-21T11:06:21Z,2,Drawing a chart with proportional X axis in Python,"<p><br />
Is there an easy way to draw a date/value chart in Python, if the ""dates"" axis had non-equidistant values?<br />
For example, given these:  </p>

<p>2009-02-01: 10<br />
2009-02-02: 13<br />
2009-02-07: 25<br />
2009-03-01: 80</p>

<p>I'd like the chart to show that between the 2nd and 3nd value there's a longer gap than between the 1st and the 2nd.<br />
I tried a few chart libraries but they all seem to assume that the X axis has non-scalar values..<br />
(Side note: the chart should be exportable to PNG/GIF/whatever)<br />
Thanks for your time!</p>
"
573275,6266,2009-02-21T16:01:45Z,5,Python C-API Object Allocation‏,"<p>I want to use the new and delete operators for creating and destroying my objects.</p>

<p>The problem is python seems to break it into several stages. tp_new, tp_init and tp_alloc for creation and tp_del, tp_free and tp_dealloc for destruction. However c++ just has new which allocates and fully constructs the object and delete which destructs and deallocates the object.</p>

<p>Which of the python tp_* methods do I need to provide and what must they do?</p>

<p>Also I want to be able to create the object directly in c++ eg ""PyObject *obj = new MyExtensionObject(args);"" Will I also need to overload the new operator in some way to support this?</p>

<p>I also would like to be able to subclass my extension types in python, is there anything special I need to do to support this?</p>

<p>I'm using python 3.0.1.</p>

<p>EDIT:
ok, tp_init seems to make objects a bit too mutable for what I'm doing (eg take a Texture object, changing the contents after creation is fine, but change fundamental aspects of it such as, size, bitdept, etc will break lots of existing c++ stuff that assumes those sort of things are fixed). If I dont implement it will it simply stop people calling __init__ AFTER its constructed (or at least ignore the call, like tuple does). Or should I have some flag that throws an exception or somthing if tp_init is called more than once on the same object?</p>

<p>Apart from that I think ive got most of the rest sorted.</p>

<pre><code>extern ""C""
{
    //creation + destruction
    PyObject* global_alloc(PyTypeObject *type, Py_ssize_t items)
    {
        return (PyObject*)new char[type-&gt;tp_basicsize + items*type-&gt;tp_itemsize];
    }
    void global_free(void *mem)
    {
        delete[] (char*)mem;
    }
}
template&lt;class T&gt; class ExtensionType
{
    PyTypeObject *t;
    ExtensionType()
    {
        t = new PyTypeObject();//not sure on this one, what is the ""correct"" way to create an empty type object
        memset((void*)t, 0, sizeof(PyTypeObject));
        static PyVarObject init = {PyObject_HEAD_INIT, 0};
        *((PyObject*)t) = init;

        t-&gt;tp_basicsize = sizeof(T);
        t-&gt;tp_itemsize  = 0;

        t-&gt;tp_name = ""unknown"";

        t-&gt;tp_alloc   = (allocfunc) global_alloc;
        t-&gt;tp_free    = (freefunc)  global_free;
        t-&gt;tp_new     = (newfunc)   T::obj_new;
        t-&gt;tp_dealloc = (destructor)T::obj_dealloc;
        ...
    }
    ...bunch of methods for changing stuff...
    PyObject *Finalise()
    {
    ...
    }
};
template &lt;class T&gt; PyObjectExtension : public PyObject
{
...
    extern ""C"" static PyObject* obj_new(PyTypeObject *subtype, PyObject *args, PyObject *kwds)
    {
        void *mem = (void*)subtype-&gt;tp_alloc(subtype, 0);
        return (PyObject*)new(mem) T(args, kwds)
    }
    extern ""C"" static void obj_dealloc(PyObject *obj)
    {
        ~T();
        obj-&gt;ob_type-&gt;tp_free(obj);//most of the time this is global_free(obj)
    }
...
};
class MyObject : PyObjectExtension&lt;MyObject&gt;
{
public:
    static PyObject* InitType()
    {
        ExtensionType&lt;MyObject&gt; extType();
        ...sets other stuff...
        return extType.Finalise();
    }
    ...
};
</code></pre>
"
573487,NA,2009-02-21T18:12:07Z,2,Any way to create a NumPy matrix with C API?,"<p>I read the documentation on NumPy C API I could find, but still wasn't able to find out whether there is a possibility to construct a matrix object with C API — not a two-dimensional array. The function is intended for work with math matrices, and I don't want strange results if the user calls matrix multiplication forgetting to convert this value from an array to a matrix (multiplication and exponentiation being the only difference that matrix subclass has).</p>
"
573569,23903,2009-02-21T19:03:12Z,18,Python serialize lexical closures?,"<p>Is there a way to serialize a lexical closure in Python using the standard library?  pickle and marshal appear not to work with lexical closures.  I don't really care about the details of binary vs. string serialization, etc., it just has to work.  For example:</p>

<pre><code>def foo(bar, baz) :
    def closure(waldo) :
        return baz * waldo
    return closure
</code></pre>

<p>I'd like to just be able to dump instances of closure to a file and read them back.</p>

<p>Edit:
One relatively obvious way that this could be solved is with some reflection hacks to convert lexical closures into class objects and vice-versa.  One could then convert to classes, serialize, unserialize, convert back to closures.  Heck, given that Python is duck typed, if you overloaded the function call operator of the class to make it look like a function, you wouldn't even really need to convert it back to a closure and the code using it wouldn't know the difference.  If any Python reflection API gurus are out there, please speak up.</p>
"
573618,12983,2009-02-21T19:39:59Z,299,Django - Set Up A Scheduled Job?,"<p>I've been working on a web app using Django, and I'm curious if there is a way to schedule a job to run periodically. </p>

<p>Basically I just want to run through the database and make some calculations/updates on an automatic, regular basis, but I can't seem to find any documentation on doing this.</p>

<p>Does anyone know how to set this up?</p>

<p>To clarify:  I know I can set up a <code>cron</code> job to do this, but I'm curious if there is some feature in Django that provides this functionality.   I'd like people to be able to deploy this app themselves without having to do much config (preferably zero).</p>

<p>I've considered triggering these actions ""retroactively"" by simply checking if a job should have been run since the last time a request was sent to the site, but I'm hoping for something a bit cleaner.</p>
"
573914,NA,2009-02-21T23:32:24Z,0,Using wget in python (Error Code Help me),"<p>Heres my code. </p>

<pre><code>import os, sys
if len(sys.argv) != 2:
     sys.exit(1)

h = os.popen(""wget -r %s"") % sys.argv[1]
fil = open(""links.txt"",""w"")
dir = os.listdir(""%s"") % sys.argv[1]

for file in dir:
     print file.replace(""@"",""?"")
     fil.write(""%s/""+file.replace(""@"",""?"")) % sys.argv[1]
     fil.write(""\n"")
h.close()
</code></pre>

<p>running the it, like this python project.py <a href=""http://google.com"" rel=""nofollow"">http://google.com</a></p>

<p>gives me error code. </p>

<pre><code>1.py:5 RuntimeWarning: tp_compare didnt return -1 or -2 for exception
h = os.popen(""wget -r %s"") % sys.argv[1]
Traceback (most recent call last):
File ""1.py"" line 5, in &lt;module&gt;
h = os.popen(""wget -r %s"") % sys.argv[1]
TypeError: unsupported operand type&lt;s&gt; for %: 'file' and 'str'
</code></pre>

<p>What are im going wrong. (Still learning python) Any solution/ tip?</p>

<p>I dont explain the code, i think you understand what im trying to do</p>
"
574004,1553,2009-02-22T00:16:52Z,8,Docs for the internals of CPython Implementation,"<p>I am currently in the process of making an embedded system port of the CPython 3.0 Python interpreter and I'm particularly interested in any references or documentation that provides details about the design and structure of code for Release 3.0 or even about any of the 2.x releases.</p>

<p>One useful document I have found so far is this <a href=""http://www.python.org/dev/peps/pep-0339/"">informational PEP</a> on the implementation - which is a good overview - but is still pretty high level. Hoping to come across something that gives [much] more detail on more of the modules or perhaps even covers something about porting considerations.</p>
"
574068,28380,2009-02-22T00:58:37Z,42,How do YOU deploy your WSGI application? (and why it is the best way),"<p>Deploying a WSGI application. There are many ways to skin this cat. I am currently using apache2 with mod-wsgi, but I can see some potential problems with this.</p>

<p>So how can it be done?</p>

<ol>
<li>Apache Mod-wsgi (the other mod-wsgi's seem to not be worth it)</li>
<li>Pure Python web server eg paste, cherrypy, Spawning, Twisted.web</li>
<li>as 2 but with reverse proxy from nginx, apache2 etc, with good static file handling</li>
<li>Conversion to other protocol such as FCGI with a bridge (eg Flup) and running in a conventional web server.</li>
</ol>

<p>More?</p>

<p>I want to know how you do it, and why it is the best way to do it. I would absolutely <strong>love</strong> you to bore me with details about the whats and the whys, application specific stuff, etc. I will upvote any non-insane answer.</p>
"
574140,9908,2009-02-22T01:42:10Z,1,One view ( frontpage ) for many controllers (sub views),"<p><em>Notes:</em> Cannot use Javascript or iframes. In fact I can't trust the client browser to do just about anything but the ultra basics.</p>

<p>I'm rebuilding a legacy PHP4 app as a MVC application, with most of my research currently focused with the Pylon's framework.</p>

<p>One of the first weird issues I've run into and one I've solved in the past by using iframes or better yet javascript is displaying a dynamic collection of ""widgets"" that are like digest views of a typical controller's index view.</p>

<p>Best way to visualize my problem would be to look at Google's personalized homepage.  They solve the problem with Javascript, but for my scenario javascript and pretty much anything above basic XHTML is not possible.</p>

<p>One idea I started working on was to have my Frontpage controller poll a database or other service for the currently activated widgets, then taking a list of tuples/dicts, dynamically instantiate each controller and build a list/dict of render sub-views and pass that to the frontpage view and let it figure things out.</p>

<p>So with peusudo code:</p>

<pre><code>Get request goes to WSGI
WSGI calls pylons
Pylons routes to Frontpage.index()
Frontpage.index() 
   myViews = list()
   for WidgetController in ActiveWidegets():
        myViews.append(subRender(WidgetController, widgetView))

c.subviews = myViews
render(frontpage.mako)
</code></pre>

<p>Weird bits about subRender</p>

<ul>
<li>Dynamically imports controllers via <code>__import__</code> (currently hardcoded to project's namespace :(  )</li>
<li>Has a potential to be very expensive (most widget calls can be cached, but one is a user panel)</li>
</ul>

<p>I feel like there has to be a better way or perhaps a mechanism already implemented in WSGI or better yet Pylons to do this, but so far the closest I've found is this utility method:  <a href=""http://www.pylonshq.com/docs/en/0.9.7/modules/controllers_util/#pylons.controllers.util.forward"" rel=""nofollow"">http://www.pylonshq.com/docs/en/0.9.7/modules/controllers_util/#pylons.controllers.util.forward</a> but it seems a little crazy to build <code>N</code> instances of pylons on top of pylons just to get a collection views.</p>
"
574236,66502,2009-02-22T03:12:46Z,5,How to determine number of files on a drive with Python?,"<p>I have been trying to figure out how to retrieve (quickly) the number of files on a given HFS+ drive with python.</p>

<p>I have been playing with os.statvfs and such, but can't quite get anything (that seems helpful to me).</p>

<p>Any ideas?</p>

<p><strong>Edit:</strong> Let me be a bit more specific. =]</p>

<p>I am writing a timemachine-like wrapper around rsync for various reasons, and would like a very fast estimate (does not have to be perfect) of the number of files on the drive rsync is going to scan. This way I can watch the progress from rsync (if you call it like <code>rsync -ax --progress</code>, or with the <code>-P</code> option) as it builds its initial file list, and report a percentage and/or ETA back to the user.</p>

<p>This is completely separate from the actual backup, which is no problem tracking progress. But with the drives I am working on with several million files, it means the user is watching a counter of the number of files go up with no upper bound for a few minutes.</p>

<p>I have tried playing with os.statvfs with exactly the method described in one of the answers so far, but the results do not make sense to me.</p>

<pre><code>&gt;&gt;&gt; import os
&gt;&gt;&gt; os.statvfs('/').f_files - os.statvfs('/').f_ffree
64171205L
</code></pre>

<p>The more portable way gives me around 1.1 million on this machine, which is the same as every other indicator I have seen on this machine, including rsync running its preparations:</p>

<pre><code>&gt;&gt;&gt; sum(len(filenames) for path, dirnames, filenames in os.walk(""/""))
1084224
</code></pre>

<p>Note that the first method is instantaneous, while the second one made me come back 15 minutes later to update because it took just that long to run.</p>

<p>Does anyone know of a similar way to get this number, or what is wrong with how I am treating/interpreting the os.statvfs numbers?</p>
"
574604,25188,2009-02-22T08:57:53Z,16,Has anyone used SciPy with IronPython?,"<p>I've been able to use the standard Python modules from IronPython, but I haven't gotten SciPy to work yet.  Has anyone been able to use SciPy from IronPython?  What did you have to do to make it work?</p>

<p>Update: See <a href=""http://www.johndcook.com/blog/2009/03/19/ironclad-ironpytho/"">Numerical computing in IronPython with Ironclad</a></p>

<p>Update: Microsoft is <a href=""http://www.johndcook.com/blog/2010/07/01/scipy-and-numpy-for-net/"">partnering with Enthought</a> to make SciPy for .NET.</p>
"
574861,39796,2009-02-22T12:41:45Z,2,Include html part in a mail with python libgmail,"<p>I've a question about its usage: i need to send an html formatted mail. I prepare my message with </p>

<pre><code>ga = libgmail.GmailAccount(USERNAME,PASSWORD)
msg = MIMEMultipart('alternative') 
msg.attach(part1)
msg.attach(part2)
...
ga.sendMessage(msg.as_string())
</code></pre>

<p>This way doesn't works, it seems can't send <code>msg</code> with sendMessage method.
What is the right way? : D</p>
"
574952,54964,2009-02-22T13:51:36Z,1,How can you extract all 6 letter Latin words to a list?,"<p>I need to have all 6 letter <a href=""http://www.math.ubc.ca/~cass/frivs/latin/latin-dict-full.html"" rel=""nofollow"">Latin words</a> in a list. </p>

<p>I would also like to have words which follow the pattern Xyzzyx in a list.</p>

<p>I have used little Python.</p>
"
575081,44996,2009-02-22T15:32:53Z,5,Why doesn't Python release file handles after calling file.close()?,"<p>I am on windows with Python 2.5. I have an open file for writing. I write some data. Call file close. When I try to delete the file from the folder using Windows Explorer, it errors, saying that a process still holds a handle to the file.</p>

<p>If I shutdown python, and try again, it succeeds.</p>
"
575117,47204,2009-02-22T16:00:34Z,17,"Generating unique, ordered Pythagorean triplets","<p>This is a program I wrote to calculate Pythagorean triplets. When I run the program it prints each set of triplets twice because of the if statement. Is there any way I can tell the program to only print a new set of triplets once? Thanks.</p>

<pre><code>import math

def main():
    for x in range (1, 1000):
        for y in range (1, 1000):
            for z in range(1, 1000):
                if x*x == y*y + z*z:
                    print y, z, x
                    print '-'*50

if __name__ == '__main__':
    main()  
</code></pre>
"
575172,35364,2009-02-22T16:31:16Z,1,portable non-relational database,"<p>I want to experiment/play around with non-relational databases, it'd be best if the solution was:</p>

<ul>
<li>portable, meaning it doesn't require an installation. ideally just copy-pasting the directory to someplace would make it work. I don't mind if it requires editing some configuration files or running a configuration tool for first time usage.</li>
<li>accessible from python</li>
<li>works on both windows and linux</li>
</ul>

<p>What can you recommend for me?</p>

<p>Essentially, I would like to be able to install this system on a shared linux server where I have little user privileges.</p>
"
575196,55857,2009-02-22T16:42:51Z,77,"In Python, why can a function modify some arguments as perceived by the caller, but not others?","<p>I'm new to Python and am trying to understand its approach to variable scope. In this example, why is <code>f()</code> able to alter the value of <code>x</code>, as perceived within <code>main()</code>, but not the value of <code>n</code>?</p>

<pre><code>def f(n, x):
    n = 2
    x.append(4)
    print 'In f():', n, x

def main():
    n = 1
    x = [0,1,2,3]
    print 'Before:', n, x
    f(n, x)
    print 'After: ', n, x

main()
</code></pre>

<p>Output:</p>

<pre><code>Before: 1 [0, 1, 2, 3]
In f(): 2 [0, 1, 2, 3, 4]
After:  1 [0, 1, 2, 3, 4]
</code></pre>
"
575278,2147,2009-02-22T17:26:49Z,14,How does python close files that have been gc'ed?,"<p>I had always assumed that a file would leak if it was opened without being closed, but I just verified that if I enter the following lines of code, the file will close:</p>

<pre><code>&gt;&gt;&gt; f = open('somefile.txt')
&gt;&gt;&gt; del f
</code></pre>

<p>Just out of sheer curiosity, how does this work?  I notice that file doesn't include a <code>__</code>del<code>__</code> method.</p>
"
575325,NA,2009-02-22T17:56:42Z,1,Succesive calls to cProfile/pstats no updating properly,"<p>I'm trying to make successive calls of some profiler code however on the second call to the function the update time of the profile file changes but the actual profiler stats stay the same. This isn't the code I'm running but it's as simplified an example I can come up with that shows the same behaviour.</p>

<p>On running, the first time ctrl+c is pressed it shows stats, second time same thing but rather than being fully updated as expected only the time is, and third time program actually quits. If trying, ideally wait at a few seconds between ctrl+c presses.</p>

<p>Adding profiler.enable() after the 8th lines does give full updates between calls however it adds a lot of extra profiler data for things I don't want to be profiling.</p>

<p>Any suggestions for a happy medium where I get full updates but without the extra fluff?</p>

<pre><code>import signal, sys, time, cProfile, pstats

call = 0

def sigint_handler(signal, frame):
global call
if call &lt; 2:
	profiler.dump_stats(""profile.prof"")
	stats = pstats.Stats(""profile.prof"")
	stats.strip_dirs().sort_stats('cumulative').print_stats()
	call += 1
else:
	sys.exit()
def wait():
time.sleep(1)

def main_io_loop():
signal.signal(signal.SIGINT, sigint_handler)
while 1:
	wait()

profiler = cProfile.Profile()
profiler.runctx(""main_io_loop()"", globals(), locals())
</code></pre>
"
575385,8206,2009-02-22T18:23:50Z,37,Why not always use psyco for Python code?,"<p><a href=""http://psyco.sourceforge.net/"">psyco</a> seems to be quite helpful in optimizing Python code, and it does it in a very non-intrusive way. </p>

<p>Therefore, one has to wonder. Assuming you're always on a x86 architecture (which is where most apps run these days), why not just always use <code>psyco</code> for all Python code? Does it make mistakes sometimes and ruins the correctness of the program? Increases the runtime for some weird cases?</p>

<p>Have you had any negative experiences with it? My most negative experience so far was that it made my code faster by only 15%. Usually it's better.</p>

<p>Naturally, using psyco is not a replacement for efficient algorithms and coding. But if you can improve the performance of your code for the cost of two lines (importing and calling psyco), I see no good reason not to.</p>
"
575650,20601,2009-02-22T20:01:21Z,5,How to obtain the keycodes in Python,"<p>I have to know what key is pressed, but not need the code of the Character, i want to know when someone press the 'A' key even if the key obtained is 'a' or 'A', and so with all other keys.</p>

<p>I can't use PyGame or any other library (including Tkinter). Only Python Standard Library. And this have to be done in a terminal, not a graphical interface.</p>

<p>NOT NEED THE CHARACTER CODE. I NEED TO KNOW THE KEY CODE.</p>

<p>Ex:</p>

<pre><code>ord('a') != ord('A')                      # 97 != 65
someFunction('a') == someFunction('A')    # a_code == A_code
</code></pre>
"
575925,24094,2009-02-22T22:08:47Z,9,How to convert rational and decimal number strings to floats in python?,"<p>How can I convert strings which can denote decimal or rational numbers to floats</p>

<pre><code>&gt;&gt;&gt; [""0.1234"", ""1/2""]
['0.1234', '1/2']
</code></pre>

<p>I'd want [0.1234, 0.5].</p>

<p>eval is what I was thinking but no luck:</p>

<pre><code>&gt;&gt;&gt; eval(""1/2"")
0
</code></pre>
"
576238,44996,2009-02-23T01:00:37Z,1,Is there a special trick to downloading a zip file and writing it to disk with Python?,"<p>I am FTPing a zip file from a remote FTP site using Python's ftplib. I then attempt to write it to disk. The file write works, however most attempts to open the zip using WinZip or WinRar fail; both apps claim the file is corrupted. Oddly however, when right clicking and attempting to extract the file using WinRar, the file <em>will</em> extract.</p>

<p>So to be clear, the file write will work, but will not <em>open</em> inside the popular zip apps, but <em>will</em> decompress using those same apps. Note that the Python zipfile module <em>never</em> fails to extract the zips.</p>

<p>Here is the code that I'm using to get the zip file from the FTP site (please ignore the bad tabbing, that's not the issue). </p>

<pre><code>filedata = None
def appender(chunk):
    global filedata
    filedata += chunk


def getfile(filename):
  try:
      ftp = None

      try:
          ftp = FTP(address)
          ftp.login('user', 'password')

      except Exception, e:
          print e

      command = 'RETR ' + filename

      idx = filename.rfind('/')
      path = filename[0:idx]
      ftp.cwd(path)
      fileonly = filename[idx+1:len(filename)]

      ftp.retrbinary('RETR ' + filename, appender)

      global filedata
      data = filedata

      ftp.close()

      filedata = ''
      return data

  except Exception, e:
      print e

data = getfile('/archives/myfile.zip')    
file = open(pathtoNTFileShare, 'wb')
file.write(data)
file.close()
</code></pre>
"
576345,24718,2009-02-23T02:17:32Z,1,"Django Project structure, recommended structure to share an extended auth ""User"" model across apps?","<p>I'm wondering what the common project/application structure is when the user model extended/sub-classed and this Resulting User model is shared and used across multiple apps.  </p>

<p>I'd like to reference the same user model in multiple apps.
I haven't built the login interface yet, so I'm not sure how it should fit together.</p>

<p>The following comes to mind:</p>

<pre><code>project.loginapp.app1
project.loginapp.app2
</code></pre>

<p>Is there a common pattern for this situation?
Would login best be handled by a 'login app'?</p>

<p>Similar to this question but more specific.
<a href=""http://stackoverflow.com/questions/464010/django-application-configuration"">http://stackoverflow.com/questions/464010/django-application-configuration</a></p>

<p><strong>UPDATE</strong></p>

<p>Clarified my use-case above.
I'd like to add fields (extend or subclass?) to the existing auth user model.  And then reference that model in multiple apps.</p>
"
576557,69746,2009-02-23T04:43:32Z,0,Is it required to learn Python 2.6 along with Python 3.0?,"<p>If I learn python 3.0 and code in it, will my code be still compatible with Python 2.6 (or 2.5 too!)?</p>

<p><hr></p>

<p>Remarkably similar to:</p>

<p><a href=""http://stackoverflow.com/questions/410609/if-im-going-to-learn-python-should-i-learn-2-x-or-just-jump-into-3-0/410626"">If I'm Going to Learn Python, Should I Learn 2.x or Just Jump Into 3.0?</a></p>
"
576634,64004,2009-02-23T05:55:34Z,3,PyGame not receiving events when 3+ keys are pressed at the same time,"<p><em>I am developing a simple game in <a href=""http://www.pygame.org/"" rel=""nofollow"">PyGame</a>...  A rocket ship flying around and shooting stuff.</em>  </p>

<hr>

<p><strong>Question:</strong> Why does pygame stop emitting keyboard events when too may keys are pressed at once?</p>

<p><strong>About the Key Handling:</strong> The program has a number of variables like <code>KEYSTATE_FIRE, KEYSTATE_TURNLEFT</code>, etc...</p>

<ol>
<li>When a <code>KEYDOWN</code> event is handled, it sets the corresponding <code>KEYSTATE_*</code> variable to True.</li>
<li>When a <code>KEYUP</code> event is handled, it sets the same variable to False.</li>
</ol>

<p><strong>The problem:</strong>
If <code>UP-ARROW</code> and <code>LEFT-ARROW</code> are being pressed at the same time, pygame DOES NOT emit a <code>KEYDOWN</code> event when <code>SPACE</code> is pressed.  This behavior varies depending on the keys.  When pressing letters, it seems that I can hold about 5 of them before pygame stops emitting <code>KEYDOWN</code> events for additional keys.</p>

<p><strong>Verification:</strong> In my main loop, I simply printed each event received to verify the above behavior.</p>

<p><strong>The code:</strong> For reference, here is the (crude) way of handling key events at this point:</p>

<pre><code>while GAME_RUNNING:
    FRAME_NUMBER += 1
    CLOCK.tick(FRAME_PER_SECOND)

    #----------------------------------------------------------------------
    # Check for events
    for event in pygame.event.get():
        print event

        if event.type == pygame.QUIT:
            raise SystemExit()

        elif event.type == pygame.KEYDOWN and event.dict['key'] == pygame.K_UP:
            KEYSTATE_FORWARD = True
        elif event.type == pygame.KEYUP and event.dict['key'] == pygame.K_UP:
            KEYSTATE_FORWARD = False

        elif event.type == pygame.KEYDOWN and event.dict['key'] == pygame.K_DOWN:
            KEYSTATE_BACKWARD = True
        elif event.type == pygame.KEYUP and event.dict['key'] == pygame.K_DOWN:
            KEYSTATE_BACKWARD = False

        elif event.type == pygame.KEYDOWN and event.dict['key'] == pygame.K_LEFT:
            KEYSTATE_TURNLEFT = True
        elif event.type == pygame.KEYUP and event.dict['key'] == pygame.K_LEFT:
            KEYSTATE_TURNLEFT = False

        elif event.type == pygame.KEYDOWN and event.dict['key'] == pygame.K_RIGHT:
            KEYSTATE_TURNRIGHT = True
        elif event.type == pygame.KEYUP and event.dict['key'] == pygame.K_RIGHT:
            KEYSTATE_TURNRIGHT = False

        elif event.type == pygame.KEYDOWN and event.dict['key'] == pygame.K_SPACE:
            KEYSTATE_FIRE = True
        elif event.type == pygame.KEYUP and event.dict['key'] == pygame.K_SPACE:
            KEYSTATE_FIRE = False

    # remainder of game loop here...
</code></pre>

<p><strong>For pressing this sequence:</strong></p>

<ul>
<li><code>a (down)</code></li>
<li><code>s (down)</code></li>
<li><code>d (down)</code> </li>
<li><code>f (down)</code> </li>
<li><code>g (down)</code></li>
<li><code>h (down)</code></li>
<li><code>j (down)</code></li>
<li><code>k (down)</code></li>
<li><code>a (up)</code></li>
<li><code>s (up)</code></li>
<li><code>d (up)</code></li>
<li><code>f (up)</code></li>
<li><code>g (up)</code></li>
<li><code>h (up)</code></li>
<li><code>j (up)</code></li>
<li><code>k (up)</code></li>
</ul>

<p><strong>Here is the output:</strong></p>

<ul>
<li><code>&lt;Event(2-KeyDown {'scancode': 30, 'key': 97, 'unicode': u'a', 'mod': 0})&gt;</code></li>
<li><code>&lt;Event(2-KeyDown {'scancode': 31, 'key': 115, 'unicode': u's', 'mod': 0})&gt;</code></li>
<li><code>&lt;Event(2-KeyDown {'scancode': 32, 'key': 100, 'unicode': u'd', 'mod': 0})&gt;</code></li>
<li><code>&lt;Event(2-KeyDown {'scancode': 33, 'key': 102, 'unicode': u'f', 'mod': 0})&gt;</code></li>
<li><code>&lt;Event(3-KeyUp {'scancode': 30, 'key': 97, 'mod': 0})&gt;</code></li>
<li><code>&lt;Event(3-KeyUp {'scancode': 31, 'key': 115, 'mod': 0})&gt;</code></li>
<li><code>&lt;Event(3-KeyUp {'scancode': 32, 'key': 100, 'mod': 0})&gt;</code></li>
<li><code>&lt;Event(3-KeyUp {'scancode': 33, 'key': 102, 'mod': 0})&gt;</code></li>
<li><code>&lt;Event(2-KeyDown {'scancode': 36, 'key': 106, 'unicode': u'j', 'mod': 0})&gt;</code></li>
<li><code>&lt;Event(2-KeyDown {'scancode': 37, 'key': 107, 'unicode': u'k', 'mod': 0})&gt;</code></li>
<li><code>&lt;Event(3-KeyUp {'scancode': 36, 'key': 106, 'mod': 0})&gt;</code></li>
<li><code>&lt;Event(3-KeyUp {'scancode': 37, 'key': 107, 'mod': 0})&gt;</code></li>
</ul>

<hr>

<p>Is this a common issue?  Is there a workaround?  If not, what is the best way to handle multiple-key control issues when using pygame?</p>
"
576776,446497,2009-02-23T07:16:49Z,3,Writing a TTL decorator in Python,"<p>I'm trying to write a TTL decorator in python.
Basically I give it raise an exception if the function doesn't
answer in the selected time.</p>

<p>You can find the thead2 snippets on <a href=""http://sebulba.wikispaces.com/recipe+thread2"" rel=""nofollow"">http://sebulba.wikispaces.com/recipe+thread2</a></p>

<pre><code>from thread2 import Thread

""""""  A TTL decorator. """"""
class Worker(Thread):
    def __init__(self, q, f, args, kvargs):
        Thread.__init__(self)

        self.q = q
        self.f = f
        self.args = args
        self.kvargs = kvargs

    def run(self,):
        try:
            res = (True, self.f(*self.args, **self.kvargs))
            self.q.put(res)
        except Exception, e:
            self.q.put((False, e))

class Referee(Thread):
    def __init__(self,q, ttl,exception_factory):
        Thread.__init__(self)

        self.exception_factory=exception_factory    
        self.q=q
        self.ttl=ttl

    def run(self):
        time.sleep(self.ttl)
        res = (False, self.exception_factory())
        self.q.put(res)

def raise_if_too_long(ttl, exception_factory=lambda :RuntimeError(""Timeout"")):
    def raise_if_too_long_aux(f):
        def ritl(*args,**kvargs):
            q = Queue.Queue(2)

            referee = Referee(q, ttl, exception_factory)
            worker = Worker(q,f,args,kvargs)

            worker.start()
            referee.start()

            (valid, res)= q.get(1)

            q.task_done()

            referee.terminate()
            worker.terminate()

            if valid:
                return res
            else:
                raise res

        return ritl

    return raise_if_too_long_aux
</code></pre>

<p>However, I get some pretty bad result.
It seems like sometimes the function is returning alright yet
the decorator doesn't return until the TTL is reached and the error 
raises.</p>

<p>Do you see something wrong in this code?
Is there a common way/library to write function with a TTL in python?</p>
"
576843,54873,2009-02-23T07:55:51Z,3,Is there a known Win32 Tkinter bug with respect to displaying photos on a canvas?,"<p>I'm noticing a pretty strange bug with tkinter, and I am wondering if it's because there's something in how the python interacts with the tcl, at least in Win32.</p>

<p>Here I have a super simple program that displays a gif image.  It works perfectly.</p>

<pre><code>from Tkinter import *

canvas = Canvas(width=300, height=300, bg='white')   
canvas.pack()

photo=PhotoImage(file=sys.argv[1])
canvas.create_image(0, 0, image=photo, anchor=NW)  # embed a photo
print canvas
print photo

mainloop( )
</code></pre>

<p>Now, I change the program slightly to edit the canvas object from within a function.  This time, I just get a blank canvas.</p>

<pre><code># demo all basic canvas interfaces
from Tkinter import *

canvas = Canvas(width=300, height=300, bg='white')

canvas.pack()

def set_canvas(cv):
    photo=PhotoImage(file=sys.argv[1])
    cv.create_image(0, 0, image=photo, anchor=NW)  # embed a photo
    print cv
    print photo

set_canvas(canvas)
mainloop( )
</code></pre>

<p>The only difference between the two is that in one the canvas object is passed to a function instead of being used directly.  Both print statements return identical results.  I am wondering if there is perhaps some breakdown in the object model at the tcl/python layer.</p>

<p>Any thoughts, folks?</p>

<p>Thanks,
/YGA</p>
"
576933,11522,2009-02-23T08:50:12Z,10,How can I reference columns by their names in python calling SQLite?,"<p>I have some code which I've been using to query MySQL, and I'm hoping to use it with SQLite. My real hope is that this will not involve making too many changes to the code. Unfortunately, the following code doesn't work with SQLite:</p>

<pre><code>cursor.execute(query)

rows = cursor.fetchall()

data = []
for row in rows
  data.append(row[""column_name""])
</code></pre>

<p>This gives the following error:</p>

<pre><code> TypeError: tuple indices must be integers
</code></pre>

<p>Whereas if I change the reference to use a column number, it works fine:</p>

<pre><code>  data.append(row[1])
</code></pre>

<p>Can I execute the query in such a way that I can reference columns by their names?</p>
"
576940,58737,2009-02-23T08:53:45Z,1,How do I design sms service?,"<p>I want to design a website that can send and receive sms.</p>

<ol>
<li>How should I approach the problem ?</li>
<li>What are the resources available ?</li>
<li>I know php,python what else do I need or are the better options available?</li>
<li>How can experiment using my pc only?[somthing like localhost]</li>
<li>What are some good hosting services for this? [edit this]</li>
<li>[Add more questions you can think of?]</li>
</ol>
"
576967,69790,2009-02-23T09:10:01Z,2,How can I change a huge file into csv in python,"<p>I'm a beginner in python. I have a huge text file (hundreds of GB) and I want to convert the file into csv file. In my text file, I know the row delimiter is a string ""&lt;>&lt;>&lt;>&lt;>&lt;>&lt;>&lt;>"". If a line contains that string, I want to replace it with "". Is there a way to do it without having to read the old file and rewriting a new file.</p>

<p>Normally I thought I need to do something like this:</p>

<pre><code>fin = open(""input"", ""r"")
fout = open(""outpout"", ""w"")
line = f.readline
while line != """":
   if line.contains(""&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;""):
      fout.writeline(""\"""")
   else:
      fout.writeline(line)
   line = f.readline
</code></pre>

<p>but copying hundreds of GB is wasteful. Also I don't know if open will eat lots of memory (does it treat file handler as a stream?)</p>

<p>Any help is greatly appreciated.</p>

<p>Note: an example of the file would be</p>

<pre><code>file.txt
&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;
abcdefeghsduai 
asdjliwa
1231214 """"
&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;
</code></pre>

<p>would be one row and one column in csv.</p>
"
577119,11125,2009-02-23T10:15:09Z,4,How to exit a module before it has finished parsing?,"<p>I have a module that imports a module, but in some cases the module being imported may not exist. After the module is imported there is a class inherits from a class the imported module. If I was to catch the <code>ImportError</code> exception in the case the module doesn't exist, how can I stop Python from parsing the rest of the module? I'm open to other solutions if that's not possible.</p>

<p>Here is a basic example (selfaware.py):</p>

<pre><code>try:
    from skynet import SkyNet
except ImportError:
    class SelfAwareSkyNet():
        pass
    exit_module_parsing_here()

class SelfAwareSkyNet(SkyNet):
    pass
</code></pre>

<p>The only ways I can think to do this is:</p>

<ul>
<li>Before importing the <code>selfaware.py</code> module, check if the <code>skynet</code> module is available, and simply pass or create a stub class. This will cause DRY if <code>selfaware.py</code> is imported multiple times.</li>
<li><p>Within <code>selfaware.py</code> have the class defined withing the <code>try</code> block. e.g.:</p>

<pre><code>try:
    from skynet import SkyNet
    class SelfAwareSkyNet(SkyNet):
        pass
except ImportError:
    class SelfAwareSkyNet():
        pass
</code></pre></li>
</ul>
"
577234,40441,2009-02-23T10:59:32Z,211,"Python ""extend"" for a dictionary","<p>Which is the best way to extend a dictionary with another one? For instance:</p>

<pre><code>&gt;&gt;&gt; a = { ""a"" : 1, ""b"" : 2 }
&gt;&gt;&gt; b = { ""c"" : 3, ""d"" : 4 }
&gt;&gt;&gt; a
{'a': 1, 'b': 2}
&gt;&gt;&gt; b
{'c': 3, 'd': 4}
</code></pre>

<p>I'm looking for any operation to obtain this avoiding <code>for</code> loop:</p>

<pre><code>{ ""a"" : 1, ""b"" : 2, ""c"" : 3, ""d"" : 4 }
</code></pre>

<p>I wish to do something like:</p>

<pre><code>a.extend(b)  # This does not work
</code></pre>
"
577302,55565,2009-02-23T11:18:37Z,0,gtk TextView widget doesn't update during function,"<p>I'm new to GUI programming with python and gtk, so this is a bit of a beginners question.
I have a function that is called when a button is pressed which does various tasks, and a TextView widget which I write to after each task is completed.  The problem is that the TextView widget doesn't update until the entire function has finished. I need it to update after each task.</p>
"
577376,53330,2009-02-23T11:45:25Z,4,Django - how do I _not_ dispatch a signal?,"<p>I wrote some smart generic counters and managers for my models (to avoid <code>select count</code> queries etc.). Therefore I got some heavy logic going on for post_save.  </p>

<p>I would like to prevent handling the signal when there's no need to. 
I guess the perfect interface would be:</p>

<pre><code>instance.save(dispatch_signal=False)
</code></pre>

<p>How can I accomplish this?</p>

<p><hr /></p>

<p><strong>Update</strong></p>

<p>More information about what I'm doing, if anyone's interested:</p>

<ol>
<li>Generic counters are stored in a separate table</li>
<li>Every time Django paginates an object list, it calls overriden count() method of my custom manager, which basically retrieves the static counter value for appropriate object class.</li>
<li>Signals trigger the logic of counters update, which is a bit complicated since it checks many aspects of related models (i.e. it has to generate a visibility property based on a nested category tree). I can't put this logic in Model.save() because one counter depends on many different models. I'd like to have that logic in one piece, instead of fragments spread around.</li>
<li>I am denormalizing some of my models, so I rewrite (duplicate) certain values across tables.</li>
<li>For testing purposes I run my little command-extension -- <a href=""http://code.google.com/p/dilla"" rel=""nofollow"">Dilla</a>, to populate random data around.</li>
<li>I've noticed unwanted signals triggering, therefore I'd like them to run conditionally. </li>
</ol>

<p>Hope it's clear enough. Excuse my language mistakes.</p>
"
577467,NA,2009-02-23T12:20:26Z,38,Pause in Python,"<p>I am running command-line Python scripts from the Windows taskbar by having a shortcut pointing to the Python interpreter with the actual script as a parameter.</p>

<p>After the script has been processed, the interpreter terminates and the output window is closed which makes it impossible to read script output.</p>

<p>What is the most straightforward way to keep the interpreter window open until any key is pressed?</p>

<p>In batch files, one can end the script with pause. The closest thing to this I found in python is <code>raw_input()</code> which is sub-optimal because it requires pressing the return key (instead of any key).</p>

<p>Any ideas?</p>
"
577639,69877,2009-02-23T13:33:48Z,2,Rotating a glViewport?,"<p>In a ""multitouch"" environement, any application showed on a surface can be rotated/scaled to the direction of an user. Actual solution is to drawing the application on a FBO, and draw a rotated/scaled rectangle with the texture on it. I don't think it's good for performance, and all graphics cards don't provide FBO.</p>

<p>The idea is to clip the rendering viewport in the direction of user.
Since glViewport cannot be used for that, is another way exist to achieve that ?</p>

<p>(glViewport use (x, y, width, height), and i would like (x, y, width, height, rotation from center?))</p>

<p>PS: rotating the modelview or projection matrix will not help, i would like to ""rotate the clipping plan"" generated by glViewport. (only part of the all scene).</p>
"
577761,36330,2009-02-23T14:16:59Z,7,How do I prevent Python's os.walk from walking across mount points?,"<p>In Unix all disks are exposed as paths in the main filesystem, so <code>os.walk('/')</code> would traverse, for example, <code>/media/cdrom</code> as well as the primary hard disk, and that is undesirable for some applications.</p>

<p>How do I get an <code>os.walk</code> that stays on a single device?</p>

<p>Related:</p>

<ul>
<li><a href=""http://stackoverflow.com/questions/530645/is-there-a-way-to-determine-if-a-subdirectory-is-in-the-same-filesystem-from-pyth/"">Is there a way to determine if a subdirectory is in the same filesystem from python when using os.walk?</a></li>
</ul>
"
577779,65578,2009-02-23T14:22:21Z,0,Python Socket help (Syntax error),"<pre><code>import socket

HOST = ""swemach.se""
PORT = 21
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((HOST, PORT)
data = s.recv(1024)
s.close()
print ""%s"" % data
</code></pre>

<p>Gives me error</p>

<pre><code>File ""main.txt"", line 7
data = s.recv(1024)
  ^
SyntaxError: invaild syntax
</code></pre>

<p>What im going wrong? any tip/solution?</p>
"
577824,18811,2009-02-23T14:37:06Z,1,PyQt: No such slot,"<p>I am starting to learn Qt4 and Python, following along some tutorial i found on the interwebs. I have the following two files:</p>

<p>lcdrange.py:</p>

<pre><code>from PyQt4 import QtGui, QtCore

class LCDRange(QtGui.QWidget):                        
    def __init__(self, parent=None):
        QtGui.QWidget.__init__(self, parent)

        lcd = QtGui.QLCDNumber(2)

        self.slider = QtGui.QSlider()
        self.slider.setRange(0,99)
        self.slider.setValue(0)

        self.connect(self.slider, QtCore.SIGNAL('valueChanged(int)'),
                     lcd, QtCore.SLOT('display(int)'))
        self.connect(self.slider, QtCore.SIGNAL('valueChanged(int)'),
                     self, QtCore.SIGNAL('valueChanged(int)'))

        layout = QtGui.QVBoxLayout()
        layout.addWidget(lcd)
        layout.addWidget(self.slider)
        self.setLayout(layout)

    def value(self):
        self.slider.value()

    def setValue(self,value):
        self.slider.setValue(value)
</code></pre>

<p>main.py:</p>

<pre><code>import sys
from PyQt4 import QtGui, QtCore

from lcdrange import LCDRange

class MyWidget(QtGui.QWidget):
    def __init__(self, parent=None):
        QtGui.QWidget.__init__(self, parent)

        quit = QtGui.QPushButton('Quit')
        quit.setFont(QtGui.QFont('Times', 18, QtGui.QFont.Bold))
        self.connect(quit, QtCore.SIGNAL('clicked()'), QtGui.qApp, QtCore.SLOT('quit()'))

        grid = QtGui.QGridLayout()
        previousRange = None

        for row in range(0,3):
            for column in range(0,3):
                lcdRange = LCDRange()

                grid.addWidget(lcdRange, row, column)
                if not previousRange == None:
                    self.connect(lcdRange, QtCore.SIGNAL('valueChanged(int)'),
                                 previousRange, QtCore.SLOT('setValue(int)'))
                previousRange = lcdRange

        layout = QtGui.QVBoxLayout()
        layout.addWidget(quit)
        layout.addLayout(grid)
        self.setLayout(layout)




app = QtGui.QApplication(sys.argv)

widget = MyWidget()
widget.show()


sys.exit(app.exec_())
</code></pre>

<p>When i run this i get the following errors:</p>

<pre><code>Object::connect: No such slot LCDRange::setValue(int)
Object::connect: No such slot LCDRange::setValue(int)
Object::connect: No such slot LCDRange::setValue(int)
Object::connect: No such slot LCDRange::setValue(int)
Object::connect: No such slot LCDRange::setValue(int)
Object::connect: No such slot LCDRange::setValue(int)
Object::connect: No such slot LCDRange::setValue(int)
Object::connect: No such slot LCDRange::setValue(int)
</code></pre>

<p>I've read that PyQt slots are nothing more than methods, which i have defined, so what am i doing wrong?</p>

<p>I am also learning Qt4 with Ruby which is where this code originates from, i translated it from Ruby to Python. In the Ruby version the LCDRange class is defined as this:</p>

<pre><code>class LCDRange &lt; Qt::Widget
  signals 'valueChanged(int)'
  slots 'setValue(int)'

  def initialize(parent = nil)
  ...
</code></pre>

<p>So my guess was that i have to somehow declare the existence of the custom slot?</p>
"
577940,437,2009-02-23T15:12:37Z,9,How can I make this Python recursive function return a flat list?,"<p>Look at this simple function</p>

<pre><code>def prime_factors(n):
    for i in range(2,n):
      if n % i == 0:
        return i, prime_factors(n / i)
    return n
</code></pre>

<p>Here's the result of <code>prime_factors(120)</code></p>

<pre><code>(2, (2, (2, (3, 5))))
</code></pre>

<p>Instead of nested tuples, I want it to return one flat tuple or list.</p>

<pre><code>(2, 2, 2, 3, 5)
</code></pre>

<p>Is there a simple way to do that?</p>
"
578200,15369,2009-02-23T16:12:36Z,0,Easiest way to create a scrollable area using wxPython?,"<p>Okay, so I want to display a series of windows within windows and have the whole lot scrollable. I've been hunting through <a href=""http://docs.wxwidgets.org/stable/wx_wxscrolledwindow.html#wxscrolledwindow"" rel=""nofollow"">the wxWidgets documentation</a> and a load of examples from various sources on t'internet. Most of those seem to imply that a wx.ScrolledWindow should work if I just pass it a nested group of sizers(?):</p>

<blockquote>
  <p>The most automatic and newest way is to simply let sizers determine the scrolling area.This is now the default when you set an interior sizer into a wxScrolledWindow with wxWindow::SetSizer. The scrolling area will be set to the size requested by the sizer and the scrollbars will be assigned for each orientation according to the need for them and the scrolling increment set by wxScrolledWindow::SetScrollRate.</p>
</blockquote>

<p>...but all the example's I've seen seem to use the older methods listed as ways to achieve scrolling. I've got something basic working, but as soon as you start scrolling you lose the child windows:</p>

<pre><code>import wx

class MyCustomWindow(wx.Window):
    def __init__(self, parent):
        wx.Window.__init__(self, parent)
        self.Bind(wx.EVT_PAINT, self.OnPaint)
        self.SetSize((50,50))

    def OnPaint(self, event):
        dc = wx.BufferedPaintDC(self)
        dc.SetPen(wx.Pen('blue', 2))
        dc.SetBrush(wx.Brush('blue'))
        (width, height)=self.GetSizeTuple()
        dc.DrawRoundedRectangle(0, 0,width, height, 8)

class TestFrame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None, -1)

        self.Bind(wx.EVT_SIZE, self.OnSize)

        self.scrolling_window = wx.ScrolledWindow( self )
        self.scrolling_window.SetScrollRate(1,1)
        self.scrolling_window.EnableScrolling(True,True)
        self.sizer_container = wx.BoxSizer( wx.VERTICAL )
        self.sizer = wx.BoxSizer( wx.HORIZONTAL )
        self.sizer_container.Add(self.sizer,1,wx.CENTER,wx.EXPAND)
        self.child_windows = []
        for i in range(0,50):
            wind = MyCustomWindow(self.scrolling_window)
            self.sizer.Add(wind, 0, wx.CENTER|wx.ALL, 5)
            self.child_windows.append(wind)

        self.scrolling_window.SetSizer(self.sizer_container)

    def OnSize(self, event):
        self.scrolling_window.SetSize(self.GetClientSize())

if __name__=='__main__':
    app = wx.PySimpleApp()
    f = TestFrame()
    f.Show()
    app.MainLoop()
</code></pre>
"
578262,69746,2009-02-23T16:24:09Z,1,Python 2.5 to Python 2.2 converter,"<p>I am working on a PyS60 application for S60 2nd Edition devices. I have coded my application logic in Python 2.5.</p>

<p>Is there any tool that automates th conversion from Python 2.5 to Python 2.2 or do I need to do in manually?</p>
"
578379,55562,2009-02-23T16:53:23Z,6,Python program to find fibonacci series. More Pythonic way,"<p>There is another thread to discuss Fibo series in Python. This is to tweak code into more pythonic. <a href=""http://stackoverflow.com/questions/494594/how-to-write-the-fibonacci-sequence-in-python"">How to write the Fibonacci Sequence in Python</a></p>

<p>I am in love with this program I wrote to solve Project Euler Q2. I am newly coding in Python and rejoice each time I do it The Pythonic way! Can you suggest a better Pythonic way to do this?</p>

<p><a href=""http://projecteuler.net/index.php?section=problems&amp;id=2"">Project Euler Q2</a>. Find the sum of all the even-valued terms in the Fibonacci sequence which do not exceed four million.</p>

<pre><code>fib=[]
def fibo(a=-1,b=1,upto=4000000):
    if a+b&gt;=upto:
        return
    else:
        a,b=b,a+b
        fib.append(b)
        fibo(a,b)

fibo()
even=[i for i in fib if not i%2]
print sum(even)
</code></pre>
"
578635,51816,2009-02-23T17:58:20Z,3,How to pass values by ref in Python?,"<p>Basically I am using the C++ API of an app, but there is no reference for its python access. One variable is passed by ref, like so:</p>

<pre><code>GetPoint ( Point  &amp;p, Object obj )
</code></pre>

<p>so how can I translate to Python? Is there a pass by ref symbol?</p>
"
578677,NA,2009-02-23T18:10:52Z,9,Alternative to 'for i in xrange(len(x))',"<p>So I see in <a href=""http://stackoverflow.com/questions/576988/python-specific-antipatterns"">another post</a> the following ""bad"" snippet, but the only alternatives I have seen involve patching Python.</p>

<pre><code>for i in xrange(len(something)):
  workwith = something[i]
  # do things with workwith...
</code></pre>

<p>What do I do to avoid this ""antipattern""?</p>
"
578800,55366,2009-02-23T18:45:11Z,1,"AuiNotebook, where did the event happend","<p>How can I find out from which AuiNotebook page an event occurred?</p>

<p>EDIT: Sorry about that. Here are a code example. How do I find the notebook page
from witch the mouse was clicked in?</p>

<pre><code>#!/usr/bin/python

#12_aui_notebook1.py

import wx
import wx.lib.inspection

class MyFrame(wx.Frame):
    def __init__(self, *args, **kwds):
    	wx.Frame.__init__(self, *args, **kwds)

    	self.nb = wx.aui.AuiNotebook(self)

    	self.new_panel('Pane 1')
    	self.new_panel('Pane 2')
    	self.new_panel('Pane 3')

    def new_panel(self, nm):
    	pnl = wx.Panel(self)
    	self.nb.AddPage(pnl, nm)
    	self.sizer = wx.BoxSizer()
    	self.sizer.Add(self.nb, 1, wx.EXPAND)
    	self.SetSizer(self.sizer)

    	pnl.Bind(wx.EVT_LEFT_DOWN, self.click)

    def click(self, event):
    	print 'Mouse click'
            #How can I find out from witch page this click came from?


class MyApp(wx.App):
    def OnInit(self):
    	frame = MyFrame(None, -1, '12_aui_notebook1.py')
    	frame.Show()
    	self.SetTopWindow(frame)
    	return 1

if __name__ == ""__main__"":
    app = MyApp(0)
#    wx.lib.inspection.InspectionTool().Show()
    app.MainLoop()
</code></pre>

<p>Oerjan Pettersen</p>
"
578812,58866,2009-02-23T18:47:43Z,4,Need help understanding function passing in Python,"<p>I am trying to teach myself Python by working through some problems I came up with, and I need some help understanding how to pass functions.</p>

<p>Let's say I am trying to predict tomorrow's temperature based on today's and yesterday's temperature, and I have written the following function:</p>

<pre><code>def predict_temp(temp_today, temp_yest, k1, k2):
    return k1*temp_today + k2*temp_yest
</code></pre>

<p>And I have also written an error function to compare a list of predicted temperatures with actual temperatures and return the mean absolute error:</p>

<pre><code>def mean_abs_error(predictions, expected):
    return sum([abs(x - y) for (x,y) in zip(predictions,expected)]) / float(len(predictions))
</code></pre>

<p>Now if I have a list of daily temperatures for some interval in the past, I can see how my prediction function would have done <strong>with specific k1 and k2 parameters</strong> like this:</p>

<pre><code>&gt;&gt;&gt; past_temps = [41, 35, 37, 42, 48, 30, 39, 42, 33]
&gt;&gt;&gt; pred_temps = [predict_temp(past_temps[i-1],past_temps[i-2],0.5,0.5) for i in xrange(2,len(past_temps))]
&gt;&gt;&gt; print pred_temps
[38.0, 36.0, 39.5, 45.0, 39.0, 34.5, 40.5]
&gt;&gt;&gt; print mean_abs_error(pred_temps, past_temps[2:])
6.5
</code></pre>

<p><strong>But how do I design a function to minimize my parameters k1 and k2 of my predict_temp function given an error function and my past_temps data?</strong></p>

<p>Specifically I would like to write a function minimize(args*) that takes a prediction function, an error function, some training data, and that uses some search/optimization method (gradient descent for example) to estimate and return the values of k1 and k2 that minimize my error given the data?</p>

<p>I am not asking how to implement the optimization method. Assume I can do that. Rather, I would just like to know <strong>how to pass my predict and error functions</strong> (and my data) to my minimize function, and <strong>how to tell my minimize function that it should optimize the parameters k1 and k2</strong>, so that my minimize function can automatically search a bunch of different settings of k1 and k2, applying my prediction function with those parameters each time to the data and computing error (like I did manually for k1=0.5 and k2=0.5 above) and then return the best results.</p>

<p>I would like to be able to pass these functions so I can easily swap in different prediction and error functions (differing by more than just parameter settings that is). Each prediction function might have a different number of free parameters.</p>

<p>My minimize function should look something like this, but I don't know how to proceed:</p>

<pre><code>def minimize(prediction_function, which_args_to_optimize, error_function, data):
    # 1: guess initial parameters
    # 2: apply prediction function with current parameters to data to compute predictions
    # 3: use error function to compute error between predictions and data
    # 4: if stopping criterion is met, return parameters
    # 5: update parameters
    # 6: GOTO 2
</code></pre>

<p>Edit: It's that easy?? This is no fun. I am going back to Java. </p>

<p>On a more serious note, I think I was also getting hung up on how to use different prediction functions with different numbers of parameters to tune. If I just take all the free parameters in as one tuple I can keep the form of the function the same so it easy to pass and use.</p>
"
578983,70011,2009-02-23T19:27:23Z,3,Python package import error,"<p>I'm trying to package my modules, but I can't seem to get it working. </p>

<p>My directory tree is something like the following:</p>

<pre><code>snappy/
    __init__.py
    main/
        __init__.py
        main.py
        config.py
        ...
    ...
</code></pre>

<p>and the code I'm using is</p>

<pre><code>from snappy.main.config import *
</code></pre>

<p>I'm getting the error:</p>

<pre><code>ImportError: No module named snappy.main.config
</code></pre>

<p>Any ideas what's going wrong? This is using Python 2.5 on Ubuntu 8.10.</p>

<p>Thanks in advance for your help.</p>
"
579097,42974,2009-02-23T19:58:15Z,6,Is there a pattern for propagating details of both errors and warnings?,"<p>Is there a common pattern for propagating details of both errors and warnings? By <em>errors</em> I mean serious problems that should cause the flow of code to stop. By <em>warnings</em> I mean issues that merit informing the user of a problem, but are too trivial to stop program flow.</p>

<p>I currently use exceptions to deal with hard errors, and the Python logging framework to record warnings. But now I want to record warnings in a database field of the record currently being processed instead. I guess, I want the warnings to bubble up in the same manner as exceptions, but without stopping program flow.</p>

<pre><code>&gt;&gt;&gt; import logging
&gt;&gt;&gt;
&gt;&gt;&gt; def process_item(item):
...     if item:
...         if item == 'broken':
...             logging.warning('soft error, continue with next item')

...     else:
...         raise Exception('hard error, cannot continue')
...
&gt;&gt;&gt; process_item('good')
&gt;&gt;&gt; process_item(None)
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
  File ""&lt;stdin&gt;"", line 6, in process_item
Exception: hard error, cannot continue
&gt;&gt;&gt; process_item('broken')
WARNING:root:soft error, continue with next item
</code></pre>

<p><em>This example (and my current problem) is in Python, but it should apply to other languages with exceptions too.</em></p>

<p><hr /></p>

<p>Following <a href=""http://stackoverflow.com/users/56541/david"">David</a>'s suggestion and a brief play with the example below, Python's <code>warnings</code> module is the way to go.</p>

<pre><code>import warnings

class MyWarning(Warning):
    pass

def causes_warnings():
    print 'enter causes_warnings'
    warnings.warn(""my warning"", MyWarning)
    print 'leave causes_warnings'

def do_stuff():
    print 'enter do_stuff'
    causes_warnings()
    causes_warnings()
    causes_warnings()
    print 'leave do_stuff'

with warnings.catch_warnings(record=True) as w:
    # Cause all warnings to always be triggered.
    warnings.simplefilter(""always"")
    # Trigger a number of warnings.
    do_stuff()
    # Do something (not very) useful with the warnings generated
    print 'Warnings:',','.join([str(warning.message) for warning in w])
</code></pre>

<p>Output:</p>

<pre><code>enter do_stuff
enter causes_warnings
leave causes_warnings
enter causes_warnings
leave causes_warnings
enter causes_warnings
leave causes_warnings
leave do_stuff
Warnings: my warning,my warning,my warning
</code></pre>

<p>Note: Python 2.6+ is required for <code>catch_warnings</code>.</p>
"
579272,5287,2009-02-23T20:47:25Z,36,Instantiating a python class in C#,"<p>I've written a class in python that I want to wrap into a .net assembly via IronPython and instantiate in a C# application. I've migrated the class to IronPython, created a library assembly and referenced it. Now, how do I actually get an instance of that class?</p>

<p>The class looks (partially) like this:</p>

<pre><code>class PokerCard:
    ""A card for playing poker, immutable and unique.""

    def __init__(self, cardName):
</code></pre>

<p>The test stub I wrote in C# is:</p>

<pre><code>using System;

namespace pokerapp
{
    class Program
    {
        static void Main(string[] args)
        {
            var card = new PokerCard(); // I also tried new PokerCard(""Ah"")
            Console.WriteLine(card.ToString());
            Console.ReadLine();
        }
    }
}
</code></pre>

<p>What do I have to do in order to instantiate this class in C#?</p>
"
579310,63503,2009-02-23T20:55:58Z,10,formatting long numbers as strings in python,"<p>What is an easy way in Python to format integers into strings representing thousands with K, and millions with M, and leaving just couple digits after comma?</p>

<p>I'd like to show 7436313 as 7.44M, and 2345 as 2,34K.</p>

<p>Is there some % string formatting operator available for that? Or that could be done only by actually dividing by 1000 in a loop and constructing result string step by step?</p>
"
579426,38592,2009-02-23T21:22:48Z,5,WSGI byte ranges serving,"<p>I'm looking into supporting <a href=""http://en.wikipedia.org/wiki/Byte%5Fserving"" rel=""nofollow"">HTTP/1.1 Byte serving</a> in WSGI server/application for:</p>

<ul>
<li>resuming partial downloads</li>
<li>multi-part downloads</li>
<li>better streaming</li>
</ul>

<p><a href=""http://www.python.org/dev/peps/pep-0333/#other-http-features"" rel=""nofollow"">WSGI PEP 333</a> mentions that WSGI server may implement handling of byte serving (from <a href=""http://tools.ietf.org/html/rfc2616"" rel=""nofollow"">RFC 2616</a> section 14.35.2 defines Accept-Range/Range/Content-Range response/request/response headers) and application should implement it if announces the capability:</p>

<blockquote>
  <p>A server may transmit byte ranges of
  the application's response if
  requested by the client, and the
  application doesn't natively support
  byte ranges. Again, however, the
  application should perform this
  function on its own if desired.</p>
</blockquote>

<p>I've performed some Googling but found little information upon which of the available WSGI servers/middleware/applications implement Byte-Ranges? Does anyone has an experience in the field and can hint me place to dig further?</p>

<p>EDIT: Can anyone comment, how I can enhance the question to be able to find an answer?</p>
"
579511,68861,2009-02-23T21:45:54Z,32,Using only the DB part of Django,"<p>Does somebody know how ""modular"" is Django? Can I use just the ORM part, to get classes that map to DB tables and know how to read/write from these tables?</p>

<p>If not, what would you recommend as ""the Python equivalent of Hibernate""?</p>
"
579620,6592,2009-02-23T22:17:28Z,5,Wrapping objects to extend/add functionality while working around isinstance,"<p>In Python, I've seen the recommendation to use holding or wrapping to extend the functionality of an object or class, rather than inheritance.  In particular, I think that Alex Martelli spoke about this in his <a href=""http://www.lecturefox.com/blog/python-design-patterns-by-alex-martelli"" rel=""nofollow"">Python Design Patterns</a> talk.  I've seen this pattern used in libraries for dependency injection, like <a href=""http://pypi.python.org/pypi/PyContainer/0.4"" rel=""nofollow"">pycontainer</a>.</p>

<p>One problem that I've run into is that when I have to interface with code that uses the 
<a href=""http://stackoverflow.com/questions/576988/python-specific-antipatterns/577848#577848"">isinstance anti-pattern</a>, this pattern fails because the holding/wrapping object fails the <code>isinstance</code> test.  How can I set up the holding/wrapping object to get around unnecessary type checking?  Can this be done generically?  In some sense, I need something for class instances analogous to signature-preserving function decorators (e.g., <a href=""http://wiki.python.org/moin/PythonDecoratorLibrary"" rel=""nofollow"">simple_decorator</a> or Michele Simionato's <a href=""http://pypi.python.org/pypi/decorator"" rel=""nofollow"">decorator</a>).</p>

<p>A qualification: I'm not asserting that all <code>isinstance</code> usage is inappropriate; several answers make good points about this.  That said, it should be recognized that <code>isinstance</code> usage poses significant limitations on object interactions---it forces <em>inheritance</em> to be the source of polymorphism, rather than <em>behavior</em>.</p>

<p>There seems to be some confusion about exactly how/why this is a problem, so let me provide a simple example (broadly lifted from <a href=""http://pypi.python.org/pypi/PyContainer/0.4"" rel=""nofollow"">pycontainer</a>).  Let's say we have a class Foo, as well as a FooFactory.  For the sake of the example, assume we want to be able to instantiate Foo objects that log every function call, or don't---think AOP.  Further, we want to do this without modifying the Foo class/source in any way (e.g., we may actually be implementing a generic factory that can add logging ability to any class instance on the fly).  A first stab at this might be:</p>

<pre><code>class Foo(object):
    def bar():
        print 'We\'re out of Red Leicester.'

class LogWrapped(object):
    def __init__(self, wrapped):
        self.wrapped = wrapped
    def __getattr__(self, name):
        attr = getattr(self.wrapped, name)
        if not callable(attr):
            return attr
        else:
            def fun(*args, **kwargs):
                print 'Calling ', name
                attr(*args, **kwargs)
                print 'Called ', name
            return fun

class FooFactory(object):
    def get_foo(with_logging = False):
        if not with_logging:
            return Foo()
        else:
            return LogWrapped(Foo())

foo_fact = FooFactory()
my_foo = foo_fact.get_foo(True)
isinstance(my_foo, Foo) # False!
</code></pre>

<p>There are may reasons why you might want to do things exactly this way (use decorators instead, etc.) but keep in mind:</p>

<ul>
<li>We don't want to touch the Foo class.  Assume we're writing framework code that could be used by clients we don't know about yet.</li>
<li>The point is to return an object that is essentially a Foo, but with added functionality.  It should appear to be a Foo---as much as possible---to any other client code expecting a Foo.  Hence the desire to work around <code>isinstance</code>.</li>
<li>Yes, I know that I don't need the factory class (preemptively defending myself here). </li>
</ul>
"
579687,61410,2009-02-23T22:38:02Z,123,How do I copy a string to the clipboard on Windows using Python?,"<p>I'm kind of new to Python and I'm trying to make a basic Windows application that builds a string out of user input then adds it to the  clipboard. How do I copy a string to the clipboard using Python?</p>
"
579770,18811,2009-02-23T22:59:10Z,9,Python ORM that auto-generates/updates tables and uses SQLite?,"<p>I am doing some prototyping for a new desktop app i am writing in Python, and i want to use SQLite and an ORM to store data.</p>

<p>My question is, are there any ORM libraries that support auto-generating/updating the database schema and work with SQLite?</p>
"
579782,51816,2009-02-23T23:03:12Z,0,Change basic (immutable) types inside a function in Python?,"<p>I am using a C++ SDK where there is a function like (it has a python wrapper, but not docs):</p>

<pre><code>getPos ( int uvId, float &amp; u, float &amp; v ) const
</code></pre>

<p>How do I specify in Python so that the passed variables are changed?</p>

<p>I tried this example to see if I could modify floats inside a function, but it didn't work, so printed 12.0:</p>

<pre><code>def change ( a ) :

    a = 35.0


b = 12.0

change ( b )

print b
</code></pre>

<p>So how do I call this function that I can change 2 external floats in Python?</p>

<p>Related:</p>

<ul>
<li><a href=""http://stackoverflow.com/questions/575196/python-variable-scope-and-function-calls/"">Python: variable scope and function calls</a></li>
</ul>
"
579856,1670,2009-02-23T23:33:26Z,7,What's the Pythonic way to combine two sequences into a dictionary?,"<p>Is there a more concise way of doing this in Python?:</p>

<pre><code>def toDict(keys, values):
  d = dict()
  for k,v in zip(keys, values):
    d[k] = v

  return d
</code></pre>
"
580397,61410,2009-02-24T03:45:09Z,1,Need help debugging python html generator,"<p>The program is supposed to take user input, turn it into html and pass it into the clipboard.</p>

<p>Start the program with welcome_msg()</p>

<p>If you enter 1 in the main menu, it takes you through building an anchor tag. You'll add the link text, the url, then the title. After you enter the title, I get the following errors:</p>

<pre><code>File ""&lt;pyshell#23&gt;"", line 1, in &lt;module&gt;
  welcome_msg()
File ""C:\Python26\html_hax.py"", line 24, in welcome_msg
  anchor()
File ""C:\Python26\html_hax.py"", line 71, in anchor
  copy_to_clipboard(anchor_output)
File ""C:\Python26\html_hax.py"", line 45, in copy_to_clipboard
  wc.SetClipboardData(win32con.CF_TEXT, msg)
error: (0, 'SetClipboardData', 'No error message is available')
</code></pre>

<p>Here's the Code:
<a href=""http://pastie.org/398163"" rel=""nofollow"">http://pastie.org/398163</a></p>

<p>What is causing the errors above?</p>
"
580866,46646,2009-02-24T08:01:21Z,0,Persisting variable value in Python,"<pre><code>for i in range(0,3):
    j = 0
    print 'incrementing '
    j += 1
    print j
</code></pre>

<p>prints</p>

<pre><code>incrementing 
1
incrementing 
1
incrementing 
1
</code></pre>

<p>How can I persist the value of 'j' so that it prints:</p>

<pre><code>1
2
3
</code></pre>
"
580924,NA,2009-02-24T08:26:26Z,16,Python windows File Version attribute,"<p>Last time I asked a similar question but that was about svn related versioning info. Now I am wondering how to query windows ""File version"" attribute about eg. a dll. I payed attention to wmi and win32file modules as well without success.</p>
"
580993,14799,2009-02-24T08:55:29Z,5,regex '|' operator vs separate runs for each sub-expression,"<p>I've got a fairly large string (~700k) against which I need to run 10 regexes and count all the matches of any of the regexes.  My quick and dirty impl was to do something like re.search('(expr1)|(expr2)|...'), but I was wondering if we'd see any performance gains by matching in a loop instead:</p>

<p>In other words, I want to compare the performance of:</p>

<pre><code>def CountMatchesInBigstring(bigstring, my_regexes):
  """"""Counts how many of the expressions in my_regexes match bigstring.""""""
  count = 0
  combined_expr = '|'.join(['(%s)' % r for r in my_regexes])
  matches = re.search(combined_expr, bigstring)
  if matches:
    count += NumMatches(matches)
  return count
</code></pre>

<p>vs</p>

<pre><code>def CountMatchesInBigstring(bigstring, my_regexes):
  """"""Counts how many of the expressions in my_regexes match bigstring.""""""
  count = 0
  for reg in my_regexes:
    matches = re.search(reg, bigstring)
    if matches:
      count += NumMatches(matches)
  return count
</code></pre>

<p>I'll stop being lazy and run some tests tomorrow (and post the results), but I wondered whether the answer will jump out to someone who actually understands how regexes work :)</p>
"
581038,69062,2009-02-24T09:15:24Z,12,Python web programming,"<p>Good morning.</p>

<p>As the title indicates, I've got some questions about using python for web development.</p>

<ul>
<li>What is the best setup for a development environment, more specifically, what webserver to use, how to bind python with it. Preferably, I'd like it to be implementable in both, *nix and win environment.</li>
</ul>

<p>My major concern when I last tried apache + mod_python + CherryPy was having to reload webserver to see the changes. Is it considered normal? For some reason cherrypy's autoreload didn't work at all.</p>

<ul>
<li><p>What is the best setup to deploy a working Python app to production and why? I'm now using lighttpd for my PHP web apps, but how would it do for python compared to nginx for example?</p></li>
<li><p>Is it worth diving straight with a framework or to roll something simple of my own? I see that Django has got quite a lot of fans, but I'm thinking it would be overkill for my needs, so I've started looking into CherryPy.</p></li>
<li><p>How exactly are Python apps served if I have to reload httpd to see the changes? Something like a permanent process spawning child processes, with all the major file includes happening on server start and then just lazy loading needed resources?</p></li>
<li><p>Python supports multithreading, do I need to look into using that for a benefit when developing web apps? What would be that benefit and in what situations?</p></li>
</ul>

<p>Big thanks!</p>
"
581085,62811,2009-02-24T09:29:15Z,10,Double buffering with wxpython,"<p>I'm working on an multiplatform application with wxpython and I had flickering problems on windows, while drawing on a Panel.
I used to draw on a buffer (wx.Bitmap) during mouse motions events and my OnPaint method was composed of just on line:</p>

<pre><code>dc = wx.BufferedPaintDC(self, self.buffer)
</code></pre>

<p>Pretty standard but still I had flickering problems on Windows, while everything worked fine on Linux.</p>

<p>I <strong>solved my problem</strong> calling <code>SetDoubleBuffered(True)</code> in the <code>__init__</code> method.</p>

<p>The strange thing is that now everything works even if I don't use BufferedPaintDC anymore. I changed my application so that all the drawing part is done in the OnPaint method. I don't use a buffer and drawing is done directly on a wx.PaintDC with no flickering problems at all.</p>

<p>So my question is: is BufferedPaintDC totally useless? Or deprecated somehow? I'm owner of the book ""WxPython in Action"" (2006) and it doesn't even mention SetDoubleBuffered</p>
"
581186,59024,2009-02-24T10:10:29Z,3,Can someone explain why scipy.integrate.quad gives different results for equally long ranges while integrating sin(X)?,"<p>I am trying to numerically integrate an arbitrary (known when I code) function in my program
using numerical integration methods. I am using Python 2.5.2 along with SciPy's numerical integration package. In order to get a feel for it, i decided to try integrating sin(x) and observed this behavior-</p>

<pre><code>&gt;&gt;&gt; from math import pi
&gt;&gt;&gt; from scipy.integrate import quad
&gt;&gt;&gt; from math import sin
&gt;&gt;&gt; def integrand(x):
...     return sin(x)
... 
&gt;&gt;&gt; quad(integrand, -pi, pi)
(0.0, 4.3998892617846002e-14)
&gt;&gt;&gt; quad(integrand, 0, 2*pi)
(2.2579473462709165e-16, 4.3998892617846002e-14)
</code></pre>

<p>I find this behavior odd because -<br />
1. In ordinary integration, integrating over the full cycle gives zero.<br />
2. In numerical integration, this (1) isn't necessarily the case, because you may just be 
   approximating the total area under the curve.</p>

<p>In any case, either assuming 1 is True or assuming 2 is True, I find the behavior to be inconsistent. Either both integrations (-pi to pi and 0 to 2*pi) should return 0.0 (first value in the tuple is the result and the second is the error) or return 2.257...</p>

<p>Can someone please explain why this is happening? Is this really an inconsistency? Can someone also tell me if I am missing something really basic about numerical methods?</p>

<p>In any case, in my final application, I plan to use the above method to find the arc length of a function. If someone has experience in this area, please advise me on the best policy for doing this in Python.</p>

<p><strong>Edit</strong><br />
<strong>Note</strong><br />
I already have the first differential values at all points in the range stored in an array.<br />
Current error is tolerable.<br />
<strong>End note</strong></p>

<p>I have read Wikipaedia on this. As Dimitry has pointed out, I will be integrating sqrt(1+diff(f(x), x)^2) to get the Arc Length. What I wanted to ask was - is there a better approximation/ Best practice(?) / faster way to do this. If more context is needed, I'll post it separately/ post context here, as you wish.</p>
"
581281,6266,2009-02-24T10:43:49Z,1,Python C-API Object Initialisation,"<p>What is the correct way to initialise a python object into already existing memory (like the inplace new in c++)</p>

<p>I tried this code however it causes an access violation with a debug build because the _ob_prev and _ob_next are not set..</p>

<pre><code>//PyVarObject *mem; -previously allocated memory

Py_INCREF(type);
//couldnt get PyObject_HEAD_INIT or PyVarObject_HEAD_INIT to compile
//however the macros resolve to this
PyVarObject init = {{_PyObject_EXTRA_INIT 1, ((_typeobject*)type)}, 0};
*mem = init;
//...other init code for type...
</code></pre>

<p>The crash occures on line 1519 in object.c</p>

<pre><code>void
_Py_ForgetReference(register PyObject *op)
{
#ifdef SLOW_UNREF_CHECK
        register PyObject *p;
#endif
    if (op-&gt;ob_refcnt &lt; 0)
        Py_FatalError(""UNREF negative refcnt"");
    if (op == &amp;refchain ||
        op-&gt;_ob_prev-&gt;_ob_next != op || op-&gt;_ob_next-&gt;_ob_prev != op) { //----HERE----//
        fprintf(stderr, ""* ob\n"");
        _PyObject_Dump(op);
        fprintf(stderr, ""* op-&gt;_ob_prev-&gt;_ob_next\n"");
        _PyObject_Dump(op-&gt;_ob_prev-&gt;_ob_next);
        fprintf(stderr, ""* op-&gt;_ob_next-&gt;_ob_prev\n"");
        _PyObject_Dump(op-&gt;_ob_next-&gt;_ob_prev);
        Py_FatalError(""UNREF invalid object"");
    }
#ifdef SLOW_UNREF_CHECK
    for (p = refchain._ob_next; p != &amp;refchain; p = p-&gt;_ob_next) {
        if (p == op)
            break;
    }
    if (p == &amp;refchain) /* Not found */
        Py_FatalError(""UNREF unknown object"");
#endif
    op-&gt;_ob_next-&gt;_ob_prev = op-&gt;_ob_prev;
    op-&gt;_ob_prev-&gt;_ob_next = op-&gt;_ob_next;
    op-&gt;_ob_next = op-&gt;_ob_prev = NULL;
    _Py_INC_TPFREES(op);
}
</code></pre>
"
581343,NA,2009-02-24T11:00:30Z,12,Similar to Pass in Python for C#,"<p>In python we can .. </p>

<pre><code>a = 5
if a == 5:
          pass #Do Nothing
else:
      print ""Hello World""
</code></pre>

<p>I wonder if it a similar way to do this in C#</p>
"
581851,2242,2009-02-24T14:03:26Z,3,"In Python, how do I make a temp file that persists until the next run?","<p>I need to create a folder that I use only once, but need to have it exist until the next run. It seems like I should be using the tmp_file module in the standard library, but I'm not sure how to get the behavior that I want.  </p>

<p>Currently, I'm doing the following to create the directory:  </p>

<pre><code>randName = ""temp"" + str(random.randint(1000, 9999))
os.makedirs(randName)
</code></pre>

<p>And when I want to delete the directory, I just look for a directory with ""temp"" in it.<br />
This seems like a dirty hack, but I'm not sure of a better way at the moment.  </p>

<p>Incidentally, the reason that I need the folder around is that I start a process that uses the folder with the following:  </p>

<pre><code>subprocess.Popen([command], shell=True).pid
</code></pre>

<p>and then quit my script to let the other process finish the work.</p>
"
582336,21245,2009-02-24T16:01:26Z,702,How can you profile a Python script?,"<p>Project Euler and other coding contests often have a maximum time to run or people boast of how fast their particular solution runs.  With python, sometimes the approaches are somewhat kludgey - i.e., adding timing code to <code>__main__</code>.</p>

<p>What is a good way to profile how long a python program takes to run?</p>
"
582449,18811,2009-02-24T16:28:11Z,19,py2exe + sqlalchemy + sqlite problem,"<p>I am playing around with getting some basic stuff to work in Python before i go into full speed dev mode. Here are the specifics:</p>

<pre><code>Python 2.5.4
PyQt4 4.4.3
SqlAlchemy 0.5.2
py2exe 0.6.9
setuptools 0.6c9
pysqlite 2.5.1
</code></pre>

<p>setup.py:</p>

<pre><code>from distutils.core import setup
import py2exe

setup(windows=[{""script"" : ""main.py""}], options={""py2exe"" : {""includes"" : [""sip"", ""PyQt4.QtSql"",""sqlite3""],""packages"":[""sqlite3"",]}})
</code></pre>

<p>py2exe appears to generate the .exe file correctly, but when i execute dist/main.exe i get this in the main.exe.log</p>

<pre><code>Traceback (most recent call last):
  File ""main.py"", line 18, in &lt;module&gt;
  File ""main.py"", line 14, in main
  File ""db\manager.pyc"", line 12, in __init__
  File ""sqlalchemy\engine\__init__.pyc"", line 223, in create_engine
  File ""sqlalchemy\engine\strategies.pyc"", line 48, in create
  File ""sqlalchemy\engine\url.pyc"", line 91, in get_dialect
ImportError: No module named sqlite
</code></pre>

<p>I've been googling my heart out, but can't seem to find any solutions to this. If i can't get this to work now, my hopes of using Python for this project will be dashed and i will start over using Ruby... (not that there is anything wrong with Ruby, i just wanted to use this project as a good way to teach myself Python)</p>
"
582723,53007,2009-02-24T17:35:55Z,46,How to import classes defined in __init__.py,"<p>I am trying to organize some modules for my own use. I have something like this:</p>

<pre><code>lib/
  __init__.py
  settings.py
  foo/
    __init__.py
    someobject.py
  bar/
    __init__.py
    somethingelse.py
</code></pre>

<p>In <code>lib/__init__.py</code>, I want to define some classes to be used if I import lib. However, I can't seem to figure it out without separating the classes into files, and import them in<code> __init__.py</code>. </p>

<p>Rather than say:</p>

<pre><code>    lib/
      __init__.py
      settings.py
      helperclass.py
      foo/
        __init__.py
        someobject.py
      bar/
        __init__.py
        somethingelse.py

from lib.settings import Values
from lib.helperclass import Helper
</code></pre>

<p>I want something like this:</p>

<pre><code>    lib/
      __init__.py  #Helper defined in this file
      settings.py
      foo/
        __init__.py
        someobject.py
      bar/
        __init__.py
        somethingelse.py

from lib.settings import Values
from lib import Helper
</code></pre>

<p>Is it possible, or do I have to separate the class into another file?</p>

<h2>EDIT</h2>

<p>OK, if I import lib from another script, I can access the Helper class. How can I access the Helper class from settings.py?</p>

<p>The example <a href=""http://docs.python.org/tutorial/modules.html"">here</a> describes Intra-Package References. I quote ""submodules often need to refer to each other"". In my case, the lib.settings.py needs the Helper and lib.foo.someobject need access to Helper, so where should I define the Helper class?</p>
"
583216,45629,2009-02-24T19:32:21Z,15,"Run a linux system command as a superuser, using a python script","<p>I have got postfix installed on my machine and I am updating virtual_alias on the fly programmatically(using python)(on some action). Once I update the entry in the /etc/postfix/virtual_alias, I am running the command:<pre><code>sudo /usr/sbin/postmap /etc/postfix/virtual_alias 2>>/work/postfix_valias_errorfile</code></pre>But I am getting the error:<pre><code>sudo: sorry, you must have a tty to run sudo</code></pre></p>

<p>I want to run the mentioned sudo command in a non-human way(meaning, I am running this system command from a python script.). So how do I get this command run programmatically?</p>
"
583557,24094,2009-02-24T20:56:53Z,4,What is the best way to print a table with delimiters in Python,"<p>I want to print a table mixed with string and float values, as tab delimited output printout. Sure I can get the job done:</p>

<pre><code>&gt;&gt;&gt; tab = [['a', 1], ['b', 2]]
&gt;&gt;&gt; for row in tab:
...     out = """"
...     for col in row:
...             out = out + str(col) + ""\t""
...     print out.rstrip()
... 
a   1
b   2
</code></pre>

<p>But I have a feeling there is a better way to do it in Python, at least to print each row with specified delimiter, if not the whole table. Little googling (from <a href=""http://skymind.com/~ocrow/python_string/"" rel=""nofollow"">here</a>) and it is already shorter:</p>

<pre><code>&gt;&gt;&gt; for row in tab:
...     print ""\t"".join([str(col) for col in row])
... 
a   1
b   2
</code></pre>

<p>Is there still a better, or more Python-ish, way to do it?</p>
"
583740,913,2009-02-24T21:44:19Z,3,Django development server shutdown error,"<p>Hey all,
Whenever i shut down my development server (./manage.py runserver) with CTRL+c i get following message:</p>

<pre><code>[24/Feb/2009 22:05:23] ""GET /home/ HTTP/1.1"" 200 1571
[24/Feb/2009 22:05:24] ""GET /contact HTTP/1.1"" 301 0
[24/Feb/2009 22:05:24] ""GET /contact/ HTTP/1.1"" 200 2377
^C
Error in atexit._run_exitfuncs:
Traceback (most recent call last):
  File ""/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/atexit.py"", line 24, in _run_exitfuncs
    func(*targs, **kargs)
  File ""/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/logging/__init__.py"", line 1354, in shutdown
    h.flush()
TypeError: flush() takes exactly 2 arguments (1 given)
Error in sys.exitfunc:
Traceback (most recent call last):
  File ""/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/atexit.py"", line 24, in _run_exitfuncs
    func(*targs, **kargs)
  File ""/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/logging/__init__.py"", line 1354, in shutdown
    h.flush()
TypeError: flush() takes exactly 2 arguments (1 given)
</code></pre>

<p>I recently moved the project to another directory, but everything else works fine, so i don't know if that has anything to do with it ...</p>

<p>If i just start the development server and then shut it down immediately, i do not see the error. Only when i click around some in the browser and then shut down the server...</p>

<p>Can anyone point me in the right direction to sort this one out plz? </p>

<p>Thanks in advance.</p>
"
583791,46914,2009-02-24T21:56:09Z,19,Is it possible to generate and return a ZIP file with App Engine?,"<p>I have a small project that would be perfect for Google App Engine.  Implementing it hinges on the ability to generate a ZIP file and return it.</p>

<p>Due to the distributed nature of App Engine, from what I can tell, the ZIP file couldn't be created ""in-memory"" in the traditional sense.  It would basically have to be generated and and sent in a single request/response cycle.</p>

<p>Does the Python zip module even exist in the App Engine environment?</p>
"
583857,19212,2009-02-24T22:14:28Z,4,"How does one enable authentication across a Django site, and transparently preserving any POST or GET data?","<p>Suppose someone is editing a HTML form, and their session times out, how can one have Django re-authenticate that individual without losing the content the user had entered into the form?</p>

<p>The snippet <a href=""http://www.djangosnippets.org/snippets/136/"" rel=""nofollow"">Django Snippets: Require login across entire site</a> suggests how to do site-wide authentication, but I expect it will lose the GET component of the string (namely because request.path does not include it), and definitely lose the POST data.</p>

<p>How can one preserve the POST and GET across those inconvenient timeouts. I find that finessed web-sites tend to handle this intelligently, and I'd like to be able to do it in Django (as would others, I imagine!).</p>

<p>Thoughts would be appreciated. Thank you.</p>
"
583906,70011,2009-02-24T22:29:50Z,0,PyGTK widget opacity,"<p>Is there any way to set a widget's opacity in PyGTK?<br />
I know there's a function for windows:</p>

<pre><code>gtk.Window.set_opacity(0.85)
</code></pre>

<p>but there seems to be no equivalent for arbitrary widgets.<br />
Anyone have any ideas?</p>

<p>Thanks in advance for your help.</p>
"
583986,61410,2009-02-24T22:52:33Z,0,"How would I make the output of this for loop into a string, into a variable?","<p>In this loop, I'm trying to take user input and continually put it in a list till they write ""stop"". When the loop is broken, the for loop prints out all of the li's.</p>

<p>How would I take the output of the for loop and make it a string so that I can load it into a variable?</p>

<pre><code>x = ([])
while True:
    item = raw_input('Enter List Text (e.g. &lt;li&gt;&lt;a href=""#""&gt;LIST TEXT&lt;/a&gt;&lt;/li&gt;) (Enter ""stop"" to end loop):\n')
    if item == 'stop':
    	print 'Loop Stopped.'
    	break			
    else:
    	item = make_link(item)
    	x.append(item)
    	print 'List Item Added\n'


    for i in range(len(x)):
    	print '&lt;li&gt;' + x[i] + '&lt;/li&gt;\n'
</code></pre>

<p>I want it to end up like this:</p>

<p>Code:</p>

<pre><code>print list_output
</code></pre>

<p>Output:</p>

<pre><code>&lt;li&gt;Blah&lt;/li&gt;
&lt;li&gt;Blah&lt;/li&gt;
&lt;li&gt;etc.&lt;/li&gt;
</code></pre>
"
584127,NA,2009-02-24T23:32:56Z,2,tkinter - set geometry without showing window,"<p>I'm trying to line up some label and canvas widgets.  To do so I need to know how wide my label boxes are.  I'd like my widget to auto-adjust if the user changes the system font size, so I don't want to hard code 12 pixels per character.  If I measure the label widget it's always 1 pixel wide.  Until I call .update(), then I get the correct value.  But .update() puts a window onscreen with my label, said window then goes away when I finally pack my final widgets.  But this causes an unwelcome flash when I first put up the widget.</p>

<p>So, how can I measure a label widget without .update()'ing it?  Or how can I .update() a widget without having it display onscreen?  I'm using Python if it matters.</p>
"
584575,14540,2009-02-25T03:12:49Z,3,Problems on select module on Python 2.5,"<p>I have an application in Python 2.5 that listens to a beanstalk queue. It works fine on all machines I tested so far, except from my newly acquired MacBook Pro. </p>

<p>On that computer, when I try to run it I get this error:</p>

<pre><code>Traceback (most recent call last):
  File ""jobs.py"", line 181, in &lt;module&gt;
    Jobs().start()
  File ""jobs.py"", line 154, in start
    self.jobQueue = Queue()
  File ""src/utils/queue.py"", line 16, in __init__
    self.connection = serverconn.ServerConn(self.server, self.port)
  File ""src/beanstalk/serverconn.py"", line 25, in __init__
    self.poller = select.poll()
AttributeError: 'module' object has no attribute 'poll'
</code></pre>

<p>The serverconn.py has the following imports:</p>

<pre><code>import socket, select
</code></pre>

<p>And when I try to run it from command line, it fails as well:</p>

<pre><code>Python 2.5.1 (r251:54863, Jul 23 2008, 11:00:16) 
[GCC 4.0.1 (Apple Inc. build 5465)] on darwin
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt; import select
&gt;&gt;&gt; select.poll()
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
AttributeError: 'module' object has no attribute 'poll'
</code></pre>

<p>Do you have any idea on what can be happening?</p>

<p>PS: Even though I am pretty confident it's not a source problem, if you need some background on the source that's failing, it's available at http://pastie.org/399342.</p>

<p><em>Updated:</em> since the first answer I got speculates whether select.poll() is or not supported on Mac OS, but I have an iMac too and with the exact same OS version and it works fine:</p>

<pre><code>2009-02-25 00:27:10,067 - Queue - DEBUG - Connecting to BeansTalk daemon @ localhost:11300
</code></pre>
"
584865,38140,2009-02-25T05:54:36Z,5,Determine if a listing is a directory or file in Python over FTP,"<p>Python has a standard library module <code>ftplib</code> to run FTP communications. It has two means of getting a listing of directory contents. One, <code>FTP.nlst()</code>, will return a list of the contents of a directory given a directory name as an argument. (It will return the name of a file if given a file name instead.) This is a robust way to list the contents of a directory but does not give any indication whether each item in the list is a file or directory. The other method is <code>FTP.dir()</code>, which gives a string formatted listing of the directory contents of the directory given as an argument (or of the file attributes, given a file name).</p>

<p>According to <a href=""http://stackoverflow.com/questions/111954/using-pythons-ftplib-to-get-a-directory-listing-portably"">a previous question on Stack Overflow</a>, parsing the results of <code>dir()</code> can be fragile (different servers may return different strings). I'm looking for some way to list just the directories contained within another directory over FTP, though. To the best of my knowledge, scraping for a <code>d</code> in the permissions part of the string is the only solution I've come up with, but I guess I can't guarantee that the permissions will appear in the same place between different servers. Is there a more robust solution to identifying directories over FTP?</p>
"
585006,70165,2009-02-25T07:04:33Z,0,Database design of survey query system,"<p>I am working on a so-called Behavioral Risk Factor Surveillance System (BRFSS), a web query system dealing with questionnaires coming every year. </p>

<p>I had hard time in coming up with a suitable database design for it. Here is the problem: Each questionnaire contains about 80 questions, with demographic info, e.g. age, education, etc, and survey questions, e.g. smoking, health, etc. Every year, some questions change, some don't. Data source is an Excel file with 80+ columns. The system has to support queries like: </p>

<pre><code>SELECT [question var], [demo var], count(*) 
FROM survey 
WHERE age in (...) AND educ in (...) [etc] 
GROUP BY &lt;question var&gt;
</code></pre>

<p>The data is read only, ie. never change once imported. So it does not have to be normalized too much. Intuitively, a spreadsheet-like table will do a good job wrt. speed and space. This becomes a problem, though, because questions will change, then we can't keep all the data in this table, which is necessary because of cross year queries. </p>

<p>I tried normalize the responses into three tables: questions, responses, and response_values, which can support question variations. But then the response table spans over 98*14268 = 1,398,264 rows for one year! That's really huge. Query is slow like crazy! </p>

<p>How should I design the database? Any help is appreciated! Thanks in advance!</p>

<p>ps. I am using Python+Django+Sqlite. </p>
"
585529,70778,2009-02-25T10:44:02Z,6,Find all strings in python code files,"<p>I would like to list all strings within my large python project.</p>

<p>Imagine the different possibilities to create a string in python:</p>

<pre><code>mystring = ""hello world""

mystring = (""hello ""
            ""world"")

mystring = ""hello "" \
           ""world""
</code></pre>

<p>I need a tool that outputs ""filename, linenumber, string"" for each string in my project. Strings that are spread over multiple lines using ""\"" or ""('')"" should be shown in a single line.</p>

<p>Any ideas how this could be done?</p>
"
585957,69746,2009-02-25T13:17:59Z,0,About the optional argument in Canvas in PyS60,"<p>In <a href=""http://wiki.opensource.nokia.com/projects/PyS60"" rel=""nofollow"">Python for Symbian60</a> blit() is defined as:</p>

<p>blit(image [,target=(0,0), source=((0,0),image.size), mask=None, scale=0 ])</p>

<p>In the optional parameter source what is the significance of image.size?</p>
"
586517,36680,2009-02-25T15:39:46Z,2,What are good ways to upload bulk .csv data into a webapp using Django/Python?,"<p>I have a very basic CSV file upload module working to bulk upload my user's data into my site.  I process the CSV file in the backend with a python script that runs on crontab and then email the user the results of the bulk upload.  This process works ok operationally, but my issue is with the format of the csv file.  </p>

<p>Are there good tools or even basic rules on how to accept different formats of the csv file?  The user may have a different order of data columns, slightly different names for the column headers (I want the email column to be entitled ""Email"", but it may say ""Primary Email"", ""Email Address""), or missing additional data columns.  Any good examples of CSV upload functionality that is very permissive and user friendly?</p>

<p>Also, how do I tell the user to export as CSV data?  I'm importing address book information, so this data often comes from Outlook, Thunderbird, other software packages that have address books.  Are there other popular data formats that I should accept?</p>
"
587345,20941,2009-02-25T19:00:49Z,42,Python regular expression matching a multiline block of text,"<p>I'm having a bit of trouble getting a Python regex to work when matching against text that spans multiple lines. The example text is ('\n' is a newline)</p>

<pre><code>some Varying TEXT\n
\n
DSJFKDAFJKDAFJDSAKFJADSFLKDLAFKDSAF\n
[more of the above, ending with a newline]\n
[yep, there is a variable number of lines here]\n
\n
(repeat the above a few hundred times).
</code></pre>

<p>I'd like to capture two things: the 'some_Varying_TEXT' part, and all of the lines of uppercase text that comes two lines below it in one capture (i can strip out the newline characters later). 
I've tried with a few approaches:</p>

<pre><code>re.compile(r""^&gt;(\w+)$$([.$]+)^$"", re.MULTILINE) # try to capture both parts
re.compile(r""(^[^&gt;][\w\s]+)$"", re.MULTILINE|re.DOTALL) # just textlines
</code></pre>

<p>and a lot of variations hereof with no luck. The last one seems to match the lines of text one by one, which is not what I really want. I can catch the first part, no problem, but I can't seem to catch the 4-5 lines of uppercase text.
I'd like match.group(1) to be some&#95;Varying&#95;Text and group(2) to be line1+line2+line3+etc until the empty line is encountered.</p>

<p>If anyone's curious, its supposed to be a sequence of aminoacids that make up a protein.</p>
"
587647,10040,2009-02-25T20:13:22Z,8,How to increment a value with leading zeroes?,"<p>What would be the best way to increment a value that contains leading zeroes?  For example, I'd like to increment ""00000001"".  However, it should be noted that the number of leading zeroes will not exceed 30.  So there may be cases like ""0000012"", ""00000000000000099"", or ""000000000000045"".</p>

<p>I can think of a couple ways, but I want to see if someone comes up with something slick.</p>
"
588052,47204,2009-02-25T21:47:41Z,3,a question on for loops in python,"<p>I want to calaculate pythagorean triplets(code below) and I want to calculate infinitly how do I do it without using the three for loops? Could I use a for loop in some way? thanks.</p>

<pre><code>import math

def main():
    for x in range (10000, 1000):
    	for y in range (10000, 1000):
    		for z in range(10000, 1000):
    			if x*x == y*y + z*z:
    				print y, z, x
    				print '-'*50

if __name__ == '__main__':
    main()
</code></pre>
"
588342,46914,2009-02-25T23:09:54Z,3,Is there a Django apps pattern equivalent in Google App Engine?,"<p>Django has a very handy pattern known as ""apps"".  Essentially, a self-contained plug-in that requires a minimal amount of wiring, configuring, and glue code to integrate into an existing project.  Examples are tagging, comments, contact-form, etc.  They let you build up large projects by gathering together a collection of useful apps, rather than writing everything from scratch.  The apps you <em>do</em> end up writing can be made portable so you can recycle them in other projects.</p>

<p>Does this pattern exist in Google App Engine?  Is there any way to create self-contained apps that can be easily be dropped into an App Engine project?  Right off the bat, the YAML url approach looks like it could require a significant re-imagining to the way its done in Django.</p>

<p>Note: I know I can run Django on App Engine, but that's not what I'm interested in doing this time around.</p>
"
588622,64884,2009-02-26T00:47:02Z,4,How to produce a colored GUI in a console application?,"<p>For the following questions, answers may be for C/C++, C#, or Python. I would like the answers to be cross platform if possible but I realize I will probably need <code>conio</code> or <code>ncurses</code></p>

<ol>
<li>How do I output colored text?</li>
<li>How would I do a GUI like <code>top</code> or <code>nethack</code> where certain things are ""drawn"" to certain spaces in the terminal?  </li>
</ol>

<p>If possible a small oneliner code example would be great.</p>
"
588749,40817,2009-02-26T01:32:39Z,23,Python Daemon Packaging Best Practices,"<p>I have a tool which I have written in python and generally should be run as a daemon.  What are the best practices for packaging this tool for distribution, particularly how should settings files and the daemon executable/script be handled?</p>

<p>Relatedly are there any common tools for setting up the daemon for running on boot as appropriate for the given platform (i.e. <em>init</em> scripts on linux, services on windows, <em>launchd</em> on os x)?</p>
"
589093,49701,2009-02-26T04:19:43Z,3,Python persistent Popen,"<p>Is there a way to do multiple calls in the same ""session"" in Popen? For instance, can I make a call through it and then another one after it without having to concatenate the commands into one long string?</p>
"
589115,59494,2009-02-26T04:33:49Z,2,Miminal Linux For a Pylons Web App?,"<p>I am going to be building a Pylons-based web application. For this purpose, I'd like to build a minimal Linux platform, upon which I would then install the necessary packages such as Python and Pylons, and other necessary dependencies. The other reason to keep it minimal is because this machine will be virtual, probably over KVM, and will eventually be replicated in some cloud environment.</p>

<p>What would you use to do this? I am thinking of using Fedora 10's AOS iso, but would love to understand all my options.</p>
"
589284,4678,2009-02-26T05:59:25Z,35,imploding a list for use in a python MySQLDB IN clause,"<p>I know how to map a list to a string:</p>

<pre><code>foostring = "","".join( map(str, list_of_ids) )
</code></pre>

<p>And I know that I can use the following to get that string into an IN clause:</p>

<pre><code>cursor.execute(""DELETE FROM foo.bar WHERE baz IN ('%s')"" % (foostring))
</code></pre>

<p>What I need is to accomplish the same thing SAFELY (avoiding SQL injection) using MySQLDB. In the above example because foostring is not passed as an argument to execute, it is vulnerable. I also have to quote and escape outside of the mysql library. </p>

<p>(There is a <a href=""http://stackoverflow.com/questions/315672/automagically-expanding-a-python-list-with-formatted-output"">related SO question</a>, but the answers listed there either do not work for MySQLDB or are vulnerable to SQL injection.)</p>
"
589407,11515,2009-02-26T06:44:48Z,8,Python - How to check if a file is used by another application?,"<p>I want to open a file which is periodically written to by another application. This application cannot be modified. I'd therefore like to only open the file when I know it is not been written to by an other application.</p>

<p>Is there a pythonic way to do this? Otherwise, how do I achieve this in Unix and Windows?</p>

<p><strong>edit</strong>: I'll try and clarify. <em>Is there a way to check if the current file has been opened by another application?</em></p>

<p>I'd like to start with this question. Whether those other application read/write is irrelevant for now.</p>

<p>I realize it is probably OS dependent, so this may not really be python related right now.</p>
"
589833,53710,2009-02-26T09:37:39Z,2,How to find a relative URL and translate it to an absolute URL in Python,"<p>I extract some code from a web page (<a href=""http://www.opensolaris.org/os/community/on/flag-days/all/"" rel=""nofollow"">http://www.opensolaris.org/os/community/on/flag-days/all/</a>) like follows,</p>

<pre><code>&lt;tr class=""build""&gt;
  &lt;th colspan=""0""&gt;Build 110&lt;/th&gt;
&lt;/tr&gt;
&lt;tr class=""arccase project flagday""&gt;
  &lt;td&gt;Feb-25&lt;/td&gt;
  &lt;td&gt;&lt;/td&gt;
  &lt;td&gt;&lt;/td&gt;
  &lt;td&gt;&lt;/td&gt;
  &lt;td&gt;
    &lt;a href=""../pages/2009022501/""&gt;Flag Day and Heads Up: Power Aware Dispatcher and Deep C-States&lt;/a&gt;&lt;br /&gt;
    cpupm keyword mode extensions - &lt;a href=""/os/community/arc/caselog/2008/777/""&gt;PSARC/2008/777&lt;/a&gt;&lt;br /&gt;
    CPU Deep Idle Keyword - &lt;a href=""/os/community/arc/caselog/2008/663/""&gt;PSARC/2008/663&lt;/a&gt;&lt;br /&gt;
  &lt;/td&gt;
&lt;/tr&gt;
</code></pre>

<p>and there are some relative url path in it, now I want to search it with regular expression and replace them with absolute url path. Since I know urljoin can do the replace work like that,</p>

<pre><code>&gt;&gt;&gt; urljoin(""http://www.opensolaris.org/os/community/on/flag-days/all/"",
...         ""/os/community/arc/caselog/2008/777/"")
'http://www.opensolaris.org/os/community/arc/caselog/2008/777/'
</code></pre>

<p>Now I want to know that how to search them using regular expressions, and finally tanslate the code to,</p>

<pre><code>&lt;tr class=""build""&gt;
  &lt;th colspan=""0""&gt;Build 110&lt;/th&gt;
&lt;/tr&gt;
&lt;tr class=""arccase project flagday""&gt;
  &lt;td&gt;Feb-25&lt;/td&gt;
  &lt;td&gt;&lt;/td&gt;
  &lt;td&gt;&lt;/td&gt;
  &lt;td&gt;&lt;/td&gt;
  &lt;td&gt;
    &lt;a href=""http://www.opensolaris.org/os/community/on/flag-days/all//pages/2009022501/""&gt;Flag Day and Heads Up: Power Aware Dispatcher and Deep C-States&lt;/a&gt;&lt;br /&gt;
    cpupm keyword mode extensions - &lt;a href=""http://www.opensolaris.org/os/community/arc/caselog/2008/777/""&gt;PSARC/2008/777&lt;/a&gt;&lt;br /&gt;
    CPU Deep Idle Keyword - &lt;a href=""http://www.opensolaris.org/os/community/arc/caselog/2008/663/""&gt;PSARC/2008/663&lt;/a&gt;&lt;br /&gt;
  &lt;/td&gt;
&lt;/tr&gt;
</code></pre>

<p>My knowledge of regular expressions is so poor that I want to know how to do that. Thanks</p>

<p><strong>I have finished the work using Beautiful Soup, haha~ Thx for everybody!</strong></p>
"
590007,5302,2009-02-26T10:41:16Z,26,Python or IronPython,"<p>How does IronPython stack up to the default Windows implementation of Python from python.org? If I am learning Python, will I be learning a subtley different language with IronPython, and what libraries would I be doing without?</p>

<p>Are there, alternatively, any pros to IronPython (not including .NET IL compiled classes) that would make it more attractive an option?</p>
"
590053,43960,2009-02-26T10:56:32Z,3,Video and Voice chat operability in Python,"<p>I'm trying to find resources on video and voice chat operability in Python... Does anybody know of some good resources or sample projects?</p>

<p>Any help would really be appreciated!</p>
"
590250,14006,2009-02-26T12:01:22Z,3,How to change a Python module name?,"<p>Is it only possible if I rename the file? Or is there a <code>__module__</code> variable to the file to define what's its name?</p>
"
590653,19687,2009-02-26T13:57:53Z,2,How can I query a model by if there is a subclass instance?,"<p>I have these two simple models, A and B:</p>

<pre><code>from django.db import models

class A(models.Model):
  name = models.CharField(max_length=10)

class B(A):
  age = models.IntegerField()
</code></pre>

<p>Now, how can I query for all instances of A which do not have an instance of B?</p>

<p>The only way I found requires an explicitly unique field on each subclass, which is NOT NULL, so that I can do A.objects.filter(b__this_is_a_b=None), for example, to get instances that are not also B instances. I'm looking for a way to do this without adding an explicit silly flag like that.</p>

<p>I also don't want to query for all of the objects and then filter them in Python. I want to get the DB to do it for me, which is basically something like <code>SELECT * FROM A WHERE A.id in (SELECT id from B)</code></p>
"
590921,14716,2009-02-26T15:08:17Z,2,Django - designing models with virtual fields?,"<p>I'd like to ask about the most elegant approach when it comes to designing models with virtual fields such as below in Django... </p>

<p>Let's say we're building an online store and all the products in the system are defined by the model ""<em>Product</em>"".</p>

<pre><code>class Product(models.Model):
    # common fields that all products share
    name = ...
    brand = ...
    price = ...
</code></pre>

<p>But the store will have lots of product types completely unrelated with eachother, so I need some way to store those virtual fields of different product types (ie. capacity of a MP3 player, pagecount of a book,..).</p>

<p>The solutions I could come up with my raw Django skills are far from perfect so far:</p>

<ul>
<li><p>Having a ""custom_fields"" property
and intermediate tables that I
manage manually. (screaming ugly in
my face :)) </p></li>
<li><p>Or inheriting classes from
""<em>Product</em>"" on the fly with Python's
dangerous exec-eval statements (that is too
much voodoo magic for maintenance
and also implementation would
require knowledge of Django internals).</p></li>
</ul>

<p>What's your take on this?</p>

<p>TIA.</p>
"
591200,45891,2009-02-26T16:03:08Z,8,Can I use a decorator to mutate the local scope of a function in Python?,"<p>Is there any way of writing a decorator such that the following would work?</p>

<pre><code>assert 'z' not in globals()

@my_decorator
def func(x, y):
   print z
</code></pre>

<p><hr /></p>

<p>EDIT: moved from anwser</p>

<p>In answer to hop's ""why?"": syntax sugar / DRY.</p>

<p>It's not about caching, it's about calculating z (and z1, z2, z3, ...) based upon the values of x &amp; y.</p>

<p>I have lots of functions which do related things, and I don't want to do have to write</p>

<pre><code>z1, z2, z3=calculate_from(x, y)
</code></pre>

<p>at the beginning of every single function - I'll get it wrong somewhere. If this were c I'd do this with cpp (if this were lisp, I'd do this with macros ...), but I wanted to see if decorators could do the same thing.</p>

<p>If it helps, I'd almost certainly call the decorator ""precalculate_z"", and it certainly wouldn't be part of any public API.</p>

<p>I could probably get a similar effect from using the class infrastructure as well, but I wanted to see if it was doable with raw functions.</p>
"
591253,41718,2009-02-26T16:15:37Z,6,"When using random, which form returns an equal 50% chance?","<p>I'm guessing that most built in random generators return something like this:</p>

<pre><code>[0.0, 1.0)
</code></pre>

<p>so if I would like a 50% chance would I use something like this:</p>

<pre><code>if random() &lt; .5
</code></pre>

<p>or something like:</p>

<pre><code>if random() &lt;= .5
</code></pre>

<p>Thanks for the help.</p>
"
591300,NA,2009-02-26T16:24:28Z,4,How can I modify password expiration in Windows using Python?,"<p>How can I modify the password expiration to ""never"" on Windows XP for a local user with Python? I have the PyWIN and WMI modules on board but have no solution. I managed to query the current settings via WMI(based on Win32_UserAccount class), but how can modify it?</p>
"
591421,33061,2009-02-26T16:53:16Z,0,python variables not accepting names,"<p>I'm trying to declare a few simple variables as part of a function in a very basic collision detection programme. For some reason it's rejecting my variables (although only some of them even though they're near identical). Here's the code for the function;</p>

<pre><code>def TimeCheck():
    timechecknumber = int(time.time())
    timecheckdiv = backcolourcheck % 5
    if timecheckdiv &lt; 1:
        timecheck = true
    else:
        timecheck = false
    if timecheck == true:
        backgroundr = (int(random.random()*255)+1
        backgroundg = (int(random.random()*255)+1
        backgroundb = (int(random.random()*255)+1
</code></pre>

<p>for some reason it accepts backgroundr but not backgroundg, anyone got any ideas why? thanks</p>
"
591443,16363,2009-02-26T17:00:07Z,2,Python Win32 - DriveInfo On Mapped Drive,"<p>Does anyone know how I can determine the server and share name of a mapped network drive?</p>

<p>For example:</p>

<pre><code>import win32file, win32api
for logDrive in win32api.GetLogicalDriveStrings().split(""\x00""):
  if win32file.GetDriveType(logDrive) != win32file.DRIVE_REMOTE: continue
  # get server and share name here
</code></pre>

<p>Is there a  handy api call for this?</p>

<p>Thanks.</p>
"
591520,5222,2009-02-26T17:21:57Z,8,How can you programmatically tell the CPython interpreter to enter interactive mode when done?,"<p>If you invoke the cpython interpreter with the -i option, it will enter the interactive mode upon completing any commands or scripts it has been given to run.  Is there a way, within a program to get the interpreter to do this even when it has not been given -i? The obvious use case is in debugging by interactively inspecting the state when an exceptional condition has occurred.</p>
"
591776,33061,2009-02-26T18:15:48Z,2,pygame function appears to be being ignored,"<p>I'm building a relatively simple programme to test collision detection, it's all working fine at the moment except one thing, I'm trying to make the background colour change randomly, the only issue is that it appears to be completely skipping the function to do this;</p>

<pre><code>import pygame
from pygame.locals import *
import random, math, time, sys
pygame.init()

Surface = pygame.display.set_mode((800,600))

backgroundr = int(random.random()*255)+1
backgroundg = int(random.random()*255)+1
backgroundb = int(random.random()*255)+1

Circles = []
class Circle:
    def __init__(self):
        self.radius = int(random.random()*50) + 1
        self.x = random.randint(self.radius, 800-self.radius)
        self.y = random.randint(self.radius, 600-self.radius)
        self.speedx = 0.5*(random.random()+1.0)
        self.speedy = 0.5*(random.random()+1.0)
        self.r = int(random.random()*255)+1
        self.g = int(random.random()*255)+1
        self.b = int(random.random()*255)+1
##        self.mass = math.sqrt(self.radius)

for x in range(int(random.random()*30) + 1):
    Circles.append(Circle())

def CircleCollide(C1,C2):
    C1Speed = math.sqrt((C1.speedx**2)+(C1.speedy**2))
    XDiff = -(C1.x-C2.x)
    YDiff = -(C1.y-C2.y)
    if XDiff &gt; 0:
        if YDiff &gt; 0:
            Angle = math.degrees(math.atan(YDiff/XDiff))
            XSpeed = -C1Speed*math.cos(math.radians(Angle))
            YSpeed = -C1Speed*math.sin(math.radians(Angle))
        elif YDiff &lt; 0:
            Angle = math.degrees(math.atan(YDiff/XDiff))
            XSpeed = -C1Speed*math.cos(math.radians(Angle))
            YSpeed = -C1Speed*math.sin(math.radians(Angle))
    elif XDiff &lt; 0:
        if YDiff &gt; 0:
            Angle = 180 + math.degrees(math.atan(YDiff/XDiff))
            XSpeed = -C1Speed*math.cos(math.radians(Angle))
            YSpeed = -C1Speed*math.sin(math.radians(Angle))
        elif YDiff &lt; 0:
            Angle = -180 + math.degrees(math.atan(YDiff/XDiff))
            XSpeed = -C1Speed*math.cos(math.radians(Angle))
            YSpeed = -C1Speed*math.sin(math.radians(Angle))
    elif XDiff == 0:
        if YDiff &gt; 0:
            Angle = -90
        else:
            Angle = 90
        XSpeed = C1Speed*math.cos(math.radians(Angle))
        YSpeed = C1Speed*math.sin(math.radians(Angle))
    elif YDiff == 0:
        if XDiff &lt; 0:
            Angle = 0
        else:
            Angle = 180
        XSpeed = C1Speed*math.cos(math.radians(Angle))
        YSpeed = C1Speed*math.sin(math.radians(Angle))
    C1.speedx = XSpeed
    C1.speedy = YSpeed
    C1.r = int(random.random()*255)+1
    C1.g = int(random.random()*255)+1
    C1.b = int(random.random()*255)+1
    C2.r = int(random.random()*255)+1
    C2.g = int(random.random()*255)+1
    C2.b = int(random.random()*255)+1

def ColourCheck():
    checknumber = int(random.random()*50)+1
    if checknumber == 50:
        backgroundr = int(random.random()*255)+1
        backgroundg = int(random.random()*255)+1
        backgroundb = int(random.random()*255)+1

def Move():
    for Circle in Circles:
        Circle.x += Circle.speedx
        Circle.y += Circle.speedy
def CollisionDetect():
    for Circle in Circles:
        if Circle.x &lt; Circle.radius or Circle.x &gt; 800-Circle.radius:
            Circle.speedx *= -1
            Circle.r = int(random.random()*255)+1
            Circle.g = int(random.random()*255)+1
            Circle.b = int(random.random()*255)+1
        if Circle.y &lt; Circle.radius or Circle.y &gt; 600-Circle.radius:
            Circle.speedy *= -1
            Circle.r = int(random.random()*255)+1
            Circle.g = int(random.random()*255)+1
            Circle.b = int(random.random()*255)+1
    for Circle in Circles:
        for Circle2 in Circles:
            if Circle != Circle2:
                if math.sqrt(  ((Circle.x-Circle2.x)**2)  +  ((Circle.y-Circle2.y)**2)  ) &lt;= (Circle.radius+Circle2.radius):
                    CircleCollide(Circle,Circle2)
def Draw():
    Surface.fill((backgroundr,backgroundg,backgroundb))
    for Circle in Circles:
        pygame.draw.circle(Surface,(Circle.r,Circle.g,Circle.b),(int(Circle.x),int(600-Circle.y)),Circle.radius)
    pygame.display.flip()

def GetInput():
    keystate = pygame.key.get_pressed()
    for event in pygame.event.get():
        if event.type == QUIT or keystate[K_ESCAPE]:
            pygame.quit(); sys.exit()

def main():
    while True:
        ColourCheck()
        GetInput()
        Move()
        CollisionDetect()
        Draw()
if __name__ == '__main__': main()
</code></pre>

<p>it's the <code>ColourCheck</code> function that's being ignored, any ideas why?</p>
"
591839,20498,2009-02-26T18:30:45Z,10,Is there a python equivalent of the prefuse visualization toolkit?,"<p>The <a href=""http://prefuse.org/"" rel=""nofollow"">prefuse visualization toolkit</a> is pretty nice, but for Java.  I was wondering if there was something similar for python.  My primary interest is being able to navigate dynamic graphs.</p>
"
592143,65034,2009-02-26T19:54:47Z,2,In Python what is the preferred way to create and manage threads?,"<p>Python provides several methods to create threads. Which provides
the best API and the most control?</p>

<p>Thanks.</p>
"
592256,20840,2009-02-26T20:19:23Z,8,Fast way to determine if a PID exists on (Windows)?,"<p>I realize ""fast"" is a bit subjective so I'll explain with some context. I'm working on a Python module called <a href=""http://code.google.com/p/psutil/"" rel=""nofollow""><strong>psutil</strong></a> for reading process information in a cross-platform way. One of the functions is a <code>pid_exists(pid)</code> function for determining if a PID is in the current process list.</p>

<p>Right now I'm doing this the obvious way, using <a href=""http://msdn.microsoft.com/en-us/library/ms682629%28VS.85%29.aspx"" rel=""nofollow"">EnumProcesses()</a> to pull the process list, then interating through the list and looking for the PID. However, some simple benchmarking shows this is dramatically slower than the pid_exists function on UNIX-based platforms (Linux, OS X, FreeBSD) where we're using <code>kill(pid, 0)</code> with a 0 signal to determine if a PID exists. Additional testing shows it's EnumProcesses that's taking up almost all the time.</p>

<p>Anyone know a faster way than using EnumProcesses to determine if a PID exists? I tried <a href=""http://msdn.microsoft.com/en-us/library/ms684320%28VS.85%29.aspx"" rel=""nofollow"">OpenProcess()</a> and checking for an error opening the nonexistent process, but this turned out to be over 4x slower than iterating through the EnumProcesses list, so that's out as well. Any other (better) suggestions?</p>

<p><strong>NOTE</strong>: This is a Python library intended to avoid third-party lib dependencies like pywin32 extensions. I need a solution that is faster than our current code, and that doesn't depend on pywin32 or other modules not present in a standard Python distribution.</p>

<p><strong>EDIT</strong>: To clarify - we're well aware that there are race conditions inherent in reading process iformation. We raise exceptions if the process goes away during the course of data collection or we run into other problems. The pid_exists() function isn't intended to replace proper error handling.</p>

<p><strong>UPDATE</strong>: Apparently my earlier benchmarks were flawed - I wrote some simple test apps in C and EnumProcesses consistently comes out slower and OpenProcess (in conjunction with GetProcessExitCode in case the PID is valid but the process has stopped) is actually much <em>faster</em> not slower.</p>
"
592332,NA,2009-02-26T20:37:30Z,13,Any reasons not to use SQLObject over SQLAlchemy?,"<p>I don't expect to need much more than basic CRUD type functionality. I know that SQLAlchemy is more flexible, but the syntax etc of sqlobject just seem to be a bit easier to get up and going with.</p>
"
592404,18811,2009-02-26T20:55:38Z,3,PyQt4: Databinding?,"<p>Coming from the .NET world over to Python and PyQt4. Was wondering if anyone is familiar with any functionality that would allow me to bind data to Qt widgets? For example (using sqlalchemy for data):</p>

<pre><code>gems = session.query(Gem).all()
list = QListWidget()
list.datasource = gems
</code></pre>

<p>Is such a thing possible?</p>
"
592910,71641,2009-02-26T23:21:39Z,3,Parsing an HTML file with selectorgadget.com,"<p>How can I use beautiful soup and <a href=""http://selectorgadget.com"" rel=""nofollow"">selectorgadget</a> to scrape a website. For example I have a website - <a href=""http://www.newegg.com/Product/Product.aspx?Item=N82E16819115017"" rel=""nofollow"">(a newegg product)</a> and I would like my script to return all of the specifications of that product (click on SPECIFICATIONS) by this I mean - Intel, Desktop, ......, 2.4GHz, 1066Mhz, ...... , 3 years limited. </p>

<p>After using selectorgadget I get the string- 
.desc</p>

<p>How do I use this?</p>

<p>Thanks :)</p>
"
592931,24587,2009-02-26T23:28:09Z,42,Why doesn't Python have static variables?,"<p>There is a <a href=""http://stackoverflow.com/questions/460586/simulating-a-local-static-variable-in-python"">questions asking how to simulate static variables in python</a>.</p>

<p>Also, on the web one can find many different solutions to create static variables. (Though I haven't seen one that I like yet.)</p>

<p>Why doesn't Python support static variables in methods? Is this considered unpythonic or has it something to do with Python's syntax?</p>

<p><strong>Edit:</strong></p>

<p>I asked specifically about the <em>why</em> of the design decision and I haven't provided any code example because I wanted to avoid explanation to simulate static variables.</p>
"
593685,58737,2009-02-27T06:10:16Z,7,Python for mathematics students?,"<p>I need to deliver one and half hour seminar on programming for students at the department of mathematics. </p>

<p>I have chosen python  as language.</p>

<ol>
<li>What should be content of my presentation ?</li>
<li>What are good resources available ?</li>
<li>What is necessity of programming for maths students?</li>
<li>How will knowledge of programming will help them?</li>
</ol>

<p>Thank you !!!</p>

<p>NOTE: I know <a href=""http://stackoverflow.com/questions/488502/best-language-to-program-some-math-free-fast-easy-cool-etc"">here</a> is one post but it doesn't solve my problem.</p>
"
593925,NA,2009-02-27T08:07:21Z,3,How do I find images with a similar color using Python and PIL?,"<p>I have a lot of images in a folder, and I would like to find images with a similar color to a pre chosen image.</p>

<p>I would like to be able to do something like: </p>

<pre><code>python find_similar.py sample.jpg
</code></pre>

<p>and have that return something like:</p>

<pre><code>234324.jpg
55.jpg
9945.jpg
345434.jpg
104.jpg
</code></pre>

<p>Is this doable?</p>
"
594266,1856916,2009-02-27T10:42:07Z,26,Equation parsing in Python,"<p>How can I (easily) take a string such as <code>""sin(x)*x^2""</code> which might be entered by a user at runtime and produce a Python function that could be evaluated for any value of <code>x</code>? </p>
"
594442,59024,2009-02-27T11:47:51Z,15,Choosing between different switch-case replacements in Python - dictionary or if-elif-else?,"<p>I recently read the questions that recommend against using switch-case statements in languages that do support it. As far as Python goes, I've seen a number of switch case replacements, such as:  </p>

<ol>
<li>Using a dictionary (Many variants)  </li>
<li>Using a Tuple  </li>
<li>Using a function decorator (<a href=""http://code.activestate.com/recipes/440499/"">http://code.activestate.com/recipes/440499/</a>)  </li>
<li>Using Polymorphism (Recommended method instead of type checking objects)  </li>
<li>Using an if-elif-else ladder  </li>
<li>Someone even recommended the Visitor pattern (Possibly Extrinsic)  </li>
</ol>

<p>Given the wide variety of options, I am having a bit of difficulty deciding what to do for a particular piece of code. I would like to learn the criteria for selecting one of these methods over the other in general. In addition, I would appreciate advice on what to do in the specific cases where I am having trouble deciding (with an explanation of the choice).</p>

<p>Here is the specific problem:<br />
(1)  </p>

<pre><code>def _setCurrentCurve(self, curve):
        if curve == ""sine"":
            self.currentCurve =  SineCurve(startAngle = 0, endAngle = 14,
            lineColor = (0.0, 0.0, 0.0), expansionFactor = 1,
            centerPos = (0.0, 0.0))
        elif curve == ""quadratic"":
            self.currentCurve = QuadraticCurve(lineColor = (0.0, 0.0, 0.0))
</code></pre>

<p>This method is called by a <strong>qt-slot</strong> in response to choosing to draw a curve from a menu. The above method will contain a total of 4-7 curves once the application is complete. Is it justified to use a throw away dictionary in this case? Since the most obvious way to do this is if-elif-else, should I stick with that? I have also consider using **kargs here (with a friends help) since all the curve classes use **kargs...</p>

<p>(2)<br />
This second piece of code is a <strong>qt-slot</strong> that is called when the user changes a property of a curve. Basically the slot takes the data from the gui (spinBox) and puts it in an instance variable of the appropriate curve class. In this case, I again have the same question - should I use a dict?</p>

<p>Here is the aforementioned slot- </p>

<pre><code>def propertyChanged(self, name, value):
    """"""A Qt slot, to react to changes of SineCurve's properties.""""""
    if name == ""amplitude"":
        self.amplitude = value
    elif name == ""expansionFactor"":
        self.expansionFactor = value
    elif name == ""startAngle"":
        self.startAngle = value
    elif name == ""endAngle"":
        self.endAngle = value
</code></pre>

<p>For reference, here is the code for connecting to the above slot -  </p>

<pre><code>def _connectToPage(self, page):
    for connectionData in page.getConnectibles():
        self.connect(connectionData[""object""],
                    SIGNAL(connectionData[""signal""]),
                    lambda value, name = connectionData[""property""]:\
                        self.currentCurve.propertyChanged(name, value))
        self.connect(connectionData[""object""],
                    SIGNAL(connectionData[""signal""]),
                    self.hackedDisplayArea.update)
</code></pre>

<p><strong>Note</strong> - The self.endAngle etc. are initialized in the constructor.</p>

<p>As far as I know, the reasons for choosing a dict is for fast lookup. When is that warranted? when I have 100 cases or more? Is it a good idea to keep building and throwing away a dictionary each time the function is called? If I build a dict for this purpose outside a function, should I check If it is needed elswhere? What happens if it is not needed elsewhere?</p>

<p>My question is what is the best-practice if there is one? What is the best/most elegant way to go about things? Put in yet another way, when to use <strong>if-elif-else</strong>, when to use each of the other options?</p>
"
594471,6063,2009-02-27T12:03:35Z,1,Console2 and Ipython output issues,"<p>I've been using Ipython for my command line on XP for, oh... ages! However, being a sucker for the eye-candy I always wanted the console window to be a little cooler e.g. like a Terminal window on Linux.</p>

<p>Today I found <a href=""http://sourceforge.net/projects/console/"" rel=""nofollow"">Console2</a> and my heart was filled with joy...</p>

<p>However, there is something rotton in the state of large / multi-line output.</p>

<p>When I try something that might produce a large multi-line output e.g. an alias command or just a large list or dict, I get this kind of thing...</p>

<pre><code>[c:/]|12&gt; alias
Total number of aliases: 860
     &lt;12&gt;
</code></pre>

<p>I can get round it easily enough e.g.</p>

<pre><code>[c:/]|19&gt; aliases=_
[c:/]|20&gt; pprint.pprint(aliases)
[('', '.up4vinst'),
 ('a2p', 'a2p'),
 ('accevent32', 'accevent32'),
 ('accevent9x', 'accevent9x'),
 ('accexplorer32', 'AccExplorer32'),
 ('accexplorer9x', 'AccExplorer9x'),
 ('accwiz', 'accwiz'),
 etc...
</code></pre>

<p>But it is inconvenient. I'm not sure if the fault is with Console2 or with Ipython, as I have seen this issue with large data lists with a standard cmd shell as well.</p>

<p>Anyone got any ideas about how to 'fix' this?</p>

<p>Hmmm! So some further investigation shows that there is a limit to the size of output that IPython will handle...</p>

<p>I wrote this very quick function to generate a list containing a specified number of characters...</p>

<pre><code>def big_list( size ):
    my_string = ""abcdefghigklmnopqrstuvwzyzABCDEFGHIJKLMNOPQRSTUVWXYZ""
    fricking_big_list=[]
    step_size = len(my_string)
    for x in xrange(step_size, size, step_size):
        fricking_big_list.append(my_string)

    remainder= size - ((size / step_size) * step_size)
    if remainder:
        fricking_big_list.append(my_string[0:remainder])

    return fricking_big_list
</code></pre>

<p>I ran it from the command line, like so...</p>

<pre><code>[c:/]|206&gt; result = big_list(17909)
[c:/]|207&gt; result
     &lt;207&gt;
[c:/]|208&gt; len(result)
     &lt;208&gt; 345
</code></pre>

<p>... and with a total of 17909 characters in the list, it won't display 'result'. However, if I have just one less char...</p>

<pre><code>[c:/]|209&gt; result = big_list(17908)
[c:/]|210&gt; result
     &lt;210&gt;
['abcdefghigklmnopqrstuvwzyzABCDEFGHIJKLMNOPQRSTUVWXYZ',
 'abcdefghigklmnopqrstuvwzyzABCDEFGHIJKLMNOPQRSTUVWXYZ',
.
. [snipped]
.
 'abcdefghigklmnopqrstuvwzyzABCDEFGHIJKLMNOPQRSTUVWXYZ',
 'abcdefghigklmnopqrstuvwzyzABCDEFGHIJKLMNOPQRSTUVWXYZ',
 'abcdefghigklmnopqrst']
[c:/]|211&gt;
</code></pre>

<p>Then Ipython will display the 'result' var.</p>
"
594545,45629,2009-02-27T12:24:39Z,7,Email body is a string sometimes and a list sometimes. Why?,"<p>My application is written in python. What I am doing is I am running a script on each email received by postfix and do something with the email content. Procmail is responsible for running the script taking the email as input. The problem started when I was converting the input message(may be text) to email_message object(because the latter comes in handy). I am using email.message_from_string (where email is the default email module, comes with python).</p>

<pre>
<code>
import email
message = email.message_from_string(original_mail_content)
message_body = message.get_payload()
</code>
</pre>

<p>This message_body is sometimes returning a list[email.message.Message instance,email.message.Message instance] and sometime returning a string(actual body content of the incoming email). Why is it. And even I found one more observation. When I was browsing through the email.message.Message.get_payload() docstring, I found this..<br/>
""""""
The payload will either be a list object or a string.If you mutate
the list object, you modify the message's payload in place.....""""""  </p>

<p>So how do I have generic method to get the body of email through python? Please help me out.</p>
"
594856,69746,2009-02-27T13:58:53Z,5,Make a python property with the same name as the class member name,"<p>Is it possible in python to create a property with the same name as the member variable name of the class. e.g.</p>

<pre><code>Class X:
    ...
    self.i = 10 # marker
    ...
    property(fget = get_i, fset = set_i)
</code></pre>

<p>Please tell me how I can do so. Because if I do so, for the statement at marker I get stack overflow for the assingm</p>
"
595114,42127,2009-02-27T15:01:59Z,8,How to load an RSA key from a PEM file and use it in python-crypto,"<p>I have not found a way to load an RSA private key from a PEM file to use it in python-crypto (signature).</p>

<p>python-openssl can load a PEM file but the PKey object can't be used to retrieved key information (p, q, ...) to use with Crypto.PublicKey.construct().</p>
"
595290,69746,2009-02-27T15:46:32Z,3,Does PyS60 has a reliable garbage collection?,"<p>I have heard it many times that garbage collection in PyS60 is not up to to the mark. This imposes a lot of limits on writing cleaner code. Can I at least rely that the non cyclic references are cleaned up after a function exists.</p>
"
595296,69746,2009-02-27T15:48:37Z,3,Does the stack limit of Symbian also apply to PyS60?,"<p>Symbian has a stack limit of 8kB. Does this also apply to the function calling in PyS60 apps?</p>
"
595374,437,2009-02-27T16:06:36Z,91,What's the Python function like sum() but for multiplication? product()?,"<p>Python's <a href=""http://docs.python.org/library/functions.html#sum""><code>sum()</code></a> function returns the sum of numbers in an iterable.</p>

<pre><code>sum([3,4,5]) == 3 + 4 + 5 == 12
</code></pre>

<p>I'm looking for the function that returns the product instead.</p>

<pre><code>somelib.somefunc([3,4,5]) == 3 * 4 * 5 == 60
</code></pre>

<p>I'm pretty sure such a function exists, but I can't find it.</p>
"
596190,72001,2009-02-27T19:13:08Z,0,wxPython toolbar help,"<p>I am new to Python. I am writing an application using wxPython and I currently my code that generates a toolbar looks like this:</p>

<pre><code>class Window(wx.Frame)
def __init__(self, parent, plot):
    wx.Frame.__init__(self, parent, wx.ID_ANY, ""Name"", size =(900, 600))
    self.Centre()

    self.toolbar = self.CreateToolBar(style=(wx.TB_HORZ_LAYOUT | wx.TB_TEXT))
    self.toolbar.SetToolBitmapSize((32,32))
    self.toolbar.AddLabelTool(3, '', wx.Bitmap('GUI/icons/fileopen.png'))
    self.toolbar.AddLabelTool(3, '', wx.Bitmap('GUI/icons/filesave.png'))
    self.toolbar.AddSeparator()
    self.toolbar.Realize()
</code></pre>

<p>I am trying to clean up the code a bit and I want the toolbar to have its own class so when I want to create a toolbar, I simply call it something like this:</p>

<pre><code>toolbar = Toolbar()
</code></pre>

<p>My question is how can I rewrite it so it works like that? Currently my code looks like this:</p>

<pre><code>class Toolbar():
    def __init__(self):
        self.toolbar = self.CreateToolBar(style=(wx.TB_HORZ_LAYOUT | wx.TB_TEXT))
        self.toolbar.SetToolBitmapSize((32,32))
        self.toolbar.AddLabelTool(3, '', wx.Bitmap('GUI/icons/fileopen.png'))
        self.toolbar.AddLabelTool(3, '', wx.Bitmap('GUI/icons/filesave.png'))
        self.toolbar.AddSeparator()
        self.toolbar.Realize()
</code></pre>

<p>I am not quite sure how 'self' works. Do I need to rewrite the <strong>init</strong> function? How do I fix it? Any help is greatly appreciated. Thanks</p>
"
596729,NA,2009-02-27T21:20:50Z,28,How do I use python for web development without relying on a framework?,"<p>I know the various frameworks have their benefits, but I personally want my web development in python to be as straight-forward as possible: less writing to the framework, more writing <em>python</em>.</p>

<p>The only thing I have found so far that lets me do this in the most obvious way possible is <a href=""http://webpy.org/"">web.py</a> but I have slight concerns on its performance.</p>

<p>For those of you using nginx(or another flavour)+mod_wsgi+web.py... how's performance? Can it be improved further?</p>

<p>For those of you who have used web.py, liked the idea and went on to write something better or found something better... care to point me to the source?</p>

<p>I'd like to hear about all the conspicuous, minimal yet powerful approaches.</p>
"
596886,59568,2009-02-27T22:15:25Z,4,AttributeError: 'str' object has no attribute 'readline',"<p><strong>Update: My current question is how can I get my code to read to the EOF starting from the beginning with each new search phrase.</strong></p>

<p>This is an assignment I am doing and currently stuck on. Mind you this is a beginner's programming class using Python.</p>

<pre><code>jargon = open(""jargonFile.txt"",""r"")
searchPhrase = raw_input(""Enter the search phrase: "")
while searchPhrase != """":
    result = jargon.readline().find(searchPhrase)
    if result == -1:
        print ""Cannot find this term.""
    else:
        print result
    searchPhrase = raw_input(""Enter the search phrase: "")
jargon.close()
</code></pre>

<p>The assignment is to take a user's searchPhrase and find it in a file (jargonFile.txt) and then have it print the result (which is the line it occured and the character occurence). I will be using a counter to find the line number of the occurence but I will implement this later. For now my question is the error I am getting. I cann't find a way for it to search the entire file.</p>

<p>Sample run: </p>

<pre><code>Enter the search phrase: dog
16
Enter the search phrase: hack
Cannot find this term.
Enter the search phrase:
</code></pre>

<p>""dog"" is found in the first line however it is also found in other lines of the jargonFile (multiple times as a string) but it is only showing the first occurence in the first line. The string hack is found numerous times in the jargonFile but my code is setup to only search the first line. How may I go about solving this problem?</p>

<p>If this is not clear enough I can post up the assignment if need be.</p>
"
597058,59753,2009-02-27T23:20:56Z,10,xml.dom.minidom: Getting CDATA values,"<p>I'm able to get the value in the image tag (see XML below), but not the Category tag. The difference is one is a CDATA section and the other is just a string.  Any help would be appreciated.</p>

<pre><code>from xml.dom import minidom

xml = """"""&lt;?xml version=""1.0"" ?&gt;
&lt;ProductData&gt;
    &lt;ITEM Id=""0471195""&gt;
    	&lt;Category&gt;
            &lt;![CDATA[Homogenizers]]&gt;    	
        &lt;/Category&gt;
    	&lt;Image&gt;
    		0471195.jpg
    	&lt;/Image&gt;
    &lt;/ITEM&gt;
    &lt;ITEM Id=""0471195""&gt;
    	&lt;Category&gt;
            &lt;![CDATA[Homogenizers]]&gt;    	
        &lt;/Category&gt;
    	&lt;Image&gt;
    		0471196.jpg
    	&lt;/Image&gt;
    &lt;/ITEM&gt;
&lt;/ProductData&gt;
""""""

bad_xml_item_count = 0
data = {}
xml_data = minidom.parseString(xml).getElementsByTagName('ProductData')
parts = xml_data[0].getElementsByTagName('ITEM')
for p in parts:
    try:
        part_id = p.attributes['Id'].value.strip()
    except(KeyError):
        bad_xml_item_count += 1
        continue
    if not part_id:
        bad_xml_item_count += 1
        continue
    part_image = p.getElementsByTagName('Image')[0].firstChild.nodeValue.strip()
    part_category = p.getElementsByTagName('Category')[0].firstChild.data.strip()
    print '\t'.join([part_id, part_category, part_image])
</code></pre>
"
597199,37984,2009-02-28T00:34:11Z,14,Converting an object into a subclass in Python?,"<p>Lets say I have a library function that I cannot change that produces an object of class A, and I have created a class B that inherits from A. </p>

<p>What is the most straightforward way of using the library function to produce an object of class B?</p>

<p>edit- I was asked in a comment for more detail, so here goes:</p>

<p>PyTables is a package that handles hierarchical datasets in python. The bit I use most is its ability to manage data that is partially on disk. It provides an 'Array' type which only comes with extended slicing, but I need to select arbitrary rows. Numpy offers this capability - you can select by providing a boolean array of the same length as the array you are selecting from. Therefore, I wanted to subclass Array to add this new functionality.</p>

<p>In a more abstract sense this is a problem I have considered before. The usual solution is as has already been suggested- Have a constructor for B that takes an A and additional arguments, and then pulls out the relevant bits of A to insert into B. As it seemed like a fairly basic problem, I asked to question to see if there were any standard solutions I wasn't aware of.</p>
"
597225,4883,2009-02-28T00:45:31Z,5,Python: Getting an IPv6 socket to receive packets destined for the Subnet-Routers Anycast address,"<p>How do you get a socket to receive packets destined for the IPv6 Subnet-Routers Anycast address?</p>

<p>I haven't been able to find any informationn on how to do this.</p>

<p>In a fit of desparation, I've tried using socket.setsockopt as you would to join a multicast group:</p>

<pre><code># 7 is the interface number 
s = socket(AF_INET6, SOCK_DGRAM)
packed_iface_num = struct.pack(""I"", 7) 
group = inet_pton(AF_INET6, 'fd36:d00d:d00d:47cb::') + packed_iface_num

# socket.error: (22, 'Invalid argument')
s.setsockopt(IPPROTO_IPV6, IPV6_JOIN_GROUP,  group)
</code></pre>

<p>And also using bind</p>

<pre><code># socket.error: (99, 'Cannot assign requested address')
s.bind(('fd36:773e:6b4c:47cb::', 9876))
</code></pre>

<p>As expected, neither of these worked.  Is there a way to do this?</p>
"
597289,13055,2009-02-28T01:18:53Z,1,Python: efficiently join chunks of bytes into one big chunk?,"<p>I'm trying to jury-rig the <a href=""http://developer.amazonwebservices.com/connect/entry.jspa?externalID=134"" rel=""nofollow"">Amazon S3 python library</a> to allow chunked handling of large files. Right now it does a ""self.body = http_response.read()"", so if you have a 3G file you're going to read the entire thing into memory before getting any control over it.</p>

<p>My current approach is to try to keep the interface for the library the same but provide a callback after reading each chunk of data. Something like the following:</p>

<pre><code>data = []
while True:
    chunk = http_response.read(CHUNKSIZE)
    if not chunk:
        break
    if callback:
        callback(chunk)
    data.append(chunk)
</code></pre>

<p>Now I need to do something like:</p>

<pre><code>self.body = ''.join(data)
</code></pre>

<p>Is <em>join</em> the right way to do this or is there another (better) way of putting all the chunks together?</p>
"
597348,41713,2009-02-28T01:56:26Z,0,"FOSS HTML to PDF in Python, .Net or command line?","<p>I have google as much as I possible, checked stackoverflow several times, and yet I can not find a good <strong>html to pdf converter</strong> that can handle css.  Is there a free and open source solution (even for commercial usage)?  There are many solutions, with huge variety of price ranges, but I was looking for something open source and free.  I have tried PISA for Python and it works fairly well, but is not free for commercial usage.  Is there anything for .Net?  I have not had success with iTextSharp.  </p>
"
597369,68185,2009-02-28T02:13:08Z,9,How to create MS Paint clone with Python and pygame,"<p>As I see it, there are two ways to handle mouse events to draw a picture.</p>

<p>The first is to detect when the mouse moves and draw a line to where the mouse is, shown <a href=""http://www.cs.iupui.edu/~aharris/pygame/ch05/paint.py"">here</a>.  However, the problem with this is that  with a large brush size, many gaps appear between each ""line"" that is not straight since it is using the line's stroke size to create thick lines.</p>

<p>The other way is to draw circles when the mouse moves as is shown <a href=""http://www.ida.liu.se/~ETE257/timetable/LecturePythonPygame2.html"">here</a>.  The problem with this is that gaps appear between each circle if the mouse moves faster than the computer detects mouse input.</p>

<p>Here's a screenshot with my issues with both:</p>

<p><img src=""http://i.stack.imgur.com/7ILzZ.png"" alt=""http://imgur.com/32DXN.jpg""></p>

<p>What is the best way to implement a brush like MS Paint's, with a decently-big brush size with no gaps in the stroke of the line or no gaps between each circle?</p>
"
597476,38666,2009-02-28T04:06:31Z,6,How to concisely cascade through multiple regex statements in Python,"<p>My dilemma: I'm passing my function a string that I need to then perform numerous regex manipulations on.  The logic is if there's a match in the first regex, do one thing. If no match, check for a match with the second and do something else, if not check the third, and so forth.  I could do something like this:</p>

<pre><code>if re.match('regex1', string):
    match = re.match('regex1', string)
    # Manipulate match.group(n) and return
elif re.match('regex2', string):
    match = re.match('regex2', string)
    # Do second manipulation
[etc.]
</code></pre>

<p>However, this feels unnecessarily verbose, and usually when that's the case it means there's a better way that I'm either overlooking or don't yet know about.</p>

<p>Does anyone have a suggestion for a better way to do this (better from a code-appearance standpoint, a memory usage standpoint, or both)?</p>
"
597483,19922,2009-02-28T04:21:10Z,2,Why Jython behaves inconsistently when tested with PyStone?,"<p>I've been playing recently with Jython and decided to do some quick and dirty benchmarking with pystone. In order to have a reference, I first tested cPython 2.6, with an increasing numbers of loops (I thought this may be relevant as Jython should start to profit from the JIT only after some time).</p>

<pre><code>(richard garibaldi):/usr/local/src/pybench% python ~/tmp/pystone.py 
Pystone(1.1) time for 50000 passes = 1.04
This machine benchmarks at 48076.9 pystones/second

(richard garibaldi):/usr/local/src/pybench% python ~/tmp/pystone.py 500000 
Pystone(1.1) time for 500000 passes = 10.33
This machine benchmarks at 48402.7 pystones/second

(richard garibaldi):/usr/local/src/pybench% python ~/tmp/pystone.py 1000000 
Pystone(1.1) time for 1000000 passes = 19.6
This machine benchmarks at 51020.4 pystones/second
</code></pre>

<p>As you can see, cPython behaves consistently: the time it takes to complete the test increases linearly to the number of loops. Knowing this, I started testing Jython.</p>

<pre><code>(richard garibaldi):/usr/local/src/pybench% jython ~/tmp/pystone.py 
Pystone(1.1) time for 50000 passes = 2.29807
This machine benchmarks at 21757.4 pystones/second

(richard garibaldi):/usr/local/src/pybench% jython ~/tmp/pystone.py 500000 
Pystone(1.1) time for 500000 passes = 10.931
This machine benchmarks at 45741.4 pystones/second


(richard garibaldi):/usr/local/src/pybench% jython ~/tmp/pystone.py 1000000
Pystone(1.1) time for 1000000 passes = 107.183
This machine benchmarks at 9329.86 pystones/second
</code></pre>

<p>During the first run Jython runs rather lousily in comparison to its C brother. When increased the number of loops it started feeling better, coming close to cPython, like my initial hypothesis predicted. Note that the number of loops increased 10 times, but it took Jython only about 5 times longer to complete them. So, as you imagine, I was expecting that Jython would really rock in the final test. To my great disappointment, however, it did really bad: more than twice slower than in the initial run.</p>

<p>What are your hypotheses: why does Jython behave such an inconsistent manner? Could it be that GC is kicking in at some moment, and taking a lot of time? I've looked at PyStone's code and garbage collection doesn't seem to be turned off, but I would expect Java's GC to be at least as good as Python's... Do you think this slowing down is permanent, or it will go away at some point after increasing the number of loops? How shall Jython behave in a really long running processes?</p>

<p>EDIT: unfortunately, I get <code>java.lang.OutOfMemoryError</code> if I increase the number of loops to 2 million...</p>

<p>(Of course, Jython is still beta, so it should get better in the final release.)</p>

<p>I am using Jython 2.5b1 (trunk:5903:5905, Jan 9 2009, 16:01:29), Java(TM) SE Runtime Environment (build 1.6.0_07-b06-153) and Java HotSpot(TM) 64-Bit Server VM (build 1.6.0_07-b06-57, mixed mode) on MacOS X 10.5.</p>

<p>Thanks for your answers.</p>
"
597572,4491,2009-02-28T05:47:08Z,0,How do I create a windows service with Python,"<p><strong>This is a duplicate of <a href=""http://stackoverflow.com/questions/32404/can-i-run-a-python-script-as-a-service-in-windows-how"">this question</a>. Please close.</strong></p>

<blockquote>
  <p>I really need my python program to run
  as a windows service. How can I do
  this?</p>
</blockquote>
"
598019,61855,2009-02-28T13:23:42Z,1,How can i use TurboMail 3 together with TurboGears 2,"<p>Hy,
I want to use TurboMail3 (<a href=""http://www.python-turbomail.org/wiki/3.0/BetaRelease"" rel=""nofollow"">website</a>) together with a TurboGears 2(<a href=""http://www.turbogears.org/2.0/"" rel=""nofollow"">website</a>) project. Which files to I have to modify to include TurboMail into my TurboGears project? Everything I find on the web is for TurboMail2 and TurboGears1. </p>

<p>The TurboMail Documentation states that there actually is a TG2 integration but I never found documentation for it.</p>

<p>Thanks!</p>
"
598077,69348,2009-02-28T14:33:50Z,102,Why does @foo.setter in Python not work for me?,"<p>So, I'm playing with decorators in Python 2.6, and I'm having some trouble getting them to work. Here is my class file:</p>

<pre><code>class testDec:

    @property
    def x(self): 
        print 'called getter'
        return self._x

    @x.setter
    def x(self, value): 
        print 'called setter'
        self._x = value
</code></pre>

<p>What I thought this meant is to treat <code>x</code> like a property, but call these functions on get and set. So, I fired up IDLE and checked it:</p>

<pre><code>&gt;&gt;&gt; from testDec import testDec
from testDec import testDec
&gt;&gt;&gt; t = testDec()
t = testDec()
&gt;&gt;&gt; t.x
t.x
called getter
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
  File ""testDec.py"", line 18, in x
    return self._x
AttributeError: testDec instance has no attribute '_x'
&gt;&gt;&gt; t.x = 5
t.x = 5
&gt;&gt;&gt; t.x
t.x
5
</code></pre>

<p>Clearly the first call works as expected, since I call the getter, and there is no default value, and it fails. OK, good, I understand. However, the call to assign <code>t.x = 5</code> seems to create a new property <code>x</code>, and now the getter doesn't work!</p>

<p>What am I missing?</p>
"
598157,70871,2009-02-28T15:30:19Z,22,Cheap exception handling in Python?,"<p>I read in an earlier <a href=""http://stackoverflow.com/questions/576988/python-specific-antipatterns/577731#577731"">answer</a> that exception handling is cheap in Python so we shouldn't do pre-conditional checking.</p>

<p>I have not heard of this before, but I'm relatively new to Python. Exception handling means a dynamic call and a static return, whereas an <code>if</code> statement is static call, static return.</p>

<p>How can doing the checking be bad and the <code>try-except</code> be good, seems to be the other way around. Can someone explain this to me?</p>
"
598299,24608,2009-02-28T16:59:37Z,12,When is it (not) appropriate to bundle dependencies with an application?,"<p><strong>Summary</strong></p>

<p>I recently had a conversation with the creator of a framework that one of my applications depends on.  During that conversation he mentioned as a sort of aside that it would make my life simpler if I just bundled his framework with my application and delivered to the end user a version that I knew was consistent with my code.  Intuitively I have always tried to avoid doing this and, in fact, I have taken pains to segment my own code so that portions of it could be redistributed without taking the entire project (even when there was precious little chance anyone would ever reuse any of it).  However, after mulling it over for some time I have not been able to come up with a particularly good reason <em>why</em> I do this.  In fact, now that I have thought about it, I'm seeing a pretty compelling case to bundle <em>all</em> my smaller dependencies.  I have come up with a list of pros and cons and I'm hoping someone can point out anything that I'm missing.</p>

<p><strong>Pros</strong></p>

<ul>
<li>Consistency of versions means easier
testing and troubleshooting.</li>
<li>Application may reach a wider
audience since there appear to be
fewer components to install.</li>
<li>Small tweaks to the dependency can
more easily be made downstream and
delivered with the application,
rather than waiting for them to
percolate into the upstream code base.</li>
</ul>

<p><strong>Cons</strong></p>

<ul>
<li>More complex packaging process to include
dependencies.</li>
<li>User may end up with multiple copies
of a dependency on their machine.</li>
<li>Per bortzmeyer's response, there are potential security concerns with not being able to upgrade individual components.</li>
</ul>

<p><strong>Notes</strong></p>

<p>For reference, my application is written in Python and the dependencies I'm referencing are ""light"", by which I mean small and not in very common use.  (So they do not exist on all machines or even in all repositories.)  And when I say ""package with"" my application, I mean distribute under my own source tree, not install with a script that resides inside my package, so there would be no chance of conflicting versions.  I am also developing solely on Linux so there are no Windows installation issues to worry about.</p>

<p>All that being said, I am interested in hearing any thoughts on the broader (language-independent) issue of packaging dependencies as well.  Is there something I am missing or is this an easy decision that I am just over-thinking?</p>

<p><strong>Addendum 1</strong></p>

<p>It is worth mentioning that I am also quite sensitive to the needs of downstream packagers.  I would like it to be as straightforward as possible to wrap the application up in a distribution-specific Deb or RPM.</p>
"
598398,31319,2009-02-28T18:06:20Z,32,Searching a list of objects in Python,"<p>Let's assume I'm creating a simple class to work similar to a C-style struct, to just hold data elements.  I'm trying to figure out how to search the list of objects for objects with a certain attribute.  Below is a trivial example to illustrate what I'm trying to do.</p>

<p>For instance:</p>

<pre><code>class Data:
    pass

myList = []

for i in range(20):
    data = Data()
    data.n = i
    data.n_squared = i * i
    myList.append(data)
</code></pre>

<p>How would I go about searching the myList list to determine if it contains an element with n == 5?</p>

<p>I've been Googling and searching the Python docs, and I think I might be able to do this with a list comprehension, but I'm not sure.  I might add that I'm having to use Python 2.4.3 by the way, so any new gee-whiz 2.6 or 3.x features aren't available to me.</p>
"
598569,NA,2009-02-28T19:55:21Z,3,Calling function defined in exe,"<p>I need to know a way to call a function defined in the exe from a python script.
I know how to call entire exe from py file.</p>
"
598577,2147,2009-02-28T20:00:03Z,4,What SHOULDN'T Django's admin interface be used for?,"<p>I've been applying Django's automatic administration capabilities to some applications who had previously been very difficult to administer.  I'm thinking of a lot of ways to apply it to other applications we use (including using it to replace some internal apps altogether).  Before I go overboard though, is there anything in particular I <em>shouldn't</em> use it for?</p>
"
598605,26763,2009-02-28T20:16:28Z,20,AppEngine: Query datastore for records with <missing> value,"<p>I created a new property for my db model in the Google App Engine Datastore.</p>

<p>Old:</p>

<pre><code>class Logo(db.Model):
  name = db.StringProperty()
  image = db.BlobProperty()
</code></pre>

<p>New:</p>

<pre><code>class Logo(db.Model):
  name = db.StringProperty()
  image = db.BlobProperty()
  is_approved = db.BooleanProperty(default=False)
</code></pre>

<p>How to query for the Logo records, which to not have the 'is_approved' value set?
I tried  </p>

<pre><code>logos.filter(""is_approved = "", None)
</code></pre>

<p>but it didn't work.
In the Data Viewer the new field values are displayed as .</p>
"
598626,44996,2009-02-28T20:28:37Z,2,Where is the function get_example_data in matplotlib? It seems to be missing but its in examples/tutorials,"<p>Looking at this tutorial here: <a href=""http://matplotlib.sourceforge.net/plot%5Fdirective/mpl%5Fexamples/pylab%5Fexamples/finance%5Fwork2.py"" rel=""nofollow"">link text</a> it references matplotlib.get_example_data('goog.npy'). I get an error when I run this, and furthermore I can't even find the mpl-data/ folder in my macosx installation of matplot lib when searching using Spotlight. Any idea what this function is now called?</p>
"
598668,29772,2009-02-28T20:54:02Z,4,External classes in Python,"<p>I'm just beginning Python, and I'd like to use an external RSS class.  Where do I put that class and how do I import it?  I'd like to eventually be able to share python programs.</p>
"
598722,42974,2009-02-28T21:33:20Z,14,How to match a text node then follow parent nodes using XPath,"<p>I'm trying to parse some HTML with XPath. Following the simplified XML example below, I want to match the string 'Text 1', then grab the contents of the relevant <code>content</code> node.</p>

<pre><code>&lt;doc&gt;
    &lt;block&gt;
        &lt;title&gt;Text 1&lt;/title&gt;
        &lt;content&gt;Stuff I want&lt;/content&gt;
    &lt;/block&gt;

    &lt;block&gt;
        &lt;title&gt;Text 2&lt;/title&gt;
        &lt;content&gt;Stuff I don't want&lt;/content&gt;
    &lt;/block&gt;
&lt;/doc&gt;
</code></pre>

<p>My Python code throws a wobbly:</p>

<pre><code>&gt;&gt;&gt; from lxml import etree
&gt;&gt;&gt;
&gt;&gt;&gt; tree = etree.XML(""&lt;doc&gt;&lt;block&gt;&lt;title&gt;Text 1&lt;/title&gt;&lt;content&gt;Stuff 
I want&lt;/content&gt;&lt;/block&gt;&lt;block&gt;&lt;title&gt;Text 2&lt;/title&gt;&lt;content&gt;Stuff I d
on't want&lt;/content&gt;&lt;/block&gt;&lt;/doc&gt;"")
&gt;&gt;&gt;
&gt;&gt;&gt; # get all titles
... tree.xpath('//title/text()')
['Text 1', 'Text 2']
&gt;&gt;&gt;
&gt;&gt;&gt; # match 'Text 1'
... tree.xpath('//title/text()=""Text 1""')
True
&gt;&gt;&gt;
&gt;&gt;&gt; # Follow parent from selected nodes
... tree.xpath('//title/text()/../..//text()')
['Text 1', 'Stuff I want', 'Text 2', ""Stuff I don't want""]
&gt;&gt;&gt;
&gt;&gt;&gt; # Follow parent from selected node
... tree.xpath('//title/text()=""Text 1""/../..//text()')
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
  File ""lxml.etree.pyx"", line 1330, in lxml.etree._Element.xpath (src/
lxml/lxml.etree.c:14542)
  File ""xpath.pxi"", line 287, in lxml.etree.XPathElementEvaluator.__ca
ll__ (src/lxml/lxml.etree.c:90093)
  File ""xpath.pxi"", line 209, in lxml.etree._XPathEvaluatorBase._handl
e_result (src/lxml/lxml.etree.c:89446)
  File ""xpath.pxi"", line 194, in lxml.etree._XPathEvaluatorBase._raise
_eval_error (src/lxml/lxml.etree.c:89281)
lxml.etree.XPathEvalError: Invalid type
</code></pre>

<p>Is this possible in XPath? Do I need to express what I want to do in a different way?</p>
"
598817,29772,2009-02-28T22:39:55Z,6,Python HTML removal,"<p>How can I remove all HTML from a string in Python?  For example, how can I turn:</p>

<pre><code>blah blah &lt;a href=""blah""&gt;link&lt;/a&gt;
</code></pre>

<p>into</p>

<pre><code>blah blah link
</code></pre>

<p>Thanks!</p>
"
598879,NA,2009-02-28T23:22:02Z,2,Working with MySQL booleans in python,"<p>I am querying a MySQL database in python and selecting a boolean value -- so the response from MySQL is either the string 'True' or 'False'. I would like to execute further code based on the boolean value from MySQL. </p>

<p>E.g.</p>

<pre><code>data = 'False'  # assume this is what was returned by MySQL.
if data:
  print 'Success'  #really this would be where I would execute other if True.
else:
  print 'Fail'  #really this would be where I would execute other code if False
</code></pre>

<p>But I can't do this because</p>

<pre><code>if data:
</code></pre>

<p>will always return True</p>

<p>So how do I convert the string that MySQL is returning into a boolean in python?</p>

<p>Currently I have:</p>

<pre><code>data = 'False'  # assume this is what was returned by MySQL.
if data == 'True':
  print 'Success'
else:
  print 'Fail'
</code></pre>

<p>I believe there must be a better way to do this in python -- likely there is something simple I am missing.</p>
"
598931,63347,2009-03-01T00:03:43Z,1,Difference between class (Python) and struct (C),"<p>I'm new to python. I've studied C and I noticed that that the C structure (struct) seemed to have the same task as ""class"" in python. So what is, conceptually, the difference? </p>
"
598979,9328,2009-03-01T00:29:11Z,5,What's the best technology for connecting from linux to MS SQL Server using python? ODBC?,"<p>By best, I mean most-common, easiest to setup, free.  Performance doesn't matter.</p>
"
599205,9161,2009-03-01T03:40:26Z,1,How can I manually register distributions with pkg_resources?,"<p>I'm trying to get a package installed on Google App Engine.  The package relies rather extensively on <code>pkg_resources</code>, but there's no way to run <code>setup.py</code> on App Engine.</p>

<p>There's no platform-specific code in the source, however, so it's no problem to just zip up the source and include those in the system path.  And I've gotten a version of <code>pkg_resources</code> installed and working as well.</p>

<p>The only problem is getting the package actually <em>registered</em> with <code>pkg_resources</code> so when it calls <code>iter_entry_points</code> it can find the appropriate plugins.</p>

<p>What methods do I need to call to register modules on <code>sys.path</code> with all the appropriate metadata, and how do I figure out what that metadata needs to be?</p>
"
599218,15963,2009-03-01T03:52:58Z,1,Authentication Required - Problems Establishing AIM OSCAR Session using Python,"<p>I'm writing a simple python script that will interface with the AIM servers using the <a href=""http://dev.aol.com/aim/oscar/"" rel=""nofollow"">OSCAR protocol</a>. It includes a somewhat complex handshake protocol. You essentially have to send a GET request to a specific URL, receive XML or JSON encoded reply, extract a special session token and secret key, then generate a response using the token and the key.</p>

<p>I tried to follow <a href=""http://dev.aol.com/aim/oscar/#AUTH"" rel=""nofollow"">these steps</a> to a tee, but the process fails in the last one. Here is my code:</p>

<pre><code>class simpleOSCAR:
  def __init__(self, username, password):
	self.username = username
	self.password = password

	self.open_aim_key = 'whatever'
	self.client_name = 'blah blah blah'
	self.client_version = 'yadda yadda yadda'


  def authenticate(self):

	# STEP 1
	url = 'https://api.screenname.aol.com/auth/clientLogin?f=json'
        data = urllib.urlencode( [
                 ('k', self.open_aim_key), 
				 ('s', self.username),
                 ('pwd', self.password), 
				 ('clientVersion', self.client_version),
                 ('clientName', self.client_name)]
				)

	response = urllib2.urlopen(url, data)
	json_response = simplejson.loads(urllib.unquote(response.read()))

	session_secret = json_response['response']['data']['sessionSecret']
	host_time = json_response['response']['data']['hostTime']
	self.token = json_response['response']['data']['token']['a']

	# STEP 2
	self.session_key = base64.b64encode(hmac.new(self.password, session_secret, sha256).digest())

	#STEP 3
	uri = ""http://api.oscar.aol.com/aim/startOSCARSession?""

	data = urllib.urlencode([	
                    ('a', self.token),  
					('clientName', self.client_name),
					('clientVersion', self.client_version),
					('f', 'json'),
					('k', self.open_aim_key), 
					('ts', host_time), 
                                	]
				)
	urldata = uri+data
	hashdata = ""GET&amp;"" + urllib.quote(""http://api.oscar.aol.com/aim/startOSCARSession?"") + data

	digest = base64.b64encode(hmac.new(self.session_key, hashdata, sha256).digest())

	urldata =  urldata + ""&amp;sig_sha256="" + digest

	print urldata + ""\n""

	response = urllib2.urlopen(urldata)
	json_response = urllib.unquote(response.read())

	print json_response

if __name__ == '__main__':
so = simpleOSCAR(""aimscreenname"", ""somepassword"")
so.authenticate()
</code></pre>

<p>I get the following response from the server:</p>

<pre><code>{ ""response"" : {
                 ""statusCode"":401, 
                 ""statusText"":""Authentication Required. statusDetailCode 1014"",
                 ""statusDetailCode"":1014, 
                 ""data"":{
                           ""ts"":1235878395
                         }
               }
}
</code></pre>

<p>I tried troubleshooting it in various ways, but the URL's I generate look the same as the ones shown in the <a href=""http://dev.aol.com/aim/oscar/#SIGNON"" rel=""nofollow"">signon flow example</a>. And yet, it fails.</p>

<p>Any idea what I'm doing wrong here? Am I hashing the values wrong? Am I encoding something improperly? Is my session timing out?</p>
"
599280,72389,2009-03-01T05:02:13Z,19,How to pass information using an HTTP redirect (in Django),"<p>I have a view that accepts a form submission and updates a model.</p>

<p>After updating the model, I want to redirect to another page, and I want a message such as ""Field X successfully updated"" to appear on this page.</p>

<p>How can I ""pass"" this message to the other page? HttpResponseRedirect only accepts a <a href=""http://en.wikipedia.org/wiki/Uniform_Resource_Locator"" rel=""nofollow"">URL</a>. I've seen this done before on other sites. How is this accomplished?</p>
"
599430,35247,2009-03-01T07:23:20Z,8,Why doesn't the weakref work on this bound method?,"<p>I have a project where i'm trying to use weakrefs with callbacks, and I don't understand what I'm doing wrong. I have created simplified test that shows the exact behavior i'm confused with. </p>

<p>Why is it that in this test test_a works as expected, but the weakref for self.MyCallbackB disappears between the class initialization and calling test_b? I thought like as long as the instance (a) exists, the reference to self.MyCallbackB should exist, but it doesn't.</p>

<pre><code>import weakref

class A(object):
    def __init__(self):

        def MyCallbackA():
            print 'MyCallbackA'
        self.MyCallbackA = MyCallbackA

        self._testA = weakref.proxy(self.MyCallbackA)
        self._testB = weakref.proxy(self.MyCallbackB)

    def MyCallbackB(self):
        print 'MyCallbackB'

    def test_a(self):
        self._testA()

    def test_b(self):
        self._testB()

if __name__ == '__main__':
    a = A()    
    a.test_a()
    a.test_b()
</code></pre>
"
599474,NA,2009-03-01T08:11:13Z,7,How do I tell a file from directory in Python?,"<p>When using os.listdir method I need to tell which item in the resulting list is a directory or just a file.</p>

<p>I've faced a problem when I had to go through all the directories in this list, and then add a  file in every single directory.</p>

<p>Is there a way to go through this list and remove all files from it? If it isn't possible to do with os.listdir, what method should I use instead?</p>

<p>Thanks.</p>
"
599625,21544,2009-03-01T10:48:45Z,59,Python string prints as [u'String'],"<p>This will surely be an easy one but it is really bugging me. </p>

<p>I have a script that reads in a webpage and uses <a href=""https://www.crummy.com/software/BeautifulSoup/"">Beautiful Soup</a> to parse it. From the <em>soup</em> I extract all the links as my final goal is to print out the link.contents.</p>

<p>All of the text that I am parsing is ASCII. I know that Python treats strings as unicode, and I am sure this is very handy, just of no use in my wee script. </p>

<p>Every time I go to print out a variable that holds 'String' I get <code>[u'String']</code> printed to the screen. Is there a simple way of getting this back into just ascii or should I write a regex to strip it?</p>
"
599737,69746,2009-03-01T12:22:41Z,0,PyS60: Bluetooth sockets,"<p>From the website <a href=""http://www.mobilepythonbook.org/"" rel=""nofollow"">http://www.mobilepythonbook.org/</a> I found the following example of bluetooth sockets: <a href=""http://www.mobilenin.com/mobilepythonbook/examples/057-btchat.html"" rel=""nofollow"">BT chat example</a></p>

<p>Here in function chat_server() the bind method accepts a tuple with two elements. The first one has been used as a null string. What does it signify?</p>

<p>Which node will act as master in the Bluetooth, the one that starts chat_client or the one that starts chat_server? I feel it should be the node running chat_client. Andhence Bluetooth slave will be the other nodes.</p>
"
599953,69882,2009-03-01T15:19:38Z,63,How to remove the left part of a string?,"<p>I have some simple python code that searches files for a string e.g. <code>path=c:\path</code>, whereby the <code>c:\path</code> may vary. The current code is:</p>

<pre><code>def findPath( i_file) :
  lines = open( i_file ).readlines()
  for line in lines :
    if line.startswith( ""Path="" ) :
      return # what to do here in order to get line content after ""Path="" ?
</code></pre>

<p>What is a simple way to get a string text after <code>Path=</code>? 
Is there a simple method, without closures, reflection or other esoteric things ?</p>
"
600190,69746,2009-03-01T18:00:39Z,8,Python: Choosing between modules and classes,"<p>In my application I have to maintain some global application state and global application wide methods like currently connected users, total number of answers, create an application config file etc. There are two options:</p>

<ol>
<li><p>Make a separate appstate.py file with global variables with functions over them. It looks fine initially but it seems that I am missing <em>something</em> in clarity of my code.</p></li>
<li><p>Create a class AppState with class functions in a appstate.py file, all other modules have been defined by their specific jobs. This looks fine. But now I have to write longer line like appstate.AppState.get_user_list(). Moreover, the methods are not so much related to each other. I can create separate classes but that would be too many classes.</p></li>
</ol>

<p>EDIT: If I use classes I will be using classmethods. I don't think there is a need to instantiate the class to an object.</p>
"
600225,55911,2009-03-01T18:22:33Z,3,How to make Satchmo work in Google App Engine,"<p>I understand that there are big differences in data-store, but surely since django is bundled and it abstracts data-store away from Satchmo, something can be done?</p>

<p>Truth is that I am not a Python guy, been mostly Java/PHP thus far, but I am willing to learn.</p>

<p>Plus, if this is not possible today, lets band together and form a new Open Source project to ""extend"" satchmo or perhaps branch it, for compatibility?</p>
"
600268,30636,2009-03-01T18:49:39Z,441,mkdir -p functionality in Python,"<p>Is there a way to get functionality similar to <code>mkdir -p</code> on the shell from within Python.  I am looking for a solution other than a system call.  I am sure the code is less than 20 lines, and I am wondering if someone has already written it?</p>
"
600389,72525,2009-03-01T19:56:54Z,21,Python error when using urllib.open,"<p>When I run this:</p>

<pre><code>import urllib

feed = urllib.urlopen(""http://www.yahoo.com"")

print feed
</code></pre>

<p>I get this output in the interactive window (PythonWin):</p>

<pre><code>&lt;addinfourl at 48213968 whose fp = &lt;socket._fileobject object at 0x02E14070&gt;&gt;
</code></pre>

<p>I'm expecting to get the source of the above URL.  I know this has worked on other computers (like the ones at school) but this is on my laptop and I'm not sure what the problem is here.  Also, I don't understand this error at all.  What does it mean?  Addinfourl?  fp?  Please help.</p>
"
600401,72524,2009-03-01T20:04:20Z,3,What features would a *perfect* Python debugger have?,"<p>Please tell me which features you wish your current Python debugger had. I'm creating a new Python IDE/debugger and am looking forward to challenging requests!</p>
"
600536,62029,2009-03-01T21:16:25Z,16,Why does Google Search return HTTP Error 403?,"<p>Consider the following Python code:</p>

<pre>
 30    url = ""http://www.google.com/search?hl=en&safe=off&q=Monkey""
 31    url_object = urllib.request.urlopen(url);
 32    print(url_object.read());
</pre>

<p>When this is run, an Exception is thrown:</p>

<pre><code>File ""/usr/local/lib/python3.0/urllib/request.py"", line 485, in http_error_default
   raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
urllib.error.HTTPError: HTTP Error 403: Forbidden
</code></pre>

<p>However, when this is put into a browser, the search returns as expected. What's going on here? How can I overcome this so I can search Google programmatically?</p>

<p>Any thoughts?</p>
"
600539,40118,2009-03-01T21:17:30Z,16,BOO Vs IronPython,"<p>What is the difference between <a href=""http://www.codeplex.com/Wiki/View.aspx?ProjectName=IronPython"">IronPython</a> and <a href=""http://boo.codehaus.org/"">BOO</a>? Is there a need for 2 Python-like languages?</p>
"
600621,38146,2009-03-01T21:53:51Z,3,Making a 2-player web-based textual game,"<p>I'm making a simple web-based, turn-based game and am trying to determine what modules exist out there to help me on this task. </p>

<p>Here's the web app I'm looking to build:</p>

<ul>
<li>User visits the homepage, clicks on a ""play game"" link</li>
<li>This takes the user to a ""game room"" where he either joins someone else who has been waiting for a partner to play with or waits for someone to join him</li>
<li>As soon as there are two users in the room, the game starts. It's a very simple turn-based textual game. One user enters a number, then the other user responds by entering another number, and so on, until some conditions are met and the game is over; each player is shown their final score.</li>
</ul>

<p>My default plan has been to do this using Django and AJAX. Are there any existing modules/frameworks out there that would potentially save me some of the work of writing this from scratch? (Note: I might be able to negotiate to have this done in .NET if there are some great .NET libraries.)</p>
"
600848,63503,2009-03-01T23:44:38Z,8,how to time-out gracefully while downloading with python,"<p>I'm downloading a huge set of files with following code in a loop:</p>

<pre><code>try:
    urllib.urlretrieve(url2download, destination_on_local_filesystem)
except KeyboardInterrupt:
    break
except:
    print ""Timed-out or got some other exception: ""+url2download
</code></pre>

<p>If the server times-out on URL url2download when connection is just initiating, the last exception is handled properly. But sometimes server responded, and downloading is started, but the server is so slow, that it'll takes hours for even one file, and eventually it returns something like:</p>

<pre><code>Enter username for Clients Only at albrightandomalley.com:
Enter password for  in Clients Only at albrightandomalley.com:
</code></pre>

<p>and just hangs there (although no username/passworde is aksed if the same link is downloaded through the browser).</p>

<p>My intention in this situation would be -- skip this file and go to the next one. The question is -- how to do that? Is there a way in python to specify how long is OK to work on downloading one file, and if more time is already spent, interrupt, and go forward?</p>
"
601039,41718,2009-03-02T01:54:29Z,23,VIM: Save and Run at the same time?,"<p>I do a lot of Python quick simulation stuff and I'm constantly saving (:w) and then running (:!!).  I'm wondering, is there a way to combine these actions.  Maybe a ""save and run"" command.</p>

<p>Thanks for your help.</p>
"
601166,42024,2009-03-02T03:13:21Z,4,Issues with BeautifulSoup parsing,"<p>I am trying to parse an html page with BeautifulSoup, but it appears that BeautifulSoup doesn't like the html or that page at all. When I run the code below, the method prettify() returns me only the script block of the page (see below). Does anybody has an idea why it happens? </p>

<pre><code>import urllib2
from BeautifulSoup import BeautifulSoup

url = ""http://www.futureshop.ca/catalog/subclass.asp?catid=10607&amp;mfr=&amp;logon=&amp;langid=FR&amp;sort=0&amp;page=1""
html = """".join(urllib2.urlopen(url).readlines())
print ""-- HTML ------------------------------------------""
print html
print ""-- BeautifulSoup ---------------------------------""
print BeautifulSoup(html).prettify()
</code></pre>

<p>The is the output produced by BeautifulSoup.</p>

<pre><code>-- BeautifulSoup ---------------------------------
&lt;!DOCTYPE HTML PUBLIC ""-//W3C//DTD HTML 4.01 Transitional//EN"" ""http://www.w3.org/TR/html4/loose.dtd""&gt;
&lt;meta http-equiv=""Content-Type"" content=""text/html; charset=utf-8"" /&gt;
&lt;script language=""JavaScript""&gt;
 &lt;!--
     function highlight(img) {
       document[img].src = ""/marketing/sony/images/en/"" + img + ""_on.gif"";
     }

     function unhighlight(img) {
       document[img].src = ""/marketing/sony/images/en/"" + img + ""_off.gif"";
     }
//--&gt;
&lt;/script&gt;
</code></pre>

<p>Thanks!</p>

<p>UPDATE: I am using the following version, which appears to be the latest.</p>

<pre><code>__author__ = ""Leonard Richardson (leonardr@segfault.org)""
__version__ = ""3.1.0.1""
__copyright__ = ""Copyright (c) 2004-2009 Leonard Richardson""
__license__ = ""New-style BSD""
</code></pre>
"
601236,6173,2009-03-02T04:04:06Z,8,Recommendations for Python development on a Mac?,"<p>I bought a low-end MacBook about a month ago and am finally getting around to configuring it for Python. I've done most of my Python work in Windows up until now, and am finding the choices for OS X a little daunting. It looks like there are at least five options to use for Python development:</p>

<ul>
<li>""Stock"" Apple Python</li>
<li>MacPython</li>
<li>Fink</li>
<li>MacPorts</li>
<li>roll-your-own-from-source</li>
</ul>

<p>I'm still primarily developing for 2.5, so the stock Python is fine from a functionality standpoint. What I want to know is: why should I choose one over the other?</p>

<p><strong>Update:</strong>
To clarify, I am looking for a discussion of the various options, not links to the documentation. I've marked this as a Community Wiki question, as I don't feel there is a ""correct"" answer. Thanks to everyone who has already commented for their insight.</p>
"
601442,46914,2009-03-02T06:34:21Z,6,Should I use GeoDjango for mapping a floor plan?,"<p>I want to create a floor plan map of an interior space that has clickable regions.  My first thought was to investigate GeoDjango since its <em>the</em> mapping app for Django.  But considering the dependencies, the learning curve and overall complexity, I'm concerned that I may be trying to swat a fly with a bazooka.</p>

<p>Should I use GeoDjango for this, or should I just store integer lists in a database field?</p>

<p><strong>EDIT:</strong> The floor plan would be fairly simple; a collection of walls and workstations with the ability to define regions for how much space the workstation occupies, thus allowing offices to be defined as well as open plan layouts.</p>
"
601477,13055,2009-03-02T06:57:43Z,8,Best way to create a NumPy array from a dictionary?,"<p>I'm just starting with NumPy so I may be missing some core concepts...</p>

<p>What's the best way to create a NumPy array from a dictionary whose values are lists?</p>

<p>Something like this:</p>

<pre><code>d = { 1: [10,20,30] , 2: [50,60], 3: [100,200,300,400,500] }
</code></pre>

<p>Should turn into something like:</p>

<pre><code>data = [
  [10,20,30,?,?],
  [50,60,?,?,?],
  [100,200,300,400,500]
]
</code></pre>

<p>I'm going to do some basic statistics on each row, eg:</p>

<pre><code>deviations = numpy.std(data, axis=1)
</code></pre>

<p>Questions:</p>

<ul>
<li><p>What's the best / most efficient way to create the numpy.array from the dictionary? The dictionary is large; a couple of million keys, each with ~20 items.</p></li>
<li><p>The number of values for each 'row' are different. If I understand correctly numpy wants uniform size, so what do I fill in for the missing items to make std() happy?</p></li>
</ul>

<p>Update: One thing I forgot to mention - while the python techniques are reasonable (eg. looping over a few million items is fast), it's constrained to a single CPU. Numpy operations scale nicely to the hardware and hit all the CPUs, so they're attractive.</p>
"
601865,62389,2009-03-02T10:18:23Z,12,Python Table engine binding for Tokyo Cabinet,"<p>I am looking for python bindings for Table engine of Tokyo cabinet. I tried <a href=""http://pypi.python.org/pypi/pytc"" rel=""nofollow"">Pytc</a> but can only find Hash and B-tree engine support. Is there any other bindings available?</p>
"
601874,55562,2009-03-02T10:23:37Z,4,Digital Image cropping in Python,"<p>Got this question from a professor, a physicist.</p>

<p>I am a beginner in Python programming. I am not a computer professional I am a physicist. I was trying to write a code in python for my own research which involves a little image processing.</p>

<p>All I need to do is to display an image and then select a region of interest using my mouse and finally crop out the selected region. I can do this in Matlab using the ginput() function. </p>

<p>I tried using PIL. But I find that after I issue the command Image.show(), the image is displayed but then the program halts there unless I exit from the image window. Is there any way to implement what I was planning. Do I need to download any other module? Please advise. </p>
"
601900,29573,2009-03-02T10:39:52Z,23,How to write meaningful docstrings?,"<p>What, in Your opinion is a meaningful docstring? What do You expect to be described there?</p>

<p>For example, consider this Python class's <code>__init__</code>:</p>

<pre><code>def __init__(self, name, value, displayName=None, matchingRule=""strict""):
    """"""
    name - field name
    value - field value
    displayName - nice display name, if empty will be set to field name
    matchingRule - I have no idea what this does, set to strict by default
    """"""
</code></pre>

<p>Do you find this meaningful? Post Your good/bad examples for all to know (and a general answer so it can be accepted).</p>
"
601941,54248,2009-03-02T10:56:21Z,2,Solution basis of underdetermined equation set in python,"<p>I have an underdetermined equation set (m equations of n variables, m smaller than n). As such, if it is solvable then the set of solutions are a linear space (if it is a homogenic set) or affine space (non-homogenic).</p>

<p>Is there an easy way in Python (possibly with other libraries) to obtain this space - for example, a basis of which?</p>

<p>Thanks.</p>
"
602030,72766,2009-03-02T11:46:17Z,0,Store last created model's row in memory,"<p>I am working on ajax-game. The abstract: 2+ gamers(browsers) change a variable which is saved to DB through json. All gamers are synchronized by javascript-timer+json - periodically reading that variable from DB. </p>

<p>In general, all changes are stored in DB as history, but I want the recent change duplicated in memory. </p>

<p>So the problem is: i want one variable to be stored in memory instead of DB.</p>
"
602046,69746,2009-03-02T11:55:04Z,9,Should I check the types of constructor arguments (and at other places too)?,"<p>Python discourages checking the types. But in many cases this may be useful:</p>

<ol>
<li><p>Checking constructor arguments. e.g. checking foe Boolean, string, dict etc. If I don't and set the object's members to the arguments it will cause problems later.</p></li>
<li><p>Checking functions arguments.</p></li>
<li><p>In properties. If someone sets a wrong value or different type, I should respond quickly.</p></li>
</ol>
"
602096,11992,2009-03-02T12:11:56Z,14,Do many Python libraries have relatively low code quality?,"<p><strong>Edit:</strong> Since this question was asked a lot of improvement has happened in the standard Python scientific libraries (which was the targeted area). For example the numpy project has made a big effort to improve the docstrings. One can still argue if it would have been possible to address these issues continuously right from the start.</p>

<hr>

<p>I have this somewhat heretic question: Why do so many Python libraries have messy code and don't follow standard best practices? Or do you think that this observation is absolutely not true? How does the situation compare to other languages? I am interested in your take on this.</p>

<p><em>Some reasons why I have the impression that quality is lacking:</em></p>

<ul>
<li><p>The docstrings are often completely missing or incomplete, even for the public API. It is painful when a method takes <code>*args</code> and <code>**kwargs</code> but does not document which values can be given.</p></li>
<li><p>Bad Python coding practices, like adding new attributes outside of <code>__init__</code>. Things like this make the code hard to read (or to maintain).</p></li>
<li><p>Hardly any libraries follow the PEP8 coding conventions. Sometimes the conventions are not even consistent in a single file.</p></li>
<li><p>The overall design is messy, with no clear API. It seems that not nearly enough refactoring is done.</p></li>
<li><p>Poor unittest coverage.</p></li>
</ul>

<p>Don't get me wrong, <em>I absolutely love Python and its ecosystem</em>. And even though I struggled with these libraries <em>they generally get the job done and I am grateful for that</em>. But I also think that in the end tons of developer time are wasted because of these issues. Maybe that is because <em>Python gives you so much freedom that it is very easy to write bad code</em>.</p>
"
602322,62398,2009-03-02T13:17:57Z,2,Differential AJAX updates for HTML table?,"<p>I have a <a href=""http://conquer-on-contact.bthomson.com"" rel=""nofollow"">game</a> on Google App Engine that's based on a 25x20 HTML table (the game board). Every 3 seconds the user can ""move,"" which sends an AJAX request to the server, at which time the server rerenders the entire HTML table and sends it to the user.</p>

<p>This was easy to write, but it wastes a lot of bandwidth. Are there any libraries, client (preferably jquery) or server-side (must work with GAE), that help send differential instead of full updates for large tables? Usually only 5-10 tiles change on a given reload, so I feel like I could cut bandwidth use by an order of magnitude by sending just those tiles instead of all 500 every 3 seconds.</p>

<p>I'm also open to ""you idiot, why are you using HTML tables""-type comments if you can suggest a better alternative. For example are there any CSS/DOM manipulation techniques I should be considering instead of using an HTML table? Should I use a table but give each td coordinates for an id (like ""12x08"") and then use jquery to replace cells by id?</p>

<p>A clarification: the tiles are text, not images.</p>
"
602445,28380,2009-03-02T14:03:39Z,7,Evil code from the Python standard library,"<p>So, we have had this: <a href=""http://lucumr.pocoo.org/2009/3/1/the-1000-speedup-or-the-stdlib-sucks"" rel=""nofollow"">http://lucumr.pocoo.org/2009/3/1/the-1000-speedup-or-the-stdlib-sucks</a>. It demonstrates a rather bad bug that is probably costing the universe a load of cycles even as we speak. It's fixed now, which is great.</p>

<p>So what parts of the standard library have you noticed to be evil?</p>

<p>I would expect all the responsible people to match up an answer with a bug report (if suitable) and a patch (if superman).</p>
"
602580,58737,2009-03-02T14:47:11Z,27,How can I use C++ class in Python?,"<p>I have implemented a class in C++. I want to use it with Python.
<strong>Please suggest step by step method and elaborate each step.</strong>
Somthing like this...</p>

<pre><code>class Test{
     private:
        int n;
     public:
        Test(int k){
            n=k;
        }
        void setInt(int k){
            n = k; 
        }
        int getInt(){
            return n;
        }
};
</code></pre>

<p>Now, in Python </p>

<pre><code>&gt;&gt;&gt; T1 = Test(12)
&gt;&gt;&gt; T1.getInt()
12
&gt;&gt;&gt; T1.setInt(32)
&gt;&gt;&gt; T1.getInt()
32
</code></pre>

<p>Please suggest.How can I do this ?
NOTE: I would like to know manual way to do that. I don't want any third party library dependency.</p>
"
602599,3045,2009-03-02T14:51:11Z,4,How to show the output of 'l' in python pdb after every command entered,"<p>I would like to have the output of the python pdb 'l' command printed to the screen after every command I enter in an interactive debugging session.</p>

<p>Is there a way to setup python pdb to do this?</p>
"
602846,34211,2009-03-02T15:55:53Z,15,How can I access the current executing module or class name in Python?,"<p>I would like to be able to dynamically retrieve the current executing module or class name from within an imported module.  Here is some code:</p>

<p><strong>foo.py:</strong></p>

<pre><code>def f():
    print __name__
</code></pre>

<p><strong>bar.py:</strong></p>

<pre><code>from foo import f

def b(): f()
</code></pre>

<p>This obviously does not work as <code>__name__</code> is the name of the module that contains the function.  What I would like to be access inside the <code>foo</code> module is the name of the current executing module that is using <code>foo</code>.  So in the case above it would be <code>bar</code> but if any other module imported <code>foo</code> I would like <code>foo</code> to dynamically have access to the name of that module.</p>

<p><strong>Edit:</strong> The <code>inspect</code> module looks quite promising but it is not exactly what I was looking for.  What I was hoping for was some sort of global or environment-level variable that I could access that would contain the name of the current executing module.  Not that I am unwilling to traverse the stack to find that information - I just thought that Python may have exposed that data already.</p>

<p><strong>Edit:</strong> Here is how I am trying to use this.  I have two different Django applications that both need to log errors to file.  Lets say that they are called ""AppOne"" and ""AppTwo"".  I also have a place to which I would like to log these files: ""<code>/home/hare/app_logs</code>"".  In each application at any given point I would like to be able to import my logger module and call the log function which writes the log string to file.  However what I would like to do is create a directory under <code>app_logs</code> that is the name of the current application (""AppOne"" or ""AppTwo"") so that each application's log files will go in their respective logging directories.</p>

<p>In order to do this I thought that the best way would be for the logger module to have access to some sort of global variable that denotes the current application's name as it is responsible for knowing the location of the parent logging directory and creating the application's logging directory if it does not yet exist.</p>
"
603115,72283,2009-03-02T17:09:38Z,8,python opens text file with a space between every character,"<p>Whenever I try to open a .csv file with the python command
<code>fread = open('input.csv', 'r')</code>
it always opens the file with spaces between every single character.  I'm guessing it's something wrong with the text file because I can open other text files with the same command and they are loaded correctly.  Does anyone know why a text file would load like this in python?</p>

<p>Thanks.</p>

<p><strong>Update</strong></p>

<p>Ok, I got it with the help of Jarret Hardie's post</p>

<p>this is the code that I used to convert the file to ascii</p>

<pre><code>fread = open('input.csv', 'rb').read()
mytext = fread.decode('utf-16')
mytext = mytext.encode('ascii', 'ignore')
fwrite = open('input-ascii.csv', 'wb')
fwrite.write(mytext)
</code></pre>

<p>Thanks!</p>
"
603199,1384652,2009-03-02T17:29:43Z,3,Finding anchor text when there are tags there,"<p>I want to find the text between a pair of &lt;a&gt; tags that link to a given site</p>

<p>Here's the re string that I'm using to find the content:</p>

<pre><code>r'''(&lt;a([^&lt;&gt;]*)href=(""|')(http://)?(www\.)?%s([^'""]*)(""|')([^&lt;&gt;]*)&gt;([^&lt;]*))&lt;/a&gt;''' % our_url
</code></pre>

<p>The result will be something like this:</p>

<pre><code>r'''(&lt;a([^&lt;&gt;]*)href=(""|')(http://)?(www\.)?stackoverflow.com([^'""]*)(""|')([^&lt;&gt;]*)&gt;([^&lt;]*))&lt;/a&gt;'''
</code></pre>

<p>This is great for most links but it errors with a link with tags within it. I tried changing the final part of the regex from:</p>

<pre><code>([^&lt;]*))&lt;/a&gt;'''
</code></pre>

<p>to:</p>

<pre><code>(.*))&lt;/a&gt;'''
</code></pre>

<p>But that just got everything on the page after the link, which I don't want. Are there any suggestions on what I can do to solve this?</p>
"
603287,72892,2009-03-02T17:48:28Z,16,Need python lxml syntax help for parsing html,"<p>I am brand new to python, and I need some help with the syntax for finding and iterating through html tags using lxml.  Here are the use-cases I am dealing with:</p>

<p>HTML file is fairly well formed (but not perfect).  Has multiple tables on screen, one containing a set of search results, and one each for a header and footer.  Each result row contains a link for the search result detail.</p>

<ol>
<li><p>I need to find the middle table with the search result rows (this one I was able to figure out):</p>

<pre><code>    self.mySearchTables = self.mySearchTree.findall("".//table"")
    self.myResultRows = self.mySearchTables[1].findall("".//tr"")
</code></pre></li>
<li><p>I need to find the links contained in this table (this is where I'm getting stuck):</p>

<pre><code>    for searchRow in self.myResultRows:
        searchLink = patentRow.findall("".//a"")
</code></pre>

<p>It doesn't seem to actually locate the link elements.</p></li>
<li><p>I need the plain text of the link.  I imagine it would be something like <code>searchLink.text</code> if I actually got the link elements in the first place.</p></li>
</ol>

<p>Finally, in the actual API reference for lxml, I wasn't able to find information on the find and the findall calls.  I gleaned these from bits of code I found on google.  Am I missing something about how to effectively find and iterate over HTML tags using lxml?</p>
"
603528,72911,2009-03-02T18:55:19Z,3,"Using PyQT, how do you filter mousePressEvent for a QComboBox with custom list","<p>I've got a <code>QComboBox</code> with a custom list object. </p>

<p><img src=""http://i.stack.imgur.com/r71L2.png"" alt=""Screenshot.""></p>

<p>The custom list object has a custom <code>mousePressEvent</code> so that when the user click on one of the circles with a +/- (a twisty), the list is expanded/collapsed. </p>

<p>When I use the list with the combo box, when the user clicks on a twisty, the list is expanded/collapsed, but the selection is changed, and the list is hidden. How can I filter this so that when the user click on a twisty, the selection is not changed, and the list not hidden.</p>

<h2>Additional screenshots</h2>

<p>All of the nodes collapsed:
<img src=""http://i.stack.imgur.com/tz1Qs.png"" alt=""All nodes collapsed.""></p>

<p>List hidden:
<img src=""http://i.stack.imgur.com/sJFuw.png"" alt=""Screenshot with the list hidden.""></p>
"
603595,19687,2009-03-02T19:18:05Z,3,What is the proper way to address permissions?,"<p>I added a new model with one permission, and now I need to add that permission to a few users on the production machine after deploying the code and running syncdb for the new app involved. I haven't found the correct way to do this. The auth docs mention User.user_permissions.add(permission), but never tell me what 'permission' is or the best way to get it.</p>
"
603641,29903,2009-03-02T19:28:09Z,7,Using for...else in Python generators,"<p>I'm a big fan of Python's <a href=""http://docs.python.org/reference/compound_stmts.html#the-for-statement"">for...else syntax</a> - it's surprising how often it's applicable, and how effectively it can simplify code.</p>

<p>However, I've not figured out a nice way to use it in a generator, for example:</p>

<pre><code>def iterate(i):
    for value in i:
        yield value
    else:
        print 'i is empty'
</code></pre>

<p>In the above example, I'd like the <code>print</code> statement to be executed only if <code>i</code> is empty. However, as <code>else</code> only respects <code>break</code> and <code>return</code>, it is always executed, regardless of the length of <code>i</code>.</p>

<p>If it's impossible to use <code>for...else</code> in this way, what's the best approach to this so that the <code>print</code> statement is only executed when nothing is yielded?</p>
"
603831,23553,2009-03-02T20:16:51Z,2,How would you draw cell borders in a wxPython FlexGridSizer?,"<p>I'm new to Python, but I can't really find much decent documentation on the web, so I'm hoping somebody will know the answer or where the answer is...</p>

<p>I have a wxPython FlexGridSizer bound to a panel that contains other FlexGridSizers, I'd like to display some cell borders on the main FlexGridSizer, so each section looks encapsulated but I can't find any documentation to do it.</p>

<p>I tried using a panel to add to my main FlexGridView, with the panel's border on, but the panel's border doesn't always fill up the entire FlexGridView cell, so it looks choppy and uneven.</p>

<p>Does anybody know how to properly simulate this?</p>
"
603852,NA,2009-03-02T20:24:10Z,61,Multicast in Python,"<p>How do you send and receive UDP Multicast in Python?  Is there a standard library to do so?  </p>
"
603856,16148,2009-03-02T20:24:41Z,13,How do you get default headers in a urllib2 Request?,"<p>I have a Python web client that uses urllib2.  It is easy enough to add HTTP headers to my outgoing requests. I just create a dictionary of the headers I want to add, and pass it to the Request initializer.</p>

<p>However, other ""standard"" HTTP headers get added to the request as well as the custom ones I explicitly add.  When I sniff the request using Wireshark, I see headers besides the ones I add myself.  My question is how do a I get access to these headers?  I want to log every request (including the <em>full</em> set of HTTP headers), and can't figure out how.</p>

<p>any pointers?</p>

<p>in a nutshell:  How do I get all the outgoing headers from an HTTP request created by urllib2?</p>
"
604266,72987,2009-03-02T22:18:18Z,136,Django set default form values,"<p>I have a Model as follows</p>

<pre><code>class TankJournal(models.Model):
  user = models.ForeignKey(User)
  tank = models.ForeignKey(TankProfile)
  ts = models.IntegerField(max_length=15)
  title = models.CharField(max_length=50)
  body = models.TextField()
</code></pre>

<p>I have a modelform as follows for that model</p>

<pre><code>class JournalForm(ModelForm):
    tank = forms.IntegerField(widget=forms.HiddenInput()) 

    class Meta:
        model = TankJournal
        exclude = ('user','ts')
</code></pre>

<p>I want to know how to set the default value for that tank hidden field.. Here is my function to show/save the form so far</p>

<pre><code>def addJournal(request, id=0):
    if not request.user.is_authenticated():
        return HttpResponseRedirect('/')

    #
    # checking if they own the tank
    #
    from django.contrib.auth.models import User
    user = User.objects.get(pk=request.session['id'])

    if request.method == 'POST':
        form = JournalForm(request.POST)
        if form.is_valid():
            obj = form.save(commit=False)

            #
            # setting the user and ts
            #
            from time import time
            obj.ts = int(time())
            obj.user = user

            obj.tank = TankProfile.objects.get(pk=form.cleaned_data['tank_id'])

            #
            # saving the test
            #
            obj.save()

    else:
        form = JournalForm()

    try:
        tank = TankProfile.objects.get(user=user, id=id)
    except TankProfile.DoesNotExist:
        return HttpResponseRedirect('/error/')

    form.tank = id
    return render_to_response('ajax/tank_addJournal.html', {'form': form}, context_instance=RequestContext(request))
</code></pre>

<p>thanks!</p>
"
604453,19745,2009-03-02T23:13:17Z,83,Analyze audio using Fast Fourier Transform,"<p>I am trying to create a graphical spectrum analyzer in python.</p>

<p>I am currently reading 1024 bytes of a 16 bit dual channel 44,100 Hz sample rate audio stream and averaging the amplitude of the 2 channels together.  So now I have an array of 256 signed shorts.  I now want to preform a fft on that array, using a module like numpy, and use the result to create the graphical spectrum analyzer, which, to start will just be 32 bars.</p>

<p>I have read the wikipedia articles on Fast Fourier Transform and Discrete Fourier Transform but I am still unclear of what the resulting array represents.  This is what the array looks like after I preform an fft on my array using numpy:</p>

<pre><code>   [ -3.37260500e+05 +0.00000000e+00j   7.11787022e+05 +1.70667403e+04j
   4.10040193e+05 +3.28653370e+05j   9.90933073e+04 +1.60555003e+05j
   2.28787050e+05 +3.24141951e+05j   2.09781047e+04 +2.31063376e+05j
  -2.15941453e+05 +1.63773851e+05j  -7.07833051e+04 +1.52467334e+05j
  -1.37440802e+05 +6.28107674e+04j  -7.07536614e+03 +5.55634993e+03j
  -4.31009964e+04 -1.74891657e+05j   1.39384348e+05 +1.95956947e+04j
   1.73613033e+05 +1.16883207e+05j   1.15610357e+05 -2.62619884e+04j
  -2.05469722e+05 +1.71343186e+05j  -1.56779748e+04 +1.51258101e+05j
  -2.08639913e+05 +6.07372799e+04j  -2.90623668e+05 -2.79550838e+05j
  -1.68112214e+05 +4.47877871e+04j  -1.21289916e+03 +1.18397979e+05j
  -1.55779104e+05 +5.06852464e+04j   1.95309737e+05 +1.93876325e+04j
  -2.80400414e+05 +6.90079265e+04j   1.25892113e+04 -1.39293422e+05j
   3.10709174e+04 -1.35248953e+05j   1.31003438e+05 +1.90799303e+05j...
</code></pre>

<p>I am wondering what exactly these numbers represent and how I would convert these numbers into a percentage of a height for each of the 32 bars.  Also, should I be averaging the 2 channels together?</p>
"
604622,91385,2009-03-03T00:17:47Z,8,"Does Python have something like Perl 5.10's ""state"" variables?","<p>In Perl 5.10, I can say:</p>

<pre><code>sub foo () {
  state $x = 1;
  say $x++;
}

foo();
foo();
foo();
</code></pre>

<p>...and it will print out:</p>

<pre><code>1
2
3
</code></pre>

<p>Does Python have something like this?</p>
"
604721,91385,2009-03-03T00:59:21Z,11,How would you translate this from Perl to Python?,"<p>I've got a Perl function which takes a timestamp and returns either the unchanged timestamp (if it's never seen it before) or otherwise, it appends some letters to make it unique:</p>

<pre><code>sub uniqify($) {
  my $timestamp = shift;

  state $last_ts = -1;
  state $next_letter = 'A';

  if ($timestamp == $last_ts) {
    $timestamp .= $next_letter++;
  } else {
    $last_ts = $timestamp;
    $next_letter = 'A';
  }

  return $timestamp;
}
</code></pre>

<p>So if you call it four times, with the values 1, 1, 1, and 2, it will return 1, then 1A, then 1B, then 2.</p>

<p>Note: It only ever gets called with ever-increasing timestamps, so it doesn't need to recall every one it's ever seen, just the last one.</p>

<p>Now I need to translate this function to Python. I've learned that I can replace the ""state"" variables with globals (yuck!) or perhaps attach them to the function as attributes, but neither of those is particularly elegant.</p>

<p>Also, Python doesn't have something like Perl's magic autoincrement, where if you ""++"" a variable whose value is ""A"", it becomes ""B"" -- or if it's ""Z"", it becomes ""AA"". So that's a curveball too.</p>

<p>I'm hacking together a solution, but it's really ugly and hard to read. Translating from Perl to Python is supposed to have the opposite effect, right? :) So I'm offering this as a challenge to SO users. Can you make it an elegant Python function?</p>
"
604749,14006,2009-03-03T01:11:44Z,37,How do I access my webcam in Python?,"<p>I would like to access my webcam from Python.</p>

<p>I tried using the <a href=""http://videocapture.sourceforge.net/"">VideoCapture</a> extension (<a href=""http://technobabbler.com/?p=22"">tutorial</a>), but that didn't work very well for me, I had to work around some problems such as it's a bit slow with resolutions >320x230, and sometimes it returns <code>None</code> for no apparent reason.</p>

<p>Is there a better way to access my webcam from Python?</p>
"
605013,69790,2009-03-03T03:37:31Z,5,python: how to send packets in multi thread and then the thread kill itself,"<p>I have a question. I'd like to send a continuous streams of byte to some host for certain amount of time (let's say 1 minute) using python. </p>

<p>Here is my code so far:</p>

<pre><code>#! /usr/bin/env python                                                          

import socket
import thread
import time

IP = ""192.168.0.2""
PADDING = ""a"" * 1000 #assume the MTU is slighly above 1000
DATA = PADDING + ""this is sentence number = ""
PORT = 14444
killed = False
test_time = 60 #60 seconds of testing

def send_data():
  s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
  s.connect((IP, PORT))
  count = 1
  starttime = time.clock()
  while elapsed &lt; test_time:
    sent = s.send(DATA + str(count) + ""\n"")
    if sent == 0: break # assume that if nothing is sent -&gt; connection died
    count = count+1
    elapsed = time.clock() - starttime
    if killed:
      break
  s.close()
  print str(count) + "" has been sent""

print ""to quit type quit""
thread.start_new_thread(send_data, ())

while True:
  var = raw_input(""Enter something: "")
  if var == ""quit"":
    killed = True
</code></pre>

<p>Few question, is there a better way to let a thread die after 60 seconds other than polling the time.clock every time?
When I run this program, it sends the bytes correctly but when I typed quit the other thread won't die, even though I set the var killed = True. I wonder why is that? the scope of var Killed should reach the other thread right?</p>

<p>Thanks</p>
"
605399,73096,2009-03-03T07:03:28Z,1,Python variable assigned by an outside module is accessible for printing but not for assignment in the target module,"<p>I have two files, one is in the webroot, and another is a bootstrap located one folder above the web root (this is CGI programming by the way).</p>

<p>The index file in the web root imports the bootstrap and assigns a variable to it, then calls a a function to initialize the application. Everything up to here works as expected.</p>

<p>Now, in the bootstrap file I can print the variable, but when I try to assign a value to the variable an error is thrown. If you take away the assignment statement no errors are thrown.</p>

<p>I'm really curious about how the scoping works in this situation. I can print the variable, but I can't asign to it. This is on Python 3.</p>

<p><strong>index.py</strong></p>

<pre><code># Import modules
import sys
import cgitb;

# Enable error reporting
cgitb.enable()
#cgitb.enable(display=0, logdir=""/tmp"")

# Add the application root to the include path
sys.path.append('path')

# Include the bootstrap
import bootstrap

bootstrap.VAR = 'testVar'

bootstrap.initialize()
</code></pre>

<p><strong>bootstrap.py</strong></p>

<pre><code>def initialize():
    print('Content-type: text/html\n\n')
    print(VAR)
    VAR = 'h'
    print(VAR)
</code></pre>

<p>Thanks.</p>

<p>Edit: The error message</p>

<pre><code>UnboundLocalError: local variable 'VAR' referenced before assignment 
      args = (""local variable 'VAR' referenced before assignment"",) 
      with_traceback = &lt;built-in method with_traceback of UnboundLocalError object at 0x00C6ACC0&gt;
</code></pre>
"
605629,22562,2009-03-03T09:02:25Z,1,Python's PubSub/observer Pattern for C++?,"<p>i'm looking for a C++ replacement of the Python PubSub Library in which i don't have to connect a signal with a slot or so, but instead can register for a special Kind of messages, without knowing the object which can send it. </p>
"
605888,1670,2009-03-03T10:32:52Z,12,What's the search engine used in the new Python documentation?,"<p>Is it built-in in <a href=""http://sphinx.pocoo.org/"">Sphinx</a>?</p>
"
606072,63514,2009-03-03T11:47:21Z,11,Python: how to dump cookies of a mechanize.Browser instance?,"<p>I am learning how to use <a href=""http://wwwsearch.sourceforge.net/mechanize/"" rel=""nofollow"">mechanize</a>, a Python module to automate interacting with websites.</p>

<p>One feature is the automated handling of cookies. I would to want to dump cookies from a <code>mechanize.Browser</code> instance for debugging purposes, but I can't seem to figure this out myself.</p>
"
606191,2239,2009-03-03T12:23:01Z,538,Convert bytes to a Python string,"<p>I'm using this code to get standard output from an external program:</p>

<pre><code>&gt;&gt;&gt; from subprocess import *
&gt;&gt;&gt; command_stdout = Popen(['ls', '-l'], stdout=PIPE).communicate()[0]
</code></pre>

<p>The communicate() method returns an array of bytes:</p>

<pre><code>&gt;&gt;&gt; command_stdout
b'total 0\n-rw-rw-r-- 1 thomas thomas 0 Mar  3 07:03 file1\n-rw-rw-r-- 1 thomas thomas 0 Mar  3 07:03 file2\n'
</code></pre>

<p>However, I'd like to work with the output as a normal Python string. So that I could print it like this:</p>

<pre><code>&gt;&gt;&gt; print(command_stdout)
-rw-rw-r-- 1 thomas thomas 0 Mar  3 07:03 file1
-rw-rw-r-- 1 thomas thomas 0 Mar  3 07:03 file2
</code></pre>

<p>I thought that's what the <a href=""http://docs.python.org/3.0/library/binascii.html?highlight=b2a#binascii.b2a_qp"">binascii.b2a_qp()</a> method is for, but when I tried it, I got the same byte array again:</p>

<pre><code>&gt;&gt;&gt; binascii.b2a_qp(command_stdout)
b'total 0\n-rw-rw-r-- 1 thomas thomas 0 Mar  3 07:03 file1\n-rw-rw-r-- 1 thomas thomas 0 Mar  3 07:03 file2\n'
</code></pre>

<p>Does anybody know how to convert the bytes value back to string? I mean, using the ""batteries"" instead of doing it manually. And I'd like it to be ok with Python 3.</p>
"
606221,31610,2009-03-03T12:33:45Z,1,python regex trouble,"<p>I have the following code :</p>

<pre><code>what = re.match(""get|post|put|head\s+(\S+) "",data,re.IGNORECASE)</code></pre>

<p>and in the <strong>data</strong> variable let's say I have this line :</p>

<pre>GET some-site.com HTTP/1.0 ...</pre>

<p>If I stop the script in the debugger, and inspect the <strong>what</strong> variable, I can see it only matched GET. Why doesn't it match some-site.com ?</p>
"
606226,63051,2009-03-03T12:35:03Z,2,How do I configure my sys.path variable in linux?,"<p>I want to automatically add entries to python's sys.path variable when run by my user in linux.
Is there something I can tweak in my home directory to get it done?</p>
"
606283,63051,2009-03-03T12:54:00Z,2,How do I install python's sphinx documentation generator in linux?,"<p>And how do I run it?</p>
"
606350,31610,2009-03-03T13:13:45Z,10,How can I debug a regular expression in python?,"<p>Is there a way to debug a regular expression in Python? And I'm not referring to the process of trying and trying till they work :)</p>

<p>EDIT: here is how regexes can be debugged in perl :</p>

<pre><code>
use re 'debug';

my $str = ""GET http://some-site.com HTTP/1.1"";
if($str =~/get\s+(\S+)/i) {
    print ""MATCH:$1\n"";
}
</code></pre>

<p>The code above produces the following output on my computer when ran :</p>

<pre><code>
Compiling REx ""get\s+(\S+)""
Final program:
   1: EXACTF  (3)
   3: PLUS (5)
   4:   SPACE (0)
   5: OPEN1 (7)
   7:   PLUS (9)
   8:     NSPACE (0)
   9: CLOSE1 (11)
  11: END (0)
stclass EXACTF  minlen 5
Matching REx ""get\s+(\S+)"" against ""GET http://some-site.com HTTP/1.1""
Matching stclass EXACTF  against ""GET http://some-site.com HTTP/1.1"" (33 chars)
   0           |  1:EXACTF (3)
   3        |  3:PLUS(5)
                                  SPACE can match 1 times out of 2147483647...
   4       |  5:  OPEN1(7)
   4       |  7:  PLUS(9)
                                    NSPACE can match 20 times out of 2147483647...
  24       |  9:    CLOSE1(11)
  24       | 11:    END(0)
Match successful!
MATCH:http://some-site.com
Freeing REx: ""get\s+(\S+)""

</code></pre>
"
606561,33080,2009-03-03T14:24:11Z,38,How to get filename of the __main__ module in Python?,"<p>Suppose I have two modules:</p>

<p>a.py:</p>

<pre><code>import b
print __name__, __file__
</code></pre>

<p>b.py:</p>

<pre><code>print __name__, __file__
</code></pre>

<p>I run the ""a.py"" file. This prints:</p>

<pre><code>b        C:\path\to\code\b.py
__main__ C:\path\to\code\a.py
</code></pre>

<p><strong>Question</strong>: how do I obtain the path to the <code>__main__</code> module (""a.py"" in this case) from within the ""b.py"" library?</p>
"
606680,15401,2009-03-03T14:53:15Z,3,Can I use VS2005 to build extensions for a Python system built with VS2003,"<p><a href=""http://rdflib.net/"" rel=""nofollow"">RDFLib</a> needs C extensions to be compiled to install on ActiveState Python 2.5; as far as I can tell, there's no binary installer anywhere obvious on the web.  On attempting to install with <code>python setup.py install</code>, it produces the following message:</p>

<p><code>error: Python was built with Visual Studio 2003;</code><br>
<code>extensions must be built with a compiler than can generate compatible binaries.</code><br>
<code>Visual Studio 2003 was not found on this system. If you have Cygwin installed,</code><br>
<code>you can try compiling with MingW32, by passing ""-c mingw32"" to setup.py.</code></p>

<p>There are <a href=""http://boodebr.org/main/python/build-windows-extensions"" rel=""nofollow"">various</a> <a href=""http://isegserv.itd.rl.ac.uk/blogs/alistair/"" rel=""nofollow"">resources</a> on the web about configuring a compiler for distutils that discuss using MinGW, although I haven't got this to work yet.  As an alternative I have VS2005.  </p>

<p>Can anyone categorically tell me whether you can use the C compiler in VS2005 to build Python extension modules for a VS2003 compiled Python (in this case ActiveState Python 2.5).  If this is possible, what configuration is needed?</p>
"
606782,53390,2009-03-03T15:15:16Z,0,Model and Validation Confusion - Looking for advice,"<p>I'm somewhat new to Python, Django, and I'd like some advice on how to layout the code I'd like to write.</p>

<p>I have the model written that allows a file to be uploaded. In the models save method I'm checking if the file has a specific extension. If it has an XML extension I'm opening the file and grabbing some information from the file to save in the database. I have this model working. I've tested it in the built-in administration. It works.</p>

<p>Currently when there's an error (it's not an XML file; the file can't be opened; a specific attribute doesn't exist) I'm throwing an custom ""Exception"" error. What I <em>would</em> like to do is some how pass these ""Exception"" error messages to the view (whether that's a custom view or the built-in administration view) and have an error message displayed like if the forms library was being used. Is that possible?</p>

<p>I'm starting to think I'm going to have to write the validation checks again using the forms library. If that's the case, is it possible to still use the built-in administration template, but extend the form it uses to add these custom validations?</p>

<p>Anything to help my confusion would be appreciated.</p>

<p><hr /></p>

<p><strong>UPDATE:</strong></p>

<p>Here's my model so far, for those who are asking, ""nzb"" is the XML file field.<br />
<a href=""http://dpaste.com/hold/6101/"" rel=""nofollow"">http://dpaste.com/hold/6101/</a></p>

<blockquote>
  <p>The admin interface will use the Form you associate with your model; your own views can also use the form.</p>
</blockquote>

<p>This is exactly what I'd like to do. However, I don't know how to associate my forms with my models. When ever I've created forms in the past they've always acted as their own entity. I could never get the administration views to use them while using the ModelForm class. Can you shead any light on this?</p>

<p>I've read over the link you gave me and it seams to be what I've done in the past, with no luck.</p>

<blockquote>
  <p>Getting attributes from the file, should probably be a method.</p>
</blockquote>

<p>Sorry, could you please elaborate on this? A method where?</p>

<p><hr /></p>

<p><strong>UPDATE:</strong></p>

<p>It seams I've been compleatly missing this step to link a form to the administration view.
<a href=""http://docs.djangoproject.com/en/dev/ref/contrib/admin/#adding-custom-validation-to-the-admin"" rel=""nofollow"">http://docs.djangoproject.com/en/dev/ref/contrib/admin/#adding-custom-validation-to-the-admin</a></p>

<p>This should now allow me to do the validation in a Form. However, I'm still confused about how to actually handle the validation. S.Lott says it should be a method?</p>
"
606946,72987,2009-03-03T15:55:21Z,2,Django Override form,"<p>Another question on some forms</p>

<p>Here is my model</p>

<pre><code>class TankJournal(models.Model):
    user = models.ForeignKey(User)
    tank = models.ForeignKey(TankProfile)
    ts = models.IntegerField(max_length=15)
    title = models.CharField(max_length=50)
    body = models.TextField()
</code></pre>

<p>Here is my modelform</p>

<pre><code>class JournalForm(ModelForm):
    tank = forms.IntegerField(widget=forms.HiddenInput()) 

    class Meta:
        model = TankJournal
        exclude = ('user','ts')
</code></pre>

<p>Here is my method to save it</p>

<pre><code>def addJournal(request, id=0):
    if not request.user.is_authenticated():
        return HttpResponseRedirect('/')

    #
    # checking if they own the tank
    #
    from django.contrib.auth.models import User
    user = User.objects.get(pk=request.session['id'])

    if request.method == 'POST':
        form = JournalForm(request.POST)

        if form.is_valid():
            obj = form.save(commit=False)

            #
            # setting the user and ts
            #
            from time import time
            obj.ts = int(time())
            obj.user = user
            obj.tank = TankProfile.objects.get(pk=form.cleaned_data['tank'])

            #
            # saving the test
            #
            obj.save()

        else:
            print form.errors

    else:
        form = JournalForm(initial={'tank': id})
</code></pre>

<p>When it saves.. it complains the tank is not a TankProfile but a Integer.. how can I override the form object to make tank a TankProfile</p>

<p>thanks</p>
"
607186,50385,2009-03-03T16:45:37Z,43,"How does Python's ""super"" do the right thing?","<p>I'm running Python 2.5, so this question may not apply to Python 3. When you make a diamond class hierarchy using multiple inheritance and create an object of the derived-most class, Python does the Right Thing (TM). It calls the constructor for the derived-most class, then its parent classes as listed from left to right, then the grandparent. I'm familiar with Python's <a href=""http://www.python.org/download/releases/2.3/mro/"">MRO</a>; that's not my question. I'm curious how the object returned from super actually manages to communicate to calls of super in the parent classes the correct order. Consider this example code:</p>

<pre><code>#!/usr/bin/python

class A(object):
    def __init__(self): print ""A init""

class B(A):
    def __init__(self):
    	print ""B init""
    	super(B, self).__init__()

class C(A):
    def __init__(self):
    	print ""C init""
    	super(C, self).__init__()

class D(B, C):
    def __init__(self):
    	print ""D init""
    	super(D, self).__init__()

x = D()
</code></pre>

<p>The code does the intuitive thing, it prints:</p>

<pre><code>D init
B init
C init
A init
</code></pre>

<p>However, if you comment out the call to super in B's init function, neither A nor C's init function is called. This means B's call to super is somehow aware of C's existence in the overall class hierarchy. I know that super returns a proxy object with an overloaded get operator, but how does the object returned by super in D's init definition communicate the existence of C to the object returned by super in B's init definition? Is the information that subsequent calls of super use stored on the object itself? If so, why isn't super instead self.super?</p>

<p>Edit: Jekke quite rightly pointed out that it's not self.super because super is an attribute of the class, not an instance of the class. Conceptually this makes sense, but in practice super isn't an attribute of the class either! You can test this in the interpreter by making two classes A and B, where B inherits from A, and calling <code>dir(B)</code>. It has no <code>super</code> or <code>__super__</code> attributes.</p>
"
607375,32117,2009-03-03T17:38:44Z,2,Preserving last new line when reading a file,"<p>I´m reading a file in Python where each record is separated by an empty new line. If the file ends in two or more new lines, the last record is processed as expected, but if the file ends in a single new line it´s not processed. Here´s the code:</p>

<pre><code>def fread():
    record = False
    for line in open('somefile.txt'):
        if line.startswith('Record'):
            record = True
            d = SomeObject()

        # do some processing with line
        d.process(line)

        if not line.strip() and record:
            yield d
            record = False

for record in fread():
    print(record)
</code></pre>

<p>In this data sample, everything works as expected ('---' is an empty line):</p>

<blockquote>
  <p>Record 1<br />
  data a<br />
  data b<br />
  data c<br />
  \n<br />
  Record 2<br />
  data a<br />
  data b<br />
  data c<br />
  \n<br />
  \n</p>
</blockquote>

<p>But in this, the last record isn´t returned:</p>

<blockquote>
  <p>Record 1<br />
  data a<br />
  data b<br />
  data c<br />
  \n<br />
  Record 2<br />
  data a<br />
  data b<br />
  data c<br />
  \n  </p>
</blockquote>

<p>How can I preserve the last new line from the file to get the last record?</p>

<p>PS.: I´m using the term ""preserve"" as I couldn´t find a better name.</p>

<p>Thanks.</p>

<p><strong>Edit</strong>
The original code was a stripped version, just to illustrate the problem, but it seems that I stripped too much. Now I posted all function´s code.</p>

<p>A little more explanation: The object <code>SomeObject</code> is created for each record in the file and the records are separated by empty new lines. At the end of the record it yields back the object so I can use it (save to a db, compare to another objects, etc).</p>

<p>The main problem when the file ends in a single new line, the last record isn´t yielded. It seems that Python does not read the last line when it´s blank.</p>
"
607548,45629,2009-03-03T18:23:31Z,4,Integrate postfix mail into my (python)webapp,"<p>I have a postfix server listening and receiving all emails received at mywebsite.com Now I want to show these postfix emails in a customized interface and that too for each user</p>

<p>To be clear, all the users of mywebsite.com will be given mail addresses like someguy@mywebsite.com who receives email on my production machine but he sees them in his own console built into his dashboard at mywebsite.com. </p>

<p>So to make the user see the mail he received, I need to create an email replica of the postfix mail so that mywebsite(which runs on django-python) will be reflecting them readily. How do I achieve this. To be precise this is my question, how do I convert a postfix mail to a python mail object(so that my system/website)understands it? </p>

<p>Just to be clear I have written psuedo code to achieve what I want:</p>

<pre><code>email_as_python_object = postfix_email_convertor(postfix_email)
attachments_list = email_as_python_object.attachments
body = email_as_python_object.body # be it html or whatever
</code></pre>

<p>And by the way I have tried default email module which comes with python but thats not handy for all the cases. And even I need to deal with mail attachments manually(which I hate). I just need a simple way to deal with cases like these(I was wondering how postfix understands a email received. ie.. how it automatically figures out different headers,attachments etc..). Please help me.</p>
"
607760,72525,2009-03-03T19:25:17Z,4,Python parsing,"<p>I'm trying to parse the title tag in an RSS 2.0 feed into three different variables for each entry in that feed.  Using ElementTree I've already parsed the RSS so that I can print each title [minus the trailing <code>)</code>] with the code below:</p>

<blockquote>
<pre><code>feed = getfeed(""http://www.tourfilter.com/dallas/rss/by_concert_date"")

for item in feed:  
 print repr(item.title[0:-1])
</code></pre>
</blockquote>

<p>I include that because, as you can see, the item.title is a repr() data type, which I don't know much about.</p>

<p>A particular <code>repr(item.title[0:-1])</code> <code>print</code>ed in the interactive window looks like this:</p>

<blockquote>
<pre><code>'randy travis (Billy Bobs 3/21'
'Michael Schenker Group (House of Blues Dallas 3/26'
</code></pre>
</blockquote>

<p>The user selects a band and I hope to, after parsing each <code>item.title</code> into 3 variables (one each for band, venue, and date... or possibly an array or I don't know...) select only those related to the band selected.  Then they are sent to Google for geocoding, but  that's another story.</p>

<p>I've seen some examples of <code>regex</code> and I'm reading about them, but it seems very complicated.  Is it?  I thought maybe someone here would have some insight as to exactly how to do this in an intelligent way.  Should I use the <code>re</code> module?  Does it matter that the output is currently is <code>repr()</code>s?  Is there a better way?  I was thinking I'd use a loop like (and this is my pseudoPython, just kind of notes I'm writing):</p>

<pre>

     list = bandRaw,venue,date,latLong  
     for item in feed:  
      parse item.title for bandRaw, venue, date  
       if bandRaw == str(band)   
        send venue name + "", Dallas, TX"" to google for geocoding  
        return lat,long  
      list = list + return character + bandRaw + "","" + venue + "","" + date + "","" + lat + "","" + long  
     else  

</pre>

<p>In the end, I need to have the chosen entries in a .csv (comma-delimited) file looking like this:</p>

<blockquote>
<pre><code>band,venue,date,lat,long  
randy travis,Billy Bobs,3/21,1234.5678,1234.5678  
Michael Schenker Group,House of Blues Dallas,3/26,4321.8765,4321.8765
</code></pre>
</blockquote>

<p>I hope this isn't too much to ask.  I'll be looking into it on my own, just thought I should post here to make sure it got answered.  </p>

<p>So, the question is, how do I best parse each <code>repr(item.title[0:-1])</code> in the <code>feed</code> into the 3 separate values that I can then concatenate into a .csv file?</p>
"
607819,NA,2009-03-03T19:40:23Z,11,Django email,"<p>I am using the Gmail SMTP server to send out emails from users of my website.</p>

<p>These are the default settings in my settings.py</p>

<pre><code>EMAIL_HOST = 'smtp.gmail.com'
EMAIL_HOST_USER = 'example@example.com'
EMAIL_HOST_PASSWORD = 'pwd'
EMAIL_PORT = 587
EMAIL_USE_TLS = True
SERVER_EMAIL = EMAIL_HOST_USER
DEFAULT_FROM_EMAIL = EMAIL_HOST_USER
</code></pre>

<p>If I want a user to send an email, I am overriding these settings and sending the email using Django's email sending methods. When an exception occurs in the system, I receive an email from the example@example.com. Sometimes I receive an email from some logged in user. Which could also possibly mean that when a user receives an email sent from my website it has a sent address different from the actual user. </p>

<p>What should be done to avoid this situation?</p>
"
608098,44484,2009-03-03T20:45:14Z,1,What will I lose or gain from switching database APIs? (from pywin32 and pysqlite to QSql),"<p>I am writing a Python (2.5) GUI Application that does the following:</p>

<ul>
<li>Imports from Access to an Sqlite database </li>
<li>Saves ui form settings to an Sqlite database</li>
</ul>

<p>Currently I am using pywin32 to read Access, and pysqlite2/dbapi2 to read/write Sqlite.</p>

<p>However, certain Qt objects don't automatically cast to Python or Sqlite equivalents when updating the Sqlite database. For example, a QDate, QDateTime, QString and others raise an error. Currently I am maintaining conversion functions.</p>

<p>I investigated using QSql, which appears to overcome the casting problem. In addition, it is able to connect to both Access and Sqlite. These two benefits would <em>appear</em> to allow me to refactor my code to use less modules and not maintain my own conversion functions.</p>

<p><strong>What I am looking for is a list of important side-effects, performance gains/losses, functionality gains/losses that any of the SO community has experienced as a result from the switch to QSql.</strong></p>

<p>One functionality loss I have experienced thus far is the inability to use Access functions using the QODBC driver (e.g., 'SELECT LCASE(fieldname) from tablename' fails, as does 'SELECT FORMAT(fieldname, ""General Number"") from tablename')</p>
"
608316,63503,2009-03-03T21:33:02Z,5,is there COMMIT analog in python for writing into a file?,"<p>I have a file open for writing, and a process running for days -- something is written into the file in relatively random moments. My understanding is -- until I do file.close() -- there is a chance nothing is really saved to disk. Is that true?</p>

<p>What if the system crashes when the main process is not finished yet? Is there a way to do kind of commit once every... say -- 10 minutes (and I call this commit myself -- no need to run timer)? Is file.close() and open(file,'a') the only way, or there are better alternatives?</p>
"
608558,29291,2009-03-03T22:46:08Z,5,Python port binding,"<p>I've recently been learning python and I just started playing with networking using python's <code>socket</code> library. Everything has been going well until recently when my script terminated without closing the connection. The next time I ran the script, I got:</p>

<pre><code>File ""./alert_server.py"", line 9, in &lt;module&gt;
  s.bind((HOST, PORT))
File ""&lt;string&gt;"", line 1, in bind
socket.error: (98, 'Address already in use')
</code></pre>

<p>So it seems that something is still binded to the port, even though the python script isn't running (and I've verified this using <code>$px aux</code>. What's weird is that after a minute or so, I can run the script again on the same port and it will be fine. Is there any way to prevent/unbind a port for when this happens in the future?</p>
"
608710,73450,2009-03-03T23:41:47Z,3,Monitoring user idle time,"<p>Developing a mac app, how can I tell whether the user is currently at their computer or not? Or how long ago they last pressed a key or moved the mouse?</p>
"
608789,71641,2009-03-04T00:17:13Z,4,django- run a script from admin,"<p>I would like to write a script that is not activated by a certain URL, but by clicking on a link from the admin interface.
How do I do this?
Thanks!</p>
"
608809,25282,2009-03-04T00:24:57Z,5,Getting the name of the active window,"<p>I want to write a python script on Windows that saves the title of the program that the user uses at a given time like the <a href=""http://www.rescuetime.com"">http://www.rescuetime.com</a> .
I don't want to use rescuetime because of privacy consideration but instead write a script that does something similar myself to capture data about how much I use my computer.</p>

<p>Is there some easy command that I can use to read that information?</p>
"
608854,73437,2009-03-04T00:50:22Z,2,python PIL install on shared hosting,"<p>I'm going to deploy a django app on a shared hosting provider. I installed my own python in my home, it works fine. My promblem comes with the installation of PIL, i have no support for JPEG after the compile process.</p>

<p>I know that the compiler dont find ""libjpeg"", so i tried to install it at my home, i download the tar.gz and compile it with </p>

<pre><code>./configure -prefix=$HOME/lib
 make
 make install
</code></pre>

<p>after i put the path in my.bashrc file. </p>

<p>After all i re-compile PIL and still no have the jpeg support.</p>

<p>It is possible to have the libs installed in a shared hosted enviroment? How would I do this?</p>
"
608855,60003,2009-03-04T00:50:23Z,7,Excluding a top-level directory from a setuptools package,"<p>I'm trying to put a Python project into a tarball using setuptools.  The problem is that setuptools doesn't appear to like the way that the source tree was originally setup (not by me, I must add).  Everything that I actually want to distribute is in the top-level directory, rather than in a subdirectory like the setuptools docs talk about.</p>

<p>The tree has a directory, <code>tests</code>, that I don't want to have in the released package.  However, using <code>exclude_package_data</code> doesn't seem to actually do any excluding, and I'd like to work out what I've done wrong.</p>

<p>My <code>setup.py</code> looks like this, in relevant part:</p>

<pre><code>setup(
  name=""project"",
  packages=[''],
  include_package_data=True,
  exclude_package_data={'': ['tests']},
  test_suite='nose.collector',
)
</code></pre>
"
608951,66451,2009-03-04T01:39:33Z,3,Creating lists using yield in Ruby and Python,"<p>I'm trying to come up with an elegant way of creating a list from a function that yields values in both Python and Ruby.</p>

<p>In Python:</p>

<pre><code>def foo(x):
    for i in range(x):
        if bar(i): yield i 
result = list(foo(100))
</code></pre>

<p>In Ruby:</p>

<pre><code>def foo(x)
  x.times {|i| yield i if bar(i)}
end
result = []
foo(100) {|x| result &lt;&lt; x}
</code></pre>

<p>Although I love working in both languages, I've always been a bit bothered by the Ruby version having to initialize the list and then fill it.  Python's <code>yield</code> results in simple iteration, which is great.  Ruby's <code>yield</code> invokes a block, which is also great, but when I just want to fill a list, it feels kinda clunky.</p>

<p>Is there a more elegant Ruby way?</p>

<p><strong>UPDATE</strong> Reworked the example to show that the number of values yielded from the function isn't necessarily equal to x.</p>
"
609169,46821,2009-03-04T03:58:35Z,1,Is there anything that cannot appear inside parentheses?,"<p>I was intrigued by <a href=""http://stackoverflow.com/questions/542929/highlighting-unmatched-brackets-in-vim/543881#543881"">this answer</a> to my question about <a href=""http://stackoverflow.com/questions/542929/highlighting-unmatched-brackets-in-vim"">getting vim to highlight unmatched brackets</a> in python code.  Specifically, I'm talking about the second part of his answer where he mentions that the C syntax highlighting is actually flagging as an error any instance of curly braces inside parens.  It is an unobtrusive cue that you have unclosed parens when all of your downstream curly braces light up in red.</p>

<p>That trick works because C syntax doesn't allow curly braces inside parentheses.  To satisfy my (morbid?) curiosity, can I do something similar with python code?  Is there anything in python syntax that isn't legal inside parentheses?</p>

<p>Note: I'm not trolling for a better answer to my other question (there are plenty of good answers there already).  I'm merely curious if this trick is even possible with python code.</p>
"
609190,11324,2009-03-04T04:10:12Z,1,How can I stop IDLE from printing giant lists?,"<p>Sometimes I'll be working with, say, a list of thousands of items in IDLE, and accidently print it out to the shell. When this happens, it crashes or at least very significaly slows down IDLE. As you can imagine, this is extremely inconvenient.
Is there a way to make it, rather than printing the entire thing, just give me a summarised [1, 2, ...] output?
Any help would be much appreciated.</p>
"
609212,73506,2009-03-04T04:23:36Z,3,PY: Url Encode without variable name,"<p>Is there a way in python to url encode list without variables names?
for example <BR>
q=['with space1', 'with space2']
<BR>
into 
qescaped=['with%20space1', 'with%20space2']</p>
"
609516,63109,2009-03-04T07:08:06Z,0,pysqlite user types in select statement,"<p>Using pysqlite how can a user-defined-type be used as a value in a comparison, e. g: “... WHERE columnName > userType”?</p>

<p>For example, I've defined a bool type with the requisite registration, converter, etc. Pysqlite/Sqlite responds as expected for INSERT and SELECT operations (bool 'True' stored as an integer 1 and returned as True).</p>

<p>But it fails when the bool is used in either “SELECT * from tasks WHERE display = True” or “... WHERE display = 'True.' “ In the first case Sqlite reports an error that there is not a column named True. And in the second case no records are returned. The select works if a 1 is used in place of True. I seem to have the same problem when using pysqlite's own date and timestamp adaptors.</p>

<p>I can work around this behavior for this and other user-types but that's not as fun. I'd like to know if using a user-defined type in a query is or is not possible so that I don't keep banging my head on this particular wall.</p>

<p>Thank you.</p>
"
609556,14838,2009-03-04T07:22:27Z,6,<class> has no foreign key to <class> in Django when trying to inline models,"<p>I need to be able to create a quiz type application with 20 some odd multiple choice questions. </p>

<p>I have 3 models: <code>Quizzes</code>, <code>Questions</code>, and <code>Answers</code>. </p>

<p>I want in the admin interface to create a quiz, and inline the quiz and answer elements.</p>

<p>The goal is to click ""Add Quiz"", and be transferred to a page with 20 question fields, with 4 answer fields per each in place. </p>

<p>Here's what I have currently:</p>

<pre><code>class Quiz(models.Model):
    label = models.CharField(blank=true, max_length=50)

class Question(models.Model):
    label = models.CharField(blank=true, max_length=50)
    quiz = models.ForeignKey(Quiz)

class Answer(models.Model):
    label = models.CharField(blank=true, max_length=50)
    question = models.ForeignKey(Question)

class QuestionInline(admin.TabularInline):
    model = Question
    extra = 20

class QuestionAdmin(admin.ModelAdmin):
    inlines = [QuestionInline]

class AnswerInline(admin.TabularInline):
    model = Answer
    extra = 4

class AnswerAdmin(admin.ModelAdmin):
    inlines = [AnswerInline]

class QuizAdmin(admin.ModelAdmin):
    inlines = [QuestionInline, AnswerInline]

admin.site.register(Question, QuestionAdmin)
admin.site.register(Answer, AnswerAdmin)
admin.site.register(Quiz, QuizAdmin)
</code></pre>

<p>I get the following error when I try to add a quiz:</p>

<pre><code>class 'quizzer.quiz.models.Answer'&gt; has no ForeignKey to &lt;class 'quizzer.quiz.models.Quiz'&gt;
</code></pre>

<p>Is this doable, or am I trying to pull too much out of the Django Admin app? </p>
"
609830,NA,2009-03-04T09:24:35Z,2,Problems title-casing a string in Python,"<p>I have a name as a string, in this example ""markus johansson"".</p>

<p>I'm trying to code a program that makes 'm' and 'j' uppercase:</p>

<pre><code>name = ""markus johansson""

for i in range(1, len(name)):
    if name[0] == 'm':
    	name[0] = ""M""
    if name[i] == "" "":
    	count = name[i] + 1
    if count == 'j':    
            name[count] = 'J'
</code></pre>

<p>I'm pretty sure this should work, but it gives me this error:</p>

<pre><code>File ""main.py"", line 5 in &lt;module&gt; 
   name[0] = ""M"" 
TypeError: 'str' object does support item assignment
</code></pre>

<p>I know there is a library function called .title(), but I want to do ""real programming"".</p>

<p>How do I fix this?</p>
"
609944,55562,2009-03-04T10:08:21Z,20,Charts in django Web Applications,"<p>I want to Embed a chart in a Web Application developed using django.</p>

<p>I have come across <a href=""http://code.google.com/p/google-chartwrapper/"">Google charts API</a>, <a href=""http://code.djangoproject.com/wiki/Charts"">ReportLab</a>, <a href=""http://home.gna.org/pychart/"">PyChart</a>, <a href=""http://matplotlib.sourceforge.net/"">MatPlotLib</a> and <a href=""http://www.advsofteng.com/?gid=misc&amp;gclid=CJLaibjeiJkCFQMwpAodXkETng"">ChartDirector</a></p>

<p>I want to do it in the server side rather than send the AJAX request to Google chart APIs, as I also want to embed the chart into the PDF.</p>

<p>Which is the best option to use, and what are the relative merits and demerits of one over the other.</p>
"
610205,86,2009-03-04T11:42:25Z,0,"Yahoo Pipes, simplejson and slashes","<p>Im trying to use <a href=""http://www.javarants.com/2008/04/13/using-google-app-engine-to-extend-yahoo-pipes/"" rel=""nofollow"">http://www.javarants.com/2008/04/13/using-google-app-engine-to-extend-yahoo-pipes/</a> as inspiration, but I'm having some troubles with the output.</p>

<p>Its obvious when testing with the console and the App Engine ""django util simplejson"":</p>

<pre><code>/cygdrive/c/Program Files/Google/google_appengine/lib/django
$ python
Python 2.5.2 (r252:60911, Dec  2 2008, 09:26:14) 
[GCC 3.4.4 (cygming special, gdc 0.12, using dmd 0.125)] on cygwin
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt; from django.utils import simplejson as json
&gt;&gt;&gt; json.dumps('/')
'""\\/""'
&gt;&gt;&gt; json.dumps('http://stackoverflow.com')
'""http:\\/\\/stackoverflow.com""
</code></pre>

<p><a href=""http://microformats.org/wiki/json"" rel=""nofollow"">As far as I can read</a> this is ok behavior:</p>

<blockquote>
  <p>In JSON only the backslash, double
  quote and ASCII control characters
  need to be escaped. Forward slashes
  may be escaped as in the URL example
  below, but do not have to be.</p>
</blockquote>

<p>But when inputting back to yahoopipes, they don't ""unescape"" the output and all my urls and html doesnt work.</p>

<p>should I really do a </p>

<pre><code>self.response.out.write(json.dumps(obj).replace('\\/','/'))
</code></pre>

<p>?</p>

<p>==== Edit ===</p>

<p>To my great suprise I see that newest simplejson downloaded from simplejson site doesnt do the ""slash"" stuff :(
So the real issue is with app engines django.util.simplejson version?</p>

<p>=== Edit again ===</p>

<p>And now Ive created an issue in the tracker for it: <a href=""http://code.google.com/p/googleappengine/issues/detail?id=1128"" rel=""nofollow"">http://code.google.com/p/googleappengine/issues/detail?id=1128</a></p>
"
610403,NA,2009-03-04T12:52:33Z,1,Catching Python exceptions using 'expect' method?,"<pre><code>import sys
try:
    	file = open(""words.txt"")
expect(IOError):

if file:
    print ""%s"" % file
else:
    print ""Cant the %s file"" % ""words.txt""
</code></pre>

<p>this gives me an a error - </p>

<pre><code>File ""main.py"", line 4 
    expect(IOError):
    SyntaxError: invaild syntax
</code></pre>

<p>What im going wrong/ how do you fix this</p>
"
610516,192337,2009-03-04T13:21:36Z,2,Is there something like CherryPy or Cerise in the Java world?,"<p><a href=""http://www.cherrypy.org/"" rel=""nofollow"">CherryPy</a> and <a href=""http://cerise.rubyforge.org/"" rel=""nofollow"">Cerise</a> are two small frameworks that implement nothing but the barebones of a web-framework and I love their simplicity: in fact I reckon that if Classic ASP was implemented that way (and didn't pretty much <em>require</em> VBScript) I could have settled for it and lived happily ever after.</p>

<p>But now I'm living at the borders of the Java world and would like to know if there's something similar to these 2 frameworks and that doesn't try to take control away from you. My requrements would be that they have an:</p>

<ul>
<li><p>a dispatcher that maps urls to methods (like CherryPy, Django, Cerise, Rails, etc...)</p></li>
<li><p>bonus points if it has a simple, yet powerful templating language (a la JSP/ASP) that is not too religious in separation of concerns</p></li>
<li><p>bonus points if it has some sort of library that helps in validating forms</p></li>
</ul>

<p>Thanks</p>

<p>--</p>
"
610883,20601,2009-03-04T14:45:59Z,737,How to know if an object has an attribute in Python,"<p>Is there a way in Python to determine if an object has some attribute?  For example:</p>

<pre><code>&gt;&gt;&gt; a = SomeClass()
&gt;&gt;&gt; a.someProperty = value
&gt;&gt;&gt; a.property
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
AttributeError: SomeClass instance has no attribute 'property'
</code></pre>

<p>How can you tell if <code>a</code> has the attribute <code>property</code> before using it?</p>
"
610892,18950,2009-03-04T14:48:19Z,9,What is a good strategy for constructing a directed graph for a game map (in Python)?,"<p>I'm developing a procedurally-generated game world in Python. The structure of the world will be similar to the MUD/MUSH paradigm of rooms and exits arranged as a directed graph (rooms are nodes, exits are edges). (Note that this is <em>not</em> necessarily an acyclic graph, though I'm willing to consider acyclic solutions.) </p>

<p>To the world generation algorithm, rooms of different sorts will be distinguished by each room's ""tags"" attribute (a set of strings). Once they have been instantiated, rooms can be queried and selected by tags (single-tag, tag intersection, tag union, best-candidate).</p>

<p>I'll be creating specific sorts of rooms using a glorified system of template objects and factory methods--I don't think the details are important here, as the current implementation will probably change to match the chosen strategy. (For instance, it would be possible to add tags and tag-queries to the room template system.)</p>

<p>For an example, I will have rooms of these sorts: <pre><code>side_street</code>, <code>main_street</code>, plaza, bar, hotel, restaurant, shop, office</pre></p>

<p>Finally, the question: what is a good strategy for instantiating and arranging these rooms to create a graph that might correspond to given rules? </p>

<p>Some rules might include: one plaza per 10,000 population; <code>main_street</code> connects to <code>plaza</code>; <code>side_street</code> connects to <code>main_street</code> or <code>side_street</code>; <code>hotel</code> favors <code>main_street</code> or <code>plaza</code> connections, and receives further tags accordingly; etc.</p>

<p>Bonus points if a suggested strategy would enable a data-driven implementation.</p>
"
611691,45955,2009-03-04T17:49:26Z,10,Django Model Inheritance. Hiding or removing fields,"<p>I want to inherit a model class from some 3rd party code. I won't be using some of the fields but want my client to be able to edit the model in Admin. Is the best bet to hide them from Admin or can I actually prevent them being created in the first place?</p>

<p>Additionally - what can I do if one of the unwanted fields is required? My first thought is to override the save method and just put in a default value.</p>
"
612372,326176,2009-03-04T20:51:03Z,95,Can you give a Django app a verbose name for use throughout the admin?,"<p>In the same way that you can give fields and models verbose names that appear in the Django admin, can you give an app a custom name?</p>
"
612468,2605,2009-03-04T21:18:13Z,1,Problem using super(python 2.5.2),"<p>I'm writing a plugin system for my program and I can't get past one thing:</p>

<pre><code>class ThingLoader(object):
'''
Loader class
'''

    def loadPlugins(self):
        '''
        Get all the plugins from plugins folder
        '''
        from diones.thingpad.plugin.IntrospectionHelper import loadClasses

        classList=loadClasses('./plugins', IPlugin)#Gets a list of 
        #plugin classes
        self.plugins={}#Dictionary that should be filled with 
        #touples of objects and theirs states, activated, deactivated.
        classList[0](self)#Runs nicelly
        foo = classList[1]
        print foo#prints &lt;class 'TestPlugin.TestPlugin'&gt;
        foo(self)#Raise an exception
</code></pre>

<p>The test plugin looks like this:</p>

<pre><code>import diones.thingpad.plugin.IPlugin as plugin
   class TestPlugin(plugin.IPlugin):
       '''
     classdocs
    '''
    def __init__(self, loader):
        self.name='Test Plugin'
        super(TestPlugin, self).__init__(loader)
</code></pre>

<p>Now the IPlugin looks like this:</p>

<pre><code>class IPlugin(object):
    '''
    classdocs
    '''
    name=''
    def __init__(self, loader):
        self.loader=loader
    def activate(self):
        pass
</code></pre>

<p>All the IPlugin classes works flawlessy by them selves, but when called by ThingLoader the program gets an exception:</p>

<pre><code>File ""./plugins\TestPlugin.py"", line 13, in __init__
    super(TestPlugin, self).__init__(loader) NameError: 
global name 'super' is not defined
</code></pre>

<p>I looked all around and I simply don't know what is going on.</p>
"
612734,72987,2009-03-04T22:21:07Z,5,Code samples for Django + SWFUpload?,"<p>Does anyone have any simple code samples for Django + <a href=""http://swfupload.org/"" rel=""nofollow"">SWFUpload</a>? I have it working perfectly in my PHP application but Django is giving me headaches.</p>
"
613007,65034,2009-03-04T23:45:09Z,1,Python one-liner to print every file in the current directory,"<p>How can I make the following one liner print every file through Python?</p>

<pre><code>python -c ""import sys;print '&gt;&gt;',sys.argv[1:]"" | dir *.*
</code></pre>

<p>Specifically would like to know how to pipe into a python -c.
DOS or Cygwin responses accepted.</p>
"
613111,73681,2009-03-05T00:20:15Z,2,Why do I get wrong results for hmac in Python but not Perl?,"<p>I'm trying to compute hmac using sha-512.</p>

<p>The Perl code:  </p>

<pre><code>use Digest::SHA qw(hmac_sha512_hex);

$key = ""\x0b""x20;
$data = ""Hi There"";

$hash = hmac_sha512_hex($data, $key);
print ""$hash\n"";
</code></pre>

<p>and gives the correct hash of   </p>

<pre><code>87aa7cdea5ef619d4ff0b4241a1d6cb02379f4e2ce4ec2787ad0b30545e17cde  
daa833b7d6b8a702038b274eaea3f4e4be9d914eeb61f1702e696c203a126854
</code></pre>

<p>Python version:  </p>

<pre><code>import hashlib, hmac

print hmac.new(""\x0b""*20, ""Hi There"", hashlib.sha512).hexdigest()
</code></pre>

<p>which gives the incorrect hash of  </p>

<pre><code>9656975ee5de55e75f2976ecce9a04501060b9dc22a6eda2eaef638966280182
477fe09f080b2bf564649cad42af8607a2bd8d02979df3a980f15e2326a0a22a
</code></pre>

<p>any ideas why the Python version is giving me the wrong hash?</p>

<p>Edit:<br />
version is<br />
    Python 2.5.1 (r251:54863, Jan 13 2009, 10:26:13)<br />
    [GCC 4.0.1 (Apple Inc. build 5465)] on darwin  </p>
"
613183,2786,2009-03-05T00:49:05Z,1837,Sort a Python dictionary by value,"<p>I have a dictionary of values read from two fields in a database: a string field and a numeric field. The string field is unique, so that is the key of the dictionary.</p>

<p>I can sort on the keys, but how can I sort based on the values?</p>

<p>Note: I have read Stack Overflow question <a href=""http://stackoverflow.com/questions/72899"">How do I sort a list of dictionaries by values of the dictionary in Python?</a> and probably could change my code to have a list of dictionaries, but since I do not really need a list of dictionaries I wanted to know if there is a simpler solution.</p>
"
613246,74020,2009-03-05T01:12:38Z,5,How does Vista Recycle bin work?,"<p>I am trying to write a python module to move files to the 'Recycle Bin' on both Mac and PC. </p>

<p>Is there a way, only from the commandline (and yes, I mean using absloutly no C#/C++/etc) to move a file into the Recycle Bin, and have it appear as a file trashed by drag and drop (or deleted via SHFileOperation, etc).</p>
"
613364,3594,2009-03-05T02:08:25Z,28,"Is there a need for a ""use strict"" Python compiler?","<p>There exist <a href=""http://stackoverflow.com/questions/35470/are-there-any-static-analysis-tools-for-python"">static analysis tools for Python</a>, but compile time checks tend to be diametrically opposed to the <a href=""http://python-history.blogspot.com/2009/01/introduction-and-overview.html"">run-time binding philosophy</a> that Python embraces. It's <em>possible</em> to wrap the standard Python interpreter with a static analysis tool to enforce some ""<a href=""http://perldoc.perl.org/strict.html"">use strict</a>""-like constraints, but we don't see any widespread adoption of such a thing.</p>

<p>Is there something about Python that makes ""use strict"" behavior unnecessary or especially undesirable?</p>

<p>Alternatively, is the ""use strict"" behavior unnecessary in Perl, despite its widespread adoption?</p>

<p>Note: By ""necessary"" I mean ""practically necessary"", not strictly necessary. Obviously you <em>can</em> write Perl without ""use strict,"" but (from what I've seen) most Perl programmers <em>do</em> use it.</p>

<p>Note: The Python interpreter-wrapper need not <em>require</em> ""use strict""-like constraints -- you could use a pseudo-pragma similar to ""use strict"" that would be ignored by the normal interpreter. I'm not talking about adding a language-level feature.</p>

<p><hr /></p>

<p>Update: Explaining what ""use strict"" does in Perl per comments. (Link to official docs is in the first paragraph.)</p>

<p>The ""use strict"" directive has three distinct components, only two of which are really interesting:</p>

<ul>
<li><p>use strict vars: Statically checks lexically scoped variable usage in your program. (Keep in mind that, in Python, there is basically only <code>global</code> scope and <code>local</code> scope). Many Python linters check for this sort of thing. Since it's the only static analysis that they can do, the linters assume you use straightforward lexical scoping and warn you about things that appear wrong in that sense until you tell them to shut up; i.e.</p>

<pre><code>FOO = 12
foo += 3
</code></pre>

<p>If you're not doing anything fancy with your namespaces this can be useful to check for typos.</p></li>
<li><p>use strict refs: Prevents symbolic namespace dereferencing. Python's closest analog is using <code>locals()</code> and <code>globals()</code> to do symbolic binding and identifier lookup.</p></li>
<li><p>use strict subs: No real analog in Python.</p></li>
</ul>
"
613471,35364,2009-03-05T03:18:42Z,23,Discovering public IP programatically,"<p>I'm behind a router, I need a simple command to discover my public ip (instead of googling what's my ip and clicking one the results)</p>

<p>Are there any standard protocols for this? I've heard about STUN but I don't know how can I use it?</p>

<p>P.S. I'm planning on writing a short python script to do it</p>
"
613777,NA,2009-03-05T06:28:20Z,0,Adding twisted code to a pygtk app,"<p>I have a simple pygtk app using urllib2, what changes should I make to add working twisted code?</p>

<p>The pbgtk2.py example it's confusing</p>
"
614205,74170,2009-03-05T10:13:47Z,2,Why is the regular expression returning an error in python?,"<p>Am trying the following regular expression in python but it returns an error</p>

<pre><code>import re
...

#read a line from a file to variable line
# loking for the pattern 'WORD' in the line ...

m=re.search('(?&lt;=[WORD])\w+',str(line))
m.group(0)
</code></pre>

<p>i get the following error:</p>

<p><strong>AttributeError: 'NoneType' object has no attribute 'group'</strong></p>
"
614458,74170,2009-03-05T11:50:50Z,0,How do i write a regular expression for the following pattern in python?,"<p>How do i look for the following pattern using regular expression in python? for the two cases</p>

<p>Am looking for str2 after the ""="" sign </p>

<ul>
<li>Case 1: <code>str1=str2</code></li>
<li>Case 2: <code>str1 = str2</code></li>
</ul>

<p>please note there can be a <strong>space or none</strong> between the either side of the ""="" sign</p>

<p>Mine is like this, but only works for one of the cases!</p>

<pre><code>m=re.search('(?&lt;=str\s\=\s)\w+','str = str2')
</code></pre>

<p>returns str2</p>

<p>Help!</p>

<p>Gath</p>
"
614518,161922,2009-03-05T12:11:07Z,2,"Tool/library for calculating intervals like ""last thursday of the month""","<p>I'm looking for a command line tool or some sort of python library (that I can then wrap), so that I can calculate dates that are specified like ""last thursday of the month"".</p>

<p>i.e. I want to let people enter human friendly text like that above and it should be able to calculate all the dates for any month/year/whatever that fulfil that.</p>

<p>Any suggestions?</p>
"
614949,407880,2009-03-05T14:19:46Z,5,Big images with cairo,"<p>I have to render a very big image (>50.000² pixel) with cairo. To do this without running out of memory I render parts of the image (&lt;1.000² pixel) one after another and merge them together later.</p>

<ol>
<li>Create 1000x1000 Surface</li>
<li>Translate to position of the current part</li>
<li>Draw image (calling the drawing instructions using pycairo)</li>
<li>Render/Save image to file (cairo_surface_write_to_png)</li>
<li>Repeat with next part</li>
</ol>

<p>Because cairos clipping algorithms are faster than my own, step three draws the whole image, even if only a part of it is visible. Most of the CPU is used in Step 3 (by python). Most of the memory is used in Step 4 (by cairo).</p>

<p>Is there a way to speed things up? Something like this?</p>

<ol>
<li>Create 1000x1000 Surface</li>
<li>Draw image</li>
<li>Move everything to position of the current part</li>
<li>Render/Save image to file</li>
<li>Repeat 3 with next part</li>
</ol>

<p>or</p>

<ol>
<li>Create 50000x50000 Surface</li>
<li>Draw image</li>
<li>Render/Save only the current part of the image to file</li>
<li>Repeat 3 with next part</li>
</ol>
"
615632,72312,2009-03-05T16:48:51Z,0,How to detect errors from compileall.compile_dir?,"<p>How do I detect an error when compiling a directory of python files using compile_dir?</p>

<p>Currently I get something on stderr, but no way to detect it in my app.
py_compile.compile() takes a 'doraise' argument, but nothing here.</p>

<p>Or is there a better way to do this from a python script?</p>

<p>Edit:</p>

<p>I fixed it with os.walk and calling py_compile.compile for each file. But the question remains.</p>
"
616187,74388,2009-03-05T19:09:49Z,2,Django labels and translations - Model Design,"<p>Lets say I have the following Django model:</p>

<pre><code>class StandardLabel(models.Model):
    id = models.AutoField(primary_key=True)
    label = models.CharField(max_length=255)
    abbreviation = models.CharField(max_length=255)
</code></pre>

<p>Each label has an ID number, the label text, and an abbreviation. Now, I want to have these labels translatable into other languages. What is the best way to do this?</p>

<p>As I see it, I have a few options:</p>

<p>1: Add the translations as fields on the model:</p>

<pre><code>class StandardLabel(models.Model):
    id = models.AutoField(primary_key=True)
    label_english = models.CharField(max_length=255)
    abbreviation_english = models.CharField(max_length=255)
    label_spanish = models.CharField(max_length=255)
    abbreviation_spanish = models.CharField(max_length=255)
</code></pre>

<p>This is obviously not ideal - adding languages requires editing the model, the correct field name depends on the language.</p>

<p>2: Add the language as a foreign key:</p>

<pre><code>class StandardLabel(models.Model):
    id = models.AutoField(primary_key=True)
    label = models.CharField(max_length=255)
    abbreviation = models.CharField(max_length=255)
    language = models.ForeignKey('languages.Language')
</code></pre>

<p>This is much better, now I can ask for all labels with a certain language, and throw them into a dict:</p>

<pre><code>labels = StandardLabel.objects.filter(language=1)
labels = dict((x.pk, x) for x in labels)
</code></pre>

<p>But the problem here is that the labels dict is meant to be a lookup table, like so:</p>

<pre><code>x = OtherObjectWithAReferenceToTheseLabels.object.get(pk=3)
thelabel = labels[x.labelIdNumber].label
</code></pre>

<p>Which doesn't work if there is a row per label, possibly with multiple languages for a single label. To solve that one, I need another field:</p>

<pre><code>class StandardLabel(models.Model):
    id = models.AutoField(primary_key=True)
    group_id = models.IntegerField(db_index=True)
    label = models.CharField(max_length=255)
    abbreviation = models.CharField(max_length=255)
    language = models.ForeignKey('languages.Language')
    class Meta:
        unique_together=((""group_id"", ""language""),)
#and I need to group them differently:
labels = StandardLabel.objects.filter(language=1)
labels = dict((x.group_id, x) for x in labels)
</code></pre>

<p>3: Throw label text out into a new model:</p>

<pre><code>class StandardLabel(models.Model):
    id = models.AutoField(primary_key=True)
    text = models.ManyToManyField('LabelText')

class LabelText(models.Model):
    id = models.AutoField(primary_key=True)
    label = models.CharField(max_length=255)
    abbreviation = models.CharField(max_length=255)
    language = models.ForeignKey('languages.Language')

labels = StandardLabel.objects.filter(text__language=1)
labels = dict((x.pk, x) for x in labels)
</code></pre>

<p>But then this doesn't work, and causes a database hit every time I reference the label's text:</p>

<pre><code>x = OtherObjectWithAReferenceToTheseLabels.object.get(pk=3)
thelabel = labels[x.labelIdNumber].text.get(language=1)
</code></pre>

<p>I've implemented option 2, but I find it very ugly - i don't like the group_id field, and I can't think of anything better to name it. In addition, StandardLabel as i'm using it is an abstract model, which I subclass to get different label sets for different fields.</p>

<p>I suppose that if option 3 /didn't/ hit the database, it's what I'd choose. I believe the real problem is that the filter <code>text__language=1</code> doesn't cache the <code>LabelText</code> instances, and so the DB is hit when I <code>text.get(language=1)</code></p>

<p>What are your thoughts on this? Can anyone recommend a cleaner solution?</p>

<p><strong>Edit</strong>: Just to make it clear, these are not form labels, so the Django Internationalization system doesn't help.</p>
"
616416,34329,2009-03-05T20:09:17Z,3,Is it possible to remove recursion from this function?,"<p>I have been playing with this a while, and just cannot see an obvious solution. I want to remove the recursion from the XinY_Go function.</p>

<pre><code>def XinY_Go(x,y,index,slots):
   if (y - index) == 1:
      slots[index] = x
      print slots
      slots[index] = 0
      return
   for i in range(x+1):
      slots[index] = x-i
      XinY_Go(x-(x-i), y, index + 1, slots)

def XinY(x,y):
   return XinY_Go(x,y,0,[0] * y)
</code></pre>

<p>The function is calculating the number of ways to put X marbles in Y slots. Here is some sample output:</p>

<pre>
 >>> xy.XinY(1,2)
 [1, 0]
 [0, 1]
 >>> xy.XinY(2,3)
 [2, 0, 0]
 [1, 1, 0]
 [1, 0, 1]
 [0, 2, 0]
 [0, 1, 1]
 [0, 0, 2]
</pre>
"
616440,19741,2009-03-05T20:16:30Z,5,Python in tcsh,"<p>I don't have much experience with tcsh, but I'm interested in learning. I've been having issues getting Python to see PYTHONPATH. I can echo $PYTHONPATH, and it is correct, but when I start up Python, my paths do not show up in sys.path. Any ideas?</p>

<p>EDIT:</p>

<pre><code>[dmcdonal@tg-steele ~]$ echo $PYTHONPATH
/home/ba01/u116/dmcdonal/PyCogent-v1.1

&gt;&gt;&gt; from sys import path
&gt;&gt;&gt; from os import environ
&gt;&gt;&gt; path
['', '/apps/steele/Python-2.5.2/lib/python2.5/site-packages/setuptools-0.6c8-py2.5.egg', '/apps/steele/Python-2.5.2/lib/python2.5/site-packages/FiPy-2.0-py2.5.egg', '/apps/steele/Python-2.5.2', '/apps/steele/Python-2.5.2/lib/python25.zip', '/apps/steele/Python-2.5.2/lib/python2.5', '/apps/steele/Python-2.5.2/lib/python2.5/plat-linux2', '/apps/steele/Python-2.5.2/lib/python2.5/lib-tk', '/apps/steele/Python-2.5.2/lib/python2.5/lib-dynload', '/apps/steele/Python-2.5.2/lib/python2.5/site-packages', '/apps/steele/Python-2.5.2/lib/python2.5/site-packages/Numeric']
&gt;&gt;&gt; environ['PYTHONPATH']
'/apps/steele/Python-2.5.2'
</code></pre>
"
616645,63439,2009-03-05T21:12:13Z,105,How do I duplicate sys.stdout to a log file in python?,"<p>Edit: Since it appears that there's either no solution, or I'm doing something so non-standard that nobody knows - I'll revise my question to also ask: What is the best way to accomplish logging when a python app is making a lot of system calls?</p>

<p>My app has two modes.  In interactive mode, I want all output to go to the screen as well as to a log file, including output from any system calls.  In daemon mode, all output goes to the log.  Daemon mode works great using os.dup2().  I can't find a way to ""tee"" all output to a log in interactive mode, without modifying each and every system call.</p>

<p><hr /></p>

<p>In other words, I want the functionality of the command line 'tee' for any output generated by a python app, <strong>including system call output</strong>.</p>

<p>To clarify: </p>

<p>To redirect all output I do something like this, and it works great:</p>

<pre><code># open our log file
so = se = open(""%s.log"" % self.name, 'w', 0)

# re-open stdout without buffering
sys.stdout = os.fdopen(sys.stdout.fileno(), 'w', 0)

# redirect stdout and stderr to the log file opened above
os.dup2(so.fileno(), sys.stdout.fileno())
os.dup2(se.fileno(), sys.stderr.fileno())
</code></pre>

<p>The nice thing about this is that it requires no special print calls from the rest of the code.  The code also runs some shell commands, so it's nice not having to deal with each of their output individually as well.</p>

<p>Simply, I want to do the same, except <em>duplicate</em> instead of redirect.</p>

<p>At first blush, I thought that simply reversing the dup2's should work.  Why doesn't it?  Here's my test: </p>

<pre><code>import os, sys

### my broken solution:
so = se = open(""a.log"", 'w', 0)
sys.stdout = os.fdopen(sys.stdout.fileno(), 'w', 0)

os.dup2(sys.stdout.fileno(), so.fileno())
os.dup2(sys.stderr.fileno(), se.fileno())
###

print ""kljhf sdf""

os.spawnve(""P_WAIT"", ""/bin/ls"", [""/bin/ls""], {})
os.execve(""/bin/ls"", [""/bin/ls""], os.environ)
</code></pre>

<p>The file ""a.log"" should be identical to what was displayed on the screen.</p>
"
617097,19741,2009-03-05T23:07:10Z,4,Iterative version of Python's deepcopy,"<p>Is there an existing implementation of an iterative version of deepcopy for Python 2.5.2? The deepcopy method available from the copy module is recursive and fails on large trees. I am not in a position where we can safely increase the stack limit at runtime.</p>

<p>EDIT</p>

<p>I did track this down:</p>

<p><a href=""http://code.activestate.com/recipes/302535/"" rel=""nofollow"">http://code.activestate.com/recipes/302535/</a></p>

<p>I haven't tested it, but it looks like it has potential.</p>
"
617202,36182,2009-03-05T23:46:26Z,11,How do I detect if my appengine app is being accessed by an iphone/ipod touch?,"<p>I need to render the page differently if it's acessed by an iphone/ipod touch. I suppose the information is in the request object, but what would be the syntax?</p>
"
617308,74493,2009-03-06T00:30:08Z,2,"Python Popen, closing streams and multiple processes","<p>I have some data that I would like to gzip, uuencode and then print to standard out.  What I basically have is:</p>

<pre><code>compressor = Popen(""gzip"", stdin = subprocess.PIPE, stdout = subprocess.PIPE)
encoder    = Popen([""uuencode"", ""dummy""], stdin = compressor.stdout)
</code></pre>

<p>The way I feed data to the compressor is through compressor.stdin.write(stuff).</p>

<p>What I really need to do is to send an EOF to the compressor, and I have no idea how to do it.</p>

<p>At some point, I tried compressor.stdin.close() but that doesn't work -- it works well when the compressor writes to a file directly, but in the case above, the process doesn't terminate and stalls on compressor.wait().</p>

<p>Suggestions?  In this case, gzip is an example and I really need to do something with piping the output of one process to another.</p>

<p>Note:  The data I need to compress won't fit in memory, so communicate isn't really a good option here.  Also, if I just run </p>

<pre><code>compressor.communicate(""Testing"")
</code></pre>

<p>after the 2 lines above, it still hangs with the error</p>

<pre>
  File ""/usr/lib/python2.4/subprocess.py"", line 1041, in communicate
    rlist, wlist, xlist = select.select(read_set, write_set, [])
</pre>
"
617892,2220518,2009-03-06T06:55:18Z,0,Poplib not working correctly?,"<p>I want to get all the messages from my gmail inbox, but I am facing 2 problems.</p>

<ol>
<li>It does not get all the emails, (as per the count in stat function)</li>
<li>The order of emails it get is random.</li>
</ol>

<p>I am unsure if its the problem with poplib or gmail pop server.</p>

<p>What am I missing here?</p>
"
617952,51532,2009-03-06T07:27:36Z,1,How do I make this python command line an alias in bash?,"<p>I want a quick an easy way to check my ip address after reading a recent question that had been answered on SO. For future reference, is there a way to make the following alias work?</p>

<pre><code>alias myip='python -c ""from urllib import urlopen; print urlopen(""http://whatismyip.appjet.net"").read()[:-1]""'
</code></pre>
"
618093,46646,2009-03-06T08:49:08Z,30,How to find whether a number belongs to a particular range in Python?,"<p>Suppose I want to check if <code>x</code> belongs to range 0 to 0.5. How can I do it?</p>
"
618429,46308,2009-03-06T10:51:27Z,1,Prevent wxPython from showing 'Unhandled exception' dialog,"<p>I have complex GUI application written in Python and wxPython.</p>

<p>I want it to be certified for Windows Vista, so it has to crash in a way that causes Windows Error Reporting dialog (The one that asks ""<em>Do you want to send report to Microsoft?</em>"") to appear. This is relevant to test case no 32 from ""<em>Certified for Windows Vista Test Cases</em>"" document.</p>

<p>Unfortunately when I crash my app with <code>ThreadHijacker</code> tool wxPython shows message like:</p>

<pre>Unhandled exception
---------------------------
An unhandled exception occurred. Press ""Abort"" to terminate the program,
""Retry"" to exit the program normally and ""Ignore"" to try to continue.
---------------------------
Abort   Retry   Ignore</pre>

<p>How can I prevent wxPython from showing this message? I have custom <code>sys.excepthook</code>, but it seems that this dialog is shown before my except hook can interfere.</p>

<p><strong>EDIT:</strong> </p>

<p>wxWidgets <a href=""http://docs.wxwidgets.org/trunk/classwx%5Fapp%5Fconsole.html#ca806b41cf74fd6166e4fb2e2708e9bf"" rel=""nofollow"">docs</a> says that <em>wxAppConsole::OnExceptionInMainLoop</em> is called and under MSW it displays some fancy dialog that allows user to choose between the different options. It seems however, that wxPython doesn't allow overloading that function... Does anyone know how to change default behaviour of <em>wxAppConsole::OnExceptionInMainLoop</em> in wxPython?<br />
I prefer solutions that are on Python level over those that go into C/C++</p>

<p><strong>EDIT2:</strong></p>

<p>All in all, I asked at wxPython mailing list, and Robin Dunn answered that he'll look into making <em>wxAppConsole::OnExceptionInMainLoop</em> overridable in next releases of wxPython. Since I couldn't wait, I had to compile my own version of wxPython which does not include that function. It turned out that the presence of  <em>wxAppConsole::OnExceptionInMainLoop</em> function can be enabled/disabled by proper setting of compilation flags.</p>
"
618551,8482,2009-03-06T11:36:13Z,7,Python regex split a string by one of two delimiters,"<p>I wanted to cut up a string of email addresses which may be separated by any combination of commas and white-space.</p>

<p>And I thought it would be pretty straight-forward :</p>

<pre><code>sep = re.compile('(\s*,*)+')
print sep.split(""""""a@b.com, c@d.com

   e@f.com,,g@h.com"""""")
</code></pre>

<p>But it isn't. I can't find a regex that won't leave some empty slots like this :</p>

<pre><code>['a@b.com', '', 'c@d.com', '', 'e@f.com', '', 'g@h.com']
</code></pre>

<p>I've tried various combinations, but none seem to work. Is this, in fact, possible, with regex?</p>
"
618557,66422,2009-03-06T11:39:14Z,34,Django: using <select multiple> and POST,"<p>I'm using something like this in my template</p>

<pre><code>&lt;select multiple=""multiple""  name=""services"" id=""services"" size=""5""&gt;
    {% for service in services %}
    	&lt;option value=""{{service.id}}""&gt;{{service}}&lt;/option&gt;
    {% endfor %}
&lt;/select&gt;
</code></pre>

<p>When I view the POST data in Firebug or the Django debug, I see it only sends one value.  Am I doing something wrong or misunderstanding a concept?</p>
"
618827,12138,2009-03-06T13:19:58Z,8,Optimizing Jinja2 Environment creation,"<p>My application is running on Google App Engine and most of requests constantly gets yellow flag due to high CPU usage. Using profiler I tracked the issue down to the routine of creating <code>jinja2.Environment</code> instance.</p>

<p>I'm creating the instance at module level:</p>

<pre><code>from jinja2 import Environment, FileSystemLoader
jinja_env = Environment(loader=FileSystemLoader(TEMPLATE_DIRS))
</code></pre>

<p>Due to the Google AppEngine operation mode (CGI), this code can be run upon each and every request (their module import cache seems to cache modules for seconds rather than for minutes).</p>

<p>I was thinking about storing the environment instance in memcache, but it seems to be not picklable. <code>FileSystemLoader</code> instance seems to be picklable and can be cached, but I did not observe any substantial improvement in CPU usage with this approach.</p>

<p>Anybody can suggest a way to decrease the overhead of creating <code>jinja2.Environment</code> instance?</p>

<p><strong>Edit</strong>: below is (relevant) part of profiler output.</p>

<pre><code>222172 function calls (215262 primitive calls) in 8.695 CPU seconds

 ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     33    1.073    0.033    1.083    0.033 {google3.apphosting.runtime._apphosting_runtime___python__apiproxy.Wait}
438/111    0.944    0.002    2.009    0.018 /base/python_dist/lib/python2.5/sre_parse.py:385(_parse)
   4218    0.655    0.000    1.002    0.000 /base/python_dist/lib/python2.5/pickle.py:1166(load_long_binput)
      1    0.611    0.611    0.679    0.679 /base/data/home/apps/with-the-flow/1.331879498764931274/jinja2/environment.py:10()
</code></pre>

<p>One call, but as far I can see (and this is consistent across all my GAE-based apps), the most expensive in the whole request processing cycle.</p>
"
618910,36832,2009-03-06T13:48:08Z,4,dateutil.rrule.rrule.between() gives only dates after now,"<p>From the IPython console:</p>

<pre><code>In [16]: b
Out[16]: datetime.datetime(2008, 3, 1, 0, 0)

In [17]: e
Out[17]: datetime.datetime(2010, 5, 2, 0, 0)

In [18]: rrule(MONTHLY).between(b, e, inc=True)
Out[18]:
[datetime.datetime(2009, 3, 6, 14, 42, 1),
 datetime.datetime(2009, 4, 6, 14, 42, 1),
 datetime.datetime(2009, 5, 6, 14, 42, 1),
 datetime.datetime(2009, 6, 6, 14, 42, 1),
 datetime.datetime(2009, 7, 6, 14, 42, 1),
 datetime.datetime(2009, 8, 6, 14, 42, 1),
 datetime.datetime(2009, 9, 6, 14, 42, 1),
 datetime.datetime(2009, 10, 6, 14, 42, 1),
 datetime.datetime(2009, 11, 6, 14, 42, 1),
 datetime.datetime(2009, 12, 6, 14, 42, 1),
 datetime.datetime(2010, 1, 6, 14, 42, 1),
 datetime.datetime(2010, 2, 6, 14, 42, 1),
 datetime.datetime(2010, 3, 6, 14, 42, 1),
 datetime.datetime(2010, 4, 6, 14, 42, 1)]
</code></pre>

<p>How do I make <code>between()</code> return dates starting from the begining (<code>b</code>) date?</p>
"
618958,71809,2009-03-06T14:04:56Z,4,Python build/release system,"<p>I started using Pyant recenently to do various build/release tasks but have recently discovered that development for this project has ended.</p>

<p>I did some research and can't seem to find any other Python build scripts that are comparable. Just wondering if anyone can recommend one? I basically need it to do what ANT does - do SVN updates, move/copy files, archive etc using an XML file.</p>

<p>Thanks,
g</p>
"
618960,8482,2009-03-06T14:06:27Z,6,Python metaclasses,"<p>I've been hacking classes in Python like this:</p>

<pre><code>def hack(f,aClass) :
  class MyClass(aClass) :
     def f(self) :
       f()
  return MyClass

A = hack(afunc,A)
</code></pre>

<p>Which looks pretty clean to me. It takes a class, A, creates a new class derived from it that has an extra method, calling f, and then reassigns the new class to A.</p>

<p>How does this differ from metaclass hacking in Python? What are the advantages of using a <strong>metaclass</strong> over this?</p>
"
619163,55366,2009-03-06T15:05:34Z,1,Set the size of wx.GridBagSizer dynamically,"<p>I'm creating an app where I drag button widgets into a panel. I would like to have a visible grid in the panel where i drop the widgets so the widgets will be aligned to the grid.</p>

<p>I guess it isn't hard making a grid where the squares are 15x15 pixels using a GridBagSizer(since the widgets will span between multiple cells), but how can the number of squares be made dynamically according to the size of the panel?</p>

<p>Do I have to calculate how many squares i need to fill the panel on init and on each resize?</p>

<p>Using python and wxpython btw.</p>

<p>Oerjan Pettersen</p>
"
619384,60655,2009-03-06T16:11:46Z,2,Tools to ease executing raw SQL with Django ORM,"<p>I often need to execute custom sql queries in django, and manually converting query results into objects every time is kinda painful. I wonder how fellow Slackers deal with this. Maybe someone had written some kind of a library to help dealing with custom SQL in Django?</p>
"
619437,40149,2009-03-06T16:25:49Z,28,"What does PyPy have to offer over CPython, Jython, and IronPython?","<p>From what I have seen and read on blogs, PyPy is a very ambitious project. What are some advantages it will bring to the table over its siblings (CPython, Jython, and IronPython)? Is it speed, cross-platform compatibility (including mobile platforms), the ability to use c-extensions without the GIL, or is this more of a technical exercise on what can be done?</p>
"
619575,31610,2009-03-06T16:52:36Z,2,Will python provide enough performance for a proxy?,"<p>I want to start writing a http proxy that will modify responses according to some rules/filters I will configure. However, before I start coding it, I want to make sure I'm making the right choice in going with Python. Later, this tool would have to be able to process a lot of requests, so, I would like to know I can count on it later on to be able to perform when ""push comes to shove"".</p>
"
619592,74169,2009-03-06T16:56:50Z,0,"What is the best way to represent a schedule in a database, via Python/Django?","<p>I am writing a backup system in Python, with a Django front-end. I have decided to implement the scheduling in a slightly strange way - the client will poll the server (every 10 minutes or so), for a list of backups that need doing. The server will only respond when the time to backup is reached. This is to keep the system platform independent - so that I don't rely on cronjobs or suchlike. Therefore the Django front-end (which exposes an XML-RPC API) has to store the schedule in a database, and interpret that schedule to decide if a client should start backing up or not.</p>

<p>At present, the schedule is stored using 3 fields: days, hours and minutes. These are comma-separated lists of integers, representing the days of the week (0-6), hours of the day (0-23) and minutes of the hour (0-59). To decide whether a client should start backing up or not is a horribly inefficient operation - Python must loop over all the days since a time 7-days in the past, then the hours, then the minutes. I have done some optimization to make sure it doesn't loop too much - but still!</p>

<p>This works relatively well, although the implementation is pretty ugly. The problem I have is how to display and interpret this information via the HTML form on the front-end. Currently I just have huge lists of multi-select fields, which obviously doesn't work well.</p>

<p>Can anyone suggest a different method for implementing the schedule that would be more efficient, and also easier to represent in an HTML form?</p>
"
619618,1515117,2009-03-06T17:05:11Z,6,Using pixel fonts in PIL,"<p>I am creating images using PIL that contain numerous exactly placed text strings.  My first attempt was to convert pixel fonts into the pil-compatible format as described <a href=""http://llbb.wordpress.com/2006/11/24/making-pil-font-for-python-image-library/"" rel=""nofollow"">here</a>.  For example, I download the Silksreen font and convert it:</p>

<pre><code>otf2bdf -p 8pt -o fonts/slkscr.bdf fonts/slkscr.ttf 
pilfont.py fonts/slkscr.bdf
</code></pre>

<p>I can then use the font in PIL like so:</p>

<pre><code>import Image, ImageDraw, os, sys, ImageFont
im = Image.new(""RGB"", (40,10))
draw = ImageDraw.Draw(im)
fn = ImageFont.load('fonts/slkscr.pil')
draw.text((0,0), ""Hello"", font=fn)
del draw
# write to stdout
im.save(sys.stdout, ""PNG"")
</code></pre>

<p>However, the resulting image (<img src=""http://i.stack.imgur.com/L4koP.png"" alt=""alt text"">) does not reflect what the font <a href=""http://kottke.org/plus/type/silkscreen/"" rel=""nofollow"">should look like</a>.</p>

<p>What procedure should I be using to convert and use pixel fonts so that they render as intended?</p>

<p>Thanks in advance.</p>
"
619620,2147,2009-03-06T17:05:24Z,2,Do Django custom authentication backends need to take a password?,"<p>Here's how my university handles authentication:  we redirect the user to a website, they enter in their username and password, then they get redirected back to us with the username and a login key passed in the query string.  When we get the user back, we call a stored procedure in the university's database that takes the username, login key, and ip address and tells us if this is valid.</p>

<p>I've got a Django custom authentication backend set up to handle our end of all of this.  Does it make any difference one way or another whether I make it able to accept a password argument (since we're not actually taking their password)?  Right now, I have it set up so that it takes the login key as the password argument.  Would it be good, bad, or neither for me to change this to take this as say, login_key instead of as password?</p>
"
619804,74817,2009-03-06T17:58:49Z,2,Supplying password to wrapped-up MySQL,"<p>Greetings.</p>

<p>I have written a little python script that calls MySQL in a subprocess.  [Yes, I know that the right approach is to use MySQLdb, but compiling it under OS X Leopard is a pain, and likely more painful if I wanted to use the script on computers of different architectures.]  The subprocess technique works, provided that I supply the password in the command that starts the process; however, that means that other users on the machine could see the password.</p>

<p>The original code I wrote can be seen <a href=""http://armagons-isles.blogspot.com/2009/03/python-subprocess-wrapper-for-mysql.html"" rel=""nofollow"">here</a>.</p>

<p>This variant below is very similar, although I will omit the test routine to keep it shorter:</p>

<pre><code>#!/usr/bin/env python

from subprocess import Popen, PIPE

# Set the command you need to connect to your database
mysql_cmd_line = ""/Applications/MAMP/Library/bin/mysql -u root -p""
mysql_password = ""root""

def RunSqlCommand(sql_statement, database=None):

    """"""Pass in the SQL statement that you would like executed.
    Optionally, specify a database to operate on.  Returns the result.""""""

    command_list = mysql_cmd_line.split()
    if database:
        command_list.append(database)

    # Run mysql in a subprocess
    process = Popen(command_list, stdin=PIPE, stdout=PIPE,
                    stderr=PIPE, close_fds=True)

    #print ""Asking for output""
    #needs_pw = process.stdout.readline()
    #print ""Got: "" + needs_pw

    # pass it in the password
    process.stdin.write(mysql_password + ""\n"")

    # pass it our commands, and get the results
    #(stdout, stderr) = process.communicate( mysql_password + ""\n"" + sql_statement)
    (stdout, stderr) = process.communicate( sql_statement )

    return stdout
</code></pre>

<p>I am suspicious that the MySQL password prompt is not actually on stdout (or stderr), although I don't know how that could be or if it means I could trap it.</p>

<p>I did try reading output first, before supplying a password, but it didn't work.  I also tried passing the password</p>

<p>Again, if I supply the password on the command line (and thus have no code between the ""Popen"" and ""communicate"" functions) my wrapped function works.</p>

<p><hr /></p>

<p><em>Two new thoughts, months laster:</em></p>

<ol>
<li><p>Using <a href=""http://pexpect.sourceforge.net/pexpect.html"" rel=""nofollow"">pexpect</a> would let me supply a password.  It simulates a tty and gets all output, even that which bypasses stdout and stderr.</p></li>
<li><p>There is a project called <a href=""https://launchpad.net/myconnpy"" rel=""nofollow"">MySQL Connector/Python</a>, in early alpha, that will allow provide a pure python library for accessing MySQL, without requiring you to compile any C-code.</p></li>
</ol>
"
620154,54283,2009-03-06T19:44:12Z,4,Progammatically restart windows to make system logs think user logged out,"<p>I'm hoping to make a quick script to log-out/restart windows at a set time. For example, start a script to ""Restart windows in ten minutes"". For this implementation I don't need it to run in the background or pop=up on its own. I just want to set the script and walk away knowing that the computer will log-out/restart at a set time. </p>

<p><strong>Why would I want to do this?</strong>
On a corporate network, sometimes system logs will be reviewed and if one is found to be leaving X minutes too early, then complications arise. Kinda annoying.</p>

<p><strong>Did I already Google it?</strong>
Yep. I found <a href=""http://kvance.livejournal.com/985732.html"" rel=""nofollow"">this</a>. But it wasn't too helpful. It requires a framework I couldn't find, and likely couldn't install since we don't have admin privs on these machines.</p>

<p>I'd like to use Python for it, and I'd really like for it to look like the user did it, not a script. Perhaps screen scraping would be the only way, and if so just point me to a quick guide or IDE and I'll post the source code for everyone.</p>

<p><strong>EDIT</strong>: I also ran into <a href=""http://sourceforge.net/projects/pywinauto/"" rel=""nofollow"">this</a></p>

<p>Thanks in advance</p>
"
620305,40785,2009-03-06T20:34:32Z,60,Convert Year/Month/Day to Day of Year in Python,"<p>I'm using the Python ""datetime"" module, i.e.:</p>

<pre><code>&gt;&gt;&gt; import datetime
&gt;&gt;&gt; today = datetime.datetime.now()
&gt;&gt;&gt; print today
2009-03-06 13:24:58.857946
</code></pre>

<p>and I would like to compute the day of year that is sensitive of leap years. e.g. oday (March 6, 2009) is the 65th day of 2009.  <a href=""http://mistupid.com/calendar/dayofyear.htm"">Here's web-based DateTime calculator</a>.</p>

<p>Anyway, I see a two options:</p>

<ol>
<li><p>Create a number_of_days_in_month array = [31, 28, ...], decide if it's a leap year, manually sum up the days</p></li>
<li><p>Use datetime.timedelta to make a guess &amp; then binary search for the correct day of year:</p></li>
</ol>

<p>.</p>

<pre><code>&gt;&gt;&gt; import datetime
&gt;&gt;&gt; YEAR = 2009
&gt;&gt;&gt; DAY_OF_YEAR = 62
&gt;&gt;&gt; d = datetime.date(YEAR, 1, 1) + datetime.timedelta(DAY_OF_YEAR - 1)
</code></pre>

<p>These both feel pretty clunky &amp; I have a gut feeling that there's a more ""Pythonic"" way of calculating day of year.  Any ideas/suggestions?</p>
"
620342,36680,2009-03-06T20:42:11Z,16,How to import a Django project settings.py Python file from a sub-directory?,"<p>I created a sub-directory of my Django project called <code>bin</code> where I want to put all command-line run Python scripts.  Some of these scripts need to import my Django project <code>settings.py</code> file that is in a parent directory of <code>bin</code>.</p>

<p>How can I import the <code>settings.py</code> file from a sub-directory of the project?</p>

<p>The code that I use in my command-line script to set into the ""Django context"" of the project is:</p>

<pre><code>from django.core.management import setup_environ
import settings
setup_environ(settings)
</code></pre>

<p>This works fine if the script is in the root directory of my project.</p>

<p>I tried the following two hacks to import the <code>settings.py</code> file and then setup the project:</p>

<pre><code>import os
os.chdir("".."")

import sys
sys.path = [str(sys.path[0]) + ""/../""] + sys.path
</code></pre>

<p>The cruel hack can import <code>settings.py</code>, but then I get the error:</p>

<pre><code>project_module = __import__(project_name, {}, {}, [''])
ValueError: Empty module name
</code></pre>
"
620367,63503,2009-03-06T20:49:52Z,74,How to jump to a particular line in a huge text file?,"<p>Are there any alternatives to the code below:</p>

<pre><code>startFromLine = 141978 # or whatever line I need to jump to

urlsfile = open(filename, ""rb"", 0)

linesCounter = 1

for line in urlsfile:
    if linesCounter &gt; startFromLine:
        DoSomethingWithThisLine(line)

    linesCounter += 1
</code></pre>

<p>If I'm processing a huge text file (~15MB) with lines of unknown but different length, and need to jump to a particular line which number I know in advance? I feel bad by processing them one by one when I know I could ignore at least first half of the file. Looking for more elegant solution if there is any.</p>
"
620530,9161,2009-03-06T21:37:18Z,0,What's the best way to find the closest matching type to an existing type?,"<p>I've got a registry of classes and types in Python 2.5, like so:</p>

<pre><code>class ClassA(object):
    pass

class ClassB(ClassA):
    pass 

MY_TYPES = {
    basestring : 'A string',
    int : 'An integer',
    ClassA : 'This is ClassA or a subclass',
}
</code></pre>

<p>I'd like to be able to pass types to a function, and have it look up the closest matching type in the hierarchy.  So, looking up <code>str</code> would return <code>""A string""</code> and looking up <code>ClassB</code> would return <code>""This is ClassA or a subclass""</code> The problem is, I don't know how to find the superclass (or, rather, trace the MRO chain) of a type object.</p>

<p>What's the best way of handling this?</p>
"
620610,NA,2009-03-06T22:07:19Z,32,SQLAlchemy Obtain Primary Key With Autoincrement Before Commit,"<p>When I have created a table with an auto-incrementing primary key, is there a way to obtain what the primary key would be (that is, do something like reserve the primary key) without actually committing?</p>

<p>I would like to place two operations inside a transaction however one of the operations will depend on what primary key was assigned in the previous operation.</p>
"
620844,4482,2009-03-06T23:17:27Z,5,Why do I get unexpected behavior in Python isinstance after pickling?,"<p>Putting aside whether the use of <a href=""http://www.canonical.org/~kragen/isinstance/"" rel=""nofollow"">isinstance is harmful</a>, I have run into the following conundrum when trying to evaluate isinstance after serializing/deserializing an object via Pickle:</p>

<pre><code>from __future__ import with_statement
import pickle

# Simple class definition
class myclass(object):
    def __init__(self, data):
        self.data = data

# Create an instance of the class
x = myclass(100)

# Pickle the instance to a file
with open(""c:\\pickletest.dat"", ""wb"") as f:
    pickle.dump(x, f)

# Replace class with exact same definition
class myclass(object):
    def __init__(self, data):
        self.data = data

# Read an object from the pickled file
with open(""c:\\pickletest.dat"", ""rb"") as f:
    x2 = pickle.load(f)

# The class names appear to match
print x.__class__
print x2.__class__

# Uh oh, this fails...(why?)
assert isinstance(x2, x.__class__)
</code></pre>

<p>Can anyone shed some light on why isinstance would fail in this situation? In other words, why does Python think these objects are of two different classes? When I remove the second class definition, <code>isinstance</code> works fine.</p>
"
620954,31610,2009-03-07T00:10:37Z,1,do you know of any python component(s) for syntax highlighting?,"<p>Are there any easy to use python components that could be used in a GUI? It would be great to have something like JSyntaxPane for Python. I would like to know of python-only versions ( not interested in jython ) .</p>
"
621062,74936,2009-03-07T00:58:59Z,-2,Python function: Find Change from purchase amount,"<p>I'm looking for the most efficient way to figure out a change amount (Quarters, dimes, nickels, and pennies) from a purchase amount. The purchase amount must be less than $1, and the change is from one dollar. I need to know how many quarters, dimes, nickels, and pennies someone would get back. </p>

<p>Would it be best to set up a dictionary?</p>
"
621121,14838,2009-03-07T01:40:11Z,4,Django Forms Newbie Question,"<p>Alright, I'm at a loss with the Django Forms, as the documentation just doesn't seem to quite cover what I'm looking for. At least it seems to come to a screeching halt once you get past the most rudimentary of forms. I'm more than willing to take a link to <em>good</em> documentation, or a link to a good book that covers this topic, as an answer. Basically, this is how it breaks down, I have 3 models (quiz, questions, answers). I have 20 questions, with 4 potential answers (multi-choice), per quiz. The numbers can vary, but you get the point. </p>

<p>I need to create a form for these items, much like you'd expect in a multiple choice quiz. However, when I create the form by hand in the templates, rather than using django.forms, I get the following:</p>

<p>invalid literal for int() with base 10: 'test'</p>

<p>So I'm trying to mess with the django.forms, but I guess I'm just not grasping the idea of how to build a proper form out of those. Any help would be greatly appreciated, thanks.</p>

<p>For what it's worth here are the models:</p>

<pre><code>class Quiz(models.Model):
    label = models.CharField(blank=True, max_length=400)
    slug = models.SlugField()

    def __unicode__(self):
        return self.label

class Question(models.Model):
    label = models.CharField(blank=True, max_length=400)
    quiz = models.ForeignKey(Quiz)

    def __unicode__(self):
        return self.label

class Answer(models.Model):
    label = models.CharField(blank=True, max_length=400)
    question = models.ForeignKey(Question)
    correct = models.BooleanField()

    def __unicode__(self):
        return self.label
</code></pre>
"
621156,26659,2009-03-07T02:06:35Z,0,Accessing a MySQL database from python,"<p>I have been trying for the past several hours to find a working method of accessing a mysql database in python. The only thing that I've managed to get to compile and install is <code>pyodbc</code> but the necessary driver is not available for ppc leopard.  </p>

<p>I already know about <a href=""http://stackoverflow.com/questions/372885/how-to-connect-to-a-mysql-database-from-python"">this</a>.</p>

<p>UPDATE:<br />
I've gotten <code>setuptools</code> to install, but now MySQL-python won't build.</p>

<p>UPDATE:
Now I've gotten <code>sqlalchemy</code> to install but while it will show up when called by the command line it won't import when used in my cgi script.</p>
"
621212,8482,2009-03-07T02:59:08Z,8,Another Django Forms : Foreign Key in Hidden Field,"<p>Another Django Form question.</p>

<p>My form :</p>

<pre><code>class PlanForm(forms.ModelForm):    
    owner = forms.ModelChoiceField(label="""",
                                  queryset=Profile.objects.all(),
                                  widget=forms.HiddenInput())
    etc...

    class Meta:
        model = Plan
</code></pre>

<p>Owner, in the model, is a ForeignKey to a Profile.</p>

<p>When I set this form, I set the value of ""owner"" to be a Profile object.</p>

<p>But when this comes out on the form, it seems to contain the <em>name</em> of the Profile like this :</p>

<pre><code>&lt;input type=""hidden"" name=""owner"" value=""phil"" id=""id_owner"" /&gt;
</code></pre>

<p>When the form is submitted and gets back to my views.py I try to handle it like this :</p>

<pre><code>    form = PlanForm(request.POST)
    ...
    if form.is_valid():                
        plan = form.save()
        return HttpResponseRedirect('/plans/%s'%plan.id) # Redirect after POST
</code></pre>

<p>However, what I get is a type-conversion error as it fails to turn the string ""phil"" (the user's name that was saved into the ""owner"" field) into an Int to turn it into the ForeignKey.</p>

<p>So what is going on here. Should a ModelForm represent a foreign key as a number and transparently handle it? Or do I need to extract the id myself into the owner field of the form? And if so, how and when do I map it back BEFORE I try to validate the form? </p>
"
621321,14799,2009-03-07T04:44:52Z,10,How to print tuples of unicode strings in original language (not u'foo' form),"<p>I have a list of tuples of unicode objects:</p>

<pre><code>&gt;&gt;&gt; t = [('亀',), ('犬',)]
</code></pre>

<p>Printing this out, I get:</p>

<pre><code>&gt;&gt;&gt; print t
[('\xe4\xba\x80',), ('\xe7\x8a\xac',)]
</code></pre>

<p>which I guess is a list of the utf-8 byte-code representation of those strings?</p>

<p>but what I want to see printed out is, surprise:</p>

<pre><code>[('亀',), ('犬',)]
</code></pre>

<p>but I'm having an inordinate amount of trouble getting the bytecode back into a human-readable form. </p>
"
621354,60893,2009-03-07T05:17:34Z,14,How to slice a list from an element n to the end in python?,"<p>I'm having some trouble figuring out how to slice python lists, it is illustrated as follows:</p>

<pre><code>&gt;&gt;&gt; test = range(10)
&gt;&gt;&gt; test
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
&gt;&gt;&gt; test[3:-1]
[3, 4, 5, 6, 7, 8]
&gt;&gt;&gt; test[3:0]
[]
&gt;&gt;&gt; test[3:1]
[]
&gt;&gt;&gt; test
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
</code></pre>

<p>To my understanding, python slice means lst[start:end], and including start, excluding end. So how would i go about finding the ""rest"" of a list starting from an element n?</p>

<p>Thanks a lot for all your help!</p>
"
621560,75010,2009-03-07T08:59:27Z,4,What does re.compile(r'[[]]') match?,"<p>With Python's re module, why do the following act differently:</p>

<pre><code>&gt;&gt;&gt; r = re.compile(r'[][]')
&gt;&gt;&gt; r.findall(r'[]')
['[', ']']
&gt;&gt;&gt; r = re.compile(r'[[]]')
&gt;&gt;&gt; r.findall(r'[]')
['[]']
&gt;&gt;&gt; r.findall(r'][')
[]
</code></pre>
"
621649,32032,2009-03-07T10:36:54Z,7,Python and random keys of 21 char max,"<p>I am using an api which takes a name of 21 char max to represent an internal session which has a lifetime of around ""two days"". I would like the name not to be meaningfull using some kind of hasing ? md5 generates 40 chars, is there something else i could use ?</p>

<p>For now i use 'userid[:10]' + creation time: ddhhmmss + random 3 chars.</p>

<p>Thanks,</p>
"
621802,1724701,2009-03-07T12:51:53Z,13,Choosing and deploying a comet server,"<p>I want to push data to the browser over HTTP without killing my django/python application.</p>

<p>I decided to use a comet server, to proxy requests between my application and the client (though I still haven't really figured it out properly).</p>

<p>I've looked into the following engines:
orbited
cometd
ejabberd
jetty</p>

<p>Has anyone had any experience working with these servers and deploying them? Any insight and links regarding the topics would be great. Thank you.</p>
"
621874,54964,2009-03-07T14:01:33Z,1,.cgi problem with web server,"<p><a href=""http://www.djangobook.com/en/2.0/chapter01/"" rel=""nofollow"">The code</a></p>

<pre><code>#!/usr/bin/env python

import MySQLdb

print ""Content-Type: text/html""
print 
print ""&lt;html&gt;&lt;head&gt;&lt;title&gt;Books&lt;/title&gt;&lt;/head&gt;""
print ""&lt;body&gt;"" print ""&lt;h1&gt;Books&lt;/h1&gt;"" 
print ""&lt;ul&gt;""

connection = MySQLdb.connect(user='me', passwd='letmein', db='my_db') cursor = connection.cursor() cursor.execute(“SELECT name FROM books ORDER BY pub_date DESC LIMIT 10”)

for row in cursor.fetchall():
    print ""&lt;li&gt;%s&lt;/li&gt;"" % row[0]

print ""&lt;/ul&gt;"" 
print ""&lt;/body&gt;&lt;/html&gt;""

connection.close()
</code></pre>

<p>I saved it as test.cgi to my web server. I run it by www.mysite.com/test.cgi unsuccessfully</p>

<pre><code>Internal Server Error

The server encountered an internal error or misconfiguration and was unable to complete your request.
</code></pre>

<p>How can you solve the problem?</p>

<p><strong>[edit]</strong> after the first answer</p>

<ol>
<li>test.cgi is executable (I run $ chmod +x test.cgi)</li>
<li>I use Apache. </li>
<li>I have this in .bashrc export PATH=${PATH}:~/bin </li>
<li>Python module MySQLdb is installed.</li>
<li>The code does not have smart quotes.</li>
</ol>

<p><strong>[edit]</strong> after the second answer</p>

<blockquote>
  <p>you're getting that error because you
  haven't installed the MySQLdb module
  that Python needs to talk to a MySQL
  database</p>
</blockquote>

<p>I installed MySQLdb to my system. The module works, since I can import them. 
However, I still get the same error whet I go to the www.[mysite].com/test.cgi.</p>

<p><strong>[edit]</strong></p>

<p>I am not sure about the questions</p>

<blockquote>
  <p>Are the connect() parameters correct? Is MySQL running on localhost
  at the default port?</p>
</blockquote>

<p>I run MySQL on my server. Is the question about the connect() parameters relevant here?</p>

<blockquote>
  <p>Is the SELECT statement correct?</p>
</blockquote>

<p>You mean whether I have my SQL statements such as SELECT statement correct?
I have not used any SQL queries yet.
Do I need them here?</p>
"
621968,54964,2009-03-07T15:12:02Z,2,Unable to import python-mysqldb,"<p>I installed python-mysqldb using </p>

<pre><code>sudo apt-get install python-mysqldb
</code></pre>

<p>I have tried to use it unsuccessfully. The following commands do not work in Python prompt:</p>

<pre><code>import python-mysqldb
</code></pre>

<p>Or</p>

<pre><code>import mysqldb
</code></pre>

<p>How can I solve this problem?</p>
"
622161,23903,2009-03-07T17:15:41Z,7,Python Reflection and Type Conversion,"<p>In Python, functions like str(), int(), float(), etc. are generally used to perform type conversions.  However, these require you to know at development time what type you want to convert to.  A subproblem of some Python code I'm trying to write is as follows:</p>

<p>Given two variables, <code>foo</code> and <code>bar</code>, find the type of <code>foo</code>.  (It is not known at development time, as this is generic code.)  Then, attempt to convert <code>bar</code> to whatever type <code>foo</code> is.  If this cannot be done, throw an exception.</p>

<p>For example, let's say you call the function that does this <code>conv</code>.  Its signature would look like</p>

<pre><code>def conv(foo, bar) :
    # Do stuff.
</code></pre>

<p>It would be called something like:</p>

<pre><code>result = conv(3.14, ""2.718"")  # result is now 2.718, as a float.
</code></pre>
"
622417,31610,2009-03-07T20:18:27Z,1,How to change cursor position of wxRichTextCtrl in event handler?,"<p>I have a RichTextCtrl in my application, that has a handler for <code>EVT_KEY_DOWN</code>. The code that is executed is the following :</p>

<pre><code>
def move_caret(self):
    pdb.set_trace()
    self.rich.GetCaret().Move((0,0))
    self.Refresh()


def onClick(self,event):
    self.move_caret()
    event.Skip()
</code></pre>

<p><strong>rich</strong> is my RichTextCtrl. </p>

<p>Here is what I would like it to do :</p>

<ul>
<li><p>on each key press, add the key to the control ( which is default behaviour )</p></li>
<li><p>move the cursor at the beginning of the control, first position  </p></li>
</ul>

<p>Here's what it actually does :</p>

<ul>
<li><p>it adds the key to the control</p></li>
<li><p>I inspected the caret position, and the debugger reports it's located at 0,0 but on the control, it blinks at the current position ( which is position before I pressed a key + 1 )</p></li>
</ul>

<p>Do you see anything wrong here? There must be something I'm doing wrong.</p>
"
622652,NA,2009-03-07T22:42:05Z,16,Increment Page Hit Count in Django,"<p>I have a table with an <code>IntegerField</code> (<code>hit_count</code>), and when a page is visited (for example, <code>http://site/page/3</code>) I want record ID 3's <code>hit_count</code> column in the database to increment by 1.</p>

<p>The query should be like:</p>

<pre class=""lang-sql prettyprint-override""><code>update table set hit_count = hit_count + 1 where id = 3
</code></pre>

<p>Can I do this with the standard Django Model conventions? Or should I just write the query by hand?</p>
"
622744,54964,2009-03-07T23:42:54Z,29,Unable to install Python without sudo access,"<p>I extracted, configured and used make for the installation package in my server.</p>

<p>However, I could not use <em>make install</em>. I get the error</p>

<pre><code>[~/wepapps/python/Python-2.6.1]# make install
/usr/bin/install -c python /usr/local/bin/python2.6
/usr/bin/install: cannot create regular file `/usr/local/bin/python2.6': Permission denied
make: *** [altbininstall] Error 1
</code></pre>

<p>I run the folder with</p>

<pre><code>chmod +x Python-2.6.1
</code></pre>

<p>I get still the same error.</p>

<p>How can I run <em>make install</em> without sudo access?</p>
"
622783,69062,2009-03-08T00:07:03Z,0,"Python, PIL, crop problem","<p>Can't seem to get crop working correctly, problem is, it crops a region of correct dimensions, but always from top left corner (0, 0), instead of from my passed coordinates.</p>

<pre><code>image = Image.open(input)
region = image.crop((1000,400,2000,600)
region.save(output)
</code></pre>

<p>In image.py from PIL, method _ImageCrop I've printed out.. :</p>

<pre><code>print x0, y0, x1, y1
self.__crop = x0, y0, x1, y1
</code></pre>

<p>Values seem to be correct.</p>

<p>Input is a JPEG image of size 1600x2390.</p>

<p>Python version: 2.5,
PIL version: 1.1.6</p>

<p>Any suggestions? Thanks</p>
"
622982,16417,2009-03-08T03:36:08Z,113,Django Passing Custom Form Parameters to Formset,"<blockquote>
  <p>This was fixed in Django 1.9 with <a href=""https://docs.djangoproject.com/en/1.9/topics/forms/formsets/#passing-custom-parameters-to-formset-forms"">form_kwargs</a>.</p>
</blockquote>

<p>I have a Django Form that looks like this:</p>

<pre><code>class ServiceForm(forms.Form):
    option = forms.ModelChoiceField(queryset=ServiceOption.objects.none())
    rate = forms.DecimalField(widget=custom_widgets.SmallField())
    units = forms.IntegerField(min_value=1, widget=custom_widgets.SmallField())

    def __init__(self, *args, **kwargs):
        affiliate = kwargs.pop('affiliate')
        super(ServiceForm, self).__init__(*args, **kwargs)
        self.fields[""option""].queryset = ServiceOption.objects.filter(affiliate=affiliate)
</code></pre>

<p>I call this form with something like this:</p>

<pre><code>form = ServiceForm(affiliate=request.affiliate)
</code></pre>

<p>Where <code>request.affiliate</code> is the logged in user. This works as intended.</p>

<p>My problem is that I now want to turn this single form into a formset. What I can't figure out is how I can pass the affiliate information to the individual forms when creating the formset. According to the docs to make a formset out of this I need to do something like this:</p>

<pre><code>ServiceFormSet = forms.formsets.formset_factory(ServiceForm, extra=3)
</code></pre>

<p>And then I need to create it like this:</p>

<pre><code>formset = ServiceFormSet()
</code></pre>

<p>Now how can I pass affiliate=request.affiliate to the individual forms this way?</p>
"
623054,2128,2009-03-08T04:44:41Z,3,"For my app, how many threads would be optimal?","<p>I have a simple Python web crawler. It uses SQLite to store its output and also to keep a queue. I want to make the crawler multi-threaded so that it can crawl several pages at a time. I figured i would make a thread and just run several instances of the class at once, so they all run concurrently. But the question is, how many should i run at once? should i stick to two? can i go higher? what would be a reasonable limit for a number of threads? Keep in mind that each thread goes out to a web page, downloads the html, runs a few regex searches through it, stores the info it finds in a SQLite db, and then pops the next url off the queue.</p>
"
623384,31610,2009-03-08T10:37:36Z,1,How can I insert RTF into a wxpython RichTextCtrl?,"<p>Is there a way to directly insert RTF text in a RichTextCtrl, ex:without going through <strong>BeginTextColour</strong>? I would like to use pygments together with the RichTextCtrl.</p>
"
623504,30868,2009-03-08T12:34:30Z,1,Retrieving the latitude/longitude from Google Map Mobile 3.0's MyLocation feature,"<p>I want to fetch my current latitude/longitude from Google Maps Mobile 3.0 with the help of some script, which I guess could be a Python one. Is this possible? And, more importantly: is the Google Maps Mobile API designed for such interaction? Any legal issues?</p>

<p>Basically i have a S60 phone that doesnt have GPS,and I have found that Google maintains its own database to link Cell IDs with lat/longs so that depending on what Cell ID I am nearest to, it can approximate my current location. So only Cel ID info from the operator won't tell me where i am on Earth until such a linking between Cell ID and latitude/longitude is available (for which I am thinking of seeking help of GMM; of course, if it provides for this...).</p>

<p>Secondly, the GMM 3.0 pushes my current latitude/longitude to the iGoogle Latitude gadget... so there should be some way by which I can fetch the same info by my custom gadget/script, right?</p>
"
623520,31610,2009-03-08T12:46:56Z,21,Why can't I directly add attributes to any python object?,"<p>I have this code:</p>

<pre><code>&gt;&gt;&gt; class G:
...   def __init__(self):
...     self.x = 20
...
&gt;&gt;&gt; gg = G()
&gt;&gt;&gt; gg.x
20
&gt;&gt;&gt; gg.y = 2000
</code></pre>

<p>And this code:</p>

<pre><code>&gt;&gt;&gt; from datetime import datetime
&gt;&gt;&gt; my_obj = datetime.now()
&gt;&gt;&gt; my_obj.interesting = 1
*** AttributeError: 'datetime.datetime' object has no attribute 'interesting'
</code></pre>

<p>From my Python knowledge, I would say that <code>datetime</code> overrides <code>setattr</code>/<code>getattr</code>, but I am not sure. Could you shed some light here?</p>

<p>EDIT: I'm not specifically interested in <code>datetime</code>. I was wondering about objects in general.</p>
"
623822,1771,2009-03-08T16:30:07Z,1,How do you add event to Trac event time line,"<p>I am writing a plug-in for Trac. I would like to add an event to the time line each time the plug-in receives some data from a Git post-receive hook.</p>

<p>Looking at <a href=""http://trac.edgewall.org/browser/trunk/trac/timeline/api.py"" rel=""nofollow"">the timeline API</a>, it seems you can only add new source of events. So you are responsible for retrieving and displaying the data. I would prefer saving my event to an existent source.</p>

<p>Where should I look in the Trac API to save events?</p>

<p>ps: my plan is to rely on a remote repository and remote web interface to the code like Github.</p>

<p>pss: The time line has to display commits from the main project git repository and its clones. I don't want to host a copy of every repository that matter to the project.</p>
"
624043,14838,2009-03-08T18:24:40Z,1,django login middleware not working as expected,"<p>A quickie, and hopefully an easy one. I'm following the docs at <a href=""http://docs.djangoproject.com/en/dev/topics/auth/"" rel=""nofollow"">http://docs.djangoproject.com/en/dev/topics/auth/</a> to get just some simple user authentication in place. I don't have any special requirements at all, I just need to know if a user is logged in or not, that's about it. I'm using the login_required decorator, and it's working exactly as I expected. I'm actually using the 'django.contrib.auth.views.login' for my login view, and the exact form they show in the docs:</p>

<pre><code>{% if form.errors %}
&lt;p&gt;Your username and password didn't match. Please try again.&lt;/p&gt;
{% endif %}

&lt;form method=""post"" action="".""&gt;
&lt;table&gt;
&lt;tr&gt;
    &lt;td&gt;{{ form.username.label_tag }}&lt;/td&gt;
    &lt;td&gt;{{ form.username }}&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
    &lt;td&gt;{{ form.password.label_tag }}&lt;/td&gt;
    &lt;td&gt;{{ form.password }}&lt;/td&gt;
&lt;/tr&gt;
&lt;/table&gt;

&lt;input type=""submit"" value=""login"" /&gt;
&lt;input type=""hidden"" name=""next"" value=""{{ next }}"" /&gt;
&lt;/form&gt;
</code></pre>

<p>What I guess I don't understand is why I can put whatever I want in the user/pass fields, and I never receive an error for invalid user/pass combo. I can put in non-existant users, correct users with right passwords, whatever I want basically, and it sends me off to whatever is in the 'next' variable. This leads me to believe that it's actually not doing anything whatsoever. I've checked what I'm sending via the request variables after logging in, and I'm always showing as an AnonymousUser, even though I ""successfully logged in"". Am I overlooking something blatantly obvious here? Seems like I've read that page on authentication 6 or 7 times now.</p>

<p>Also, if I login as a user with ""Staff Status"", I show as authenticated without any issues. If the user doesn't have that status, then it doesn't work. </p>
"
624050,8206,2009-03-08T18:26:51Z,1,wx's idle and UI update events in PyQt,"<p>wx (and wxPython) has two events I miss in PyQt: </p>

<ul>
<li><code>EVT_IDLE</code> that's being sent to a frame. It can be used to update the various widgets according to the application's state</li>
<li><code>EVT_UPDATE_UI</code> that's being sent to a widget when it has to be repainted and updated, so I can compute its state in the handler</li>
</ul>

<p>Now, PyQt doesn't seem to have these, and the PyQt book suggests writing an <code>updateUi</code> method and calling it manually. I even ended up calling it from a timer once per 0.1 seconds, in order to avoid many manual calls from methods that may update the GUI. Am I missing something? Is there a better way to achieve this?</p>

<p><hr /></p>

<p>An example: I have a simple app with a Start button that initiates some processing. The start button should be enabled only when a file has been opened using the menu. In addition, there's a permanent widget on the status bar that displays information.</p>

<p>My application has states:</p>

<ol>
<li>Before the file is opened (in this state the status bar show something special and the start button is disabled)</li>
<li>File was opened and processing wasn't started: the start button is enabled, status bar shows something else</li>
<li>The processing is running: the start button now says ""Stop"", and the status bar reports progress</li>
</ol>

<p>In Wx, I'd have the update UI event of the button handle its state: the text on it, and whether it's enabled, depending on the application state. The same for the status bar (or I'd use EVT_IDLE for that).</p>

<p>In Qt, I have to update the button in several methods that may affect the state, or just create a update_ui method and call it periodically in a timer. What is the more ""QT""-ish way?</p>
"
624062,48545,2009-03-08T18:34:58Z,3,What should I be aware of when moving from asp.net to python for web development?,"<p>I'm thinking about converting an app from Asp.net to python. I would like to know: what are the key comparisons to be aware of when moving a asp.net app to python(insert framework)?</p>

<p>Does python have user controls? Master pages? </p>
"
624232,72892,2009-03-08T20:30:54Z,5,Twill/Mechanize access to html content,"<p>Couple of questions regarding <a href=""http://twill.idyll.org/"" rel=""nofollow"">Twill</a> and <a href=""http://wwwsearch.sourceforge.net/mechanize/"" rel=""nofollow"">Mechanize</a>:</p>

<ol>
<li><p>Is Twill still relevant as a web-automation tool?  If yes, then why is not currently maintained?  If no, has Mechanize matured further to support Twill-style simple scripting? Or is there another package that has stepped up to fill the gap?</p></li>
<li><p>I was able to very quickly setup a couple of test suites in python using Twill, but I'm a little confused on how to access the information that Twill spits out in my python program.  That is, I can do showforms() and see the form values neatly listed and I can use fv to update the form values and submit.  But how do I access one of those form values as a python var?  How can I say something like: <code>someField1Value = fv(""1"",""someField1"")</code></p></li>
</ol>
"
624265,38146,2009-03-08T20:56:46Z,9,How do I make a Django ModelForm menu item selected by default?,"<p>I am working on a Django app. One of my models, ""User"", includes a ""gender"" field, as defined below:</p>

<pre><code>GENDER_CHOICES = (
        ('M', 'Male'),
        ('F', 'Female'),
    )
gender = models.CharField(max_length=1, choices=GENDER_CHOICES, null=True)
</code></pre>

<p>I am using a ModelForm to generate a ""new user"" HTML form. My Google-fu seems to be failing me -- how can I make this HTML form have the ""Male"" item selected by default in the drop-down box? (i.e. so <code>selected=""selected""</code> for this item.)</p>
"
624345,31610,2009-03-08T21:37:16Z,1,How can I customize the output from pygments?,"<p>If I run a python source file through pygments, it outputs html code whose elements class belong to some CSS file pygments is using. Could the style attributes be included in the outputted html so that I don't have to provide a CSS file?</p>
"
624492,NA,2009-03-08T22:51:58Z,4,Why am I getting an invalid syntax easy_install error?,"<p>I need to use easy_install to install a package.  I installed the enthought distribution, and popped into IDLE to say: </p>

<pre><code>&gt;&gt;&gt; easy_install SQLobject
SyntaxError: invalid syntax
</code></pre>

<p>What am I doing wrong?  <code>easy_install</code> certainly exists, as does the package.  help('easy_install') gives me some basic help.  <code>import easy_install</code> doesn't change things either.</p>

<p>Any hints?  I know I'm missing something really basic here.</p>
"
624535,48721,2009-03-08T23:22:51Z,0,Using Django admin look and feel in my own application,"<p>I like the very simple but still really elegant look and feel of the django admin and I was wondering if there is a way to apply it to my own application.</p>

<p>(I think that I've read something like that somewhere, but now I cannot find the page again.)</p>

<p>(edited: what I am looking for is a way to do it automatically by extending templates, importing modules, or something similar, not just copy&amp;paste the css and javascript code)</p>
"
624671,54964,2009-03-09T01:06:48Z,2,Unable to install python-setuptools: ./configure: No such file or directory,"<p>The question is related to <a href=""http://stackoverflow.com/questions/622744/unable-to-install-python-without-sudo-access/622810#622810"">the answer to ""Unable to install Python without sudo access""</a>.</p>

<p>I need to install python-setuptools to install python modules.
I have extracted the installation package.</p>

<p>I get the following error when configuring</p>

<pre><code>[~/wepapps/pythonModules/setuptools-0.6c9]# ./configure --prefix=/home/masi/.local
-bash: ./configure: No such file or directory
</code></pre>

<p>I did not find the solution at <a href=""http://peak.telecommunity.com/DevCenter/EasyInstall"" rel=""nofollow"">the program's homepage</a>.</p>

<p>How can I resolve this error?</p>
"
624844,46914,2009-03-09T02:42:37Z,4,Why aren't signals simply called events?,"<p>From what I can tell, in Python and and Django, signals are simply delegated events.  Is there anything that functionally differentiates them from the typical notion of events in C#, Java, ActionScript, etc?</p>
"
624926,14799,2009-03-09T03:31:30Z,321,how to detect whether a python variable is a function?,"<p>I have a variable, <code>x</code>, and I want to know whether it is pointing to a function or not.</p>

<p>I had hoped I could do something like:</p>

<pre><code>&gt;&gt;&gt; isinstance(x, function)
</code></pre>

<p>But that gives me:</p>

<pre class=""lang-none prettyprint-override""><code>Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in ?
NameError: name 'function' is not defined
</code></pre>

<p>The reason I picked that is because </p>

<pre><code>&gt;&gt;&gt; type(x)
&lt;type 'function'&gt;
</code></pre>
"
625042,23253,2009-03-09T04:43:51Z,9,What will be the upgrade path to Python 3.x for Google App Engine Applications?,"<p>What is required to make the transition to Python 3.x for Google App Engine?</p>

<p>I know Google App Engine requires the use of at least Python 2.5.
Is it possible to use Python 3.0 already on Google App Engine?</p>
"
625083,NA,2009-03-09T05:09:51Z,344,Python __init__ and self what do they do?,"<p>I'm learning the Python programming language, and I've come across certain things I don't fully understand.  I'm coming from a C background, but I never went far with that either.</p>

<p>What I'm trying to figure out is:</p>

<p>In a method:</p>

<pre><code>def method(self, blah):
    def __init__(?):
        ....
    ....
</code></pre>

<p>What does self do? what is it meant to be? and is it mandatory?</p>

<p>What does the <code>__init__</code> method do? why is it necessary? etc</p>

<p>I think they might be oop constructs, but I don't know very much..</p>
"
625148,2220518,2009-03-09T05:49:32Z,1,Select mails from inbox alone via poplib,"<p>I need to download emails from the gmail inbox only using poplib.Unfortunately I do not see any option to select Inbox alone, and poplib gives me emails from sent items too.</p>

<p>How do I select emails only from inbox?</p>

<p>I dont want to use any gmail specific libraries.</p>
"
625288,20226,2009-03-09T07:28:24Z,6,"Best practice for integrating CherryPy web-framework, SQLAlchemy sessions and lighttpd to serve a high-load webservice","<p>I'm developing a CherryPy FastCGI server behind lighttpd with the following setup to enable using ORM SQLAlchemy sessions inside CherryPy controllers. However, when I run stress tests with 14 concurrent requests for about 500 loops, it starts to give errors like <code>AttributeError: '_ThreadData' object has no attribute 'scoped_session_class'</code> in <code>open_dbsession()</code> or <code>AttributeError: 'Request' object has no attribute 'scoped_session_class'</code> in <code>close_dbsession()</code> after a while. The error rate is around 50% in total.</p>

<p>This happens only when I run the server behind lighttpd, not when it's run directly through <code>cherrypy.engine.start()</code>. It's confirmed that <code>connect()</code> isn't raising exceptions.</p>

<p>I also tried assigning the return value of <code>scoped_session</code> to <code>GlobalSession</code> (like it does <a href=""http://code.google.com/p/webpyte/source/browse/trunk/webpyte/sqlalchemy%5Ftool.py"">here</a>), but then it gave out errors like <code>UnboundExceptionError</code> and other SA-level errors. (Concurrency: 10, loops: 1000, error rate: 16%. Occurs even when run directly.)</p>

<p>There are some possible causes but I lack sufficient knowledge to pick one.<br />
1. Are <code>start_thread</code> subscriptions unreliable under FastCGI environment? It seems that <code>open_dbsession()</code> is called before <code>connect()</code><br />
2. Does <code>cherrypy.thread_data</code> get cleared for some reason?</p>

<h3>server code</h3>

<pre><code>import sqlalchemy as sa  
from sqlalchemy.orm import session_maker, scoped_session

engine = sa.create_engine(dburi, strategy=""threadlocal"")  
GlobalSession = session_maker(bind=engine, transactional=False)

def connect(thread_index):  
    cherrypy.thread_data.scoped_session_class = scoped_session(GlobalSession)

def open_dbsession():  
    cherrypy.request.scoped_session_class = cherrypy.thread_data.scoped_session_class

def close_dbsession():  
    cherrypy.request.scoped_session_class.remove()


cherrypy.tools.dbsession_open = cherrypy.Tool('on_start_resource', open_dbsession)  
cherrypy.tools.dbsession_close = cherrypy.Tool('on_end_resource', close_dbsession)  
cherrypy.engine.subscribe('start_thread', connect)
</code></pre>

<h3>lighttpd fastcgi config</h3>

<pre><code>...
var.server_name = ""test""
var.server_root = ""/path/to/root""
var.svc_env = ""test""
fastcgi.server = (
  ""/"" =&gt; (
    ""cherry.fcgi"" =&gt; (
      ""bin-path"" =&gt; server_root + ""/fcgi_"" + server_name + "".fcgi"",
      ""bin-environment"" =&gt; (
        ""SVC_ENV"" =&gt; svc_env
      ),
      ""bin-copy-environment"" =&gt; (""PATH"", ""LC_CTYPE""),
      ""socket"" =&gt; ""/tmp/cherry_"" + server_name + ""."" + svc_env + "".sock"",
      ""check-local"" =&gt; ""disable"",
      ""disable-time""    =&gt; 1,
      ""min-procs""       =&gt; 1,
      ""max-procs""       =&gt; 4,
    ),
  ),
)
</code></pre>

<h3>edits</h3>

<ul>
<li>Restored the missing <code>thread_index</code> argument in the code example from the original source code (thanks to the comment)</li>
<li>Clarified that errors do not occur immediately</li>
<li>Narrowed down the conditions to lighttpd</li>
</ul>
"
625314,745,2009-03-09T07:49:02Z,1,Dump memcache keys from GAE SDK Console?,"<p>In the ""Memcache Viewer"", is there any way to dump a list of existing keys? Just for debugging, of course, not for use in any scripts!</p>

<p>I ask because it doesn't seem like the GAE SDK is using a ""real"" memcache server, so I'm guessing it's emulated in Python (for simplicity, as it's just a development server).. This would mean there is a dict somewhere with the keys/values..</p>
"
625491,65516,2009-03-09T09:03:54Z,0,python conditional lock,"<p>How can I implement conditional lock in threaded application, for instance I haw 
30 threads that are calling function and for most off the time all threads can access is simultaneous, but depending on function input there can be condition when only one thread can do that one thing. (If value for input is repeated and some thread is still working then I need lock.)</p>

<p>I now that there is module threading with Rlock() but I don't now how to use it in a way that i described it in first part.</p>

<p><strong>Edit</strong>: The question is actually about how to prevent any two threads from running the same function with the same argument at the same time. (Thanks to David for helping me formulate my question :) )</p>
"
625714,55366,2009-03-09T10:26:40Z,7,wxpython auinotebook close tab event,"<p>What event is used when I close a tab in an auinotebook? I tested with
EVT_AUINOTEBOOK_PAGE_CLOSE(D). It didn't work.</p>

<p>I would also like to fire a right click on the tab itself event.</p>

<p>Where can I find all the events that can be used with the aui manager/notebook? Might just be my poor searching skills, but I can't find any lists over the different events that exist, not for mouse/window events either. It would be really handy to have a complete list.</p>

<pre><code>#!/usr/bin/python

#12_aui_notebook1.py

import wx
import wx.lib.inspection

class MyFrame(wx.Frame):
    def __init__(self, *args, **kwds):
    	wx.Frame.__init__(self, *args, **kwds)

    	self.nb = wx.aui.AuiNotebook(self)

    	self.new_panel('Page 1')
    	self.new_panel('Page 2')
    	self.new_panel('Page 3')

    	self.nb.Bind(wx.EVT_AUINOTEBOOK_PAGE_CLOSED, self.close)

    def new_panel(self, nm):
    	pnl = wx.Panel(self)
    	pnl.identifierTag = nm
    	self.nb.AddPage(pnl, nm)
    	self.sizer = wx.BoxSizer()
    	self.sizer.Add(self.nb, 1, wx.EXPAND)
    	self.SetSizer(self.sizer)

    def close(self, event):
    	print 'closed'

class MyApp(wx.App):
    def OnInit(self):
    	frame = MyFrame(None, -1, '12_aui_notebook1.py')
    	frame.Show()
    	self.SetTopWindow(frame)
    	return 1

if __name__ == ""__main__"":
    app = MyApp(0)
#    wx.lib.inspection.InspectionTool().Show()
    app.MainLoop()
</code></pre>

<p>Oerjan Pettersen</p>
"
625786,31610,2009-03-09T10:51:18Z,2,How can I pass all the parameters to a decorator?,"<p>I tried to trace the execution of some methods using a decorator. Here is the decorator code:</p>

<pre class=""lang-py prettyprint-override""><code>def trace(func):
    def ofunc(*args):
        func_name = func.__name__       
        xargs = args        
        print ""entering %s with args %s"" % (func_name,xargs)
        ret_val = func(args)
        print ""return value %s"" % ret_val
        print ""exiting %s"" % (func_name)
    return ofunc 
</code></pre>

<p>The thing is, if I try to apply this decorator to methods, the self parameter doesn't get sent. Can you tell me why, and how can I fix that?</p>
"
625977,74865,2009-03-09T12:08:52Z,2,Store Django form.cleaned_data in null model field?,"<p>I have a django model, which has a int field (with null=True, blank=True).
Now when I get a form submit from the user, I assign it like so:</p>

<pre><code>my_model.width= form.cleaned_data['width']
</code></pre>

<p>However sometimes I get an error:</p>

<pre><code>ValueError: invalid literal for int() with base 10: ''
</code></pre>

<p>I was wandering if it's the blank ('') string value that gets assigned to the field?
Because my understanding was the model will treat blank string as null/blank?</p>

<p>Any help would be appreciated in this matter. Thanks.</p>
"
626157,16204,2009-03-09T13:09:37Z,1,Loading bundled python framework dependencies using only python,"<p>I've come across <a href=""http://stackoverflow.com/questions/331377/"">this question</a> but I don't like the solution that is presented. Shell scripting is operating system dependent. </p>

<p>Is there a python solution to this problem?</p>

<p>I'm not looking for python to machine code compilers, just a way to modify the include paths with python.</p>
"
626617,50272,2009-03-09T15:12:30Z,3,File editing in python,"<p>I wrote a little python program as a personal utility to help me with some refactoring.  It's similar to unix replace, except it supports regular expressions and operates on all files in a directory and (optionally) all subdirectories.</p>

<p>The problem is I'm not replacing in place.  I'm opening files, passing the contents into memory, and then overwriting the file, like so:</p>

<pre><code>file = open('path/to/file','r')
in_string = file.read()
file.close()
# ...
#Processing logic
# ...
file = open('path/to/file','w')
file.write(out_string)
file.close()
</code></pre>

<p>Besides the obvious performance/memory concerns, which are legitimate, but not so much a problem for my use, there's another drawback to this method.  SVN freaks out.  I can do some copy and paste workarounds after the fact to fix the checksum error that svn throws on a commit, but it makes the utility pointless.</p>

<p>Is there a better way to do this?  I'm guessing that if I were editing the file in place there wouldn't be any sort of problem.  How do I go about that?</p>
"
626697,70488,2009-03-09T15:30:47Z,3,Validating a Unicode Name,"<p>In ASCII, validating a name isn't too difficult: just make sure all the characters are alphabetical.</p>

<p>But what about in Unicode (utf-8) ? How can I make sure there are no commas or underscores (outside of ASCII scope) in a given string?</p>

<p>(ideally in Python)</p>
"
626759,20601,2009-03-09T15:41:25Z,555,What's the difference between list and tuples?,"<p>What's the difference?</p>

<p>What are the advantages / disadvantages of tuples / lists?</p>
"
626796,259,2009-03-09T15:48:55Z,28,How do I find the Windows common application data folder using Python?,"<p>I would like my application to store some data for access by all users. Using Python, how can I find where the data should go?</p>
"
626835,15401,2009-03-09T15:57:39Z,1,Is it possible to write to a python frame object as returned by sys._getframe() from python code running within the interpreter?,"<p>Apropos of <a href=""http://stackoverflow.com/questions/541329/is-it-possible-to-programmatically-construct-a-python-stack-frame-and-start-execu"">This question</a>, there is a bit of scaffolding within the interpreter to inspect frame objects, which can be retrieved by <code>sys._getframe()</code>.  The frame objects appear to be read only, but I can't find anything obvious in the docs that explicitly states this.  Can someone confirm whether these objects are writeable (in some way) or read only?</p>

<pre><code>import sys

def foobar():
    xx='foo'
    ff = sys._getframe()
    ff.f_locals['xx'] = 'bar'
    print xx

if __name__ == '__main__':
    foobar()
</code></pre>

<p>This prints out '<code>foo</code>' when run but the post below demonstrates the variable being writable when run from the current frame in an interactive shell.</p>
"
627435,51816,2009-03-09T18:16:11Z,623,How to remove an element from a list by index in Python?,"<p>How to remove an element from a list by index in Python?</p>

<p>I found the <code>list.remove</code> method, but say I want to remove the last element, how do I do this? It seems like the default remove searches the list, but I don't want any search to be performed.</p>
"
627501,31610,2009-03-09T18:37:20Z,4,How can I use named arguments in a decorator?,"<p>If I have the following function:</p>

<pre><code>
def intercept(func):
  # do something here

@intercept(arg1=20)
def whatever(arg1,arg2):
  # do something here
</code></pre>

<p>I would like for intercept to fire up only when <strong>arg1</strong> is 20. I would like to be able to pass named parameters to the function. How could I accomplish this?</p>

<p>Here's a little code sample :</p>

<pre><code>

def intercept(func):
    def intercepting_func(*args,**kargs):
    	print ""whatever""
    	return func(*args,**kargs)
    return intercepting_func

@intercept(a=""g"")
def test(a,b):
    print ""test with %s %s"" %(a,b)

test(""g"",""d"")
</code></pre>

<p><strong>This throws the following exception TypeError: intercept() got an unexpected keyword argument 'a'</strong></p>
"
627583,NA,2009-03-09T19:01:00Z,2,Form Field API?,"<p>I am iterating through list of form fields. How do I identify the type of each field? For checkbox I can call field.is_checkbox...are there similar methods for lists, multiplechoicefields etc. ?</p>

<p>Thanks </p>
"
627596,2197,2009-03-09T19:06:09Z,1,Using Python to get Windows system internals info,"<p>I'd like to write some quick Python code to assess the CPU, memory, disk, and networking usage of my Windows XP system.  </p>

<p>Are there existing Python libraries that would allow me to access that information?  Or, are there DLL's that I can call from Python? (If so, a code sample would be appreciated)</p>
"
627721,69424,2009-03-09T19:45:26Z,20,Next step after PHP: Perl or Python?,"<p>It might seem it has been asked numerous times, but in fact it hasn't. I did my research, and now I'm eager to hear <em>others' opinions</em>.</p>

<p>I have experience with <strong>PHP 5</strong>, both with functional and object oriented programming methods. I created a few feature-minimalistic websites.</p>

<p>Professionals may agree about PHP not being a programming language that encourages good development habits. (I believe it's not the task of the tool, but this doesn't matter.) Furthermore, <strong>its performance is also controversial</strong> and often said to be poor compared to competitors.</p>

<p>In the <a href=""http://blog.stackoverflow.com/2009/02/podcast-42/"" rel=""nofollow"">42nd podcast at Stack Overflow blog</a> a developer from Poland asked what language he should learn in order to improve his skills. Jeff and Joel suggested that <strong>every one of them would help</strong>, altough there are specific ones that are better in some ways.
Despite they made some great points, it didn't help me that much.</p>

<p>From a beginner point of view, <s>there are not</s> one may not see (correction suggested by <a href=""http://stackoverflow.com/users/10661/s-lott"">S. Lott</a>) many differences between <strong>Perl &amp; Python</strong>. I would like You to emphasize their strenghts and weaknesses and name a few unique services.</p>

<p>Of course, this wouldn't be fair as I could also check both of them. So here's my wishlist and requirements to help You help me.</p>

<p>First of all, I'd like to follow <strong>OOP structures</strong> and use it fundamentally. I partly planned a multiuser <strong>CMS</strong> using MySQL and XML, so the greater the implementations are, the better. Due to its foreseen nature, <strong>string manipulation</strong> will be used intensively.</p>

<p>If there aren't great differences, comparisons should probably mention syntax and other tiny details that don't matter in the first place.</p>

<p>So, here's my question: which one should I try <strong>first</strong> -- Perl || Python?</p>

<p><hr /></p>

<h2>Conclusion</h2>

<p>Both Perl and Python have their own fans, which is great. I'd like to say I'm grateful for all participation -- there is no trace of any flame war.</p>

<p>I accepted the most valued answer, although there are many great mini-articles below. As suggested more often, I will go with Python first. Then I'll try Perl later on. Let me see which one fits my mind better.</p>

<p>During the development of my special CMS, I'm going to ask more regarding programming doubts -- because developers now can count on each other! Thank you.</p>

<p><strong>Edit:</strong> There were some people suggesting to choose Ruby or Java instead. Java has actually disappointed me. Maybe it has great features, maybe it hasn't. I wouldn't enjoy using it.</p>

<p>In addition, I was told to use Ruby. So far, most of the developers I communicate with have quite bad opinion about Ruby. I'll see it myself, but that's the last element on my priority list.</p>
"
627772,NA,2009-03-09T19:58:35Z,2,Django forms,"<p>I had asked a question pertaining to this. But I think it would be better to ask my question directly.
I have a ""User"" table with manytomany relationship with two other tables ""Domain"" and ""Groups"".
So in the admin interface I see the Groups and Domains as 2 ModelMultipleChoiceFields.
But I want to present them on the UI in a more user friendly way.
I would like to show each available choice in Domain and Group with a checkbox that is selected/unselected depending on the User properties.
Was wondering if I can do this in admin or I need to write my own view independent of admin.  </p>
"
627786,477612,2009-03-09T20:01:36Z,3,Python dlopen/dlfunc/dlsym wrappers,"<p>Anybody knows if actually exists a wrapper or ported library to access to Unix dynamic linker on Python?</p>
"
628132,71097,2009-03-09T21:39:21Z,3,Django Form Preview - How to work with 'cleaned_data',"<p>Thanks to Insin for answering a previous <a href=""http://stackoverflow.com/questions/625800/django-form-preview-adding-the-user-to-the-form-before-save"">question</a> related to this one.</p>

<p>His answer worked and works well, however, I'm perplexed at the provision of 'cleaned_data', or more precisely, how to use it?</p>

<pre><code>class RegistrationFormPreview(FormPreview):
    preview_template    = 'workshops/workshop_register_preview.html'
    form_template       = 'workshops/workshop_register_form.html'

    def done(self, request, cleaned_data):
        # Do something with the cleaned_data, then redirect
        # to a ""success"" page. 

        registration            = Registration(cleaned_data)
        registration.user       = request.user
        registration.save()
        # an attempt to work with cleaned_data throws the error: TypeError 
        # int() argument must be a string or a number, not 'dict'
        # obviously the fk are python objects(?) and not fk_id
        # but how to proceed here in an easy way?



        # the following works fine, however, it seems to be double handling the POST data
        # which had already been processed in the django.formtools.preview.post_post
        # method, and passed through to this 'done' method, which is designed to 
        # be overidden.
        '''
        form                    = self.form(request.POST)   # instansiate the form with POST data
        registration            = form.save(commit=False)   # save before adding the user
        registration.user       = request.user              # add the user
        registration.save()                                 # and save.
        '''

        return HttpResponseRedirect('/register/success')
</code></pre>

<p>For quick reference, here's the contents of the post_post method:</p>

<pre><code>def post_post(self, request):
    ""Validates the POST data. If valid, calls done(). Else, redisplays form.""
    f = self.form(request.POST, auto_id=AUTO_ID)
    if f.is_valid():
        if self.security_hash(request, f) != request.POST.get(self.unused_name('hash')):
            return self.failed_hash(request) # Security hash failed.
        return self.done(request, f.cleaned_data)
    else:
        return render_to_response(self.form_template,
            {'form': f, 'stage_field': self.unused_name('stage'), 'state': self.state},
            context_instance=RequestContext(request))
</code></pre>
"
628150,51816,2009-03-09T21:45:56Z,4,How to run an operation on a collection in Python and collect the results?,"<p>How to run an operation on a collection in Python and collect the results?</p>

<p>So if I have a list of 100 numbers, and I want to run a function like this for each of them:</p>

<pre><code>Operation ( originalElement, anotherVar ) # returns new number.
</code></pre>

<p>and collect the result like so:</p>

<p>result = another list...</p>

<p>How do I do it? Maybe using lambdas?</p>
"
628162,51816,2009-03-09T21:49:37Z,4,Single implementation to cover both single and multiple values in Python?,"<p>Say you have a value like this:</p>

<p>n = 5</p>

<p>and a method that returns the factorial of it, like so:</p>

<p>Factorial ( 5 )</p>

<p>How do you handle multiple values:</p>

<p>nums = [1,2,3,4,5]</p>

<p>Factorial ( nums )</p>

<p>so it returns the factorials of all these values as a list.</p>

<p>What's the cleanest way to handle this, without writing 2 methods? Does python have a good way to handle these kind of situations?</p>
"
628192,75857,2009-03-09T21:58:14Z,19,Python equivalent to java.util.SortedSet?,"<p>Does anybody know if Python has an equivalent to Java's SortedSet interface?</p>

<p>Heres what I'm looking for: lets say I have an object of type <code>foo</code>, and I know how to compare two objects of type <code>foo</code> to see whether <code>foo1</code> is ""greater than"" or ""less than"" <code>foo2</code>. I want a way of storing many objects of type <code>foo</code> in a list <code>L</code>, so that whenever I traverse the list <code>L</code>, I get the objects in order, according to the comparison method I define.</p>

<h3>Edit:</h3>

<p>I guess I can use a dictionary or a list and <code>sort()</code> it every time I modify it, but is this the best way?</p>
"
628332,75639,2009-03-09T22:47:01Z,0,Decoding HTML Entities With Python,"<p>The following Python code uses BeautifulStoneSoup to fetch the LibraryThing API information for Tolkien's ""The Children of Húrin"".</p>

<pre><code>import urllib2

from BeautifulSoup import BeautifulStoneSoup

URL = (""http://www.librarything.com/services/rest/1.0/""
            ""?method=librarything.ck.getwork&amp;id=1907912""
            ""&amp;apikey=2a2e596b887f554db2bbbf3b07ff812a"")

soup = BeautifulStoneSoup(urllib2.urlopen(URL),
                          convertEntities=BeautifulStoneSoup.ALL_ENTITIES)
title_field = soup.find('field', attrs={'name': 'canonicaltitle'})
print title_field.find('fact').string
</code></pre>

<p>Unfortunately, instead of 'Húrin', it prints out 'HÃºrin'.  This is obviously an encoding issue, but I can't work out what I need to do to get the expected output.  Help would be greatly appreciated.</p>
"
628505,1227001,2009-03-10T00:07:31Z,5,Google Data Source JSON not valid?,"<p>I am implementing a Google Data Source using their <a href=""http://code.google.com/apis/visualization/documentation/dev/gviz_api_lib.html#tojsonexample"" rel=""nofollow"">Python Library</a>. I would like the response from the library to be able to be imported in another Python script using the <a href=""http://simplejson.googlecode.com/svn/tags/simplejson-2.0.9/docs/index.html"" rel=""nofollow"">simplejson library.</a></p>

<p>However, even their <a href=""http://google-visualization.appspot.com/python/dynamic_example"" rel=""nofollow"">example</a> doesn't validate in JSONLint:</p>

<pre><code>{cols: 
    [{id:'name',label:'Name',type:'string'},
     {id:'salary',label:'Salary',type:'number'},
     {id:'full_time',label:'Full Time Employee',type:'boolean'}],
rows: 
    [{c:[{v:'Jim'},{v:800,f:'$800'},{v:false}]},
     {c:[{v:'Bob'},{v:7000,f:'$7,000'},{v:true}]},
     {c:[{v:'Mike'},{v:10000,f:'$10,000'},{v:true}]},
     {c:[{v:'Alice'},{v:12500,f:'$12,500'},{v:true}]}]}
</code></pre>

<p>How do I tweak the simplejson 'loads' function to import the above JSON? I think the main problem is that the object keys are not strings. </p>

<p>I would rather not write a regex to convert the keys to strings since I think such code would be annoying to maintain. </p>

<p>I am currently getting an ""Expecting property name: line 1 column 1 (char 1)"" error when trying to import the above json into python with simplejson.</p>
"
628837,75948,2009-03-10T03:21:07Z,8,How to divide a set of overlapping ranges into non-overlapping ranges?,"<p>Let's say you have a set of ranges:</p>

<ul>
<li>0 - 100: 'a'</li>
<li>0 - 75: 'b'</li>
<li>95 - 150: 'c'</li>
<li>120 - 130: 'd'</li>
</ul>

<p>Obviously, these ranges overlap at certain points. How would you dissect these ranges to produce a list of non-overlapping ranges, while retaining information associated with their original range (in this case, the letter after the range)?</p>

<p>For example, the results of the above after running the algorithm would be:</p>

<ul>
<li>0 - 75: 'a', 'b'</li>
<li>76 - 94: 'a'</li>
<li>95 - 100: 'a', 'c'</li>
<li>101 - 119: 'c'</li>
<li>120 - 130: 'c', 'd'</li>
<li>131 - 150: 'c'</li>
</ul>
"
628903,39058,2009-03-10T04:05:59Z,14,Performance Advantages to Iterators?,"<p>What (if any) performance advantages are offered by using iterators. It seems like the 'Right Way' to solve many problems, but does it create faster/more memory-conscious code? I'm thinking specifically in Python, but don't restrict answers to just that. </p>
"
628956,14648,2009-03-10T04:42:25Z,1,Privilege Escalation in Web Environment for File Access,"<p>I have a situation where I would like to elevate the permissions I have in a web environment so that I can access a serial device. </p>

<p>The specific case is where I have a web interface for configuring a modem that comes up on <code>/dev/ttyUSB[0-9]</code>. </p>

<p>Zero or more modems will be plugged in by an end user. I am writing some software that is capable of discerning which is a USB Wireless Modem by reading <code>/sys/devices</code> and talking to the modem using some AT commands.</p>

<p>I would like to be able to open the device and do something like:</p>

<pre><code>ser = serial.Serial(tty, baudrate=115200, timeout=10)
ser.write('AT+CGSN\r\n')
imei = ser.readline()
</code></pre>

<p>The problem is that <code>pyserial</code> does this: <code>self.fd = os.open(self.portstr, os.O_RDWR|os.O_NOCTTY|os.O_NONBLOCK)</code> to open the serial port, where portstr is <code>/dev/ttyUSB0</code>, but it does it as the <code>nobody</code> user, which is unprivileged.</p>

<p>Serial ports on this system are owned by root:uucp and are set as 0660 (i.e. <code>rw-rw----</code>).</p>

<p>What is the best way for a user such as <code>nobody</code> who should have as few permissions as possible to open a file in dev?</p>

<p>Ideas I will consider:</p>

<ul>
<li>Doing things in a subprocess using <code>sudo</code>.</li>
<li>Changing permissions of the files in <code>/dev/</code> (instructions on how to do this properly using udev are appreciated!)</li>
<li>Using another API or piece of software I have not considered.</li>
</ul>
"
629518,NA,2009-03-10T10:02:22Z,1,How do I send a HTTP POST value to a (PHP) page using Python?,"<p>I have a PHP page that has 1 textbox and when I press on the submit button. My SQL is going to store this product name into my database. My question is; is it possible to send/post the product name using Python script that asks for 1 value and then use my PHP page to send it to my database? Thanks! </p>
"
629551,63841,2009-03-10T10:10:30Z,161,How to query as GROUP BY in django?,"<p>I query a model, </p>

<pre><code>Members.objects.all()
</code></pre>

<p>and it returns say</p>

<pre><code>Eric, Salesman, X-Shop
Freddie, Manager, X2-Shop
Teddy, Salesman, X2-Shop
Sean, Manager, X2-Shop
</code></pre>

<p>What i want is, to know the best Django way to fire
a group_by query to my db, as like,</p>

<pre><code>Members.objects.all().group_by('designation')
</code></pre>

<p>Which doesn't work of course.
I know we can do some tricks on ""django/db/models/query.py"", 
but i am just curious to know how to do it without patching.</p>
"
629696,75639,2009-03-10T11:09:57Z,23,Deploying Google Analytics With Django,"<p>We're about to deploy a new Django website, and we want to use Google Analytics to keep track of traffic on the site.  However, we don't want all of the hits on development instances to contribute to the Google Analytics statistics.</p>

<p>There are a few ways we could deal with this:</p>

<ul>
<li>have a configuration option in settings.py which the base template uses to decide whether or not to include the appropriate <code>&lt;script&gt;</code> elements,</li>
<li>maintain a branch which we pull into before deploying to the production server, which we ensure includes the <code>&lt;script&gt;</code> elements,</li>
<li>do something with Google Analytics to block hits to 127.0.0.1 or localhost, or</li>
<li>something else.</li>
</ul>

<p>The first option seems the most sensible, but I'm not sure if it is.  For example, would we have to start passing a <code>google_analytics</code> variable into all of our views?</p>

<p>What are your thoughts?</p>
"
629919,72958,2009-03-10T12:32:06Z,22,Why avoid CGI for Python with LAMP hosting?,"<p>I have been using PHP for years. Lately I've come across numerous forum posts stating that <strong>PHP is outdated</strong>, that modern programming languages are easier, more secure, etc. etc.</p>

<p>So, I decided to <strong>start learning Python</strong>. Since I'm used to using PHP, I just started building pages by uploading an .htaccess file with:</p>

<pre><code>addtype text/html py
addhandler cgi-script .py
</code></pre>

<p>Then, my sample pages look like:</p>

<pre>
#!/usr/bin/python
print ""content-type: text/html\n\n""
print ""html tags, more stuff, etc.""
</pre>

<p>This works fine. But, I came across a comment in a post that said that <strong>CGI isn't the best way to use Python</strong>. Of course, it didn't mention what <em>is</em> the best way.</p>

<p><strong>Why is it that using CGI is not the best way to use Python? What is the alternative?</strong></p>

<p>Is there some <strong>totally other way</strong> to set up a simple Python site? Is there some completely different paradigm I should be looking at outside of .htaccess and .py files?</p>

<h3>Related</h3>

<ul>
<li><a href=""http://stackoverflow.com/questions/43709/pros-and-cons-of-different-approaches-to-web-programming-in-python"">Pros and Cons of different approaches to web programming in Python</a></li>
<li><a href=""http://stackoverflow.com/questions/68986/whats-a-good-lightweight-python-mvc-framework"">What’s a good lightweight Python MVC framework?</a> (esp., <a href=""http://stackoverflow.com/questions/68986/whats-a-good-lightweight-python-mvc-framework/83263#83263"">@Kevin Dangoor's answer</a>)</li>
<li><a href=""http://stackoverflow.com/questions/596729/how-do-i-use-python-for-web-development-without-relying-on-a-framework"">How do I use python for web development without relying on a framework?</a></li>
<li><a href=""http://stackoverflow.com/questions/490210/python-web-framework-not-app-framework-or-cms-framework"">Python Web Framework - Not App Framework or CMS Framework</a></li>
<li><a href=""http://stackoverflow.com/questions/581038/python-web-programming"">Python web programming</a></li>
</ul>
"
629999,NA,2009-03-10T12:52:00Z,5,"BeautifulSoup gives me unicode+html symbols, rather than straight up unicode. Is this a bug or misunderstanding?","<p>I'm using BeautifulSoup to scrape a website. The website's page renders fine in my browser: </p>

<blockquote>
  <p>Oxfam International’s report entitled “Offside!
  <a href=""http://www.coopamerica.org/programs/responsibleshopper/company.cfm?id=271"">http://www.coopamerica.org/programs/responsibleshopper/company.cfm?id=271</a></p>
</blockquote>

<p>In particular, the single and double quotes look fine. They look html symbols rather than ascii, though strangely when I view source in FF3 they appear to be normal ascii.</p>

<p>Unfortunately, when I scrape I get something like this</p>

<blockquote>
  <p>u'Oxfam International\xe2€™s report
  entitled \xe2€œOffside!</p>
</blockquote>

<p>oops, I mean this:</p>

<pre><code>u'Oxfam International\xe2€™s report entitled \xe2€œOffside!
</code></pre>

<p>The page's meta data indicates 'iso-88959-1' encoding. I've tried different encodings, played with unicode->ascii and html->ascii third party functions, and looked at the MS/iso-8859-1 discrepancy, but the fact of the matter is that ™ has nothing to do with a single quote, and I can't seem to turn the unicode+htmlsymbol combo into the right ascii or html symbol--in my limited knowledge, which is why I'm seeking help.</p>

<p>I'd be happy with an ascii double quote, "" or ""</p>

<p>The problem the following is that I'm concerned there are other funny symbols decoded incorrectly. </p>

<pre><code>\xe2€™
</code></pre>

<p>Below is some python to reproduce what I'm seeing, followed by the things I've tried.</p>

<pre><code>import twill
from twill import get_browser
from twill.commands import go

from BeautifulSoup import BeautifulSoup as BSoup

url = 'http://www.coopamerica.org/programs/responsibleshopper/company.cfm?id=271'
twill.commands.go(url)
soup = BSoup(twill.commands.get_browser().get_html())
ps = soup.body(""p"")
p = ps[52]

&gt;&gt;&gt; p         
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
UnicodeEncodeError: 'ascii' codec can't encode character u'\xe2' in position 22: ordinal not in range(128)

&gt;&gt;&gt; p.string
u'Oxfam International\xe2€™s report entitled \xe2€œOffside!&lt;elided&gt;\r\n'
</code></pre>

<p><a href=""http://groups.google.com/group/comp.lang.python/browse%5Ffrm/thread/9b7bb3f621b4b8e4/3b00a890cf3a5e46?q=htmlentitydefs&amp;rnum=3&amp;hl=en#3b00a890cf3a5e46"">http://groups.google.com/group/comp.lang.python/browse_frm/thread/9b7bb3f621b4b8e4/3b00a890cf3a5e46?q=htmlentitydefs&amp;rnum=3&amp;hl=en#3b00a890cf3a5e46</a></p>

<p><a href=""http://www.fourmilab.ch/webtools/demoroniser/"">http://www.fourmilab.ch/webtools/demoroniser/</a></p>

<p><a href=""http://www.crummy.com/software/BeautifulSoup/documentation.html"">http://www.crummy.com/software/BeautifulSoup/documentation.html</a></p>

<p><a href=""http://www.cs.tut.fi/~jkorpela/www/windows-chars.html"">http://www.cs.tut.fi/~jkorpela/www/windows-chars.html</a></p>

<pre><code>&gt;&gt;&gt; AsciiDammit.asciiDammit(p.decode())
u'&lt;p&gt;Oxfam International\xe2€™s report entitled \xe2€œOffside!

&gt;&gt;&gt; handle_html_entities(p.decode())
u'&lt;p&gt;Oxfam International\xe2\u20ac\u2122s report entitled \xe2\u20ac\u0153Offside! 

&gt;&gt;&gt; unicodedata.normalize('NFKC', p.decode()).encode('ascii','ignore')
'&lt;p&gt;Oxfam International€™s report entitled €œOffside!

&gt;&gt;&gt; htmlStripEscapes(p.string)
u'Oxfam International\xe2TMs report entitled \xe2Offside!
</code></pre>

<p>EDIT:</p>

<p>I've tried using a different BS parser:</p>

<pre><code>import html5lib
bsoup_parser = html5lib.HTMLParser(tree=html5lib.treebuilders.getTreeBuilder(""beautifulsoup""))
soup = bsoup_parser.parse(twill.commands.get_browser().get_html())
ps = soup.body(""p"")
ps[55].decode()
</code></pre>

<p>which gives me this</p>

<pre><code>u'&lt;p&gt;Oxfam International\xe2\u20ac\u2122s report entitled \xe2\u20ac\u0153Offside!
</code></pre>

<p>the best case decode seems to give me the same results:</p>

<pre><code>unicodedata.normalize('NFKC', p.decode()).encode('ascii','ignore')
'&lt;p&gt;Oxfam InternationalTMs report entitled Offside!
</code></pre>

<p>EDIT 2:</p>

<p>I am running Mac OS X 4 with FF 3.0.7 and Firebug</p>

<p>Python 2.5 (wow, can't believe I didn't state this from the beginning)</p>
"
630217,11522,2009-03-10T13:41:54Z,2,How can I use python's telnetlib to fetch data from a device for a fixed period of time?,"<p>I'm connecting to a hardware device via telnet. That device is pretty simple in terms of I/O. So I submit a command to it, and after that the device pumps out data one line at a time, once per second. Each line just contains a number.</p>

<p>So my question is this: if I connect to this device using python's telnetlib, how can I fetch data for a fixed period of time (or a fixed number of lines of data)?</p>

<p>I've tried using all the various read_ commands, but they all seem to block indefinitely, apart from read_until, which I can't use as the output can't be used to determine when to stop.</p>

<p>(I'm running python 2.5 under Cygwin, btw).</p>

<p>Edit: Maybe the real question is, should I be using telnetlib at all for this, or should I just use the socket module?</p>
"
630296,44002,2009-03-10T13:57:55Z,3,Is there any reasonable SSDP or DIDL Lib for java/groovy/python?,"<p>For a future project I am looking for a library to handle SSDP communication and messages in DIDL-Lite xml dialect. Is there any reasonable implementation of java, groovy or python? </p>

<p>I don't like to use implementations of existing UPnP stacks like cybergarage or the frauenhofer UPnP stack because they are highly depending on these stacks.</p>
"
630938,NA,2009-03-10T16:00:02Z,0,Detect whether charset exists in python,"<p>Is it possible to check in Python whether a given charset exists/is installed.
For example:<br />
check('iso-8859-1') -> True<br />
check('bla') -> False</p>
"
631436,32032,2009-03-10T17:27:25Z,1,Hello world Pyamf small error message,"<p>Hi i am trying to link flex to django with Pyamf</p>

<p>As a first step i tried the basic Hello World 
<a href=""http://pyamf.org/wiki/DjangoHowto"" rel=""nofollow"">http://pyamf.org/wiki/DjangoHowto</a></p>

<p>But that results in an ErrorFault.</p>

<p>I use django 1.0.2</p>

<p><strong>amfgateway.py</strong> in the root folder of my project (same level as settings)</p>

<pre><code>import pyamf
from pyamf.remoting.gateway.django import DjangoGateway
from django.contrib.auth.models import User

pyamf.register_class(User, 'django.contrib.auth.models.User')

def get_users(requet):
    return User.objects.all()

def echo(request, data):
    return data

services = {
    'myservice.echo': echo,
    'myservice.get_users': get_users,
}

edoGateway = DjangoGateway(services, expose_request=False)
</code></pre>

<p><strong>In urls.py</strong></p>

<pre><code>urlpatterns = patterns('',

    # test pyamf
    url(r'^gateway/', 'amfgateway.edoGateway'),
    ...
)
</code></pre>

<p>Then when i test the example with pyamf client</p>

<pre><code>from pyamf.remoting.client import RemotingService

gw = RemotingService('http://127.0.0.1:8000/gateway/')
service = gw.getService('myservice')

print service.echo('Hello World!')
</code></pre>

<p><strong>I get</strong> </p>

<p><em>ErrorFault level=error code=500 type=u'AttributeError' description=u""Cannot find a view
for the path ['/gateway/myservice/echo'], 'DjangoGateway' object has no attribute '<strong>nam
e</strong>'""
Traceback:
u""Cannot find a view for the path ['/gateway/myservice/echo'], 'DjangoGateway' object ha
s no attribute '<strong>name</strong>'""</em></p>
"
631441,35070,2009-03-10T17:28:16Z,21,Interruptible thread join in Python,"<p><strong>Is there any way to wait for termination of a thread, but still intercept signals?</strong> </p>

<p>Consider the following <strong>C</strong> program:</p>

<pre><code>#include &lt;signal.h&gt;
#include &lt;stdio.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;unistd.h&gt;
#include &lt;pthread.h&gt;
#include &lt;stdlib.h&gt;

void* server_thread(void* dummy) {
    sleep(10);
    printf(""Served\n"");
    return NULL;
}

void* kill_thread(void* dummy) {
    sleep(1); // Let the main thread join
    printf(""Killing\n"");
    kill(getpid(), SIGUSR1);
    return NULL;
}

void handler(int signum) {
    printf(""Handling %d\n"", signum);
    exit(42);
}

int main() {
    pthread_t servth;
    pthread_t killth;

    signal(SIGUSR1, handler);

    pthread_create(&amp;servth, NULL, server_thread, NULL);
    pthread_create(&amp;killth, NULL, kill_thread, NULL);

    pthread_join(servth, NULL);

    printf(""Main thread finished\n"");
    return 0;
}
</code></pre>

<p>It ends after one second and prints:</p>

<pre><code>Killing
Handling 10
</code></pre>

<p>In contrast, here's my attempt to write it in <strong>Python</strong>:</p>

<pre><code>#!/usr/bin/env python
import signal, time, threading, os, sys

def handler(signum, frame):
    print(""Handling "" + str(signum) + "", frame:"" + str(frame))
    exit(42)
signal.signal(signal.SIGUSR1, handler)

def server_thread():
    time.sleep(10)
    print(""Served"")
servth = threading.Thread(target=server_thread)
servth.start()

def kill_thread():
    time.sleep(1) # Let the main thread join
    print(""Killing"")
    os.kill(os.getpid(), signal.SIGUSR1)
killth = threading.Thread(target=kill_thread)
killth.start()

servth.join()

print(""Main thread finished"")
</code></pre>

<p>It prints:</p>

<pre><code>Killing
Served
Handling 10, frame:&lt;frame object at 0x12649c0&gt;
</code></pre>

<p><strong>How do I make it behave like the C version?</strong></p>
"
631463,30105,2009-03-10T17:34:43Z,5,Dictionaries in Python,"<p>I am trying to get to speed on the use of dictionaries.  I spent three hours last night searching the web for examples similar to some of the things I am trying to do.  For example, suppose I have two dictionaries (actually I have two lists of dictionaries).  </p>

<pre><code>d1={key1:1, key2:2}
d2={key1:1, key2:'A', key4:4}
</code></pre>

<p>I want to update d1 so it looks like the following:</p>

<pre><code>d1={key1:1, key2:[2,'A'], key3:3, key4:4}
</code></pre>

<p>Ii can't seem to find adequate examples to get me started.  I have a fair number of books and I also reviewed them but they all seem to have the same type of examples that I am finding on the web.  </p>

<p>Does anyone know of a place or a book that has explicit examples and descriptions of how to use dictionaries?  </p>

<p>I think one of the problems I am having is that I am not understanding how references are maintained as I access the dictionary.  </p>

<p>I can check to see if the two dictionaries have a common key:</p>

<pre><code>for k in d1.keys():
    for k2 in d2.keys():
        if k==k2:
            print 'true'
</code></pre>

<p>but if they do I can't seem to combine the values into a list.</p>

<p>More than a direct answer to this particular example I would appreciate any suggestions about places where there are good examples of using dictionaries.</p>
"
631607,76290,2009-03-10T18:13:05Z,4,What is the best method to read a double from a Binary file created in C?,"<p>A C program spits out consecutive doubles into a binary file. I wish to read them into Python. I tried using <code>struct.unpack('d',f.read(8))</code></p>

<p>EDIT:
I used the following in C to write a random double number</p>

<pre><code>r = drand48();
fwrite((void*)&amp;r, sizeof(double), 1, data);
</code></pre>

<p>The Errors are now fixed but I cannot read the first value. for an all 0.000.. number it reads it as 3.90798504668055 but the rest are fine.</p>
"
631813,9161,2009-03-10T19:08:49Z,4,How do I assign a version number for a Python package using SVN and distutils?,"<p>I'm writing a Python package.  The package needs to know its version number internally, while also including this version in the <code>setup.py</code> script for <code>distutils</code>.</p>

<p>What's the best way of doing this, so that the version number doesn't need to be maintained in two separate places?  I don't want to import the <code>setup.py</code> script from the rest of my library (that seems rather silly) and I don't want to import my library from the <code>setup.py</code> script (likewise).  Ideally, I'd just set a keyword in <code>svn</code> and have that automatically substituted into the files, but that doesn't seem to be possible in <code>svn</code>.   I could read a common text file containing the version number in both places--is this the best solution?</p>

<p><strong>To clarify</strong>: I want to maintain the version number in <em>one</em> place.  Yes, I could put a variable in the package, and again in the <code>setup.py</code> file.  But then they'd inevitably get out of sync.</p>
"
631884,76322,2009-03-10T19:25:42Z,11,base64 png in python on Windows,"<p>How do you encode a png image into base64 using python on Windows?</p>

<pre><code>iconfile = open(""icon.png"")
icondata = iconfile.read()
icondata = base64.b64encode(icondata)
</code></pre>

<p>The above works fine in Linux and OSX, but on Windows it will encode the first few characters then cut short. Why is this?</p>
"
631996,21711,2009-03-10T19:52:42Z,1,figure out whether python module is installed or in develop mode programmatically,"<p>I tend to develop my apps in 'setup.py develop' -mode. I'd want the configuration to switch automagically on production mode when the program gets 'setup.py install'ed.</p>

<p>This can be done by poor hacks, like checking whether installation directory contains 'setup.py', but I wonder whether pkg_resources can do this for me somehow.</p>
"
632046,NA,2009-03-10T20:07:13Z,0,"Looking to get started with Apache, PHP, MySQL, Python, Django on a fresh Mac","<p>I've looked for other questions, but could not find any...</p>

<p>I have freshly installed my Mac with OSX 10.5. I need to learn Python/Django for a new job, so want to set it all up correctly, ready to develop and run from my browser using <a href=""http://localhost/"" rel=""nofollow"">http://localhost/</a></p>

<p>I come from a PHP background and always used MAMP before. But I want to get everything working together... Apache, PHP, MySQL, Python, Django. Using MAMP is easy to install a local development server, but I want to get Python and Django running nicely too. So I can just start developing and also following tutorials on Python/Django.</p>

<p>Please give me some steps (with MAMP or not) to get a nicely working environment for Apache, PHP, MySQL, Python and Django. Thank you, all have great days!</p>

<p>James</p>
"
632171,59753,2009-03-10T20:38:28Z,1,Automatically fetching latest version of a file on import,"<p>I have a module that I want to keep up to date, and I'm wondering if this is a bad idea: </p>

<blockquote>
  <p>Have a module (mod1.py) in the
  site-packages directory that copies a
  different module from some other
  location into the site-packages
  directory, and then imports * from
  that module.</p>
</blockquote>

<pre><code>import shutil
from distutils.sysconfig import get_python_lib
p_source = r'\\SourceSafeServer\mod1_current.py'
p_local = get_python_lib() + r'\mod1_current.py'
shutil.copyfile(p_source, p_local)
from mod1_current import *
</code></pre>

<p>Now I can do this in any module, and it will always be the latest version:</p>

<pre><code>from mod1 import function1
</code></pre>

<p>This works.... but is there a better way of doing this?</p>

<p><strong>Update</strong></p>

<p>Here is the current process... there is a project under source-control that has a single module: <code>mod1.py</code>  There is also a <code>setup.py</code>  Running <code>setup.py</code> copies <code>mod1.py</code> to the site-packages directory.  </p>

<p>Developers that use the module must run <code>setup.py</code> to update the module. Sometimes, they don't and not having the latest version causes problems.</p>

<p>I want to be able to just check-in the a new version, and any code that imports that module will automatically grab the latest version every time, without anyone having to run <code>setup.py</code></p>
"
632577,26282,2009-03-10T22:43:51Z,1,How to debug a file upload?,"<p>I'm trying to upload a PDF file to a website using Hot Banana's content management system using a Python script.  I've successfully logged into the site and can log out, but I can't seem to get file uploads to work.  </p>

<p>The file upload is part of a large complicated web form that submits the form data and PDF file though a POST.  Using Firefox along with the Firebug and Tamper Data extensions I took a peek at what the browser was sending in the POST and where it was going.  I believe I mimicked the data the browser was sending in the code, but I'm still having trouble.  </p>

<p>I'm importing cookielib to handle cookies, poster to encode the PDF, and urllib and urllib2 to build the request and send it to the URL.  </p>

<p>Is it possible that registering the poster openers is clobbering the cookie processor openers?  Am I doing this completely wrong?</p>

<p><hr /></p>

<p>Edit: What's a good way to debug the process?  At the moment, I'm just dumping out the urllib2 response to a text file and examining the output to see if it matches what I get when I do a file upload manually.  </p>

<p>Edit 2: Chris Lively suggested I post the error I'm getting.  The response from urllib2 doesn't generate an exception, but just returns:</p>

<pre><code>&lt;script&gt;
    if (parent != window) { 
        parent.document.location.reload(); 
    } else { 
        parent.document.location = 'login.cfm'; 
    }
&lt;/script&gt;
</code></pre>

<p>I'll keep at it.  </p>
"
632624,53007,2009-03-10T23:00:48Z,1,Nested loop syntax in python server pages,"<p>I am just trying to write a small web page that can parse some text using a regular expression and return the resulting matches in a table. This is the first I've used python for web development, and I have to say, it looks messy.</p>

<p>My question is why do I only get output for the last match in my data set? I figure it has to be because the nested loops aren't formatted correctly.</p>

<p>Here's the data I provide:</p>

<p>groups is just an id correspoding to the regex group, and it's name to provide the header for the table.</p>

<p>pattern is something like:</p>

<pre><code>(\d+)\s(\S+)\s(\S+)$
</code></pre>

<p>and data:</p>

<pre><code>12345 SOME USER
09876 SOMEONE ELSE
54678 ANOTHER USER
</code></pre>

<p>My simple page:</p>

<pre><code>&lt;%
import re
pattern = form['pattern']
p = re.compile(pattern)
data = form['data']

matches = p.finditer(data)

lines = form['groups'].split(""\n"")
groupids ={}
for line in lines:
  key, val = line.split(' ')
  groupids[int(key.strip())] = val.strip()

%&gt;
&lt;html&gt;
&lt;table style=""border-width:1px;border-style:solid;width:60%;""&gt;
&lt;tr&gt;
&lt;%
for k,v in groupids.iteritems():%&gt;
&lt;th style=""width:30px;text-align:center""&gt;&lt;%= v %&gt;&lt;/th&gt;
&lt;%
# end
%&gt;
&lt;/tr&gt;
&lt;%
for match in matches:
  #begin
%&gt;&lt;tr&gt;
&lt;%
for i in range(1, len(match.groups())+1):
  #begin
%&gt;
  &lt;td style=""border-style:solid;border-width:1px;border-spacing:0px;text-align:center;""&gt;&lt;%= match.group(i) %&gt;&lt;/td&gt;
&lt;%
  #end
# end
%&gt;
&lt;/tr&gt;

&lt;/table&gt;
&lt;/html&gt;
</code></pre>

<h2>Edit</h2>

<p>Below is the test I ran</p>

<p>Code:</p>

<pre><code>import re
pattern = ""(\d\d\d\d\d)\s(\S+)\s(\S+)""

p = re.compile(pattern)

data = """"""12345 TESTS USERS
34567 TESTS USERS
56789 TESTS USERS""""""

groups = """"""1 PIN
2 FNAME
3 LNAME""""""

matches = p.finditer(data)

lines = groups.split(""\n"")

print lines
groupids ={}
for line in lines:
  key, val = line.split(' ')
  groupids[int(key.strip())] = val.strip()


for k,v in groupids.iteritems():
  print ""%s\t"" % v,
print ''

for match in matches:
  for i in range(1, len(match.groups())+1):
    print ""%s\t"" % match.group(i),
  print ''
</code></pre>

<p>Output:</p>

<pre><code>PIN     FNAME   LNAME
12345   TESTS   USERS
34567   TESTS   USERS
56789   TESTS   USERS
</code></pre>
"
632730,NA,2009-03-10T23:47:15Z,2,What is the feasibility of porting a legacy C program to Python?,"<p>I have a program in C that communicates via UDP with another program (in Java) and then does process manipulation (start/stop) based on the UDP pkt exchange.
Now this C program has been legacy and I want to convert it to Python - do you think Python will be a good choice for the tasks mentioned?</p>
"
632856,71097,2009-03-11T00:31:50Z,4,"Python, Evaluate a Variable value as a Variable","<p>I'd like to do something like below: particularly the 'f.eval(field)' part, such that it evaluates the value of the variable as the field name.  How does one accomplish this in Python?</p>

<pre><code>def punctuated_object_list(objects, field):
    field_list = [f.eval(field) for f in objects]
    if len(field_list) &gt; 0:
        if len(field_list) == 1:
            return field_list[0]
        else:
            return ', '.join(field_list[:-1]) + ' &amp; ' + field_list[-1]
    else:
        return u''
</code></pre>
"
632958,54964,2009-03-11T01:06:34Z,0,Unable to separate codes in one file to many files in AWK/Python,"<p>I need to put different codes in one file to many files.
The file is apparantly shared by AWK's creators at their homepage.
The file is also <a href=""http://dpaste.com/12282/"" rel=""nofollow"">here</a> for easy use.</p>

<p><strong>My attempt to the problem</strong></p>

<p>I can get the lines where each code locate by</p>

<pre><code>awk '{ print $1 }'
</code></pre>

<p>However, I do no know how</p>

<ol>
<li>to get the exact line numbers so that I can use them</li>
<li>to collect codes between the specific lines so that the first word of each line is ignored</li>
<li>to put these separate codes into new files which are named by the first word at the line</li>
</ol>

<p>I am sure that the problem can be solved by AWK and with Python too. Perhaps, we need to use them together. </p>

<p><strong>[edit]</strong> after the first answer</p>

<p>I get the following error when I try to execute it with awk</p>

<pre><code>$awk awkcode.txt 
awk: syntax error at source line 1
 context is
     &gt;&gt;&gt; awkcode &lt;&lt;&lt; .txt
awk: bailing out at source line 1
</code></pre>
"
633086,73450,2009-03-11T02:11:41Z,2,detecting fullscreen on mac,"<p>I am writing an IM client for Mac (in python, but an Objective C / Cocoa solution here is fine). I want to detect whether or not the user is currently watching a movie or playing a game in the foreground, or doing anything else that takes up the entire screen. If so, I won't play a sound when a new IM comes in, but if not, I will play the sound.</p>

<p>How can I detect this? Is there some way to get the foreground window with applescript and look at its dimensions? Or is there some other API call?</p>

<p>Thanks.</p>
"
633601,74170,2009-03-11T07:01:54Z,1,why am i getting errors while installing pysqlite2.5.3,"<p>Am trying build pysqlite 2.5.3  package on SLSE 9, and am getting all sorts of compilation errors i.e.</p>

<pre><code>...
src/module.c:290: error: initializer element is not constant
src/module.c:290: error: (near initialization for `_int_constants[27].constant_value')
src/module.c:290: error: initializer element is not constant
src/module.c:290: error: (near initialization for `_int_constants[27]')
src/module.c:291: error: `SQLITE_ATTACH' undeclared here (not in a function)
src/module.c:291: error: initializer element is not constant
src/module.c:291: error: (near initialization for `_int_constants[28].constant_value')
src/module.c:291: error: initializer element is not constant
src/module.c:291: error: (near initialization for `_int_constants[28]')
src/module.c:292: error: `SQLITE_DETACH' undeclared here (not in a function)
src/module.c:292: error: initializer element is not constant
src/module.c:292: error: (near initialization for `_int_constants[29].constant_value')
src/module.c:292: error: initializer element is not constant
src/module.c:292: error: (near initialization for `_int_constants[29]')
src/module.c:300: error: initializer element is not constant
src/module.c:300: error: (near initialization for `_int_constants[30]')
src/module.c: In function `init_sqlite':
src/module.c:419: warning: implicit declaration of function `sqlite3_libversion'
src/module.c:419: warning: passing arg 1 of `PyString_FromString' makes pointer from integer without a cast
error: command 'gcc' failed with exit status 1
</code></pre>

<p>the things fails</p>

<p>this is my setup.cfg file:</p>

<pre><code>[build_ext]
#define=
#include_dirs=/usr/local/include
#library_dirs=/usr/local/lib
libraries=sqlite3
define=
</code></pre>

<p>SQLlite is running... when  i do sqlite3, i get the command interface.</p>

<p>What am i missing out?</p>

<p>Gath</p>
"
633999,76138,2009-03-11T10:37:08Z,2,"Scalable polling of an AppEngine application from numerous ""active"" clients?","<p>I'm working on an application that will run on Google AppEngine.</p>

<p>I plan to have the web interface of that application wait, among many other things, for notifications coming from the AppEngine server.</p>

<p>Ideally I would have liked to use an XMLHttpRequest() to make a request to the server that would be waiting until the next notification comes from the application.</p>

<p>However there does not appear to be in AppEngine to support this type of logic (correct me if I'm wrong). This means I appear to be limited to polling at periodic intervals.</p>

<p>So the question is:</p>

<ul>
<li>Does anyone have a good suggestion of how to best design this polling mechanism in order to avoid running into CPU usage quotas of AppEngine? Scalability as the number of ""active"" clients takes off needs to be considered.</li>
</ul>

<p>I am specifically interested in suggestions for good management of the polling intervals from the client side and tips for efficient handling of the requests in the AppEngine application as the number of ""active"" clients grows.</p>

<p><em>PS</em>: the type of information polled from the server will typically be JSON-encoded information about recently updated/added bits of information (read recently as: in the past few seconds or minutes).</p>

<p><strong>Status Update</strong></p>

<p>Here is a summary of my thoughts so far around this question:</p>

<ul>
<li>To minimize the CPU load required to answer each individual request generated by the polling approach: use the memcache to minimize the time it takes to collect the reply information. <strong>Need to find pointers to a good example of that</strong>.</li>
<li>To minimize the number of requests generated to the server by the ""active"" clients I have several leads:
<ul>
<li>Make the wait between successive polling requests to the server progressively longer if the user is not actively interacting (i.e. not clicking on anything) within the client web page.</li>
<li>Piggy back on other types of requests to the server, that is include the results of the polling requests into other request results to save on the number of requests.</li>
</ul></li>
</ul>

<p>Comments and pointers to code examples welcome!</p>
"
634024,42153,2009-03-11T10:45:28Z,2,Why do Python's frameworks return dictionaries from controllers?,"<p>Why (for example web2py) do you return data from a controller in a dictionary instead of variables (see Rails)? </p>

<p>For example:</p>

<pre><code>return dict(sape=4139, guido=4127, jack=4098)
</code></pre>

<p>instead of (that's the way Rails does it)</p>

<pre><code>@var1 = ""jello"" 
@var2 = ""hihi""
</code></pre>

<p>Is there any advantage using dictionaries over plain variables (speed-wise/code-wise)?</p>

<p>Update: The above way is actually a correct way for creating a dictionary (at least in Python 2.6.1). The other way (that many people say it's the correct one)</p>

<pre><code>return {""var1"": ""jello"", ""var2"": ""hihi""} 
</code></pre>

<p>is not used a lot by python frameworks.</p>

<p>From <a href=""http://docs.python.org/tutorial/datastructures.html"" rel=""nofollow"">Python's documentation</a>:
""When the keys are simple strings, it is sometimes easier to specify pairs using keyword arguments:""</p>

<pre><code>dict(sape=4139, guido=4127, jack=4098)
</code></pre>
"
634067,56763,2009-03-11T10:59:51Z,0,Python drag and drop,"<p>Im working on a parser here that opens a file, reads it and prints data in another file.</p>

<p>The input file is determined from sys.argv[1] to both handle commandline opening and drag and drop (in windows). However, when drag and dropping a file, it gives me</p>

<pre><code>ioerror 13: Permission denied
</code></pre>

<p>Looking at what sys.argv contained, I did the following (from cmd.exe) to have it contain the same:</p>

<pre><code>C:\&gt;python C:\test\iotest.py C:\test\iotestin.txt
</code></pre>

<p>It failed. However, the following works</p>

<pre><code>C:\&gt;cd test
C:\test&gt;python iotest.py iotestin.txt
</code></pre>

<p>To me, the above would/should be virtually the same.</p>

<ul>
<li>Why do I get the permission error? </li>
<li>How do I make python able to handle fully specified paths? (If thats the problem.)</li>
<li>How do I enable drag and drop?</li>
</ul>

<p>Oh, and if its unclear, I drag the input/txt file to the python file, not the other way around. As a coder, I always prefer a CLI, but the future users of this software do not, hence I need to get this working.</p>

<p>Although extremely simple, heres some code to reproduce the problem:</p>

<pre><code>import sys
print sys.argv
raw_input("""")

try:
    print ""opening"",sys.argv[1]
    infile = open(sys.argv[1])
    outfile = open(""out.txt"", ""w"")
    raw_input("""")
except IndexError:
    print ""usage:"",sys.argv[0].split(""\\"")[-1],""FILE""
    raw_input("""")
    exit()
except IOError as (errno, strerror):
    print ""I/O error({0}): {1}"".format(errno, strerror)
    raw_input("""")
    exit()

raw_input(""done"")
</code></pre>
"
634107,28380,2009-03-11T11:15:27Z,9,"Writing a socket-based server in Python, recommended strategies?","<p>I was recently reading <a href=""http://www.kegel.com/c10k.html"">this document</a> which lists a number of strategies that could be employed to implement a socket server. Namely, they are:</p>

<ol>
<li>Serve many clients with each thread, and use nonblocking I/O and level-triggered readiness notification</li>
<li>Serve many clients with each thread, and use nonblocking I/O and readiness change notification</li>
<li>Serve many clients with each server thread, and use asynchronous I/O</li>
<li>serve one client with each server thread, and use blocking I/O</li>
<li>Build the server code into the kernel </li>
</ol>

<p>Now, I would appreciate a hint on which should be used <strong>in CPython</strong>, which we know has some good points, and some bad points. I am mostly interested in performance under high concurrency, and yes a number of the current implementations are too slow.</p>

<p>So if I may start with the easy one, ""5"" is out, as I am not going to be hacking anything into the kernel.</p>

<p>""4"" Also looks like it must be out because of the GIL. Of course, you could use multiprocessing in place of threads here, and that does give a significant boost. Blocking IO also has the advantage of being easier to understand.</p>

<p>And here my knowledge wanes a bit:</p>

<p>""1"" is traditional select or poll which could be trivially combined with multiprocessing.</p>

<p>""2"" is the readiness-change notification, used by the newer epoll and kqueue</p>

<p>""3"" I am not sure there are any kernel implementations for this that have Python wrappers.</p>

<p>So, in Python we have a bag of great tools like Twisted. Perhaps they are a better approach, though I have benchmarked Twisted and found it too slow on a multiple processor machine. Perhaps having 4 twisteds with a load balancer might do it, I don't know. Any advice would be appreciated.</p>
"
634432,NA,2009-03-11T13:07:53Z,2,Need help on making the recursive parser using pyparsing,"<p>I am trying the python pyparsing for parsing. I got stuck up while making the recursive parser. </p>

<p>Let me explain the problem </p>

<p>I want to make the Cartesian product of the elements. The syntax is </p>

<pre><code>cross({elements },{element})
</code></pre>

<p>I put in more specific way</p>

<pre><code>cross({a},{c1}) or cross({a,b},{c1}) or cross({a,b,c,d},{c1}) or
</code></pre>

<p>So the general form is first group will have n elements (a,b,c,d). The second group will have one element that so the final output will be Cartesian Product.</p>

<p>The syntax is to be made recursive because it can go to n level like</p>

<pre><code>cross(cross({a,b},{c1}),{c2})
</code></pre>

<p>This means cross a,b with c1. Lets say outcome us y. We again cross y it with c2</p>

<p>This can be till n level cross(cross(cross(cross......</p>

<p>What i want is to have object to be initialized using setparseAction </p>

<p>So i will have 2 class </p>

<pre><code>class object1(object):
     This will be used by a,b,c,d 

class object2(object):
       This will hold cross elements
</code></pre>

<p>I need help on this i am not able to make the recursive parser.</p>
"
634485,69885,2009-03-11T13:22:09Z,3,using wsgiref.simple_server in unittests,"<p>I have some functions like this one:</p>

<pre>
<code>
URL = 'http://localhost:8080'
def func():
    response = urlopen(URL)
    return process(response)
</code>
</pre>

<p>And i want to test it with unittest.</p>

<p>I did something like this:</p>

<pre><code>
from wsgiref.simple_server import make_server
def app_200_hello(environ,start_response):
    stdout = StringIO('Hello world')
    start_response(""200 OK"", [('Content-Type','text/plain')])
    return [stdout.getvalue()]

s = make_server('localhost', 8080, app_200_hello)

class TestFunc(unittest.TestCase):
    def setUp(self):
        s.handle_request()

    def test1(self):
        r = func()
        assert r, something

if __name__ == '__main__':
    unittest.main()
</code></pre>

<p>At setUp() my tests stop because s.handle_request() waits for request. How i can get around that? Run s.handle_request() in another thread? or maybe there is another 
solution?</p>

<p>EDIT:
I want to test ""func"" function, not ""app_200_hello""</p>
"
634857,53390,2009-03-11T14:51:12Z,1,"Django: Calling custom Model method from Form clean method. ""Unbound Method""?","<p>I'm having a problem while trying to call a custom Model method from my Form <code>clean</code> method.</p>

<p>Here is [part of] my model:<br />
<a href=""http://dpaste.com/hold/12695/"" rel=""nofollow"">http://dpaste.com/hold/12695/</a></p>

<p>Here is my Form:<br />
<a href=""http://dpaste.com/hold/12699/"" rel=""nofollow"">http://dpaste.com/hold/12699/</a></p>

<p>I'm specifically having a problem with line 11 in my Form:<br />
<code>nzb_data = File.get_nzb_data(nzb_absolute)</code></p>

<p>This raises the following error:</p>

<pre><code>TypeError at /admin/main/file/add/

unbound method get_nzb_data() must be called with File instance as first argument (got str instance instead)
</code></pre>

<p>By this error I can assume I have to pass the method something (a File instance), however I don't really know what that means and how I can do it.</p>

<p>Can you let me know what I'm doing wrong here, and what can be done to resolve the issue?</p>

<p><hr /></p>

<p><strong>Solved</strong> by making the <code>get_nzb_data</code> method a class method using the <code>@classmethod</code> decorator.</p>
"
634964,11722,2009-03-11T15:07:39Z,20,svg diagrams using python,"<p>I am looking for a library to generate svg diagrams in python (I fetch data from a sql database). I have found <a href=""http://newcenturycomputers.net/projects/gdmodule.html"">python-gd</a>, but it has not much documentation and last update was in 2005 so I wonder if there are any other libraries that are good for this purpose.</p>

<p>I am mostly thinking about simple line graphs, something like <a href=""http://edynblog.files.wordpress.com/2007/07/line-graph-days-on-market.jpg"">this</a>:
<img src=""http://edynblog.files.wordpress.com/2007/07/line-graph-days-on-market.jpg"" alt=""example line graph"" title=""days on market"" /></p>
"
635048,NA,2009-03-11T15:28:10Z,0,Django Admin,"<p>I am using Django admin for managing my data.
I have a Users, Groups and Domains tables
Users table has many to many relationship with Groups and Domains tables.
Domains table has one to many relationship with Groups table.
and when I save the User data through admin I also need some addtional database updates in  the users_group and the users_domains table.
How do I do this? Where do I put the code.
Thanks.  </p>
"
635113,4766,2009-03-11T15:43:10Z,62,"Python urllib2, basic HTTP authentication, and tr.im","<p>I'm playing around, trying to write some code to use the <a href=""http://www.programmableweb.com/api/tr.im"">tr.im</a>
APIs to shorten a URL.</p>

<p>After reading <a href=""http://docs.python.org/library/urllib2.html"">http://docs.python.org/library/urllib2.html</a>, I tried:</p>

<pre><code>   TRIM_API_URL = 'http://api.tr.im/api'
   auth_handler = urllib2.HTTPBasicAuthHandler()
   auth_handler.add_password(realm='tr.im',
                             uri=TRIM_API_URL,
                             user=USERNAME,
                             passwd=PASSWORD)
   opener = urllib2.build_opener(auth_handler)
   urllib2.install_opener(opener)
   response = urllib2.urlopen('%s/trim_simple?url=%s'
                              % (TRIM_API_URL, url_to_trim))
   url = response.read().strip()
</code></pre>

<p>response.code is 200 (I think it should be 202).  url is valid, but
the basic HTTP authentication doesn't seem to have worked, because the
shortened URL isn't in my list of URLs (at <a href=""http://ttp://tr.im/?page=1"">http://tr.im/?page=1</a>).</p>

<p>After reading <a href=""http://www.voidspace.org.uk/python/articles/authentication.shtml#doing-it-properly"">http://www.voidspace.org.uk/python/articles/authentication.shtml#doing-it-properly</a>
I also tried:</p>

<pre><code>   TRIM_API_URL = 'api.tr.im/api'
   password_mgr = urllib2.HTTPPasswordMgrWithDefaultRealm()
   password_mgr.add_password(None, TRIM_API_URL, USERNAME, PASSWORD)
   auth_handler = urllib2.HTTPBasicAuthHandler(password_mgr)
   opener = urllib2.build_opener(auth_handler)
   urllib2.install_opener(opener)
   response = urllib2.urlopen('http://%s/trim_simple?url=%s'
                              % (TRIM_API_URL, url_to_trim))
   url = response.read().strip()
</code></pre>

<p>But I get the same results.  (response.code is 200 and url is valid,
but not recorded in my account at <a href=""http://tr.im/"">http://tr.im/</a>.)</p>

<p>If I use query string parameters instead of basic HTTP authentication,
like this:</p>

<pre><code>   TRIM_API_URL = 'http://api.tr.im/api'
   response = urllib2.urlopen('%s/trim_simple?url=%s&amp;username=%s&amp;password=%s'
                              % (TRIM_API_URL,
                                 url_to_trim,
                                 USERNAME,
                                 PASSWORD))
   url = response.read().strip()
</code></pre>

<p>...then not only is url valid but it's recorded in my tr.im account.
(Though response.code is still 200.)</p>

<p>There must be something wrong with my code though (and not tr.im's API), because</p>

<pre><code>$ curl -u yacitus:xxxx http://api.tr.im/api/trim_url.json?url=http://www.google.co.uk
</code></pre>

<p>...returns:</p>

<pre><code>{""trimpath"":""hfhb"",""reference"":""nH45bftZDWOX0QpVojeDbOvPDnaRaJ"",""trimmed"":""11\/03\/2009"",""destination"":""http:\/\/www.google.co.uk\/"",""trim_path"":""hfhb"",""domain"":""google.co.uk"",""url"":""http:\/\/tr.im\/hfhb"",""visits"":0,""status"":{""result"":""OK"",""code"":""200"",""message"":""tr.im URL Added.""},""date_time"":""2009-03-11T10:15:35-04:00""}
</code></pre>

<p>...and the URL does appear in my list of URLs on <a href=""http://ttp://tr.im/?page=1"">http://tr.im/?page=1</a>.</p>

<p>And if I run:</p>

<pre><code>$ curl -u yacitus:xxxx http://api.tr.im/api/trim_url.json?url=http://www.google.co.uk
</code></pre>

<p>...again, I get:</p>

<pre><code>{""trimpath"":""hfhb"",""reference"":""nH45bftZDWOX0QpVojeDbOvPDnaRaJ"",""trimmed"":""11\/03\/2009"",""destination"":""http:\/\/www.google.co.uk\/"",""trim_path"":""hfhb"",""domain"":""google.co.uk"",""url"":""http:\/\/tr.im\/hfhb"",""visits"":0,""status"":{""result"":""OK"",""code"":""201"",""message"":""tr.im URL Already Created [yacitus].""},""date_time"":""2009-03-11T10:15:35-04:00""}
</code></pre>

<p>Note code is 201, and message is ""tr.im URL Already Created [yacitus].""</p>

<p>I must not be doing the basic HTTP authentication correctly (in either attempt).  Can you spot my problem?  Perhaps I should look and see what's being sent over the wire?  I've never done that before.  Are there Python APIs I can use (perhaps in pdb)?  Or is there another tool (preferably for Mac OS X) I can use?</p>
"
635159,60711,2009-03-11T15:52:26Z,0,Web frameworks performance comparison,"<p>I'm looking for real life benchmarks comparing web frameworks based on dynamic languages (Python, Ruby, Groovy and Lua). Even better if they're compared up against classic solutions based on PHP, Java, ASP.NET maybe even Perl. I'm particularly interested in:</p>

<ul>
<li>Django</li>
<li>Ruby on Rails</li>
<li>Grails</li>
<li>Zend Framework</li>
<li>Struts2</li>
</ul>

<p>EDIT:
As for Sean's answer:</p>

<ol>
<li>It's more hypothetical question, in real life I've gotta choose based on more constrains then just raw speed.</li>
<li>Speed is not the only, and not even the most important parameter to take in account. It's actually more interesting how these frameworks <strong>scale</strong>.</li>
<li>Using standard, well know framework have advantages, that in most cases <em>(unless you're doing something like EVE on-line)</em> out-weight raw speed improvement. </li>
</ol>

<p>Let me quote book <a href=""http://www.manning.com/dbrown/"" rel=""nofollow"">""Struts2 in Action""</a> by D. Brown, C.M. Davis and S. Stanlick:</p>

<p><em>""If you want, you could roll your own framework. This is actually not a bad plan. It
assumes a couple of things though. First, you have lots of really smart developers. Two, they
have the time and money to spend on a big project that might seem off topic from the perspective
of the business requirements. Even if you have the rare trinity of really smart people, time and
money, there are still some drawbacks. I've done work for a company whose product is built on
an in-house framework. The framework is not bad. But a couple of glaring points can't be
overlooked. First, new developers will always have to learn the framework from the ground up.
If you are using a mainstream framework, there’s a trained work force waiting for you to hire
them. Second, the in-house framework is unlikely to see elegant revisions that keep up with the
pace of industry. In fact, in-house frameworks seem to be suspect to architectural erosion as the
years pass and too many extensions are less elegantly tacked on than one would hope.""</em></p>

<p>I couldn't agree more.</p>
"
635200,23000,2009-03-11T16:00:22Z,0,Visual Studio 2005 Build of Python with Debug .lib,"<p>I am looking for the Visual Studio 2005 build of Python 2.4, 2.5 or 2.6, I also need the python2x_d.lib (the debug version of the .lib) since I embed the interpreter into my app and the python libs implicitly link to the python2x_d.lib with pragmas (grrr).</p>

<p>Any hints where I can find those builds ?</p>

<p>Regards,</p>

<p>Paul</p>
"
635419,18300,2009-03-11T16:54:41Z,16,code documentation for python,"<p>What is out there on conventions and tools for documenting python source code?</p>
"
635483,54873,2009-03-11T17:09:21Z,149,What is the best way to implement nested dictionaries in Python?,"<p>I have a data structure which essentially amounts to a nested dictionary. Let's say it looks like this:</p>

<pre><code>{'new jersey': {'mercer county': {'plumbers': 3,
                                  'programmers': 81},
                'middlesex county': {'programmers': 81,
                                     'salesmen': 62}},
 'new york': {'queens county': {'plumbers': 9,
                                'salesmen': 36}}}
</code></pre>

<p>Now, maintaining and creating this is pretty painful; every time I have a new state/county/profession I have to create the lower layer dictionaries via obnoxious try/catch blocks. Moreover, I have to create annoying nested iterators if I want to go over all the values. </p>

<p>I could also use tuples as keys, like such:</p>

<pre><code>{('new jersey', 'mercer county', 'plumbers'): 3,
 ('new jersey', 'mercer county', 'programmers'): 81,
 ('new jersey', 'middlesex county', 'programmers'): 81,
 ('new jersey', 'middlesex county', 'salesmen'): 62,
 ('new york', 'queens county', 'plumbers'): 9,
 ('new york', 'queens county', 'salesmen'): 36}
</code></pre>

<p>This makes iterating over the values very simple and natural, but it is more syntactically painful to do things like aggregations and looking at subsets of the dictionary (e.g. if I just want to go state-by-state).</p>

<p>Basically, sometimes I want to think of a nested dictionary as a flat dictionary, and sometimes I want to think of it indeed as a complex hierarchy. I could wrap this all in a class, but it seems like someone might have done this already. Alternatively, it seems like there might be some really elegant syntactical constructions to do this. </p>

<p>How could I do this better?</p>

<p>Addendum: I'm aware of <code>setdefault()</code> but it doesn't really make for clean syntax.  Also, each sub-dictionary you create still needs to have <code>setdefault()</code> manually set.</p>
"
635524,53390,2009-03-11T17:20:30Z,7,Django: Open uploaded file while still in memory; In the Form Clean method?,"<p>I need to validate the contents of an uploaded XML file in my Form clean method, but I'm unable to open the file for validation. It seams, in the clean method, the file hasn't yet been moved from memory (or the temporary directory) to the destination directory.</p>

<p>For example the following code doesn't work because the file hasn't been moved to that destination yet. It's still in memory (or the temporary directory):</p>

<pre><code>xml_file = cleaned_data.get('xml_file')
xml_file_absolute = '%(1)s%(2)s' % {'1': settings.MEDIA_ROOT, '2': xml_file}
xml_size = str(os.path.getsize(xml_file_absolute))
</code></pre>

<p>When I look at the ""cleaned_data"" variable it shows this:  </p>

<pre><code>{'xml_file': &lt;InMemoryUploadedFile: texting.nzb (application/octet-stream)&gt;}
</code></pre>

<p><code>cleaned_data.get('xml_file')</code> only returns ""texting.nzb"" as a string.</p>

<p>Is there another way to access the the file in memory (or the temporary directory)?</p>

<p><hr /></p>

<p>Again, this is in my Form's <code>clean</code> method that's tied into the default administration view. I've been told time and time again that all validation should be handled in a Form, not the view. Correct?</p>
"
635583,75639,2009-03-11T17:37:13Z,2,Inserting A Heading Into A Django Form,"<p>I would like my form to output something like this:</p>

<pre><code>Name: ___________
Company: ___________

Interested in
-------------
Foo: [ ]
Bar: [ ]
Baz: [ ]
</code></pre>

<p>That is to say, I would like to have the 'Interested In' title inserted in the middle of my form output.</p>

<p>One way of doing this would be to write out the template code for each field, and insert the heading as appropriate.  However, I'd prefer not to do this.  I suspect that there is something to do with formsets that will do what I want.</p>

<p><em>Is</em> there a way to do what I want, or do I just need to suck it up and accept that I need to write my template out longhand for this?</p>
"
635643,41613,2009-03-11T17:55:57Z,3,tell whether a character is a combining diacritic mark,"<p>if you're looping though the chars a unicode string in python (2.x), say:</p>

<blockquote>
  <p>ak.sɛp.tɑ̃</p>
</blockquote>

<p>How can you tell whether the current char is a combining diacritic mark?</p>

<p>For instance, the last char in the above string is actually a combining mark:</p>

<blockquote>
  <p>ak.sɛp.tɑ̃ --> ̃</p>
</blockquote>
"
635946,NA,2009-03-11T19:14:37Z,0,python: problem using call.subprocess to use a file after writing it,"<p>In python I am trying to write a script that will edit text files and then run executables that use those text files.  It basically entails 1)opening and reading/writing to a text file, and 2)using the file I just wrote in a bash command.  Here is a simple example:</p>

<pre><code>import subprocess

# write file
a = ['1\n','2\n','3\n','4\n','5th and final line']
f = open('junk01.txt', 'wb')
f.writelines(a)
f.close

# show file
subprocess.call('cat junk01.txt', shell=True)
</code></pre>

<p>For some reason on that <code>subprocess.call</code> command it is not showing the contents of the junk01.txt file.  However after I run this code and type <code>cat junk01.txt</code> in bash the file has been written properly.  Similarly, I'm finding that after I open, write to, and close a text file and then try to use it in an executable, the file hasn't been written to yet.  Any explanation on why this is and what I can do to fix it?</p>
"
636485,31011,2009-03-11T21:36:56Z,25,What's different between Python and Javascript regular expressions?,"<p>Are Python and JavaScript regular expression syntax identical? </p>

<p>If not, then: </p>

<ol>
<li>What are the important differences between them</li>
<li>Is there a python library that ""implements"" JavaScript regexps?</li>
</ol>
"
636548,91385,2009-03-11T21:56:49Z,12,SELECT * in sqlalchemy?,"<p>Is it possible to do <code>SELECT *</code> in sqlalchemy?</p>

<p>Edit: Specifically, <code>SELECT * WHERE foo=1</code></p>
"
636561,NA,2009-03-11T22:01:42Z,60,How can I run an external command asynchronously from Python?,"<p>I need to run a shell command asynchronously from a Python script. By this I mean that I want my Python script to continue running while the external command goes off and does whatever it needs to do.</p>

<p>I read this post: </p>

<blockquote>
  <p><a href=""http://stackoverflow.com/questions/89228/how-to-call-external-command-in-python"">http://stackoverflow.com/questions/89228/how-to-call-external-command-in-python</a> </p>
</blockquote>

<p>I then went off and did some testing, and it looks like <code>os.system()</code> will do the job provided that I use <code>&amp;</code> at the end of the command so that I don't have to wait for it to return. What I am wondering is if this is the proper way to accomplish such a thing? I tried <code>commands.call()</code> but it will not work for me because it blocks on the external command.</p>

<p>Please let me know if using <code>os.system()</code> for this is advisable or if I should try some other route.</p>
"
636695,38735,2009-03-11T22:55:47Z,11,Python Profiling in Eclipse,"<p>This questions is semi-based of this one here:</p>

<p><a href=""http://stackoverflow.com/questions/582336/how-can-you-profile-a-python-script"">http://stackoverflow.com/questions/582336/how-can-you-profile-a-python-script</a></p>

<p>I thought that this would be a great idea to run on some of my programs. Although profiling from a batch file as explained in the aforementioned answer is possible, I think it would be even better to have this option in Eclipse. At the same time, making my entire program a function and profiling it would mean I have to alter the source code?</p>

<p><strong>How can I configure eclipse such that I have the ability to run the profile command on my existing programs?</strong></p>

<p>Any tips or suggestions are welcomed! </p>
"
636887,54964,2009-03-12T00:14:08Z,1,Unable to make each sentence to start at a new line in LaTex by AWK/Python,"<p>I have a long document in LaTex, which contains paragraphs. The paragraphs contain sentences such that no subsequent sentence start at a new line.</p>

<p><strong>How can you make each subsequent sentence to start at a new line in my .tex file?</strong></p>

<p><em>My attempt to the problem</em></p>

<p>We need to put \n to the end of Sentence B where Sentence B has Sentence A before it.</p>

<p>We must not put \n to the situations where there are the mark <code>\</code>. </p>

<p>I see that the problem can be solved by AWK and Python. </p>
"
636905,21932,2009-03-12T00:18:35Z,42,Django form - set label,"<p>I have  a form that inherits from 2 other forms. In my form, I want to change the label of a field that was defined in one of the parent forms. Does anyone know how this can be done?</p>

<p>I'm trying to do it in my <code>__init__</code>, but it throws an error saying that ""'RegistrationFormTOS' object has no attribute 'email'"". Does anyone know how I can do this?</p>

<p>Thanks.</p>

<p>Here is my form code:</p>

<pre><code>from django import forms
from django.utils.translation import ugettext_lazy as _
from registration.forms import RegistrationFormUniqueEmail
from registration.forms import RegistrationFormTermsOfService

attrs_dict = { 'class': 'required' }

class RegistrationFormTOS(RegistrationFormUniqueEmail, RegistrationFormTermsOfService):
    """"""
    Subclass of ``RegistrationForm`` which adds a required checkbox
    for agreeing to a site's Terms of Service.

    """"""
    email2 = forms.EmailField(widget=forms.TextInput(attrs=dict(attrs_dict, maxlength=75)), label=_(u'verify email address'))

    def __init__(self, *args, **kwargs):
    	self.email.label = ""New Email Label""
    	super(RegistrationFormTOS, self).__init__(*args, **kwargs)

    def clean_email2(self):
    	""""""
    	Verifiy that the values entered into the two email fields
    	match. 
    	""""""
    	if 'email' in self.cleaned_data and 'email2' in self.cleaned_data:
    		if self.cleaned_data['email'] != self.cleaned_data['email2']:
    			raise forms.ValidationError(_(u'You must type the same email each time'))
    	return self.cleaned_data
</code></pre>
"
636977,76967,2009-03-12T00:48:24Z,0,Best way to remove duplicate characters (words) in a string?,"<p>What would be the best way of removing any duplicate characters and sets of characters separated by spaces in string?</p>

<p>I think this example explains it better:</p>

<pre><code>foo = 'h k k h2 h'
</code></pre>

<p>should become: </p>

<pre><code>foo = 'h k h2' # order not important
</code></pre>

<p>Other example:</p>

<pre><code>foo = 's s k'
</code></pre>

<p>becomes:</p>

<pre><code>foo = 's k'
</code></pre>
"
636990,73894,2009-03-12T00:53:27Z,6,wxPython or pygame for a simple card game?,"<p>I have been playing around with writing some simple card games in Python for fun and I would like to add a graphical user interface (GUI) to the games. Which library would you recommend for writing the GUI for a simple card game?</p>
"
637160,53390,2009-03-12T02:14:52Z,3,Django: Uploaded file locked. Can't rename,"<p>I'm trying to rename a file after it's uploaded in the model's save method. I'm renaming the file to a combination the files primary key and a slug of the file title.</p>

<p>I have it working when a file is first uploaded, when a new file is uploaded, and when there are no changes to the file or file title.</p>

<p>However, when the title of the file is changed, and the system tries to rename the old file to the new path I get the following error:</p>

<pre><code>WindowsError at /admin/main/file/1/
(32, 'The process cannot access the file because it is being used by another process')
</code></pre>

<p>I don't really know how to get around this. I've tried just coping the file to the new path. This works, but I don't know I can delete the old version.</p>

<p>Shortened Model:</p>

<pre><code>class File(models.Model):
    nzb = models.FileField(upload_to='files/')
    name = models.CharField(max_length=256)
    name_slug = models.CharField(max_length=256, blank=True, null=True, editable=False)

    def save(self):
        # Create the name slug.
        self.name_slug = re.sub('[^a-zA-Z0-9]', '-', self.name).strip('-').lower()
        self.name_slug = re.sub('[-]+', '-', self.name_slug)

        # Need the primary key for naming the file.
        super(File, self).save()

        # Create the system paths we need.
        orignal_nzb = u'%(1)s%(2)s' % {'1': settings.MEDIA_ROOT, '2': self.nzb}
        renamed_nzb = u'%(1)sfiles/%(2)s_%(3)s.nzb' % {'1': settings.MEDIA_ROOT, '2': self.pk, '3': self.name_slug}

        # Rename the file.
        if orignal_nzb not in renamed_nzb:
            if os.path.isfile(renamed_nzb):
                os.remove(renamed_nzb)

            # Fails when name is updated.
            os.rename(orignal_nzb, renamed_nzb)

        self.nzb = 'files/%(1)s_%(2)s.nzb' % {'1': self.pk, '2': self.name_slug}

        super(File, self).save()
</code></pre>

<p>I suppose the question is, does anyone know how I can rename an uploaded file when the uploaded file isn't be re-uploaded? That's the only time it appears to be locked/in-use.</p>

<p><hr /></p>

<p><strong>Update:</strong></p>

<p>Tyler's approach is working, except when a new file is uploaded the primary key is not available and his technique below is throwing an error.</p>

<pre><code>if not instance.pk:
    instance.save()
</code></pre>

<p>Error:</p>

<pre><code>maximum recursion depth exceeded while calling a Python object
</code></pre>

<p>Is there any way to grab the primary key?</p>
"
637295,34537,2009-03-12T03:50:34Z,3,Are there any pitfalls with using whitespace in Python?,"<p>At the moment I have never had a problem with whitespace in Python (although I've only used it in two projects and I was the only programmer).  What are some potential pitfalls with whitespace and indentation in Python for someone learning the language? </p>
"
637396,41613,2009-03-12T04:45:51Z,7,Default encoding for python for stderr?,"<p>I've got a noisy python script that I want to silence by directing its stderr output to /dev/null (using bash BTW).</p>

<p>Like so:</p>

<pre><code>python -u parse.py  1&gt; /tmp/output3.txt 2&gt; /dev/null
</code></pre>

<p>but it quickly exits prematurely. Hmm. I can't see the traceback because of course that goes out with stderr. It runs noisily and normally if I don't direct stderr somewhere.</p>

<p>So let's try redirecting it to a file somewhere rather than /dev/null, and take a look at what it's outputting:</p>

<pre><code>python -u parse.py  1&gt; /tmp/output3.txt 2&gt; /tmp/foo || tail /tmp/foo

Traceback (most recent call last):
  File ""parse.py"", line 79, in &lt;module&gt;
    parseit('pages-articles.xml')
  File ""parse.py"", line 33, in parseit
    print &gt;&gt;sys.stderr, ""bad page title"", page_title
UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-1: ordinal not in range(128)
</code></pre>

<p>So, the stderr that's being generated contains utf8, and for some reason python refuses to print non-ascii when it's being redirected, even though it's being directed to /dev/null (though of course python doesn't know that).</p>

<p>How can I silence the stderr of a python script even though it contains utf8? Is there any way to do it without re-writing every print to stderr in this script?</p>
"
637399,9908,2009-03-12T04:47:34Z,0,"On interface up, possible to scan for a specific MAC address?","<p>I admit the linux network system is somewhat foreign to me, I know enough of it to configure routes manually and assign a static IP if necessary.</p>

<p>So quick question, in the ifconfig configuration files, is it possible to add a post connect hook to a python script then use a python script to reassign a hostname in /etc/hosts and spawn off a new process to do other things once the hostname has been updated.</p>

<p>This is a ""fun"" project for me to solve an annoyance in my daily routine.  When I boot up my workstation in the morning, the DHCP service assigns it a IP at random.  So I usually stop what I'm doing, lookup my new IP, type that IP into my laptop and get synergy running so I can share the two machines.  I figure I lose 10-15 minutes a day doing this everyday of the week and I've never really messed with linux's networking system so it would ultimately pan out.</p>

<p>I already figured my python script would have to run as root, therefore I'd store it in /root or somewhere else that's safe.  I found a similar question on stack overflow that pointed me in the direction of <a href=""http://www.secdev.org/projects/scapy/index.html"" rel=""nofollow"">http://www.secdev.org/projects/scapy/index.html</a> a raw packet toolset to work with ARP.  Editing the host file is a snap... just wondering what possible side effects of trying to put this hook into a core service might cause.</p>
"
637565,77060,2009-03-12T06:26:51Z,8,Django with Passenger,"<p>I'm trying to get a trivial Django project working with Passenger on Dreamhost, following the instructions <a href=""http://www.soasi.com/2008/09/django-10-on-dreamhost-with-passenger-mod_rails/""> here </a></p>

<p>I've set up the directories exactly as in that tutorial, and ensured that django is on my PYTHONPATH (I can run python and type 'import django' without any errors).  However, when I try to access the url in a browser, I get the following message: ""An error occurred importing your passenger_wsgi.py"".  Here is the contents of my  passenger_wsgi.py file:</p>

<pre><code>import sys, os
sys.path.append(""/path/to/web/root/"") # I used the actual path in my file
os.environ['DJANGO_SETTINGS_MODULE'] = ‘myproject.settings’
import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler()
</code></pre>

<p>However, when I put the following simple ""Hello World"" application in passenger_wsgi.py, it works as intended, suggesting Passenger is set up correctly:</p>

<pre><code>def application(environ, start_response):
    write = start_response('200 OK', [('Content-type', 'text/plain')])
    return [""Hello, world!""]
</code></pre>

<p>What am I missing?  Seems like some config issue.</p>
"
637773,49136,2009-03-12T08:52:44Z,2,Function Parser with RegEx in Python,"<p>I have a source code in Fortran (almost irrelevant) and I want to parse the function names and arguments.</p>

<p>eg using </p>

<pre><code>(\w+)\([^\(\)]+\)
</code></pre>

<p>with</p>

<pre><code>a(b(1 + 2 * 2), c(3,4))
</code></pre>

<p>I get the following: (as expected)</p>

<pre><code>b, 1 + 2 * 2
c, 3,4
</code></pre>

<p>where I would need</p>

<pre><code>a, b(1 + 2 * 2), c(3,4)
b, 1 + 2 * 2
c, 3,4
</code></pre>

<p>Any suggestions?</p>

<p>Thanks for your time...</p>
"
637800,3497,2009-03-12T09:05:34Z,12,Showing page count with ReportLab,"<p><br />
I'm trying to add a simple ""page x of y"" to a report made with ReportLab.. I found <a href=""http://two.pairlist.net/pipermail/reportlab-users/2002-May/000020.html"">this old post</a> about it, but maybe six years later something more straightforward has emerged? ^^;<br />
I found <a href=""http://code.activestate.com/recipes/546511/"">this recipe</a> too, but when I use it, the resulting PDF is missing the images..</p>
"
638048,11522,2009-03-12T10:37:27Z,17,How do I sum the first value in each tuple in a list of tuples in Python?,"<p>I have a list of tuples (always pairs) like this:</p>

<pre><code>[(0, 1), (2, 3), (5, 7), (2, 1)]
</code></pre>

<p>I'd like to find the sum of the first items in each pair, i.e.:</p>

<pre><code>0 + 2 + 5 + 2
</code></pre>

<p>How can I do this in Python? At the moment I'm iterating through the list: </p>

<pre><code>sum = 0
for pair in list_of_pairs:
   sum += pair[0]
</code></pre>

<p>I have a feeling there must be a more Pythonic way.</p>
"
638095,68457,2009-03-12T10:52:29Z,6,Problem Inserting data into MS Access database using ADO via Python,"<p>[Edit 2: More information and debugging in answer below...]</p>

<p>I'm writing a python script to export MS Access databases into a series of text files to allow for more meaningful version control (I know - why Access? Why aren't I using existing solutions? Let's just say the restrictions aren't of a technical nature).</p>

<p>I've successfully exported the full contents and structure of the database using ADO and ADOX via the comtypes library, but I'm getting a problem re-importing the data.</p>

<p>I'm exporting the contents of each table into a text file with a list on each line, like so:</p>

<pre><code>[-9, u'No reply']
[1, u'My home is as clean and comfortable as I want']
[2, u'My home could be more clean or comfortable than it is']
[3, u'My home is not at all clean or comfortable']
</code></pre>

<p>And the following function to import the said file:</p>

<pre><code>import os
import sys
import datetime
import comtypes.client as client
from ADOconsts import *
from access_consts import *

class Db:
    def create_table_contents(self, verbosity = 0):
        conn = client.CreateObject(""ADODB.Connection"")
        rs = client.CreateObject(""ADODB.Recordset"")
        conn.ConnectionString = self.new_con_string
        conn.Open()
        for fname in os.listdir(self.file_path):
            if fname.startswith(""Table_""):
                tname = fname[6:-4]
                if verbosity &gt; 0:
                    print ""Filling table %s."" % tname
                conn.Execute(""DELETE * FROM [%s];"" % tname)
                rs.Open(""SELECT * FROM [%s];"" % tname, conn,
                        adOpenDynamic, adLockOptimistic)
                f = open(self.file_path + os.path.sep + fname, ""r"")
                data = f.readline()
                print repr(data)
                while data != '':
                    data = eval(data.strip())
                    print data[0]
                    print rs.Fields.Count
                    rs.AddNew()
                    for i in range(rs.Fields.Count):
                        if verbosity &gt; 1:
                            print ""Into field %s (type %s) insert value %s."" % (
                                rs.Fields[i].Name, str(rs.Fields[i].Type),
                                data[i])
                        rs.Fields[i].Value = data[i]
                    data = f.readline()
                    print repr(data)
                    rs.Update()
                rs.Close()
        conn.Close()
</code></pre>

<p>Everything works fine except that numerical values (double and int) are being inserted as zeros. Any ideas on whether the problem is with my code, eval, comtypes, or ADO?</p>

<p>Edit: I've fixed the problem with inserting numbers - casting them as strings(!) seems to solve the problem for both double and integer fields.</p>

<p>However, I now have a different issue that had previously been obscured by the above: the first field in every row is being set to 0 regardless of data type... Any ideas?</p>
"
638150,NA,2009-03-12T11:06:40Z,13,Ruby on Rails versus Python,"<p>I am in the field of data crunching and very soon might make a move to the world of web programming. Although I am fascinated both by Python and Ruby as both of them seem to be having every similar styles when it comes to writing business logic or data crunching logic.</p>

<p>But when I start googling for web development I start inclining towards Ruby on Rails my question is why is the web world obsessed with ruby on rails and active records so much?</p>

<p>There seem to be so many screencasts to learn Ruby on Rails and plethora of good books too 
why is Python not able to pull the crowd  when it comes to creating screencasts or ORM's like active record.</p>
"
638360,77175,2009-03-12T12:15:14Z,4,Python - How to calculate equal parts of two dictionaries?,"<p>I have a problem with combining or calculating common/equal part of these two dictionaries. In my dictionaries, values are lists: </p>

<pre><code>d1 = {0:['11','18','25','38'], 
      1:['11','18','25','38'], 
      2:['11','18','25','38'], 
      3:['11','18','25','38']}

d2 = {0:['05','08','11','13','16','25','34','38','40', '43'], 
      1:['05', '08', '09','13','15','20','32','36','38', '40','41'], 
      2:['02', '08', '11', '13', '18', '20', '22','33','36','39'], 
      3:['06', '11', '12', '25', '26', '27', '28', '30', '31', '37']}
</code></pre>

<p>I'd like to check ""d2"" and know if there are numbers from ""d1"". If there are some, I'd like to update one of them with new data or receive 3rd dictionary ""d3"" with only the values that are identical/equal in both ""d1"" and ""d2"" like:</p>

<pre><code>d3 = {0:['11','25','38'], 1:['38'], 2:['11','18'], 3:['11','25']}
</code></pre>

<p>Can anyone help me with this?</p>

<p>My fault I forgot to be more specific. I'm looking for a solution in Python.</p>
"
638464,15274,2009-03-12T12:46:57Z,4,"In stackless Python, can you send a channel over a channel?","<p>I do not have <em>stackless</em> currently running, so I can not try this myself.</p>

<pre><code>import stackless
ch1 = stackless.channel()
ch2 = stackless.channel()

ch1.send(ch2)
ch3 = ch1.receive()
</code></pre>

<p>Are <em>ch2</em> and <em>ch3</em> then the same channel? Say:</p>

<pre><code>text = ""Hallo""
ch2.send(text)
assert text == ch3.receive()
</code></pre>

<p>This feature reminded me of a <a href=""https://www.youtube.com/watch?v=hB05UFqOtFA"" rel=""nofollow"">talk about Newsqueak</a> that Robert Pike (of <a href=""http://en.wikipedia.org/wiki/Plan_9_from_Bell_Labs"" rel=""nofollow"">Plan9</a> fame) gave at Google. In Newsqueak you could send channels over channels.</p>
"
638647,42813,2009-03-12T13:36:19Z,5,Paging depending on grouping of items in Django,"<p>For a website implemented in Django/Python we have the following requirement:</p>

<p>On a view page there are 15 messages per web paging shown. When there are more two or more messages from the same source, that follow each other on the view, they should be grouped together. </p>

<p>Maybe not clear, but with the following exemple it might be:</p>

<p>An example is (with 5 messages on a page this time):</p>

<pre><code>  Message1 Source1
  Message2 Source2
  Message3 Source2
  Message4 Source1
  Message5 Source3
  ...
</code></pre>

<p>This should be shown as:</p>

<pre><code>Message1 Source1
Message2 Source2 (click here to 1 more message from Source2)
Message4 Source1
Message5 Source3
Message6 Source2
</code></pre>

<p>So on each page a fixed number of items is shown on page, where some have been regrouped.</p>

<p>We are wondering how we can create a Django or MySQL query to query this data in a optimal and in an easy way. Note that paging is used and that the messages are sorted by time.</p>

<p>PS: I don't think there is a simple solution for this due to the nature of SQL, but sometimes complex problems can be easily solved</p>
"
638893,34329,2009-03-12T14:35:42Z,25,What is the most efficient way in Python to convert a string to all lowercase stripping out all non-ascii alpha characters?,"<p>I have a simple task I need to perform in Python, which is to convert a string to all lowercase and strip out all non-ascii non-alpha characters. </p>

<p>For example:</p>

<pre><code>""This is a Test"" -&gt; ""thisisatest""
""A235th@#$&amp;( er Ra{}|?&gt;ndom"" -&gt; ""atherrandom""
</code></pre>

<p>I have a simple function to do this:</p>

<pre><code>import string
import sys

def strip_string_to_lowercase(s):
    tmpStr = s.lower().strip()
    retStrList = []
    for x in tmpStr:
        if x in string.ascii_lowercase:
            retStrList.append(x)

    return ''.join(retStrList)
</code></pre>

<p>But I cannot help thinking there is a more efficient, or more elegant, way.</p>

<p>Thanks!</p>

<p><hr /></p>

<p><strong>Edit:</strong></p>

<p>Thanks to all those that answered. I learned, and in some cases re-learned, a good deal of python.</p>
"
639078,54964,2009-03-12T15:11:45Z,0,Unable search names which contain three 7s in random order by AWK/Python/Bash,"<p>I need to find names which contain three number 7 in the random order.</p>

<p><strong>My attempt</strong></p>

<p>We need to find first names which do not contain seven</p>

<pre><code>ls | grep [^7]
</code></pre>

<p>Then, we could remove these matches from the whole space</p>

<pre><code>ls [remove] ls | grep [^7]
</code></pre>

<p>The problem in my pseudo-code starts to repeat itself quickly.</p>

<p><strong>How can you find the names which contain three 7s in the random order by AWK/Python/Bash?</strong></p>

<p><strong>[edit]</strong>
The name can contain any number of letters and it contains words of three 7s. </p>
"
639162,15622,2009-03-12T15:26:53Z,5,python: determine if a class is nested,"<p>Suppose you have a python method that gets a type as parameter; is it possible to determine if the given type is a nested class?<br />
E.g. in this example:</p>

<pre><code>def show_type_info(t):
    print t.__name__
    # print outer class name (if any) ...

class SomeClass:
    pass

class OuterClass:
    class InnerClass:
        pass

show_type_info(SomeClass)
show_type_info(OuterClass.InnerClass)
</code></pre>

<p>I would like the call to <code>show_type_info(OuterClass.InnerClass)</code> to show also that InnerClass is defined inside OuterClass.</p>
"
639409,73669,2009-03-12T16:22:12Z,4,"PHP vs. long-running process (Python, Java, etc.)?","<p>I'd like to have your opinion about writing web apps in PHP vs. a long-running process using tools such as Django or Turbogears for Python.</p>

<p>As far as I know:
- In PHP, pages are fetched from the hard-disk every time (although I assume the OS keeps files in RAM for a while after they've been accessed)
- Pages are recompiled into opcode every time (although tools from eg. Zend can keep a compiled version in RAM)
- Fetching pages every time means reading global and session data every time, and re-opening connections to the DB</p>

<p>So, I guess PHP makes sense on a shared server (multiple sites sharing the same host) to run apps with moderate use, while a long-running process offers higher performance with apps that run on a dedicated server and are under heavy use?</p>

<p>Thanks for any feedback.</p>
"
639744,46914,2009-03-12T17:49:21Z,6,Running unit tests with Nose inside a Python environment such as Autodesk Maya?,"<p>I'd like to start creating unit tests for my Maya scripts.  These scripts must be run inside the Maya environment and rely on the <code>maya.cmds</code> module namespace.</p>

<p>How can I run Nose tests from inside a running environment such as Maya?</p>
"
639792,40996,2009-03-12T18:02:08Z,10,Setting object owner with generic create_object view in django,"<p>Is it possible to use create_object view to create a new object and automatically asign request.user as foreign key?</p>

<p>P.E:</p>

<pre><code>class Post(models.Model):
    text = models.TextField()
    author = models.ForeignKey(User)
</code></pre>

<p>What I want is to use create_object and fill author with request.user.</p>
"
639821,13055,2009-03-12T18:08:33Z,4,Python: Incrementally marshal / pickle an object?,"<p>I have a large object I'd like to serialize to disk. I'm finding <a href=""http://www.python.org/doc/2.5.2/lib/module-marshal.html"" rel=""nofollow"">marshal</a> works quite well and is nice and fast. </p>

<p>Right now I'm creating my large object then calling marshal.dump . I'd like to avoid holding the large object in memory if possible - I'd like to dump it incrementally as I build it. Is that possible?</p>

<p>The object is fairly simple, a dictionary of arrays. </p>
"
639949,16034,2009-03-12T18:41:20Z,1,Validating Oracle dates in Python,"<p>Our Python CMS stores some date values in a generic ""attribute"" table's <em>varchar</em> column.  Some of these dates are later moved into a table with an actual <em>date</em> column.  If the CMS user entered an invalid date, it doesn't get caught until the migration, when the query fails with an ""Invalid string date"" error.</p>

<p>How can I use Python to make sure that all dates put into our CMS are valid Oracle string date representations?</p>
"
639962,77374,2009-03-12T18:44:45Z,26,Unzipping directory structure with python,"<p>I have a zip file which contains the following directory structure:</p>

<pre><code>dir1\dir2\dir3a
dir1\dir2\dir3b
</code></pre>

<p>I'm trying to unzip it and maintain the directory structure however I get the error:</p>

<pre><code>IOError: [Errno 2] No such file or directory: 'C:\\\projects\\\testFolder\\\subdir\\\unzip.exe'
</code></pre>

<p>where testFolder is dir1 above and subdir is dir2.</p>

<p>Is there a quick way of unzipping the file and maintaining the directory structure?</p>
"
640001,40529,2009-03-12T18:56:57Z,33,How can I remove text within parentheses with a regex?,"<p>I'm trying to handle a bunch of files, and I need to alter then to remove extraneous information in the filenames; notably, I'm trying to remove text inside parentheses. For example:</p>

<pre><code>filename = ""Example_file_(extra_descriptor).ext""
</code></pre>

<p>and I want to regex a whole bunch of files where the parenthetical expression might be in the middle or at the end, and of variable length.</p>

<p>What would the regex look like?  Perl or Python syntax would be preferred.</p>
"
640068,NA,2009-03-12T19:10:29Z,11,What's the nearest equivalent of Beautiful Soup for Ruby?,"<p>I love the Beautiful Soup scraping library in Python. It just works. Is there a close equivalent in Ruby? </p>
"
640218,52199,2009-03-12T19:54:32Z,0,Can I override the html_name for a tabularinline field in the admin interface?,"<p><strong>Is it possible to override the html naming of fields in TabularInline admin forms so they won't contain dashes?</strong></p>

<p>I'm trying to apply the knowledge obtained <a href=""http://jannisleidel.com/2008/11/autocomplete-form-widget-foreignkey-model-fields/"" rel=""nofollow"">here</a> to create a TabularInline admin form that has the auto-complete feature.</p>

<p>It all works except that Django insists in naming the fields in a tabularinline queryset as something in the lines of:</p>

<pre><code>[model]_set-[index]-[field]
</code></pre>

<p>So, if my model is TravelLogClient and my foreign key field is company, the fields in the HTML form for the three entries in the tabularinline queryset will be:</p>

<pre><code>travellogclient_set-0-company
travellogclient_set-1-company
travellogclient_set-2-company
</code></pre>

<p>The problem is that javascript dislikes identifiers with dashes in them. So the javascript fails and the autocomplete doesn't work.</p>

<p>THIS IS ONLY A PROBLEM WITH TABULAR INLINE forms! If I use <a href=""http://jannisleidel.com/2008/11/autocomplete-form-widget-foreignkey-model-fields/"" rel=""nofollow"">Jannis' autocomplete example</a> on a non tabular admin form field, it works just fine because the field name doesn't have the ""<code>..._set-[index]-...</code>"" portion in the HTML and javascript.</p>

<p>Rather than submitting a patch to django's source code changing dashes for underscores on <code>contrib.forms.forms.py</code> and <code>contrib.forms.formsets.py</code>, it occurred to me that it is possible that behavior can be overridden somehow. </p>

<p>Failing that, what is the easiest way to make those dashes in the html_name become underscores instead?</p>

<p>Thanks in advance!</p>
"
640310,53007,2009-03-12T20:21:02Z,3,How do I upload a file with mod_python?,"<p>I want to create a simple file upload form and I must be completely incapable. I've read docs and tutorials,but for some reason, I'm not getting the submitted form data. I wrote the smallest amount of code I could to test and it still isn't working. Any ideas what's wrong?</p>

<pre><code>def index():
    html = '''
    &lt;html&gt;
      &lt;body&gt;
      &lt;form id=""fileUpload"" action=""./result"" method=""post""&gt;
        &lt;input type=""file"" id=""file""/&gt;
        &lt;input type=""submit"" value=""Upload""/&gt;
      &lt;/form&gt;
      &lt;/body&gt;
    &lt;/html&gt;
    '''
    return html

def result(req):
    try: tmpfile = req.form['file']
    except:
        return ""no file!""
</code></pre>
"
640389,41613,2009-03-12T20:38:47Z,5,tell whether python is in -i mode,"<p>How can you tell whether python has been started with the -i flag?</p>

<p>According to <a href=""http://www.wingware.com/psupport/python-manual/2.6/using/cmdline.html"" rel=""nofollow"">the docs</a>, you can check the PYTHONINSPECT variable in os.environ, which is the <em>equivalent</em> of -i. But apparently it doesn't work the same way.</p>

<p>Works:</p>

<pre><code>$ PYTHONINSPECT=1 python -c 'import os; print os.environ[""PYTHONINSPECT""]'
</code></pre>

<p>Doesn't work:</p>

<pre><code>$ python -i -c 'import os; print os.environ[""PYTHONINSPECT""]'
</code></pre>

<p>The reason I ask is because I have a script that calls sys.exit(-1) if certain conditions fail. This is good, but sometimes I want to manually debug it using -i. I suppose I can just learn to use ""PYTHONINSPECT=1 python"" instead of ""python -i"", but it would be nice if there were a universal way of doing this.</p>
"
640479,59842,2009-03-12T21:04:56Z,4,Python introspection: How to get an 'unsorted' list of object attributes?,"<p>The following code</p>

<pre><code>import types
class A:
    class D:
        pass
    class C:
        pass
for d in dir(A):
    if type(eval('A.'+d)) is types.ClassType:
        print d
</code></pre>

<p>outputs</p>

<pre><code>C
D
</code></pre>

<p>How do I get it to output in the order in which these classes were defined in the code? I.e.</p>

<pre><code>D
C
</code></pre>

<p>Is there any way other than using inspect.getsource(A) and parsing that?</p>
"
640733,76929,2009-03-12T22:22:32Z,3,Formatted text in GAE,"<p>Google app engine question: What is a good way to take formatted text (does not have to be rich text) from the user and then store it in a text or blog property in the datastore? Mainly what I'm looking for is it to store newlines and strings of spaces, so that the text comes back looking the same as when it was submitted. </p>
"
640802,30059,2009-03-12T22:49:56Z,5,Writing to the serial port in Vista from Python,"<p>How do I write to the serial port in Vista from Python? The termios package only seem to support posix.</p>
"
640877,7883,2009-03-12T23:26:35Z,8,Can anyone point out the pros and cons of TG2 over Django?,"<p>Django is my favorite python web framework. I've tried out others like pylons, web2py, nevow and others.</p>

<p>But I've never looked into TurboGears with much enthusiasm.</p>

<p>Now with TG2 out of beta I may give it a try. I'd like to know what are some of the pros and cons compared to Django.</p>
"
640970,74474,2009-03-13T00:09:14Z,12,Email integration,"<p>I was wondering if someone could help me out.  In some web application, the app will send out emails, say when a new message has been posted.  Then instead of signing into the application to post a reply you can just simply reply to the email and it will automatically update the web app with your response.</p>

<p>My question is, how is this done and what is it called?</p>

<p>Thanks</p>
"
641000,54964,2009-03-13T00:19:37Z,1,Unable to set iPython to use 2.6.1 Python,"<p>I have installed the newest iPython in Mac. However, it uses the Python verion 2.5.1.</p>

<p>I installed the Python 2.6.1 by MacPython package at <a href=""http://www.python.org/download/"" rel=""nofollow"">here</a>. </p>

<p><strong>How can I make my iPython to use Python 2.6.1?</strong></p>

<p>I am not sure where the MacPython package exactly installed the newest Python.
The <strong>newest Python should somehow put the PATH</strong> so that iPyhon can use it.  </p>

<p><strong>[edit]</strong> after the first answer</p>

<p>I run the following command</p>

<pre><code>$ln -s python python2.6
</code></pre>

<p>I cannot open python2.6 by </p>

<pre><code>python
</code></pre>
"
641145,71097,2009-03-13T01:21:36Z,1,"Django, Python Loop Logic Problem","<p>This works, partially.  More information may be needed, however, I thought I would post to get advice on anything obvious that might be wrong here.</p>

<p>The problem is that if activity.get_cost() returns a <code>False</code> value, the function seems to exit entirely, returning <code>None</code>.</p>

<p>What I'd like it to do, of course, is accumulate <code>cost</code> Decimal values in the <code>costs = []</code> and return their sum.  Simple, I would have thought... but my novice Python skills are apparently missing something.</p>

<p>More information provided on request.  Thank you.</p>

<pre><code>def get_jobrecord_cost(self):
    costs = []
    for activity in self.activity_set.all():
        cost = activity.get_cost()
        if cost:
            costs.append(cost)
    if len(costs):
        return sum(costs)
    else:
        return False
</code></pre>
"
641420,3594,2009-03-13T04:02:31Z,123,How should I log while using multiprocessing in Python?,"<p>Right now I have a central module in a framework that spawns multiple processes using the Python 2.6 <a href=""http://docs.python.org/library/multiprocessing.html?#module-multiprocessing""><code>multiprocessing</code> module</a>. Because it uses <code>multiprocessing</code>, there is module-level multiprocessing-aware log, <code>LOG = multiprocessing.get_logger()</code>. Per <a href=""http://docs.python.org/library/multiprocessing.html#logging"">the docs</a>, this logger has process-shared locks so that you don't garble things up in <code>sys.stderr</code> (or whatever filehandle) by having multiple processes writing to it simultaneously.</p>

<p>The issue I have now is that the other modules in the framework are not multiprocessing-aware. The way I see it, I need to make all dependencies on this central module use multiprocessing-aware logging. That's annoying <em>within</em> the framework, let alone for all clients of the framework. Are there alternatives I'm not thinking of?</p>
"
641469,72372,2009-03-13T04:31:55Z,8,"""Pythonic"" equivalent for handling switch and multiple string compares","<p>Alright, so my title sucked.  An example works better:</p>

<pre><code>input = 'check yahoo.com'
</code></pre>

<p>I want to parse input, using the first word as the ""command"", and the rest of the string as a parameter.  Here's the simple version of how my non-Pythonic mind is coding it:</p>

<pre><code>if len(input) &gt; 0:
    a = input.split(' ')
    if a[0] == 'check':
        if len(a) &gt; 1:
            do_check(a[1])
    elif a[0] == 'search':
        if len(a) &gt; 1:
            do_search(a[1])
</code></pre>

<p>I like Python because it makes normally complicated things into rather simple things.  I'm not too experienced with it, and I am fairly sure there's a much better way to do these things... some way more pythonic.  I've seen some examples of people replacing switch statements with dicts and lambda functions, while other people simply recommended if..else nests.</p>
"
641770,76681,2009-03-13T07:48:58Z,12,Can 3D OpenGL game written in Python look good and run fast?,"<p>I am planning to write an simple 3d(isometric view) game in Java using jMonkeyEngine - nothing to fancy, I just want to learn something about OpenGL and writing efficient algorithms (random map generating ones). </p>

<p>When I was planning what to do, I started wondering about switching to Python. I know that Python didn't come into existence to be a tool to write 3d games, but is it possible to write good looking games with this language? </p>

<p>I have in mind 3d graphics, nice effects and free CPU time to power to rest of game engine? I had seen good looking java games - and too be honest, I was rather shocked when I saw level of detail achieved in Runescape HD. </p>

<p>On the other hand, pygame.org has only 2d games, with some starting 3d projects. Are there any efficient 3d game engines for python? Is pyopengl the only alternative? Good looking games in python aren't popular or possible to achieve? </p>

<p>I would be grateful for any information / feedback.</p>
"
641794,70350,2009-03-13T08:02:43Z,11,Highlighting trailing whitespace in Textmate for Python?,"<p>I would like to do something like <a href=""http://remysharp.com/2008/03/30/trailing-white-space-in-textmate/"">this</a> Textmate tip, so that trailing whitespace are always highlighted in some way when I code something in Python - it makes it easier to correct it immediately and other editors such as Emacs can do it.</p>

<p>Unfortunately the discussion after that post seems to suggest it's difficult to do. For me the <code>invalid.trailing-whitespace</code> scope selector is not even visible in the preferences after following this tip. Has anyone else had any success with this?</p>
"
641985,30786,2009-03-13T09:48:05Z,5,"Rename files, Python/Jython","<p>I have a directory full of files, some which have an ampersand in their names.  I would like to rename all the files with ampersands and replace each ampersand with a plus (+).  I am working with around 10k files.  What would be the best method to do this?</p>
"
642154,77175,2009-03-13T10:53:59Z,211,How to convert strings into integers in Python?,"<p>I have a tuple of tuples from a MySQL query like this:</p>

<pre><code>T1 = (('13', '17', '18', '21', '32'),
      ('07', '11', '13', '14', '28'),
      ('01', '05', '06', '08', '15', '16'))
</code></pre>

<p>I'd like to convert all the string elements into integers and put it back nicely to list of lists this time:</p>

<pre><code>T2 = [[13, 17, 18, 21, 32], [7, 11, 13, 14, 28], [1, 5, 6, 8, 15, 16]]
</code></pre>

<p>I tried to achieve it with <code>eval</code> but didn't get any decent result yet.</p>
"
642648,3594,2009-03-13T13:16:56Z,22,How do I format positional argument help using Python's optparse?,"<p>As mentioned in <a href=""http://docs.python.org/library/optparse.html?highlight=indentedhelpformatter#creating-the-parser"">the docs</a> the <code>optparse.OptionParser</code> uses an <code>IndentedHelpFormatter</code> to output the formatted option help, for which which I found some <a href=""http://corebio.googlecode.com/svn/tags/0.5.0/apidocs/optparse.IndentedHelpFormatter-class.html"">API documentation</a>.</p>

<p><strong>I want to display a similarly formatted help text for the required, positional arguments</strong> in the usage text. Is there an adapter or a simple usage pattern that can be used for similar positional argument formatting?</p>

<h3>Clarification</h3>

<p>Preferably only using the stdlib. Optparse does great except for this one formatting nuance, which I feel like we should be able to fix without importing whole other packages. :-)</p>
"
642762,31610,2009-03-13T13:42:33Z,13,Is it possible to replace a function/method decorator at runtime? [ python ],"<p>If I have a function :</p>

<pre><code>
@aDecorator
def myfunc1():
  # do something here

if __name__ = ""__main__"":
  # this will call the function and will use the decorator @aDecorator
  myfunc1() 
  # now I want the @aDecorator to be replaced with the decorator @otherDecorator
  # so that when this code executes, the function no longer goes through
  # @aDecorator, but instead through @otherDecorator. How can I do this?
  myfunc1()
</code></pre>

<p>Is it possible to replace a decorator at runtime?</p>
"
642763,77175,2009-03-13T13:42:44Z,271,Python - Intersection of two lists,"<p>I know how to get an intersection of two flat lists:</p>

<pre><code>b1 = [1,2,3,4,5,9,11,15]
b2 = [4,5,6,7,8]
b3 = [val for val in b1 if val in b2]
</code></pre>

<p>or </p>

<pre><code>def intersect(a, b):
    return list(set(a) &amp; set(b))

print intersect(b1, b2)
</code></pre>

<p>But when I have to find intersection for nested lists then my problems starts:</p>

<pre><code>c1 = [1, 6, 7, 10, 13, 28, 32, 41, 58, 63]
c2 = [[13, 17, 18, 21, 32], [7, 11, 13, 14, 28], [1, 5, 6, 8, 15, 16]]
</code></pre>

<p>In the end I would like to receive:</p>

<pre><code>c3 = [[13,32],[7,13,28],[1,6]]
</code></pre>

<p>Can you guys give me a hand with this?</p>

<h3>Related</h3>

<ul>
<li><a href=""http://stackoverflow.com/questions/406121/flattening-a-shallow-list-in-python"">Flattening a shallow list in python</a></li>
</ul>
"
642853,25705,2009-03-13T14:01:28Z,3,WinXP button-style with wxPython,"<p>I noticed that my programs written with wxPython have Win98 button style.
But Boa Constructor (that is written using wxPython too) got pretty buttons.</p>

<p>How to make buttons look like current Windows buttons style?</p>
"
642877,2708852,2009-03-13T14:06:30Z,2,Python script at Visual C++ 2005 build step not spawning other processes,"<p>I have the following post-build step in a VC++ 2005 project that calls a Python 2.5.1 script:</p>

<pre><code>postbuild.py
</code></pre>

<p>postbuild.py does:</p>

<pre><code>import os
os.system('cd') # cd is just a test, could be anything
</code></pre>

<p>The process never starts, and it's the same with any other process I try, even using subprocess.call or Popen instead of os.system.</p>

<p>Does anyone know about anything related to problems like this in Python 2.5.1 or in build events in Visual C++ 2005 SP1?</p>
"
643173,NA,2009-03-13T15:14:07Z,2,"regular expression help with converting exp1^exp2 to pow(exp1, exp2)","<p>I am converting some matlab code to C, currently I have some lines that have powers using the ^, which is rather easy to do with something along the lines <code>\(?(\w*)\)?\^\(?(\w*)\)?</code></p>

<p>works fine for converting <code>(glambda)^(galpha)</code>,using the sub routine in python <code>pattern.sub(pow(\g&lt;1&gt;,\g&lt;2&gt;),'(glambda)^(galpha)')</code></p>

<p>My problem comes with nested parenthesis</p>

<p>So I have a string like:</p>

<p><code>glambdastar^(1-(1-gphi)*galpha)*(glambdaq)^(-(1-gphi)*galpha);</code></p>

<p>And I can not figure out how to convert that line to:</p>

<p><code>pow(glambdastar,(1-(1-gphi)*galpha))*pow(glambdaq,-(1-gphi)*galpha));</code></p>
"
643422,11992,2009-03-13T16:05:51Z,2,How can I auto-fill a paragraph in Eclipse?,"<p>I would like to auto-fill a paragraph to 80 characters (or some other fixed width) in Eclipse. Is this possible via a keyboard command like in Emacs? Or is there maybe a plugin (I did not find anything on google)?</p>

<p>Edit: I am not sure if this is relevant, but I need this for docstrings in Python code (using the PyDev plugin).</p>
"
643699,11522,2009-03-13T17:07:53Z,52,How can I use numpy.correlate to do autocorrelation?,"<p>I need to do auto-correlation of a set of numbers, which as I understand it is just the correlation of the set with itself. </p>

<p>I've tried it using numpy's correlate function, but I don't believe the result, as it almost always gives a vector where the first number is <em>not</em> the largest, as it ought to be.</p>

<p>So, this question is really two questions:</p>

<ol>
<li>What exactly is numpy.correlate doing?</li>
<li>How can I use it (or something else) to do auto-correlation?</li>
</ol>
"
643756,NA,2009-03-13T17:25:56Z,3,Does python's pip support http authentication?,"<p>As the title says, does pip support http authentication, like easy_install does?</p>

<p>If not, are there any (better) alternatives to running a private package repository?  I see pip can access source repositories (git,svn etc.), but can version requirements be used with this?</p>
"
643823,77175,2009-03-13T17:41:29Z,13,Python - list transformation,"<p>Does anyone knows what magic I have to use to change x list: </p>

<blockquote>
  <p>x = [1,2,3,4,5,11]</p>
</blockquote>

<p>into y list?</p>

<blockquote>
  <p>y = ['01','02','03','04','05','11']</p>
</blockquote>

<p>Thank you all in advance for helping me...</p>
"
643930,77835,2009-03-13T18:14:21Z,4,"Using ""like"" in a cursor/query with a parameter in python (django)","<p>I know this may be something stupid but I decided to ask any way.</p>

<p>I've been trying to query something like:</p>

<pre><code> cursor.execute(""select col1, col2   \
                    from my_tablem \
                    where afield like '%%s%'
                    and secondfield = %s
                    order by 1 desc "" % (var1, var2) )
</code></pre>

<p>But I get an error in the like sentence. It doesn't like the extra % which I need to get all the results that contains the first %s value.</p>

<p>Ideas?</p>

<p>TIA! </p>
"
643950,91385,2009-03-13T18:16:50Z,3,How do I rewrite $x = $hash{blah} || 'default' in Python?,"<p>How do I pull an item out of a Python dictionary without triggering a KeyError? In Perl, I would do:</p>

<pre><code>$x = $hash{blah} || 'default'
</code></pre>

<p>What's the equivalent Python?</p>
"
644052,6592,2009-03-13T18:33:59Z,3,Concurrency implications of EAFP/LBYL,"<p>When writing concurrent/multithreaded code in Python, is it especially important to follow the ""Easier to Ask for Forgiveness than Permission"" (EAFP) idiom, rather than ""Look Before You Leap"" (LBYL)?  Python's exceptionally dynamic nature means that almost anything (e.g., attribute removal) can happen between looking and leaping---if so, what's the point?  For example, consider</p>

<pre><code># LBYL
if hasattr(foo, 'bar'):
    baz = foo.bar
</code></pre>

<p>versus</p>

<pre><code># EAFP
try:
    baz = foo.bar
except AttributeError:
    pass
</code></pre>

<p>In the LBYL example, the <code>bar</code> attribute could disappear from <code>foo</code> before the actual call to <code>foo.bar</code> is made, so do you gain anything from the check?  If there's a risk the attribute might disappear, you need locks and/or try/except clauses anyway.</p>

<p>One possible argument here is that this example makes the extremely pessimistic assumption that ""antagonistic code"" is running that could yank the rug from under you at any moment.  In most use cases, this is highly unlikely.</p>
"
644062,91385,2009-03-13T18:35:33Z,1,How should I conditionally assign based on the existence of a dictionary key?,"<p>I've got some Perl code like this:</p>

<pre><code>my $match = $matches{$key}
            ? ""$matches{$key} was a match!""
            : ""There was no match.""
</code></pre>

<p>How is this best rewritten in Python? I'm trying to avoid getting a KeyError.</p>
"
644073,7536,2009-03-13T18:40:41Z,11,signal.alarm replacement in Windows [Python],"<p>I have a function that occasionally hangs.</p>

<p>Normally I would set an alarm, but I'm in Windows and it's unavailable.</p>

<p>Is there a simple way around this, or should I just create a thread that calls <code>time.sleep()</code>?</p>
"
644081,NA,2009-03-13T18:44:08Z,3,help with complex join in Django ORM,"<pre><code>class Domains(models.Model):
    name = models.CharField(max_length=30)
    description = models.CharField(max_length= 60)
    user = models.ManyToManyField(""Users"", blank=True, null=True)
    def __unicode__(self):
        return self.name

class Groups(models.Model):
    domain = models.ForeignKey(Domains)
    name = models.CharField(max_length=30)
    description = models.CharField(max_length= 60)
    def __unicode__(self):
        return self.name

class Users(models.Model):
    login = models.CharField(max_length=30, unique=True)
    group = models.ManyToManyField(Groups, blank=True, null=True)
    def __unicode__(self):
        return self.login
</code></pre>

<p>I have the model above. Needed some assistance working with Django ORM. 
How would I build a query the returns all the Group names that belong to only those Domains to which a User belongs</p>
"
644170,91385,2009-03-13T19:09:17Z,45,How does Python sort a list of tuples?,"<p>Empirically, it seems that Python's default list sorter, when passed a list of tuples, will sort by the first element in each tuple. Is that correct? If not, what's the right way to sort a list of tuples by their first elements?</p>
"
644178,24215,2009-03-13T19:11:21Z,11,How do I re-map python dict keys,"<p>I am working on a program that (among other things) reads a CSV file in (it gets stored as an array of dicts in the form <code>[{col1:data1a,col2:data2a},{col1:data1b,col2:data2b}]</code> ). For each row, as part of other processing, I need to remap those keys to user entered values, which are provided in another dict so they can be used as parameters in an API call.  The mapping array is in the form:  <code>{badname1:goodname1, badname2:goodname2,...}</code>.</p>

<p>So I'd like to get from:
<code>{badname1:data1, badname2:data2,...}</code> to <code>{goodname1:data1, goodname2:data2,...}</code></p>

<p>I'd like to use something like <code>zip()</code> (although <code>zip()</code> yields <code>{badname1:badname1,...}</code>).</p>

<p>Seems like there should be an obvious solution that is alluding me.</p>

<p>EDIT:
If the data is in <code>a</code> and the mapping in <code>b</code>:</p>

<p><code>dict(zip(b,a.itervalues()))</code></p>

<p>I get close, but it will only work in cases where the fields are known to be in the same order I think.</p>
"
644767,56541,2009-03-13T21:56:15Z,11,Converting from mod_python to mod_wsgi,"<p>My website is written in Python and currently runs under mod_python with Apache. Lately I've had to put in a few ugly hacks that make me think it might be worth converting the site to mod_wsgi. But I've gotten used to using some of mod_python's utility classes, especially <code>FieldStorage</code> and <code>Session</code> (and sometimes <code>Cookie</code>), and from a scan of <a href=""http://www.python.org/dev/peps/pep-0333/"">PEP 333</a>, I don't see any equivalents to these. (Not surprising, because I understand that those kinds of utilities don't belong in the WSGI spec)</p>

<p>Question is, are there ""standard"" (i.e. commonly accepted) replacements for these mod_python utility classes that I can use in WSGI, or could I/should I write my own?</p>

<p>(FYI: currently using Python 2.5)</p>
"
644812,51532,2009-03-13T22:18:35Z,4,Matplotlib's GUI doesn't allow typing in save box?,"<p>I've been using matplotlib in python for some time now and I've finally gotten around to asking this question about an issue on my mac. When a plot shows up (after the <code>plot()</code> command, <code>draw()</code>, or <code>show()</code>), I have all the functionality I could want; I can move, zoom, etc. that I didn't do in the code.</p>

<p>When I go to save a figure with the view as I desire the save as box opens up and prompts for a filename. Anything I type appears in the terminal I used to execute the command! Selecting X11 and then typing has same result. Nothing seems to put the keyboards output into that box, but I can paste into the box using the mouse->Paste action and I can select files in the menu to overwrite and it works fine.</p>

<p>What's up with this?</p>

<h2>Update:</h2>

<p>The problem was wonderfully outlined and now has some solutions posted <a href=""http://stackoverflow.com/questions/3692928/why-doesnt-the-save-button-work-on-a-matplotlib-plot"">in this post: Why doesn't the save button work on a matplotlib plot?</a></p>
"
644821,40785,2009-03-13T22:20:31Z,41,Python: How to run unittest.main() for all source files in a subdirectory?,"<p>I am developing a Python module with several source files, each with its own test class derived from <a href=""http://docs.python.org/library/unittest.html"">unittest</a> right in the source.  Consider the directory structure:</p>

<pre><code>dirFoo\
    test.py
    dirBar\
        __init__.py
        Foo.py
        Bar.py
</code></pre>

<p>To test either Foo.py or Bar.py, I would add this at the end of the Foo.py and Bar.py source files:</p>

<pre><code>if __name__ == ""__main__"":
    unittest.main()
</code></pre>

<p>And run Python on either source, i.e.</p>

<pre><code>$ python Foo.py
...........
----------------------------------------------------------------------
Ran 11 tests in 2.314s

OK
</code></pre>

<p>Ideally, I would have ""test.py"" automagically search dirBar for any unittest derived classes and make one call to ""unittest.main()"".  What's the best way to do this in practice?  </p>

<p>I tried using Python to call <a href=""http://docs.python.org/library/functions.html#execfile"">execfile</a> for every *.py file in dirBar, which runs once for the first .py file found &amp; exits the calling test.py, plus then I have to duplicate my code by adding unittest.main() in every source file--which violates DRY principles.  </p>
"
645312,338,2009-03-14T03:44:22Z,267,What is the quickest way to HTTP GET in Python?,"<p>What is the quickest way to HTTP GET in Python if I know the Content will be a string? I am searching the docs for a quick one-liner like:</p>

<pre><code>contents = url.get(""http://example.com/foo/bar"")
</code></pre>

<p>But all I can find using Google are <code>httplib</code> and <code>urllib</code> - and I am unable to find a shortcut in those libraries.</p>

<p>Does standard Python 2.5 have a shortcut in some form as above, or should I write a function <code>url_get</code>?</p>

<ol>
<li>I would prefer not to capture the output of shelling out to <code>wget</code> or <code>curl</code>.</li>
</ol>
"
645493,42050,2009-03-14T06:04:55Z,13,Discussion of multiple inheritance vs Composition for a project (+other things),"<p>I am writing a python platform for the simulation of distributed sensor swarms. The idea being that the end user can write a custom Node consisting of the SensorNode behaviour (communication, logging, etc) as well as implementing a number of different sensors.</p>

<p>The example below briefly demonstrates the concept.</p>

<pre><code>#prewritten
class Sensor(object):
  def __init__(self):
    print ""Hello from Sensor""
  #...

#prewritten
class PositionSensor(Sensor):
  def __init__(self):
    print ""Hello from Position""
    Sensor.__init__(self)
  #...

#prewritten
class BearingSensor(Sensor):
  def __init__(self):
    print ""Hello from Bearing""
    Sensor.__init__(self)
  #...

#prewritten
class SensorNode(object):
  def __init__(self):
    print ""Hello from SensorNode""
  #...

#USER WRITTEN
class MySensorNode(SensorNode,BearingSensor,PositionSensor):
  def CustomMethod(self):
    LogData={'Position':position(), 'Bearing':bearing()} #position() from PositionSensor, bearing() from BearingSensor
    Log(LogData) #Log() from SensorNode
</code></pre>

<h2>NEW EDIT:</h2>

<p>Firstly an overview of what I am trying to achieve:
I am writing a simulator to simulate swarm intelligence algorithms with particular focus on mobile sensor networks. These networks consist of many small robots communicating individual sensor data to build a complex sensory map of the environment.</p>

<p>The underlying goal of this project is to develop a simulation platform that provides abstracted interfaces to sensors such that the same user-implemented functionality can be directly ported to a robotic swarm running embedded linux. As robotic implementation is the goal, I need to design such that the software node behaves the same, and only has access to information that an physical node would have.</p>

<p>As part of the simulation engine, I will be providing a set of classes modelling different types of sensors and different types of sensor node. I wish to abstract all this complexity away from the user such that all the user must do is define which sensors are present on the node, and what type of sensor node (mobile, fixed position) is being implemented.</p>

<p>My initial thinking was that every sensor would provide a read() method which would return the relevant values, however having read the responses to the question, I see that perhaps more descriptive method names would be beneficial (.distance(), .position(), .bearing(), etc).</p>

<p>I initially wanted use separate classes for the sensors (with common ancestors) so that a more technical user can easily extend one of the existing classes to create a new sensor if they wish. For example:</p>

<pre><code>Sensor
  |
DistanceSensor(designed for 360 degree scan range)
    |           |           |
IR Sensor   Ultrasonic    SickLaser
(narrow)    (wider)       (very wide)
</code></pre>

<p>The reason I was initially thinking of Multiple Inheritance (although it semi-breaks the IS-A relationship of inheritance) was due to the underlying principle behind the simulation system. Let me explain:</p>

<p>The user-implemented MySensorNode should not have direct access to its position within the environment (akin to a robot, the access is indirect through a sensor interface), similarly, the sensors should not know where they are. However, this lack of direct knowledge poses a problem, as the return values of the sensors are all dependent on their position and orientation within the environment (which needs to be simulated to return the correct values).</p>

<p>SensorNode, as a class implemented within the simulation libraries, is responsible for drawing the MySensorNode within the pygame environment - thus, it is the only class that should have direct access to the position and orientation of the sensor node within the environment.</p>

<p>SensorNode is also responsible for translation and rotation within the environment, however this translation and rotation is a side effect of motor actuation.</p>

<p>What I mean by this is that robots cannot directly alter their position within the world, all they can do is provide power to motors, and movement within the world is a side-effect of the motors interaction with the environment. I need to model this accurately within the simulation.</p>

<p>So, to move, the user-implemented functionality may use:</p>

<pre><code>motors(50,50)
</code></pre>

<p>This call will, as a side-effect, alter the position of the node within the world. </p>

<p>If SensorNode was implemented using composition, SensorNode.motors(...) would not be able to directly alter instance variables (such as position), nor would MySensorNode.draw() be resolved to SensorNode.draw(), so SensorNode imo should be implemented using inheritance.</p>

<p>In terms of the sensors, the benefit of composition for a problem like this is obvious, MySensorNode is composed of a number of sensors - enough said.</p>

<p>However the problem as I see it is that the Sensors need access to their position and orientation within the world, and if you use composition you will end up with a call like:</p>

<pre><code>&gt;&gt;&gt; PosSensor.position((123,456))
(123,456)
</code></pre>

<p>Then again - thinking, you could pass self to the sensor upon initialisation, eg:</p>

<pre><code>PosSensor = PositionSensor(self)
</code></pre>

<p>then later</p>

<pre><code>PosSensor.position()
</code></pre>

<p>however this PosSensor.position() would then need to access information local to the instance (passed as self during <strong>init</strong>()), so why call PosSensor at all when you can access the information locally? Also passing your instance to an object you are composed of just seems not quite right, crossing the boundaries of encapsulation and information hiding (even though python doesn't do much to support the idea of information hiding).</p>

<p>If the solution was implemented using multiple inheritance, these problems would disappear:</p>

<pre><code>class MySensorNode(SensorNode,PositionSensor,BearingSensor):
  def Think():
    while bearing()&gt;0:
      # bearing() is provided by BearingSensor and in the simulator
      # will simply access local variables provided by SensorNode
      # to return the bearing. In robotic implementation, the
      # bearing() method will instead access C routines to read
      # the actual bearing from a compass sensor
      motors(100,-100)
      # spin on the spot, will as a side-effect alter the return
      # value of bearing()

    (Ox,Oy)=position() #provided by PositionSensor
    while True:
      (Cx,Cy)=position()
      if Cx&gt;=Ox+100:
        break
      else:
        motors(100,100)
        #full speed ahead!will alter the return value of position()
</code></pre>

<p><hr /></p>

<p>Hopefully this edit has clarified some things, if you have any questions I'm more than happy to try and clarify them</p>

<h2>OLD THINGS:</h2>

<p>When an object of type MySensorNode is constructed, all constructors from the superclasses need to be called. I do not want to complicate the user with having to write a custom constructor for MySensorNode which calls the constructor from each superclass. Ideally, what I would like to happen is:</p>

<pre><code>mSN = MySensorNode()
# at this point, the __init__() method is searched for
# and SensorNode.__init__() is called given the order
# of inheritance in MySensorNode.__mro__

# Somehow, I would also like to call all the other constructors
# that were not executed (ie BearingSensor and PositionSensor)
</code></pre>

<p>Any insight or general comments would be appreciated,
Cheers :)</p>

<p>OLD EDIT:
Doing something like:</p>

<pre><code>#prewritten
class SensorNode(object):
  def __init__(self):
    print ""Hello from SensorNode""
    for clss in type(self).__mro__:
      if clss!=SensorNode and clss!=type(self):
        clss.__init__(self)
</code></pre>

<p>This works, as self is an instance of MySensorNode. However this solution is messy.</p>

<p><hr /></p>
"
645864,67494,2009-03-14T12:45:32Z,3,Changing prompt working directory via Python script,"<p>Is it possible to change the Windows command prompt working directory via Python script?</p>

<p>e.g.</p>

<pre><code>&gt;&gt; cd
&gt;&gt; c:\windows\system32
&gt;&gt; make_decision_change_dir.py
&gt;&gt; cd
&gt;&gt; c:\windows
</code></pre>

<p>I have tried a few things which don't work:</p>

<pre><code>import os
os.chdir(path)
</code></pre>

<p><hr /></p>

<pre><code>import os, subprocess
subprocess.Popen(""chdir /D \""%s\"""" %path, shell=True)
</code></pre>

<p><hr /></p>

<pre><code>import os, subprocess
subprocess.Popen(""cd \""%s\"""" %path, shell=True)
</code></pre>

<p><hr /></p>

<pre><code>import os, subprocess
subprocess.Popen(""CD=\""%s\"""" %path, shell=True)
</code></pre>

<p>As I understand it and observe these operations change the current processes working directory - which is the Python process and not the prompt its executing from.</p>

<p>Thanks.</p>

<p>UPDATE</p>

<p>The path I would want to change to is dynamic (based on what project I am working on, the full path to a build location changes) hence I wanted to code a solution in Python rather than hack around with a Windows batch file.</p>

<p>UPDATE</p>

<p>I ended up hacking a batch file together to do this ;(
Thanks everyone.</p>
"
645892,44996,2009-03-14T13:11:49Z,7,Is there a way to build a C-like DLL from a Python module?,"<p>I have a Python module with nothing but regular global functions. I need to call it from another business-domain scripting environment that can only call out to C DLLs. Is there anyway to build my Python modules so that to other code it can be called like a standard C function that's exported from a DLL? This is for a Windows environment. I'm aware of IronPython, but as far as I know it can only build .NET Assemblies, which are not callable as C DLL functions.</p>
"
645943,78060,2009-03-14T13:53:28Z,94,Integrating MySQL with Python in Windows,"<p>I am finding it difficult to use MySQL with Python in my windows system.</p>

<p>I am currently using Python 2.6. I have tried to compile MySQL-python-1.2.3b1 (which is supposed to work for Python 2.6 ?) source code using the provided setup scripts. The setup script runs and it doesn't report any error but it doesn't generate _mysql module. </p>

<p>I have also tried setting up MySQL for Python 2.5 with out success. The problem with using 2.5 is that Python 2.5 is compiled with visual studio 2003 (I installed it using the provided binaries). I have visual studio 2005 on my windows system. Hence setuptools fails to generate _mysql module.</p>

<p>Any help ?</p>
"
646286,21152,2009-03-14T17:15:17Z,64,Python PIL: how to write PNG image to string,"<p>I have generated an image using <a href=""http://www.pythonware.com/products/pil/"">PIL</a>. How can I save it to a string in memory?
The <code>Image.save()</code> method requires a file.</p>

<p>I'd like to have several such images stored in dictionary.</p>
"
646515,78110,2009-03-14T19:07:17Z,4,What is an elegant way to find versions of packages on a pypi package index?,"<p>Currently I'm using a very ugly approach based on a regex for finding links and taking them apart.</p>

<p>I'm unhappy with the code, so I'm asking for nicer solutions, preferably using only the stdlib.</p>

<h3>Edit</h3>

<p>The task at hand has 2 parts:</p>

<ol>
<li>Find all distributions that match a certain criteria (like prefix of the name).</li>
<li>Find all versions available in each found distribution.</li>
</ol>

<p>The expected result is a mapping of distribution -> versions -> files.</p>
"
646518,6266,2009-03-14T19:10:14Z,11,Python: How to detect debug interpreter,"<p>How can I detect in my python script if its being run by the debug interpreter (ie python_d.exe rather than python.exe)? I need to change the paths to some dlls that I pass to an extension.</p>

<p>eg Id like to do something like this at the start of my python script:</p>

<pre><code>#get paths to graphics dlls
if debug_build:
    d3d9Path   = ""bin\\debug\\direct3d9.dll""
    d3d10Path  = ""bin\\debug\\direct3d10.dll""
    openGLPath = ""bin\\debug\\openGL2.dll""
else:
    d3d9Path   = ""bin\\direct3d9.dll""
    d3d10Path  = ""bin\\direct3d10.dll""
    openGLPath = ""bin\\openGL2.dll""
</code></pre>

<p>I thought about adding an ""IsDebug()"" method to the extension which would return true if it is the debug build (ie was built with ""#define DEBUG"") and false otherwise. But this seems a bit of a hack for somthing Im sure I can get python to tell me...</p>
"
646539,4172,2009-03-14T19:21:13Z,3,In what way would you present an algorithm to detect collisions between diffrent objects?,"<p>While working on a really only-for-fun project I encountered some problem.</p>

<p>There is a 2D world populated with Round Balls, Pointy Triangles and Skinny Lines (and other wildlife too, maybe). They all are subclasses of WorldCreatures. They can move inside this world. When they meet each other, a Collision happens.</p>

<p>The thing I'd like to do is to make a way of detecting Collision between them. Here's what I'm standing on right now:</p>

<ul>
<li>For me Ball-Ball is easy, I just calculate their distance from their positions and compare it with the sum of their 'sizes'.</li>
<li>Collision between Ball and edge of the world is simple too - I just check the distance from it, which, in Cartesian coordinates, is simple.</li>
<li>More generic problems are - how to detect a collision between Line (starting and ending at some points) or other objects I could have there? Distance between a line and a point can be calculated easily too, but what I'd like is to have</li>
</ul>

<p>Some kind of generic way to say if Obcject <code>A</code> collides with Object <code>B</code>. The code as it is now looks somewhat like:</p>

<pre><code>class WorldCreature:
    def detectCollision(self, otherObject):
        # do something 
        if collision:
            self.onCollision(otherObject)
            otherObject.onCollision(self)
class Ball(WorldCreature):
    # someing here
class Line(WorldCreature):
    # someing here
</code></pre>

<p>Now, the collision detection mechanizm should depend on what objects can collide. So will the effect.</p>

<p>Should I just keep a list of all the objects in memory and loop through all them in <em>every single</em> step? Or, is there some better way to improve the performance of this task?</p>
"
646644,41718,2009-03-14T20:19:44Z,85,How to get last items of a list in Python?,"<p>I need the last 9 numbers of a list and I'm sure there is a way to do it with slicing, but I can't seem to get it.  I can get the first 9 like this:</p>

<pre><code>num_list[0:9]
</code></pre>

<p>Any help would be great.</p>
"
646652,37491,2009-03-14T20:22:30Z,3,Getting pywin32 excelAddin.py working on Excel 2007,"<p>I'm trying get <a href=""http://pywin32.cvs.sourceforge.net/viewvc/pywin32/pywin32/com/win32com/demos/excelAddin.py?view=markup"" rel=""nofollow"">pywin32 excelAddin.py</a> demo script on winXP MS Office Excel 2007, python 2.5.4.
Though the Com add-in registers itself succesfully and is displayed in ""com add-ins"" list in Excel, it does not work. </p>

<p>Only error feedback i get is on the ""Load behaviour"" line in excel's ""com add-ins"" dialog, says ""Not loaded. A runtime error occured during the loading of the com add-in""</p>

<p>Does excel or office log anywhere on the system? How can i find out what goes wrong?</p>
"
646903,NA,2009-03-14T23:08:52Z,5,PIR sensors + Arduino + Python + email alerts,"<p>We are working on a project for school, and we have 2 <a href=""http://en.wikipedia.org/wiki/Passive_infrared_sensor"" rel=""nofollow"">PIR</a> motion sensors running off an Arduino microcontroller. We are able to view the output of the serial port in both the Ardunio IDE and Python <a href=""http://en.wikipedia.org/wiki/IDLE_%28Python%29"" rel=""nofollow"">IDLE</a>.</p>

<p>What we want to do next is, after about 30 seconds of motion being detected, sending out an email alert, seeing that we don't have Ethernet capability at this point, we figured the easiest way would be to grab the emailing through Python.</p>

<p>How to achieve this?</p>

<h3>Update:</h3>

<p>At this point we can send an email from Python, we can read the Arduino serial port in Python, but we just have an issue putting it all together.</p>

<p>This is what our Python code looks like, at the while 1: is where confusion happens:</p>

<pre><code>import smtplib,serial

ser = serial.Serial(port=2, baudrate=9200)

from email.MIMEMultipart import MIMEMultipart
from email.MIMEBase import MIMEBase
from email.MIMEText import MIMEText
from email import Encoders
import os

gmail_user = ""usr@gmail.com""
gmail_pwd = ""pw""

def mail(to, subject, text, attach):
   msg = MIMEMultipart()

   msg['From'] = gmail_user
   msg['To'] = to
   msg['Subject'] = subject

   msg.attach(MIMEText(text))

   part = MIMEBase('application', 'octet-stream')
   part.set_payload(open(attach, 'rb').read())
   Encoders.encode_base64(part)
   part.add_header('Content-Disposition',
           'attachment; filename=""%s""' % os.path.basename(attach))
   msg.attach(part)

   mailServer = smtplib.SMTP(""smtp.gmail.com"", 587)
   mailServer.ehlo()
   mailServer.starttls()
   mailServer.ehlo()
   mailServer.login(gmail_user, gmail_pwd)
   mailServer.sendmail(gmail_user, to, msg.as_string())
   # Should be mailServer.quit(), but that crashes...
   mailServer.close()

while 1: **// CONFUSION HAPPENS HERE //** &lt;----------------------

   ser.readline()

   if ser.readline() = ""motion"" 

   do this mail sequence?

   mail(""usr2@gmail.com"",
   ""Alarm Alert!"",
   ""Both Motion Sensor A &amp; B have been active for over # seconds"",
   ""stor_fight.jpg"")
</code></pre>

<p>Any tips would be much appreciated.</p>
"
646955,4279,2009-03-14T23:48:40Z,7,How to tell whether a file is executable on Windows in Python?,"<p>I'm writing <a href=""http://gist.github.com/79233""><code>grepath</code></a> utility that finds executables in <code>%PATH%</code> that match a pattern.
I need to define whether given filename in the path is executable (emphasis is on command line scripts).</p>

<p>Based on <a href=""http://timgolden.me.uk/python/win32%5Fhow%5Fdo%5Fi/tell-if-a-file-is-executable.html"">""Tell if a file is executable""</a> I've got:</p>

<pre><code>import os
from pywintypes import error
from win32api   import FindExecutable, GetLongPathName

def is_executable_win(path):
    try:
        _, executable = FindExecutable(path)
        ext = lambda p: os.path.splitext(p)[1].lower()
        if (ext(path) == ext(executable) # reject *.cmd~, *.bat~ cases
            and samefile(GetLongPathName(executable), path)):
            return True
        # path is a document with assoc. check whether it has extension
        # from %PATHEXT% 
        pathexts = os.environ.get('PATHEXT', '').split(os.pathsep)
        return any(ext(path) == e.lower() for e in pathexts)
    except error:
        return None # not an exe or a document with assoc.
</code></pre>

<p>Where <code>samefile</code> is:</p>

<pre><code>try: samefile = os.path.samefile
except AttributeError:    
    def samefile(path1, path2):
        rp = lambda p: os.path.realpath(os.path.normcase(p))
        return rp(path1) == rp(path2)
</code></pre>

<p>How <code>is_executable_win</code> could be improved in the given context? What functions from Win32 API could help?</p>

<p>P.S.</p>

<ul>
<li>time performance doesn't matter</li>
<li><code>subst</code> drives and UNC, unicode paths are not under consideration</li>
<li>C++ answer is OK if it uses functions available on Windows XP</li>
</ul>

<h3>Examples</h3>

<ul>
<li><code>notepad.exe</code> is executable (as a rule)</li>
<li><p><code>which.py</code> is executable if it is associated with some executable (e.g., python.exe) and <code>.PY</code> is in <code>%PATHEXT%</code> i.e., <code>'C:\&gt; which'</code> could start:</p>

<pre><code>some\path\python.exe another\path\in\PATH\which.py
</code></pre></li>
<li><p><code>somefile.doc</code> most probably is <em>not</em> executable (when it is associated with Word for example)</p></li>
<li><code>another_file.txt</code> is <em>not</em> executable (as a rule)</li>
<li><code>ack.pl</code> is executable if it is associated with some executable (most probably perl.exe) and <code>.PL</code> is in <code>%PATHEXT%</code> (i.e. I can run <code>ack</code> without specifing extension if it is in the path)</li>
</ul>

<h3>What is ""executable"" in this question</h3>

<pre><code>def is_executable_win_destructive(path):
    #NOTE: it assumes `path` &lt;-&gt; `barename` for the sake of example
    barename = os.path.splitext(os.path.basename(path))[0]
    p = Popen(barename, stdout=PIPE, stderr=PIPE, shell=True)
    stdout, stderr = p.communicate()
    return p.poll() != 1 or stdout != '' or stderr != error_message(barename)
</code></pre>

<p>Where <code>error_message()</code> depends on language. English version is:</p>

<pre><code>def error_message(barename):
    return ""'%(barename)s' is not recognized as an internal"" \
           "" or external\r\ncommand, operable program or batch file.\r\n"" \
           %  dict(barename=barename)
</code></pre>

<p>If <code>is_executable_win_destructive()</code> returns when it defines whether the path points to an  executable for the purpose of this question.</p>

<p>Example:</p>

<pre><code>&gt;&gt;&gt; path = r""c:\docs\somefile.doc""
&gt;&gt;&gt; barename = ""somefile""
</code></pre>

<p>After that it executes %COMSPEC% (cmd.exe by default):</p>

<pre><code>c:\cwd&gt; cmd.exe /c somefile
</code></pre>

<p>If output looks like this:</p>

<pre>
'somefile' is not recognized as an internal or external
command, operable program or batch file.
</pre>

<p>Then the <code>path</code> is not an executable else it is (lets assume there is one-to-one correspondence between <code>path</code> and <code>barename</code> for the sake of example).</p>

<p>Another example:</p>

<pre><code>&gt;&gt;&gt; path = r'c:\bin\grepath.py'
&gt;&gt;&gt; barename = 'grepath'
</code></pre>

<p>If <code>.PY</code> in <code>%PATHEXT%</code> and <code>c:\bin</code> is in <code>%PATH%</code> then:</p>

<pre><code>c:\docs&gt; grepath
Usage:
  grepath.py [options] PATTERN
  grepath.py [options] -e PATTERN

grepath.py: error: incorrect number of arguments
</code></pre>

<p>The above output is not equal to <code>error_message(barename)</code> therefore <code>'c:\bin\grepath.py'</code> is an ""executable"".</p>

<p>So the question is how to find out whether the <code>path</code> will produce the error without actually running it? What Win32 API function and what conditions used to trigger the 'is not recognized as an internal..' error?</p>
"
647005,71097,2009-03-15T00:22:06Z,0,Workflow for configuring apache on a webfaction account via ssh and ftp. (django/python),"<p>I'm new at this, however, when it comes to configuring mod_python/apache or wsgi/apache I suffer.</p>

<p>I've been able to use the python debugger tool.. <code>pdb.set_trace()</code> to success, especially when using the django development server, i.e. it out puts to the terminal all of the server activity, including the pdb interface.</p>

<p>So, how does one do something like this when trying to deploy a django website on an host such as webfaction?</p>

<p>Other than ftp into the error_log and read about it post failure, be able to interact with the system, as its happening?</p>

<p>Hopefully I'm clear enough here.  </p>

<p>Btw, following is the file that I'm trying to configure.</p>

<pre><code>import os
import sys

from os.path import abspath, dirname, join
from site import addsitedir

from django.core.handlers.modpython import ModPythonHandler

import pdb

class PinaxModPythonHandler(ModPythonHandler):
    def __call__(self, req):
        # mod_python fakes the environ, and thus doesn't process SetEnv. 
        # This fixes that. Django will call this again since there is no way
        # of overriding __call__ to just process the request.
        os.environ.update(req.subprocess_env)
        from django.conf import settings

        sys.path.insert(0, abspath(join(dirname(__file__), ""../../"")))

        sys.path.insert(0, os.path.join(settings.PINAX_ROOT, ""apps/external_apps""))
        sys.path.insert(0, os.path.join(settings.PINAX_ROOT, ""apps/local_apps""))

        sys.path.insert(0, join(settings.PINAX_ROOT, ""apps""))
        sys.path.insert(0, join(settings.PROJECT_ROOT, ""apps""))
        pdb.set_trace()

        return super(PinaxModPythonHandler, self).__call__(req)

def handler(req):
    # mod_python hooks into this function.
    return PinaxModPythonHandler()(req)
</code></pre>

<p>and here's the resulting error page via http:</p>

<pre><code>MOD_PYTHON ERROR

ProcessId:      318
Interpreter:    'web25.webfaction.com'

ServerName:     'web25.webfaction.com'
DocumentRoot:   '/etc/httpd/htdocs'

URI:            '/'
Location:       '/'
Directory:      None
Filename:       '/etc/httpd/htdocs'
PathInfo:       '/'

Phase:          'PythonHandler'
Handler:        'bc.deploy.modpython'

Traceback (most recent call last):

  File ""/home/dalidada/webapps/birthconfidence/lib/python2.5/mod_python/importer.py"", line 1537, in HandlerDispatch
    default=default_handler, arg=req, silent=hlist.silent)

  File ""/home/dalidada/webapps/birthconfidence/lib/python2.5/mod_python/importer.py"", line 1229, in _process_target
    result = _execute_target(config, req, object, arg)

  File ""/home/dalidada/webapps/birthconfidence/lib/python2.5/mod_python/importer.py"", line 1128, in _execute_target
    result = object(arg)

  File ""/home/dalidada/webapps/birthconfidence/bc/deploy/modpython.py"", line 33, in handler
    return PinaxModPythonHandler()(req)

  File ""/home/dalidada/webapps/birthconfidence/bc/deploy/modpython.py"", line 29, in __call__
    return super(PinaxModPythonHandler, self).__call__(req)

  File ""/home/dalidada/webapps/birthconfidence/lib/python2.5/django/core/handlers/modpython.py"", line 191, in __call__
    self.load_middleware()

  File ""/home/dalidada/webapps/birthconfidence/lib/python2.5/django/core/handlers/base.py"", line 40, in load_middleware
    raise exceptions.ImproperlyConfigured, 'Error importing middleware %s: ""%s""' % (mw_module, e)

ImproperlyConfigured: Error importing middleware django_openid.consumer: ""No module named django_openid.consumer""
</code></pre>
"
647041,77248,2009-03-15T01:00:46Z,13,"Need a simple ""Hello World"" example using the Webkit library in Python","<p>Does anyone know of a simple ""Hello World"" example for using the Webkit library in Python? I have a GTK window, and inside I want to put Webkit.</p>

<p>With Python/mozembed (Mozilla/Gecko), this is simple:</p>

<pre><code>mozembed = gtkmozembed.MozEmbed()
mozembed.load_url('http://google.com/')
</code></pre>

<p>..and I have already created my browser, how do I do this with WebKit?</p>
"
647071,48486,2009-03-15T01:24:19Z,41,Python xml ElementTree from a string source?,"<p>The ElementTree.parse reads from a file, how can I use this if I already have the XML data in a string?</p>

<p>Maybe I am missing something here, but there must be a way to use the ElementTree without writing out the string to a file and reading it again.</p>

<p><a href=""http://docs.python.org/library/xml.etree.elementtree.html"">xml.etree.elementtree</a></p>
"
647110,7883,2009-03-15T02:04:06Z,4,Python: Abstract Base Class and ZopeInterface,"<p>What's the point of both? When do you think it's appropriate to use either?</p>
"
647142,745,2009-03-15T02:23:48Z,4,Why can I not paste the output of Pythons REPL without manual-editing?,"<p>A huge amount of example Python code shows the output of the Python REPL, for example:</p>

<pre><code>&gt;&gt;&gt; class eg(object):
...     def __init__(self, name):
...             self.name = name
...     def hi(self):
...             print ""Hi %s"" % (self.name)
... 
&gt;&gt;&gt; greeter = eg(""Bob"")
&gt;&gt;&gt; greeter.hi()
Hi Bob
&gt;&gt;&gt;
</code></pre>

<p>Now, the obvious thing you want to do is run the above code.. so, I run ""python"" and paste the above text in..</p>

<pre><code>&gt;&gt;&gt; &gt;&gt;&gt; class eg(object):
  File ""&lt;stdin&gt;"", line 1
    &gt;&gt;&gt; class eg(object):
     ^
SyntaxError: invalid syntax
&gt;&gt;&gt; ...     def __init__(self, name):
  File ""&lt;stdin&gt;"", line 1
    ...     def __init__(self, name):
    ^
</code></pre>

<p>The code is broken!?..</p>

<p>To get it to run, I would have to either..</p>

<ul>
<li>copy-and-paste the lines one at a time, making sure I copy all the indentation correctly. If you screw it up (say, miss a leading space, you have to start all over again)</li>
<li>use a text editor to remove <code>&gt;&gt;&gt; </code> and <code>... </code>, then paste again</li>
</ul>

<p>It's not a huge issue, but given how much example code is presented in this format, it seems strange you have to do this..</p>
"
647257,67022,2009-03-15T03:46:33Z,1,Provide discount to preferred customer with Satchmo?,"<p>I am new to Satchmo -- picked it up because I needed payment processing for site subscriptions and physical product.</p>

<p>My site will have two classes of users: paid subscribers and free users. Both can order a 
physical product. Paid subscribers get an automatic discount on all orders.</p>

<p>I don't see a configuration for this in the admin. (Discount looks like it would apply to all users. If I'm missing something here, let me know.)</p>

<p>So what's the best place to automatically override the price depending on the user class? The displayed price should show up, say, 10% less for subscribers everywhere in the site, not just at the checkout.</p>

<p>Thanks.</p>
"
647443,3562,2009-03-15T07:28:34Z,8,Multiple overlapping plots with independent scaling in Matplotlib,"<p>I currently have code that calls <code>matplotlib.pylab.plot</code> multiple times to display multiple sets of data on the same screen, and Matplotlib scales each to the global min and max, considering all plots.  Is there a way to ask it to scale each plot independently, to the min and max of that particular plot?</p>
"
647500,78234,2009-03-15T08:55:54Z,1,How do I forward a complete email without downloading attachments?,"<p>Hello (and thanks in advance!)</p>

<p>I'm working in Python and I got IMAP and SMTP to work with my Gmail account.
I now need to forward select messages to another account (after reading their body).</p>

<p>How do I do this without downloading the attachments and recreating the entire message?</p>

<p>Thanks!</p>

<p>Tal.</p>
"
647515,25077,2009-03-15T09:09:18Z,12,How can I know python's path under windows?,"<p>I want to know where is the python's installation path. For example:</p>

<p>C:\Python25</p>

<p>But however, I have no idea how to do. How can I get the installation path of python?</p>

<p>Thanks.</p>
"
647655,76081,2009-03-15T11:24:44Z,11,"python, regex split and special character","<p>How can I split correctly a string containing a sentence with special chars using whitespaces as separator ?
Using regex split method I cannot obtain the desired result.</p>

<p>Example code:</p>

<pre><code># -*- coding: utf-8 -*-
import re


s=""La felicità è tutto"" # ""The happiness is everything"" in italian
l=re.compile(""(\W)"").split(s)

print "" s&gt; ""+s
print "" wordlist&gt; ""+str(l)
for i in l:
    print "" word&gt; ""+i
</code></pre>

<p>The output is :</p>

<pre><code> s&gt; La felicità è tutto
 wordlist&gt; ['La', ' ', 'felicit', '\xc3', '', '\xa0', '', ' ', '', '\xc3', '', '\xa8', '', ' ', 'tutto']
 word&gt; La
 word&gt;  
 word&gt; felicit
 word&gt; Ã
 word&gt; 
 word&gt; ?
 word&gt; 
 word&gt;  
 word&gt; 
 word&gt; Ã
 word&gt; 
 word&gt; ?
 word&gt; 
 word&gt;  
 word&gt; tutto
</code></pre>

<p>while I'm looking for an output like:</p>

<pre><code> s&gt; La felicità è tutto
 wordlist&gt; ['La', ' ', 'felicità', ' ', 'è', ' ', 'tutto']
 word&gt; La
 word&gt;  
 word&gt; felicità
 word&gt;  
 word&gt; è
 word&gt;  
 word&gt; tutto
</code></pre>

<p>To be noted that s is a string that is returned from another method so I cannot force the encoding like</p>

<pre><code>s=u""La felicità è tutto""
</code></pre>

<p>On official python documentation of Unicode and reg-ex I haven't found a satisfactory explanation.</p>

<p>Thanks.</p>

<p>Alessandro</p>
"
647769,3594,2009-03-15T12:54:53Z,85,Why can't Python's raw string literals end with a single backslash?,"<p>Technically, any odd number of backslashes, as described in <a href=""http://docs.python.org/reference/lexical%5Fanalysis.html#string-literals"">the docs</a>.</p>

<pre><code>&gt;&gt;&gt; r'\'
  File ""&lt;stdin&gt;"", line 1
    r'\'
       ^
SyntaxError: EOL while scanning string literal
&gt;&gt;&gt; r'\\'
'\\\\'
&gt;&gt;&gt; r'\\\'
  File ""&lt;stdin&gt;"", line 1
    r'\\\'
         ^
SyntaxError: EOL while scanning string literal
</code></pre>

<p>It seems like the parser could just treat backslashes in raw strings as regular characters (isn't that what raw strings are all about?), but I'm probably missing something obvious. TIA!</p>
"
647805,63401,2009-03-15T13:25:52Z,13,Trapping MySQL Warnings In Python,"<p>I would like to catch and log MySQL warnings in Python. For example, MySQL issues a warning to standard error if you submit <code>'DROP DATABASE IF EXISTS database_of_armaments'</code> when no such database exists.  I would like to catch this and log it, but even in the try/else syntax the warning message still appears.</p>

<p>The try/except syntax does catch MySQL errors (eg, submission of a typo like <code>'DRP DATABASE database_of_armaments'</code>). </p>

<p>I have experimented with <code>&lt;&lt;except.MySQLdb.Warning&gt;&gt;</code> -- no luck.  I've looked at the warnings module, but don't understand how to incorporate it into the try/else syntax.</p>

<p>To be concrete, how do I get the following (or something like it) to work.</p>

<p>GIVEN: database 'database_of_armaments' does not exist.</p>

<pre><code>try:
    cursor.execute('DROP DATABASE IF EXISTS database_of_armaments')
except: &lt;&lt;WHAT DO I PUT HERE?&gt;&gt;
    print 'There was a MySQL warning.' 
    &lt;&lt;AND what goes here if I want to get and manipulate information about the warning?&gt;&gt;
</code></pre>

<p>UPDATE:</p>

<p>Thanks for the comments.  I had tried these and they didn't work -- but I had been using a DatabaseConnection class that I wrote for a connection, and its runQuery() method to execute.  When I created a connection and cursor outside the class, the try/except Exception caught the ""Programming Error"", and except MySQLdb.ProgrammingError worked as advertised.</p>

<p>So now I have to figure out what is wrong with my class coding.</p>

<p>Thank you for your help.</p>
"
647813,31610,2009-03-15T13:34:19Z,4,socket trouble in python,"<p>I have a server that's written in C, and I want to write a client in python. The python client will send a string ""send some_file"" when it wants to send a file, followed by the file's contents, and the string ""end some_file"". Here is my client code :</p>

<pre><code>
file = sys.argv[1]
host = sys.argv[2]
port = int(sys.argv[3])
sock = socket.socket(socket.AF_INET,socket.SOCK_STREAM)
sock.connect((host,port))
send_str = ""send %s"" % file
end_str = ""end %s"" % file
sock.send(send_str)
sock.send(""\n"")
sock.send(open(file).read())
sock.send(""\n"")
sock.send(end_str)
sock.send(""\n"")
</code></pre>

<p>The problem is this :</p>

<ul>
<li><p>the server receives the ""send some_file"" string from a recv</p></li>
<li><p>at the second recv, the file's content and the ""end file"" strings are sent together</p></li>
</ul>

<p>In the server code, the buffer's size is 4096. I first noticed this bug when trying to send a file that's less than 4096k.
How can I make sure that the server receives the strings independently?</p>
"
647888,32032,2009-03-15T14:23:25Z,7,File handling in Django when posting image from service call,"<p>I am using <a href=""http://pyamf.org/"">PyAMF</a> to transfer a dynamically generated large image from Flex to Django.
On the Django side i receive the encodedb64 data as a parameter:</p>

<p>My Item model as an imagefield.
What i have trouble to do is saving the data as the File Django Field.</p>

<pre><code>def save_item(request, uname, data):
    """""" Save a new item """"""    
    item = Item()

    img = cStringIO.StringIO()
    img.write(base64.b64decode(data))
    myFile = File(img)

   item.preview.save('fakename.jpg', myFile, save=False)
</code></pre>

<p>That would not work because my File object from StringIO misses some properties such as mode, name etc.</p>

<p>I also think that using StringIO will load the image data completely in memory which is bad so i may just give up on the AMF for this particular case and use POST.</p>

<p>What do you think ?</p>
"
647900,63514,2009-03-15T14:33:34Z,11,Python - test that succeeds when exception is not raised,"<p>I know about <code>unittest</code> Python module.</p>

<p>I know about <code>assertRaises()</code> method of <code>TestCase</code> class.</p>

<p>I would like to write a test that succeeds when an exception is <strong>not</strong> raised.</p>

<p>Any hints please?</p>
"
647906,55366,2009-03-15T14:37:49Z,1,wxPython auinotebook.GetSelection() return index to the first page,"<p>Why do 'GetSelection()' return the index to the first page and not the last created in 'init' and 'new_panel'? It do return correct index in the 'click' method.</p>

<p>The output should be 0 0 1 1 2 2, but mine is 0 0 0 0 0 0.</p>

<p>Running latest version of python and wxpython in ArchLinux.</p>

<p>Ørjan Pettersen</p>

<pre><code>#!/usr/bin/python

#12_aui_notebook1.py

import wx
import wx.lib.inspection

class MyFrame(wx.Frame):
    def __init__(self, *args, **kwds):
    	wx.Frame.__init__(self, *args, **kwds)

    	self.nb = wx.aui.AuiNotebook(self)

    	self.new_panel('Page 1')
    	print self.nb.GetSelection()
    	self.new_panel('Page 2')
    	print self.nb.GetSelection()
    	self.new_panel('Page 3')
    	print self.nb.GetSelection()

    def new_panel(self, nm):
    	pnl = wx.Panel(self)
    	pnl.identifierTag = nm
    	self.nb.AddPage(pnl, nm)
    	self.sizer = wx.BoxSizer()
    	self.sizer.Add(self.nb, 1, wx.EXPAND)
    	self.SetSizer(self.sizer)
    	pnl.SetFocus() # Have focused the last panel.
    	print self.nb.GetSelection()

    	pnl.Bind(wx.EVT_LEFT_DOWN, self.click)

    def click(self, event):
    	print 'Mouse click'
    	print self.nb.GetSelection()
    	print self.nb.GetPageText(self.nb.GetSelection())

class MyApp(wx.App):
    def OnInit(self):
    	frame = MyFrame(None, -1, '12_aui_notebook1.py')
    	frame.Show()
    	self.SetTopWindow(frame)
    	return 1

if __name__ == ""__main__"":
    app = MyApp(0)
#    wx.lib.inspection.InspectionTool().Show()
    app.MainLoop()
</code></pre>
"
648276,63347,2009-03-15T18:21:24Z,3,How to make a list comprehension with the group() method in python?,"<p>I'm trying to write a little script to clean my directories. In fact I have:</p>

<pre><code>pattern = re.compile(format[i])
...
current_f.append(pattern.search(str(ls)))
</code></pre>

<p>and I want to use a list comprehension but when I try:</p>

<pre><code>In [25]: [i for i in current_f.group(0)]
</code></pre>

<p>I get:</p>

<pre><code>AttributeError: 'list' object has no attribute 'group'
</code></pre>

<p>So how to make a list comprehension using group()? Is there another way to do what I want.</p>

<p>Thanks in advance.</p>
"
648299,69746,2009-03-15T18:35:19Z,1,Clashing guidelines,"<p>While coding in Python it's better to code by following the guidelines of PEP8.</p>

<p>And while coding for Symbian it's better to follow its coding standards.</p>

<p>But when I code for PyS60 which guidelines should I follow? Till now I have been following PEP8, but <a href=""http://wiki.forum.nokia.com/index.php/A%5F100%25%5FPython%5Fimplemented%5FListbox%5Fbase%5Fclass"" rel=""nofollow"">this code</a> shows the opposite. Do I need to rework my code?</p>
"
648482,30181,2009-03-15T20:27:49Z,5,A trivial Python SWIG error question,"<p>I am trying to get Python running with swig to do C/C++.  I am running the tutorial <a href=""http://www.swig.org/tutorial.html"">here</a>, 'building a python module'.  When I do the call</p>

<pre><code>gcc -c example.c example_wrap.c -I /my_correct_path/python2.5
</code></pre>

<p>I get an error:</p>

<pre><code>my_correct_path/python2.5/pyport.h:761:2: error: #error ""LONG_BIT definition appears wrong for platform (bad gcc/glibc config?).""
example_wrap.c: In function 'SWIG_Python_ConvertFunctionPtr':
example_wrap.c:2034: warning: initialization discards qualifiers from pointer target type
example_wrap.c: In function 'SWIG_Python_FixMethods':
example_wrap.c:3232: warning: initialization discards qualifiers from pointer target type
</code></pre>

<p>It actually does create an example.o file, but it doesn't work.  I am using python2.5 not 2.1 as in the example, is this a problem?  The error (everything else is just a 'warning') says something about wrong platform.  This is a 64bit machine; is this a problem?  Is my gcc configured wrong for my machine?  How do I get past this?  </p>

<p>UPDATE:  I am still having problems.  How do I actually implement this ""fix""?</p>
"
648638,78110,2009-03-15T22:03:57Z,2,how can i figure if a vim buffer is listed or unlisted from vim's python api?,"<p>for a tool i need to figure all vim buffers that are still listed (there are listed and unlisted buffers)</p>

<p>unfortunately <code>vim.buffers</code> contains all buffers and there doesnt seem to be an attribute to figure if a buffer is listed or unlisted</p>

<p>the vim command of what i want to do is</p>

<pre><code>:buffers
</code></pre>

<p>unfortunately all thats possible with the vim python api is emulating</p>

<pre><code>:buffers!
</code></pre>

<p>but without the metadata about listed/unlisted thats we need</p>
"
648675,28380,2009-03-15T22:22:52Z,9,Use case for nested/multiple list comprehensions or generator expressions. When is it more elegant?,"<p>I see this kind of thing sometimes:</p>

<pre><code>(k for k in (j for j in (i for i in xrange(10))))
</code></pre>

<p>Now this really bends my brain, and I would rather it wasn't presented in this way.</p>

<p>Are there any use-cases, or examples of having used these nested expressions where it was more elegant and more readable than if it had been a nested loop?</p>

<p><strong>Edit:</strong> Thanks for the examples of ways to simplify this. It's not actually what I asked for, I was wondering if there were any times when it was elegant.</p>
"
648679,9435,2009-03-15T22:24:37Z,4,Print out list of function parameters in Python,"<p>Is there a way to print out a function's parameter list?
For example:</p>

<pre><code>def func(a, b, c):
  pass

print_func_parametes(func)
</code></pre>

<p>Which will produce something like:</p>

<pre><code>[""a"", ""b"", ""c""]
</code></pre>
"
649191,37984,2009-03-16T03:46:00Z,2,Why are Python objects of different types ordered by type names?,"<p>From Python docs: <a href=""http://docs.python.org/library/stdtypes.html#comparisons"" rel=""nofollow"">http://docs.python.org/library/stdtypes.html#comparisons</a></p>

<blockquote>
  <p>Implementation note: Objects of different types except numbers are ordered by their type names; objects of the same types that don’t support proper comparison are ordered by their address.</p>
</blockquote>

<p>Is there any reason for choosing to do this over raising an exception?</p>
"
649329,56934,2009-03-16T05:08:54Z,2,"In Python, is it possible to access the class which contains a method, given only a method object?","<p>I'm pretty new to Python, and haven't been able to find an answer to this question from searching online.</p>

<p>Here is an example decorator that does nothing (yet)</p>

<pre><code>def my_decorator(text):
  def wrap(f):
    # grab magic f.parent_class_object.my_var and append text
    def wrap_f(*args, **kwargs):
      f(*args, **kwargs)
    return wrap_f
  return wrap
</code></pre>

<p>Here is an example class</p>

<pre><code>class MyClass:
  my_var = []

  @my_decorator('sometext')
  def my_func()
    # do some super cool thing
</code></pre>

<p>In my decorator i'd like to access the class object for <code>MyClass</code> and add in 'sometext' to the <code>MyClass.my_var</code> list.  My goal is to populate my_var with decorated values at <strong>module load</strong> time, not function call time.</p>

<p>Is there a way i can navigate from <code>f</code> to <code>MyClass</code> in order to do this?  I know that *args[0] is the instance of MyClass, but that is only available when the function is called.</p>
"
649549,55562,2009-03-16T07:20:51Z,4,Iterability in Python,"<p>I am trying to understand Iterability in Python.</p>

<p>As I understand, <code>__iter__()</code> should return an object that has <code>next()</code> method defined which must return a value or raise <code>StopIteration</code> exception. Thus I wrote this class which satisfies both these conditions.</p>

<p>But it doesn't seem to work. What is wrong?</p>

<pre><code>class Iterator:
    def __init__(self):
        self.i = 1

    def __iter__(self):
        return self

    def next(self):
        if self.i &lt; 5:
            return self.i
        else:
            raise StopIteration

if __name__ == __main__:
    ai = Iterator()
    b  = [i for i in ai]
    print b
</code></pre>
"
649623,53330,2009-03-16T08:22:52Z,3,Directory checksum with python?,"<p>So I'm in the middle of web-based filesystem abstraction layer development. 
Just like file browser, except it has some extra features like freaky permissions etc. </p>

<p>I would like users to be notified somehow about directory changes. 
So, i.e. when someone uploads a new file via FTP, certain users should get a proper message. It is not required for the message to be extra detailed, I don't really need to show the exact resource changed. The parent directory name should be enough.</p>

<p>What approach would you recommend?</p>
"
650340,11575,2009-03-16T13:04:46Z,7,Do Python lists have an equivalent to dict.get?,"<p>I have a list of integers.  I want to know whether the number 13 appears in it and, if so, where.  Do I have to search the list twice, as in the code below?</p>

<pre><code>if 13 in intList:
   i = intList.index(13)
</code></pre>

<p>In the case of dictionaries, there's a <code>get</code> function which will ascertain membership and perform look-up with the same search.  Is there something similar for lists?</p>
"
650518,21152,2009-03-16T13:55:46Z,1,How to make a singleton class with Python Flup fastcgi server?,"<p>I use flup as fastcgi server for Django.</p>

<p>Please explain to me how can I use singleton?
I'm not sure I understand threading models for Flup well.</p>
"
650646,76322,2009-03-16T14:25:00Z,2,Rotation based on end points,"<p>I'm using pygame to draw a line between two arbitrary points. I also want to append arrows at the end of the lines that face outward in the directions the line is traveling. </p>

<p>It's simple enough to stick an arrow image at the end, but I have no clue how the calculate the degrees of rotation to keep the arrows pointing in the right direction.</p>
"
650877,66888,2009-03-16T15:19:11Z,5,"Python, redirecting the stream of Popen to a python function","<p>I'm new to python programming.
I have this problem: I have a list of text files (both compressed and not) and I need to :
- connect to the server and open them 
- after the opening of the file, I need to take his content and pass it to another python function that I wrote</p>

<pre><code>def readLogs (fileName):
f = open (fileName, 'r')
inStream = f.read()
counter = 0
inStream = re.split('\n', inStream) # Create a 'list of lines'
out = """"              # Will contain the output
logInConst = """"       # log In Construction
curLine = """"          # Line that I am working on

for nextLine in inStream:
    logInConst += curLine  
    curLine = nextLine
    #   check if it is a start of a new log &amp;&amp; check if the previous log is 'ready'
    if newLogRegExp.match(curLine) and logInConst != """":

        counter = counter + 1

        out = logInConst
        logInConst = """"
        yield out

yield logInConst + curLine

def checkFile (regExp, fileName):
    generatore = readLogs(fileName)
    listOfMatches=[]

    for i in generatore: #I'm now cycling through the logs
        # regExp must be a COMPILE regular expression
        if regExp.search(i):
            listOfMatches.append(i)
    return listOfMatches
</code></pre>

<p>in order to elaborate the info contained in those files.
The function has the aim of write in just 1 line the logs that are stored in those files using 3 lines ... The function is working fine on files read from my local machine but I cannot figure out how to connect to a remote server and create these one-line logs without storing the content of each file into a string and then working with the string ... The command that I use to connect to the remote machine is :</p>

<pre><code>connection_out = Popen(['ssh', retList[0], 'cd '+retList[2]+'; cat'+fileName], stdout=PIPE).communicate()[0]
</code></pre>

<p>retList[0] and retList[2] are the user@remote and the folder name that I have to access</p>

<p>Thanks to all in advance !</p>

<p><strong>UPDATE:</strong></p>

<p>My problem is that I have to establish an ssh connection first :</p>

<pre><code>pr1=Popen(['ssh', 'siatc@lgssp101', '*~/PRD/sialt/log_archive/00/MSG_090308_162648.gz*' ], stdout=PIPE).communicate()[0]
</code></pre>

<p>All the files that I need to open are stored in a list, fileList[], part of them are compressed (.gz) and part are just text files !! I have tried all the procedures that u showed before bot nothing worked ... I think that I mus modify the third argument of the Popen function but I cannot figure out how to do it ! Is there anyone that can help me ???</p>
"
650926,1491,2009-03-16T15:34:43Z,2,How do you substitue a Python capture followed by a number character?,"<p>When using <a href=""http://docs.python.org/library/re.html"" rel=""nofollow"">re.sub</a>, how to you handle a situation where you need a capture followed by a number in the replacement string? For example, you cannot use ""\10"" for capture 1 followed by a '0' character because it will be interpreted as capture 10.</p>
"
650979,NA,2009-03-16T15:44:47Z,2,"Is it possible, with the Python Standard Library (say version 2.5) to perform MS-SQL queries which are parameterized?","<p>While the particular data I'm working with right now will not be user-generated, and will be sanitized within an inch of its life during my usual validation routines, I would like to learn how to do your basic INSERT, SELECT, etc. SQL queries while protecting myself against SQL injection attacks, just for future reference.  I'd rather learn how to do things the ""right"" way, through parameterized queries.</p>

<p>Sanitization is always nice, but I am pitting my pitiful intellect against that of seasoned hackers.  Manually escaping means I am probably overlooking things, since blacklists are not as robust as whitelists.  For additional clarification, I do not mean using the <code>(%s)</code> notation to pass as a parameter for building a string possibly named <code>sqlstatement</code>.  I think one of the magic words I need to know is ""binding.""</p>

<p>I am also hoping to avoid anything outside of the Python Standard Library.</p>

<p>The application in question requires Microsoft SQL 2005, if that is relevant.  I am using ActiveState Python and the modules dbi and odbc.  Since this is Someone Else's Database, stored procedures are out.</p>
"
651009,48500,2009-03-16T15:50:22Z,3,How do I check if it's the homepage in a Plone website using ZPT?,"<p>I want to change my website's header only it if's not the homepage. Is there a <em>tal:condition</em> expression for that?</p>

<p>I've been reading <a href=""http://plone.org/documentation/tutorial/zpt"" rel=""nofollow"">this</a> and can't find what I'm looking for...</p>

<p>thanks!</p>
"
651048,NA,2009-03-16T16:00:10Z,16,Concurrency: Are Python extensions written in C/C++ affected by the Global Interpreter Lock?,"<p>One of Python's strongest points is the ease of writing C and C++ extensions to speed up processor intensive parts of the code. Can these extensions avoid the Global Interpreter Lock or are they also restricted by the GIL? If not, then this ""ease of extension"" is even more of a killer feature than I previously realized. I suspect the answer is not a simple yes-or-no but I am not sure, so I am asking the question here on StackOverflow. </p>
"
651053,63051,2009-03-16T16:01:01Z,5,A simple Python IRC client library that supports SSL?,"<p>A simple Python IRC client library that supports SSL?</p>
"
651358,63401,2009-03-16T17:26:59Z,-1,Trappings MySQL Warnings on Calls Wrapped in Classes -- Python,"<p>I can't get Python's try/else blocks to catch MySQL warnings when the execution statements are wrapped in classes.</p>

<p>I have a class that has as a MySQL connection object as an attribute, a MySQL cursor object as another, and a method that run queries through that cursor object.  The cursor is itself wrapped in a class.  These seem to run queries properly, but the MySQL warnings they generate are not caught as exceptions in a try/else block.  Why don't the try/else blocks catch the warnings?  How would I revise the classes or method calls to catch the warnings?</p>

<p>Also, I've looked through the prominent sources and can't find a discussion that helps me understand this.  I'd appreciate any reference that explains this.</p>

<p>Please see code below.  Apologies for verbosity, I'm newbie.</p>

<pre><code>#!/usr/bin/python
import MySQLdb
import sys
import copy
sys.path.append('../../config')
import credentials as c # local module with dbase connection credentials
#=============================================================================
# CLASSES
#------------------------------------------------------------------------
class dbMySQL_Connection:
    def __init__(self, db_server, db_user, db_passwd):
        self.conn = MySQLdb.connect(db_server, db_user, db_passwd)
    def getCursor(self, dict_flag=True):
        self.dbMySQL_Cursor = dbMySQL_Cursor(self.conn, dict_flag)
        return self.dbMySQL_Cursor
    def runQuery(self, qryStr, dict_flag=True):
        qry_res = runQueryNoCursor(qryStr=qryStr, \
                                   conn=self, \
                                   dict_flag=dict_flag)
        return qry_res
#------------------------------------------------------------------------
class dbMySQL_Cursor:
    def __init__(self, conn, dict_flag=True):
        if dict_flag:
            dbMySQL_Cursor = conn.cursor(MySQLdb.cursors.DictCursor)
        else:
            dbMySQL_Cursor = conn.cursor()
        self.dbMySQL_Cursor = dbMySQL_Cursor
    def closeCursor(self):
        self.dbMySQL_Cursor.close()
#=============================================================================
# QUERY FUNCTIONS
#------------------------------------------------------------------------------
def runQueryNoCursor(qryStr, conn, dict_flag=True):
    dbMySQL_Cursor = conn.getCursor(dict_flag)
    qry_res =runQueryFnc(qryStr, dbMySQL_Cursor.dbMySQL_Cursor)
    dbMySQL_Cursor.closeCursor()
    return qry_res
#------------------------------------------------------------------------------
def runQueryFnc(qryStr, dbMySQL_Cursor):
    qry_res              = {}
    qry_res['rows']      = dbMySQL_Cursor.execute(qryStr)
    qry_res['result']    = copy.deepcopy(dbMySQL_Cursor.fetchall())
    qry_res['messages']  = copy.deepcopy(dbMySQL_Cursor.messages)
    qry_res['query_str'] = qryStr
    return qry_res
#=============================================================================
# USAGES
qry = 'DROP DATABASE IF EXISTS database_of_armaments'
dbConn = dbMySQL_Connection(**c.creds)
def dbConnRunQuery():
    # Does not trap an exception; warning displayed to standard error.
    try:
        dbConn.runQuery(qry)
    except:
        print ""dbConn.runQuery() caught an exception.""
def dbConnCursorExecute():
    # Does not trap an exception; warning displayed to standard error.
    dbConn.getCursor()  # try/except block does catches error without this
    try:
        dbConn.dbMySQL_Cursor.dbMySQL_Cursor.execute(qry)
    except Exception, e:
        print ""dbConn.dbMySQL_Cursor.execute() caught an exception.""
        print repr(e)
def funcRunQueryNoCursor():
    # Does not trap an exception; no warning displayed
    try:
        res = runQueryNoCursor(qry, dbConn)
        print 'Try worked. %s' % res
    except Exception, e:
        print ""funcRunQueryNoCursor() caught an exception.""
        print repr(e)
#=============================================================================
if __name__ == '__main__':
    print '\n'
    print 'EXAMPLE -- dbConnRunQuery()'
    dbConnRunQuery()
    print '\n'
    print 'EXAMPLE -- dbConnCursorExecute()'
    dbConnCursorExecute()
    print '\n'
    print 'EXAMPLE -- funcRunQueryNoCursor()'
    funcRunQueryNoCursor()
    print '\n'
</code></pre>
"
651421,2119,2009-03-16T17:42:32Z,2,Bimodal distribution in C or Python,"<p>What's the easiest way to generate random values according to a bimodal distribution in C or Python?</p>

<p>I could implement something like the Ziggurat algorithm or a Box-Muller transform, but if there's a ready-to-use library, or a simpler algorithm I don't know about, that'd be better.</p>
"
651717,7883,2009-03-16T19:00:09Z,2,Which version of python is currently best for os x?,"<p>After going through hell trying to install the latest version of postgresql and psycopg2 today I'm going for a complete reinstall of Leopard.</p>

<p>I've been sticking with macpython 2.5 for the past year but now I'm considering macports even 2.6</p>

<p>For me it's most important for Twisted, PIL and psycopg2 to be working without a problem.</p>

<p>Can anyone give some guidelines for what version I should choose, based on experience? </p>

<p>Edit:</p>

<p>Ok I've decided to go without reinstalling the os. Hacked around to clean up the bad PostgresPlus installation and installed another one. The official python 2.6.1 package works great, no problem installing it alongside 2.5.2. Psycopg2 works. But as expected PIL wont compile. </p>

<p>I guess I'll be switching between the 2.5 from macports and the official 2.6 for different tasks, since I know the macports python has it's issues with some packages.</p>

<p>Another Edit:</p>

<p>I've now compiled PIL. Had to hide the whole macports directory and half the xcode libraries, so it would find the right ones. It wouldn't accept the paths I was feeding it. PIL is notorious for this on leopard.</p>
"
651949,53390,2009-03-16T20:02:38Z,9,Django: Access primary key in models.filefield(upload_to) location,"<p>I'd like to save my files using the primary key of the entry.</p>

<p>Here is my code:</p>

<pre><code>def get_nzb_filename(instance, filename):
    if not instance.pk:
        instance.save() # Does not work.
    name_slug = re.sub('[^a-zA-Z0-9]', '-', instance.name).strip('-').lower()
    name_slug = re.sub('[-]+', '-', name_slug)
    return u'files/%s_%s.nzb' % (instance.pk, name_slug)

class File(models.Model):
    nzb = models.FileField(upload_to=get_nzb_filename)
    name = models.CharField(max_length=256)
</code></pre>

<p>I know the first time an object is saved the primary key isn't available, so I'm willing to take the extra hit to save the object just to get the primary key, and then continue on. </p>

<p>The above code doesn't work. It throws the following error:</p>

<pre><code>maximum recursion depth exceeded while calling a Python object
</code></pre>

<p>I'm assuming this is an infinite loop. Calling the <code>save</code> method would call the <code>get_nzb_filename</code> method, which would again call the <code>save</code> method, and so on.</p>

<p>I'm using the latest version of the Django trunk.</p>

<p>How can I get the primary key so I can use it to save my uploaded files?</p>

<p><hr /></p>

<p><strong>Update @muhuk:</strong></p>

<p>I like your solution. Can you help me implement it? I've updated my code to the following and the error is <code>'File' object has no attribute 'create'</code>. Perhaps I'm using what you've written out of context?</p>

<pre><code>def create_with_pk(self):
    instance = self.create()
    instance.save()
    return instance

def get_nzb_filename(instance, filename):
    if not instance.pk:
        create_with_pk(instance)
    name_slug = re.sub('[^a-zA-Z0-9]', '-', instance.name).strip('-').lower()
    name_slug = re.sub('[-]+', '-', name_slug)
    return u'files/%s_%s.nzb' % (instance.pk, name_slug)

class File(models.Model):
    nzb = models.FileField(upload_to=get_nzb_filename, blank=True, null=True)
    name = models.CharField(max_length=256)
</code></pre>

<p>Instead of enforcing the required field in my model I'll do it in my Form class. No problem.</p>
"
652184,33841,2009-03-16T21:17:23Z,5,Simultaneously inserting and extending a list?,"<p>Is there a better way of simultaneously inserting and extending a list? Here is an ugly example of how I'm currently doing it.  (lets say I want to insert '2.4' and '2.6' after the '2' element):</p>

<pre><code>&gt;&gt;&gt; a = ['1', '2', '3', '4']
&gt;&gt;&gt; b = a[:a.index('2')+1] + ['2.4', '2.6'] + a[a.index('2'):]
&gt;&gt;&gt; b
&lt;&lt;&lt; ['1', '2', '2.4', '2.6', '3', '4']
</code></pre>
"
652276,91385,2009-03-16T21:50:45Z,27,Is it possible to create anonymous objects in Python?,"<p>I'm debugging some Python that takes, as input, a list of objects, each with some attributes.</p>

<p>I'd like to hard-code some test values -- let's say, a list of four objects whose ""foo"" attribute is set to some number.</p>

<p>Is there a more concise way than this?</p>

<pre><code>x1.foo = 1
x2.foo = 2
x3.foo = 3
x4.foo = 4
myfunc([x1, x2, x3, x4])
</code></pre>

<p>Ideally, I'd just like to be able to say something like:</p>

<pre><code>myfunc([&lt;foo=1&gt;, &lt;foo=2&gt;, &lt;foo=3&gt;, &lt;foo=4&gt;])
</code></pre>

<p>(Obviously, that is made-up syntax. But is there something similar that really works?)</p>

<p>Note: This will never be checked in. It's just some throwaway debug code. So don't worry about readability or maintainability.</p>
"
652283,51532,2009-03-16T21:53:30Z,10,Can a neural network be used to find a functions minimum(a)?,"<p>I had been interested in neural networks for a bit and thought about using one in python for a light project that compares various minimization techniques in a time domain (which is fastest).</p>

<p>Then I realized I didn't even know if a NN is good for minimization. What do you think?</p>
"
652291,74474,2009-03-16T21:56:51Z,15,sorting a list of dictionary values by date in python,"<p>I have a list and I am appending a dictionary to it as I loop through my data...and I would like to sort by one of the dictionary keys.</p>

<p>ex: </p>

<pre><code>data = ""data from database""
list = []
for x in data:
     dict = {'title':title, 'date': x.created_on}
     list.append(dict)
</code></pre>

<p>I want to sort the list in reverse order by value of 'date'</p>
"
652423,72372,2009-03-16T22:41:50Z,2,Check if value exists in nested lists,"<p>in my list:</p>

<pre><code>animals =  [ ['dog', ['bite'] ],
             ['cat', ['bite', 'scratch'] ],
             ['bird', ['peck', 'bite'] ], ]

add('bird', 'peck')
add('bird', 'screech')
add('turtle', 'hide')
</code></pre>

<p>The add function should check that the animal and action haven't been added before adding them to the list.  Is there a way to accomplish this without nesting a loop for each step into the list?</p>
"
652449,78798,2009-03-16T22:55:07Z,2,Separating Models and Request Handlers In Google App Engine,"<p>I'd like to move my models to a separate directory, similar to the way it's done with Rails to cut down on code clutter.  Is there any way to do this easily?</p>

<p>Thanks,
Collin</p>
"
652535,27308,2009-03-16T23:30:36Z,6,Writing a binary buffer to a file in python,"<p>I have some python code that:</p>

<ol>
<li>Takes a BLOB from a database which is compressed.</li>
<li>Calls an uncompression routine in C that uncompresses the data.</li>
<li>Writes the uncompressed data to a file.</li>
</ol>

<p>It uses <a href=""http://docs.python.org/library/ctypes.html"" rel=""nofollow"">ctypes</a> to call the C routine, which is in a shared library.</p>

<p>This mostly works, except for the actual writing to the file. To uncompress, I get the data uncompressed into a python buffer, created using the ctypes <code>create_string_buffer</code> method:</p>

<p><code>c_uncompData_p = create_string_buffer(64000)</code></p>

<p>so the uncompression call is like this:</p>

<p><code>c_uncompSize = mylib.explodeCharBuffer (c_data_p, c_data_len, c_uncompData_p)</code></p>

<p>The size of the resulting uncompressed data is returned as the return value.</p>

<p>But... I have no idea how to force python on only write <code>c_uncompSize</code> bytes out - if I do:</p>

<p><code>myfile.write (c_uncompData_p.raw)</code></p>

<p>it writes the whole 64k buffer out (the data is binary - so it is not null terminated).</p>

<p>So, my question is - using Python 2.5 how do I get c_uncompSize bytes printed out, rather than the whole 64k?</p>

<p>Thanks
Jamie</p>
"
652750,71097,2009-03-17T01:33:18Z,-1,How to unlock an sqlite3 db?,"<p>OMG!</p>

<p>What an apparent problem... my django based scripts have locked my sqlite db...</p>

<p>Does anyone know how to fix?</p>
"
653259,78903,2009-03-17T07:04:05Z,2,Effective way to iteratively append to a string in Python?,"<p>I'm writing a Python function to split text into words, ignoring specified punctuation. Here is some working code. I'm not convinced that constructing strings out of lists (buf = [] in the code) is efficient though. Does anyone have a suggestion for a better way to do this?</p>

<pre><code>def getwords(text, splitchars=' \t|!?.;:""'):
    """"""
    Generator to get words in text by splitting text along specified splitchars
    and stripping out the splitchars::

      &gt;&gt;&gt; list(getwords('this is some text.'))
      ['this', 'is', 'some', 'text']
      &gt;&gt;&gt; list(getwords('and/or'))
      ['and', 'or']
      &gt;&gt;&gt; list(getwords('one||two'))
      ['one', 'two']
      &gt;&gt;&gt; list(getwords(u'hola unicode!'))
      [u'hola', u'unicode']
    """"""
    splitchars = set(splitchars)
    buf = []
    for char in text:
        if char not in splitchars:
            buf.append(char)
        else:
            if buf:
                yield ''.join(buf)
                buf = []
    # All done. Yield last word.
    if buf:
        yield ''.join(buf)
</code></pre>
"
653368,15109,2009-03-17T08:10:19Z,41,How to create a Python decorator that can be used either with or without parameters?,"<p>I'd like to create a Python decorator that can be used either with parameters:</p>

<pre><code>@redirect_output(""somewhere.log"")
def foo():
    ....
</code></pre>

<p>or without them (for instance to redirect the output to stderr by default):</p>

<pre><code>@redirect_output
def foo():
    ....
</code></pre>

<p>Is that at all possible?</p>

<p>Note that I'm not looking for a different solution to the problem of redirecting output, it's just an example of the syntax I'd like to achieve.</p>
"
653419,41344,2009-03-17T08:45:24Z,38,How can I profile a multithread program in Python?,"<p>I'm developing an inherently multithreaded module in Python, and I'd like to find out where it's spending its time. cProfile only seems to profile the main thread. Is there any way of profiling all threads involved in the calculation?</p>
"
653496,46634,2009-03-17T09:21:07Z,13,How can I cluster a graph in Python?,"<p>Let G be a graph. So G is a set of nodes and set of links. I need to find a fast way to partition the graph. The graph I am now working has only 120*160 nodes, but I might soon be working on an equivalent problem, in another context (not medicine, but website development), with millions of nodes. </p>

<p>So, what I did was to store all the links into a graph matrix:</p>

<pre><code>M=numpy.mat(numpy.zeros((len(data.keys()),len(data.keys()))))
</code></pre>

<p>Now M holds a 1 in position s,t, if node s is connected to node t. I make sure M is symmetrical M[s,t]=M[t,s] and each node links to itself M[s,s]=1.</p>

<p>If I remember well if I multiply M with M, the results is a matrix that represents the graph that connects vertexes that are reached on through two steps.</p>

<p>So I keep on multplying M with itself, until the number of zeros in the matrix do not decrease any longer. Now I have the list of the connected components. 
And now I need to cluster this matrix.</p>

<p>Up to now I am pretty satisfied with the algorithm. I think it is easy, elegant, and reasonably fast. I am having trouble with this part.</p>

<p>Essentially I need to split this graph into its connected components.</p>

<p>I can go through all the nodes, and see what are they connected to.</p>

<p>But what about sorting the matrix reordering the lines. But I don't know if it is possible to do it.</p>

<p>What follows is the code so far:</p>

<pre><code>def findzeros(M):
    nZeros=0
    for t in M.flat:
        if not t:
            nZeros+=1
    return nZeros

M=numpy.mat(numpy.zeros((len(data.keys()),len(data.keys()))))    
for s in data.keys():
    MatrixCells[s,s]=1
    for t in data.keys():
        if t&lt;s:
            if (scipy.corrcoef(data[t],data[s])[0,1])&gt;threashold:
                M[s,t]=1
                M[t,s]=1

nZeros=findzeros(M)
M2=M*M
nZeros2=findzeros(M2)

while (nZeros-nZeros2):
    nZeros=nZeros2
    M=M2
    M2=M*M
    nZeros2=findzeros(M2)
</code></pre>

<p><hr /></p>

<h3>Edit:</h3>

<p>It has been suggested that I use SVD decomposition. Here is a simple example of the problem on a 5x5 graph. We shall use this since with the 19200x19200 square matrix is not that easy to see the clusters.</p>

<pre><code>import numpy
import scipy

M=numpy.mat(numpy.zeros((5,5)))

M[1,3]=1
M[3,1]=1
M[1,1]=1
M[2,2]=1
M[3,3]=1
M[4,4]=1
M[0,0]=1

print M

u,s,vh = numpy.linalg.linalg.svd(M)
print u
print s
print vh
</code></pre>

<p>Essentially there are 4 clusters here: (0),(1,3),(2),(4)
But I still don't see how the svn can help in this context.</p>
"
653735,71097,2009-03-17T10:53:00Z,13,"Django Forms, set an initial value to request.user","<p>Is there some way to make the following possible, or should it be done elsewhere?</p>

<pre><code>class JobRecordForm(forms.ModelForm):
    supervisor = forms.ModelChoiceField(
        queryset    = User.objects.filter(groups__name='Supervisors'), 
        widget      = forms.RadioSelect,
        initial     = request.user # is there some way to make this possible?
    )    
    class Meta:
        model = JobRecord
</code></pre>
"
653765,77175,2009-03-17T11:03:54Z,1,Python - Acquire value from dictionary depending on location/index in list,"<p>From MySQL query I get data which I put into a dictionary ""d"":</p>

<blockquote>
  <p>d = {0: (datetime.timedelta(0,
  25200),), 1: (datetime.timedelta(0,
  25500),), 2: (datetime.timedelta(0,
  25800),), 3: (datetime.timedelta(0,
  26100),), 4: (datetime.timedelta(0,
  26400),), 5: (datetime.timedelta(0,
  26700),)}</p>
</blockquote>

<p>I have a list ""m"" with numbers like: </p>

<blockquote>
  <p>m = [3, 4, 1, 4, 7, 4]</p>
</blockquote>

<p>I'd like to test ""m"" and if there is number ""4"", I'd like to receive another list ""h"" with hours from ""d"" where index from list ""m"" would be corresponding with keys from dictionary ""d"", so: m[1], m[3], m[5] would get me hours assigned to d[1], d[3], d[5] in list ""h"":</p>

<blockquote>
  <p>h = [7:05:00, 7:15:00, 7:25:00]</p>
</blockquote>

<p>I'll appreciate your input for that...</p>
"
653783,446497,2009-03-17T11:08:54Z,2,A simple freeze behavior decorator,"<p>I'm trying to write a freeze decorator for Python.</p>

<p>The idea is as follows :</p>

<p><strong>(In response to the two comments)</strong></p>

<p>I might be wrong but I think there is two main use of 
test case.</p>

<ul>
<li><p>One is the test-driven development : 
Ideally , developers are writing case before writing the code.
It usually helps defining the architecture because this discipline
forces to define the real interfaces before development.
One may even consider that in some case the person who 
dispatches job between dev is writing the test case and
use it to illustrate efficiently the specification he has in mind.
I don't have any experience of the use of test case like that.</p></li>
<li><p>The second is the idea that all project with a decent 
size and a several programmers is suffering from broken code.
Something that use to work may get broken from a change
that looked like an innocent refactoring.
Though good architecture, loose couple between component may
help to fight against this phenomenon ; you will sleep better
at night if you have written some test case to make sure
that nothing will break your program's behavior.</p></li>
</ul>

<p>HOWEVER,
Nobody can deny the overhead of writting test cases. In the
first case one may argue that test case is actually guiding
development and is therefore not to be considered as an overhead.</p>

<p>Frankly speaking, I'm a pretty young programmer and if I were
you, my word on this subject is not really valuable...
Anyway, I think that mosts company/projects are not working
like that, and that unit tests are mainly used in the second
case...</p>

<p>In other words, rather than ensuring that the program is 
working correctly, it is aiming at checking that it will
work the same in the future.</p>

<p>This needs can be met without the cost of writing tests,
by using this freezing decorator.</p>

<p>Let's say you have a function</p>

<pre><code>def pow(n,k):
    if n == 0:  return 1
    else:       return n * pow(n,k-1)
</code></pre>

<p>It is perfectly nice, and you want to rewrite it as an optimized version.
It is part of a big project. You want it to give back the same result
for a few value.
Rather than going through the pain of test cases, one could use some
kind of freeze decorator.</p>

<p>Something such that the first time  the decorator is run,
the decorator run the function with the defined args (below 0, and 7)
and saves the result in a map ( f --> args --> result )</p>

<pre><code>@freeze(2,0)
@freeze(1,3)
@freeze(3,5)
@freeze(0,0)
def pow(n,k):
    if n == 0:  return 1
    else:       return n * pow(n,k-1)
</code></pre>

<p>Next time the program is executed, the decorator will load this map and check
that the result of this function for these args as not changed.</p>

<p>I already wrote quickly the decorator (see below), but hurt a few problems about
which I need your advise...</p>

<pre><code>from __future__ import with_statement
from collections import defaultdict
from types import GeneratorType
import cPickle

def __id_from_function(f):
    return ""."".join([f.__module__, f.__name__])

def generator_firsts(g, N=100):
    try:
        if N==0:
            return []
        else:
            return  [g.next()] + generator_firsts(g, N-1)
    except StopIteration :
        return []

def __post_process(v):
    specialized_postprocess = [
        (GeneratorType, generator_firsts),
        (Exception,     str),
    ]
    try:
        val_mro = v.__class__.mro()
        for ( ancestor, specialized ) in specialized_postprocess:
            if ancestor in val_mro:
                return specialized(v)
        raise """"
    except:
        print ""Cannot accept this as a value""
        return None

def __eval_function(f):
    def aux(args, kargs):
        try:
            return ( True, __post_process( f(*args, **kargs) ) )
        except Exception, e:
            return ( False, __post_process(e) )
    return aux

def __compare_behavior(f, past_records):
    for (args, kargs, result) in past_records:
        assert __eval_function(f)(args,kargs) == result

def __record_behavior(f, past_records, args, kargs):
    registered_args = [ (a, k) for (a, k, r) in past_records ]
    if (args, kargs) not  in registered_args:
        res = __eval_function(f)(args, kargs)
        past_records.append( (args, kargs, res) )

def __open_frz():
    try:
        with open("".frz"", ""r"") as __open_frz:
            return cPickle.load(__open_frz)
    except:
        return defaultdict(list)

def __save_frz(past_records):
    with open("".frz"", ""w"") as __open_frz:
        return cPickle.dump(past_records, __open_frz)


def freeze_behavior(*args, **kvargs):
    def freeze_decorator(f):
        past_records = __open_frz()
        f_id = __id_from_function(f)
        f_past_records = past_records[f_id]
        __compare_behavior(f, f_past_records)
        __record_behavior(f, f_past_records, args, kvargs)
        __save_frz(past_records)
        return f
    return freeze_decorator
</code></pre>

<ul>
<li><p>Dumping and Comparing of results is not trivial for all type. Right now I'm thinking about using a function (I call it postprocess here), to solve this problem.
Basically instead of storing res I store postprocess(res) and I compare postprocess(res1)==postprocess(res2), instead of comparing res1 res2.
It is important to let the user overload the predefined postprocess function.
My first question is :
<strong>Do you know a way to check if an object is dumpable or not?</strong></p></li>
<li><p>Defining a key for the function decorated is a pain. In the following snippets
I am using the function module and its name. 
** Can you think of a smarter way to do that. **</p></li>
<li><p>The snippets below is kind of working, but opens and close the file when testing and when recording. This is just a stupid prototype... but do you know a nice way to open the file, process the decorator for all function, close the file...</p></li>
<li><p>I intend to add some functionalities to this. For instance, add the possibity to define
an iterable to browse a set of argument, record arguments from real use, etc.
Why would you expect from such a decorator?</p></li>
<li><p>In general, would you use such a feature, knowing its limitation... Especially when trying to use it with POO?</p></li>
</ul>
"
653887,4194,2009-03-17T11:46:11Z,11,Equivalent for LinkedHashMap in Python,"<p><a href=""http://java.sun.com/j2se/1.5.0/docs/api/java/util/LinkedHashMap.html"">LinkedHashMap</a> is the Java implementation of a Hashtable like data structure (dict in Python) with predictable iteration order. That means that during a traversal over all keys, they are ordered by insertion. This is done by an additional linked list maintaining the insertion order.</p>

<p>Is there an equivalent to that in Python? </p>
"
654128,18909,2009-03-17T13:00:41Z,0,Python Hash Functions,"<p>What is a good way of hashing a hierarchy (similar to a file structure) in python?</p>

<p>I could convert the whole hierarchy into a dotted string and then hash that, but is there a better (or more efficient) way of doing this without going back and forth all the time?</p>

<p>An example of a structure I might want to hash is:</p>

<pre><code>a -&gt; b1 -&gt; c -&gt; 1 -&gt; d
a -&gt; b2 -&gt; c -&gt; 2 -&gt; d
a -&gt; c -&gt; 1 -&gt; d
</code></pre>
"
654499,69746,2009-03-17T14:32:48Z,12,Python file modes detail,"<p>In Python, the following statements do not work:</p>

<pre><code>f = open(""ftmp"", ""rw"")
print &gt;&gt; f, ""python""
</code></pre>

<p>I get the error:</p>

<pre><code>Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
IOError: [Errno 9] Bad file descriptor
</code></pre>

<p>But with the following code it works:</p>

<pre><code>g = open(""ftmp"", ""r+"")
print &gt;&gt; g, ""python""
</code></pre>

<p>It looks like I need to revise the file modes. What are the deep intricacies of the file opening modes?</p>
"
654520,2147,2009-03-17T14:39:46Z,4,Is there any preferable way to get user/group information from an Active Directory domain in Python?,"<p>For a Django application that I'm working on, I wanted to allow group membership to be determined by Active Directory group.  After a while of digging through the pywin32 documentation, I came up with this:</p>

<pre><code>&gt;&gt;&gt; import win32net
&gt;&gt;&gt; win32net.NetUserGetGroups('domain_name.com', 'username')
[(u'Domain Users', 7), ...]
</code></pre>

<p>I spent a while googling before I figured this out though, and the examples I found almost exclusively used LDAP for this kind of thing.  Is there any reason why that's to be preferred over this method?  Bear a couple things in mind:</p>

<ol>
<li>I'm not using Active Directory to actually perform authentication, only permissions.  Authentication is performed by another server.</li>
<li>While it would be nice to have some cross-platform capabilities, this will probably run almost exclusively on Windows.</li>
</ol>
"
654576,6007,2009-03-17T14:52:53Z,1,splitting a ManyToManyField over multiple form fields in a ModelForm,"<p>So I have a model with a ManyToManyField called tournaments. I have a ModelForm with two tournament fields:</p>

<pre><code>pay_tourns = forms.ModelMultipleChoiceField(
                        queryset=Tourn.objects.all().active().pay_tourns(),
                        widget=forms.CheckboxSelectMultiple())
rep_tourns = forms.ModelMultipleChoiceField(
                        queryset=Tourn.objects.all().active().rep_tourns(),
                        widget=forms.CheckboxSelectMultiple())
</code></pre>

<p>The methods after all() there are from a subclassed QuerySet. When I'm saving the form in my view I do thus:</p>

<pre><code>post.tournaments = (post_form.cleaned_data.get('pay_tourns')
                                + post_form.cleaned_data.get('rep_tourns'))
</code></pre>

<p>Anyway, this all works fine. What I can't figure out how to do is fill these form fields out when I'm loading an existing post. That is, when I pass instance=post to the form. Any ideas?</p>
"
654646,658,2009-03-17T15:06:46Z,9,How do I create a unique value for each key using dict.fromkeys?,"<p>First, I'm new to Python, so I apologize if I've overlooked something, but I would like to use <code>dict.fromkeys</code> (or something similar) to create a dictionary of lists, the keys of which are provided in another list. I'm performing some timing tests and I'd like for the key to be the input variable and the list to contain the times for the runs:</p>

<pre><code>def benchmark(input):
    ...
    return time_taken

runs = 10
inputs = (1, 2, 3, 5, 8, 13, 21, 34, 55)
results = dict.fromkeys(inputs, [])

for run in range(0, runs):
    for i in inputs:
        results[i].append(benchmark(i))
</code></pre>

<p>The problem I'm having is that all the keys in the dictionary appear to share the same list, and each run simply appends to it. Is there any way to generate a unique empty list for each key using <code>fromkeys</code>? If not, is there another way to do this without generating the resulting dictionary by hand?</p>
"
654738,299937,2009-03-17T15:26:44Z,6,Python process management,"<p>Is there any way python is natively, or through some code available online (preferably under the GPL), capable of doing process management. The goal is similar to the functionality of ps, but preferably in arrays, lists, and/or dicts.</p>
"
655125,73894,2009-03-17T16:57:23Z,5,python postgres cursor timestamp issue,"<p>I am somewhat new to transactional databases and have come across an issue I am trying to understand.  </p>

<p>I have created a simple demonstration where a database connection is stored inside each of the 5 threads created by cherrypy.  I have a method that displays a table of timestamps stored in the database and a button to add a new record of time stamps.</p>

<p>the table has 2 fields, one for the datetime.datetime.now() timestamp passed by python and one for the database timestamp set to default NOW().</p>

<pre><code>
CREATE TABLE test (given_time timestamp,
                   default_time timestamp DEFAULT NOW());
</code></pre>

I have 2 methods that interact with the database.  The first will create a new cursor, insert a new given_timestamp, commit the cursor, and return to the index page.  The second method will create a new cursor, select the 10 most recent timestamps and return those to the caller.

<pre><code>
import sys
import datetime
import psycopg2
import cherrypy

def connect(thread_index): 
    # Create a connection and store it in the current thread 
    cherrypy.thread_data.db = psycopg2.connect('dbname=timestamps')

# Tell CherryPy to call ""connect"" for each thread, when it starts up
cherrypy.engine.subscribe('start_thread', connect)

class Root:
    @cherrypy.expose
    def index(self): 
        html = []
        html.append(""&lt;html>&lt;body>"")

        html.append(""&lt;table border=1>&lt;thead>"")
        html.append(""&lt;tr>&lt;td>Given Time&lt;/td>&lt;td>Default Time&lt;/td>&lt;/tr>"")
        html.append(""&lt;/thead>&lt;tbody>"")

        for given, default in self.get_timestamps():
            html.append(""&lt;tr>&lt;td>%s&lt;td>%s"" % (given, default))

        html.append(""&lt;/tbody>"")
        html.append(""&lt;/table>"")

        html.append(""&lt;form action='add_timestamp' method='post'>"")
        html.append(""&lt;input type='submit' value='Add Timestamp'/>"")
        html.append(""&lt;/form>"")

        html.append(""&lt;/body>&lt;/html>"")
        return ""\n"".join(html)

    @cherrypy.expose
    def add_timestamp(self):
        c = cherrypy.thread_data.db.cursor()
        now = datetime.datetime.now()
        c.execute(""insert into test (given_time) values ('%s')"" % now)
        c.connection.commit()
        c.close()
        raise cherrypy.HTTPRedirect('/')

    def get_timestamps(self):
        c = cherrypy.thread_data.db.cursor()
        c.execute(""select * from test order by given_time desc limit 10"")
        records = c.fetchall()
        c.close()
        return records

if __name__ == '__main__':

    cherrypy.config.update({'server.socket_host': '0.0.0.0',
                            'server.socket_port': 8081,
                            'server.thread_pool': 5,
                            'tools.log_headers.on': False,
                            })

    cherrypy.quickstart(Root())
</code></pre>

I would expect the given_time and default_time timestamps to be only a few microseconds off from each other.  However I am getting some strange behavior.  If I add timestamps every few seconds, the default_time is not a few microseconds off from the given_time, but is usually a few microseconds off from the *previous* given_time.

<pre>
Given Time                  Default Time
2009-03-18 09:31:30.725017  2009-03-18 09:31:25.218871
2009-03-18 09:31:25.198022  2009-03-18 09:31:17.642010
2009-03-18 09:31:17.622439  2009-03-18 09:31:08.266720
2009-03-18 09:31:08.246084  2009-03-18 09:31:01.970120
2009-03-18 09:31:01.950780  2009-03-18 09:30:53.571090
2009-03-18 09:30:53.550952  2009-03-18 09:30:47.260795
2009-03-18 09:30:47.239150  2009-03-18 09:30:41.177318
2009-03-18 09:30:41.151950  2009-03-18 09:30:36.005037
2009-03-18 09:30:35.983541  2009-03-18 09:30:31.666679
2009-03-18 09:30:31.649717  2009-03-18 09:30:28.319693
</pre>

<p>Yet, if I add a new timestamp about once a minute, both the given_time and default_time are only a few microseconds off as expected.  However, after submitting the 6th timestamp (the number of threads + 1) the default_time is a few microseconds off from the first given_time timestamp.</p>

<pre>
Given Time                  Default Time
2009-03-18 09:38:15.906788  2009-03-18 09:33:58.839075
2009-03-18 09:37:19.520227  2009-03-18 09:37:19.520293
2009-03-18 09:36:04.744987  2009-03-18 09:36:04.745039
2009-03-18 09:35:05.958962  2009-03-18 09:35:05.959053
2009-03-18 09:34:10.961227  2009-03-18 09:34:10.961298
2009-03-18 09:33:58.822138  2009-03-18 09:33:55.423485
</pre>

<p>Even though I am explicitly closing the cursor after each use, it appears that the previous cursor is still being reused. How is that possible if I am closing the cursor after I'm done with it and creating a new cursor each time?  Can someone please explain what is going on here?</p>

<p><strong>Closer to an answer:</strong></p>

<p>I've added a cursor.connection.commit() to the get_timestamps method and that now gives me accurate data with the timestamps.  Can anyone explain why I could need to call cursor.connection.commit() when all I am doing is a select? I am guessing that every time I get a cursor, a transaction begins (or continues with an existing transaction unit it gets committed). Is there a better way to do this or am I stuck committing every time I get a cursor regardless of what I do with that cursor?</p>
"
655180,41767,2009-03-17T17:09:27Z,1,Sending Rich Text Format email using Outlook 2003,"<p>I am trying to send a Rich Text Format email message using Outlook 2003.
The following code results the RTF HTML source code to be dumped into the mail message body.</p>

<p>What should I do in order to fix that, and make Outlook display the formatted data and not the source HTML ?</p>

<pre><code>import win32com.client

RTFTEMPLATE = """"""&lt;!DOCTYPE HTML PUBLIC ""-//W3C//DTD HTML 3.2//EN""&gt;
&lt;HTML&gt;
&lt;HEAD&gt;
&lt;META HTTP-EQUIV=3D""Content-Type"" CONTENT=3D""text/html; =
charset=3Dus-ascii""&gt;
&lt;META NAME=3D""Generator"" CONTENT=3D""MS Exchange Server version =
08.00.0681.000""&gt;
&lt;TITLE&gt;%s&lt;/TITLE&gt;
&lt;/HEAD&gt;
&lt;BODY&gt;
&lt;!-- Converted from text/rtf format --&gt;

&lt;P DIR=3DLTR&gt;&lt;SPAN LANG=3D""en-us""&gt;&lt;FONT =
FACE=3D""Calibri""&gt;%s&lt;/FONT&gt;&lt;/SPAN&gt;&lt;SPAN =
LANG=3D""en-us""&gt;&lt;/SPAN&gt;&lt;/P&gt;

&lt;/BODY&gt;
&lt;/HTML&gt;""""""

Format = { 'UNSPECIFIED' : 0, 'PLAIN' : 1, 'HTML' : 2, 'RTF'  : 3}
profile = ""Outlook""
subject=""Subject""
body = ""Test Message""

session = win32com.client.Dispatch(""Mapi.Session"")
outlook = win32com.client.Dispatch(""Outlook.Application"")
session.Logon(profile)
mainMsg = outlook.CreateItem(0)
mainMsg.To = ""test@test.test""
mainMsg.Subject = subject
mainMsg.BodyFormat = Format['RTF']
mainMsg.Body = RTFTEMPLATE % (subject,body)
mainMsg.Send()
</code></pre>

<p>EDIT: When using HTMLBody instead of Body, Outlook detects the message as HTML and not as RTF.</p>
"
655530,15109,2009-03-17T18:33:24Z,7,How to configure IPython to use gvim on Windows?,"<p>This really looks like something I should be able to find on Google, but for some reason I can't make heads or tails of it. There's the EDITOR environment variable, the ipy_user_conf.py file, the ipythonrc file, some weird thing about running gvim in server mode and a bunch of other stuff I can't wrap my head around (probably because of lack of sleep).</p>

<p>Is there a guide somewhere I can follow, or maybe someone can just outline the steps I need to take?</p>
"
655662,56815,2009-03-17T19:21:40Z,4,Why is wx.SingleChoiceDialog not subclassing properly,"<p>I'm trying to subclass the wxpython SingleChoiceDialog class.  I have a TableChoiceDialog class that inherits from SingleChoiceDialog adding generic functionality, and I have 2 sub classes for that add more refined functionality.  Basically I'm O.O.P'ing</p>

<p>In my TableChoiceDialog class I have a line which calls the superclass's <code>__init__</code>, i.e.</p>

<pre><code>class TableChoiceDialog(wx.SingleChoiceDialog):
    def __init__(self, parent, message, caption, list, ...other args...):
        wx.SingleChoiceDialog.__init__(self, parent, message, caption, list)
</code></pre>

<p>The problem I'm having is that according to the <code>SingleChoiceDialog.__init__</code> docstring (and the wxPython API), SingleChoiceDialog does not have the self argument as part of it's <code>__init__</code> method.</p>

<pre><code>    __init__(Window parent, String message, String caption,
        List choices=EmptyList, long style=CHOICEDLG_STYLE,
        Point pos=DefaultPosition) -&gt; SingleChoiceDialog
</code></pre>

<p>As I have it above, the program prints the error:</p>

<pre><code>swig/python detected a memory leak of type 'wxSingleChoiceDialog *', no destructor found.
</code></pre>

<p>If I take out the self parameter the system complains that it was expecting a <code>SingleChoiceDialog</code> object as a first argument, which seems to point to it actually wanting a reference to self.</p>

<p>When I take out the parent argument, leaving self (and the other 3 which I'm pretty sure are fine) the system complains that it only recieved 3 arguments, when it needed 4.  I'm pretty certain I'm passing 4.</p>

<p>So.  What blatantly obvious mistake have I made?  Have I totally misunderstood how python handles objects (and hence pretty much misunderstood python)?  Have I misunderstood OOP as a whole?</p>

<p>Please help.  Thanks in advance</p>
"
655903,76259,2009-03-17T20:28:08Z,1,python regular expression for retweets,"<p>i'm working on a regex that will extract retweet keywords and user names from tweets. here's an example, with a rather terrible regex to do the job:</p>

<pre><code>tweet='foobar RT@one, @two: @three barfoo'
m=re.search(r'(RT|retweet|from|via)\b\W*@(\w+)\b\W*@(\w+)\b\W*@(\w+)\b\W*',tweet)
m.groups()
('RT', 'one', 'two', 'three')
</code></pre>

<p>what i'd like is to condense the repeated <code>\b\W*@(\w+)\b\W*</code> patterns and make them of a variable number, so that if @four were added after @three, it would also be extracted. i've tried many permutations to repeat this with a <code>+</code> unsuccessfully.</p>

<p>i'd also like this to work for something like</p>

<pre><code>tweet='foobar RT@one, RT @two: RT @three barfoo';
</code></pre>

<p>which can be achieved with a re.finditer <em>if</em> the patterns don't overlap. (i have a version where the patterns do overlap, and so only the first RT gets picked up.)</p>

<p>any help is greatly appreciated. thanks.</p>
"
656050,91385,2009-03-17T21:17:03Z,3,"Can I get rows from SQLAlchemy that are plain arrays, rather than dictionaries?","<p>I'm trying to optimize some Python code. The profiler tells me that SQLAlchemy's _get_col() is what's killing performance. The code looks something like this:</p>

<pre><code>lots_of_rows = get_lots_of_rows()
for row in lots_of_rows:
    if row.x == row.y:
        print row.z
</code></pre>

<p>I was about to go through the code and make it more like this...</p>

<pre><code>lots_of_rows = get_lots_of_rows()
for row in lots_of_rows:
    if row[0] == row[1]:
        print row[2]
</code></pre>

<p>...but I've found some documentation that seems to indicate that when accessing row objects like arrays, you're actually still pulling dictionary keys. In other words, the row object looks like this:</p>

<pre><code>'x': (x object)
'0': (x object)
'y': (y object)
'1': (y object)
'z': (z object)
'2': (z object)
</code></pre>

<p>If that's the case, I doubt I'll see any performance improvement from accessing columns by number rather than name. Is there any way to get SA to return results as a list of tuples, or a list of lists, rather than a list of dictionaries? Alternately, can anyone suggest any other optimizations?</p>
"
656155,NA,2009-03-17T21:42:39Z,14,Why did Python 2.6 add a global next() function?,"<p>I noticed that Python2.6 added a next() to it's <a href=""http://docs.python.org/library/functions.html"" rel=""nofollow"">list of global functions</a>.</p>

<blockquote>
  <p><a href=""http://docs.python.org/library/functions.html#next"" rel=""nofollow""><code>next(iterator[, default])</code></a></p>

<pre><code>Retrieve the next item from the iterator by calling its next() method.
</code></pre>
  
  <p>If <code>default</code> is given, it is returned if
  the iterator is exhausted, otherwise
  <code>StopIteration</code> is raised.</p>
</blockquote>

<p>What was the motivation for adding this?
What can you do with <code>next(iterator)</code> that you can't do with <code>iterator.next()</code> and an <code>except</code> clause to handle the StopIteration?</p>
"
656180,51649,2009-03-17T21:51:51Z,1,Implementation: How to retrieve and send emails for different Gmail accounts?,"<p>I need advice and how to got about setting up a simple service for my users. I would like to add a new feature where users can send and receive emails from their gmail account. I have seen this done several times and I know its possible.</p>

<p>There use to be a project for ""Libgmailer"" at sourceforge but I think it was abandoned. Is anyone aware of anything similar?</p>

<p>I have found that Gmail has a Python API but my site is making use of PHP.</p>

<p>I really need ideas on how to best go about this!</p>

<p>Thanks all for any input</p>
"
656297,71097,2009-03-17T22:32:43Z,37,python time + timedelta equivalent,"<p>I'm trying to do something like this:</p>

<pre><code>time() + timedelta(hours=1)
</code></pre>

<p>however, <a href=""http://bugs.python.org/issue1487389"">Python doesn't allow it</a>, apparently for good reason.</p>

<p>Does anyone have a simple work around?</p>

<h3>Related:</h3>

<ul>
<li><a href=""http://stackoverflow.com/questions/100210/python-easy-way-to-add-n-seconds-to-a-datetime-time"">Python - easy way to add N seconds to a datetime.time?</a></li>
</ul>
"
656704,9974,2009-03-18T01:49:32Z,6,Python lib to Read a Flash swf Format File,"<p>I'm interested in using Python to hack on the data in Flash swf files.  There is good <a href=""http://www.adobe.com/devnet/swf/"">documentation</a> available on the format of swf files, and I am considering writing my own Python lib to parse that data out using the standard Python <a href=""http://docs.python.org/library/struct.html"">struct</a> lib.</p>

<p>Does anybody know of a Python project that already does this?  I would also be interested in any available solutions that use Perl, Ruby, Haskell, etc.</p>
"
656779,361,2009-03-18T02:34:01Z,9,PyWinAuto still useful?,"<p>I've been playing with PyWinAuto today and having fun automating all sorts GUI tests.  I was wondering if it is still state of the art or if there might be something else (also free) which does windows rich client automation better.  </p>
"
656933,62993,2009-03-18T04:09:31Z,44,Communicating with a running python daemon,"<p>I wrote a small Python application that runs as a daemon. It utilizes threading and queues. </p>

<p>I'm looking for general approaches to altering this application so that I can communicate with it while it's running. Mostly I'd like to be able to monitor its health.</p>

<p>In a nutshell, I'd like to be able to do something like this:</p>

<pre><code>python application.py start  # launches the daemon
</code></pre>

<p>Later, I'd like to be able to come along and do something like:</p>

<pre><code>python application.py check_queue_size  # return info from the daemonized process
</code></pre>

<p>To be clear, I don't have any problem implementing the Django-inspired syntax. What I don't have any idea how to do is to send signals to the daemonized process (start), or how to write the daemon to handle and respond to such signals.</p>

<p>Like I said above, I'm looking for general approaches. The only one I can see right now is telling the daemon constantly log everything that might be needed to a file, but I hope there's a less messy way to go about it.</p>

<p><strong>UPDATE:</strong> Wow, a lot of great answers. Thanks so much. I think I'll look at both Pyro and the web.py/Werkzeug approaches, since Twisted is a little more than I want to bite off at this point. The next conceptual challenge, I suppose, is how to go about talking to my worker threads without hanging them up.</p>

<p>Thanks again.</p>
"
656987,4786,2009-03-18T04:41:21Z,8,"Tired of ASP.NET, which of the following should I learn and why?","<p>Which of the following technology is easy to learn and fun for developing a website? If you could only pick one which would it be and why</p>

<ul>
<li>Clojure/Compojure+Ring/Moustache+Ring</li>
<li>Groovy/Grails </li>
<li>Python/Django </li>
<li>Ruby/Rails</li>
<li>Turbogear</li>
<li>Cappuccino or Sproutcore</li>
<li>Javascript/jQuery</li>
</ul>
"
657100,26143,2009-03-18T05:47:08Z,4,Where can i get free GSM libraries/components for delphi or python?,"<p>Where can i get good free GSM libraries for <strong>Delphi</strong> or <strong>Python</strong>? Libraries i can use to send and receive sms's on my application?</p>

<p>Gath</p>
"
657186,1630,2009-03-18T06:44:30Z,15,Python: Prevent fileinput from adding newline characters,"<p>I am using a Python script to <strong>find and replace</strong> certain strings in text files of a given directory. I am using the <code>fileinput</code> module to ease the find-and-replace operation, i.e., the file is read, text replaced and written back to the same file.</p>

<p>The code looks as follows:</p>

<pre><code>import fileinput
def fixFile(fileName):
    # Open file for in-place replace
    for line in fileinput.FileInput(fileName, inplace=1):
        line = line.replace(""findStr"", ""replaceStr"")
        print line  # Put back line into file
</code></pre>

<p>The problem is that the written files have:</p>

<ol>
<li>One blank line inserted after <em>every</em> line.</li>
<li>Ctrl-M character at the end of <em>every</em> line.</li>
</ol>

<p>How do I prevent these extra appendages from getting inserted into the files?</p>
"
657473,79395,2009-03-18T09:08:57Z,0,How to access Yahoo Enterprise Web Services using Python SOAPpy?,"<p>I have a PHP script which works and i need to write the same in Python but SOAPpy generates a slightly different request and i'm not sure how to fix it so the server likes it.</p>

<p>The request generated by php script looks like this:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;
&lt;SOAP-ENV:Envelope
xmlns:SOAP-ENV=""http://schemas.xmlsoap.org/soap/envelope/""
xmlns:ns1=""http://marketing.ews.yahooapis.com/V4""
&gt;
&lt;SOAP-ENV:Header&gt;
&lt;ns1:username&gt;*****&lt;/ns1:username&gt;
&lt;ns1:password&gt;*****&lt;/ns1:password&gt;
&lt;ns1:masterAccountID&gt;*****&lt;/ns1:masterAccountID&gt;
&lt;ns1:accountID&gt;6674262970&lt;/ns1:accountID&gt;
&lt;ns1:license&gt;*****&lt;/ns1:license&gt;
&lt;/SOAP-ENV:Header&gt;
&lt;SOAP-ENV:Body&gt;
&lt;ns1:getCampaignsByAccountID&gt;
&lt;ns1:accountID&gt;6674262970&lt;/ns1:accountID&gt;
&lt;ns1:includeDeleted&gt;false&lt;/ns1:includeDeleted&gt;
&lt;/ns1:getCampaignsByAccountID&gt;
&lt;/SOAP-ENV:Body&gt;
&lt;/SOAP-ENV:Envelope&gt;
</code></pre>

<p>When trying to make the same using SOAPPy i get this request:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;
&lt;SOAP-ENV:Envelope
SOAP-ENV:encodingStyle=""http://schemas.xmlsoap.org/soap/encoding/""
xmlns:xsi=""http://www.w3.org/1999/XMLSchema-instance""
xmlns:SOAP-ENV=""http://schemas.xmlsoap.org/soap/envelope/""
xmlns:xsd=""http://www.w3.org/1999/XMLSchema""
&gt;
&lt;SOAP-ENV:Header&gt;
&lt;username xsi:type=""xsd:string""&gt;*****&lt;/username&gt;
&lt;masterAccountID xsi:type=""xsd:string""&gt;*****&lt;/masterAccountID&gt;
&lt;license xsi:type=""xsd:string""&gt;*****&lt;/license&gt;
&lt;accountID xsi:type=""xsd:integer""&gt;6674262970&lt;/accountID&gt;
&lt;password xsi:type=""xsd:string""&gt;*****&lt;/password&gt;
&lt;/SOAP-ENV:Header&gt;
&lt;SOAP-ENV:Body&gt;
&lt;ns1:getCampaignsByAccountID xmlns:ns1=""http://marketing.ews.yahooapis.com/V4""&gt;
&lt;includeDeleted xsi:type=""xsd:boolean""&gt;False&lt;/includeDeleted&gt;
&lt;accountID xsi:type=""xsd:integer""&gt;6674262970&lt;/accountID&gt;
&lt;/ns1:getCampaignsByAccountID&gt;
&lt;/SOAP-ENV:Body&gt;
&lt;/SOAP-ENV:Envelope&gt;
</code></pre>

<p>A slightly different request but i guess it should work but i get an error from the server: ""Account ID specified in the </p>

<p>header does not match the one specified in the parameter.""</p>

<p>But they do match!</p>

<p>The only thing i see is some difference in namespaces, but i have no idea what to do right now. Please help.</p>
"
657857,11589,2009-03-18T11:26:18Z,7,Python : is it ok returning both boolean and string?,"<p>Original Question</p>

<p>I have made a function which is waiting for a particular string to appear on a serial port, and returns all character read until the string was found, or false if not. This is quite convenient, but I was wondering if it is considered bad practice or not ?</p>

<p>Clarification :</p>

<p>The primary goal is to wait for a <strong>particular</strong> string to appear in a given amount of time. Except for IO error, the possible outcome is True (the string did appear) or False
The secondary goal is to get the entire output, because there might be information that I would like to parse for before the actual answer that is looked for. I thought may be I could combine the primary and secondary goal in one return value.</p>

<pre><code>def MyFunc(s, timeout) :
    test = get_some_input(timeout)
    if test.endswith(s)
        return test
    else
        return False
</code></pre>

<p>Edit : Another proposed answer is to raise an exception. I don't think it is a good idea, because the timeout is an expected behaviour. I mean, if there is a parameter for specifying a timeout, then a timeout is a possible outcome, and not an exception.</p>

<p>Edit 2 :
Since I need to store the input, maybe using a class is the right solution. The wait for function has a clear return value, yet the entire string that was read until timeout is also accessible.</p>

<pre><code>class Parser :
        def __init__(self, sport_name):
                self.currentMsg = ''
                self.ser = serial.Serial(sport_name, 115200)
        def WaitFor(self, s, timeOut=None):
                self.ser.timeout = timeOut
                self.currentMsg = ''
                while self.currentMsg.endswith(s) != True :
                        # should add a try catch here
                        c=self.ser.read()
                        if c != '' :
                               self.currentMsg += c
                        else :
                                print 'timeout waiting for ' + s
                                return False
                return True
</code></pre>
"
657868,18909,2009-03-18T11:30:35Z,2,How do I find the modules that are available for import from within a package?,"<p>Is there a way of knowing which modules are available to import from inside a package?</p>
"
658403,78426,2009-03-18T14:12:02Z,42,How would you implement a basic event-loop?,"<p>If you have worked with gui toolkits, you know that there is a event-loop/main-loop that should be executed after everything is done, and that will keep the application alive and responsive to different events.  For example, for Qt, you would do this in main():</p>

<pre><code>int main() {
    QApplication app(argc, argv);
    // init code
    return app.exec();
}
</code></pre>

<p>Which in this case, app.exec() is the application's main-loop.</p>

<p>The obvious way to implement this kind of loop would be:</p>

<pre><code>void exec() {
    while (1) {
        process_events(); // create a thread for each new event (possibly?)
    }
}
</code></pre>

<p>But this caps the CPU to 100% and is practicaly useless.  Now, how can I implement such an event loop that is responsive without eating the CPU altogether?</p>

<p>Answers are appreciated in Python and/or C++.  Thanks.</p>

<p>Footnote:  For the sake of learning, I will implement my own signals/slots, and I would use those to generate custom events (e.g. <code>go_forward_event(steps)</code>).  But if you know how I can use system events manually, I would like to know about that too.</p>
"
658763,50522,2009-03-18T15:27:21Z,44,How do I suppress scientific notation in Python?,"<p>Here's my code:</p>

<pre><code>x = 1.0
y = 100000.0    
print x/y
</code></pre>

<p>My quotient displays as <code>1.00000e-05</code></p>

<p>Is there any way to suppress scientific notation and make it display as
<code>0.00001</code>? How to convert the scientific notation into <code>float</code>. </p>

<p>Thanks in advance.<br>
This feels somewhat ridiculous to ask but I haven't figured out
a way to do it yet.  I'm going to use the result as a string.</p>
"
658879,76293,2009-03-18T15:52:48Z,8,Linking to Python import library in Visual Studio 2005,"<p>I have a C++ application that has embedded Python. I'm building with Visual Studio 2005. When I try to link to python26.lib, I get a number of unresolved symbols, all of which begin with ""__imp"":</p>

<p>error LNK2019: unresolved external symbol __imp__Py_Initialize referenced in function _main</p>

<p>python26.lib is an import library (installed by the Python 2.6 installer). What do I have to do to resolve these symbols? They do exist in the import library (dumpbin /all shows them). Thanks.</p>
"
658888,NA,2009-03-18T15:54:39Z,0,pinging mysql using mysql alchemy and python,"<p>how do i ping mysql using mysql alchemy and python?</p>
"
658939,305,2009-03-18T16:10:57Z,6,"Python equivalent to ""php -s""","<p>As you may or may not know, you can generate a color syntax-higlighted HTML file from a PHP source file using <strong>php -s</strong>.</p>

<p>I know about the <a href=""http://code.google.com/p/syntaxhighlighter/"" rel=""nofollow"">syntaxhighlighter</a> that Stackoverflow uses and that's not really what I'm looking for.  I'm looking for something will generate HTML output without Javascript.</p>

Does anyone know of something equivalent to <strong><em>php</em></strong> -<strong><em>s</em></strong> for Python?
"
659018,30105,2009-03-18T16:28:03Z,4,Accessing Microsoft Automation Objects from Python,"<p>I have a set of macros that I have turned into an add-in in excel.  The macros allow me to interact with another program that has what are called Microsoft Automation Objects that provide some control over what the other program does.  For example, I have a filter tool in the add-in that filters the list provided by the other program to match a list in the Excel workbook.  This is slow though.  I might have fifty thousand lines in the other program and want to filter out all of the lines that don't match a list of three thousand lines in Excel.  This type of matching takes about 30-40 minutes.  I have begun wondering if there is way to do this with Python instead since I suspect the matching process could be done in seconds.</p>

<p>Edited:</p>

<p>Thanks- Based on the suggestion to look at Hammond's book I found out a number of resources.  However, though I am still exploring it looks like many of these are old.  For example, Hammond's book was published in 2000, which means the writing was finished almost a decade ago.  Correction I just found the package called PyWin32 with a 2/2009 build.  </p>

<p>This should get me started.  Thanks</p>
"
659415,79564,2009-03-18T17:51:50Z,4,Python sequence naming convention,"<p>Since there is no explicit typing in python, I want to be able to make the difference between sequences and non-sequences using a naming convention. I have been programming with python for a little while now, and I still haven't found any logical/practical way to name sequences. Of course, I went through the famous <a href=""http://www.python.org/dev/peps/pep-0008/"" rel=""nofollow"">PEP8</a>, and made some research on google, and it seems that the accepted convention is to add the letter ""s"" at the end of the variable name.</p>

<p>Let's assume we have a sequence of ""weight values"", therefore the variable name for the sequence should be <em>weights</em>. So far that's fine, but there will be cases where some word ends with ""s"" and happen to be the more logical way to name a variable which is not a sequence. Or let's say you have sequences of weights themselves stored into a sequence. The ""s"" naming convention would name the variable <em>weightss</em>, which is ugly. I am sure there is be a better naming convention for sequences.</p>

<p>What naming convention for sequences would you advise?</p>
"
659575,46411,2009-03-18T18:37:52Z,1,What's the correct way to add extra find-links to easy_install when called as a function?,"<p>I need to call easy_install as a function to install some Python eggs from a bunch of servers. Precisely what I install and where I get it from is determined at run-time: For example which servers I use depends on the geographic location of the computer.</p>

<p>Since I cannot guarantee that any single server will always be available, it has been decided that my script needs to check a number of servers. Some locations have prohibitive web-filtering so I need to check a UNC path. Other locations require me to check a mix, as in this example:</p>

<pre><code>myargs = ['-vv', '-m', '-a', '-f', '//filesrver/eggs http://webserver1/python_eggs  http://webserver2/python_eggs, 'myproject==trunk-99']
setuptools.command.easy_install.main( myargs )
</code></pre>

<p>It seems to work just fine when I do not provide a find-links option (-f) (in this case it just picks up the defaults from distutils.cfg), when I try to specify an additional find-links the option all I get is:</p>

<pre><code>Traceback (most recent call last):
  File
""D:\workspace\pythonscripts_trunk\javapy_egg\Scripts\test_javapy.py"",
line 20, in ?
result = pyproxy.requireEgg( eggspec , True, hosts )
File
""d:\workspace\pythonscripts_trunk\javapy_egg\src\calyon\javapy\pyproxy.py"", line 141, in requireEgg
pkg_resources.require(eggname)
File ""d:\python24\lib\site-packages\setuptools-0.6c9-py2.4.egg\pkg_resources.
py"", line 626, in require
needed = self.resolve(parse_requirements(requirements))
File ""d:\python24\lib\site-packages\setuptools-0.6c9-py2.4.egg\pkg_resources.py"", line 524, in resolve
raise DistributionNotFound(req)  # XXX put more info here
pkg_resources.DistributionNotFound: myproject==trunk-99
</code></pre>

<p>Can somebody confirm the correct way to do this? For example do I use
Windows or UNIX slashes in the arguments? What character must be used to seperate
multiple URLs? </p>

<p>I'm using setuptools 0.6c9 on Windows32 </p>
"
659737,79596,2009-03-18T19:24:04Z,4,Python: How to add RSA padding?,"<p>I've been looking at most python crypto libraries, I've decided to use either PyCrypto or M2Crypto.<br />
I've discarded ezPyCrypto because it only supports MD5 for signing and Keyczar because it's not mature enough.</p>

<p>So I've read that RSA is vulnerable to several attacks if the to-be-encrypted text (or signature hash) is not properly padded.<br />
What does it mean?<br />
Neither PyCrypto or M2Crypto mention anything about this and google didn't find anything relevant. Do these libraries automatically add the paddign? How can one tell?</p>

<p>If the answer to the above is no, what is considered proper padding?</p>
"
659832,5616,2009-03-18T19:45:58Z,10,Reversing Django URLs With Extra Options,"<p>Suppose I have a URLconf like below, and <code>'foo'</code> and <code>'bar'</code> are valid values for <code>page_slug</code>.</p>

<pre><code>urlpatterns = patterns('',
    (r'^page/(?P&lt;page_slug&gt;.*)/', 'myapp.views.someview'),
)
</code></pre>

<p>Then, I could reconstruct the URLs using the below, right?</p>

<pre><code>&gt;&gt;&gt; from django.core.urlresolvers import reverse
&gt;&gt;&gt; reverse('myapp.views.someview', kwargs={'page_slug': 'foo'})
'/page/foo/'
&gt;&gt;&gt; reverse('myapp.views.someview', kwargs={'page_slug': 'bar'})
'/page/bar/'
</code></pre>

<p>But what if I change my URLconf to this?</p>

<pre><code>urlpatterns = patterns('',
    (r'^foo-direct/', 'myapp.views.someview', {'page_slug': 'foo'}),
    (r'^my-bar-page/', 'myapp.views.someview', {'page_slug': 'bar'}),
)
</code></pre>

<p>I expected this result:</p>

<pre><code>&gt;&gt;&gt; from django.core.urlresolvers import reverse
&gt;&gt;&gt; reverse('myapp.views.someview', kwargs={'page_slug': 'foo'})
'/foo-direct/'
&gt;&gt;&gt; reverse('myapp.views.someview', kwargs={'page_slug': 'bar'})
'/my-bar-page/'
</code></pre>

<p>However, this throws a <code>NoReverseMatch</code> exception. I suspect I'm trying to do something impossible. Any suggestions on a saner way to accomplish what I want?</p>

<p>Named URLs aren't an option, since I don't want other apps that link to these to need to know about the specifics of the URL structure (encapsulation and all that).</p>
"
659847,16316,2009-03-18T19:51:17Z,2,Checking file attributes in python,"<p>I'd like to check the archive bit for each file in a directory using python. So far i've got the following but i can't get it to work properly. The idea of the script is to be able to see all the files that have the archive bit on.</p>

<p>Thanks</p>

<pre><code># -*- coding: latin-1 -*-
import os , win32file, win32con
from time import *
start = clock()

ext = [ '.txt' , '.doc' ]

def fileattributeisset(filename, fileattr):
    return bool(win32file.GetFileAttributes(filename) &amp; fileattr)

for root, dirs, files in os.walk('d:\\Pruebas'):
    print (""root"", root)    
    print (""dirs"", dirs)
    print (""files"", files)
    for i in files:
        if i[ - 4:] in ext: 
            print('...', root, '\\', i, end=' ')
            fattrs = win32file.GetFileAttributes(i)
            if fattrs &amp; win32con.FILE_ATTRIBUTE_ARCHIVE:
                print('A isSet',fattrs)
        #print( fileattributeisset(i, win32con.FILE_ATTRIBUTE_ARCHIVE)) 
    print ('####')
</code></pre>

<p>EDIT: all files appear to have the archive bit on, doing 'attrib' shows that all files have no attribute bits on.</p>
"
659865,13055,2009-03-18T19:58:46Z,56,Python multiprocessing: sharing a large read-only object between processes?,"<p>Do child processes spawned via <a href=""http://docs.python.org/library/multiprocessing.html"">multiprocessing</a> share objects created earlier in the program?</p>

<p>I have the following setup:</p>

<pre><code>do_some_processing(filename):
    for line in file(filename):
        if line.split(',')[0] in big_lookup_object:
            # something here

if __name__ == '__main__':
    big_lookup_object = marshal.load('file.bin')
    pool = Pool(processes=4)
    print pool.map(do_some_processing, glob.glob('*.data'))
</code></pre>

<p>I'm loading some big object into memory, then creating a pool of workers that need to make use of that big object. The big object is accessed read-only, I don't need to pass modifications of it between processes.</p>

<p>My question is: is the big object loaded into shared memory, as it would be if I spawned a process in unix/c, or does each process load its own copy of the big object? </p>

<p>Update: to clarify further - big_lookup_object is a shared lookup object. I don't need to split that up and process it separately. I need to keep a single copy of it. The work that I need to split it is reading lots of other large files and looking up the items in those large files against the lookup object.</p>

<p>Further update: database is a fine solution, memcached might be a better solution, and file on disk (shelve or dbm) might be even better. In this question I was particularly interested in an in memory solution. For the final solution I'll be using hadoop, but I wanted to see if I can have a local in-memory version as well.</p>
"
660057,14311,2009-03-18T20:54:38Z,0,.NET Framework equivalent of Python's imghdr.what function,"<p>Does .NET Framework have a function similar to Python's imghdr.what function to determine what type of image a file (or stream) is? I can't find anything.</p>
"
660059,62871,2009-03-18T20:54:54Z,7,How to manage a CPU intensive process on a server,"<p>I need to run a CPU- and memory-heavy Python script (analyzing and altering a lengthy WAV file) as a background process on my web server (a VPS), between HTTP requests.</p>

<p>The script takes up to 20 seconds to run and I am concerned about the performance on my server. Is there a good approach to either lower the priority of the process, periodically cede control to the OS, or otherwise protect the performance of my modest server?</p>
"
660160,51816,2009-03-18T21:21:30Z,4,How do I list all tga files in a directory (non recursive) in Python?,"<p>How do I list all tga files in a directory (non recursive) in Python?</p>
"
660727,13055,2009-03-19T01:11:03Z,6,Python: decorator specific argument (unrelated to wrapped function)?,"<p>I'm looking to build a caching decorator that given a function caches the result of the function to a location specified in the decoration. Something like this:</p>

<pre><code>@cacheable('/path/to/cache/file')
def my_function(a, b, c):
    return 'something'
</code></pre>

<p>The argument to the decorator is completely separate from the argument to the function it's wrapping. I've looked at quite a few examples but I'm not quite getting how to do this - is it possible to have an argument for the decorator that's unrelated to and not passed to the wrapped function?</p>
"
660773,71097,2009-03-19T01:38:37Z,0,Python Django loop logic: Error says 'int' is not iterable - check my syntax?,"<pre><code>return sum(jobrecord.get_cost() or 0 
    for jobrecord in self.project.jobrecord_set.filter(
        date__lte=date,
        date__gte=self.start_date) or 0)
</code></pre>
"
660836,26592,2009-03-19T02:11:26Z,9,Django-way of specifying channel image in rss feed,"<p>What is the ""django-way"" of specifying channel image in rss feed? I can do it manually by rolling my own xml, but was looking for a proper way of doing it.</p>

<p><b>Edit</b>
dobrych's solution is not quite applicable here because I was asking specifically about RSS not Atom feeds</p>
"
660898,8482,2009-03-19T02:48:29Z,9,django : using admin datepicker,"<p>I'm trying to use the admin datepicker in my own django forms.</p>

<p>Roughly following the discussion here : <a href=""http://www.mail-archive.com/django-users@googlegroups.com/msg72138.html"">http://www.mail-archive.com/django-users@googlegroups.com/msg72138.html</a></p>

<p>I've</p>

<p>a) In my forms.py included the line</p>

<pre><code>from django.contrib.admin import widgets
</code></pre>

<p>b) and used the widget like this :</p>

<pre><code>date = forms.DateTimeField(widget=widgets.AdminDateWidget())
</code></pre>

<p>c) And in my actual template I've added :</p>

<pre><code>{{form.media}}
</code></pre>

<p>To include the js / styles etc.</p>

<p>However, when I try to view my form I get no nice widget; just an ordinary text box. And the Firefox javascript error console shows me :</p>

<p>gettext is not defined in calendar.js (line 26)</p>

<p>and </p>

<p>addEvent is not defined in DateTimeShortcuts.js (line 254)</p>

<p>Any suggestions? Is this a bug in Django's own javascript library?</p>

<p>Update : Basically, need to include the core and (or fake) the i18lization</p>

<p>Update 2 : Carl points out this is pretty much a duplicate of <a href=""http://stackoverflow.com/questions/38601/using-django-time-date-widgets-in-custom-form/38916#38916"">http://stackoverflow.com/questions/38601/using-django-time-date-widgets-in-custom-form/38916#38916</a> (although starting from a different position)</p>
"
660961,13203,2009-03-19T03:26:56Z,17,Overriding python threading.Thread.run(),"<p>Given the documentation at <a href=""http://docs.python.org/library/threading.html"">http://docs.python.org/library/threading.html</a> which states for Thread.run():</p>

<blockquote>
  <p>You may override this method in a subclass. The standard run() method invokes the callable object passed to the object’s constructor as the target argument, if any, with sequential and keyword arguments taken from the args and kwargs arguments, respectively.</p>
</blockquote>

<p>I have constructed the following code:</p>

<pre><code>class DestinationThread(threading.Thread):
    def run(self, name, config):
        print 'In thread'

thread = DestinationThread(args = (destination_name, destination_config))
thread.start()
</code></pre>

<p>But when I execute it, I receive the following error:</p>

<pre><code>Exception in thread Thread-1:
Traceback (most recent call last):
  File ""/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/threading.py"", line 522, in __bootstrap_inner
    self.run()
TypeError: run() takes exactly 3 arguments (1 given)
</code></pre>

<p>It seems I am missing something obvious, but the various examples I have seen work with this methodology.  Ultimately I am trying to just pass the string and dictionary into the thread, if the Constructor is not the right way, but rather to make a new function to set the values prior to starting the thread, I am open to that.  </p>

<p>Any suggestions on how to best accomplish this?</p>
"
661017,NA,2009-03-19T04:00:33Z,18,Access to errno from Python?,"<p>I am stuck with a fairly complex Python module that does not return useful error codes (it actually fails disturbingly silently). However, the underlying C library it calls sets errno.</p>

<p>Normally errno comes in over OSError attributes, but since I don't have an exception, I can't get at it.</p>

<p>Using ctypes, libc.errno doesn't work because errno is a macro in GNU libc. Python 2.6 has some affordances but Debian still uses Python 2.5. Inserting a C module into my pure Python program just to read errno disgusts me.</p>

<p>Is there some way to access errno? A Linux-only solution is fine, since the library being wrapped is Linux-only. I also don't have to worry about threads, as I'm only running one thread during the time in which this can fail.</p>
"
661034,35364,2009-03-19T04:12:05Z,5,Can I make pdb start debugging right away?,"<p>I want to debug a python project</p>

<p>The problem is, I don't know where to set a break point,</p>

<p>what I want to do, is be able to call a method </p>

<pre><code>SomeClass( some_ctor_arguments ).some_method()`
</code></pre>

<p>and have the debugger be fired right away</p>

<p>How do I do that?</p>

<p>I tried <code>pdb.run( string_command )</code> but it doesn't seem to work right</p>

<pre><code>&gt;&gt;&gt; import pdb
&gt;&gt;&gt; import &lt;some-package&gt;
&gt;&gt;&gt; pdb.run( .... )
&gt; &lt;string&gt;(1)&lt;module&gt;()
(Pdb) s
NameError: ""name '&lt;some-package&gt;' is not defined""
</code></pre>
"
661084,NA,2009-03-19T04:39:50Z,20,Security of Python's eval() on untrusted strings?,"<p>If I am evaluating a Python string using eval(), and have a class like:</p>

<pre><code>class Foo(object):
    a = 3
    def bar(self, x): return x + a
</code></pre>

<p>What are the security risks if I do not trust the string? In particular:</p>

<ol>
<li>Is <code>eval(string, {""f"": Foo()}, {})</code> unsafe? That is, can you reach os or sys or something unsafe from a Foo instance?</li>
<li>Is <code>eval(string, {}, {})</code> unsafe? That is, can I reach os or sys entirely from builtins like len and list?</li>
<li>Is there a way to make builtins not present at all in the eval context?</li>
</ol>

<p>There are some unsafe strings like ""[0] * 100000000"" I don't care about, because at worst they slow/stop the program. I am primarily concerned about protecting user data external to the program.</p>

<p>Obviously, <code>eval(string)</code> without custom dictionaries is unsafe in most cases.</p>
"
661584,45629,2009-03-19T09:44:26Z,6,Is there a parser/way available to parser Wikipedia dump files using Python?,"<p>I have a project where I collect all the Wikipedia articles belonging to a particular category, pull out the dump from Wikipedia, and put it into our db. </p>

<p>So I should be parsing the Wikipedia dump file to get the stuff done. Do we have an efficient parser to do this job? I am a python developer. So I prefer any parser in python. If not suggest one and I will try to write a port of it in python and contribute it to the web, so other persons make use of it or at least try it. </p>

<p>So all I want is a python parser to parse Wikipedia dump files. I started writing a manual parser which parses each node and gets the stuff done.</p>
"
661603,18909,2009-03-19T09:51:24Z,57,How do I know if a generator is empty from the start?,"<p>Is there a simple way of testing if the generator has no items, like peek, hasNext, isEmpty, something along those lines?</p>
"
661826,3233,2009-03-19T11:20:44Z,2,Can I use a single file as a buffer? I.e. write to and read from at same time,"<p>I want to have an application writing out information at the same time that a monitor is reading it. The application is ""embedded"" (and on Win32 XP) and so has restricted memory and I/O functionality.</p>

<p>The simplest way I can think to do this is by writing the data to a buffer file from the application, and then read the same file using the monitor application. The writer application is C++, and the reader is currently Python on Win32 XP.</p>

<p>Are there libraries to do this? Has anyone seen examples of this?</p>

<p>I don't want to have to use a database as I don't want to link to a database library in the applcation. I.e. don't have space and may not be supported on the embedded platform.</p>

<p>Another way to do this is over a network connection, but I figure files are the simplest solution.</p>
"
662463,79071,2009-03-19T14:40:44Z,1,write a table with empty cells based on dictionary of values,"<p>I have this view in my app:</p>

<pre><code>def context_detail(request, context_id):
c = get_object_or_404(Context, pk=context_id)
scs = SherdCount.objects.filter(assemblage__context=c).exclude(count__isnull=True)
total = sum(sc.count for sc in scs)
table = []
forms = []
for a in c.assemblage_set.all():
    for sc in a.sherdcount_set.all():
        forms.append(sc.typename)
forms_set = set(forms)
for a in c.assemblage_set.all():
    diko = {}
    diko['assemblage'] = a
    for f in forms_set:
        for sc in a.sherdcount_set.all():
            if f == sc.typename:
                diko[f] = sc.count
            else:
                diko[f] = 0
    table.append(diko)
return render_to_response('tesi/context_detail.html',
    {'context': c, 'total': total, 'sherdcounts': scs, 'table': table, 'forms': forms_set},
    context_instance=RequestContext(request))
</code></pre>

<p>The aim of the two for loops would be that of creating a list of dictionaries that holds values of SherdCount.count with reference to the SherdCount.typename foreign key (and I was able to do that, even if the current code is a bit messed up).</p>

<p>The ""table"" list should contain something like this:</p>

<pre><code>[{&lt;Type: Hayes 61B&gt;: 0, &lt;Type: Hayes 99A-B&gt;: 0, &lt;Type: Hayes 105&gt;: 0, &lt;Type: Hayes 104A&gt;: 0, &lt;Type: Hayes 104B&gt;: 0, &lt;Type: Hayes 103&gt;: 0, &lt;Type: Hayes 91&gt;: 0, &lt;Type: Hayes 91A&gt;: 0, &lt;Type: Hayes 91B&gt;: 0, &lt;Type: Hayes 91C&gt;: 0, &lt;Type: Hayes 91D&gt;: 0, &lt;Type: Hayes 85B&gt;: 0, &lt;Type: Hayes 82A&gt;: 0, &lt;Type: Hayes 76&gt;: 0, &lt;Type: Hayes 73&gt;: 0, &lt;Type: Hayes 72&gt;: 0, &lt;Type: Hayes 70&gt;: 0, &lt;Type: Hayes 68&gt;: 0, &lt;Type: Hayes 67&gt;: 0, &lt;Type: Hayes 66&gt;: 0, &lt;Type: Hayes 62A&gt;: 0, &lt;Type: Hayes 80B&gt;: 0, &lt;Type: Hayes 59&gt;: 0, &lt;Type: Hayes 61A&gt;: 0, &lt;Type: Hayes 91A-B&gt;: 0, &lt;Type: Hayes 58&gt;: 0, &lt;Type: Hayes 50&gt;: 0, &lt;Type: Hayes 53&gt;: 0, &lt;Type: Hayes 71&gt;: 0, &lt;Type: Hayes 60&gt;: 0, &lt;Type: Hayes 80A&gt;: 0, &lt;Type: Hayes Style A2-3&gt;: 0, &lt;Type: Hayes Style B&gt;: 0, &lt;Type: Hayes Style E1&gt;: 1, 'assemblage': &lt;Assemblage: Brescia, Santa Giulia : non periodizzato&gt;}, {&lt;Type: Hayes 61B&gt;: 0, &lt;Type: Hayes 99A-B&gt;: 0, &lt;Type: Hayes 105&gt;: 0, &lt;Type: Hayes 104A&gt;: 0, &lt;Type: Hayes 104B&gt;: 0, &lt;Type: Hayes 103&gt;: 0, &lt;Type: Hayes 91&gt;: 0, &lt;Type: Hayes 91A&gt;: 0, &lt;Type: Hayes 91B&gt;: 0, &lt;Type: Hayes 91C&gt;: 0, &lt;Type: Hayes 91D&gt;: 0, &lt;Type: Hayes 85B&gt;: 0, &lt;Type: Hayes 82A&gt;: 0, &lt;Type: Hayes 76&gt;: 0, &lt;Type: Hayes 73&gt;: 0, &lt;Type: Hayes 72&gt;: 0, &lt;Type: Hayes 70&gt;: 0, &lt;Type: Hayes 68&gt;: 0, &lt;Type: Hayes 67&gt;: 0, &lt;Type: Hayes 66&gt;: 0, &lt;Type: Hayes 62A&gt;: 0, &lt;Type: Hayes 80B&gt;: 0, &lt;Type: Hayes 59&gt;: 0, &lt;Type: Hayes 61A&gt;: 0, &lt;Type: Hayes 91A-B&gt;: 0, &lt;Type: Hayes 58&gt;: 0, &lt;Type: Hayes 50&gt;: 0, &lt;Type: Hayes 53&gt;: 0, &lt;Type: Hayes 71&gt;: 0, &lt;Type: Hayes 60&gt;: 0, &lt;Type: Hayes 80A&gt;: 0, &lt;Type: Hayes Style A2-3&gt;: 0, &lt;Type: Hayes Style B&gt;: 3, &lt;Type: Hayes Style E1&gt;: 0, 'assemblage': &lt;Assemblage: Brescia, Santa Giulia : Periodo IIIA&gt;},
</code></pre>

<p>But the many 0 values are obviously wrong. even though there might be some zeros (the empty cells I was referring to)</p>

<p>The question is, once I have built such a list, how do I create a table in the template with all the cells (e.g. 1 row per Type and 1 column per Context, with SherdCount at cells) ?</p>

<p>Steko</p>
"
662624,21906,2009-03-19T15:23:11Z,6,Preserve order of attributes when modifying with minidom,"<p>Is there a way I can preserve the original order of attributes when processing XML with minidom?</p>

<p>Say I have: <code>&lt;color red=""255"" green=""255"" blue=""233"" /&gt;</code>
when I modify this with minidom the attributes are rearranged alphabetically blue, green, and red. I'd like to preserve the original order.</p>

<p>I am processing the file by looping through the elements returned by <code>elements = doc.getElementsByTagName('color')</code> and then I do assignments like this <code>e.attributes[""red""].value = ""233""</code>.</p>
"
662638,13009,2009-03-19T15:27:18Z,6,"How to Alter Photographed Document to Look ""Scanned""","<p>How can I <a href=""http://www.techcrunch.com/2009/03/17/jotnot-turns-your-iphones-camera-into-a-document-scanner/"" rel=""nofollow"">do this</a> in Python/PIL? I.e., given the four points of an offset rectangle (a photographed document), make it look flat on as if it were scanned.  Is there a simple algorithm for it?</p>

<p>Also, are there any other manipulations I should do to make it look more ""scan-like""?</p>

<p>I want to make a simple version of this program for myself in Python.</p>
"
662641,26,2009-03-19T15:27:59Z,2,Help with subprocess.call on a Windows machine,"<p>I am trying to modify a <a href=""http://trac.edgewall.org"" rel=""nofollow"">trac</a> plugin that allows downloading of wiki pages to word documents. pagetodoc.py throws an exception on this line:</p>

<pre><code># Call the subprocess using convenience method
retval = subprocess.call(command, shell=True, stderr=errptr, stdout=outptr, close_fds = True)
</code></pre>

<p>Saying that <code>close_fds</code> is not supported on Windows. The process seems to create some temporary files in C:\Windows\Temp. I tried removing the <code>close_fds</code> parameter, but then files the subprocess writes to stay open indefinitely. An exception is then thrown when the files are written to later. This is my first time working with Python, and I am not familiar with the libraries. It is even more difficult since most people probably code on Unix machines. Any ideas how I can rework this code?</p>

<p>Thanks!</p>
"
662762,NA,2009-03-19T15:52:10Z,3,Can I write Python web application for Windows and Linux platforms at the same time?,"<p>Can I write web application that I can host on Windows(IIS web server) and Linux (Apache or lighttpd) without any changes?</p>

<p>CGI? Maybe something new? WSGI | FastCGI ? </p>
"
663171,51816,2009-03-19T17:29:41Z,990,Is there a way to substring a string in Python?,"<p>Is there a way to substring a string in Python, to get a new string from the 3rd character to the end of the string?</p>

<p>Maybe like <code>myString[2:end]</code>?</p>

<p>If leaving the second part means 'till the end', if you leave the first part, does it start from the start?</p>
"
663490,NA,2009-03-19T18:40:44Z,4,Python: How do you login to a page and view the resulting page in a browser?,"<p>I've been googling around for quite some time now and can't seem to get this to work. A lot of my searches have pointed me to finding similar problems but they all seem to be related to cookie grabbing/storing. I think I've set that up properly, but when I try to open the 'hidden' page, it keeps bringing me back to the login page saying my session has expired.</p>

<pre><code>import urllib, urllib2, cookielib, webbrowser

username = 'userhere'
password = 'passwordhere'
url = 'http://example.com'
webbrowser.open(url, new=1, autoraise=1)
cj = cookielib.CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
login_data = urllib.urlencode({'username' : username, 'j_password' : password})
opener.open('http://example.com', login_data)
resp = opener.open('http://example.com/afterlogin')
print resp
webbrowser.open(url, new=1, autoraise=1)
</code></pre>
"
663603,13202,2009-03-19T19:12:19Z,4,Looking for knowledge base integrated with bug tracker in python,"<p>Ok, I am not sure I want to use Request Tracker and RTFM, which is a possible solution.</p>

<p>I'd like to have a knowledge base with my bug tracker/todo list , so that when
I solve a problem, I would have a record of its resolution for myself or others later.</p>

<p>What python based solutions are available?</p>
"
664118,5342,2009-03-19T21:19:58Z,39,What's the difference between dict() and {}?,"<p>So let's say I wanna make a dictionary. We'll call it <code>d</code>. But there are multiple ways to initialize a dictionary in Python! For example, I could do this:</p>

<pre><code>d = {'hash': 'bang', 'slash': 'dot'}
</code></pre>

<p>Or I could do this:</p>

<pre><code>d = dict(hash='bang', slash='dot')
</code></pre>

<p>Or this, curiously:</p>

<pre><code>d = dict({'hash': 'bang', 'slash': 'dot'})
</code></pre>

<p>Or this:</p>

<pre><code>d = dict([['hash', 'bang'], ['slash', 'dot']])
</code></pre>

<p>And a whole other multitude of ways with the <code>dict()</code> function. So obviously one of the things <code>dict()</code> provides is flexibility in syntax and initialization. But that's not what I'm asking about.</p>

<p>Say I were to make <code>d</code> just an empty dictionary. What goes on behind the scenes of the Python interpreter when I do <code>d = {}</code> versus <code>d = dict()</code>? Is it simply two ways to do the same thing? Does using <code>{}</code> have the <i>additional</i> call of <code>dict()</code>? Does one have (even negligible) more overhead than the other? While the question is really completely unimportant, it's a curiosity I would love to have answered.</p>
"
664219,51816,2009-03-19T21:53:47Z,2,Uninitialized value in Python?,"<p>What's the uninitialized value in Python, so I can compare if something is initialized, like:</p>

<pre><code>val

if val == undefined ?
</code></pre>

<p>EDIT: added a pseudo keyword.</p>

<p>EDIT2: I think I didn't make it clear, but say val is already there, but nothing is assigned to it.</p>

<h3>Duplicate: <a href=""http://stackoverflow.com/questions/664294/just-declaring-a-variable-in-python"">Just declaring a variable in Python?</a></h3>
"
664294,51816,2009-03-19T22:21:53Z,113,Is it possible only to declare a variable without assigning any value in Python?,"<p>Is it possible to declare a variable in Python, like so?:</p>

<pre><code>var
</code></pre>

<p>so that it initialized to None? It seems like Python allows this, but as soon as you access it, it crashes. Is this possible? If not, why?</p>

<p>EDIT: I want to do this for cases like this:</p>

<pre><code>value

for index in sequence:

   if value == None and conditionMet:
       value = index
       break
</code></pre>

<h3>Duplicate</h3>

<ul>
<li><a href=""http://stackoverflow.com/questions/664219/uninitialized-value-in-python"">Uninitialised value in python</a> (by same author)</li>
<li><a href=""http://stackoverflow.com/questions/571514/are-there-any-declaration-keywords-in-python"">Are there any declaration keywords in Python?</a> (by the same author)</li>
</ul>

<h3>Related</h3>

<ul>
<li><a href=""http://stackoverflow.com/questions/575196/python-variable-scope-and-function-calls"">Python: variable scope and function calls</a></li>
<li><a href=""http://python.net/~goodger/projects/pycon/2007/idiomatic/handout.html#other-languages-have-variables"">Other languages have ""variables""</a></li>
</ul>
"
664372,38254,2009-03-19T22:54:03Z,2,Using norwegian letters æøå in python,"<p>Hello
I'm learning python and PyGTK now, and have created a simple Music Organizer.
<a href=""http://pastebin.com/m2b596852"" rel=""nofollow"">http://pastebin.com/m2b596852</a>
But when it edits songs with the Norwegian letters æ, ø, and å it's just changing them to a weird character.</p>

<p>So is there any good way of opening or encode the names into utf-8 characters?</p>

<h3>Two relevant places from the above code:</h3>

<p>Read info from a file:</p>

<pre><code>def __parse(self, filename):
    ""parse ID3v1.0 tags from MP3 file""
    self.clear()
    self['artist'] = 'Unknown'
    self['title'] = 'Unknown'
    try:
        fsock = open(filename, ""rb"", 0)
        try:
            fsock.seek(-128, 2)
            tagdata = fsock.read(128)
        finally:
            fsock.close()
        if tagdata[:3] == 'TAG':
            for tag, (start, end, parseFunc) in self.tagDataMap.items():
                self[tag] = parseFunc(tagdata[start:end])
    except IOError:
        pass
</code></pre>

<p>Print to sys.stdout info:</p>

<pre><code>for info in files:
    try:
        os.rename(info['name'], 
            os.path.join(self.dir, info['artist'])+' - '+info['title']+'.mp3')

        print 'From: '+ info['name'].replace(os.path.join(self.dir, ''), '')
        print 'To:   '+ info['artist'] +' - '+info['title']+'.mp3'
        print
        self.progressbar.set_fraction(i/num)
        self.progressbar.set_text('File %d of %d' % (i, num))
        i += 1
    except IOError:
        print 'Rename fail'
</code></pre>
"
664444,72344,2009-03-19T23:25:03Z,2,"How to recover a broken python ""cPickle"" dump?","<p>I am using <code>rss2email</code> for converting a number of RSS feeds into mail for easier consumption. That is, I <em>was</em> using it because it broke in a horrible way today: On every run, it only gives me this backtrace:</p>

<pre><code>Traceback (most recent call last):
  File ""/usr/share/rss2email/rss2email.py"", line 740, in &lt;module&gt;
    elif action == ""list"": list()
  File ""/usr/share/rss2email/rss2email.py"", line 681, in list
    feeds, feedfileObject = load(lock=0)
  File ""/usr/share/rss2email/rss2email.py"", line 422, in load
    feeds = pickle.load(feedfileObject)
TypeError: (""'str' object is not callable"", 'sxOYAAuyzSx0WqN3BVPjE+6pgPU', ((2009, 3, 19, 1, 19, 31, 3, 78, 0), {}))
</code></pre>

<p>The only helpful fact that I have been able to construct from this backtrace is that the file <code>~/.rss2email/feeds.dat</code> in which <code>rss2email</code> keeps all its configuration and runtime state is somehow broken. Apparently, <code>rss2email</code> reads its state and dumps it back using <code>cPickle</code> on every run.</p>

<p>I have even found the line containing that <code>'sxOYAAuyzSx0WqN3BVPjE+6pgPU'</code>string mentioned above in the giant (>12MB) <code>feeds.dat</code> file. To my untrained eye, the dump does not appear to be truncated or otherwise damaged.</p>

<p>What approaches could I try in order to reconstruct the file?</p>

<p>The Python version is 2.5.4 on a Debian/unstable system.</p>

<p><strong>EDIT</strong></p>

<p>Peter Gibson and J.F. Sebastian have suggested directly loading from the
pickle file and I had tried that before. Apparently, a <code>Feed</code> class
that is defined in <code>rss2email.py</code> is needed, so here's my script:</p>

<pre><code>#!/usr/bin/python

import sys
# import pickle
import cPickle as pickle
sys.path.insert(0,""/usr/share/rss2email"")
from rss2email import Feed

feedfile = open(""feeds.dat"", 'rb')
feeds = pickle.load(feedfile)
</code></pre>

<p>The ""plain"" pickle variant produces the following traceback:</p>

<pre><code>Traceback (most recent call last):
  File ""./r2e-rescue.py"", line 8, in &lt;module&gt;
    feeds = pickle.load(feedfile)
  File ""/usr/lib/python2.5/pickle.py"", line 1370, in load
    return Unpickler(file).load()
  File ""/usr/lib/python2.5/pickle.py"", line 858, in load
    dispatch[key](self)
  File ""/usr/lib/python2.5/pickle.py"", line 1133, in load_reduce
    value = func(*args)
TypeError: 'str' object is not callable
</code></pre>

<p>The <code>cPickle</code> variant produces essentially the same thing as calling
<code>r2e</code> itself:</p>

<pre><code>Traceback (most recent call last):
  File ""./r2e-rescue.py"", line 10, in &lt;module&gt;
    feeds = pickle.load(feedfile)
TypeError: (""'str' object is not callable"", 'sxOYAAuyzSx0WqN3BVPjE+6pgPU', ((2009, 3, 19, 1, 19, 31, 3, 78, 0), {}))
</code></pre>

<p><strong>EDIT 2</strong></p>

<p>Following J.F. Sebastian's suggestion around putting ""printf
debugging"" into <code>Feed.__setstate__</code> into my test script, these are the
last few lines before Python bails out.</p>

<pre><code>          u'http:/com/news.ars/post/20080924-everyone-declares-victory-in-smutfree-wireless-broadband-test.html': u'http:/com/news.ars/post/20080924-everyone-declares-victory-in-smutfree-wireless-broadband-test.html'},
 'to': None,
 'url': 'http://arstechnica.com/'}
Traceback (most recent call last):
  File ""./r2e-rescue.py"", line 23, in ?
    feeds = pickle.load(feedfile)
TypeError: (""'str' object is not callable"", 'sxOYAAuyzSx0WqN3BVPjE+6pgPU', ((2009, 3, 19, 1, 19, 31, 3, 78, 0), {}))
</code></pre>

<p>The same thing happens on a Debian/etch box using python 2.4.4-2.</p>
"
664760,13009,2009-03-20T02:05:35Z,3,How to Make an Image Uniform Brightness (using Python/PIL),"<p>I want to take an image of a document that was photographed and make it look like it was scanned.  Since a scanner will put a constant light source over the whole document, I want to achieve that effect on a photo of a document.  The desired effect would be to remove any shadows or areas of low light (or at least make them less noticeable) and have the whole photo be fairly bright.</p>

<p>My first thought would be to locate the brightest part of the target image, and them make the whole image that brightness.  Assuming that's even the right algorithm, how would I do it in PIL?  Is there a get brightness method? etc?</p>

<p>(This is a follow-up to <a href=""http://stackoverflow.com/questions/662638/how-to-alter-photographed-document-to-look-scanned"">this earlier question</a>.)</p>
"
664898,46914,2009-03-20T03:37:34Z,5,Hierarchy traversal and comparison modules for Python?,"<p>I deal with a lot of hierarchies in my day to day development.  File systems, nested DAG nodes in Autodesk Maya, etc.</p>

<p>I'm wondering, are there any good modules for Python specifically designed to traverse and compare hierarchies of objects?</p>

<p>Of particular interest would be ways to do 'fuzzy' comparisons between two <em>nearly</em> identical hierarchies.  Some of the reasons for doing this would be for matching two node hierarchies in Maya from two different characters in order to transfer animation from one to the other.</p>

<p>Based on what I've been reading, I'd probably need something with a name threshold (which I could build myself) for comparing how close two node names are to each other. I'd then need a way to optionally ignore the order that child nodes appear in the hierarchy.  Lastly, I'd need to deal with a depth threshold, in cases where a node may have been slightly moved up or down the hierarchy.</p>
"
664937,43004,2009-03-20T03:59:12Z,3,"How can I improve this ""register"" view in Django?","<p>I've got a Django-based site that allows users to register (but requires an admin to approve the account before they can view certain parts of the site). I'm basing it off of <code>django.contrib.auth</code>. I require users to register with an email address from a certain domain name, so I've overridden the <code>UserCreationForm</code>'s <code>save()</code> and <code>clean_email()</code> methods.</p>

<p>My registration page uses the following view. I'm interested in hearing about how I might improve this view—code improvements or process improvements (or anything else, really).</p>

<pre><code>def register(request):
    if request.method == 'POST':
        form = UserCreationForm(request.POST)

        if form.is_valid():
            message = None

            form.save()

            username = form.cleaned_data['username']
            password = form.cleaned_data['password1']

            user = authenticate(username=username, password=password)

            first_name = form.cleaned_data['first_name']
            last_name = form.cleaned_data['last_name']
            email = user.email

            # If valid new user account
            if (user is not None) and (user.is_active):
                login(request, user)
                message = ""&lt;strong&gt;Congratulations!&lt;/strong&gt; You have been registered.""

                # Send emails
                try:
                    # Admin email
                    pk = None
                    try: pk = User.objects.filter(username=username)[0].pk
                    except: pass

                    admin_email_template = loader.get_template('accounts/email_notify_admin_of_registration.txt')
                    admin_email_context = Context({
                        'first_name': first_name,
                        'last_name': last_name,
                        'username': username,
                        'email': email,
                        'pk': pk,
                    })
                    admin_email_body = admin_email_template.render(admin_email_context)
                    mail_admins(""New User Registration"", admin_email_body)

                    # User email
                    user_email_template = loader.get_template('accounts/email_registration_success.txt')
                    user_email_context = Context({
                        'first_name': form.cleaned_data['first_name'],
                        'username': username,
                        'password': password,
                    })
                    user_email_body = user_email_template.render(user_email_context)
                    user.email_user(""Successfully Registered at example.com"", user_email_body)
                except:
                    message = ""There was an error sending you the confirmation email. You should still be able to login normally.""
            else:
                message = ""There was an error automatically logging you in. Try &lt;a href=\""/login/\""&gt;logging in&lt;/a&gt; manually.""

            # Display success page
            return render_to_response('accounts/register_success.html', {
                    'username': username,
                    'message': message,
                },
                context_instance=RequestContext(request)
            )
    else: # If not POST
        form = UserCreationForm()

    return render_to_response('accounts/register.html', {
            'form': form,
        },
        context_instance=RequestContext(request)
    )
</code></pre>
"
664991,62699,2009-03-20T04:31:03Z,4,box drawing in python,"<p>Platform: WinXP SP2, python 2.5.4.3. (activestate distribution)</p>

<p>Has anyone succeded in writing out <a href=""http://en.wikipedia.org/wiki/Box%5Fdrawing%5Fcharacters"" rel=""nofollow"">box drawing characters</a> in python?
When I try to run this:</p>

<pre><code>print u'\u2500'
print u'\u2501'
print u'\u2502'
print u'\u2503'
print u'\u2504'
</code></pre>

<p>All tips appreciated. What am I doing wrong ? Does python support full unicode ? Is it possible at all to get those characters to print.</p>

<h3>Related</h3>

<ul>
<li><a href=""http://stackoverflow.com/questions/637396/default-encoding-for-python-for-stderr"">Default encoding for python for stderr?</a></li>
</ul>
"
665061,13055,2009-03-20T05:12:27Z,9,Python: defaultdict became unmarshallable object in 2.6?,"<p>Did defaultdict's become not marshal'able as of Python 2.6? The following works under 2.5, fails under 2.6 with ""ValueError: unmarshallable object"" on OS X 1.5.6, python-2.6.1-macosx2008-12-06.dmg from python.org:</p>

<pre><code>from collections import defaultdict
import marshal
dd = defaultdict(list)
marshal.dump(dd, file('/tmp/junk.bin','wb') )
</code></pre>
"
665093,35364,2009-03-20T05:39:41Z,1,Python: Running all unit tests inside a package,"<p>I'm trying to hack my through an open source python project (namely: jinja2), </p>

<p>When I say ""I'm hacking my way through"", I mean I don't really know what I'm doing, so I want to run unittests whenever I change something to make sure I'm not breaking something major!</p>

<p>There's a package full of unit tests (if you want to have a look, <a href=""http://dev.pocoo.org/projects/jinja/browser/tests"" rel=""nofollow"">it's here</a>). Basically it's a folder full of python files with the name ""test_xxxxxx.py""</p>

<p>How do I run all of these tests in one command?</p>
"
665502,NA,2009-03-20T09:43:04Z,1,Status of shift and caps lock in Python,"<p>I'm writing a TkInter application using Python 2.5 and I need to find out the status of the caps lock and shift keys (either true or false). I've searched all over the net but cant find a solution.</p>
"
665536,74170,2009-03-20T09:55:15Z,4,How do I go about writing a program to send and receive sms using python?,"<p>I have looked all over the net for a good library to use in sending and receiving sms's using python but all in vain!</p>

<p>Are there GSM libraries for python out there?</p>
"
665566,58737,2009-03-20T10:10:19Z,11,Redirect command line results to a tkinter GUI,"<p>I have created a program that prints results on command line.
(It is server and it prints log on command line.)</p>

<p>Now, I want to see the same result to GUI .</p>

<p><strong>How can I redirect command line results to GUI?</strong></p>

<p>Please, suggest a trick to easily transform console application to simple GUI.</p>

<p>Note that it should work on Linux and Windows.</p>
"
665652,11722,2009-03-20T10:48:18Z,4,Extract array from list in python,"<p>If I have a list like this:</p>

<p><code>&gt;&gt;&gt; data = [(1,2),(40,2),(9,80)]</code></p>

<p>how can I extract the the two lists [1,40,9] and [2,2,80] ? Of course I can iterate and extract the numbers myself but I guess there is a better way ?</p>
"
665848,8482,2009-03-20T12:02:10Z,3,"Best continuously updated resource about python web ""plumbing""","<p>I'm a programmer in Python who works on web-applications. I know a fair bit about the application level. But not so much about the underlying ""plumbing"" which I find myself having to configure or debug.</p>

<p>I'm thinking of everything from using memcached to flup, fcgi, WSGI etc.</p>

<p>When looking for information about these, online, Google typically delivers older-documents (eg. tutorials from before 2007), fragments of problems that may or may not have been resolved etc.</p>

<p>Are there any good comprehensive and up-to-date resources to learn about how to put together a modern, high-performance server? One that explains both principles of the architecture and the actual packages?</p>
"
665942,4786,2009-03-20T12:32:19Z,4,How to write a function that takes a string and prints the letters in decreasing order of frequency?,"<p>I got this far:</p>

<pre><code>def most_frequent(string):
    d = dict()
    for key in string:
        if key not in d:
            d[key] = 1
        else:
            d[key] += 1
    return d

print most_frequent('aabbbc')
</code></pre>

<p>Returning:</p>

<pre><code>{'a': 2, 'c': 1, 'b': 3}
</code></pre>

<p>Now I need to:</p>

<ol>
<li>reverse the pair</li>
<li>sort by number by decreasing order</li>
<li>only print the letters out</li>
</ol>

<p>Should I convert this dictionary to tuples or list?</p>
"
666022,2183,2009-03-20T12:56:21Z,43,What errors/exceptions do I need to handle with urllib2.Request / urlopen?,"<p>I have the following code to do a postback to a remote URL:</p>

<pre><code>request = urllib2.Request('http://www.example.com', postBackData, { 'User-Agent' : 'My User Agent' })

try: 
    response = urllib2.urlopen(request)
except urllib2.HTTPError, e:
    checksLogger.error('HTTPError = ' + str(e.code))
except urllib2.URLError, e:
    checksLogger.error('URLError = ' + str(e.reason))
except httplib.HTTPException, e:
    checksLogger.error('HTTPException')
</code></pre>

<p>The postBackData is created using a dictionary encoded using urllib.urlencode. checksLogger is a logger using <a href=""http://docs.python.org/library/logging.html"">logging</a>.</p>

<p>I have had a problem where this code runs when the remote server is down and the code exits (this is on customer servers so I don't know what the exit stack dump / error is at this time). I'm assuming this is because there is an exception and/or error that is not being handled. So are there any other exceptions that might be triggered that I'm not handling above?</p>
"
666148,76480,2009-03-20T13:30:08Z,10,PyObjC + Python 3.0 Questions,"<p>By default, a Cocoa-Python application uses the default Python runtime which is version 2.5. How can I configure my Xcode project so that it would use the newer Python 3.0 runtime? I tried replacing the Python.framework included in the project with the newer version but it did not work.</p>

<p>And another thing, are PyObjc modules compatible with the new version of Python?</p>
"
666216,3355,2009-03-20T13:48:00Z,29,Decorator classes in Python,"<p>I want to construct classes for use as decorators with the following principles intact:</p>

<ol>
<li>It should be possible to stack multiple such class decorators on top off 1 function.</li>
<li>The resulting function name pointer should be indistinguishable from the same function without a decorator, save maybe for just which type/class it is.</li>
<li>Ordering off the decorators should not be relevant unless actually mandated by the decorators. Ie. independent decorators could be applied in any order.</li>
</ol>

<p>This is for a Django project, and the specific case I am working on now the method needs 2 decorators, and to appear as a normal python function:</p>

<pre><code>@AccessCheck
@AutoTemplate
def view(request, item_id) {}
</code></pre>

<p>@AutoTemplate changes the function so that instead of returning a HttpResponse, it just returns a dictionary for use in the context. A RequestContext is used, and the template name is inferred from the method name and module.</p>

<p>@AccessCheck adds additional checks on the user based on the item_id.</p>

<p>I am guessing it's just to get the constructor right and copy the appropriate attributes, but which attributes are these?</p>

<p>The following decorator won't work as I describe:</p>

<pre><code>class NullDecl (object):
    def __init__ (self, func):
        self.func = func
    def __call__ (self, * args):
        return self.func (*args)
</code></pre>

<p>As demonstrated by the following code:</p>

<pre><code>@NullDecl
@NullDecl
def decorated():
    pass

def pure():
    pass

# results in set(['func_closure', 'func_dict', '__get__', 'func_name',
# 'func_defaults', '__name__', 'func_code', 'func_doc', 'func_globals'])
print set(dir(pure)) - set(dir(decorated));
</code></pre>

<p>Additionally, try and add ""print func.<strong>name</strong>"" in the NullDecl constructor, and it will work for the first decorator, but not the second - as name will be missing.</p>

<p>Refined <strong>eduffy</strong>'s answer a bit, and it seems to work pretty well:</p>

<pre><code>class NullDecl (object):
    def __init__ (self, func):
        self.func = func
        for n in set(dir(func)) - set(dir(self)):
            setattr(self, n, getattr(func, n))

    def __call__ (self, * args):
        return self.func (*args)
    def __repr__(self):
        return self.func
</code></pre>
"
666417,48391,2009-03-20T14:36:31Z,3,Unable to decode unicode string in Python 2.4,"<p>This is in python 2.4. Here is my situation. I pull a string from a database, and it contains an umlauted 'o' (\xf6). At this point if I run type(value) it returns str. I then attempt to run .decode('utf-8'), and I get an error ('utf8' codec can't decode bytes in position 1-4). </p>

<p>Really my goal here is just to successfully make type(value) return unicode. I found an <a href=""http://stackoverflow.com/questions/447107/whats-the-difference-between-encode-decode-python-2-x"">earlier question</a>
that had some useful information, but the example from the picked answer doesn't seem to run for me. Is there something I am doing wrong here?</p>

<p>Here is some code to reproduce:</p>

<pre><code>Name = 'w\xc3\xb6rner'.decode('utf-8')
file.write('Name: %s - %s\n' %(Name, type(Name)))
</code></pre>

<p>I never actually get to the write statement, because it fails on the first statement. </p>

<p>Thank you for your help.</p>

<p><strong>Edit:</strong></p>

<p>I verified that the DB's charset is utf8. So in my code to reproduce I changed '\xf6' to '\xc3\xb6', and the failure still occurs. Is there a difference between 'utf-8' and 'utf8'?</p>

<p>The tip on using codecs to write to a file is handy (I'll definitely use it), but in this scenario I am only writing to a log file for debugging purposes.</p>
"
666712,NA,2009-03-20T15:43:31Z,2,qt design issue,"<p>i'm trying to design interface like this one
<a href=""http://www.softpedia.com/screenshots/FlashFXP_2.png"" rel=""nofollow"">http://www.softpedia.com/screenshots/FlashFXP_2.png</a></p>

<p>i'm using the QT design and programming with python
well on the left it's a treeWidget
but what is on the right side ? as everytime i change the cursor on the tree
all widgets replace...</p>

<p>thanks :p</p>
"
666724,NA,2009-03-20T15:44:37Z,0,How to get whole text of an Element in xml.minidom?,"<p>I want to get the whole text of an Element to parse some xhtml:</p>

<pre><code>&lt;div id='asd'&gt;
  &lt;pre&gt;skdsk&lt;/pre&gt;
&lt;/div&gt;
</code></pre>

<p>begin E = div element on the above example, I want to get </p>

<pre><code>&lt;pre&gt;skdsk&lt;/pre&gt;
</code></pre>

<p>How?</p>
"
667016,34088,2009-03-20T16:54:22Z,0,How can I blue-box an image?,"<p>I have a scanned image which is basically black print on some weird (non-gray) background, say, green or yellow (think old paper).</p>

<p>How can I get rid of the green/yellow and receive a gray picture with as much of the gray structure of the original image intact? I.e. I want to keep the gray around the letters for the anti-aliasing effect or for gray areas but I want to turn anything which even is remotely green/yellow to become pure white?</p>

<p>Note that the background is by no means homogeneous; so the algorithm should be able accept a color and an error margin or a color range.</p>

<p>For bonus points: How can I automatically determine the background color?</p>

<p>I'd like to use Python with the Imaging Library or maybe ImageMagick.</p>

<p>Note: I'm aware of packages like <a href=""http://unpaper.berlios.de/"" rel=""nofollow"">unpaper</a>. My problem with unpaper is that it produces B&amp;W images which probably look good for an OCR software but not for the human eye.</p>
"
667166,18909,2009-03-20T17:33:12Z,3,Finding the static attributes of a class in Python,"<p>This is an unusual question, but I'd like to dynamically generate the <code>__slots__</code> attribute of the class based on whatever attributes I happened to have added to the class.</p>

<p>For example, if I have a class:</p>

<pre><code>class A(object):
    one = 1
    two = 2

    __slots__ = ['one', 'two']
</code></pre>

<p>I'd like to do this dynamically rather than specifying the arguments by hand, how would I do this?</p>
"
667359,26592,2009-03-20T18:22:30Z,5,Crunching xml with python,"<p>I need to remove white spaces between xml tags, e.g. if the original xml looks like:</p>

<pre><code>&lt;node1&gt;
    &lt;node2&gt;
        &lt;node3&gt;foo&lt;/node3&gt;
    &lt;/node2&gt;
&lt;/node1&gt;
</code></pre>

<p>I'd like the end-result to be <em>crunched</em> down to single line:</p>

<pre><code>&lt;node1&gt;&lt;node2&gt;&lt;node3&gt;foo&lt;/node3&gt;&lt;/node2&gt;&lt;/node1&gt;
</code></pre>

<p>Please note that I will not have control over the xml structure, so the solution should be generic enough to be able to handle any valid xml. Also the xml might contain CDATA blocks, which I'd need to exclude from this <em>crunching</em> and leave them as-is.</p>

<p>I have couple of ideas so far: (1) parse the xml as text and look for start and end of tags &lt; and > (2) another approach is to load the xml document and go node-by-node and print out a <em>new</em> document by concatenating the tags.</p>

<p>I think either method would work, but I'd rather not reinvent the wheel here, so may be there is a python library that already does something like this? If not, then any issues/pitfalls to be aware of when rolling out my own <em>cruncher</em>? Any recommendations?</p>

<p><b>EDIT</b>
Thank you all for answers/suggestions, both Triptych's and Van Gale's solutions work for me and do exactly what I want. Wish I could accept both answers.</p>
"
667500,47606,2009-03-20T19:01:14Z,0,How to debug a weird threaded open fifo issue?,"<p>A web service is configured to expose some of its data when receiving a USR1 signal. The signal will be sent by a xinetd server when it receives a request from a remote client, e.g. nc myserver 50666. When the web server receives USR1 signal, it opens a dedicated fifo pipe, writes its data to the pipe, and then close the pipe. In the meantime, the xinetd server reads the pipe and feeds to the remote client.</p>

<p>In most of times, they work nicely but occasionally, for some reason, the client will receive dup records. From the log, it seems like the pipe did not get closed properly and the cache is leftover, so when next time it serves, both previous and current are sent to the client. The problem is its not constantly happening when trying to reproduce, unluckily, I wasn't able to reproduce once. </p>

<p>The following are the simple snippets to demonstrate the process:</p>

<p>The web server: (webserver.py)</p>

<pre><code>def SendStream(data, pipe):
  try:
    for i in data:
      pipe.write(i + '\n') 
      pipe.flush()
  finally:
      pipe.close()

def Serve():
  threading.Thread(target=SendStream, args=(data, pipe)).start()
</code></pre>

<p>The xinetd.d server: (spitter.py)</p>

<pre><code>def Serve():
  if not os.path.exists(PIPE_FILE):
    os.mkfifo(PIPE_FILE)
  os.kill(server_pid, signal.SIGUSR1)
  for i in open(PIPE_FILE):
    print i,
</code></pre>

<p>So what exactly happened to cause the dup? How to trigger it? The current fix I unlink the pipe file and recreate it every time to avoid any leftovers but I don't know if that's a proper solution.</p>
"
667508,62673,2009-03-20T19:02:27Z,93,What's a good rate limiting algorithm?,"<p>I could use some pseudo-code, or better, Python.  I am trying to implement a rate-limiting queue for a Python IRC bot, and it partially works, but if someone triggers less messages than the limit (e.g., rate limit is 5 messages per 8 seconds, and the person triggers only 4), and the next trigger is over the 8 seconds (e.g., 16 seconds later), the bot sends the message, but the queue becomes full and the bot waits 8 seconds, even though it's not needed since the 8 second period has lapsed.</p>
"
667510,1367022,2009-03-20T19:02:48Z,1,Is there a way to manually register a user with a py-transport server-side?,"<p>I'm trying to write some scripts to migrate my users to ejabberd, but 
the only way that's been suggested for me to register a user with a 
transport is to have them use their client and discover the service. 
Certainly there is a way, right? </p>
"
667540,NA,2009-03-20T19:11:34Z,13,Full command line as it was typed,"<p>I want to get the full command line as it was typed. </p>

<p>This: </p>

<p><code>"" "".join(sys.argv[:])</code> </p>

<p>doesn't work here (deletes double quotes). Also I prefer not to rejoin something that was parsed and splited.</p>

<p>Any ideas? </p>

<p>Thank you in advance.</p>
"
667640,76322,2009-03-20T19:31:50Z,27,How to tell if a connection is dead in python,"<p>I want my python application to be able to tell when the socket on the other side has been dropped. Is there a method for this?</p>
"
667760,50453,2009-03-20T20:05:24Z,2,How do I create a D-Bus service that dynamically creates multiple objects?,"<p>I'm new to D-Bus (and to Python, double whammy!) and I am trying to figure out the best way to do something that was discussed in the tutorial.</p>

<blockquote>
  <p>However, a text editor application
  could as easily own multiple bus names
  (for example, org.kde.KWrite in
  addition to generic TextEditor), have
  multiple objects (maybe
  /org/kde/documents/4352 where the
  number changes according to the
  document), and each object could
  implement multiple interfaces, such as
  org.freedesktop.DBus.Introspectable,
  org.freedesktop.BasicTextField,
  org.kde.RichTextDocument.</p>
</blockquote>

<p>For example, say I want to create a wrapper around <code>flickrapi</code> such that the service can expose a handful of Flickr API methods (say, <code>urls_lookupGroup()</code>). This is relatively straightforward if I want to assume that the service will always be specifying the same API key and that the auth information will be the same for everyone using the service.</p>

<p>Especially in the latter case, I cannot really assume this will be true.</p>

<p>Based on the documentation quoted above, I am assuming there should be something like this:</p>

<pre><code># Get the connection proxy object.
flickrConnectionService = bus.get_object(""com.example.FlickrService"",
                                         ""/Connection"")

# Ask the connection object to connect, the return value would be
# maybe something like ""/connection/5512"" ...
flickrObjectPath = flickrConnectionService.connect(""MY_APP_API_KEY"",
                                                   ""MY_APP_API_SECRET"",
                                                   flickrUsername)

# Get the service proxy object.
flickrService = bus.get_object(""com.example.FlickrService"",
                               flickrObjectPath);

# As the flickr service object to get group information.
groupInfo = flickrService.getFlickrGroupInfo('s3a-belltown')
</code></pre>

<p>So, my questions:</p>

<p>1) Is this how this should be handled?</p>

<p>2) If so, how will the service know when the client is done? Is there a way to detect if the current client has broken connection so that the service can cleanup its dynamically created objects? Also, how would I create the individual objects in the first place?</p>

<p>3) If this is not how this should be handled, what are some other suggestions for accomplishing something similar?</p>

<p>I've read through a number of D-Bus tutorials and various documentation and about the closest I've come to seeing what I am looking for is what I quoted above. However, none of the examples look to actually do anything like this so I am not sure how to proceed.</p>
"
668226,31610,2009-03-20T22:24:32Z,2,Can someone explain Gtk2 packing?,"<p>I need to use Gtk2 for a project. I will be using python/ruby for it. The problem is that packing seems kind of mystical to me. I tried using a VBox so that I could have the following widgets in my window ( in the following order ):</p>

<ul>
<li>menubar</li>
<li>toolbar</li>
<li>text view/editor control</li>
</ul>

<p>I've managed to ""guess"" my way with <code>pack_start</code> and get the layout I need, but I'd like to be able to understand it. The documentation at <a href=""http://ruby-gnome2.sourceforge.jp/"" rel=""nofollow"">Ruby Gtk2</a> seems way too unintuitive (and so is the python one, since it's the same, only written for python), could you shed some light?</p>

<p>Also, <code>set_size_request</code> isn't always working when I add a component with <code>pack_start</code>. Why is that ? </p>
"
668240,1226967,2009-03-20T22:31:43Z,1,Alternatives to ffmpeg as a cli tools for video still extraction?,"<p>I need to extract stills from video files. Currently I am using ffmpeg, but I am looking for a simpler tool and for a tool that my collegues can just install. No need to compile it from a svn checkout.</p>

<p>Any hints? A python interface would be nice.</p>
"
668257,13055,2009-03-20T22:40:42Z,9,Python: simple async download of url content?,"<p>I have a web.py server that responds to various user requests. One of these requests involves downloading and analyzing a series of web pages. </p>

<p>Is there a simple way to setup an async / callback based url download mechanism in web.py? Low resource usage is particularly important as each user initiated request could result in download of multiple pages.</p>

<p>The flow would look like:</p>

<p>User request -> web.py -> Download 10 pages in parallel or asynchronously -> Analyze contents, return results</p>

<p>I recognize that Twisted would be a nice way to do this, but I'm already in web.py so I'm particularly interested in something that can fit within web.py .</p>
"
668350,23977,2009-03-20T23:25:41Z,4,Programmatic login and use of non-api-supported Google services,"<p>Google provides APIs for a number of their services and bindings for several languages. However, not everything is supported. So this question comes from my incomplete understanding of things like wget, curl, and the various web programming libraries.</p>

<ol>
<li><p>How can I authenticate programmatically to Google?</p></li>
<li><p>Is it possible to leverage the existing APIs to gain access to the unsupported parts of Google?</p></li>
</ol>

<p>Once I have authenticated, how do I use that to access my restricted pages? It seems like the API could be used do the login and get a token, but I don't understand <i>what I'm supposed to do next</i> to fetch a restricted webpage.</p>

<p>Specifically, I am playing around with Android and want to write a script to grab my app usage stats from the Android Market once or twice a day so I can make pretty charts. My most likely target is python, but code in any language illustrating non-API use of Google's services would be helpful. Thanks folks.</p>
"
668359,NA,2009-03-20T23:33:33Z,8,Unicode fonts in PyGame,"<p>How can I display Chinese characters in PyGame? And what's a good free/libre font to use for this purpose?</p>
"
668591,29180,2009-03-21T02:08:30Z,2,Why is Beautiful Soup truncating this page?,"<p>I am trying to pull at list of resource/database names and IDs from a listing of resources that my school library has subscriptions to.  There are pages listing the different resources, and I can use urllib2 to get the pages, but when I pass the page to BeautifulSoup, it truncates its tree just before the end of the entry for the first resource in the list.  The problem seems to be in image link used to add the resource to a search set.  This is where things get cut off, here's the HTML:</p>

<pre><code>&lt;a href=""http://www2.lib.myschool.edu:7017/V/ACDYFUAMVRFJRN4PV8CIL7RUPC9QXMQT8SFV2DVDSBA5GBJCTT-45899?func=find-db-add-res&amp;amp;resource=XYZ00618&amp;amp;z122_key=000000000&amp;amp;function-in=www_v_find_db_0"" onclick='javascript:addToz122(""XYZ00618"",""000000000"",""myImageXYZ00618"",""http://discover.lib.myschool.edu:8331/V/ACDYFUAMVRFJRN4PV8CIL7RUPC9QXMQT8SFV2DVDSBA5GBJCTT-45900"");return false;'&gt;
    &lt;img name=""myImageXYZ00618"" id=""myImageXYZ00618"" src=""http://www2.lib.myschool.edu:7017/INS01/icon_eng/v-add_favorite.png"" title=""Add to My Sets"" alt=""Add to My Sets"" border=""0""&gt;
&lt;/a&gt;
</code></pre>

<p>And here is my python code:</p>

<pre><code>import urllib2
from BeautifulSoup import BeautifulSoup
page = urllib2.urlopen(""http://discover.lib.myschool.edu:8331/V?func=find-db-1-title&amp;mode=titles&amp;scan_start=latp&amp;scan_utf=D&amp;azlist=Y&amp;restricted=all"")
print BeautifulSoup(page).prettify
</code></pre>

<p>In BeautifulSoup's version, the opening <code>&lt;a href...&gt;</code> shows up, but the <code>&lt;img&gt;</code> doesn't, and the <code>&lt;a&gt;</code> is immediately closed, as are the rest of the open tags, all the way to <code>&lt;/html&gt;</code>.</p>

<p>The only distinguishing trait I see for these ""add to sets"" images is that they are the only ones to have name and id attributes.  I can't see why that would cause BeautifulSoup to stop parsing immediately, though.</p>

<p>Note:  I am almost entirely new to Python, but seem to be understanding it all right.</p>

<p>Thank you for your help!</p>
"
668971,58737,2009-03-21T08:23:00Z,1,Problem Extending Python(Linking Error )?,"<p>I have installed Python 3k(C:\Python30) and Visual Studio Professional Edition 2008.</p>

<p>I'm studying <strong><a href=""http://en.wikibooks.org/wiki/Python%5FProgramming/Extending%5Fwith%5FC"" rel=""nofollow"">this</a>.</strong></p>

<p>Here is a problem:</p>

<pre><code>C:\hello&gt;dir
 Volume in drive C has no label.
 Volume Serial Number is 309E-14FB

 Directory of C:\hello

03/21/2009  01:15 AM    &lt;DIR&gt;          .
03/21/2009  01:15 AM    &lt;DIR&gt;          ..
03/21/2009  01:14 AM               481 hellomodule.c
               1 File(s)            481 bytes
               2 Dir(s)  10,640,642,048 bytes free


C:\hello&gt;cl /LD hellomodule.c /Ic:\Python30\include c:\Python30\libs\python30.lib /link/out:hello.
dll
Microsoft (R) 32-bit C/C++ Optimizing Compiler Version 15.00.21022.08 for 80x86
Copyright (C) Microsoft Corporation.  All rights reserved.

hellomodule.c
c:\hello\hellomodule.c(26) : warning C4716: 'inithello' : must return a value
Microsoft (R) Incremental Linker Version 9.00.21022.08
Copyright (C) Microsoft Corporation.  All rights reserved.

/out:hellomodule.dll
/dll
/implib:hellomodule.lib
/out:hello.dll
hellomodule.obj
c:\Python30\libs\python30.lib
   Creating library hellomodule.lib and object hellomodule.exp
hellomodule.obj : error LNK2019: unresolved external symbol _Py_InitModule referenced in function
_inithello
hello.dll : fatal error LNK1120: 1 unresolved externals

C:\hello&gt;
</code></pre>

<p>What is the problem? Please, guide me.</p>
"
669043,2172,2009-03-21T09:37:24Z,1,Why GQL Query does not match?,"<p>What I want to do is build some mini cms which hold pages with a uri.</p>

<p>The last route in my urls.py points to a function in my views.py, which checks in the datastore if there's a page available with the same uri of the current request, and if so show the page.</p>

<p>I have a model: </p>

<pre><code>class Page(db.Model): 
  title = db.StringProperty(required=True) 
  uri = db.TextProperty(required=True) 
  created = db.DateTimeProperty(auto_now_add=True) 
  modified = db.DateTimeProperty(auto_now=True) 
  content = db.TextProperty()
</code></pre>

<p>In my view: </p>

<pre><code>def show(request): 
  page = db.GqlQuery('SELECT * FROM Page WHERE uri=:uri', uri=request.path).get() 
  if page is None: 
    return http.HttpResponseNotFound() 
  else: 
    return respond(request, 'pages_show', {'content': request.path})
</code></pre>

<p>And I've added an entity with '/work' as uri to the datastore. </p>

<p>Even when request.path is exactly '/work', the query does not return a match. </p>

<p>Thanks for any advice you can give me!</p>

<p>And yes, i'm a python noob, App Engine is perfect to finally learn the language. </p>
"
669152,31610,2009-03-21T11:28:47Z,2,How can I change the display text of a MenuItem in Gtk2?,"<p>I need to change the display text of a MenuItem. Is there any way of doing this without removing the MenuItem and then adding another one with a different text?</p>
"
669770,9567,2009-03-21T18:51:08Z,1,Encoding of string returned by GetUserName(),"<p>How do I get the encoding that is used for the string returned by <code>GetUserName</code> from the win32 API? I'm using pywin32 and it returns an 8-bit string. On my German XP, this string is obviously encoded using Latin-1, but this might not be the case for other Windows installations.</p>

<p>I could use <code>GetUserNameW</code>, but I would have to wrap that myself using ctypes, which I'd like to avoid for now if there is a simpler solution.</p>
"
669903,65326,2009-03-21T20:08:56Z,3,Pagination of Date-Based Generic Views in Django,"<p>I have a pretty simple question. I want to make some date-based generic views on a Django site, but I also want to paginate them. According to the documentation the object_list view has page and paginate_by arguments, but the archive_month view does not. What's the ""right"" way to do it?</p>
"
669932,31676,2009-03-21T20:24:02Z,2,How to create a class that doesn't re-create an object with identical input parameters,"<p>I am trying to create a class that doesn't re-create an object with the same input parameters.  When I try to instantiate a class with the same parameters that were used to create an already-existing object, I just want my new class to return a pointer to the already-created (expensively-created) object.  This is what I have tried so far:</p>

<pre><code>class myobject0(object):
# At first, I didn't realize that even already-instantiated
# objects had their __init__ called again
instances = {}
def __new__(cls,x):
    if x not in cls.instances.keys():
        cls.instances[x] = object.__new__(cls,x)
    return cls.instances[x]
def __init__(self,x):
    print 'doing something expensive'

class myobject1(object):
    # I tried to override the existing object's __init__
    # but it didnt work.
    instances = {}
    def __new__(cls,x):
        if x not in cls.instances.keys():
            cls.instances[x] = object.__new__(cls,x)
        else:
            cls.instances[x].__init__ = lambda x: None
        return cls.instances[x]
    def __init__(self,x):
        print 'doing something expensive'

class myobject2(object):
    # does what I want but is ugly
    instances = {}
    def __new__(cls,x):
        if x not in cls.instances.keys():
            cls.instances[x] = object.__new__(cls,x)
            cls.instances[x]._is_new = 1
        else:
            cls.instances[x]._is_new = 0
        return cls.instances[x]
    def __init__(self,x):
        if self._is_new:
            print 'doing something expensive'
</code></pre>

<p>This is my first venture into overriding <code>__new__</code> and I'm convinced I'm not going about it the right way.  Set me straight, please.</p>
"
670084,2831,2009-03-21T22:02:27Z,1,Partial Upload With storbinary in python,"<p>I've written some python code to download an image using </p>

<pre><code>urllib.urlopen().read()
</code></pre>

<p>and then upload it to an FTP site using </p>

<pre><code>ftplib.FTP().storbinary()
</code></pre>

<p>but I'm having a problem. Sometimes the image file is only partially uploaded, so I get images with the bottom 20% or so cut off. I've checked the locally downloaded version and I have successfully downloaded the entire image, which leads me to believe that it is a problem with storbinary. I believe I am opening and closing all of the files correctly. Does anyone have any clues as to why I'm getting a partial upload with storbinary?</p>

<p><strong>Update:</strong>
When I run through the commands in the Python shell, the upload completes successfully, I don't know why it would be different from when run as a script...</p>
"
670269,54964,2009-03-21T23:55:39Z,0,Unable to find files/folders with permissions 777 by AWK/SED/Python,"<p><strong>Problems</strong></p>

<ol>
<li><p>to get permissions
of each file in every folder</p></li>
<li><p>to find files
which have 777 permissions, and then
print the filenames with their paths
to a list</p></li>
</ol>

<p>We can get permissions for files in one folder by </p>

<pre><code>ls -ls
</code></pre>

<p>I do not know how you can get permissions of each file in every folder effectively.</p>

<p><strong>How can you find files which have permissions 777 by AWK/SED/Python?</strong></p>
"
670398,24059,2009-03-22T01:37:13Z,32,How do I develop against OAuth locally?,"<p>I'm building a Python application that needs to communicate with an OAuth service provider.  The SP requires me to specify a callback URL.  Specifying localhost obviously  won't work.  I'm unable to set up a public facing server.  Any ideas besides paying for server/hosting?  Is this even possible?</p>
"
670442,NA,2009-03-22T02:29:32Z,32,Asynchronous File Upload to Amazon S3 with Django,"<p>I am using this file storage engine to store files to Amazon S3 when they are uploaded:</p>

<p><a href=""http://code.welldev.org/django-storages/wiki/Home"">http://code.welldev.org/django-storages/wiki/Home</a></p>

<p>It takes quite a long time to upload because the file must first be uploaded from client to web server, and then web server to Amazon S3 before a response is returned to the client.</p>

<p>I would like to make the process of sending the file to S3 asynchronous, so the response can be returned to the user much faster.  What is the best way to do this with the file storage engine?</p>

<p>Thanks for your advice!</p>
"
670764,745,2009-03-22T09:40:21Z,10,Line-wrapping problems with IPython shell,"<p>If I have run a long line in IPython, and try and recall it (using the up-arrow) or backspace beyond the start of the current line, it displays incorrectly (all smushed into one line)</p>

<p>For example, in the following session I wrote a long line <code>[1]</code>, entered a somewhat-blank line <code>[2]</code>, then up-arrowed twice to get the <code>print</code> statement on line <code>[3]</code>, and the following happened:</p>

<p><img src=""http://i.stack.imgur.com/jUjhy.png"" alt=""Line wrap issue""></p>

<p>Happens in both iTerm and Terminal.app.. I had a similar problem with regular terminal sessions, which was fixed by properly terminating colour codes, but I'm not sure how to fix it with IPython</p>
"
671323,28388,2009-03-22T17:22:34Z,1,Getting the value of href attributes in all <a> tags on a html file with Python,"<p>I'm building an app in python, and I need to get the URL of all links in one webpage. I already have a function that uses urllib to download the html file from the web, and transform it to a list of strings with readlines().</p>

<p>Currently I have this code that uses regex (I'm not very good at it) to search for links in every line:</p>

<pre><code>for line in lines:
    result = re.match ('/href=""(.*)""/iU', line)
    print result
</code></pre>

<p>This is not working, as it only prints ""None"" for every line in the file, but I'm sure that at least there are 3 links on the file I'm opening.</p>

<p>Can someone give me a hint on this?</p>

<p>Thanks in advance</p>
"
671340,72911,2009-03-22T17:33:05Z,1,QSortFilterProxyModel.mapToSource crashes. No info why,"<p>I have the following code:</p>

<pre><code>proxy_index = self.log_list.filter_proxy_model.createIndex(index, COL_REV)
model_index = self.log_list.filter_proxy_model.mapToSource(proxy_index)
revno = self.log_list.model.data(model_index,QtCore.Qt.DisplayRole)
self.setEditText(revno.toString())
</code></pre>

<p>The code crashed on the second line. There is no exception raised. No trace back. No warnings. How do I fix this?</p>
"
671363,55724,2009-03-22T17:57:45Z,1,unsubscriptable object,"<pre><code>    im = Image.open(teh_file)
    if im:
        colors = im.resize( (1,1), Image.ANTIALIAS).getpixel((0,0)) # simple way to get average color
        red = colors[0] # and so on, some operations on color data
</code></pre>

<p>The problem is, on a few (very few, particulary don't know why those exactly, simple jpegs) I get 'unsubscriptable object' on line ""colors[0]"". Tried:</p>

<pre><code>if colors:
</code></pre>

<p>gets true and goes on. </p>

<pre><code>if len(colors):
</code></pre>

<p>gives 'len() of unsized object'</p>

<ol>
<li>What condition should I apply not to get this exception?</li>
<li>What's the cause of the problem?</li>
</ol>
"
671369,38146,2009-03-22T17:59:50Z,10,Django: specifying a base template by directory,"<p>I'm working on a Django site that has multiple sections and subsections. I'd like to have several depths of template inheritance: a base template for the whole site, one base template for each section that inherits from the root base template, and so on. Here's a simplified version of my desired directory structure:</p>

<pre><code>base.html
section1/
  base.html
section2/
  base.html
section3/
  base.html
</code></pre>

<p>What I would desire is for all the files under <code>section1/</code> to contain something like <code>{% extends ""base.html"" %}</code>, meaning they would extend <code>section1/base.html</code>. <code>section1/base.html</code> would contain something like <code>{% extends ""../base.html"" %}</code>, meaning that it would extend the root-level base file. However, I couldn't find anything in the documentation suggesting this was possible, and I couldn't get Django to distinguish between <code>""../base.html""</code> and <code>""base.html""</code>. (<code>{% extends ""../base.html"" %}</code> throws an error.) I suppose one workaround would be to rename all base files <code>base_SECTIONNAME.html</code>, and update all the files that inherit from them, but I am concerned that this might become difficult to maintain as my site becomes bigger and sections change names, etc. I would prefer a solution that takes advantage of the natural hierarchy specified by directories and subdirectories.</p>

<p>Any ideas?</p>
"
671403,81132,2009-03-22T18:27:48Z,25,Memory efficiency: One large dictionary or a dictionary of smaller dictionaries?,"<p>I'm writing an application in Python (2.6) that requires me to use a dictionary as a data store.</p>

<p>I am curious as to whether or not it is more memory efficient to have one large dictionary, or to break that down into many (much) smaller dictionaries, then have an ""index"" dictionary that contains a reference to all the smaller dictionaries.</p>

<p>I know there is a lot of overhead in general with lists and dictionaries. I read somewhere that python internally allocates enough space that the dictionary/list # of items to the power of 2.</p>

<p>I'm new enough to python that I'm not sure if there are other unexpected internal complexities/suprises like that, that is not apparent to the average user that I should take into consideration.</p>

<p>One of the difficulties is knowing how the power of 2 system counts ""items""? Is each key:pair counted as 1 item? That's seems important to know because if you have a 100 item monolithic dictionary then space 100^2 items would be allocated. If you have 100 single item dictionaries (1 key:pair) then each dictionary would only be allocation 1^2 (aka no extra allocation)?</p>

<p>Any clearly laid out information would be very helpful!</p>
"
671503,19207,2009-03-22T19:36:55Z,7,"How to do ""performance-based"" (benchmark) unit testing in Python","<p>Let's say that I've got my code base to as high a degree of unit test coverage as makes sense. (Beyond a certain point, increasing coverage doesn't have a good ROI.)</p>

<p>Next I want to test performance. To benchmark code to make sure that new commits aren't slowing things down needlessly. I was very intrigued by Safari's <a href=""http://webkit.org/projects/performance/index.html"" rel=""nofollow"">zero tolerance policy</a> for slowdowns from commits. I'm not sure that level of commitment to speed has a good ROI for most projects, but I'd at least like to be alerted that a speed regression has happened, and be able to make a judgment call about it.</p>

<p>Environment is Python on Linux, and a suggestion that was also workable for BASH scripts would make me very happy. (But Python is the main focus.)</p>
"
671542,36131,2009-03-22T20:07:01Z,0,Do you have a copy of Unipath-0.2.0.tar.gz?,"<p>I need a copy of this library installed on my system because my software depends on this library.</p>

<p>Unfortunately, at the moment, it's impossible install it trough easy_install:</p>

<pre><code>andrea@puzzle:~$ sudo easy_install Unipath
[sudo] password for andrea: 
Searching for Unipath
Reading http://pypi.python.org/simple/Unipath/
Reading http://sluggo.scrapping.cc/python/unipath/
Download error: (-2, 'Name or service not known') -- Some packages may not be found!
Reading http://sluggo.scrapping.cc/python/unipath/
Download error: (-2, 'Name or service not known') -- Some packages may not be found!
Best match: Unipath 0.2.0
Downloading http://sluggo.scrapping.cc/python/unipath/Unipath-0.2.0.tar.gz
error: Download error for http://sluggo.scrapping.cc/python/unipath/Unipath-0.2.0.tar.gz: (-2, 'Name or service not known')
</code></pre>

<p>I think that something weird happened on the DNS entry of <code>sluggo.scrapping.cc</code>.
How can I get this library? </p>

<p>I searched for a mirror on google but I didn't find it. 
Do you know if there is a another place from where I can download this library?</p>

<p>Or ... do you have a copy of this library and you can send it to me?</p>
"
671572,6460,2009-03-22T20:31:07Z,10,CL-WHO-like HTML templating for other languages?,"<p>Common Lisp guys have their <a href=""http://www.weitz.de/cl-who/"" rel=""nofollow"">CL-WHO</a>, which makes HTML templating integrated with the ""main"" language thus making the task easier. For those who don't know CL-WHO, it looks like this (example from CL-WHO's webpage):</p>

<pre><code>(with-html-output (*http-stream*)
(:table :border 0 :cellpadding 4
  (loop for i below 25 by 5
     do (htm
         (:tr :align ""right""
          (loop for j from i below (+ i 5)
                do (htm
                    (:td :bgcolor (if (oddp j)
                                    ""pink""
                                    ""green"")
                         (fmt ""~@R"" (1+ j))))))))))
</code></pre>

<p>Do you know any libraries like this for other languages? The one I know about (that mimics CL-WHO) is <a href=""http://breve.twisty-industries.com/"" rel=""nofollow"">Brevé</a> for Python. I'm particularly interested in Perl flavour, but it's interesting how other languages handle integrating HTML into their syntax.</p>
"
671741,81145,2009-03-22T22:49:11Z,7,Is there a Python library that allows to build user interfaces without writing much code?,"<p>I am writing editing front ends in Python since several years now, and I am fed up with micromanaging every UI detail of a window or dialog every single time.</p>

<p>Is there a technology that allows me to, say, specify the relations between a GTK+ Glade-designed interface and the tables and records of an SQLite database to do all the middle man work? It should spare me the work of manually writing event handlers, input evaluators and view updates.</p>

<p>The technologies in question are just examples, but I want to stick with Python as far as possible.</p>
"
672172,NA,2009-03-23T03:46:29Z,119,Using python map and other functional tools,"<p>This is quite n00bish, but I'm trying to learn/understand functional programming in python. The following code:</p>

<pre><code>foos = [1.0,2.0,3.0,4.0,5.0]
bars = [1,2,3]

def maptest(foo, bar):
    print foo, bar

map(maptest, foos, bars)
</code></pre>

<p>produces:</p>

<pre><code>1.0 1
2.0 2
3.0 3
4.0 None
5.0 None
</code></pre>

<p><strong>Q. Is there a way to use map or any other functional tools in python to produce the following without loops etc.</strong></p>

<pre><code>1.0 [1,2,3]
2.0 [1,2,3]
3.0 [1,2,3]
4.0 [1,2,3]
5.0 [1,2,3]
</code></pre>

<p><strong>Just as a side note how would the implementation change if there is a dependency between foo and bar. e.g.</strong></p>

<pre><code>foos = [1.0,2.0,3.0,4.0,5.0]
bars = [1,2,3,4,5]
</code></pre>

<p><strong>and print:</strong></p>

<pre><code>1.0 [2,3,4,5]
2.0 [1,3,4,5]
3.0 [1,2,4,5]
...
</code></pre>

<p><strong>P.S: I know how to do it naively using if, loops and/or generators, but I'd like to learn how to achieve the same using functional tools. Is it just a case of adding an if statement to maptest or apply another filter map to bars internally within maptest?</strong></p>
"
672182,8482,2009-03-23T03:53:41Z,6,Django Custom Queryset filters,"<p>Is there, in Django, a standard way to write complex, custom filters for QuerySets?</p>

<p>Just as I can write </p>

<pre><code>MyClass.objects.all().filter(field=val)
</code></pre>

<p>I'd like to do something like this :</p>

<pre><code>MyClass.objects.all().filter(customFilter)
</code></pre>

<p>I could use a generator expression </p>

<pre><code>(x for x in MyClass.objects.all() if customFilter(x))
</code></pre>

<p>but that would lose the chainability and whatever other functions the QuerySets provide.</p>
"
672366,74170,2009-03-23T06:11:02Z,9,How do you send AT GSM commands using python?,"<p>How do i send AT GSM commands using python?</p>

<p>Am able to do this quite easily using Delphi and some comport component (TComport), but how do i talk to my modem using python?</p>

<p>Gath</p>
"
672781,57089,2009-03-23T09:59:44Z,7,Python Programming - Rules/Advice for developing enterprise-level software in Python?,"<p>I'm a somewhat advanced C++/Java Developer who recently became interested in Python and I enjoy its dynamic typing and efficient coding style very much. I currently use it on my small programming needs like solving programming riddles and scripting, but I'm curious if anyone out there has successfully used Python in an enterprise-quality project? (Preferably using modern programming concepts such as OOP and some type of Design Pattern)</p>

<p>If so, would you please explain <strong>why</strong> you chose Python <em>(specifically)</em> and give us some of the <strong>lessons</strong> you learned from this project? (Feel free to compare the use of Python in the project vs Java or etc)</p>
"
673174,58737,2009-03-23T12:20:01Z,13,File dialogs of Tkinter in Python 3?,"<p>I want to select a file from a dialog box.  <a href=""http://www.java2s.com/Code/Python/GUI-Tk/Fileopendialog.htm"">Here</a> is code that does all I need, but when I run it:  </p>

<p><code>ImportError: No module named 'tkMessageBox'</code>  </p>

<p>How can I make this example work with Python 3?</p>
"
673288,39726,2009-03-23T13:03:12Z,5,How to include page in PDF in PDF document in Python,"<p>I am using reportlab toolkit in Python to generate some reports in PDF format. I want to use some predefined parts of documents already published in PDF format to be included in generated PDF file. Is it possible (and how) to accomplish this in reportlab or in python library?</p>

<p>I know I can use some other tools like PDF Toolkit (pdftk) but I am looking for Python-based solution.</p>
"
673434,81145,2009-03-23T13:51:13Z,3,Is there a Python library for easily writing zoomable UI's?,"<p>My next work is going to be heavily focused on working with data that is best understood when organized on a two-dimensional zoomable plane or canvas, instead of using lists and property forms.</p>

<p>The library can be based on OpenGL, GTK+ or Cairo. It should allow me to:</p>

<ul>
<li>build widgets out of vector shapes and text (perhaps even SVG based?)</li>
<li>arrange these widgets on a 2D plane</li>
<li>catch widget-related events</li>
<li>zoom deeply into a widget to reveal additional data</li>
<li>arrange widgets in a tree</li>
<li>animate widgets fluidly</li>
</ul>

<p>It wouldn't hurt if it would also allow for some databinding or model/view concept.</p>
"
673605,31610,2009-03-23T14:37:30Z,1,What signals should I catch for clipboard pasting and character insertion in GTK?,"<p>I have a Window with a TextView, and I would like to perform some actions when the user pastes some text. </p>

<p>I would also like to know what signal(s) should I catch in order to perform something when the user presses a key inside the TextView. </p>

<p>Can you tell me what are the signals I must connect?</p>
"
673725,28360,2009-03-23T15:00:51Z,1,Using PiL to take a screenshot of HTML/CSS,"<p>I want to enable a user on a website to upload an image, and write some text over it.  Also, they should be able to crop/scale/move the image and text.  For that stuff, I can do it in jQuery.</p>

<p>After they've made the image the way they want it, is there a way i can take a screenshot of that image (using PiL) and save it on the server?</p>

<p>What is the best/proper way to do this?</p>
"
673844,80726,2009-03-23T15:27:53Z,7,How to read from an os.pipe() without getting blocked?,"<p>I'm trying to read from an open <code>os.pipe()</code> to see if it's empty at the moment of the reading. The problem is that calling <code>read()</code> causes the program to block there until there is actually something to read there however there won't be any, if the test I'm doing succeeded. </p>

<p>I know I can use <code>select.select()</code> with a timeout however I wanted to know if there is another solution to the problem.</p>
"
673867,37986,2009-03-23T15:33:24Z,3,python: arbitrary order by,"<p>In Oracle sql there is a feature to order as follow:</p>

<pre><code>order by decode(""carrot"" = 2
               ,""banana"" = 1
               ,""apple"" = 3)
</code></pre>

<p>What will be the best way to implement this in python?</p>

<p>I want to be able to order a dict on its keys. And that order isn't alphabetically or anything, I determine the order.</p>
"
673936,243779,2009-03-23T15:52:46Z,1,Error while deploying Django on Apache,"<p>I have a small Django website which I am trying to run on an Apache 2.2 HTTP-Server. 
The application is running fine using ""python manage.py runserver"".</p>

<p>Django Version: 1.0.2 final <br />
Python: 2.5<br />
OS: Windows 2000<br /></p>

<p>I wen't through the steps described in the <a href=""http://docs.djangoproject.com/en/dev//howto/deployment/modpython/"" rel=""nofollow"">documentation</a> and after some fiddling, came out with the following in my httpd.conf.</p>

<pre><code>&lt;Location ""/therap/""&gt;
SetHandler python-program
PythonHandler django.core.handlers.modpython
SetEnv DJANGO_SETTINGS_MODULE settings
PythonOption django.root /therap
PythonDebug On
PythonPath ""['D:/therap/therap'] + sys.path""
&lt;/Location&gt;

MaxRequestsPerChild 1
</code></pre>

<p>D:\therap\therap beeing the place where my manage.py is.</p>

<p>When I try to open in my browser, I see an error in the style used by Django (as opposed to black courier on white background.)</p>

<pre><code>ImportError at /

No module named therap.urls

Request Method: GET
Request URL:    http://****:8080/
Exception Type: ImportError
Exception Value:   

No module named therap.urls

Exception Location: C:\python25\lib\site-packages\django\core\urlresolvers.py in _get_urlconf_module, line 200
Python Executable:  C:\Programme\Apache Software Foundation\Apache2.2\bin\httpd.exe
Python Version:     2.5.1
Python Path:        ['D:/therap/therap', 'C:\\WINNT\\system32\\python25.zip', 'C:\\Python25\\Lib', 'C:\\Python25\\DLLs', 'C:\\Python25\\Lib\\lib-tk', 'C:\\Programme\\Apache Software Foundation\\Apache2.2', 'C:\\Programme\\Apache Software Foundation\\Apache2.2\\bin', 'C:\\Python25', 'C:\\Python25\\lib\\site-packages', 'C:\\Python25\\lib\\site-packages\\pyserial-2.2', 'C:\\Python25\\lib\\site-packages\\win32', 'C:\\Python25\\lib\\site-packages\\win32\\lib', 'C:\\Python25\\lib\\site-packages\\Pythonwin', 'C:\\Python25\\lib\\site-packages\\wx-2.8-msw-unicode']
Server time:        Mo, 23 Mär 2009 16:27:03 +0100
</code></pre>

<p>There is a urls.py in D:\therap\therap.
However there is none in D:\therap\therap\main where most of my code is.</p>

<p>I then tried using the parent folder</p>

<pre><code>&lt;Location ""/therap/""&gt;
    SetHandler python-program
    PythonHandler django.core.handlers.modpython
    SetEnv DJANGO_SETTINGS_MODULE therap.settings
    PythonOption django.root /therap
    PythonDebug On
    PythonPath ""['D:/therap'] + sys.path""

&lt;/Location&gt;

MaxRequestsPerChild 1
</code></pre>

<p>Which gave me a different error:</p>

<pre><code>MOD_PYTHON ERROR

ProcessId:      2424
Interpreter:    '***'

ServerName:     '****'
DocumentRoot:   'C:/Programme/Apache Software Foundation/Apache2.2/htdocs'

URI:            '/therap/'
Location:       '/therap/'
Directory:      None
Filename:       'C:/Programme/Apache Software Foundation/Apache2.2/htdocs/therap'
PathInfo:       '/'

Phase:          'PythonHandler'
Handler:        'django.core.handlers.modpython'

Traceback (most recent call last):

  File ""C:\Python25\Lib\site-packages\mod_python\importer.py"", line 1537, in HandlerDispatch
    default=default_handler, arg=req, silent=hlist.silent)

  File ""C:\Python25\Lib\site-packages\mod_python\importer.py"", line 1229, in _process_target
    result = _execute_target(config, req, object, arg)

  File ""C:\Python25\Lib\site-packages\mod_python\importer.py"", line 1128, in _execute_target
    result = object(arg)

  File ""C:\Python25\lib\site-packages\django\core\handlers\modpython.py"", line 228, in handler
    return ModPythonHandler()(req)

  File ""C:\Python25\lib\site-packages\django\core\handlers\modpython.py"", line 201, in __call__
    response = self.get_response(request)

  File ""C:\python25\Lib\site-packages\django\core\handlers\base.py"", line 67, in get_response
    response = middleware_method(request)

  File ""C:\python25\Lib\site-packages\django\middleware\locale.py"", line 17, in process_request
    translation.activate(language)

  File ""C:\python25\Lib\site-packages\django\utils\translation\__init__.py"", line 73, in activate
    return real_activate(language)

  File ""C:\python25\Lib\site-packages\django\utils\translation\trans_real.py"", line 209, in activate
    _active[currentThread()] = translation(language)

  File ""C:\python25\Lib\site-packages\django\utils\translation\trans_real.py"", line 198, in translation
    default_translation = _fetch(settings.LANGUAGE_CODE)

  File ""C:\python25\Lib\site-packages\django\utils\translation\trans_real.py"", line 183, in _fetch
    app = __import__(appname, {}, {}, [])

ImportError: No module named main
</code></pre>

<p>I do use the internationalization module, but I do not see why it causes a problem at this point.</p>

<p>""main"" is the name of the only Django app (containing views, models, forms and such). The full path is D:\therap\therap\main.</p>

<p>I put <code>__init__.py</code>-files everywhere from the main folder to d:\therap.</p>

<p>Now I don't know what else I could do. Any ideas?</p>
"
673970,NA,2009-03-23T16:00:39Z,1,How can I make the Django contrib Admin change list for a particular model class editable with drop downs for related items displayed in the listing?,"<p>Basically I want to have an editable form for related entries instead of a static listing.  </p>
"
674030,19687,2009-03-23T16:16:18Z,3,Django syncdb locking up on table creation,"<p>I've added new models and pushed to our staging server, run syncdb to create their tables, and it locks up. It gets as far as 'Create table photos_photousertag' and postgres output shows the notice for creation of 'photos_photousertag_id_seq', but otherwise i get nothing on either said. I can't ctrl+c the syncdb process and I have no indication of what route to take from here. Has anyone else ran into this?</p>
"
674067,64206,2009-03-23T16:22:51Z,2,How to display errors to the user while still logging it?,"<p>I'm using a PyQt4 user interface.  I've redirected stderr to a log file for easy debugging and trouble-shooting, but now I need to display error messages to the user when an error occurs.</p>

<p>My issue is that I need to catch an exception when it happens and let the user know that it happened, but still let the traceback propagate to stderr (i.e. the log file).</p>

<p>If I do something like this:</p>

<pre><code>def updateResults(self):
    try:
        #code that updates the results
    except:
        #display error message box
</code></pre>

<p>This will catch the exception and not propogate to the error log.</p>

<p>Is there some way to show the user the message and then continue to propogate the error?</p>

<p>Would this work? </p>

<pre><code>except, e:
    #display error message box
    raise e
</code></pre>

<p>Is there a better way  to accomplish my goal?</p>
"
674229,51816,2009-03-23T16:58:07Z,9,Python list.index throws exception when index not found,"<p>Why does list.index throws an exception instead of returning a value like say -1? What's the idea behind this?</p>

<p>To me it looks cleaner to deal with special values, etc than exceptions.</p>

<p>EDIT: I didn't realize -1 to be usable, but in that case, how about a value of None?</p>
"
674304,18909,2009-03-23T17:13:01Z,313,Python's use of __new__ and __init__?,"<p>I'm just trying to streamline one of my classes and have introduced some functionality in the same style as the flyweight design pattern.</p>

<p>However, I'm a bit confused as to why <code>__init__</code> is always called after <code>__new__</code>. I wasn't expecting this. Can anyone tell me why this is happening and how I implement this functionality otherwise? (apart from putting the implementation into the <code>__new__</code> which feels quite hacky).</p>

<p>Here's an example:</p>

<pre><code>class A(object):
    _dict = dict()

    def __new__(cls):
    	if 'key' in A._dict:
    		print ""EXISTS""
    		return A._dict['key']
    	else:
    		print ""NEW""
    		return super(A, cls).__new__(cls)

    def __init__(self):
    	print ""INIT""
    	A._dict['key'] = self
    	print """"

a1 = A()
a2 = A()
a3 = A()
</code></pre>

<p>Outputs:</p>

<pre><code>NEW
INIT

EXISTS
INIT

EXISTS
INIT
</code></pre>

<p>Why?</p>
"
674494,15842,2009-03-23T17:52:17Z,1,"problems Wrapping Patricia Tries using Swig, python","<p>I'm trying to wrap the Patricia Tries (Perl's NET::Patricia) to be exposed in python.  I am having difficulty with one of the classes.</p>

<p>So instances the patricia node (below) as viewed from python have a ""data"" property.  Reading it goes fine, but writing to it breaks.</p>

<pre><code>typedef struct _patricia_node_t {
   u_int bit;   		/* flag if this node used */
   prefix_t *prefix;    	/* who we are in patricia tree */
   struct _patricia_node_t *l, *r;  /* left and right children */
   struct _patricia_node_t *parent;/* may be used */
   void *data;  		/* pointer to data */
   void *user1;			/* pointer to usr data (ex. route flap info) */
} patricia_node_t;
</code></pre>

<p>Specifically:</p>

<pre><code>&gt;&gt;&gt; N = patricia.patricia_node_t()
&gt;&gt;&gt; assert N.data == None
&gt;&gt;&gt; N.data = 1
TypeError: in method 'patricia_node_t_data_set', argument 2 of type 'void *'
</code></pre>

<p>Now my C is weak.  From what I read in the SWIG book, I think this means I need to pass it a pointer to data.  According to <a href=""http://www.swig.org/Doc1.3/Python.html#Python%5Fnn18"" rel=""nofollow"">the book</a> :</p>

<blockquote>
  <p>Also, if you need to pass the raw pointer value to some external python library, you can do it by casting the pointer object to an integer... However, the inverse operation is not possible, i.e., you can't build a Swig pointer object from a raw integer value. </p>
</blockquote>

<p>Questions:</p>

<ol>
<li>am I understanding this correctly?</li>
<li>how do I get around this?  Is %extends?  typemap?  Specifics would be very helpful.</li>
</ol>

<p>Notes:</p>

<ol>
<li>I can't change the C source, but I can extend it in additional .h files or the interface .i file.  </li>
<li>From what I understand, that ""data"" field should be able to contain ""anything"" for some reasonable value of ""anything"" that I don't really know.</li>
</ol>
"
674509,91385,2009-03-23T17:55:11Z,11,"How do I iterate over a Python dictionary, ordered by values?","<p>I've got a dictionary like:</p>

<pre><code>{ 'a': 6, 'b': 1, 'c': 2 }
</code></pre>

<p>I'd like to iterate over it <em>by value</em>, not by key. In other words:</p>

<pre><code>(b, 1)
(c, 2)
(a, 6)
</code></pre>

<p>What's the most straightforward way?</p>
"
674519,91385,2009-03-23T17:58:32Z,110,How can I convert a Python dictionary to a list of tuples?,"<p>If I have a dictionary like:</p>

<pre><code>{ 'a': 1, 'b': 2, 'c': 3 }
</code></pre>

<p>How can I convert it to this?</p>

<pre><code>[ ('a', 1), ('b', 2), ('c', 3) ]
</code></pre>

<p>And how can I convert it to this?</p>

<pre><code>[ (1, 'a'), (2, 'b'), (3, 'c') ]
</code></pre>
"
674600,NA,2009-03-23T18:20:44Z,3,"Python, __init__ and self confusion","<p>Alright, so I was taking a look at some source when I came across this:</p>

<pre><code>&gt;&gt;&gt; def __parse(self, filename):
...         ""parse ID3v1.0 tags from MP3 file""
...         self.clear()
...         try:
...             fsock = open(filename, ""rb"", 0)
...             try:
...                 fsock.seek(-128, 2)
...                 tagdata = fsock.read(128)
...             finally:
...                 fsock.close()
...             if tagdata[:3] == 'TAG':
...                 for tag, (start, end, parseFunc) in self.tagDataMap.items():
...                     self[tag] = parseFunc(tagdata[start:end])
...         except IOError:
...             pass
...
</code></pre>

<p>So, I decided to test it out.</p>

<pre><code> &gt;&gt;&gt; __parse(""blah.mp3"")
</code></pre>

<p>And, I received this error: </p>

<pre><code>Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
TypeError: __parse() takes exactly 2 arguments (1 given)
</code></pre>

<p>This wouldn't be the first time I've encountered this, I keep thinking I'm meant to include self in the argument parameter list, but I know that that's not right.  Could someone explain to me why this happens a lot with code I try to play around with, I suppose its due to my level of understanding about the terms, I barely even understand what init or self does, or why it's relevant. def x(b): print b is the same as def x(self, b): self.b = b print self.b isn't it? Why does it matter so much!</p>

<p>I just want a basic explanation, so I can get this out of my mind,thanks.</p>
"
674690,NA,2009-03-23T18:39:18Z,1,"In Python 2.6, How Might You Pass a List Object to a Method Which Expects A List of Arguments?","<p>I have a list full of various bits of information that I would like to pass to several strings for inclusion via the new string <code>format</code> method.  As a toy example, let us define </p>

<p><code>thelist = ['a', 'b', 'c']</code></p>

<p>I would like to do a print statement like <code>print '{0} {2}'.format(thelist)</code> and <code>print '{1} {2}'.format(thelist)</code></p>

<p>When I run this, I receive the message <code>IndexError: tuple index out of range</code>; when mucking about, it clearly takes the whole list as a single object.  I would, of course, rather it translate <code>thelist</code> to <code>'a', 'b', 'c'</code>.</p>

<p>I tried using a tuple and received the same error.</p>

<p>What on Earth is this particular technique called?  If I knew the name, I could have searched for it.  ""Expand"" is clearly not it.  ""Explode"" doesn't yield anything useful.</p>

<p>My actual use is much longer and more tedious than the toy example.</p>
"
674739,13778,2009-03-23T18:52:47Z,2,benchmarking PHP vs Pylons,"<p>I want to benchmark PHP vs Pylons. I want my comparison of both to be as even as possible, so here is what I came up with:</p>

<ul>
<li>PHP 5.1.6 with APC, using a smarty template connecting to a MySQL database</li>
<li>Python 2.6.1, using Pylons with a mako template connecting the the same MySQL database</li>
</ul>

<p>Is there anything that I should change in that setup to make it a more fair comparison?</p>

<p>I'm going to run it on a spare server that has almost no activity, 2G of ram and 4 cores.</p>

<p>Any suggestions of how I should or shouldn't benchmark them? I plan on using ab to do the actual benchmarking.</p>

<h3>Related</h3>

<ul>
<li><a href=""http://stackoverflow.com/questions/77086/which-is-faster-python-webpages-or-php-webpages"">Which is faster, python webpages or php webpages?</a></li>
</ul>
"
674764,51816,2009-03-23T18:57:43Z,45,Examples for string find in Python,"<p>I am trying to find some examples but no luck. Does anyone know of some examples on the net? I would like to know what it returns when it can't find, and how to specify from start to end, which I guess is going to be 0, -1.</p>
"
675077,86,2009-03-23T20:24:49Z,17,OCR for sheet music,"<p>Im considering doing a small project as a part of my masters for doing ocr just for sheetmusic instead of text.</p>

<p>I think PIL and Python would be fine for simple proof of concept O""notes""R.</p>

<p>My question is: Has anyone got any ""dont do it with PIL use xyz instead"" or something in that alley?</p>

<p>EDIT: My delicius links regarding the subject if anyone is interested: <a href=""http://delicious.com/seet/DIKU-09b4%2Bb1"">http://delicious.com/seet/DIKU-09b4%2Bb1</a></p>

<p>=========================================================================</p>

<p>EDIT2:</p>

<p>Actually, now I know a lot more about OCR for sheet music or OMR as it is called.</p>

<p>Within academia the area has been researched since late 60/early 70 and building an OMR system is not a simple task. To get a summary of the problems and the research until early 2000 you could read <a href=""http://www.springerlink.com/content/x1nv36548113k51u/"">""The challenge of Optical Music Recognition""</a> which is quite successful in drawing up the lines of the field.</p>

<p>Regarding existing software I know of at least these:</p>

<ul>
<li><a href=""http://www.visiv.co.uk/"">Sharpeye</a></li>
<li><a href=""http://www.neuratron.com/photoscore.htm"">Photoscore</a></li>
<li><a href=""http://www.musitek.com/"">Smartscore X</a></li>
<li><a href=""http://www.capella-software.com/capscan.htm"">Capella Scan</a></li>
<li><a href=""http://www.myriad-online.com/en/products/pdftomusic.htm"">PdfToMusic</a></li>
</ul>

<p>And my unscientific tests gave me the idea that photoscore was the most robust one.</p>

<p>For Opensource software <a href=""https://audiveris.dev.java.net/"">Audiveris</a> is the only complete thing I found and is written in Java.</p>

<p>Regarding my original question I am using <a href=""http://gamera.informatik.hsnr.de/"">Gamera</a>. Gamera is an opensource tool for document image analysis which provides tools to do all the basic stuff needed for analysing images for recognition. Gamera has a python interface and the possibility to write c++ ""toolkits"". For example is it possible to <a href=""http://lionel.kr.hs-niederrhein.de/~dalitz/data/projekte/stafflines/"">download and use a staffline removal toolkit for gamera.</a></p>
"
675130,15625,2009-03-23T20:36:33Z,2,TLS connection with timeouts (and a few other difficulties),"<p>I have a HTTP client in Python which needs to use TLS. I need not only
to make encrypted connections but also to retrieve info from the
remote machine, such as the certificate issuer. I need to make
connection to many HTTP servers, often badly behaved, so I absolutely
need to have a timeout. With non-TLS connections,
<code>mysocket.settimeout(5)</code> does what I want.</p>

<p>Among the many TLS Python modules:</p>

<p><a href=""http://pypi.python.org/pypi/python-gnutls"" rel=""nofollow"">python-gnutls</a> does not allow to use settimeout() on sockets because
it uses non-blocking sockets:</p>

<pre><code>gnutls.errors.OperationWouldBlock: Function was interrupted.
</code></pre>

<p><a href=""http://pyopenssl.sourceforge.net/"" rel=""nofollow"">python-openssl</a> has a similar issue:</p>

<pre><code>OpenSSL.SSL.WantReadError
</code></pre>

<p>The <a href=""http://docs.python.org/library/ssl.html"" rel=""nofollow"">SSL module</a> of the standard library does not work with Python
2.5.</p>

<p>Other libraries like <a href=""http://trevp.net/tlslite/"" rel=""nofollow"">TLSlite</a> apparently does not give access to
the metadata of the certificate.</p>

<p>The program is threaded so I cannot use signals. I need detailed
control on the HTTP dialog so I cannot use a standard library like urllib2.</p>

<p>Background: this is
the survey project <a href=""http://www.dnswitness.net/"" rel=""nofollow"">DNSwitness</a>. Relevant SO threads: <a href=""http://stackoverflow.com/questions/492519/timeout-on-a-python-function-call"">Timeout on a
Python function call</a> and <a href=""http://stackoverflow.com/questions/366682/how-to-limit-execution-time-of-a-function-call-in-python"">How to limit execution time of a function call in Python</a>.</p>
"
675140,81636,2009-03-23T20:37:38Z,1,python class __getitem__ negative index handling,"<p>Is there a common function to do this? Right now I'm just doing the following (and overriding __len__)</p>

<pre><code>idx &lt; 0:
    idx = len(self) + idx
if idx &lt; 0 or idx &gt;= len(self):
    raise IndexError, ""array index (%d) out of range [0, %d)"" %(idx, len(self))
</code></pre>
"
675161,36537,2009-03-23T20:43:04Z,2,Is it possible to implement properties in languages other than C#?,"<p>During a bout of C# and WPF recently, I got to like C#'s properties:</p>

<pre><code>public double length_inches
{
    get { return length_metres * 39.0; }
    set { length_metres = value/39.0; }
}
</code></pre>

<p>Noticing, of course, that length_metres may change from being a field to a property, and the code need not care. WPF can also bind UI elements to object properties very happily.</p>

<p>When I first learnt about classes and objects, I assumed that there was a way to do it, because it seemed so obvious! The point of hiding complexity inside a class is that you don't need to care what is being stored any more. But it has taken until now to see it.</p>

<p>Amusingly, I first saw it done in VB.Net. That leading edge of OO purity.</p>

<p>The question is, can I recreate properties in other languages which I use more often, like javascript, python, php? In javascript, if I set a variable to a closure, won't I get the closure back again, rather than the result of it? </p>
"
675370,38140,2009-03-23T21:48:29Z,21,Tab-completion in Python interpreter in OS X Terminal,"<p>Several months ago, I wrote a <a href=""http://igotgenes.blogspot.com/2009/01/tab-completion-and-history-in-python.html"">blog post</a> detailing how to achieve tab-completion in the standard Python interactive interpreter--a feature I once thought only available in IPython. I've found it tremendously handy given that I sometimes have to switch to the standard interpreter due to IPython unicode issues.</p>

<p>Recently I've done some work in OS X. To my discontent, the script doesn't seem to work for OS X's Terminal application. I'm hoping some of you with experience in OS X might be able to help me trouble-shoot it so it can work in Terminal, as well.</p>

<p>I am reproducing the code below</p>

<pre><code>import atexit
import os.path

try:
    import readline
except ImportError:
    pass
else:
    import rlcompleter

    class IrlCompleter(rlcompleter.Completer):
        """"""
        This class enables a ""tab"" insertion if there's no text for
        completion.

        The default ""tab"" is four spaces. You can initialize with '\t' as
        the tab if you wish to use a genuine tab.

        """"""

        def __init__(self, tab='    '):
            self.tab = tab
            rlcompleter.Completer.__init__(self)


        def complete(self, text, state):
            if text == '':
                readline.insert_text(self.tab)
                return None
            else:
                return rlcompleter.Completer.complete(self,text,state)


    #you could change this line to bind another key instead tab.
    readline.parse_and_bind('tab: complete')
    readline.set_completer(IrlCompleter('\t').complete)


# Restore our command-line history, and save it when Python exits.
history_path = os.path.expanduser('~/.pyhistory')
if os.path.isfile(history_path):
    readline.read_history_file(history_path)
atexit.register(lambda x=history_path: readline.write_history_file(x))
</code></pre>

<p>Note that I have slightly edited it from the version on my blog post so that the <code>IrlCompleter</code> is initialized with a true tab, which seems to be what is output by the Tab key in Terminal.</p>
"
675754,70870,2009-03-24T00:40:59Z,0,learning python 3.0 on ubuntu,"<p>[resolved]</p>

<p>I tweaked the preferences in komodo edit and ended up with:</p>

<p>don't auto indent</p>

<p>don't allow file contents to override tab settings</p>

<p>prefer tab characters over spaces</p>

<p>4 spaces per indent</p>

<p>4 width of each tab char</p>

<p>I also set komodo to show whitespace and tabs, which eneded up revealing the screwed up sections.</p>

<p>yeah - it's a little picky. :)</p>

<p>[/resolved]</p>

<p>I have installed python 3.0 on ubuntu 8.10 along with komodo-edit ide.</p>

<p>I'm just getting into python, and I'm reading through visual quickstart guide python 2nd ed.  (the example below is from that book).  I'm getting some really frustrating errors and would really appreciate your thoughts.  </p>

<p>I've re-typed and checked tabs many times over.  </p>

<p>I'm starting to think that something in the install or setup has gone wrong.</p>

<p>I typed the following into komodo-edit:</p>

<pre><code>#!/usr/bin/python3.0
for row in range(1, 10):
    for col in range(1, 10):
        p = row * col
        if p &lt; 10:
            print(' ', end = '')
        print(row * col, ' ', end = '')
    print()
</code></pre>

<p>I can't test this is IDLE with python 3 - can't seem to get that version of IDLE installed.  for now, I'm trying to run from the shell.</p>

<p>first, just using ""python"" to call the program...</p>

<pre><code>PYTHON [1] $  python ktest.py 
      File ""ktest.py"", line 6
        print(' ', end = '')
                       ^
    SyntaxError: invalid syntax
</code></pre>

<p>now trying different ways of calling the python compiler...</p>

<pre><code>PYTHON [1] $  python ktest.py 
          File ""ktest.py"", line 6
            print(' ', end = '')
                           ^
        SyntaxError: invalid syntax


PYTHON [1] $  python3 ktest.py 
      File ""ktest.py"", line 4
        p = row * col
                    ^
    TabError: inconsistent use of tabs and spaces in indentation


PYTHON [1] $  python3.0 ktest.py 
      File ""ktest.py"", line 4
        p = row * col
                    ^
    TabError: inconsistent use of tabs and spaces in indentation
</code></pre>
"
676172,81797,2009-03-24T04:38:58Z,63,Full examples of using pySerial package,"<p>Can someone please show me a full python sample code that uses <strong>pyserial</strong>, i have the package and am wondering how to send the AT commands and read them back!</p>
"
676198,NA,2009-03-24T04:57:57Z,3,How do I generate test data for my Python script?,"<p>A equation takes values in the following form :</p>

<pre><code>   x = [0x02,0x00]  # which is later internally converted to in the called function to  0x300
   y = [0x01, 0xFF]
   z = [0x01, 0x0F]
</code></pre>

<p>How do I generate a series of test values for this function ?
    for instance I want to send a 100 odd values from a for loop </p>

<pre><code>for i in range(0,300):
   # where a,b are derived for a range
   x = [a,b]
</code></pre>

<p>My question was a bit unclear so please let my clarify.
what I wanted to ask how I can do <code>x =[a,b]</code> generate different values for <code>a,b</code>   </p>
"
676253,6488,2009-03-24T05:36:54Z,8,Python and text manipulation,"<p>I want to learn a text manipulation language and I have zeroed in on Python. Apart from text manipulation Python is also used for numerical applications, machine learning, AI, etc. </p>

<p>My question is how do I approach the learning of Python language so that I am quickly able to write sophisticated text manipulation utilities. Apart from regular expressions in the context of ""text manipulation"" what language features are more important than others what modules are useful and so on.</p>
"
676460,81850,2009-03-24T07:44:38Z,4,Web crawlers and Google App Engine Hosted applications,"<p>Is it impossible to run a web crawler on GAE along side with my app considering the I am running the free startup version?</p>
"
676485,69882,2009-03-24T08:04:41Z,8,Are there any built-in cross-thread events in python?,"<p>Is there any built-in syntax in python that allows me to post a message to specific python thread inside my problem? Like 'queued connected signal' in pyQt or ::PostMessage() in Windows. I need this for asynchronous communication between program parts: there is a number of threads that handle network events and they need to post these events to a single 'logic' thread that translates events safe single-threaded way.</p>
"
676713,38626,2009-03-24T09:48:25Z,11,Is there a cross-platform python low-level API to capture or generate keyboard events?,"<p>I am trying to write a cross-platform python program that would run in the background, monitor all keyboard events and when it sees some specific shortcuts, it generates one or more keyboard events of its own.  For example, this could be handy to have Ctrl-@ mapped to ""my.email@address"", so that every time some program asks me for my email address I just need to type Ctrl-@.</p>

<p>I know such programs already exist, and I am reinventing the wheel... but my goal is just to learn more about low-level keyboard APIs.  Moreover, the answer to this question might be useful to other programmers, for example if they want to startup an SSH connection which requires a password, without using pexpect.</p>

<p>Thanks for your help.</p>

<p>Note: there is <a href=""http://stackoverflow.com/questions/310576/low-level-keyboard-input-on-windows"">a similar question</a> but it is limited to the Windows platform, and does not require python.  I am looking for a cross-platform python api.  There are also other questions related to keyboard events, but apparently they are not interested in system-wide keyboard events, just application-specific keyboard shortcuts.</p>

<p>Edit: I should probably add a disclaimer here: I do <em>not</em> want to write a keylogger.  If I needed a keylogger, I could download one off the web a anyway. ;-)</p>
"
676826,56924,2009-03-24T10:34:25Z,2,Intercepting changes of attributes in classes within a class - Python,"<p>I have been messing around with pygame and python and I want to be able to call a function when an attribute of my class has changed.  My current solution being:</p>

<pre><code>class ExampleClass(parentClass):
   def __init__(self):
      self.rect = pygame.rect.Rect(0,0,100,100)
   def __setattr__(self, name, value):
      parentClass.__setattr__(self,name,value)
      dofancystuff()
Firstclass = ExampleClass()
</code></pre>

<p>This works fine and dofancystuff is called when I change the rect value with <code>Firsclass.rect = pygame.rect.Rect(0,0,100,100)</code>.  However if I say <code>Firstclass.rect.bottom = 3</code>.  <code>__setattr__</code> and there for dofancystuff is not called.</p>

<p>So my question I guess is how can I intercept any change to an attribute of a subclass?</p>

<p>edit: Also If I am going about this the wrong way please do tell I'm not very knowledgable when it comes to python.</p>
"
677028,81145,2009-03-24T11:34:34Z,8,How do I notify a process of an SQLite database change done in a different process?,"<p>Let's say I have two or more processes dealing with an SQLite database - a ""player"" process and many ""editor"" processes. </p>

<p>The ""player"" process reads the database and updates a view - in my case it would be a waveform being mixed to the soundcard depending on events stored in the database.</p>

<p>An ""editor"" process is any editor for that database: it changes the database constantly.</p>

<p>Now I want the player to reflect the editing changes quickly.</p>

<p>I know that SQLite supplies hooks to trace database changes within the same process, but there seems to be little info on how to do this with multiple processes.</p>

<p>I could poll the database constantly, compare records and trigger events, but that seems to be quite inefficient, especially when the database grows to a large size.</p>

<p>I am thinking about using a log table and triggers, but I wonder if there is a simpler method.</p>
"
677172,81974,2009-03-24T12:31:09Z,2,verbose_name_plural unexpected in a model?,"<p>I've been doing some models of a future app, and, after adding verbose_name and verbose_name_plural to every entry on a working model, for making it 'beautiful', I've found that at validate time, Django doesn't like that, so it says:</p>

<pre><code>  File ""/home/andor/Documentos/desarrollo/grundymanage/../grundymanage/concursantes/models.py"", line 4, in &lt;module&gt;
    class Concursante(models.Model):
  File ""/home/andor/Documentos/desarrollo/grundymanage/../grundymanage/concursantes/models.py"", line 7, in Concursante
    nombre_artistico = models.CharField(verbose_name='Nombre Artístico', verbose_name_plural='Nombres Artísticos', max_length=50)
TypeError: __init__() got an unexpected keyword argument 'verbose_name_plural'
</code></pre>

<p>My model begins like this:</p>

<pre><code># -*- encoding: utf-8 -*-
from django.db import models

class Concursante(models.Model):
    nombre = models.CharField(verbose_name='Nombre', max_length=30)
    apellidos = models.CharField(verbose_name='Apellidos', max_length=50)
    nombre_artistico = models.CharField(verbose_name='Nombre Artístico', verbose_name_plural='Nombres Artísticos', max_length=50)
</code></pre>

<p>Why 'he' didn't expects a plural verbose name there? Cannot live together with verbose_name?</p>

<p>FYI, this are my software versions:</p>

<ul>
<li>Ubuntu 8.04</li>
<li>Python 2.5.2</li>
<li>Django ""1"" ""0"" ""final""</li>
<li>Django ubuntu package version ""1.0-1ubuntu1""</li>
</ul>
"
677219,69885,2009-03-24T12:47:09Z,17,condition coverage in python,"<p>Is there any tool/library that calculate percent of ""condition/decision coverage"" of python code. I found only coverage.py but it calculates only percent of ""statement coverage"".</p>
"
677252,6013,2009-03-24T12:58:01Z,18,Python SVN bindings for Windows,"<p>Where can I find precompiled Python SWIG SVN bindings for Windows?</p>
"
677255,46411,2009-03-24T12:58:23Z,5,What's the best online tutorial for starting with Spring Python,"<p>Spring Python seems to be the gold-standard for how to define good quality APIs in Python - it's based on Spring which also seems to be the gold-standard for Java APIs. </p>

<p>My manager has complained (with good reason) that our APIs are in a mess - we need to impose some order on them. Since we will be re-factoring it makes sense to take advantage of what is considered best practice - so we would like to consider Spring.</p>

<p>Could somebody point me to the best learning resources for getting started with Spring? I've googled for a while and not found anything which seems to start from first principles. I'm looking for something which assumes good knowledge of Python but zero knowledge of Spring on other platforms or it's principles.</p>

<p>Thanks</p>
"
677395,1044,2009-03-24T13:28:34Z,2,How to check if an RGB image contains only one color?,"<p>I'm using Python and PIL.</p>

<p>I have images in RGB and I would like to know those who contain only one color (say #FF0000 for example) or a few very close colors (#FF0000 and #FF0001).</p>

<p>I was thinking about using the histogram but it is very hard to figure out something with the 3 color bands, so I'm looking for a more clever algorithm.</p>

<p>Any ideas?</p>

<blockquote>
  <p>ImageStat module is THE answer! Thanks Aaron. 
  I use ImageStat.var to get the variance and it works perfectly.</p>
</blockquote>

<p>Here is my piece of code:</p>

<pre><code>from PIL import Image, ImageStat

MONOCHROMATIC_MAX_VARIANCE = 0.005

def is_monochromatic_image(src):
    v = ImageStat.Stat(Image.open(src)).var
    return reduce(lambda x, y: x and y &lt; MONOCHROMATIC_MAX_VARIANCE, v, True)
</code></pre>
"
677476,80500,2009-03-24T13:48:33Z,6,Using 'old' database with django,"<p>I'm using a hand built (Postgres) database with Django. With ""inspectdb"" I was able to automatically create a model for it. The problem is that some tables have multiple primary keys (for many-to-many relations) and they are not accessible via Django. </p>

<p>What's the best way to access these tables?</p>
"
677577,NA,2009-03-24T14:12:04Z,34,distutils: How to pass a user defined parameter to setup.py?,"<p>Please prompt me how to pass a user-defined parameter both from the command line and setup.cfg configuration file to distutils' setup.py script. I want to write a setup.py script, which accepts my package specific parameters. For example:</p>

<pre><code>python setup.py install -foo myfoo
</code></pre>

<p>Thank you,<br/>
Mher</p>
"
677590,76701,2009-03-24T14:15:29Z,1,wxPython: Making a scrollable DC,"<p>I am drawing inside a wx.Window using a PaintDC. I am drawing circles and stuff like that into that window. Problem is, sometimes the circles go outside the scope of the window. I want a scrollbar to automatically appear whenever the drawing gets too big. What do I do?</p>
"
677641,36330,2009-03-24T14:28:02Z,4,How can I record live video with gstreamer without dropping frames?,"<p>I'm trying to use gstreamer 0.10 from Python to simultaneously display a v4l2 video source and record it to xvid-in-avi. Over a long period of time the computer would be fast enough to do this but if another program uses the disk it drops frames. That's bad enough, but on playback there are bursts of movement in the video where frames were dropped instead of displaying the frames we were able to encode at a lower framerate.</p>

<p>The pipeline is <code>v4l2src ! capsfilter ! tee ! queue ! xvidenc ! avimux ! filesink</code> and the tee also sinks to a <code>queue ! xvimagesink sync=false</code>. I've tried adding <code>videorate</code> in front of <code>xvidenc</code> but that seems to make things worse.</p>

<p>I've considered spooling the uncompressed video to disk in this pipeline and encoding it in a background thread. What else could I do to solve this problem? Is <code>xvidenc</code> or <code>avimux</code> doing the wrong thing with dropped frames? Could I dramatically increase the size of the queue preceding my encoder?</p>
"
677656,50173,2009-03-24T14:31:43Z,7,How to extract from a list of objects a list of specific attribute?,"<p>I have a list of objects. Object has 3 string attributes. I want to make a list containing only a specific attribute from class.</p>

<p>Is there any built-in functions to do that?</p>
"
677793,302980,2009-03-24T15:00:49Z,2,Specifying different template names in Django generic views,"<p>I have the code in my urls.py for my generic views;</p>

<pre><code>infodict = {
'queryset': Post.objects.all(),
'date_field': 'date',
'template_name': 'index.html',
'template_object_name': 'latest_post_list',
}

urlpatterns += patterns('django.views.generic.date_based',
(r'^gindex/$', 'archive_index', infodict),
)
</code></pre>

<p>So going to the address /gindex/ will use a generic view with the template of 'index.html'.</p>

<p>But since I will have more generic views in this urlpattern, how am I supposed to provide a different template name using the same infodict? I don't want to have to use lots of infodicts, and I can't use the default template name.</p>

<p>Please note this also applies to template object name within infodict.</p>

<p>Thanks for your help!</p>

<p><strong>Edit</strong>:
This is one of my first questions on stackoverflow and I am amazed with the thorough answers!
I prefer using the dict constructor which I didn't know about. I find using the python documentation a bit harder as I can't find what i'm looking for usually!</p>

<p>Thanks again for all the answers and different approaches.</p>
"
677811,82056,2009-03-24T15:04:09Z,13,Python and MySQL: is there an alternative to MySQLdb?,"<p>Is there a module written purely in Python that will allow a script to communicate with a MySQL database? I've already tried MySQLdb without success. It requires too much: GCC, zlib, and openssl. I do not have access to these tools; even if I did, I don't want to waste time getting them to work together. I'm looking for tools that will make my work easier.</p>

<p>Can someone point me in the direction of a MySQL Python module written in Python? If not, tips on writing my own code for communicating with MySQL would be appreciated.</p>

<p>Thanks,</p>

<p>Tony</p>

<hr>

<p>Thanks everyone for your answers. Since I'm working with a small database (a few hundred records, mainly names and addresses) I've decided to use SQLite. I just discovered it. It seems to be perfectly suited for my purposes; it was simple to install (took about two minutes) and works well with Python. I'm stuck with Python 2.4 so I can't use the sqlite3 module, but I'm able to communicate with the database by using Python's 'subprocess.Popen' function and command-line parameters.</p>
"
677846,368855,2009-03-24T15:13:03Z,1,python and symbian - keystroke capture,"<p>I'm trying to write a simple prototyping appliaction in python to capture a users keystrokes while writing a text messages (SMS) to collect some stat info for use in a biometric application for Symbian based phones. I have never used python before and have had very little exposure to it. However, I did come across an example <a href=""http://wiki.forum.nokia.com/index.php/How_to_use_Keys_in_PyS60"" rel=""nofollow"">http://wiki.forum.nokia.com/index.php/How_to_use_Keys_in_PyS60</a> detailing how to capture UP, DOWN, LEFT, RIGHT, and 0-9 easily enough. I tried to find information on key_codes and keypress in the pys60 API but little is available as I'm looking for an example of how to capture characters such as 'a', 'b' etc. assuming that predictive text is disabled. Also, if it is not possible to capture characters, how feasible is it to map keypresses to characters? i.e. 228 = 'b','t'? </p>

<p>Can anyone provide me with some examples, suggestions or a push in the right direction?</p>
"
677931,78305,2009-03-24T15:30:12Z,3,Doctest for dynamically created objects,"<p>What is the best way to test code like this (the one below obviously fails while object is created in different block every time):</p>

<pre><code>def get_session(db_name, verbose, test):
""""""Returns current DB session from SQLAlchemy pool.

&gt;&gt;&gt; get_session('Mmusc20090126', False, True)
&lt;sqlalchemy.orm.session.Session object at 0xfb5ff0&gt;

""""""
if test:
    engine = create_engine('sqlite:///:memory:', echo=verbose)
    log_load.debug('DB in RAM.')
else:
    engine = create_engine('sqlite:///' + 'DB/' + db_name + '.db', echo=verbose)
    log_load.debug('DB stored in file: %s' % 'DB/' + db_name + '.db')

# Create TABLES: Structures, Interactions, Interactors, PDB_UniProt, UniProtSeq
meta.create_all(engine)

Session = sessionmaker(bind=engine)
session = Session()

return session
</code></pre>
"
677962,80500,2009-03-24T15:36:39Z,0,Fill Django application with data using very large Python script,"<p>I wrote a program that outputs a Python program that fills my <a href=""http://en.wikipedia.org/wiki/Django_%28web_framework%29"" rel=""nofollow"">Django</a> application with data. This program however is 23 MB large and my computer won't run it. Is there a solution for this?</p>

<p>Another possible solution to fill the database would be using a fixture. The problem is that I don't know the new primary keys yet... or I would have to use the old ones (which I don't prefer).</p>

<p>Any suggestions?</p>

<p>The reason for my path: I'm migrating a database that is very different from the new one, it also has many relations. The 23 MB program remembers all objects from the source database, that's why it's not easily cut in half. Maybe there is a better way to do this? I prefer using Django than using raw SQL.</p>
"
677978,18909,2009-03-24T15:39:59Z,15,weakref list in python,"<p>I'm in need of a list of weak references that deletes items when they die. Currently the only way I have of doing this is to keep flushing the list (removing dead references manually).</p>

<p>I'm aware there's a WeakKeyDictionary and a WeakValueDictionary, but I'm really after a WeakList, is there a way of doing this?</p>

<p>Here's an example:</p>

<pre><code>import weakref

class A(object):
    def __init__(self):
       pass

class B(object):
    def __init__(self):
        self._references = []

    def addReference(self, obj):
        self._references.append(weakref.ref(obj))

    def flush(self):
        toRemove = []

        for ref in self._references:
            if ref() is None:
                toRemove.append(ref)

        for item in toRemove:
            self._references.remove(item)

b = B()

a1 = A()
b.addReference(a1)
a2 = A()
b.addReference(a2)

del a1
b.flush()
del a2
b.flush()
</code></pre>
"
678236,51816,2009-03-24T16:41:03Z,294,How to get the filename without the extension from a path in Python?,"<p>How to get the filename without the extension from a path in Python?</p>

<p>I found out a method called <code>os.path.basename</code> to get the filename with extension. But even when I import os, I am not able to call it <code>path.basename</code>. Is it possible to call it as directly as basename?</p>
"
678308,78351,2009-03-24T17:00:38Z,3,Does any one know of an RTF report generator in Django?,"<p>I know about the PDF report generator, but I need to use RTF instead.</p>
"
678409,80246,2009-03-24T17:28:40Z,1,soaplib with mod_wsgi/cherrypy,"<p>I've followed the tutorials for setting up Apache with mod_wsgi to interface cherrypy and make a site running of it. This is my ""myapp.wsgi"", and opening <a href=""http://localhost/"" rel=""nofollow"">http://localhost/</a> works great. Opening <a href=""http://localhost/ape/"" rel=""nofollow"">http://localhost/ape/</a> actually returns the text instead of a soap-response, and <a href=""http://localhost/ape/service.wsdl"" rel=""nofollow"">http://localhost/ape/service.wsdl</a> returns a 500 HTTP error code. What am I doing wrong in getting such a simple SOAP service to run? How can I get it to return valid WSDL? My code follows below</p>

<p>Cheers</p>

<p>Nik</p>

<pre><code>import atexit, threading, cherrypy,sys
from soaplib.wsgi_soap import SimpleWSGISoapApp
from soaplib.service import soapmethod
from soaplib.serializers.primitive import String, Integer, Array

sys.stdout = sys.stderr
cherrypy.config.update({'environment': 'embedded'})

class Root(object):
    def index(self):
        return 'Hello World!'
    index.exposed = True

    @soapmethod(_returns=String)
    def ape(self):
       return 'Ape!!'
    ape.exposed = True

application = cherrypy.Application(Root(), None)
</code></pre>
"
678410,73894,2009-03-24T17:28:44Z,5,How can I add non-sequential numbers to a range?,"<p>I am trying to iterate through the range(750, 765) and add the non-sequential numbers 769, 770, 774. If I try adding the numbers after the range function, it returns the range list, then the individual numbers:</p>

<pre><code>
>>> for x in range(750, 765), 769, 770, 774: print x
... 
[750, 751, 752, 753, 754, 755, 756, 757, 758, 759, 760, 761, 762, 763, 764]
769
770
774
</code></pre>

<p>How can I get all the numbers in a single list?</p>
"
678525,2183,2009-03-24T17:59:00Z,6,"What payment processing frameworks, like ActiveMerchant, are available for other languages?","<p>Rails has frameworks such as <a href=""http://www.activemerchant.org/"" rel=""nofollow"">ActiveMerchant</a> and <a href=""http://github.com/cainlevy/freemium/tree/master"" rel=""nofollow"">Freemium</a> (which uses ActiveMerchant) to simplify dealing with payment processing. What other frameworks are there for other programming languages such as PHP or Python?</p>
"
678927,65326,2009-03-24T19:37:30Z,7,Select Distinct Years and Months for Django Archive Page,"<p>I want to make an archive_index page for my django site. However, the date-based generic views really aren't any help. I want the dictionary returned by the view to have all the years and months for which at least one instance of the object type exists. So if my blog started in September 2007, but there were no posts in April 2008, I could get something like this</p>

<pre>2009 - Jan, Feb, Mar
2008 - Jan, Feb, Mar, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
2007 - Sep, Oct, Nov, Dec</pre>
"
679162,24587,2009-03-24T20:38:04Z,3,Why does windows give an sqlite3.OperationalError and linux does not?,"<h1>The problem</h1>

<p>I've got a programm that uses <a href=""http://storm.canonical.com"" rel=""nofollow"">storm 0.14</a> and it gives me this error on windows:</p>

<pre>
sqlite3.OperationError: database table is locked
</pre>

<p>The thing is, under linux it works correctly.</p>

<p>I've got the impression that it happens only after a certain amount of changes have been done, as it happens in some code, that copies a lot of objects.</p>

<p>Turning on the debug mode gives me this on windows:</p>

<pre>
83 EXECUTE: 'UPDATE regularorder_product SET discount=? WHERE regularorder_product.order_id = ? AND regularorder_product.product_id = ?', (Decimal(""25.00""), 788, 274)
84 DONE
85 EXECUTE: 'UPDATE repeated_orders SET nextDate=? WHERE repeated_orders.id = ?', (datetime.date(2009, 3, 31), 189)
86 ERROR: database table is locked
</pre>

<p>On linux:</p>

<pre>
83 EXECUTE: 'UPDATE regularorder_product SET discount=? WHERE regularorder_product.order_id = ? AND regularorder_product.product_id = ?', (Decimal(""25.00""), 789, 274)
84 DONE
85 EXECUTE: 'UPDATE repeated_orders SET nextDate=? WHERE repeated_orders.id = ?', (datetime.date(2009, 3, 31), 189)
86 DONE
</pre>

<h1>System info</h1>

<p><em>Windows</em></p>

<ul>
<li>Windows XP SP 3</li>
<li>Python 2.5.4</li>
<li>NTFS partition</li>
</ul>

<p><em>Linux</em></p>

<ul>
<li>Ubuntu 8.10</li>
<li>Python 2.5.2</li>
<li>ext3 partition</li>
</ul>

<h1>Some code</h1>

<pre><code>def createRegularOrderCopy(self):
    newOrder = RegularOrder()
    newOrder.date = self.nextDate
    # the exception is thrown on the next line,
    # while calling self.products.__iter__
    # this happens when this function is invoked the second time
    for product in self.products:
        newOrder.customer = self.customer
        newOrder.products.add(product)
        return newOrder

orders = getRepeatedOrders(date)
week = timedelta(days=7)

for order in orders:
    newOrder = order.createRegularOrderCopy()
    store.add(newOrder)
    order.nextDate = date + week
</code></pre>

<h1>The question</h1>

<p>Is there anything about sqlite3/python that differs between windows and linux? What could be the reason for this bug and how can I fix it?</p>

<h1>Another observation</h1>

<p>When adding a <code>COMMIT</code> at the place where the error happens, this error is thrown instead: <code>sqlite3.OperationalError: cannot commit transaction - SQL statements in progress</code></p>

<h1>Answers to answers</h1>

<p>I'm not using multiple threads / processes, therefore concurrency shouldn't be a problem and also I've got only one Store object.</p>
"
679302,2362,2009-03-24T21:23:21Z,1,What's wrong with my Python SOAPpy webservice call?,"<p>I am playing around trying to call a simple SOAP webservice using the following code in the Python interpreter:</p>

<pre><code>from SOAPpy import WSDL
wsdl = ""http://www.webservicex.net/whois.asmx?wsdl""
proxy = WSDL.Proxy(wsdl)
proxy.soapproxy.config.dumpSOAPOut=1
proxy.soapproxy.config.dumpSOAPIn=1
proxy.GetWhoIS(HostName=""google.com"")
</code></pre>

<p>(Yep, I'm new to Python, doing the diveintopython thing...)</p>

<p>The call to the GetWhoIS method fails - otherwise I wouldn't be asking here, I guess.
Here's my outgoing SOAP:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""UTF-8""?&gt;
&lt;SOAP-ENV:Envelope
  SOAP-ENV:encodingStyle=""http://schemas.xmlsoap.org/soap/encoding/""
  xmlns:SOAP-ENC=""http://schemas.xmlsoap.org/soap/encoding/""
  xmlns:xsi=""http://www.w3.org/1999/XMLSchema-instance""
  xmlns:SOAP-ENV=""http://schemas.xmlsoap.org/soap/envelope/""
  xmlns:xsd=""http://www.w3.org/1999/XMLSchema""&gt;
  &lt;SOAP-ENV:Body&gt;
    &lt;GetWhoIS SOAP-ENC:root=""1""&gt;
      &lt;HostName xsi:type=""xsd:string""&gt;google.com&lt;/HostName&gt;
    &lt;/GetWhoIS&gt;
  &lt;/SOAP-ENV:Body&gt;
&lt;/SOAP-ENV:Envelope&gt;
</code></pre>

<p>And here's the incoming response.</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;soap:Envelope
    xmlns:soap=""http://schemas.xmlsoap.org/soap/envelope/""
    xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance""
    xmlns:xsd=""http://www.w3.org/2001/XMLSchema""&gt;
  &lt;soap:Body&gt;
    &lt;soap:Fault&gt;
      &lt;faultcode&gt;soap:Server&lt;/faultcode&gt;
      &lt;faultstring&gt;
           System.Web.Services.Protocols.SoapException:
           Server was unable to process request. ---&amp;gt;
           System.ArgumentNullException: Value cannot be null.
         at whois.whois.GetWhoIS(String HostName)
         --- End of inner exception stack trace ---
      &lt;/faultstring&gt;
      &lt;detail /&gt;
    &lt;/soap:Fault&gt;
  &lt;/soap:Body&gt;
&lt;/soap:Envelope&gt;
</code></pre>

<p>(manually formatted for easier reading)</p>

<p>Can anyone tell me what am I doing wrong? </p>

<p>Ideally both in terms of use of SOAPpy, and why the SOAP message is incorrect.</p>

<p>Thanks!</p>
"
679670,1578,2009-03-24T23:27:38Z,15,Best way to profile/optimize a website on google's appengine,"<p>I'm currently trying to optimize my website, which run on the google's appengine. It's not an easy task, because I'm not using any powerful tool.</p>

<p>Does anyone have experience in optimizing python code for this purpose?
Have you find a good python profiler?</p>
"
679731,30636,2009-03-24T23:52:58Z,9,min heap in python,"<p>I'd like to store a set of objects in a min heap by defining a custom comparison function.  I see there is a heapq module available as part of the python distribution.  Is there a way to use a custom comparator with this module?  If not, has someone else built a custom min heap?</p>
"
679806,82308,2009-03-25T00:34:50Z,11,What are the viable database abstraction layers for Python,"<p>I'm starting to get involved in an open source project <a href=""http://www.gramps-project.org/wiki/index.php?title=Main%5FPage"">Gramps</a> which is exploring switching their backend from BSDDB to a relational database. Either SQLite or MySQL we haven't fully decided and may even try to do both in some limited capacity. I'm a professional developer but I'm new to python so I'm not that familiar with the current selection of tools/libraries. I've been tasked with researching DB Abstraction Layers. <a href=""http://www.gramps-project.org/wiki/index.php?title=GEPS%5F010:%5FSQL%5FBackend"">There is currently a wiki discussion going on to compare them.</a> An object relational mapper might be nice but isn't absolutely necessary. though I know that is usually synonymous with a DB Abstraction Layer. If an ORM is included ad hock queries have to be available without to much wrestling.</p>

<p>Right now the list includes:</p>

<p><a href=""http://code.google.com/p/couchdb-python/"">CouchDB</a>
I haven't yet looked into this.</p>

<p><a href=""http://wiki.python.org/moin/DatabaseProgramming/"">DB-API</a>
this seems to be a standard python api and each db creates their own module that uses it. Even BSDDB seems to have one written but I haven't fully explored it. are the modules interchangeable?</p>

<p><a href=""http://www.sqlalchemy.org/"">SQLAlchemy</a>
This seems to be the most popular right now? but I have very limited exposure to the python world.</p>

<p><a href=""http://www.sqlobject.org/"">SQLObject</a> 
I haven't yet looked into this.</p>

<p>So what are peoples views and suggestions on database abstraction layers for python?</p>
"
679966,46071,2009-03-25T02:03:46Z,2,Problem with python curl while submitting file,"<pre><code>#!/usr/bin/python
import pycurl
import re
import StringIO


#CONSTANTS
URL = ""http://www.imagehost.org""
FILE = ""/datos/poop1.jpg""
POST_DATA = [(""a"", ""upload""), (""file[]"", (pycurl.FORM_FILE, FILE))]



buffer = StringIO.StringIO()


c = pycurl.Curl()
c.setopt( c.URL, URL )
c.setopt( c.POST, 1 )
c.setopt( c.POSTFIELDS, POST_DATA )
##c.setopt( c.HTTPPOST, POST_DATA )
c.setopt( c.USERAGENT,'Curl')
c.setopt( c.WRITEFUNCTION, buffer.write)
c.setopt(pycurl.VERBOSE, 1)

c.perform()
c.close()

#c.setopt(c.PROXY, proxyHostAndPort)
#c.setopt(c.PROXYUSERPWD, proxyAuthentication)

parse = buffer.getvalue()


pattern = re.compile('/&lt;td nowrap=""nowrap""&gt;(.+)&lt;\/td&gt;\s*&lt;td class=""link""&gt;&lt;input.+value=""([^""]+)"" \/&gt;&lt;\/td&gt;/i')

result = re.search(pattern, parse)
print result
</code></pre>

<p>The problem is in the way on how to do the post.</p>

<p>c.setopt( c.POSTFIELDS, POST_DATA ) does not accept lists, so what should I do instead of adding a list? </p>

<p>And c.setopt( c.HTTPPOST, POST_DATA ) drops :</p>

<pre><code>Traceback (most recent call last): 
  File ""pymage"", line 26, in &lt;module&gt;
c.perform() pycurl.error: (26, 'failed creating formpost data')
</code></pre>

<p>Update:</p>

<p>-----------------------------15758382912173403811539561297\r\nContent-Disposition: form-data; name=""a""\r\n\r\nupload\r\n-----------------------------15758382912173403811539561297\r\nContent-Disposition: form-data; name=""file[]""; filename=""Datos_Pegados_0a17.jpg""\r\nContent-Type: image/jpeg\r\n\r\nÿØÿà</p>

<p>That's what I get using tamper data.</p>

<p>Interesting part of the postfield:</p>

<p>form-data; name=""a""\r\n\r\nupload\r\n</p>

<p>form-data; name=""file[]""</p>

<p>So... you say the POST_DATA should be 'a=upload&amp;file[]=FILE'?</p>

<p>Update2:</p>

<pre><code>&lt;form method=""post"" action=""/"" enctype=""multipart/form-data"" onsubmit=""javascript:Upload(); return true;""&gt;

&lt;input type=""hidden"" name=""a"" value=""upload"" /&gt;

&lt;td class=""left""&gt;File:&lt;/td&gt;
td class=""right""&gt;&lt;input name=""file[]"" type=""file"" size=""20"" /&gt;&lt;/td&gt;
</code></pre>

<p>That's the code... </p>

<p>Now it's working the form-data configuration, but it's not uploading the file I believe</p>

<p>c.setopt( c.POSTFIELDS, 'a=upload&amp;file[]=/datos/poop1.jpg' )</p>

<p>I'm getting this:</p>

<pre><code>* About to connect() to www.imagehost.org port 80 (#0)
*   Trying 74.63.87.74... * connected
* Connected to www.imagehost.org (74.63.87.74) port 80 (#0)
&gt; POST / HTTP/1.1
User-Agent: Curl
Host: www.imagehost.org
Accept: */*
Content-Length: 32
Content-Type: application/x-www-form-urlencoded

&lt; HTTP/1.1 200 OK
&lt; Transfer-Encoding: chunked
&lt; Date: Wed, 25 Mar 2009 06:53:49 GMT
&lt; Content-Type: text/html
&lt; Server: nginx/0.7.11
&lt; Set-Cookie: userhash=7c09b97cc70c8c133c850a3e744b416e; expires=Thu, 25-Mar-2010 06:53:49 GMT; path=/; domain=.imagehost.org; httponly
&lt; 
* Connection #0 to host www.imagehost.org left intact
* Closing connection #0
</code></pre>
"
680032,81132,2009-03-25T02:36:07Z,2,Python: How to extract variable name of a dictionary entry?,"<p>I'm wondering how I would go about finding the variable name of a dictionary element:</p>

<p>For example:</p>

<pre><code>    &gt;&gt;&gt;dict1={}
    &gt;&gt;&gt;dict2={}

    &gt;&gt;&gt;dict1['0001']='0002'
    &gt;&gt;&gt;dict2['nth_dict_item']=dict1
    &gt;&gt;&gt;print dict2
    {'nth_dict_item': {'0001': '0002'}}
    &gt;&gt;&gt;print dict2['nth_dict_item']
    {'001': '002'}
</code></pre>

<p>How can I go about making it tell me that dict2['nth_dict_item'] is or is referencing ""dict1"" ? I want the name of the data structure it's referencing and not the data itself.</p>

<p>If I compare the output of   id(dict1) to id(dict2['nth_dict_item']) I can find they are the same.</p>

<p>But how can I turn that id back into a variable name? Is there a more direct/cleaner method of getting the information that I want to know?</p>

<p>I'm sure I'm just overlooking a function that would make my life easy but I'm pretty new to Python :)</p>

<p>Any help is appreciated, thanks!</p>

<h3>Related</h3>

<ul>
<li><a href=""http://stackoverflow.com/questions/544919/python-can-i-print-original-var-name"">python, can i print original var name?</a></li>
<li><a href=""http://stackoverflow.com/questions/592746/how-can-you-print-a-variable-name-in-python"">How can you print a variable name in python?</a></li>
</ul>

<p><hr /></p>

<p>Update: Here's why I wanted this to work:</p>

<p>I'm trying to make an app that uses a dictionary kinda like a database. I wanted the functionality of this psuedocode to function:</p>

<pre><code>dict_1={}
dict_2={}
dict_3={}

dict_1[""FooBar1.avi""]=[movie_duration,movie_type,comments]
dict_2[""FooBar2.avi""]=[movie_duration,movie_type,comments]
dict_3[""FooBar3.avi""]=[movie_duration,movie_type,comments]

dict_database[SomeUniqueIdentifier1]=dict_1
dict_database[SomeUniqueIdentifier2]=dict_2
dict_database[SomeUniqueIdentifier3]=dict_3
</code></pre>

<p>SomeUniqueIdentifier# would be a unique value that I'm using as a database key/unqiueID to look up entries.</p>

<p>I want to be able to update the ""comments"" field of FooBar1.avi by:</p>

<pre><code>WhichDict= dict_database[SomeUniqueIdentifier1]
WhichDict[WhichDict.keys()[0]][2]='newcomment'
</code></pre>

<p>instead of having to do:</p>

<pre><code>dict_database['SomeUniqueIdentifier1'][dict_database['SomeUniqueIdentifier1'].keys()[0]][2]='newcomment'
</code></pre>

<p><hr /></p>

<p>Thanks everyone. I now understand I was misunderstanding a LOT of basics (total brain fart). Will go back and fix the design. Thanks to you all!.</p>
"
680207,46646,2009-03-25T04:23:52Z,1,How do I tell which Python interpreter I'm using?,"<p>I am using Python 2.5.2. How can I tell whether it is <code>CPython</code> or <code>IronPython</code> or <code>Jython</code>?</p>

<p>Another question: how can I <strong>use a DLL</strong> developed in VB.NET in my project?</p>
"
680305,72556,2009-03-25T05:14:37Z,44,Using MultipartPostHandler to POST form-data with Python,"<p>Problem: When POSTing data with Python's urllib2, all data is URL encoded and sent as Content-Type: application/x-www-form-urlencoded.  When uploading files, the Content-Type should instead be set to multipart/form-data and the contents be MIME encoded. A discussion of this problem is here:
<a href=""http://code.activestate.com/recipes/146306/"">http://code.activestate.com/recipes/146306/</a></p>

<p>To get around this limitation some sharp coders created a library called MultipartPostHandler which creates an OpenerDirector you can use with urllib2 to mostly automatically POST with multipart/form-data. A copy of this library is here:
<a href=""http://peerit.blogspot.com/2007/07/multipartposthandler-doesnt-work-for.html"">http://peerit.blogspot.com/2007/07/multipartposthandler-doesnt-work-for.html</a></p>

<p>I am new to Python and am unable to get this library to work. I wrote out essentially the following code. When I capture it in a local HTTP proxy, I can see that the data is still URL encoded and not multi-part MIME encoded. Please help me figure out what I am doing wrong or a better way to get this done. Thanks :-)</p>

<pre><code>FROM_ADDR = 'my@email.com'

try:
    data = open(file, 'rb').read()
except:
    print ""Error: could not open file %s for reading"" % file
    print ""Check permissions on the file or folder it resides in""
    sys.exit(1)

# Build the POST request
url = ""http://somedomain.com/?action=analyze""   	
post_data = {}
post_data['analysisType'] = 'file'
post_data['executable'] = data
post_data['notification'] = 'email'
post_data['email'] = FROM_ADDR

# MIME encode the POST payload
opener = urllib2.build_opener(MultipartPostHandler.MultipartPostHandler)
urllib2.install_opener(opener)
request = urllib2.Request(url, post_data)
request.set_proxy('127.0.0.1:8080', 'http') # For testing with Burp Proxy

# Make the request and capture the response
try:
    response = urllib2.urlopen(request)
    print response.geturl()
except urllib2.URLError, e:
    print ""File upload failed...""
</code></pre>

<p>EDIT1: Thanks for your response. I'm aware of the ActiveState httplib solution to this (I linked to it above). I'd rather abstract away the problem and use a minimal amount of code to continue using urllib2 how I have been. Any idea why the opener isn't being installed and used?</p>
"
680336,46646,2009-03-25T05:34:45Z,0,Python 2.5.2 continued,"<p>This is a continuation of my question Python2.5.2
The code i developed is working fine with clr.Addreference().
Now thee problem is I have to load ny script which uses dll developed in .NET to another application.They had used QT for its implementation.There is a Script console in that application.When ii entered 'import clr' ,it was saying 'No module named clr' or 'Cannot import clr'.What shall i do?</p>
"
680826,81636,2009-03-25T09:23:52Z,5,python create slice object from string,"<p>I'd like to create a slice object from a string; right now the only way seems through a cumbersome hacky eval statement</p>

<pre><code>class getslice:
    def __getitem__(self, idx): return idx[0]
eval(""getslice()[%s, 1]"" %("":-1""))
</code></pre>

<p>thanks in advance.</p>

<p><strong>Edit</strong>: Sorry if the original prompt was not clear, the input in this case was "":-1"". The point was to parse the string. Ignacio Vazquez-Abrams's response at least solved the problem (and seems to work with reverse indexing as well), but I think my solution above is still more clear if not conceptually clean (and will work correctly if Python ever changes slicing syntax).</p>
"
680941,82488,2009-03-25T10:04:26Z,9,Python dynamic function names,"<p>I'm looking for a better way to call functions based on a variable in Python vs using if/else statements like below. Each status code has a corresponding function</p>

<pre><code>if status == 'CONNECT':
    return connect(*args, **kwargs)
elif status == 'RAWFEED':
    return rawfeed(*args, **kwargs)
elif status == 'RAWCONFIG':
    return rawconfig(*args, **kwargs)
elif status == 'TESTFEED':
    return testfeed(*args, **kwargs)
...
</code></pre>

<p>I assume this will require some sort of factory function but unsure as to the syntax</p>
"
681123,2079,2009-03-25T11:11:46Z,7,Whats the difference between list[-1:][0] and list[len(list)-1]?,"<p>Lest say you want the last element of a python list: what is the difference between</p>

<pre><code>myList[-1:][0]
</code></pre>

<p>and</p>

<pre><code>myList[len(myList)-1]
</code></pre>

<p>I thought there was no difference but then I tried this </p>

<pre><code>&gt;&gt;&gt; list = [0]
&gt;&gt;&gt; list[-1:][0]
0
&gt;&gt;&gt; list[-1:][0] += 1
&gt;&gt;&gt; list
[0]
&gt;&gt;&gt; list[len(list)-1] += 1
&gt;&gt;&gt; list
[1]
</code></pre>

<p>I was a little surprised...</p>
"
681310,1384652,2009-03-25T12:16:19Z,2,Game map from Code,"<p>It's a long one so you might want to get that cup of tea/coffee you've been holding off on ;)</p>

<p>I run a game called World of Arl, it's a turn based strategy game akin to Risk or Diplomacy. Each player has a set of cities, armies and whatnot. The question revolves around the display of these things. Currently the map is created using a background image with CSS positioning of team icons on top of that to represent cities. You can see how it looks here: <a href=""http://woarl.com/map/turn%5F32%5Fnormal.html"" rel=""nofollow"">WoA Map</a></p>

<p>The background image for the map is located here: <a href=""http://woarl.com/map/images/theMap.jpg"" rel=""nofollow"">Map background</a> and created in <a href=""http://www.omnigroup.com/applications/omnigraffle/"" rel=""nofollow"">Omnigraffle</a>. It's not designed to draw maps but I'm hopelessly incompetent with photoshop and this works for my purposes just fine.</p>

<p>The problem comes that I want to perform such fun things as pathfinding and for that I need to have the map somehow stored in code. I have tried using <a href=""http://www.pythonware.com/products/pil/"" rel=""nofollow"">PIL</a>, I have looked at incorporating it with <a href=""http://www.blender.org/"" rel=""nofollow"">Blender</a>, I tried going ""old school"" and creating tiles as from many older games and finally I tried to use SVG. I say this so you can see clearly that it's not through lack of trying that I have this problem ;)</p>

<p>I want to be able to store the map layout in code and both create an image from it and use it for things such as pathfinding. I'm using Python but I suspect that most answers will be generic. The cities other such things are stored already and easily drawn on, I want to store the layout of the landmass and features on the landmass.</p>

<p>As for pathfinding, each type of terrain has a movement cost and when the map is stored as just an image I can't access the terrain of a given area. In addition to pathfinding I wish to be able to know the terrain for various things related to the game, cities in mountains produce stone for example.</p>

<p>Is there a good way to do this and what terms should I have used in Google because the terms I tried all came up with unrelated stuff (mapping being something completely different most of the time).</p>

<p>Edit 2:
Armies can be placed anywhere on the map as can cities, well, anywhere but in the water where they'd sink, drown and probably complain (in that order).</p>

<p>After chatting to somebody on MSN who made me go over the really minute details and who has a better understanding of the game (owing to the fact that he's played it) it's occurring to me that tiles are the way to go but not the way I had initially thought. I put the bitmap down as it is now but also have a data layer of tiles, each tile has a given terrain type and thus pathfinding and suchlike can be done on it yet at the same time I still render using Omnigraffle which works pretty well.</p>

<p>I will be making an editor for this as suggested by <a href=""http://stackoverflow.com/users/66634/adam-smith"">Adam Smith</a>. I don't know that graphs will be relevant <a href=""http://stackoverflow.com/users/62014/xynth"">Xynth</a> but I've not had a chance to look into them fully yet.</p>

<p>I really appreciate all those that answered my question, thanks.</p>
"
681497,1226967,2009-03-25T13:06:42Z,7,Nullable ForeignKeys and deleting a referenced model instance,"<p>I have a ForeignKey which can be null in my model to model a loose coupling between the models. It looks somewhat like that:</p>

<pre><code>class Message(models.Model):
  sender = models.ForeignKey(User, null=True, blank=True)
  sender_name = models.CharField(max_length=255)
</code></pre>

<p>On save the senders name is written to the sender_name attribute. Now, I want to be able to delete the User instance referenced by the sender and leave the message in place.</p>

<p>Out of the box, this code always results in deleted messages as soon as I delete the User instance. So I thought a signal handler would be a good idea.</p>

<pre><code>def my_signal_handler(sender, instance, **kwargs):
  instance.message_set.clear()
pre_delete.connect(my_signal_handler, sender=User)
</code></pre>

<p>Sadly, it is by no means a solution. Somehow Django first collects what it wants to delete and then fires the pre_delete handler. </p>

<p>Any ideas? Where is the knot in my brain?</p>
"
681565,2147,2009-03-25T13:22:36Z,7,How do you deploy django applications for windows?,"<p>I'm working on a web application using <a href=""http://code.google.com/p/isapi-wsgi/"">isapi_wsgi</a> and <a href=""http://code.google.com/p/django-pyodbc/"">django-pyodbc</a>.  I'd like to have a way to install all dependencies and push the files out to the webserver.  Unfortunately, some of these are easier said than done.  In particular, handling dependencies is a pain as some of them won't install correctly even under setuptools (pywin32 is especially difficult).</p>

<p>Most of the tools that I see for automating this kind of stuff (<a href=""http://www.nongnu.org/fab/"">fabric</a> and <a href=""http://www.capify.org/"">capistrano</a>) are made for use with unix-y systems.  I would like to set up a continuous integration system, but that only solves part of the problem.  Is there any way to make life easier for a Pythonista who's forced to use Windows/IIS?</p>
"
681649,37984,2009-03-25T13:41:42Z,6,How is string.find implemented in CPython?,"<p>I was wondering if the 'find' method on strings was implemented with a linear search, or if python did something more sophisticated. The Python documentation doesn't discuss implementation details, so <a href=""http://docs.python.org/library/stdtypes.html"">http://docs.python.org/library/stdtypes.html</a> is of no help. Could someone please point me to the relevant source code?</p>
"
681853,80171,2009-03-25T14:33:55Z,3,"Any alternatives to IronPython, Python for .NET for accessing CLR from python?","<p>Are there any alternatives to Python for .NET or IronPython for accessing .NET CLR? Both of these seem to have downsides in that Python for .NET is not under active development (as far as I can tell) and you lose some features available in CPython if you use IronPython. So are there any alternatives?</p>
"
681953,20570,2009-03-25T14:52:02Z,89,Python Class Decorator,"<p>In Python 2.5, is there a way to create a decorator that decorates a class?  Specifically, I want to use a decorator to add a member to a class and change the constructor to take a value for that member.</p>

<p>Looking for something like the following (which has a syntax error on 'class Foo:':</p>

<pre><code>def getId(self): return self.__id

class addID(original_class):
    def __init__(self, id, *args, **kws):
        self.__id = id
        self.getId = getId
        original_class.__init__(self, *args, **kws)

@addID
class Foo:
    def __init__(self, value1):
        self.value1 = value1

if __name__ == '__main__':
    foo1 = Foo(5,1)
    print foo1.value1, foo1.getId()
    foo2 = Foo(15,2)
    print foo2.value1, foo2.getId()
</code></pre>

<p>Thanks,
Rob</p>

<p><strong>Edit:</strong>
Rereading this question, I guess what I'm really after is a way to do something like a C# interface in Python.  I need to switch my paradigm I suppose.</p>
"
682185,3051,2009-03-25T15:48:24Z,11,Which version of python added the else clause for for loops?,"<p>Which was the first version of python to include the <a href=""http://docs.python.org/tutorial/controlflow.html#break-and-continue-statements-and-else-clauses-on-loops"">else clause for for loops</a>? </p>

<p>I find that the python docs usually does a good job of documenting when features were added, but I can't seem to find the info on this feature. 
(It doesn't help that 'for' and 'else' are particularly difficult terms to google for on a programming website)</p>
"
682446,2183,2009-03-25T16:50:57Z,9,Splitting out the output of ps using Python,"<p>On Linux, the command ps aux outputs a list of processes with multiple columns for each stat. e.g.</p>

<pre><code>USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
...
postfix  22611  0.0  0.2  54136  2544 ?        S    15:26   0:00 pickup -l -t fifo -u
apache   22920  0.0  1.5 198340 16588 ?        S    09:58   0:05 /usr/sbin/httpd
</code></pre>

<p>I want to be able to read this in using Python and split out each row and then each column so they can be used as values.</p>

<p>For the most part, this is not a problem:</p>

<pre><code>ps = subprocess.Popen(['ps', 'aux'], stdout=subprocess.PIPE).communicate()[0]
processes = ps.split('\n')
</code></pre>

<p>I can now loop through processes to get each row and split it out by spaces, for example</p>

<pre><code>sep = re.compile('[\s]+')
for row in processes:
    print sep.split(row)
</code></pre>

<p>However, the problem is that the last column, the command, sometimes has spaces in. In the example above this can be seen in command </p>

<pre><code>pickup -l -t fifo -u
</code></pre>

<p>which would be split out as</p>

<pre><code>['postfix', '22611', '0.0', '0.2', '54136', '2544', '?', 'S', '15:26', '0:00', 'pickup', '-l', '-t', 'fifo', '-u']
</code></pre>

<p>but I really want it as:</p>

<pre><code>['postfix', '22611', '0.0', '0.2', '54136', '2544', '?', 'S', '15:26', '0:00', 'pickup -l -t fifo -u']
</code></pre>

<p>So my question is, how can I split out the columns but when it comes to the command column, keep the whole string as one list element rather than split out by spaces?</p>
"
682504,54547,2009-03-25T17:00:21Z,385,"What is a clean, pythonic way to have multiple constructors in Python?","<p>I can't find a definitive answer for this. AFAIK, you can't have multiple <code>__init__</code> functions in a Python class. So what is a good way to solve this problem? </p>

<p>Suppose I have an class called <code>Cheese</code> with the <code>number_of_holes</code> property. How can I have two ways of creating cheese-objects...</p>

<ul>
<li>one that takes a number of holes like this: <code>parmesan = Cheese(num_holes = 15)</code></li>
<li>and one that takes no arguments and just randomizes the <code>number_of_holes</code> property: <code>gouda = Cheese()</code></li>
</ul>

<p>I can think of only one way to do this, but that seems kinda clunky:</p>

<pre><code>class Cheese():
    def __init__(self, num_holes = 0):
        if (num_holes == 0):
            # randomize number_of_holes
        else:
            number_of_holes = num_holes
</code></pre>

<p>What do you say? Is there a better way?</p>
"
682675,48721,2009-03-25T17:42:49Z,10,Python Virtual Machine architecture diagrams/references,"<p>Someone could point out sites/books where I can find introductory documentation about the architecture of the Python VM? </p>

<p>I'm interested in the C version, but if there are easy-to-follow references about other implementations it could be helpful too.</p>

<p>I'm trying to find any kind of resources of higher level than plain source code (however, UML diagrams or something like that would be nice) And also, information about the design decisions involved, including tradeoffs between the different factors (performance, stability, simplicity).</p>
"
682692,76322,2009-03-25T17:47:20Z,3,Python Desktop Integration - Drag and drop,"<p>I have a pygame window that I want to know when a file has been dragged and dropped onto it. I only need to be able to fetch the name of the file. How can this be accomplished?</p>
"
682799,80656,2009-03-25T18:08:42Z,10,"What to do with ""The input line is too long"" error message?","<p>I am trying to use os.system() to call another program that takes an input and an output file. The command I use is ~250 characters due to the long folder names. </p>

<p>When I try to call the command, I'm getting an error: <code>The input line is too long</code>.</p>

<p>I'm guessing there's a <code>255 character limit</code> (its built using a C system call, but I couldn't find the limitations on that either).</p>

<p>I tried changing the directory with <code>os.chdir()</code> to reduce the folder trail lengths, but when I try using <code>os.system()</code> with <code>""..\folder\filename""</code> it apparently can't handle relative path names. Is there any way to get around this limit or get it to recognize relative paths?</p>
"
682822,18909,2009-03-25T18:14:49Z,2,Redirecting function definitions in python,"<p>This is a very contrived example as it's not easy to explain the context in which I have ended up implementing this solution. However, if anyone can answer why this particular peculiarity happens, I'd be grateful.</p>

<p>The example:</p>

<pre><code>class A(dict):  
    def __init__(self):
    	self['a'] = 'success'

    def __getitem__(self, name):
    	print 'getitem'
    	return dict.__getitem__(name)

class B(object):
    def __init__(self):
    	self._a = A()
    	setattr(self, '__getitem__', self._a.__getitem__) 

b = B()
c = b['a']
</code></pre>

<p>This outputs:</p>

<pre><code>c = b['a']
TypeError: 'B' object is unsubscriptable
</code></pre>

<p>Even though it's a bizarre way of doing this (clearly subclassing would be more logical), why doesn't it find the method I have explicitly set?</p>

<p>If I do this:</p>

<pre><code>dir(b)
</code></pre>

<p>I get this:</p>

<pre><code>['__class__', '__delattr__', '__dict__', '__doc__', '__getattribute__', '__getitem__', '__hash__', '__init__', '__module__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__str__', '__weakref__', '_a']
</code></pre>

<p>The same issue occurs with other methods such as <code>__iter__</code>. What is it about explicitly defining this method that works?</p>
"
682923,55366,2009-03-25T18:42:34Z,13,Dynamically change the choices in a wx.ComboBox(),"<p>I didn't find a better way to change the different choices in a wx.ComboBox() than swap the old ComboBox with a new one. Is there a better way?</p>

<p>Oerjan Pettersen</p>

<pre><code>#!/usr/bin/python

#20_combobox.py

import wx
import wx.lib.inspection

class MyFrame(wx.Frame):
    def __init__(self, *args, **kwargs):
    	wx.Frame.__init__(self, *args, **kwargs)

    	self.p1 = wx.Panel(self)
    	lst = ['1','2','3']
    	self.st = wx.ComboBox(self.p1, -1, choices = lst, style=wx.TE_PROCESS_ENTER)

    	self.st.Bind(wx.EVT_COMBOBOX, self.text_return)


    def text_return(self, event):
    	lst = ['3','4']
    	self.st = wx.ComboBox(self.p1, -1, choices = lst, style=wx.TE_PROCESS_ENTER)


class MyApp(wx.App):
    def OnInit(self):
    	frame = MyFrame(None, -1, '20_combobox.py')
    	frame.Show()
    	self.SetTopWindow(frame)
    	return 1

if __name__ == ""__main__"":
    app = MyApp(0)
#    wx.lib.inspection.InspectionTool().Show()
    app.MainLoop()
</code></pre>
"
682951,13055,2009-03-25T18:48:46Z,6,Data Synchronization framework / algorithm for server<->device?,"<p>I'm looking to implement data synchronization between servers and distributed clients. The data source on the server is mysql with django on top. The client can vary. Updates can take place on either client or server, and the connection between server and client is not reliable (eg. changes can be made on a disconnected cell phone, should get sync'd when the cell phone has a connection again).</p>

<p>S. Lott suggests using a version control design pattern in <a href=""http://stackoverflow.com/questions/413086/client-server-synchronization-pattern-algorithm"">this question</a>, which makes sense. I'm wondering if there are any existing packages / implementations of this I can use. Or, should I directly make use of svn/git/etc?</p>

<p>Are there other alternatives? There must be synchronization frameworks or detailed descriptions of algorithms out there, but I'm not having a lot of luck finding them. I'd appreciate if you point me in the right direction.</p>
"
683278,34329,2009-03-25T20:19:33Z,0,Can pysvn 1.6.3 be made to work with Subversion 1.6 under linux?,"<p>I see no reference on their website for this. I get pysvn to configure and build, but then it fails all the test. Has anyone had any luck getting this to work under linux?</p>
"
683462,68127,2009-03-25T21:08:11Z,44,Best way to integrate Python and JavaScript?,"<p>Is it possible to integrate Python and JavaScript?  For example, imagine you wanted to be able to define classes in JavaScript and use them from Python (or vice versa).  If so, what's the best way?  I'm interested not only if this is possible but if <strong>anyone has done it within a ""serious"" project or product</strong>.</p>

<p>I'm guessing it would be possible using <a href=""http://www.jython.org/Project/"">Jython</a> and <a href=""http://www.mozilla.org/rhino/"">Rhino</a>, for one example, but I'm curious whether or not anyone's ever actually done this, and if there are solutions for other platforms (especially <a href=""http://en.wikipedia.org/wiki/CPython"">CPython</a>).</p>
"
683493,55565,2009-03-25T21:17:45Z,1,Timeout on a HTTP request in python,"<p>Very occasionally when making a http request, I am waiting for an age for a response that never comes.  What is the recommended way to cancel this request after a reasonable period of time?</p>
"
683494,51816,2009-03-25T21:17:56Z,2,How to save an xml file to disk?,"<p>I did something similar to <a href=""http://www.postneo.com/projects/pyxml/"" rel=""nofollow"">this</a>, but couldn't find a way to write the result to an xml file.</p>
"
683542,69882,2009-03-25T21:27:52Z,8,how to put a function and arguments into python queue?,"<p>I have a python program with 2 threads ( let's name them 'source' and
'destination' ). Source thread sometimes post a message to destination
thread with some arguments. Than destination thread picks a message it
must call a corresponding function with aruments saved in message.</p>

<p>This task can be solved multiple ways. The easy one is tu put a big
'if...if..if' in destination thread's message pick cycle and call
function according to received message type and saved arguments. But this
will result in huge amounf of code ( or big lookup table ) and adding new
messages / handler function will evolve additonal step to write code in
message pick cycle.</p>

<p>Since python treats functions as first-class objects and have tuples, i want
to put a function and argumens inside a message, so than destination thread
picks a message it just call a functon saved within a message without any
knowledge what function it is.</p>

<p>I can write a code for a functions with specified number of arguments:</p>

<pre><code>from Queue import *
from thread import *
from time import *

q = Queue()

def HandleMsg( arg1, arg2 ) :
  print arg1, arg2

def HandleAnotherMsg( arg1, arg2, arg3 ) :
  print arg1, arg2, arg3

def DestinationThread( a ) :
  while True :
    (f, a, b) = q.get()
    f( a, b )

start_new_thread( DestinationThread, ( 0, ) )
print ""start""
sleep( 1 )
q.put( (HandleMsg, 1, 2) )
sleep( 1 )
print ""stop""
</code></pre>

<p>The question is: how to modify a code so i can put() a function with
any number of arguments in queue? for example HandleAnotherMsg() ?
Using q.put( (HandleAnotherMsg, 1, 2, 3) ) will rise a compilation error :(</p>
"
684109,10739,2009-03-26T00:52:51Z,0,can you distinguish between a test & a variable setting?,"<p>I like doctest but when you have complex arguments that you need to
set before you pass to a function it become really hard to read..
Hence, you start using multiple lines assigning then calling the
function that you would like to test.. This approach however, will
report that you have multiple tests rather then the real number of
tests that you have.. An example will illustrate what I mean..</p>

<pre><code>def returnme(x):
   """"""
   Returns what you pass

   &gt;&gt;&gt; y = (2, 3, 5, 7)
   &gt;&gt;&gt; returnme(y)
   (2, 3, 5, 7)
   """"""
   return x
</code></pre>

<p>In the above snippet, there is only one test and the other is just a
variable assignment, however, this is what gets reported..</p>

<pre>
    Trying:
       y = (2, 3, 5, 7)
    Expecting nothing
    ok
    Trying:
       returnme(y)
    Expecting:
       (2, 3, 5, 7)
    ok
    
    2 tests in 2 items.
    2 passed and 0 failed.
</pre>

<p>I've looked at the flags documented, surely I missing something..</p>
"
684117,NA,2009-03-26T00:55:46Z,1,XML schema,"<p>I've a schema file (.xsd), I'd like to generate a xml document using this schema. Is there any online tool available,if not what is quickest way (like couple of lines of code using vb.net).</p>

<p>Thanks for your help.</p>

<p>-Vuppala   </p>
"
684171,NA,2009-03-26T01:19:41Z,252,How to re import an updated package while in Python Interpreter?,"<p>I often test my module in the Python Interpreter, and when I see an error, I quickly update the .py file. But how do I make it reflect on the Interpreter ? So, far I have been exiting and reentering the Interpreter because re importing the file again is not working for me.</p>
"
684371,45226,2009-03-26T02:57:46Z,2,Django Template if tag not working under FastCGI when checking bool True,"<p>I have a strange issue specific to my Django deployment under Python 2.6 + Ubuntu + Apache 2.2 + FastCGI.</p>

<p>If I have a template as such:</p>

<pre><code>{% with True as something %}
   {%if something%}
      It Worked!!!
   {%endif%}
{%endwith%}
</code></pre>

<p>it should output the string ""It Worked!!!"". It does not on my production server with mod_fastcgi. </p>

<p>This works perfectly when I run locally with runserver.</p>

<p>I modified the code to the following to make it work for the sake of expediency, and the problem went away. </p>

<pre><code>{% with ""True"" as something %}
   {%if something%}
      It Worked!!!
   {%endif%}
{%endwith%}
</code></pre>

<p>It seems that the template parser, when running under FastCGI, cannot ascertain Truthiness (or Truthitude)[kudos if you get the reference] of bool variables. </p>

<p>Has anyone seen this? Do you have a solution? </p>
"
685046,3594,2009-03-26T09:24:56Z,33,"Is it safe to yield from within a ""with"" block in Python (and why)?","<p>The combination of coroutines and resource acquisition seems like it could have some unintended (or unintuitive) consequences.</p>

<p>The basic question is whether or not something like this works:</p>

<pre><code>def coroutine():
    with open(path, 'r') as fh:
        for line in fh:
            yield line
</code></pre>

<p>Which it does. (You can test it!)</p>

<p>The deeper concern is that <code>with</code> is supposed to be something an alternative to <code>finally</code>, where you ensure that a resource is released at the end of the block. Coroutines can suspend and resume execution from <em>within</em> the <code>with</code> block, so <strong>how is the conflict resolved?</strong></p>

<p>For example, if you open a file with read/write both inside and outside a coroutine while the coroutine hasn't yet returned:</p>

<pre><code>def coroutine():
    with open('test.txt', 'rw+') as fh:
        for line in fh:
            yield line

a = coroutine()
assert a.next() # Open the filehandle inside the coroutine first.
with open('test.txt', 'rw+') as fh: # Then open it outside.
    for line in fh:
        print 'Outside coroutine: %r' % repr(line)
assert a.next() # Can we still use it?
</code></pre>

<h3>Update</h3>

<p>I was going for write-locked file handle contention in the previous example, but since most OSes allocate filehandles per-process there will be no contention there. (Kudos to @Miles for pointing out the example didn't make too much sense.) Here's my revised example, which shows a real deadlock condition:</p>

<pre><code>import threading

lock = threading.Lock()

def coroutine():
    with lock:
        yield 'spam'
        yield 'eggs'

generator = coroutine()
assert generator.next()
with lock: # Deadlock!
    print 'Outside the coroutine got the lock'
assert generator.next()
</code></pre>
"
685224,55565,2009-03-26T10:36:01Z,4,separate threads in pygtk application,"<p>I'm having some problems threading my pyGTK application.  I give the thread some time to complete its task, if there is a problem I just continue anyway but warn the user.  However once I continue, this thread stops until gtk.main_quit is called.  This is confusing me.</p>

<p>The relevant code:</p>

<pre><code>class MTP_Connection(threading.Thread):
    def __init__(self, HOME_DIR, username):
        self.filename = HOME_DIR + ""mtp-dump_"" + username
        threading.Thread.__init__(self)

    def run(self):
        #test run
        for i in range(1, 10):
            time.sleep(1)
            print i
</code></pre>

<p>..........................</p>

<pre><code>start_time = time.time()
conn = MTP_Connection(self.HOME_DIR, self.username)
conn.start()
progress_bar = ProgressBar(self.tree.get_widget(""progressbar""),
                           update_speed=100, pulse_mode=True)
while conn.isAlive():
    while gtk.events_pending():
        gtk.main_iteration()
    if time.time() - start_time &gt; 5:
        self.write_info(""problems closing connection."")
        break
#after this the program continues normally, but my conn thread stops
</code></pre>
"
685253,18909,2009-03-26T10:45:11Z,0,Hierarchy / Flyweight / Instancing Problem in Python,"<p>Here is the problem I am trying to solve, (I have simplified the actual problem, but this should give you all the relevant information). I have a hierarchy like so:</p>

<pre><code>1.A
1.B
1.C
2.A
3.D
4.B
5.F
</code></pre>

<p>(This is hard to illustrate - each number is the parent, each letter is the child).</p>

<ol>
<li><p>Creating an instance of the 'letter' objects is expensive (IO, database costs, etc), so should only be done once.</p></li>
<li><p>The hierarchy needs to be easy to navigate.</p></li>
<li><p>Children in the hierarchy need to have just one parent.</p></li>
<li><p>Modifying the contents of the letter objects should be possible directly from the objects in the hierarchy.</p></li>
<li><p>There needs to be a central store containing all of the 'letter' objects (and only those in the hierarchy).</p></li>
<li><p>'letter' and 'number' objects need to be possible to create from a constructor (such as Letter(**kwargs) ).</p></li>
<li><p>It is perfectably acceptable to expect that when a letter changes from the hierarchy, all other letters will respect the same change.</p></li>
</ol>

<p>Hope this isn't too abstract to illustrate the problem.</p>

<p>What would be the best way of solving this? (Then I'll post my solution)</p>

<p>Here's an example script:</p>

<pre><code>one = Number('one')
a = Letter('a')
one.addChild(a)
two = Number('two')
a = Letter('a')
two.addChild(a)

for child in one:
    child.method1()
for child in two:
    print '%s' % child.method2()
</code></pre>
"
685351,NA,2009-03-26T11:18:44Z,2,querying through wmi & win32.client objects with python,"<p>Could someone shed some lights upon querying through wmi and win32.client objects? </p>

<p>Anytime i try to query throught win32.client object i get this error: </p>

<blockquote>
  <p><em>Error: '' object has no attribute 'UserName'</em></p>
</blockquote>

<p>though, i know (wmic class ""Win32_ComputerSystem"", wmiexplorer etc.) the certain attribute belongs to the object i'm trying to query on:</p>

<pre><code>import win32com.client
...
strComputer = "".""
objWMIService = win32com.client.Dispatch(""WbemScripting.SWbemLocator"")
objSWbemServices = objWMIService.ConnectServer(strComputer,""root/cimv2"")
colItems = objSWbemServices.ExecQuery(""Select * from Win32_ComputerSystem"")
for objItem in colItems:{
    print objItem.UserName    #Error: '' object has no attribute 'UserName'
}
...
</code></pre>

<p>And when i run query on wmi object - everything is just fine: </p>

<pre><code>import wmi
...
c = wmi.WMI()
for objItem in c.query(colItems):{
    print objItem.UserName  # this works now
}
...
</code></pre>

<p>What is causing this ""no attribute"" error? Could this be my OS issue? Running winXP pro, version 2002, sp2. Or is this because of python 2.4 version i am working on?</p>
"
685424,83069,2009-03-26T11:48:21Z,6,PyUnit: stop after first failing test?,"<p>I'm using the following code in my testing framework:</p>

<pre><code>testModules = [""test_foo"", ""test_bar""]

suite = unittest.TestLoader().loadTestsFromNames(testModules)
runner = unittest.TextTestRunner(sys.stdout, verbosity=2)
results = runner.run(suite)
return results.wasSuccessful()
</code></pre>

<p>Is there a way to make the reporting (<code>runner.run</code>?) abort after the first failure to prevent excessive verbosity?</p>
"
685488,79722,2009-03-26T12:09:36Z,1,Handling file attributes in python 3.0,"<p>I am currently developing an application in python 3 and i need to be able to hide certain files from the view of people. i found a few places that used the win32api and win32con but they don't seem to exist in python 3.</p>

<p>Does anyone know if this is possible without rolling back or writing my own attribute library in C++</p>
"
685533,83080,2009-03-26T12:24:44Z,11,python convert microsoft office docs to plain text on linux,"<p>Any recomendations on a method to convert .doc, .ppt, and .xls to plain text on linux using python? Really any method of conversion would be useful. I have already looked at using Open Office but, I would like a solution that does not require having to install Open Office.</p>
"
685589,68457,2009-03-26T12:37:53Z,5,Problem using Python comtypes library to add a querytable to Excel,"<p>I'm trying to create a QueryTable in an excel spreadsheet using the Python comtypes library, but getting a rather uninformative error...</p>

<p>In vba (in a module within the workbook), the following code works fine:</p>

<pre><code>Sub CreateQuery()
    Dim con As ADODB.Connection
    Dim rs As ADODB.Recordset
    Dim ws As Worksheet
    Dim qt As QueryTable

    Set ws = ActiveWorkbook.Sheets(1)

    Set con = New ADODB.Connection
    con.Open (""Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\Path\to\Db.mdb;"")

    Set rs = New ADODB.Recordset
    rs.Open ""Select * from [tbl Base Data];"", con

    Set qt = ws.QueryTables.Add(rs, ws.Range(""A1""))
    qt.Refresh
End Sub
</code></pre>

<p>But the following Python code:</p>

<pre><code>import sys
import comtypes.client as client

def create_querytable():
    constring = ""Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\\Path\\to\\Db.mdb""
    conn = client.CreateObject(""ADODB.Connection"", dynamic = True)
    rs = client.CreateObject(""ADODB.Recordset"", dynamic = True)

    SQL = ""Select * from [tbl Base Data];""

    conn.Open(constring)
    rs.Open(SQL, conn)
    excel = client.CreateObject(""Excel.Application"", dynamic = True)
    excel.Visible = True
    ws = excel.Workbooks.Add().Sheets(1)
    qt = ws.QueryTables.Add(rs, ws.Range[""A1""])
    qt.Refresh()
    rs.Close()
    conn.Close()
</code></pre>

<p>Throws the unhelpful error message:</p>

<pre><code>Traceback (most recent call last):
  File ""&lt;pyshell#34&gt;"", line 1, in &lt;module&gt;
    create_querytable()
  File ""C:/Documents and Settings/cvmne250/Desktop/temp.py"", line 17, in create_querytable
    qt = ws.QueryTables.Add(rs, ws.Range[""A1""])
  File ""G:\ISA\SPSS\comtypes\lib\comtypes\client\lazybind.py"", line 160, in caller
  File ""G:\ISA\SPSS\comtypes\lib\comtypes\automation.py"", line 628, in _invoke
COMError: (-2147352567, 'Exception occurred.', (None, None, None, 0, None))
</code></pre>

<p>Any ideas on what's happening here?</p>

<p>Thanks!</p>
"
685671,25680,2009-03-26T13:01:52Z,0,"In Python, how do I take a list and reduce it to a list of duplicates?","<p>I have a list of strings that should be unique. I want to be able to check for duplicates quickly. Specifically, I'd like to be able to take the original list and produce a new list containing any repeated items. I don't care how many times the items are repeated so it doesn't have to have a word twice if there are two duplicates.</p>

<p>Unfortunately, I can't think of a way to do this that wouldn't be clunky. Any suggestions?</p>

<p>EDIT:
Thanks for the answers and I thought I'd make a clarification. I'm not concerned with having a list of uniques for it's own sake. I'm generating the list based off of text files and I want to know what the duplicates are so I can go in the text files and remove them if any show up.</p>
"
685713,82316,2009-03-26T13:10:05Z,0,Is there any particular reason why this syntax is used for instantiating a class?,"<p>I was wondering if anyone knew of a particular reason (other than purely stylistic) why the following languages these syntaxes to initiate a class?</p>

<p>Python:</p>

<pre><code>class MyClass:
    def __init__(self):

x = MyClass()
</code></pre>

<p>Ruby:</p>

<pre><code>class AnotherClass
    def initialize()
    end
end

x = AnotherClass.new()
</code></pre>

<p>I can't understand why the syntax used for the constructor and the syntax used to actually get an instance of the class are so different. Sure, I know it doesn't really make a difference but, for example, in ruby what's wrong with making the constructor ""new()""?</p>
"
685732,745,2009-03-26T13:16:07Z,1,How to compile Python 1.0,"<p>For some perverse reason, I want to try Python 1.0.. How would I go about compiling it, or rather, what is the earlier version that will compile cleanly with current compilers?</p>

<p>I'm using Mac OS X 10.5, although since it's for nothing more than curiosity (about how the language has changed), compiling in a Linux virtual machine is possible too..</p>
"
685758,55562,2009-03-26T13:22:32Z,13,Pythonic ways to use 'else' in a for loop,"<p>I have hardly ever noticed a python program that uses else in a for loop.</p>

<p>I recently used it to perform an action based on the loop variable condition while exiting; as it is in the scope.</p>

<p>What is the pythonic way to use an else in a for loop? Are there any notable use cases?</p>

<p>And, yea. I dislike using break statement. I'd rather set the looping condition complex. Would I be able to get any benefit out of it, if I don't like to use break statement anyway.</p>

<p>Worth noting that for loop has an else since the language inception, the first ever version.</p>
"
685869,83125,2009-03-26T13:45:56Z,10,mysqldb on python 2.6+ (win32),"<p>I am currently using python 2.6 and I would like to use the win32 mysqldb module. Unfortunately it seems it needs the 2.5 version of Python. Is there any way to get rid of this mismatch in the version numbers and install mysqldb with python 2.6?</p>
"
685874,46411,2009-03-26T13:47:05Z,3,Why does setuptools sometimes delete and then re-install the exact same egg?,"<p>I'm trying to install an egg on a computer where an identical egg already exists. Why does it remove the egg and then re-install it? I'm calling easy_install from a script with the options:</p>

<pre><code>['-v', '-m', '-f', 'R:/OPTIONS/Stephen/python_eggs', 'mypkg==1.0_r2009_03_12']
</code></pre>

<p>While running the easy_install command this was observed:</p>

<pre><code>Searching for mypkg==1.0-r2009-03-12
Best match: calyon 1.0-r2009-03-12
Processing calyon-1.0_r2009_03_12-py2.4-win32.egg
Removing d:\devtools\python24\lib\site-packages\mypkg-1.0_r2009_03_12-py2.4-win32.egg
Copying mypkg-1.0_r2009_03_12-py2.4-win32.egg to d:\devtools\python24\lib\site-packages
</code></pre>

<p>What causes this? Why is it that some times the egg is removed and re-installed, and on other occasions the egg is preserved? I've seen it happen a few times on my own PC but I'm not sure how to consistently re-produce the behavior.</p>

<p>I'm using setuptools 0.6c9</p>
"
686147,86643,2009-03-26T14:57:13Z,3,URL tree walker in Python?,"<p>For URLs that show file trees, such as <a href=""http://pypi.python.org/packages/2.5"" rel=""nofollow"">Pypi packages</a>,
is there a small solid module to walk the URL tree and list it like <code>ls -lR</code>?<br />
I gather (correct me) that there's no standard encoding of file attributes,
link types, size, date ... in html <code>&lt;A</code> attributes<br />
so building a solid URLtree module on shifting sands is tough.<br />
But surely this wheel (<code>Unix file tree -&gt; html -&gt; treewalk API -&gt; ls -lR or find</code>)
has been done?<br />
(There seem to be several spiders / web crawlers / scrapers out there, but they look ugly and ad hoc so far, despite BeautifulSoup for parsing).</p>
"
686296,15963,2009-03-26T15:33:57Z,9,Writing binary data to a socket (or file) with Python,"<p>Let's say I have a socket connection, and the 3rd party listener on the other side expects to see data flowing in a very structured manner. For example, it looks for an unsigned byte that denotes a type of message being sent, followed by an unsigned integer that denotes the length of message, then another unsigned byte which is really a bit field with some flags set or unset and etc...</p>

<p>How would I do this in python? I'm just wondering how to reliably generate this data and make sure I'm sending it correctly (i.e. that I'm really sending an unsigned byte rather than say a signed integer or worse, a string).</p>
"
686690,NA,2009-03-26T17:01:42Z,1,Embed Python script,"<p>I have some Python Scripts which I would like to use from my VB.NET class library however instead of increasing the amount of files that I distribute is it possible to embed the script into my project/dll in Visual Studio and then run the script from the dll during my program runtime?</p>

<p>Thanks for any help.</p>

<p>Rob</p>
"
686715,83100,2009-03-26T17:10:21Z,2,Python: Why can't I modify the current scope within a function using locals()?,"<p>Why does creating/modifying a member of locals() not work within a function?</p>

<pre><code>Python 2.5 (release25-maint, Jul 20 2008, 20:47:25)
[GCC 4.1.2 20061115 (prerelease) (Debian 4.1.1-21)] on linux2
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.

&gt;&gt;&gt; # Here's an example of what I expect to be possible in a function:
&gt;&gt;&gt; a = 1
&gt;&gt;&gt; locals()[""a""] = 2
&gt;&gt;&gt; print a
2

&gt;&gt;&gt; # ...and here's what actually happens:
&gt;&gt;&gt; def foo():
...  b = 3
...  locals()[""b""] = 4
...  print b
...
&gt;&gt;&gt; foo()
3
</code></pre>
"
686717,52265,2009-03-26T17:10:34Z,10,"Python, Convert 9 tuple UTC date to MySQL datetime format","<p>I am parsing RSS feeds with the format as specified here: <a href=""http://www.feedparser.org/docs/date-parsing.html"">http://www.feedparser.org/docs/date-parsing.html</a></p>

<p>date tuple (2009, 3, 23, 13, 6, 34, 0, 82, 0)</p>

<p>I am a bit stumped at how to get this into the MySQL datetime format (Y-m-d H:M:S)?</p>
"
686798,20003,2009-03-26T17:31:25Z,1,pygame is screwing up ctypes,"<pre><code>import mymodule, ctypes
#import pygame

foo = ctypes.cdll.MyDll.foo

print 'success'
</code></pre>

<p>if i uncomment the <code>import pygame</code> this fails with <code>WindowsError: [Errno 182] The operating system cannot load %1</code>.  the stack frame is in ctypes python code, trying to load MyDll.  win32 error code 182 is <code>ERROR_INVALID_ORDINAL</code>.  if the pygame import is not there, the script runs successfully.</p>

<p>Update: If I run it outside the debugger, the %1 is filled with 'libpng13.dll', which is in the working directory and referenced by MyDll, and pygame is certainly loading some version of libpng. I have no idea how I would resolve this.</p>
"
686899,18909,2009-03-26T18:03:08Z,1,Redirecting function definitions in python,"<p>Pointing the class method at the instance method is clearly causing problems: </p>

<pre><code>class A(dict):  		
    def __getitem__(self, name):
    	return dict.__getitem__(self, name)

class B(object):
    def __init__(self):
    	self.a = A()
    	B.__getitem__ = self.a.__getitem__ 

b1 = B()
b1.a['a'] = 5
b2 = B()
b2.a['b'] = 10

c = b1['a']
d = b2['b']
</code></pre>

<p>Gives this error:</p>

<pre><code>  File ... in __getitem__
    return dict.__getitem__(self, name)
KeyError: 'a'
</code></pre>

<p>What should I be doing here instead?</p>
"
687177,51816,2009-03-26T19:19:53Z,3,How to get the root node of an xml file in Python?,"<p>Basically I am using:</p>

<p>from xml.etree import ElementTree as ET</p>

<pre><code>path = 'C:\cool.xml'
et = ET.parse ( path )
</code></pre>

<p>But I am not sure how to get the root from et?</p>
"
687239,51816,2009-03-26T19:34:05Z,15,Is there a function in Python to list the attributes and methods of a particular object?,"<p>Is there a function in Python to list the attributes and methods of a particular object?</p>

<p>Something like:</p>

<pre><code>ShowAttributes ( myObject )

   -&gt; .count
   -&gt; .size

ShowMethods ( myObject )

   -&gt; len
   -&gt; parse
</code></pre>
"
687295,36680,2009-03-26T19:47:45Z,348,How do I do a not equal in Django queryset filtering?,"<p>In Django model QuerySets, I see that there is a <code>__gt</code> and <code>__lt</code> for comparitive values, but is there a <code>__ne</code>/<code>!=</code>/<code>&lt;&gt;</code> (<strong>not equals</strong>?)</p>

<p>I want to filter out using a not equals:</p>

<p>Example:</p>

<pre><code>Model:
    bool a;
    int x;
</code></pre>

<p>I want</p>

<pre><code>results = Model.objects.exclude(a=true, x!=5)
</code></pre>

<p>The <code>!=</code> is not correct syntax. I tried <code>__ne</code>, <code>&lt;&gt;</code>.</p>

<p>I ended up using:</p>

<pre><code>results = Model.objects.exclude(a=true, x__lt=5).exclude(a=true, x__gt=5)
</code></pre>
"
687487,80171,2009-03-26T20:39:57Z,0,How to set up Python for .NET with Python 2.6.1?,"<p>The ""final"" release of Python for .NET (<a href=""http://sourceforge.net/project/showfiles.php?group%5Fid=162464&amp;package%5Fid=183296&amp;release%5Fid=537499"" rel=""nofollow"" title=""link"">link</a>) isn't pre-compiled for Python 2.6. I don't have a problem changing the compilation symbol to PYTHON26 as specified in the docs, the solution rebuilds just fine, but when attempting to import the CLR, I get an error indicating that python26.dll is missing. Anyone know how to build this file? It doesn't seem to be part of the solution, but I might be missing something obvious.</p>
"
687703,NA,2009-03-26T21:52:07Z,5,Python game programming: is my IO object a legitimate candidate for being a global variable?,"<p>I'm programming a game in Python, where all IO activities are done by an IO object (in the hope that it will be easy to swap that object out for another which implements a different user interface). Nearly all the other objects in the game need to access the IO system at some point (e.g. printing a message, updating the position of the player, showing a special effect caused by an in-game action), so my question is this:</p>

<p>Does it make sense for a reference to the IO object to be available globally?</p>

<p>The alternative is passing a reference to the IO object into the <code>__init__()</code> of every object that needs to use it. I understand that this is good from a testing point of view, but is this worth the resulting ""function signature pollution""?</p>

<p>Thanks.</p>
"
687863,51816,2009-03-26T22:52:38Z,1,How to get upper paths from a single path?,"<p>How to get upper paths from a single path?</p>

<p>So say you have a path like:</p>

<pre><code>'C:\a\b\c\d\'
</code></pre>

<p>How do I get to <code>'C:\a\b'</code> or <code>'C:\a\b\c'</code></p>

<p>Is there a pythonic way to do this?</p>
"
688245,76288,2009-03-27T01:57:33Z,17,Is there a better Python bundle for textmate than the one in the bundle repository?,"<p>At this time Textmate's official Python bundle is really bare bones, especially in comparison to the Ruby bundle. Does anyone know of a Python bundle that is more complete?</p>

<p>EDIT:</p>

<p>I am fully aware that there are editors and environments that are better suited to Python development, but I am really just interested to see if there is a third party Textmate bundle available.</p>
"
688302,83435,2009-03-27T02:19:14Z,15,How do I make a command line text editor?,"<p>I have gotten to know my way around a few programming languages, and I'd like to try my hand at making a command-line text editor -- something that runs in the terminal, like vim/emacs/nano, but is pure text (no guis, please). Preferably, I'd like to do this in python. Where do I start? Are there any (python) libraries to do command-line applications?</p>
"
688461,30105,2009-03-27T03:45:46Z,0,Reading and Grouping a List of Data in Python,"<p>I have been struggling with managing some data.  I have data that I have turned into a list of lists each basic sublist has a structure like the following</p>

<pre><code>&lt;1x&gt;begins
&lt;2x&gt;value-1
&lt;3x&gt;value-2
&lt;4x&gt;value-3
 some indeterminate number of other values
&lt;1y&gt;next observation begins
&lt;2y&gt;value-1
&lt;3y&gt;value-2
&lt;4y&gt;value-3
 some indeterminate number of other values
</code></pre>

<p>this continues for an indeterminate number of times in each sublist</p>

<p>EDIT I need to get all the occurrences of &lt;2,&lt;3 &amp; &lt;4 separated out and grouped together I am creating a new list of lists [[&lt;2x>value-1,&lt;3x>value-2, &lt;4x>value-3], [&lt;2y>value-1, &lt;3y>value-2, &lt;4y>value-3]]</p>

<p>EDIT all of the lines that follow &lt;4x> and &lt;4y> (and for that matter &lt;4anyalpha> have the same type of coding and I don't know a-priori how high the numbers can go-just think of these as sgml tags that are not closed I used numbers because my fingers were hurting from all the coding I have been doing today. </p>

<p>The solution I have come up with finally is not very pretty</p>

<pre><code> listINeed=[]
 for sublist in biglist:
    for line in sublist:
        if '&lt;2' in line:
            var2=line
        if '&lt;3' in line:
            var3=line
        if '&lt;4' in line:
            var4=line
            templist=[]
            templist.append(var2)
            templist.append(var3)
            templist.append(var4)
            listIneed.append(templist)
            templist=[]
            var4=var2=var3=''
</code></pre>

<p>I have looked at ways to try to clean this up but have not been successful. This works fine  I just saw this as another opportunity to learn more about python because I would think that this should be processable by a one line function.  </p>
"
688740,3834,2009-03-27T06:36:30Z,7,How to Make sure the code is still working after refactoring ( Dynamic language),"<p>How to make sure that code is still working after refactoring ( i.e, after variable name change)?</p>

<p>In static language, if a class is renamed but other referring class is not, then I will get a compilation error.  </p>

<p>But in dynamic language there is no such safety net, and your code can break during refactoring <strong>if you are not careful enough</strong>. You can use unit test,  but when you are using mocks it's pretty hard to know the name changes and as a consequence, it may not help.</p>

<p>How to solve this problem?</p>
"
688766,8024,2009-03-27T06:52:35Z,6,Getting 401 on Twitter OAuth POST requests,"<p>I am trying to use Twitter OAuth and my <code>POST</code> requests are failing with a <code>401</code> (<code>Invalid OAuth Request</code>) error.</p>

<p>For example, if I want to post a new status update, I am sending a HTTP <code>POST</code> request to <code>https://twitter.com/statuses/update.json</code> with the following parameters - </p>

<pre><code>status=Testing&amp;oauth_version=1.0&amp;oauth_token=xxx&amp;
oauth_nonce=xxx&amp;oauth_timestamp=xxx&amp;oauth_signature=xxx&amp;
oauth_consumer_key=xxx&amp;in_reply_to=xxx&amp;oauth_signature_method=HMAC-SHA1`
</code></pre>

<p>My <code>GET</code> requests are all working fine. I can see on the mailing lists that a lot of people have had identical problems but I could not find a solution anywhere.</p>

<p>I am using the <code>oauth.py</code> Python library.</p>
"
689339,68557,2009-03-27T11:09:06Z,1,"Python XML - build flat record from dynamic nested ""node"" elements","<p>I need to parse an XML file and build a record-based output from the data.  The problem is that the XML is in a ""generic"" form, in that it has several levels of nested ""node"" elements that represent some sort of data structure.  I need to build the records dynamically based on the deepest level of the ""node"" element.  Some example XML and expected output are at the bottom.</p>

<p>I am most familiar w/ python's ElementTree, so I'd prefer to use that but I just can't wrap my head around a way to dynamically build the output record based on a dynamic node depth.  Also - we can't assume that the nested nodes will be x levels deep, so just hardcoding each level w/ a loop isn't possible.  Is there a way to parse the XML and build the output on the fly?</p>

<p>Some Additional Notes:</p>

<ul>
<li>The node names are all ""node"" except the parent and detail info (rate, price, etc)</li>
<li>The node depth is not static. So - assume further levels than displayed in the sample </li>
<li>Each ""level"" can have multiple sub-levels. So - you need to loop on each child ""node"" to properly build each record.</li>
</ul>

<p>Any ideas / input would be greatly appreciated.</p>

<pre><code>&lt;root&gt;
   &lt;node&gt;101
      &lt;node&gt;A
         &lt;node&gt;PlanA     
            &lt;node&gt;default
                &lt;rate&gt;100.00&lt;/rate&gt;
            &lt;/node&gt;
            &lt;node&gt;alternative
                &lt;rate&gt;90.00&lt;/rate&gt;
            &lt;/node&gt;
         &lt;/node&gt;
      &lt;/node&gt;
   &lt;/node&gt;
   &lt;node&gt;102
      &lt;node&gt;B
         &lt;node&gt;PlanZZ     
            &lt;node&gt;Group 1
               &lt;node&gt;default
                   &lt;rate&gt;100.00&lt;/rate&gt;
               &lt;/node&gt;
               &lt;node&gt;alternative
                   &lt;rate&gt;90.00&lt;/rate&gt;
               &lt;/node&gt;
            &lt;/node&gt;
            &lt;node&gt;Group 2
               &lt;node&gt;Suba
                  &lt;node&gt;default
                      &lt;rate&gt;1.00&lt;/rate&gt;
                  &lt;/node&gt;
                      &lt;node&gt;alternative
                      &lt;rate&gt;88.00&lt;/rate&gt;
                  &lt;/node&gt;
               &lt;/node&gt;
               &lt;node&gt;Subb
                  &lt;node&gt;default
                      &lt;rate&gt;200.00&lt;/rate&gt;
                  &lt;/node&gt;
                      &lt;node&gt;alternative
                      &lt;rate&gt;4.00&lt;/rate&gt;
                  &lt;/node&gt;
               &lt;/node&gt;
            &lt;/node&gt;
         &lt;/node&gt;
      &lt;/node&gt;  
   &lt;/node&gt;
&lt;/root&gt;
</code></pre>

<p>The Output would look like this:</p>

<pre><code>SRV  SUB  PLAN   Group    SubGrp  DefRate   AltRate
101  A    PlanA                   100       90
102  B    PlanB  Group1           100       90
102  B    PlanB  Group2   Suba    1         88
102  B    PlanB  Group2   Subb    200       4
</code></pre>
"
689384,4172,2009-03-27T11:26:12Z,0,PyQt4 and QtWebKit - how to auto scroll the view?,"<p>I got a <code>QtWebKit.QWebView</code> widget in a PyQt application window that I use to display text and stuff for a chat-like application.</p>

<pre><code>    self.mainWindow = QtWebKit.QWebView()
    self.mainWindow.setHtml(self._html)
</code></pre>

<p>As the conversation gets longer the vertical scrollbar appears. </p>

<p>What I'd like to get, is to scroll the displayed view to the bottom when it's needed. How can I do it? Or, maybe, I shouldn't use <code>QWebView</code> widget for this?</p>
"
689560,83609,2009-03-27T12:19:16Z,3,"Building Python PIL for JPEG looks okay, but fails the selftest","<p>I'm on Fedora Core 6 (64 bit)</p>

<p>after ""yum install libjpeg-devel"" I have downloaded and built PIL. It gives the message:</p>

<p>--- JPEG support ok</p>

<p>Looks like JPEG built okay, but when running selftest.py:</p>

<p>IOError: decoder jpeg not available</p>

<p>Why would it appear to have built correctly, but fail the selftest?</p>
"
689831,12870,2009-03-27T13:48:37Z,5,Changing timezone on an existing Django project,"<p>Like an idiot, I completely overlooked the timezone setting when I first built an application that collects datetime data.</p>

<p>It wasn't an issue then because all I was doing was ""time-since"" style comparisons and ordering. Now I need to do full reports that show the actual datetime and of course, they're all stored at America/Chicago (the ridiculous Django default).</p>

<p>So yes. I've got a medium sized database full of these dates that are incorrect. I want to change <code>settings.TIME_ZONE</code> to <code>'UTC'</code> but that doesn't help my existing data.</p>

<p>What's the best (read: easiest, quickest) way to convert all that Model data en-masse?</p>

<p>(All the data is from within the past two months, so there's thankfully no DST to convert)</p>

<p>This project is currently on SQLite but I have another project on PostgreSQL with a similar problem that I might want to do the same on before DST kicks in... So ideally a DB-agnostic answer.</p>
"
690108,80363,2009-03-27T14:58:35Z,5,How to prevent every malicious file upload on my server? (check file type)?,"<p>my proble is to avoid that users upload some malicious file on my web-server.
Im working on linux environment (debian).</p>

<p>Actually the uploads are handled via php by this code:</p>

<pre><code>function checkFile($nomeFile, $myExt = false){
if($myExt != false){ $goodExt = ""_$myExt"".""_""; }else{ $goodExt = ""_.jpg_.bmp_.zip_.pdf_.gif_.doc_.xls_.csv_.docx_.rar_""; }
$punto = strrpos($nomeFile, '.');
$ext = ""_"".substr($nomeFile, $punto, 8).""_"";
if(stristr($goodExt, $ext)){ return 1; }else{ return 0; }
}
</code></pre>

<p>here i can specify the extensions allowed to be uploaded, and if the file dont meet them i delete as soon as the upload is completed.
But this way let the user free to change the file extension with a simple rename.. and thats bad for me; even if a file.exe (for example) wont never be executed if is renamed in file.jpg (am i right?), i dont want to have potential danger files on my server.</p>

<p>There is a way, in php, python, or whatelse can a unix system run easly, to check the truly type of a file?</p>

<p>I've tried the python mimetypes module, but it retrieve the ipotetical mime-type of the file.. based on the extension -.-</p>
"
690171,73253,2009-03-27T15:17:13Z,3,Why isn't keyword DateField.input_formats recognized in django 1.0.2 and Python 2.5?,"<p>With django 1.0.2 and Python 2.5, when I use the keyword <code>DateField.input_formats</code>, I get the error that <code>__init__()</code> got an unexpected keyword argument <code>'input_formats'</code>. When I look in the <code>__init__</code> file, I don't see <code>input_formats</code> as one of the acceptable keyword arguments.</p>

<p>I thought that <code>input_formats</code> had been around long enough that it should be in there. Is the <code>input_formats</code> keyword not supported in this configuration? If not, how can I acquire an updated <code>__init__</code> that does support it? Thank you.</p>

<p>As suggested in the comment, I have added code below. I suspect the problem is that I am confusing the <code>DateField</code> form and <code>DateField</code> model, but I would be pleased if someone could confirm that.</p>

<pre><code>from django.db import models

class Payment(models.Model):
    date_paid = models.DateField(blank=True, db_index=True, input_formats=['%m/%d/%y'])
</code></pre>
"
690221,50272,2009-03-27T15:26:56Z,9,Is it ever polite to put code in a python configuration file?,"<p>One of my favorite features about python is that you can write configuration files in python that are very simple to read and understand.  If you put a few boundaries on yourself, you can be pretty confident that non-pythonistas will know exactly what you mean and will be perfectly capable of reconfiguring your program.</p>

<p>My question is, what exactly are those boundaries?  My own personal heuristic was</p>

<ol>
<li>Avoid flow control.  No functions, loops, or conditionals.  Those wouldn't be in a text config file and people aren't expecting to have understand them.  In general, it probably shouldn't matter the order in which your statements execute.</li>
<li>Stick to literal assignments.  Methods and functions called on objects are harder to think through.  Anything implicit is going to be a mess.  If there's something complicated that has to happen with your parameters, change how they're interpreted.</li>
<li>Language keywords and error handling are right out.</li>
</ol>

<p>I guess I ask this because I came across a situation with my Django config file where it seems to be useful to break these rules.  I happen to like it, but I feel a little guilty.  Basically, my project is deployed through svn checkouts to a couple different servers that won't all be configured the same (some will share a database, some won't, for example).  So, I throw a hook at the end:</p>

<pre><code>try:
    from settings_overrides import *
    LOCALIZED = True
except ImportError:
    LOCALIZED = False
</code></pre>

<p>where settings_overrides is on the python path but outside the working copy.  What do you think, either about this example, or about python config boundaries in general?</p>
"
690527,66319,2009-03-27T16:45:50Z,1,Is it possible to Access a Users Sent Email over POP?,"<p>I have been asked to quote a project where they want to see sent email using POP. I am pretty sure this is not possible, but I thought if it was.</p>

<p>So is it possible given a users POP email server details to access their sent mail?</p>

<p>If so any examples in Python or fetchmail?</p>

<p>Regards</p>

<p>Mark</p>
"
690622,11522,2009-03-27T17:04:19Z,70,What's a standard way to do a no-op in python?,"<p>I often find myself writing if / elif / else constructs in python, and I want to include options which can occur, but for which the corresponding action is to do nothing. I realise I could just exclude those if statements, but for readability I find it helps to include them all, so that if you are looking through the code you can see what happens as a result of each option. How do I code the no-op? Currently, I'm doing it like this:</p>

<pre><code>no_op = 0

if x == 0:
    y = 2 * a
elif x == 1:
    z = 3 * b
elif x == 3:
    no_op
</code></pre>

<p>(The code is actually quite a bit longer than that, and more complicated. This is just to illustrate the structure).</p>

<p>I don't like using a variable as a no-op, but it's the neatest way I could think of. Is there a better way?</p>
"
690688,42188,2009-03-27T17:20:51Z,0,Django: Permalinks for Admin,"<p>I know the link template to reach an object is like following:</p>

<pre><code>""{{ domain }}/{{ admin_dir }}/{{ appname }}/{{ modelname }}/{{ pk }}""
</code></pre>

<p>Is there a way built-in to get a permalink for an object?</p>

<pre><code>from django.contrib import admin

def get_admin_permalink(instance, admin_site=admin.site):
    # returns admin URL for instance change page
    raise NotImplemented
</code></pre>

<h3>EDIT</h3>

<p>It seems in v1.1 <a href=""http://www.codekoala.com/blog/2009/feb/24/pluggable-django-apps-and-djangos-admin/"" rel=""nofollow""><code>admin</code> has named URLs</a>. Unfortunately it's not yet released.</p>
"
690723,30642,2009-03-27T17:30:45Z,13,Log all errors to console or file on Django site,"<p>How can I get Django 1.0 to write <b>all</b> errors to the console or a log file when running runserver in debug mode?  </p>

<p>I've tried using a middleware class with process_exception function as described in the accepted answer to this question:</p>

<p><a href=""http://stackoverflow.com/questions/238081/how-do-you-log-server-errors-on-django-sites"">http://stackoverflow.com/questions/238081/how-do-you-log-server-errors-on-django-sites</a></p>

<p>The process_exception function is called for some exceptions (eg: assert(False) in views.py) but process_exception is not getting called for other errors like ImportErrors (eg: import thisclassdoesnotexist in urs.py).  I'm new to Django/Python.  Is this because of some distinction between run-time and compile-time errors?  But then I would expect runserver to complain if it was a compile-time error and it doesn't.</p>

<p>I've watched Simon Willison's fantastic presentation on Django debugging (<a href=""http://simonwillison.net/2008/May/22/debugging/"">http://simonwillison.net/2008/May/22/debugging/</a>) but I didn't see an option that would work well for me.</p>

<p>In case it's relevant, I'm writing a Facebook app and Facebook masks HTTP 500 errors with their own message rather than showing Django's awesomely informative 500 page.  So I need a way for <b>all</b> types of errors to be written to the console or file.</p>

<p><b>Edit:</b> I guess my expectation is that if Django can return a 500 error page with lots of detail when I have a bad import (ImportError) in urls.py, it should be able to write the same detail to the console or a file without having to add any additional exception handling to the code.  I've never seen exception handling around import statements.</p>

<p>Thanks,
Jeff</p>
"
690856,192337,2009-03-27T18:05:22Z,8,Django or CodeIgniter for Turn-Key Web Application,"<p>I'm going to build a turn-key solution for a vertical market, and would like to offer both options: software as a service, and give them the opportunity to host the application on their own. In other words, I'm aiming to have similar deployment options as Joel's FogBugz.</p>

<p>I'm a Python programmer, and I could fly over the project with Django. There are several reasons I prefer PHP though:</p>

<p>1) Django installation, and configuration assumes you have access to a shell (my target is not the programmer type). Although I could offer installation service, but not on their servers.</p>

<p>2) Django runs only on some specific hosts that must take special care to enable it. Installing mod_python/mod_wsgi, and most likely the minority of my potential clients would have root access, or even a cpanel.</p>

<p>3) Using PHP would mean I could run it on their existing server. I would have no need to move them to a Django-enabled server, and no downtime for their emails, while the DNS updates.</p>

<p>On the other hand, I have very little experience with PHP. Smarty as a templating language looks nice, and works similarly to Django templates. It doesn't offer template inheritance though, except in a very hackish way in which I wish not to use as it could break the application if the designer messes them up. What do you think? Thanks in advance!</p>
"
691045,68127,2009-03-27T18:51:53Z,16,"How do you determine if an IP address is private, in Python?","<p>In Python, what is the best way to determine if an IP address (e.g., <code>'127.0.0.1'</code> or <code>'10.98.76.6'</code>) is on a <a href=""http://en.wikipedia.org/wiki/Private%5Fnetwork"">private network</a>?  The code does not sound difficult to write.  But there may be more edge cases than are immediately apparent, and there's IPv6 support to consider, etc.  Is there an existing library that does it?</p>
"
691148,82316,2009-03-27T19:20:43Z,11,Pythonic way to implement a tokenizer,"<p>I'm going to implement a tokenizer in Python and I was wondering if you could offer some style advice?</p>

<p>I've implemented a tokenizer before in C and in Java so I'm fine with the theory, I'd just like to ensure I'm following pythonic styles and best practices.</p>

<p>Listing Token Types:</p>

<p>In Java, for example, I would have a list of fields like so:</p>

<pre><code>public static final int TOKEN_INTEGER = 0
</code></pre>

<p>But, obviously, there's no way (I think) to declare a constant variable in Python, so I could just replace this with normal variable declarations but that doesn't strike me as a great solution since the declarations could be altered.</p>

<p>Returning Tokens From The Tokenizer:</p>

<p>Is there a better alternative to just simply returning a list of tuples e.g. </p>

<pre><code>[ (TOKEN_INTEGER, 17), (TOKEN_STRING, ""Sixteen"")]?
</code></pre>

<p>Cheers,</p>

<p>Pete</p>
"
691217,199,2009-03-27T19:40:03Z,3,How do I order referenced objects from a Google App Engine Datastore query?,"<p>I have <code>Exhibit</code> objects which reference <code>Gallery</code> objects both of which are stored in the Google App Engine Datastore.</p>

<p>How do I order the <code>Exhibit</code> collection on each <code>Gallery</code> object when I get around to iterating over the values (ultimately in a Django template)?</p>

<p>i.e. this does not work</p>

<pre><code>
class Gallery(db.Model):
  title = db.StringProperty()
  position = db.IntegerProperty()

class Exhibit(db.Model):
  gallery = db.ReferenceProperty(Gallery, collection_name='exhibits')
  title = db.StringProperty()
  position = db.IntegerProperty()

galleries = db.GqlQuery('SELECT * FROM Gallery ORDER BY position')
for gallery in galleries:
  gallery.exhibits.order('position')

# ... send galleries off the the Django template

</code></pre>

<p>When rendered in the template, the galleries are correctly ordered but the exhibits are not.</p>
"
691267,5625,2009-03-27T19:55:29Z,9,Passing functions which have multiple return values as arguments in Python,"<p>So, Python functions can return multiple values. It struck me that it would be convenient (though a bit less readable) if the following were possible.</p>

<pre><code>a = [[1,2],[3,4]]

def cord():
    return 1, 1

def printa(y,x):
    print a[y][x]

printa(cord())
</code></pre>

<p>...but it's not. I'm aware that you can do the same thing by dumping both return values into temporary variables, but it doesn't seem as elegant. I could also rewrite the last line as ""printa(cord()[0], cord()[1])"", but that would execute cord() twice.</p>

<p>Is there an elegant, efficient way to do this? Or should I just see that quote about premature optimization and forget about this?</p>
"
691288,NA,2009-03-27T20:03:56Z,2,Python: Retrieve Image from MSSQL,"<p>Dear All,
I'm working on a Python project that retrieves an image from MSSQL. My code is able to retrieve the images successfully but with a fixed size of 63KB. if the image is greater than that size, it just brings the first 63KB from the image!</p>

<p>The following is my code:</p>

<pre><code>#!/usr/bin/python
import _mssql

mssql=_mssql.connect('&lt;ServerIP&gt;','&lt;UserID&gt;','&lt;Password&gt;')
mssql.select_db('&lt;Database&gt;')

x=1
while x==1:
    query=""select TOP 1 * from table;""
    if mssql.query(query):
        rows=mssql.fetch_array()
        rowNumbers = rows[0][1]
        #print ""Number of rows fetched: "" + str(rowNumbers)
        for row in rows:
    	for i in range(rowNumbers):
    	    FILE=open('/home/images/' + str(row[2][i][1]) + '-' + str(row[2][i][2]).strip() + ' (' + str(row[2][i][0]) + ').jpg','wb')
    	    FILE.write(row[2][i][4])
    	    FILE.close()
    	    print 'Successfully downloaded image: ' + str(row[2][i][0]) + '\t' + str(row[2][i][2]).strip() + '\t' + str(row[2][i][1])
    else:
        print mssql.errmsg()
        print mssql.stdmsg()
mssql.close()
</code></pre>
"
691345,39623,2009-03-27T20:26:51Z,3,Handling output of python socket recv,"<p>Apologies for the noob Python question but I've been stuck on this for far too long.</p>

<p>I'm using python sockets to receive some data from a server. I do this:</p>

<pre><code>
data = self.socket.recv(4)
print ""data is "", data
print ""repr(data) is "", repr(data)
</code></pre>

<p>The output on the console is this:</p>

<blockquote>
  <p>data is <br/>
  repr(data) is  '\x00\x00\x00\x01'</p>
</blockquote>

<p>I want to turn this string containing essentially a 4 byte number into an int - or actually what would be a long in C. How can I turn this data object into a numerical value that I can easily manage?</p>
"
691740,51816,2009-03-27T22:55:11Z,0,Is there a method in python that's like os.path.split for other delimiters?,"<p>I want to use something like this:</p>

<pre><code>os.path.split(""C:\\a\\b\\c"")
</code></pre>

<p>With this kind of output:</p>

<p>('C:\a\b', 'c')</p>

<p><hr /></p>

<p>However I want it to work on other delimiters like this:</p>

<pre><code>method ('a_b_c_d')
</code></pre>

<p>With this kind of output:</p>

<p>('a_b_c', 'd')</p>
"
692040,83898,2009-03-28T02:21:05Z,20,Is it bad form to call a classmethod as a method from an instance?,"<p>Ex.</p>

<p>If I have something like this:</p>

<pre><code>class C(object):
    @classmethod
    def f(cls, x):
       return x + x
</code></pre>

<p>This will work:</p>

<pre><code>c = C()

c.f(2)
4
</code></pre>

<p>But is that bad form?
Should I only call</p>

<pre><code>C.f()
</code></pre>

<p>or </p>

<pre><code>c.__class__.f()
</code></pre>

<p>Obviously, this would only make sense in cases where f doesn't interact with self/cls expecting it to be class.</p>

<p>?</p>
"
692259,NA,2009-03-28T05:14:57Z,1,How do I track an animated object in Python?,"<p>I want to automate playing a video game with Python.  I want to write a script that can grab the screen image, diff it with the next frame and track an object to click on.  What libraries would be useful for this other than PIL?</p>
"
692294,76890,2009-03-28T05:36:45Z,0,Upgraded to ubuntu 9.04 django test are now slow,"<p>Upgraded my laptop to Ubuntu 9.04 and runing latest trunk of django and my test suite has tripled in time to run.</p>

<pre><code>Python2.6
Mysql
Django 1.1 beta 1 SVN-10137
</code></pre>
"
692506,83501,2009-03-28T09:33:53Z,-2,Resolving dependency in python between modules,"<p>I am a newbie to python. I do have two modules. Model M1 and module m2.
From m2 , i need to refer m1 and m2 and m1 resides at two different locations in disk. </p>

<p>When I am trying to import m1 before executing m2 , of course it's saying can't find m1.
How I can point my interpreter to m1's location.</p>

<p>Thanks
J</p>
"
693070,19212,2009-03-28T16:42:42Z,37,How can you find unused functions in Python code?,"<p>So you've got some legacy code lying around in a fairly hefty project. How can you find and delete dead functions?</p>

<p>I've seen these two references: <a href=""http://stackoverflow.com/questions/245963"">Find unused code</a> and <a href=""http://stackoverflow.com/questions/11532"">Tool to find unused functions in php project</a>, but they seem specific to C# and PHP, respectively.</p>

<p>Is there a Python tool that'll help you find functions that aren't referenced anywhere else in the source code (notwithstanding reflection/etc.)?</p>
"
693459,572,2009-03-28T20:23:37Z,8,Has anyone successfully configured NetBeans for Python (specifically Python 3.0) development?,"<p>I was able to configure NetBeans for 2.6.1 by going to to the Python Platform Manager, creating a new platform, and pointing NetBeans at python.exe where I installed 2.6.1. However, when I follow the exact same steps for 3.0, I get an error in the NetBeans console that says ""SyntaxError: invalid syntax"".</p>

<p>If it matters, Python is installed in this format:</p>

<pre><code>/Program Files
    /Python
        /2.6
            python.exe and everything else
        /3.0
            python.exe and everything else
</code></pre>

<p>I'm wondering if anyone else has experienced this and what they did to correct the problem.</p>
"
693630,7979,2009-03-28T22:15:04Z,4,Alter all values in a Python list of lists?,"<p>Let's say I have a list like:</p>

<pre><code>my_list = [[1,2,3],[4,5,6],[7,8,9]]
</code></pre>

<p>How do I alter every value in the list without doing?:</p>

<pre><code>for x in range(0, 3):
    for y in range(0, 3):
        my_list[x][y] = -my_list[x][y]
</code></pre>

<p>I have tried to simplify this by doing</p>

<pre><code>my_list = [[[-a, -b, -c] for [a, b, c] in d] for d in my_list]
</code></pre>

<p>but the values remain the same.</p>
"
693752,NA,2009-03-28T23:20:16Z,2,Python module for VBox?,"<p>I want to make some python scripts to create an ""Appliance"" with VirtualBox. However, I can't find any documentation anywhere on making calls to VBoxService.exe. Well, I've found stuff that works from OUTSIDE the Machine, but nothing from working from inside the machine.</p>

<p>Does anyone know anything about this? If there's a library for another language like C I'd be okay with it, though Python would be heavily preferred.</p>
"
693826,50481,2009-03-29T00:06:00Z,1,Best practice for two way hashing in python?,"<p>I want to allow users to validate their email address by clicking on a link. The link would look something like</p>

<p><a href=""http://www.example.com/verifyemail?id=some-random-string"" rel=""nofollow"">http://www.example.com/verifyemail?id=some-random-string</a></p>

<p>When I am sending this email, I want to be able to easily generate this 'some-random-string' from row id of user, an integer. and when user clicks on this link, generate that integer back.</p>

<p>Only requirement is this 'some-random-string' should be as opaque and non-guessable to the user as possible.</p>

<p><hr /></p>

<p>Finally, this is what I settled on</p>

<pre><code>def p3_encrypt_safe(plain, key):
    return base64.urlsafe_b64encode(p3_encrypt(plain, key))
</code></pre>

<p>used the nice crypto library from <a href=""http://www.nightsong.com/phr/crypto/p3.py"" rel=""nofollow"">http://www.nightsong.com/phr/crypto/p3.py</a>
addition of base64 safe encoding is mine.</p>
"
694000,NA,2009-03-29T02:18:09Z,5,why doesn't subprocess.Popen(...) always return?,"<p>I hope this is a simple python question.</p>

<p>When I try the following in the python interpreter:</p>

<pre><code>&gt;&gt;&gt; import process
&gt;&gt;&gt; def test(cmd):
...   p = subprocess.Popen(cmd)
...
&gt;&gt;&gt; test(['ls', '-l'])
</code></pre>

<p>It will run the <code>ls -l</code>, but I need to hit ""return"" to get a new >>> prompt.</p>

<p>However, when I try the following:</p>

<pre><code>&gt;&gt;&gt; import process
&gt;&gt;&gt; def test(cmd):
...   p = subprocess.Popen(cmd)
...   p.wait()
...
&gt;&gt;&gt; test(['ls', '-l'])
</code></pre>

<p>Then the <code>ls -l</code> will be run with a >>> prompt immediately present.</p>

<p>One other variation:</p>

<pre><code>&gt;&gt;&gt; import process
&gt;&gt;&gt; def test(cmd):
...   p = subprocess.Popen(cmd, stdout=subprocess.PIPE)
...
&gt;&gt;&gt; test(['ls', '-l'])
</code></pre>

<p>This will give me an immediate new prompt.</p>

<p>The last example is closest to what I want.  My goal is to launch a child process, wait for it to finish and then use its stdout in my parent process by referring to <code>p.stdout</code> while letting stderr just print to wherever it would otherwise.</p>

<p>Right now in my actual application, the last version just hangs at the:
<code>p = subprocess.Popen(cmd, stdout=subprocess.PIPE)</code> with or without a <code>p.wait()</code>.</p>

<p>Thanks,</p>

<p>Charlie</p>
"
694002,74936,2009-03-29T02:19:23Z,2,Understanding Python Class instances,"<p>I'm working on a problem which uses a python class and has a constructor function to give the number of sides to one die and a function to roll the die with a random number returned based on the number of sides. I realize the code is very basic, but I'm having troubles understanding how to sum up the total of three rolled dice with different sides. Since a variable is passing the function instance what would be the best way to grab that value to add it up? Here is what I have. </p>

<p>*To clarify... I can get the totals of the roll1.roll_dice() to add up, but I have to show each roll individually and then the total of the three dice. I can do either one of those but not both.</p>

<pre><code>class Die():

        def __init__(self, s = 6):
            self.sides = s
        def roll_die(self):
            x = random.randint(1,self.sides)
            return x

        roll1 = Die()   #Rolling die 1 with the default side of 6
        roll2 = Die(4)  #Rolling die 2 with 4 sides
        roll3 = Die(12) #Rolling die 3 with 12 sides

        print roll1.roll_die()  
        print roll2.roll_die()
        print roll3.roll_die()
</code></pre>
"
694192,NA,2009-03-29T06:08:20Z,0,Bad Pickle get error,"<p>I have been using a flash card program called Mnemosyne which uses python script. A short time ago my database of flash cards became inaccessible after my computer froze and I had to shut it down manually. Whenever I try to load the data base containing my cards I get this error. </p>

<pre>
Invalid file format 
Traceback(innermost last): 
File ""mnemosyne\core\mnemosyne_core.pyc"", line 1012, in load_database 
BadPickleGet: 577""
</pre>

<p>Help would be greatly appreciated. </p>
"
694296,35364,2009-03-29T08:11:26Z,18,Detect in python which keys are pressed,"<p>I need to know which key is being pressed right now. I'm not looking to capture some specific keys to trigger an event or anything like that, </p>

<p>I want to know which keys are pressed now and display a list of them.</p>

<p>I also need to capture special keys like F1 ... F12, shift, alt, home, windows, etc. Basically all keys on the keyboard.</p>

<p>How do I do this in python? How do I capture keyboard events?</p>

<h3>Related</h3>

<ul>
<li><a href=""http://stackoverflow.com/questions/365110/cross-platform-keylogger"">Cross platform keylogger</a></li>
<li><a href=""http://stackoverflow.com/questions/676713/is-there-a-cross-platform-python-low-level-api-to-capture-or-generate-keyboard-ev"">Is there a cross-platform python low-level API to capture or generate keyboard events?</a></li>
</ul>

<p><strong>EDIT</strong></p>

<p>Just so you know I'm not trying to make a keylogger. I'm trying to make a diagnoses tool (I split water on my laptop and the keyboard is starting to get crazy sometime!!)</p>
"
694366,42751,2009-03-29T09:13:29Z,4,How can I make this recursive crawl function iterative?,"<p>For academic and performance sake, given this crawl recursive web-crawling function (which crawls only within the given domain) what would be the best approach to make it run iteratively? Currently when it runs, by the time it finishes python has climbed to using over 1GB of memory which isn't acceptable for running in a shared environment.</p>

<pre><code>   def crawl(self, url):
    ""Get all URLS from which to scrape categories.""
    try:
      links = BeautifulSoup(urllib2.urlopen(url)).findAll(Crawler._match_tag)
    except urllib2.HTTPError:
      return
    for link in links:
      for attr in link.attrs:
        if Crawler._match_attr(attr):
          if Crawler._is_category(attr):
            pass
          elif attr[1] not in self._crawled:
            self._crawled.append(attr[1])
            self.crawl(attr[1])
</code></pre>
"
694475,84196,2009-03-29T11:15:10Z,9,how to hook to events / messages in windows using python,"<h2>in short:</h2>

<p>i want to intercept <strong>suspend/standby messages</strong> on my laptop, but my program doesn't receives all relevant messages.</p>

<h2>background:</h2>

<p>there's a bug in ms-excel on windows xp/2k, which prevents system suspend if a file is opened on a network/usb drive.</p>

<p>i'm trying to work-around it programmatically (my toolbox include python, vb6, or command line tools).</p>

<p>i know nothing about windows instrumentation :-)</p>

<p>i have a sysinternals utility that suspends the system anyhow. i want to hook it to the close-lid event!</p>

<h2>in long:</h2>

<p>The notebook lid close (fujitsu u810) initiate the standby procedure [how?]</p>

<p>The system then send everybody WM_POWERBROADCAST: PBT_APMQUERYSUSPEND (i can trace them using <code>SPYXX.EXE</code>)</p>

<p>Every program answers ""True"", until excel answers ""false"", and the whole process stops.</p>

<h2>My questions:</h2>

<p>1) my python program doesn't catch neither pbm_apmquerysuspend, nor PBT_APMQUERYSTANDBYFAILED, nor PBT_APMQUERYSUSPENDFAILED:
`    ...</p>

<pre><code>query = ""SELECT * FROM Win32_PowerManagementEvent""

power_watcher = wmi.ExecNotificationQuery ( query )

power_event = power_watcher.NextEvent ()
</code></pre>

<p>`
it receives only PBT_APMSUSPEND, if standby finally occurs.</p>

<p>Why not - and how do i intercept it?</p>

<p>2) Is there another way to intercept the standby process?</p>

<p>in a prefect world, i would set the lid-close event to run a command i choose.
in a perfect world, lid-closure is a documented event.</p>

<p>thank you all :-)</p>
"
694768,51025,2009-03-29T15:08:06Z,2,What is the best way to internationalize a Python app with multiple i18n domains?,"<p>I'm internationalizing a Python application, with two goals in mind:</p>

<ol>
<li><p>The application loads classes from multiple packages, each with its own i18n domain.  So modules in package A are using domain A, modules in package B are using domain B, etc.</p></li>
<li><p>The locale can be changed while the application is running.</p></li>
</ol>

<p>Python's <code>gettext</code> module makes internationalizing a single-domain single-language application very easy; you just set the locale, then call <code>gettext.install()</code>, which finds the right <code>Translation</code> and installs its <code>ugettext</code> method in the global namespace as <code>_</code>.  But obviously a global value only works for a single domain, and since it loads a single <code>Translation</code>, it only works for that locale.</p>

<p>I could instead load the <code>Translation</code> at the top of each module, and bind its ugettext method as <code>_</code>.  Then each module would be using the <code>_</code> for its own domain.  But this still breaks when the locale is changed, because <code>_</code> is for the wrong locale.</p>

<p>So I guess I could load the correct <code>ugettext</code> at the top of every function, but that seems awfully cumbersome.  An alternative would be to still do it per-module, but instead of binding <code>ugettext</code>, I would substitute my own function, which would check the current locale, get its <code>Translation</code>, and forward the string to it.  Does anyone have a cleaner solution?</p>
"
694775,49951,2009-03-29T15:10:51Z,1,Shortening a oft-used code segment for testing a return value in Python,"<p>Consider this Python segment:</p>

<pre><code>def someTestFunction():
    if someTest:
        return value1
    elif someOtherTest:
        return value2
    elif yetSomeOtherTest:
        return value3
    return None

def SomeCallingFunction():
    a = someTestFunction()
    if a != None:
        return a

    ... normal execution continues
</code></pre>

<p>Now, the question: the three-line segment in the beginning of SomeCallingFunction to get the value of the test function and bail out if it's not None, is repeated very often in many other functions. Three lines is too long. I want to shorten it to one. How do I do that?</p>

<p>I can freely restructure this code and the contents of someTestFunction however needed. I thought of using exceptions, but those don't seem to help in cutting down the calling code length.</p>

<p>(I've read a bit about Python decorators, but haven't used them. Would this be the place? How would it work?)</p>
"
695040,NA,2009-03-29T17:54:24Z,1,Help with Python loop weirdness?,"<p>I'm learning Python as my second programming language (my first real one if you don't count HTML/CSS/Javascript).  I'm trying to build something useful as my first real application - an IRC bot that alerts people via SMS when certain things happen in the channel.  Per a request by someone, I'm (trying) to build in scheduling preferences where people can choose not to get alerts from between hours X and Y of the day.  </p>

<p>Anyways, here's the code I'm having trouble with:</p>

<pre><code>db = open(""db.csv"")
for line in db:
            row = line.split("","")  # storing stuff in a CSV, reading out of it 
            recipient = row[0]     # who the SMS is going to
            s = row[1]             # gets the first hour of the ""no alert"" time range
            f = row[2]             # gets last hour of above
            nrt = []               # empty array that will store hours
            curtime = time.strftime(""%H"")  # current hour
            if s == ""no"":          
                    print ""They always want alerts, sending email""  # start time will = ""no"" if they always want alerts
                    # send mail code goes here
            else:
                    for hour in range(int(s), int(f)): #takes start, end hours, loops through to get hours in between, stores them in the above list 
                            nrt.append(hour)
                    if curtime in nrt: # best way I could find of doing this, probably a better way, like I said I'm new
                            print ""They don't want an alert during the current hour, not sending""  # &lt;== what it says
                    else:
                            # they do want an alert during the current hour, send an email
                            # send mail code here
</code></pre>

<p>The only problem I'm having is somehow the script only ends up looping through one of the lines (or something like that) because I only get one result every time, even if I have more than one entry in the CSV file.</p>
"
695370,55562,2009-03-29T21:01:56Z,26,What is LLVM and How is replacing Python VM with LLVM increasing speeds 5x?,"<p>Google is sponsoring an Open Source project to increase the speed of Python by 5x.</p>

<p><a href=""http://code.google.com/p/unladen-swallow/"">Unladen-Swallow</a> seems to have a <a href=""http://code.google.com/p/unladen-swallow/wiki/ProjectPlan"">good project plan</a></p>

<p>Why is concurrency such a hard problem? <br />
Is LLVM going to solve the concurrency problem? <br />
Are there solutions other than Multi-core for Hardware advancement?</p>
"
695501,80943,2009-03-29T22:22:58Z,0,"Limiting the results of cProfile to lines containing ""something"" _and/or_ ""something_else""","<p>I am using cProfile to profile the leading function of my entire app. It's working great except for some 3rd party libraries that are being profiled, and shown in the output as well. This is not always desirable when reading the output.</p>

<p>My question is, how can i limit this? The <a href=""http://docs.python.org/library/profile.html"" rel=""nofollow"">documentation on python profilers</a> mentions:</p>

<pre><code>p.sort_stats('time', 'cum').print_stats(.5, 'init')
</code></pre>

<blockquote>
  <p>This line sorts statistics with a primary key of time, and a secondary key of cumulative time, and then prints out some of the statistics. To be specific, the list is first culled down to 50% (re: .5) of its original size, <strong>then only lines containing init are maintained, and that sub-sub-list is printed</strong>.</p>
</blockquote>

<p>It mentions that lines containing ""init"" will only be displayed. This works great, but i want to limit it in such a way so that i can say, limit lines containing ""init"" and/or ""get"". By trial and error i found that you can add another argument, a string, and it will be filtered further to display only lines containing string1 <strong>and</strong> string2. Using my previous example, this would look like:</p>

<pre><code>p.sort_stats('time', 'cum').print_stats(.5, 'init', 'get')
</code></pre>

<p>Anyone know how you could limit the lines so that only lines containing ""init"" <strong>and/or</strong> ""get"" would be displayed?</p>
"
695505,84372,2009-03-29T22:24:44Z,0,Parsing template schema with Python and Regular Expressions,"<p>I'm working on a script for work to extract data from an old template engine schema: </p>

<pre><code>[%price%]
{
$54.99
}
[%/price%]

[%model%]
{
WRT54G
}
[%/model%]

[%brand%]{
LINKSYS
}
[%/brand%]
</code></pre>

<p>everything within the [% %] is the key, and everything in the { } is the value. Using Python and regex, I was able to get this far: (?&lt;=[%)(?P\w*?)(?=\%])</p>

<p>which returns ['price', 'model', 'brand'] </p>

<p>I'm just having a problem getting it match the bracket data as a value</p>
"
695679,12754,2009-03-30T00:16:10Z,4,How to distinguish between a function and a class method?,"<p>If a variable refers to either a function or a class method, how can I find out which one it is and get the class type in case it is a class method especially when the class is still being declared as in the given example.</p>

<p>eg.</p>

<pre>
    def get_info(function_or_method) :
        print function_or_method

    class Foo(object):
        def __init__(self):
            pass
        get_info(__init__)

    def bar():
        pass

    get_info(bar)
</pre>

<p><strong>Update to question after the first two responses from David and J. F. Sebastian</strong>
To reemphasize a point which J.F. Sebastian alluded to, I want to be able to distinguish it when the function is being declared within the class (when the type I am getting is a function and not a bound or unbound method). ie. where the first call to get_info(<code>__init__</code>) happens I would like to be able to detect that its a method being declared as a part of a class. </p>

<p>This question came up since I am putting a decorator around it and it gets a handle to the <strong>init</strong> function and I can't actually figure out if a method is being declared within a class or as a stand alone function</p>
"
695703,26592,2009-03-30T00:38:25Z,6,Google Data API authentication,"<p>I am trying to get my Django app (NOT using Google app engine) retrieve data from Google Contacts using Google Contacts Data API. Going through <a href=""http://code.google.com/apis/accounts/docs/AuthSub.html"" rel=""nofollow"">authentication documentation</a> as well as <a href=""http://code.google.com/apis/contacts/docs/1.0/developers%5Fguide%5Fpython.html"" rel=""nofollow"">Data API Python client docs</a></p>

<p>First step (AuthSubRequest) which is getting the single-use token works fine. The next step(AuthSubSessionToken), which is upgrade single-use token to a session token. The python API call UpgradeToSessionToken() simply didn't work for me it gave me NonAuthSubToken exception:</p>

<pre><code>gd_client = gdata.contacts.service.ContactsService()
gd_client.auth_token = authsub_token
gd_client.UpgradeToSessionToken()
</code></pre>

<p>As an alternative I want to get it working by ""manually"" constructing the HTTP request:</p>

<pre><code>url = 'https://www.google.com/accounts/AuthSubSessionToken'
headers = {
               'Content-Type': 'application/x-www-form-urlencoded',
               'Authorization': 'AuthSub token=' + authsub_token,
               'User-Agent': 'Python/2.6.1',
               'Host': 'https://www.google.com', 
               'Accept': 'text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2',
               'Connection': 'keep-alive',
           }
req = urllib2.Request(url, None, headers)
response = urllib2.urlopen(req)
</code></pre>

<p>this gives me a different error: </p>

<p>HTTP Error 302: The HTTP server returned a redirect error that would lead to an infinite loop. The last 30x error message was: Moved Temporarily</p>

<p>What am I doing wrong here? I'd appreciate help/advice/suggestions with either of the methods I am trying to use: Python API call (UpgradeToSessionToken) or manually constructing HTTP request with urllib2.</p>
"
695794,81636,2009-03-30T01:48:21Z,9,more efficient way to pickle a string,"<p>The pickle module seems to use string escape characters when pickling; this becomes inefficient e.g. on numpy arrays. Consider the following</p>

<pre><code>z = numpy.zeros(1000, numpy.uint8)
len(z.dumps())
len(cPickle.dumps(z.dumps()))
</code></pre>

<p>The lengths are 1133 characters and 4249 characters respectively.</p>

<p>z.dumps() reveals something like ""\x00\x00"" (actual zeros in string), but pickle seems to be using the string's repr() function, yielding ""'\x00\x00'"" (zeros being ascii zeros).</p>

<p>i.e. (""0"" in z.dumps() == False) and (""0"" in cPickle.dumps(z.dumps()) == True)</p>
"
696047,70157,2009-03-30T05:04:34Z,41,"Re-raise exception with a different type and message, preserving existing information","<p>I'm writing a module and want to have a unified exception hierarchy for the exceptions that it can raise (e.g. inheriting from a <code>FooError</code> abstract class for all the <code>foo</code> module's specific exceptions). This allows users of the module to catch those particular exceptions and handle them distinctly, if needed. But many of the exceptions raised from the module are raised because of some other exception; e.g. failing at some task because of an OSError on a file.</p>

<p>What I need is to <strong>“wrap” the exception caught such that it has a different type and message</strong>, so that information is available further up the propagation hierarchy by whatever catches the exception. But I don't want to lose the existing type, message, and stack trace; that's all useful information for someone trying to debug the problem. A top-level exception handler is no good, since I'm trying to decorate the exception before it makes its way further up the propagation stack, and the top-level handler is too late.</p>

<p>This is partly solved by deriving my module <code>foo</code>'s specific exception types from the existing type (e.g. <code>class FooPermissionError(OSError, FooError)</code>), but that doesn't make it any easier to wrap the existing exception instance in a new type, nor modify the message.</p>

<p>Python's <a href=""http://www.python.org/dev/peps/pep-3134/"">PEP 3134</a> “Exception Chaining and Embedded Tracebacks” discusses a change accepted in Python 3.0 for “chaining” exception objects, to indicate that a new exception was raised during the handling of an existing exception.</p>

<p>What I'm trying to do is related: I need it also working in earlier Python versions, and I need it not for chaining, but only for polymorphism. What is the right way to do this?</p>
"
696345,38403,2009-03-30T07:56:27Z,7,"Python 2.6 on Windows: how to terminate subprocess.Popen with ""shell=True"" argument?","<p>Is there a way to terminate a process started with the subprocess.Popen class with the ""shell"" argument set to ""True""?  In the working minimal example below (uses wxPython) you can open and terminate a Notepad process happily, however if you change the Popen ""shell"" argument to ""True"" then the Notepad process doesn't terminate.</p>

<pre><code>import wx
import threading
import subprocess

class MainWindow(wx.Frame):

    def __init__(self, parent, id, title):        
        wx.Frame.__init__(self, parent, id, title)
        self.main_panel = wx.Panel(self, -1)

        self.border_sizer = wx.BoxSizer()

        self.process_button = wx.Button(self.main_panel, -1, ""Start process"", (50, 50))
        self.process_button.Bind(wx.EVT_BUTTON, self.processButtonClick)

        self.border_sizer.Add(self.process_button)
        self.main_panel.SetSizerAndFit(self.border_sizer)
        self.Fit()

        self.Centre()
        self.Show(True)

    def processButtonClick(self, event):
        if self.process_button.GetLabel() == ""Start process"":
            self.process_button.SetLabel(""End process"")
            self.notepad = threading.Thread(target = self.runProcess)
            self.notepad.start()
        else:
            self.cancel = 1
            self.process_button.SetLabel(""Start process"")

    def runProcess(self):
        self.cancel = 0

        notepad_process = subprocess.Popen(""notepad"", shell = False)

        while notepad_process.poll() == None: # While process has not yet terminated.
            if self.cancel:
                notepad_process.terminate()
                break

def main():
    app = wx.PySimpleApp()
    mainView = MainWindow(None, wx.ID_ANY, ""test"")
    app.MainLoop()

if __name__ == ""__main__"":
    main()
</code></pre>

<p>Please accept for the sake of this question that ""shell"" does have to equal ""True"".</p>
"
696792,38193,2009-03-30T11:12:51Z,4,What is the pythonic way to share common files in multiple projects?,"<p>Lets say I have projects x and y in brother directories: projects/x and projects/y.<br />
There are some utility funcs common to both projects in myutils.py and some db stuff in mydbstuff.py, etc.<br />
Those are minor common goodies, so I don't want to create a single package for them.  </p>

<p>Questions arise about the whereabouts of such files, possible changes to PYTHONPATH, proper way to import, etc.  </p>

<p>What is the 'pythonic way' to use such files? </p>
"
696874,36047,2009-03-30T11:39:52Z,4,Populate a list in python,"<p>I have a series of Python tuples representing coordinates:</p>

<pre><code>tuples = [(1,1), (0,1), (1,0), (0,0), (2,1)]
</code></pre>

<p>I want to create the following list:</p>

<pre><code>l = []
for t in tuples:
  l[ t[0] ][ t[1] ] = something
</code></pre>

<p>I get an IndexError: list index out of range.</p>

<p>My background is in PHP and I expected that in Python you can create lists that start with index > 0, i.e. make gaps and then fill them up, but it seems you can't.</p>

<p>The idea is to have the lists sorted afterwards. I know I can do this with a dictionary, but as far as I know dictionaries cannot be sorted by keys. 
<strong>Update</strong>: I now know they can - see the accepted solution.</p>

<p>Edit:
What I want to do is to create a 2D array that will represent the matrix described with the tuple coordinates, then iterate it in order.
If I use a dictionary, i have no guarantee that iterating over the keys will be in order -> (0,0) (0,1) (0,2) (1,0) (1,1) (1,2) (2,0) (2,1) (2,2)</p>

<p>Can anyone help?</p>
"
697134,55562,2009-03-30T13:11:35Z,0,How to set the crypto key for Python's MD5 module?,"<p>What is the Python equivalent of following Perl code?</p>

<pre><code>hmac_md5_hex($login . ""^"" . $seq . ""^"" . $time . ""^"" . $amo . ""^"", $CryptoKey);
</code></pre>

<p>The Python hashlib.md5 doesn't seem to take an ""cryptographic key"" argument. It only accepts 1 argument.</p>
"
697142,25143,2009-03-30T13:14:05Z,13,How do I configure Eclipse to launch a browser when Run or Debug is selected using Pydev plugin,"<p>I'm learning Python and Django using the Eclipse Pydev plugin. I want the internal or external browser to launch or refresh with the URL http:/127.0.0.1 when I press Run or Debug. I've seen it done with the PHP plugins but not Pydev.</p>
"
697281,46646,2009-03-30T13:46:55Z,2,Importing in Python,"<p>In Python 2.5, I import modules by changing environment variables.  It works, but using site-packages does not.  Is there another way to import modules in directories other than C:\Python25 ?</p>
"
697320,3355,2009-03-30T13:58:59Z,40,How do I get the filepath for a class in Python?,"<p>Given a class C in Python, how can I determine which file the class was defined in? I need something that can work from either the class C, or from an instance off C.</p>

<p>The reason I am doing this, is because I am generally a fan off putting files that belong together in the same folder. I want to create a class that uses a Django template to render itself as HTML. The base implementation should infer the filename for the template based on the filename that the class is defined in.</p>

<p>Say I put a class LocationArtifact in the file ""base/artifacts.py"", then I want the default behaviour to be that the template name is ""base/LocationArtifact.html"".</p>
"
697594,NA,2009-03-30T15:05:01Z,3,How to integrate BIRT with Python,"<p>Has anyone ever tried that?</p>
"
697741,72372,2009-03-30T15:38:06Z,0,Processing XML into MySQL in good form,"<p>I need to process XML documents of varying formats into records in a MySQL database on a daily basis.  The data I need from each XML document is interspersed with a good deal of data I don't need, and each document's node names are different.  For example:</p>

<p>source #1:</p>

<pre><code>&lt;object id=""1""&gt;
    &lt;title&gt;URL 1&lt;/title&gt;
    &lt;url&gt;http://www.one.com&lt;/url&gt;
    &lt;frequency interval=""60"" /&gt;
    &lt;uselessdata&gt;blah&lt;/uselessdata&gt;
&lt;/object&gt;
&lt;object id=""2""&gt;
    &lt;title&gt;URL 2&lt;/title&gt;
    &lt;url&gt;http://www.two.com&lt;/url&gt;
    &lt;frequency interval=""60"" /&gt;
    &lt;uselessdata&gt;blah&lt;/uselessdata&gt;
&lt;/object&gt;
</code></pre>

<p>source #2:</p>

<pre><code>&lt;object""&gt;
    &lt;objectid&gt;1&lt;/objectid&gt;
    &lt;thetitle&gt;URL 1&lt;/thetitle&gt;
    &lt;link&gt;http://www.one.com&lt;/link&gt;
    &lt;frequency interval=""60"" /&gt;
   &lt;moreuselessdata&gt;blah&lt;/moreuselessdata&gt;
&lt;/object&gt;
&lt;object""&gt;
    &lt;objectid&gt;2&lt;/objectid&gt;
    &lt;thetitle&gt;URL 2&lt;/thetitle&gt;
    &lt;link&gt;http://www.two.com&lt;/link&gt;
    &lt;frequency interval=""60"" /&gt;
    &lt;moreuselessdata&gt;blah&lt;/moreuselessdata&gt;
&lt;/object&gt;
</code></pre>

<p>...where I need the object's ID, interval, and URL.</p>

<p>My ideas for approaches are:</p>

<p>1.) Having a separate function to parse each XML document and iteratively create the SQL query from within that function</p>

<p>2.) Having a separate function parse each document and iteratively add each object to my own object class, and have the SQL work done by a class method</p>

<p>3.) Using XSLT to convert all the documents into a common XML format and then writing a parser for that document.</p>

<p>The XML documents themselves aren't all that large, as most will be under 1MB.  I don't anticipate their structure changing often (if ever), but there is a strong possibility I will need to add and remove further sources as time goes on.  I'm open to all ideas.</p>

<p>Also, sorry if the XML samples above are mangled... they're not terribly important, just a rough idea to show that the node names in each document are different.</p>
"
697749,912,2009-03-30T15:40:18Z,7,"Is it possible to split a SWIG module for compilation, but rejoin it when linking?","<p>I hit this issue about two years ago when I first implemented our SWIG bindings.  As soon as we exposed a large amount of code we got to the point where SWIG would output C++ files so large the compiler could not handle them.  The only way I could get around the issue was to split up the interfaces into multiple modules and to compile them separately.</p>

<p>This has several downsides:</p>

<p>• Each module must know about dependencies in other modules.  I have a script to generate the interface files which handles this side of things, but it adds extra complexity.</p>

<p>• Each additional module increases the time that the dynamic linker requires to load in the code.  I have added an <strong>init</strong>.py file that imports all the submodules, so that the fact that the code is split up is transparent to the user, but what is always visible is the long load times.</p>

<p>I'm currently reviewing our build scripts / build process and I wanted to see if I could find a solution to this issue that was better than what I have now.  Ideally, I'd have one shared library containing all the wrapper code.  </p>

<p>Does anyone know how I can acheive this with SWIG?  I've seen some custom code written in Ruby for a specific project, where the output is post-processed to make this possible, but when I looked at the feasibility for Python wrappers it does not look so easy.  </p>
"
697776,80256,2009-03-30T15:49:59Z,13,"abstracting the conversion between id3 tags, m4a tags, flac tags","<p>I'm looking for a resource in python or bash that will make it easy to take, for example, mp3 file X and m4a file Y and say ""copy X's tags to Y"".</p>

<p>Python's ""mutagen"" module is great for manupulating tags in general, but there's no abstract concept of ""artist field"" that spans different types of tag; I want a library that handles all the fiddly bits and knows fieldname equivalences. For things not all tag systems can express, I'm okay with information being lost or best-guessed.</p>

<p>(Use case: I encode lossless files to mp3, then go use the mp3s for listening. Every month or so, I want to be able to update the 'master' lossless files with whatever tag changes I've made to the mp3s. I'm tired of stubbing my toes on implementation differences among formats.)</p>
"
697866,84643,2009-03-30T16:11:14Z,9,Dilemma: Should I learn Seaside or a Python framework?,"<p>I know it's kinda subjective but, if you were to put yourself in my shoes <strong>which would you invest the time in learning?</strong></p>

<p>I want to write a web app which deals securely with relatively modest amounts of peoples private data, a few thousand records of a few Kb each but stuff that needs to be kept safe, addresses, phone numbers etc. I've done several web projects in PHP/MYSQL and have decided, handy though it is I really don't like PHP and don't want to do another large project in it...</p>

<p>As such I figure I'd best learn something new and so I am considering 2 options (although I'll happily entertain others if you have suggestions). I'm having terrible trouble deciding though. They both look quite involved so rather than just jump in and potentially waste days getting up to speed enough on both of them to make an informed choice I thought I'd come here and canvas some opinion.</p>

<p>So the two options I'm considering are...</p>

<p><strong>One of the PYTHON Web frameworks</strong> - TurboGears seems well regarded?
Advantage: Of all the languages I ever tried Python is by far and away my favorite. There's loads of frameworks to choose from and I have done quite a lot of non web python coding over the last few years. 
Disadvantage: There's loads to choose from so it's hard to pick! Need to run single server process? or mod_python? which I don't like the sound of. What I do like is the notion of process separation and compartmentalization, i.e. if one users account is compromised it gives an attacker no leverage against the rest of the system. I'm not clear to what extent a python solution would handle that.</p>

<p><strong>Writing it as a SEASIDE app</strong> Which I guess runs on a squeak app server?
Adv: From what I've heard it would permit good compartmentalization of users as each would have their own little private VM independent of all the systems other users which sounds wonderful from a security, scaling and redundancy standpoint.
Dis: I've not done any Smalltalk since Uni 15 years back and I never dug too deep into it then. I don't see much entry level help for seaside or that many projects using it. I suspect setting a server up to run it is hard for the same reason i.e. not because it's inherently hard but just cause there will be less help online and a presumption you are already rather au fait with Sqeak/Smalltalk.</p>

<p>So, what do people think? Would I be able to efficiently get the kind of strong separation and compartmentalization I'm after with a Python framework? Is Seaside as good as I think in terms of insulating users from each other? Might I be better off, security wise, sticking to the languages I'm most familiar with so I don't make any n00b mistakes or will Seaside be worth worth scaling the learning curve and prove more secure, comprehensible and maintainable in the long run? At the end of the day it's not a life or death decision and I can always bail if I start with one and then hate it so pls nobody get all holy language war and start flaming anyone! ;-)</p>

<p>Cheers for any replies this gets,</p>

<p>Roger :)</p>
"
697902,36680,2009-03-30T16:19:00Z,5,How to send a session message to an anonymous user in a Django site?,"<p>I often show messages about user actions to logged in users in my Django app views using:</p>

<pre><code>request.user.message_set.create(""message to user"")
</code></pre>

<p>How could I do the same for anonymous (not logged in) users?  There is no request.user for anonymous users, but the Django documentation says that using the ""session"" middleware you can do the same thing as the above code.  The Django documentation that links to the session middleware claims it is possible, but I couldn't find how to do it from the session documentation.</p>
"
697945,84661,2009-03-30T16:27:45Z,4,Easy way to parse .h file for comments using Python?,"<p>How to parse in easy way a <strong>.h</strong> file written in <strong>C</strong> for <strong>comments</strong> and entity names using <strong>Python</strong>?</p>

<p>We're suppose for a further writing the content into the word file already developed.</p>

<p>Source comments are formatted using a simple tag-style rules.
Comment tags used for an easy distinguishing one entity comment from the other and non-documenting comments.
A comment could be in multi-line form. An each comment have stay straight upon the entity definition:</p>

<pre><code>//ENUM My comment bla bla bla bla bla bla bla bla bla bla bla bla bla bla bla
//     could be multi-line. Bla bla bla bla bla bla bla bla bla.
enum my_enum
{
    //EITEM My enum item 1.
    //      Just could be multi-line too.
    MY_ENUM_ITEM_1,

    //EITEM My enum item 2
    MY_ENUM_ITEM_2,
};

//STRUCT My struct
struct my_struct {

    //MEMBER struct member 1
    int m_1_;
};

//FUNC my function 1 description.
//     Could be multi-line also.
//INPUT  arg1 - first argument
//RETURN pointer to an allocated my_struct instance.
my_struct* func_1(int arg1);
</code></pre>

<p>A code-and-comments tree should come out as a result of this parsing.</p>

<p>How does one make it quickly and <strong>without using third-party libraries</strong>?</p>
"
698223,20365,2009-03-30T17:36:53Z,110,How can I parse a time string containing milliseconds in it with python?,"<p>I am able to parse strings containing date/time with <strong>time.strptime</strong></p>

<pre><code>&gt;&gt;&gt; import time
&gt;&gt;&gt; time.strptime('30/03/09 16:31:32', '%d/%m/%y %H:%M:%S')
(2009, 3, 30, 16, 31, 32, 0, 89, -1)
</code></pre>

<p>How can I parse a time string that contains milliseconds?</p>

<pre><code>&gt;&gt;&gt; time.strptime('30/03/09 16:31:32.123', '%d/%m/%y %H:%M:%S')
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
  File ""/usr/lib/python2.5/_strptime.py"", line 333, in strptime
    data_string[found.end():])
ValueError: unconverted data remains: .123
</code></pre>
"
698549,28002,2009-03-30T18:49:52Z,0,"Google App Engine Local Environment Error: ""cannot import name webapp""","<p>I've built a GAE site on a Windows machine and I want to work on it from my MacBook.  I have the code in SVN remotely and I installed the Mac version of GAE which comes with this launcher program.  When I configured my application in the launcher and fire the application up, I get the following error:</p>

<pre><code>22 from datetime import timedelta
23
24 from google.appengine.ext import webapp
25 from google.appengine.ext.webapp import template
26 
google undefined, webapp undefined

&lt;type 'exceptions.ImportError'&gt;: cannot import name webapp
</code></pre>

<p>This is really strange to me because it's been running fine in production and on my Windows dev machine for ages, so it must be something with the platform change.  Has anyone run into this issue before?  It's like the google.appengine modules are missing or something.</p>
"
698707,80656,2009-03-30T19:38:01Z,2,Python tkinter label won't change at beginning of function,"<p>I'm using tkinter with Python to create a user interface for a program that converts Excel files to CSV.</p>

<p>I created a label to act as a status bar, and set statusBarText as a StringVar() as the textvariable. inputFileEntry and outputFileEntry are textvariables that contain the input and output file paths.</p>

<pre><code>def convertButtonClick():
    statusBarText.set('Converting...')

    if inputFileEntry.get() == '' or outputFileEntry.get() == '':
    	statusBarText.set('Invalid Parameters.')
    	return

    retcode = subprocess.('Program.exe' ,shell=true)

    if retcode == 0:
    	statusBarText.set('Conversion Successful!')
    else:
    	statusBarText.set('Conversion Failed!')
</code></pre>

<p>This function gets called when you click the convert button, and everything is working fine EXCEPT that the status bar never changes to say 'Converting...'.</p>

<p>The status bar text will get changed to invalid parameters if either the input or output are empty, and it will change to success or failure depending on the return code. The problem is it never changes to 'Converting...' </p>

<p>I've copied and pasted that exact line into the if statements and it works fine, but for some reason it just never changes before the subprocess runs when its at the top of the function. Any help would be greatly appreciated.</p>
"
699177,84463,2009-03-30T21:50:45Z,35,Python: Do Python Lists keep a count for len() or does it count for each call?,"<p>If I keep calling len() on a very long list, am I wasting time, or does it keep an int count in the background?</p>
"
699238,15187,2009-03-30T22:09:44Z,2,Programmatically submitting a form in Python?,"<p>Just started playing with Google App Engine &amp; Python (as an excuse ;)).
How do I correctly submit a form like this</p>

<pre><code>&lt;form action=""https://www.moneybookers.com/app/payment.pl"" method=""post"" target=""_blank""&gt;
&lt;input type=""hidden"" name=""pay_to_email"" value=""ENTER_YOUR_USER_EMAIL@MERCHANT.COM""&gt;
&lt;input type=""hidden"" name=""status_url""
&lt;!-- etc. --&gt;
&lt;input type=""submit"" value=""Pay!""&gt;
&lt;/form&gt;
</code></pre>

<p>w/o exposing the data to user?</p>
"
699285,57757,2009-03-30T22:26:23Z,3,Convert number to binary string,"<p>Is this the best way to convert a Python number to a hex string? </p>

<pre><code>number = 123456789
hex(number)[2:-1].decode('hex')
</code></pre>

<p>Sometimes it doesn't work and complains about Odd-length string when you do 1234567890.</p>

<p>Clarification:</p>

<p>I am going from int to hex.</p>

<p>Also, I need it to be escaped.</p>

<p>IE:
1234567890 -> '\x49\x96\x02\xd2' not '499602D2'</p>

<p>Also, it needs to be able to take any Python integer. IE. something larger than an Int.</p>

<p><strong>Edit:</strong></p>

<p>Here is the best solution so far I have cobbled together from Paolo and Devin's post.</p>

<pre><code>def hexify(num):
    num = ""%x"" % num

    if len(num) % 2:
        num = '0'+num

    return num.decode('hex')
</code></pre>
"
699325,84861,2009-03-30T22:39:14Z,44,Suppress output in Python calls to executables,"<p>I have a binary named <code>A</code> that generates output when called. If I call it from a Bash shell, most of the output is suppressed by <code>A &gt; /dev/null</code>. All of the output is suppressed by <code>A &amp;&gt; /dev/null</code></p>

<p>I have a python script named <code>B</code> that needs to call <code>A</code>. I want to be able to generate output from <code>B</code>, while suppressing all the output from <code>A</code>.</p>

<p>From within <code>B</code>, I've tried <code>os.system('A')</code>, <code>os.system('A &gt; /dev/null')</code>, and <code>os.system('A &amp;&gt; /dev/null')</code>, <code>os.execvp('...')</code>, etc. but none of those suppress all the output from A.</p>

<p>I could run <code>B &amp;&gt; /dev/null</code>, but that suppresses all of <code>B</code>'s output too and I don't want that.</p>

<p>Anyone have suggestions?</p>
"
699390,83898,2009-03-30T22:58:26Z,23,What's the best way to tell if a Python program has anything to read from stdin?,"<p>I want a program to do one thing if executed like this:</p>

<pre><code>cat something | my_program.py
</code></pre>

<p>and do another thing if run like this</p>

<pre><code>my_program.py
</code></pre>

<p>But if I read from stdin, then it will wait for user input, so I want to see if there is anything to read before trying to read from stdin.</p>
"
699462,71097,2009-03-30T23:24:00Z,17,Python/Django: Creating a simpler list from values_list(),"<p>Consider:</p>

<pre><code>&gt;&gt;&gt;jr.operators.values_list('id')
[(1,), (2,), (3,)]
</code></pre>

<p>How does one simplify further to:</p>

<pre><code>['1', '2', '3']
</code></pre>

<p>The purpose:</p>

<pre><code>class ActivityForm(forms.ModelForm):
    def __init__(self, *args, **kwargs):
        super(ActivityForm, self).__init__(*args, **kwargs)
        if self.initial['job_record']:
            jr = JobRecord.objects.get(pk=self.initial['job_record'])

            # Operators
            self.fields['operators'].queryset = jr.operators

            # select all operators by default
            self.initial['operators'] = jr.operators.values_list('id') # refined as above.
</code></pre>
"
699468,25991,2009-03-30T23:25:29Z,60,Python HTML sanitizer / scrubber / filter,"<p>I'm looking for a module that will remove any HTML tags from a string that are not found in a whitelist.</p>
"
699510,51816,2009-03-30T23:52:10Z,1,"Is it possible to create a class that represents another type in Python, when directly referenced?","<p>So if I have a class like:</p>

<pre><code>CustomVal
</code></pre>

<p>I want to be able to represent a literal value, so like setting it in the constructor:</p>

<pre><code>val = CustomVal ( 5 )

val.SomeDefaultIntMethod
</code></pre>

<p>Basically I want the CustomVal to represent whatever is specified in the constructor.</p>

<p>I am not talking about custom methods that know how to deal with CustomVal, but rather making it another value that I need.</p>

<p>Is this possible?</p>

<p>Btw 5 is just an example, in reality it's a custom COM type that I want to instance easily.</p>

<p>So by referencing CustomVal, I will have access to int related functionality (for 5), or the functionality of the object that I want to represent (for COM).</p>

<p>So if the COM object is RasterizedImage, then I will have access to its methods directly:</p>

<pre><code>CustomVal.Raster () ...
</code></pre>

<p>EDIT: This is what I mean: I don't want to access as an attribute, but the object itself:</p>

<pre><code>CustomVal
</code></pre>

<p>instead of:</p>

<pre><code>CustomVal.SomeAttribute
</code></pre>

<p>The reason I want this is because, the COM object is too involved to initialize and by doing it this way, it will look like the original internal implementation that app offers.</p>
"
699526,NA,2009-03-30T23:59:12Z,7,python decorators and methods,"<p>New here.  Also I'm (very) new to python and trying to understand the following behavior.  Can someone explain to me why the two methods in this example have different output?</p>

<pre><code>def map_children(method):
    def wrapper(self,*args,**kwargs):
        res = method(self,*args,**kwargs)
        for child in self._children:
            method(child,*args,**kwargs)            
        return res
    return wrapper

class Node(object):

    def __init__(self,name,parent=None):
        self._namestring = name
        if parent:
            self._parent = parent

        self._children = []

    @map_children
    def decorated(self):
        if hasattr(self,'_parent'):
            print '%s (child of %s)'%(self._namestring,self._parent._namestring)
        else:
            print '%s'% self._namestring

    def undecorated(self):
        if hasattr(self,'_parent'):
            print '%s (child of %s)'%(self._namestring,self._parent._namestring)
        else:
            print '%s'% self._namestring

        for child in self._children:
            child.undecorated()


def runme():
    parent = Node('parent')

    child1 = Node('child1',parent)
    child2 = Node('child2',parent)
    grandchild = Node('grandchild',child1)
    child1._children.append(grandchild)
    parent._children.append(child1)
    parent._children.append(child2)

    print '**********result from decorator**********'
    parent.decorated()

    print '**********result by hand**********'
    parent.undecorated()
</code></pre>

<p>Here is the output on my system:</p>

<pre>
In[]:testcase.runme()
**********result from decorator**********
parent
child1 (child of parent)
child2 (child of parent)
**********result by hand**********
parent
child1 (child of parent)
grandchild (child of child1)
child2 (child of parent)
</pre>

<p>So why does the decorated call never descend to the grandchild node?  I'm obviously missing something about the syntax...</p>
"
699550,79722,2009-03-31T00:15:04Z,0,navigating through different drive letters in python os.system,"<p>I am having a problem with a bit of code on one windows machine but not all windows machines. i have the following code:</p>

<pre><code>path = ""F:/dir/""
os.system(path[0:2] + "" &amp;&amp; cd "" + path + "" &amp;&amp; git init"")
</code></pre>

<p>On all but one of my windows systems it runs fine but on a windows 2003 server it gives a ""directory not found"" error but if i run the same command flat from the command prompt than it works.</p>

<p>I'm sorry if my question comes off as vague but I'm totally stumped </p>
"
699570,71097,2009-03-31T00:25:42Z,1,"Python: Testing for unicode, and converting to time()","<p>Sometimes self.start is unicode:</p>

<p>eg.</p>

<pre><code>&gt;&gt;&gt;self.start
u'07:30:00'
</code></pre>

<p>Which makes datetime.combine complain</p>

<pre><code>start = datetime.combine(self.job_record.date, self.start)
</code></pre>

<p>How does one:</p>

<ol>
<li>Test for unicode?</li>
<li>Convert from u'07:30:00' to datetime.time?</li>
</ol>
"
699649,44493,2009-03-31T00:58:18Z,0,Browser interface to command line python program,"<p>I have a command line tool that I have written (in Python) that interfaces to a SQLite database (one DB per user). This program presents a lot of data to the user which can be cumbersome in a terminal.</p>

<p>One option is to provide a wxPython interface, but another thought is to leverage Firefox or Webkit to provide an interface.</p>

<p>Anyone ever go about something like this? Or else any very easy ways to add graphical interfaces to manipulate large amounts of data in python programs? Thanks!</p>
"
699866,11760,2009-03-31T03:04:37Z,183,Python int to binary?,"<p>Are there any canned Python methods to convert an Integer (or Long) into a binary string in Python?</p>

<p>There are a myriad of dec2bin() functions out on Google... But I was hoping I could use a built-in function / library.</p>
"
700016,84952,2009-03-31T04:42:58Z,3,Format a number as a string,"<p>How do you format a number as a string so that it takes a number of spaces in front of it?  I want the shorter number 5 to have enough spaces in front of it so that the spaces plus the 5 have the same length as 52500.  The procedure below works, but is there a built in way to do this?</p>

<pre><code>a = str(52500)
b = str(5)
lengthDiff = len(a) - len(b)
formatted = '%s/%s' % (' '*lengthDiff + b, a)
# formatted looks like:'     5/52500'
</code></pre>
"
700073,22893,2009-03-31T05:06:06Z,1,communication with long running tasks in python,"<p>I have a python GUI app that uses a long running function from a .so/.dll it calls through ctypes.</p>

<p>I'm looking for a way to communicate with the function while it's running in a separate thread or process, so that I can request it to terminate early (which requires some work on the C side before returning a partial result). I suppose this will need some kind of signal receiving or reading from pipes, but I want to keep it as simple as possible.</p>

<p>What would you consider the best approach to solve this kind of problem? I am able to change the code on both the python and C sides.</p>
"
700350,10583,2009-03-31T07:07:40Z,1,Is there a Python library to interact with Genesys?,"<p>I work within a contact center and we use Genesys with an Alcatel PBX. We currently use .NET libraries to wrap the DLL's provided to us, but I'm wondering if there are any Python libraries out there before I attempt to write my own?</p>

<p>Thanks</p>

<p>Edit:</p>

<p>Jython with the Java SDK library works a treat.</p>
"
700375,46646,2009-03-31T07:15:05Z,10,How to add a Python import path using a .pth file,"<p>If I put a *.pth file in site-packages it's giving an <code>ImportError</code>.
I'm not getting how to import by creating a *.pth file.</p>

<p><em>(Refers to <a href=""http://stackoverflow.com/questions/697281/importing-in-python"">importing in python</a>)</em></p>
"
700480,79470,2009-03-31T07:58:05Z,1,Control access to WebDav/Apache using Python,"<p>I want to give users access to WebDav using Apache, but I want to autenticate them first and give each user access to a specific folder. All authentication must be done against a Django-based database. I can get the Django-authentication working myself, but I need help with the part where I authenticate each user and provide them with a dedicated webdav user-specific area.</p>

<p>Any hints?</p>
"
700607,42188,2009-03-31T08:39:38Z,2,How to detect changed and new items in an RSS feed?,"<p>Using <a href=""http://packages.python.org/feedparser/"" rel=""nofollow"">feedparser</a> or some other Python library to download and parse RSS feeds; how can I reliably detect <code>new</code> items and <code>modified</code> items?</p>

<p>So far I have seen new items in feeds with publication dates earlier than the latest item. Also I have seen feed readers displaying the same item published with slightly different content as seperate items. I am not implementing a feed reader application, I just want a sane strategy for archiving feed data.</p>
"
700873,46646,2009-03-31T13:12:33Z,4,EOFError in Python script,"<p>I have  the following code fragment:</p>

<pre><code>def database(self):
    databasename=""""
    host=""""
    user=""""
    password=""""
    try:
        self.fp=file(""detailing.dat"",""rb"")
    except IOError:
        self.fp=file(""detailing.dat"",""wb"")
        pickle.dump([databasename,host,user,password],self.fp,-1)
        self.fp.close()
        selffp=file(""detailing.dat"",""rb"")
        [databasename,host,user,password]=pickle.load(self.fp)

    return
</code></pre>

<p>It has the error:</p>

<pre><code>Traceback (most recent call last):
  File ""detailing.py"", line 91, in ?
    app=myApp()
  File ""detailing.py"", line 20, in __init__
    wx.App.__init__(self,redirect,filename,useBestVisual,clearSigInt)
  File ""/usr/lib64/python2.4/site-packages/wx-2.6-gtk2-unicode/wx/_core.py"", line 7473, in __init__
    self._BootstrapApp()
  File ""/usr/lib64/python2.4/site-packages/wx-2.6-gtk2-unicode/wx/_core.py"", line 7125, in _BootstrapApp
    return _core_.PyApp__BootstrapApp(*args, **kwargs)
  File ""detailing.py"", line 33, in OnInit
    self.database()
  File ""detailing.py"", line 87, in database
    [databasename,host,user,password]=pickle.load(self.fp)
  File ""/usr/lib64/python2.4/pickle.py"", line 1390, in load
    return Unpickler(file).load()
  File ""/usr/lib64/python2.4/pickle.py"", line 872, in load
    dispatch[key](self)
  File ""/usr/lib64/python2.4/pickle.py"", line 894, in load_eof
    raise EOFError
EOFError
</code></pre>

<p>What am I doing wrong?</p>
"
700905,4172,2009-03-31T13:18:43Z,1,How to design multi-threaded GUI-network application?,"<p>I'm working on a small utility application in Python.</p>

<p>The networking is gonna send and recieve messages. 
The GUI is gonna display the messages from the GUI and provide user input for entering messages to be sent.
There's also a <em>storage</em> part as I call it, which is gonna get all the network messages and save them in some kind of database to provide some kind of search later.</p>

<p>What my question is, what would be the best way to desing this? For sure all them have to happen in saperate threads, but what I'm wondering is how to pass information between them the best way? What kind of signal passing / thread locking available in Python should I use to avoid possible problems?</p>
"
701088,55562,2009-03-31T13:55:17Z,2,Py3k memory conservation by returning iterators rather than lists,"<p>Many methods that used to return lists in Python 2.x now seem to return iterators in Py3k</p>

<p>Are iterators also generator expressions? Lazy evaluation?</p>

<p>Thus, with this the memory footprint of python is going to reduce drastically. Isn't it?</p>

<p>What about for the programs converted from 2to3 using the builtin script?</p>

<p>Does the builtin tool explicitly convert all the returned iterators into lists, for compatibility? If so then the lower memory footprint benefit of Py3k is not really apparent in the converted programs. Is it?</p>
"
701264,46411,2009-03-31T14:33:38Z,5,Is there a standard 3rd party Python caching class?,"<p>I'm working on a client class which needs to load data from a networked database. It's been suggested that adding a standard caching service to the client could improve it's performance. </p>

<p>I'd dearly like not to have to build my own caching class - it's well known that these provide common points of failure. It would be far better to use a class that somebody else has developed rather than spend a huge amount of my own time debugging a home-made caching system.</p>

<p>Java developers have this:
<a href=""http://ehcache.sourceforge.net/"" rel=""nofollow"">http://ehcache.sourceforge.net/</a></p>

<p>It's a general purpose high-performance caching class which can support all kinds of storage. It's got options for time-based expiry and other methods for garbage-collecting. It looks really good. Unfortunately I cannot find anything this good for Python.</p>

<p>So, can somebody suggest a cache-class that's ready for me to use. My wish-list is:</p>

<ul>
<li>Ability to limit the number of objects in the cache.</li>
<li>Ability to limit the maximum age of objects in the cache.</li>
<li>LRU object expirey</li>
<li>Ability to select multiple forms of storage ( e.g. memory, disk )</li>
<li>Well debugged, well maintained, in use by at least one well-known application.</li>
<li>Good performance.</li>
</ul>

<p>So, any suggestions?</p>

<p>UPDATE: I'm looking for LOCAL caching of objects. The server which I connect to is already heavily cached. Memcached is not appropriate because it requires an additional network traffic between the Windows client and the server. </p>
"
701402,2938,2009-03-31T14:58:41Z,10,Best way to choose a random file from a directory,"<p>What is the best way to choose a random file from a directory in Python?</p>

<p><em>Edit:</em> Here is what I am doing:</p>

<pre><code>import os
import random
import dircache

dir = 'some/directory'
filename = random.choice(dircache.listdir(dir))
path = os.path.join(dir, filename)
</code></pre>

<p>Is this particularly bad, or is there a particularly better way?</p>
"
701466,18909,2009-03-31T15:07:16Z,28,Nested try statements in python?,"<p>Is there a nicer way of doing the following:</p>

<pre><code>try:
    a.method1()
except AttributeError:
    try:
        a.method2()
    except AttributeError:
        try:
            a.method3()
        except AttributeError:
            raise
</code></pre>

<p>It looks pretty nasty and I'd rather not do:</p>

<pre><code>if hasattr(a, 'method1'):
    a.method1()
else if hasattr(a, 'method2'):
    a.method2()
else if hasattr(a, 'method3'):
    a.method3()
else:
    raise AttributeError
</code></pre>

<p>to maintain maximum efficiency.</p>
"
701704,84952,2009-03-31T15:54:25Z,36,Convert HTML entities to Unicode and vice versa,"<blockquote>
  <p><strong>Possible duplicates:</strong></p>
  
  <ul>
  <li><a href=""http://stackoverflow.com/questions/57708/convert-xml-html-entities-into-unicode-string-in-python"">Convert XML/HTML Entities into Unicode String in Python</a></li>
  <li><a href=""http://stackoverflow.com/questions/663058/html-entity-codes-to-text"">HTML Entity Codes to Text</a></li>
  </ul>
</blockquote>

<p>How do you convert HTML entities to Unicode and vice versa in Python?</p>
"
701789,40149,2009-03-31T16:09:48Z,3,Is there a python library that implements both sides of the AWS authentication protocol?,"<p>I am writing a REST service in python and django and wanted to use Amazon's AWS authentication protocol. I was wondering if anyone knew of a python library that implemented formation of the header for sending and the validation of the header for recieving?</p>
"
701802,84952,2009-03-31T16:12:20Z,156,How do I execute a string containing Python code in Python?,"<p>How do I execute a string containing Python code in Python?</p>
"
702150,84498,2009-03-31T17:29:39Z,2,Django Model.object.get pre_save Function Weirdness,"<p>I have made a function that connects to a models 'pre_save' signal. Inside the function I am trying to check if the model instance's pk already exists in the table with:</p>

<pre><code>sender.objects.get(pk=instance._get_pk_val())
</code></pre>

<p>The first instance of the model raises an error. I catch the error and generate a slug field from the title. In a second instance, it doesn't throw the error. I checked the value of instance._get_pk_val() on both instances and they are the same: None</p>

<p>So:</p>

<pre><code># This one raises an error in the sluggit function
instance1 = Model(title=""title 1"")
instance1.save()

# This one doesn't raise an error
instance2 = Model(title=""title 2"")
instance2.save()
</code></pre>

<p>This is my 3rd day messing around with python and django. So I am sorry if it something newbish that I am not seeing.</p>

<p><strong>Edit:</strong> </p>

<p>The Model:</p>

<pre><code>class Test(models.Model):
    title = models.CharField(max_length=128)
    slug = models.SlugField(max_length=128)
    slug.prepopulate_from=('title',)

signals.pre_save.connect(package.sluggit, sender=Test)
</code></pre>

<p>The Function Basics:</p>

<pre><code>def sluggit(sender, instance, signal, *args, **kwargs):
    try:
        sender.objects.get(pk=instance._get_pk_val())
    except:
        # Generate Slug Code
</code></pre>

<p>@S.Lot told me to override the save() method in the comments. I'll have to try that. I would still like to know why the second call to model.objects.get() isn't raising an error with this method.</p>

<p><strong>Edit 2</strong>
Thank you @S.Lot. Overriding the save method works perfectly. Still curious about the signal method. Hmm, weird.</p>

<p><strong>Edit 3</strong>
After playing around a little more, I found that using instance.objects.get() instead of sender.objects.get() works:</p>

<pre><code>def sluggit(sender, instance, signal, *args, **kwargs):
    try:
        sender.objects.get(pk=instance._get_pk_val())
    except:
        # Generate Slug Code
</code></pre>

<p>needs to be:</p>

<pre><code>def sluggit(sender, instance, signal, *args, **kwargs):
    try:
        instance.objects.get(pk=instance._get_pk_val())
    except:
        # Generate Slug Code
</code></pre>

<p>A bug? For some reason I thought sender.objects.get() would be the same as Test.objects.get().</p>
"
702179,62673,2009-03-31T17:39:02Z,58,Django vs other Python web frameworks?,"<p>I've pretty much tried every Python web framework that exists, and it took me a long time to realize there wasn't a silver bullet framework, each had its own advantages and disadvantages. I started out with <a href=""http://snakelets.sf.net"">Snakelets</a> and heartily enjoyed being able to control almost everything at a lower level without much fuss, but then I discovered <a href=""http://turbogears.org"">TurboGears</a> and I have been using it (1.x) ever since. Tools like Catwalk and the web console are invaluable to me.</p>

<p>But with TurboGears 2 coming out which brings WSGI support, and after reading up on the religious debates between the Django and WSGI camps, I'm really torn between <strong><em>""doing it the right way""</em></strong>, e.g., learning WSGI, spending valuable time writing functionality that already exists in Django and other full-stack frameworks, as opposed to using Django or some high-level framework that does everything for me. The downsides with the latter that I can see are pretty obvious: </p>

<ol>
<li>I'm not learning anything in the process</li>
<li>If I ever need to do anything lower level it's going to be a pain</li>
<li>The overhead required for just a basic site which uses authentication is insane. (IMO)</li>
</ol>

<p>So, I guess my question is, which is the better choice, or is it just a matter of opinion, and should I suck it up and use Django if it achieves what I want with minimal fuss (I want authentication and a CRUD interface to my database)? I tried Werkzeug, Glashammer, and friends, but AuthKit and Repoze scared me off, as well as the number of steps involved to just setup basic authentication. I looked at Pylons, but the documentation seems lacking, and when referencing simple features like authentication or a CRUD interface, various wiki pages and documentation seemed to contradict each other, with different hacks for versions and such. </p>

<p><hr /></p>

<p>Thanks to S. Lott for pointing out that I wasn't clear enough. My question is: which of the following is worthwhile in the long run, but not painful in the short (e.g., some sort of middle ground, anyone?) - Learn WSGI, or stick with a ""batteries-included"" framework? If the latter, I would appreciate a suggestion as to whether I should give Django another try, stick with TurboGears 1.x, or venture into some other framework. </p>

<p>Also, I have tried CherryPy, but couldn't seem to find a good enough CRUD application that I could plop in and use right away.</p>
"
702337,1897,2009-03-31T18:07:54Z,28,How to make Django slugify work properly with Unicode strings?,"<p>What can I do to prevent <code>slugify</code> filter from stripping out non-ASCII alphanumeric characters? (I'm using Django 1.0.2)</p>

<p><a href=""http://cnprog.com"">cnprog.com</a> has Chinese characters in question URLs, so I looked in their code. They are not using <code>slugify</code> in templates, instead they're calling this method in <code>Question</code> model to get permalinks</p>

<pre><code>def get_absolute_url(self):
    return '%s%s' % (reverse('question', args=[self.id]), self.title)
</code></pre>

<p>Are they slugifying the URLs or not?</p>
"
702342,85250,2009-03-31T18:08:34Z,17,How to get number of affected rows in sqlalchemy?,"<p>I have one question concerning Python and the sqlalchemy module. What is the equivalent for <code>cursor.rowcount</code> in the sqlalchemy Python?</p>
"
702395,80656,2009-03-31T18:21:20Z,6,Python 3.0.1 Executable Creator,"<p>Does anyone know if there's a windows Python executable creator program available now that supports Python 3.0.1? It seems that py2exe and pyInstaller, along with all the rest I've found, still aren't anywhere close to supporting 3.0 or 3.0.1.</p>

<p>Any help is greatly appreciated.</p>

<p>Edit: I guess I could downgrade the program to an older version of Python to make it work with py2exe. The hardest part will probably be using an older version of Tkinter.</p>

<p>Has anyone had luck with using py2exe or pyInstaller (or another windows-friendly program) to create an executable that uses Tkinter as well as subprocess.</p>

<p>I'm actually not sure how to get the directory my program will be installed into so subprocess can find the executable program I'm using.</p>
"
702407,68127,2009-03-31T18:23:07Z,12,How to limit I/O consumption of Python processes (possibly using ionice)?,"<p>I would like a particular set of Python subprocesses to be as low-impact as possible.  I'm already using <a href=""http://www.manpagez.com/man/1/nice/"">nice</a> to help limit CPU consumption.  But ideally I/O would be limited as well.  (If skeptical, please humor me and assume there is value in doing this; it doesn't matter how long they take to run, there can be a lot of them, and there is higher-priority stuff (usually) going on on the same machine, etc.)</p>

<p>One possibility appears to be <code>ionice</code>.  Are there any existing Python packages for invoking <code>ionice</code> (Google didn't turn up anything)?  It wouldn't be difficult to write code to simply run the <code>ionice</code> command; but I'd prefer to avoid writing code that someone else has written/tested; sometimes there are subtle edge cases, etc.  And, is there just a better way to limit I/O consumption?</p>

<p>The <a href=""http://linux.die.net/man/1/ionice"">man page for ionice</a> suggests that the <code>ionice</code> value can be affected by the <code>nice</code> value, but running this Python 2.6 script appears to disprove that, even for child processes where the <code>nice</code> value is inherited:</p>

<pre><code>#!/usr/bin/env python

import os
import multiprocessing

def print_ionice(name):
    print '*** ', name, ' ***'
    os.system(""echo -n 'nice: '; nice"")
    os.system(""echo -n 'ionice: '; ionice -p%d"" % os.getpid())

for niced in (None, 19):
    if niced: os.nice(niced)
    print '**** niced to: ', niced, ' ****'
    print_ionice('parent')
    subproc = multiprocessing.Process(target=print_ionice, args=['child'])
    subproc.start()
    subproc.join()
</code></pre>

<p>Which has the following output:</p>

<pre>
$ uname -as
Linux x.fake.org 2.6.27-11-server #1 SMP Thu Jan 29 20:13:12 UTC 2009 x86_64 GNU/Linux
$ ./foo.py
**** niced to:  None  ****
***  parent  ***
nice: 0
ionice: none: prio 4
***  child  ***
nice: 0
ionice: none: prio 4
**** niced to:  19  ****
***  parent  ***
nice: 19
ionice: none: prio 4
***  child  ***
nice: 19
ionice: none: prio 4
</pre>
"
702493,NA,2009-03-31T18:42:43Z,0,User editing own Active Directory data,"<p>How can I build a web page that allows a logged on user of a Windows 2003 domain change details of his account (probably just First Name, Surname, and Phone number)?</p>
"
702637,74388,2009-03-31T19:20:51Z,48,"Django admin - inline inlines (or, three model editing at once)","<p>I've got a set of models that look like this:</p>

<pre><code>class Page(models.Model):
    title = models.CharField(max_length=255)

class LinkSection(models.Model):
    page = models.ForeignKey(Page)
    title = models.CharField(max_length=255)

class Link(models.Model):
    linksection = models.ForeignKey(LinkSection)
    text = models.CharField(max_length=255)
    url = models.URLField()
</code></pre>

<p>and an admin.py that looks like this:</p>

<pre><code>class LinkInline(admin.TabularInline):
    model = Link
class LinkSectionInline(admin.TabularInline):
    model = LinkSection
    inlines = [ LinkInline, ]
class PageAdmin(admin.ModelAdmin):
    inlines = [ LinkSectionInline, ]
</code></pre>

<p>My goal is to get an admin interface that lets me edit everything on one page. The end result of this model structure is that things are generated into a view+template that looks more or less like:</p>

<pre><code>&lt;h1&gt;{{page.title}}&lt;/h1&gt;
{% for ls in page.linksection_set.objects.all %}
&lt;div&gt;
    &lt;h2&gt;{{ls.title}}&lt;/h2&gt;
    &lt;ul&gt;
         {% for l in ls.link_set.objects.all %}
        &lt;li&gt;&lt;a href=""{{l.url}}""&gt;{{l.title}}&lt;/a&gt;&lt;/li&gt;
         {% endfor %}
    &lt;/ul&gt;
&lt;/div&gt;
{% endfor %}
</code></pre>

<p>I know that the inline-in-an-inline trick fails in the Django admin, as I expected. Does anyone know of a way to allow this kind of three level model editing? Thanks in advance.</p>
"
702760,64206,2009-03-31T19:54:20Z,5,How do I generate multi-word terms recursively?,"<p>Say I have a string of words: <code>'a b c d e f'</code>.  I want to generate a list of multi-word terms from this string.</p>

<p>Word order matters. The term <code>'f e d'</code> shouldn't be generated from the above example.</p>

<p><strong>Edit:</strong> Also, words should not be skipped.  <code>'a c'</code>, or <code>'b d f'</code> shouldn't be generated.</p>

<p><strong>What I have right now:</strong></p>

<pre><code>doc = 'a b c d e f'
terms= []
one_before = None
two_before = None
for word in doc.split(None):
    terms.append(word)
    if one_before:
        terms.append(' '.join([one_before, word]))
    if two_before:
        terms.append(' '.join([two_before, one_before, word]))
    two_before = one_before
    one_before = word

for term in terms:
    print term
</code></pre>

<p><strong>Prints:</strong></p>

<pre><code>a
b
a b
c
b c
a b c
d
c d
b c d
e
d e
c d e
f
e f
d e f
</code></pre>

<p>How would I make this a recursive function so that I can pass it a variable maximum number of words per term?</p>

<p><strong>Application:</strong></p>

<p>I'll be using this to generate multi-word terms from readable text in HTML documents.  The overall goal is a latent semantic analysis of a large corpus (about two million documents).  This is why keeping word order matters (Natural Language Processing and whatnot).</p>
"
702780,68127,2009-03-31T19:58:46Z,1,Is there a better trivial Python WebDAV server code snippet than this?,"<p>Does anyone have a better code snippet for a trivial Python <a href=""http://en.wikipedia.org/wiki/WebDAV"" rel=""nofollow"">WebDAV</a> server?  The code below (which is cobbled together from some Google search results) appears to work under Python 2.6, but I wonder if someone has something they have used before, a <em>little</em> more tested and complete.  I'd prefer a stdlib-only snippet over a third-party package.  It is for some test code to hit so does not have to be production-worthy.</p>

<pre><code>import httplib
import BaseHTTPServer

class WebDAV(BaseHTTPServer.BaseHTTPRequestHandler):
    """"""
    Ultra-simplistic WebDAV server.
    """"""
    def do_PUT(self):
        path = os.path.normpath(self.path)
        if os.path.isabs(path):
            path = path[1:]    # safe assumption due to normpath above
        directory = os.path.dirname(path)
        if not os.path.isdir(directory):
            os.makedirs(directory)
        content_length = int(self.headers['Content-Length'])
        with open(path, ""w"") as f:
            f.write(self.rfile.read(content_length))

        self.send_response(httplib.OK)

def server_main(server_class=BaseHTTPServer.HTTPServer, 
                handler_class=WebDAV):
    server_class(('', 9231), handler_class).serve_forever()
</code></pre>
"
702861,NA,2009-03-31T20:20:32Z,8,Executing Java programs through Python,"<p>How do I do this?</p>
"
702986,72556,2009-03-31T20:48:16Z,14,URL encode a non-value pair in Python,"<p>I'm trying to use Google's AJAX (JSON) Web Search API in Python. I'm stuck because Python's urllib.urlencode() only takes value pairs, not strings by themselves, to encode. In Google's API, the query string is the search term and it doesn't associate with a variable.</p>

<pre><code>query = ""string that needs to be encoded""
params = urllib.urlencode(query) # THIS FAILS
# http://code.google.com/apis/ajaxsearch/documentation/reference.html
url = ""http://ajax.googleapis.com/ajax/services/search/web?v=1.0&amp;rsz=large&amp;%s&amp;%s"" % (params, GOOGLE_API_KEY)

request = urllib2.Request(url)
request.add_header('Referer', GOOGLE_REFERER)

search_results = urllib2.urlopen(request)
raw_results = search_results.read()
json = simplejson.loads(raw_results)
estimatedResultCount = json['responseData']['cursor']['estimatedResultCount']

if estimatedResultCount != 0:
    print ""Google: %s hits"" % estimatedResultCount
</code></pre>

<p>How do I urlencode my search terms?</p>
"
703185,16584,2009-03-31T21:40:57Z,7,Using email.HeaderParser with imaplib.fetch in python?,"<p>Does anyone have a good example of using the HeaderParser class in Python for a message that you pull down with imaplib.fetch?</p>

<p>I have been able to find a lot of related things, but nothing that does just this.</p>

<p>Do I need to full down the fetch has an RFC822?   I was hoping to simply pull down the subjects.</p>

<p>Thanks!</p>
"
703262,84861,2009-03-31T22:03:36Z,5,Most efficient way of loading formatted binary files in Python,"<p>I have binary files no larger than 20Mb in size that have a header section and then a data section containing sequences of uchars. I have Numpy, SciPy, etc. and each library has different ways of loading in the data. Any suggestions for the most efficient methods I should use?</p>
"
703520,74683,2009-03-31T23:53:51Z,4,Python: an iteration over a non-empty list with no if-clause comes up empty. Why?,"<p>How can an iterator over a non-empty sequence, with no filtering and no aggregation (<code>sum()</code>, etc.), yield nothing?</p>

<p>Consider a simple example:</p>

<pre><code>sequence = ['a', 'b', 'c']
list((el, ord(el)) for el in sequence)
</code></pre>

<p>This yields <code>[('a', 97), ('b', 98), ('c', 99)]</code> as expected.</p>

<p>Now, just swap the <code>ord(el)</code> out for an expression that takes the first value out of some generator using <code>(...).next()</code> — forgive the contrived example:</p>

<pre><code>def odd_integers_up_to_length(str):
    return (x for x in xrange(len(str)) if x%2==1)

list((el, odd_integers_up_to_length(el).next()) for el in sequence)
</code></pre>

<p>This yields <code>[]</code>. Yeah, empty list. No <code>('a', </code>stuff<code>)</code> tuples. Nothing.</p>

<p>But we're not filtering or aggregating or reducing. A generator expression over <code>n</code> objects without filtering or aggregation must yield <code>n</code> objects, right? What's going on?</p>
"
703717,11194,2009-04-01T01:33:31Z,14,Anything like SciPy in Ruby?,"<p>Looking further into the differences between Python and Ruby, is there a Ruby equivalent to SciPy, or what other scientific math gems are available for Ruby?</p>
"
703907,22468,2009-04-01T02:59:46Z,16,How would I compute exactly 30 days into the past with Python (down to the minute)?,"<p>In Python, I'm attempting to retrieve the date/time that is exactly 30 days (30*24hrs) into the past. At present, I'm simply doing:</p>

<pre><code>&gt;&gt;&gt; import datetime
&gt;&gt;&gt; start_date = datetime.date.today() + datetime.timedelta(-30)
</code></pre>

<p>Which returns a datetime object, but with no time data:</p>

<pre><code>&gt;&gt;&gt; start_date.year
2009
&gt;&gt;&gt; start_date.hour
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in &lt;module&gt;
AttributeError: 'datetime.date' object has no attribute 'hour'
</code></pre>
"
703925,85466,2009-04-01T03:11:00Z,11,Using pydev with Eclipse on OSX,"<p>I setup PyDev with this path for the python interpreter
/System/Library/Frameworks/Python.framework/Versions/2.5/Python
since the one under /usr/bin were alias and Eclipse won't select it. I can run my python script now but cannot run the shell as an external tool. The message I get is</p>

<p>variable references empty selection ${resource_loc}</p>

<p>Same if I use {container_loc}</p>

<p>Any thoughts ?</p>

<p>Sunit</p>
"
704130,66519,2009-04-01T05:09:10Z,12,Can I transpose a file in Vim?,"<p>I know I can use AWK but I am on a Windows box.  I am making a function for others that may not have AWK.  I also know I can write a C program but I would love not have to create maintain and compile something for a little Vim utility I am making.  </p>

<p>The original file might be</p>

<pre><code>THE DAY WAS LONG 
THE WAY WAS FAST
</code></pre>

<p>and it would become</p>

<pre><code>TT
HH
EE

DW
AA
YY

WW
AA
SS

LF
OA
NS
GT
</code></pre>

<p>UPDATE:  Golf rules apply to selecting correct answer.</p>

<p>UPDATE:  Python fans should check out Mr. Duffy's answer below.</p>
"
704152,28802,2009-04-01T05:19:15Z,160,"How can I convert a character to a integer in Python, and viceversa?","<p>I want to get, given a character, its <code>ASCII</code> value.</p>

<p>For example, for the character <code>a</code>, I want to get <code>97</code>, and vice versa.</p>
"
704203,84952,2009-04-01T05:44:36Z,0,How do I schedule a process' termination?,"<p>I need to run a process, wait a few hours, kill it, and start it again.  Is there an easy way that I can accomplish this with Python or Bash?  I can run it in the background but how do I identify it to use kill on it?</p>
"
704526,191083,2009-04-01T08:08:19Z,2,python: finding a missing letter in the alphabet from a list - least lines of code,"<p>I'm trying to find the missing letter in the alphabet from the list with the least lines of code.</p>

<p>If the list is sorted already (using list.sort()), what is the fastest or least lines of code to find the missing letter.</p>

<p>If I know there are only one missing letter.</p>

<p>(This is not any type of interview questions. I actually need to do this in my script where I want to put least amount of work in this process since it will be repeated over and over indeterministically)</p>
"
704777,39623,2009-04-01T09:34:40Z,2,Using python ctypes to get buffer of floats from shared library into python string,"<p>I'm trying to use python ctypes to use these two C functions from a shared library:</p>

<pre>
<code>bool decompress_rgb(unsigned char *data, long dataLen, int scale)
float* getRgbBuffer()</code></pre>

<p>The first function is working fine. I can tell by putting some debug code in the shared library and checking the input.</p>

<p>The problem is getting the data out. The RGB buffer is a pointer to a float (obviously) and this pointer stays constant during the life of the application. Therefore whenever I want to decompress an image, I call <code>decompress_rgb</code> and then need to see what's at the location pointed to by <code>getRgbBuffer</code>. I know that the buffer size is (720 * 288 * sizeof(float)) so I guess this has to come into play somewhere.</p>

<p>There's no <code>c_float_p</code> type so I thought I'd try this:</p>

<pre><code>getRgbBuffer.restype = c_char_p</code></pre>

<p>Then I do:</p>

<pre><code>ptr = getRgbBuffer()
print ""ptr is "", ptr</code></pre>

<p>which just outputs:</p>

<pre><code>ptr = 3078746120</code></pre>

<p>I'm guessing that's the actual address rather than the content, but even if I was successfully dereferencing the pointer and getting the contents, it would only be the first char.</p>

<p>How can I get the contents of the entire buffer into a python string? </p>

<p><strong>Edit:</strong> Had to change:</p>

<pre><code>getRgbBuffer.restype = c_char_p</code></pre>

<p>to</p>

<pre><code>getRgbBuffer.restype = c_void_p</code></pre>

<p>but then BastardSaint's answer worked.</p>
"
704834,85245,2009-04-01T09:54:00Z,15,Does anyone know about workflow frameworks/libraries in Python?,"<p>I'm searching for a workflow library/framework for Python. I'm astonished that there I cannot find anything which is simple and not attached to Zope/Plone. </p>

<p>Does anyone know of an open-source, simple workflow library/framework. It's preferred to support Django, but not required.</p>
"
704856,46646,2009-04-01T10:01:13Z,-2,Importing in Python between three or more files not working,"<p>I hav codes eg1.py , eg2.py , eg3.py
eg3.py imports eg2.py which in turn imports eg1.py</p>

<p>When i run eg3.py for first time everything is fine
If i import it again and again only eg3.py runs</p>

<p>I need a solution for this.</p>

<p>I will code eg3.py in such a way that :</p>

<pre><code>while(1):
    import eg2.py
</code></pre>

<p>Where I went wrong.Please give me a solution.</p>
"
704945,NA,2009-04-01T10:35:37Z,1,check permissions of directories in python,"<p>hi
i want a python program that given a directory, it will return all directories within that directory that have 775 (<code>rwxrwxr-x</code>) permissions</p>

<p>thanks!</p>
"
705296,69746,2009-04-01T12:38:59Z,1,Add event to list,"<p>I want to add event to list such that on adding items actions are taken based on the item e.g. genrating new data structures, change in screen output or raising exception.</p>

<p>How do I accomplish this?</p>
"
705370,36610,2009-04-01T12:56:32Z,4,indentation of multiline string,"<p>I have a script that uses the cmd Python module. The cmd module uses a triple quoted multiline string as it's help text. Something like this</p>

<pre><code>def x(self, strags = None):
    """"""class
    help text here
    and some more help text here""""""
</code></pre>

<p>When running the script, the command 'help x' will print the string. It will, however, print the newlines in front of the last two lines as well. I can overcome this by not indenting these lines, but that'll make my code ugl{y,ier}. </p>

<p>How to overcome this indenting problem? How do the pro Python coders handle this?</p>
"
705434,11522,2009-04-01T13:18:23Z,5,What encoding do I need to display a GBP sign (pound sign) using python on cygwin in Windows XP?,"<p>I have a python (2.5.4) script which I run in cygwin (in a DOS box on Windows XP). I want to include a pound sign (£) in the output. If I do so, I get this error:</p>

<pre><code>SyntaxError: Non-ASCII character '\xa3' in file dbscan.py on line 253, but no encoding declared; see http://www.python.org/peps/pep-0263.html for details
</code></pre>

<p>OK. So I looked at that PEP, and now tried adding this to the beginning of my script:</p>

<pre><code># coding=cp437
</code></pre>

<p>That stopped the error, but the output shows ú where it should show £.</p>

<p>I've tried ISO-8859-1 as well, with the same result.</p>

<p>Does anyone know which encoding I need?</p>

<p>Or where I could look to find out?</p>
"
705811,69882,2009-04-01T14:36:46Z,0,any way to loop iteration with same item in python?,"<p>It's a common programming task to loop iteration while not receiving next item. For example:</p>

<pre><code>for sLine in oFile :
  if ... some logic ... :
    sLine = oFile.next()
    ... some more logic ...
    # at this point i want to continue iteration but without
    # getting next item from oFile. How can this be done in python?
</code></pre>
"
705855,24545,2009-04-01T14:44:41Z,1,Caching data from other websites in Django,"<p>Suppose I have a simple view which needs to parse data from an external website.</p>

<p>Right now it looks something like this:</p>

<pre><code>def index(request):
    source = urllib2.urlopen(EXTERNAL_WEBSITE_URL)
    bs = BeautifulSoup.BeautifulSoup(source.read())
    finalList = [] # do whatever with bs to populate the list
    return render_to_response('someTemplate.html', {'finalList': finalList})
</code></pre>

<p>First of all, is this an acceptable use?</p>

<p>Obviously, this is not good performance-wise. The external website page is pretty big, and I am only extracting a small part of it. I thought of two solutions:</p>

<ol>
<li>Do all of this asynchronously. Load the rest of the page, populate with data once I get it. But I don't even know where to start. I'm just starting with Django and never done anything async up until now.</li>
<li>I don't care if this data is updated every 2-3 minutes, so caching is a good solution as well (also saves me the extra round-trips). How would I go about caching this data?</li>
</ol>
"
706101,51135,2009-04-01T15:39:31Z,36,Python JSON decoding performance,"<p>I'm using the <code>json</code> module in Python 2.6 to load and decode JSON files. However I'm currently getting slower than expected performance. I'm using a test case which is 6MB in size and <code>json.loads()</code> is taking 20 seconds.</p>

<p>I thought the <code>json</code> module had some native code to speed up the decoding?</p>

<p>How do I check if this is being used?</p>

<p>As a comparison, I downloaded and installed the <code>python-cjson</code> module, and <code>cjson.decode()</code> is taking 1 second for the same test case.</p>

<p>I'd rather use the JSON module provided with Python 2.6 so that users of my code aren't required to install additional modules.</p>

<p>(I'm developing on Mac OS X, but I getting a similar result on Windows XP.)</p>
"
706405,15109,2009-04-01T16:41:31Z,7,Django admin style application for Java,"<p>I'm looking for a web framework or an application in Java that does what Django admin does - provides a friendly user interface for editing data in a relational database. I know it's possible to run Django on Jython and that way achieve a somewhat Java-based solution, but I'd prefer something pure-Java to keep the higher-ups happy.</p>
"
706443,41767,2009-04-01T16:51:24Z,3,Complex Beautiful Soup query,"<p>Here is a snippet of an HTML file I'm exploring with Beautiful Soup.</p>

<pre><code>&lt;td width=""50%""&gt;
    &lt;strong class=""sans""&gt;&lt;a href=""http:/website""&gt;Site&lt;/a&gt;&lt;/strong&gt; &lt;br /&gt;
</code></pre>

<p>I would like to get the <code>&lt;a href&gt;</code> for any line which has the <code>&lt;strong class=""sans""&gt;</code> and which is inside a <code>&lt;td width=""50%""&gt;</code>.</p>

<p>Is it possible to query a HTML file for those multiple conditions using Beautiful Soup ?</p>
"
706453,NA,2009-04-01T16:53:41Z,1,Python: Using minidom to search for nodes with a certain text,"<p>I am currently faced with XML that looks like this:</p>

<pre><code>&lt;ID&gt;345754&lt;/ID&gt;
</code></pre>

<p>This is contained within a hierarchy. I have parsed the xml, and wish to find the ID node by searching on ""345754"".</p>
"
706595,20133,2009-04-01T17:33:02Z,59,Can you define aliases for imported modules in Python?,"<p>In Python, is it possible to define an alias for an imported module?</p>

<p>For instance:</p>

<pre><code>import a_ridiculously_long_module_name
</code></pre>

<p>...so that is has an alias of 'short_name'.</p>
"
706721,85810,2009-04-01T18:06:53Z,31,How do I pass a method as a parameter in python,"<p>Is it possible to pass a method as a parameter to a method?</p>

<pre><code>self.method2(self.method1)

def method1(self):
    return 'hello world'

def method2(self, methodToRun):
    result = methodToRun.call()
    return result
</code></pre>
"
706755,34329,2009-04-01T18:14:27Z,15,How do you safely and efficiently get the row id after an insert with mysql using MySQLdb in python?,"<p>I have a simple table in mysql with the following fields:</p>

<ul>
<li>id -- Primary key, int, autoincrement</li>
<li>name -- varchar(50)</li>
<li>description -- varchar(256)</li>
</ul>

<p>Using MySQLdb, a python module, I want to insert a name and description into the table, and get back the id. </p>

<p>In pseudocode:</p>

<pre><code>db = MySQLdb.connection(...)
queryString = ""INSERT into tablename (name, description) VALUES"" % (a_name, a_desc);""

db.execute(queryString);
newID = ???
</code></pre>
"
706813,85810,2009-04-01T18:31:10Z,2,What is the best way to pass a method (with parameters) to another method in python,"<p>What's the best way to pass a method and a method parameter to another method?</p>

<p>Is there a better way to do the following?</p>

<pre><code>def method1(name)
    return 'Hello ' + name

def method2(methodToCall, methodToCallParams, question):
    greetings = methodToCall(methodToCallParams)
    return greetings + ', ' + question

method2(method1, 'Sam', 'How are you?')
</code></pre>
"
706989,74415,2009-04-01T19:25:10Z,24,How to call an external program in python and retrieve the output and return code?,"<p>How can I call an external program with a python script and retrieve the output and return code?</p>
"
707022,3594,2009-04-01T19:35:15Z,28,Is there a Perl equivalent to Python's `if __name__ == '__main__'`?,"<p>Is there a way to determine if the current file is the one being executed in Perl source? In Python we do this with the following construct:</p>

<pre><code>if __name__ == '__main__':
    # This file is being executed.
    raise NotImplementedError
</code></pre>

<p>I can hack something together using <code>FindBin</code> and <code>__FILE__</code>, but I'm hoping there's a canonical way of doing this. Thanks!</p>
"
707023,10293,2009-04-01T19:35:20Z,0,Connection refused on Windows XP network,"<p>This is only marginally a programming problem and more of a networking problem.</p>

<p>I'm trying to get a Django web app to run in my home network and I can't get any machines on the network to get to the web page. I've run on ports 80 and 8000 with no luck. Error message is: ""Firefox can't establish a connection to the server at 192.168.x.x."" </p>

<p>I've tried using sockets in python from the client:</p>

<pre><code>import socket
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect ( (""192.168.x.x"", 80) )
</code></pre>

<p>I just get ""socket.error (10061, 'Connection refused')"". Interestingly, I can connect with port 25.</p>

<p>There is no Windows firewall running. There is a NetGear router/firewall in front of the cable modem.</p>

<p>What should I be looking at to configure this?</p>

<p><hr /></p>

<p>Also tried:</p>

<pre><code>import urllib2
urllib2.urlopen(""http://192.168.x.x/"")
</code></pre>

<p>Same thing.</p>

<p><hr /></p>

<p>Re: ""Can you see the Django app from the machine it's running on?""</p>

<p>Yes. It does work on the same machine. It does not work across the network.</p>

<p>I can also set the server to run on whatever port I choose (80, 8000, etc.) and it is accessible locally, not across the network.</p>

<p><hr /></p>

<p>Q. Is it netstat-able?
A. Yes:</p>

<pre><code>  Proto  Local Address          Foreign Address        State
  ....
  TCP    D3FL2J71:http          localhost:1140         TIME_WAIT
  TCP    D3FL2J71:http          localhost:1147         TIME_WAIT
</code></pre>

<p>I have the website visible in two browser windows locally.</p>

<p><hr /></p>

<p>Use explicit external port (not rely on localhost):</p>

<pre><code>python manage.py runserver 192.168.x.x:8000
</code></pre>

<p>Bing bing bing! We have a winner!</p>

<p>Wow, am I ever glad this is not a networking problem.</p>

<p><hr /></p>

<p>""is the Django app definitely advertising itself on the 192.168.x.x address and not just on the loopback adapter?""</p>

<p>It seems Jon was on the right track, too, but the comment did not point me in the direction to look -- check the Django server's setup call.</p>
"
707090,50272,2009-04-01T19:57:51Z,3,Decorators and in class,"<p>Is there any way to write decorators within a class structure that nest well?  For example, this works fine without classes:</p>

<pre><code>def wrap1(func):
    def loc(*args,**kwargs):
    	print 1
    	return func(*args,**kwargs)
    return loc

def wrap2(func):
    def loc(*args,**kwargs):
    	print 2
    	return func(*args,**kwargs)
    return loc


def wrap3(func):
    def loc(*args,**kwargs):
    	print 3
    	return func(*args,**kwargs)
    return loc

def merger(func):
    return wrap1(wrap2(wrap3(func)))


@merger
def merged():
    print ""merged""


@wrap1
@wrap2
@wrap3
def individually_wrapped():
    print ""individually wrapped""

merged()
individually_wrapped()
</code></pre>

<p>The output is:</p>

<pre><code>1
2
3
merged
1
2
3
individually wrapped
</code></pre>

<p>which is what I want.  But now let's say that I want to make <code>merged</code> and <code>individually_wrapped</code> as static or class methods.  This will also work, so long as the decorators are kept out of the class namespace.  Is there any good way to put the decorators within the namespace?  I'd rather not enumerate all the ways that won't work, but the main problem is that if <code>merger</code> is a method, it can't access the <code>wrapX</code> methods.  Maybe this is a stupid thing to want to do, but has anyone gotten something like this to work, with all the decorators and decorated methods in the same class?</p>
"
707127,85185,2009-04-01T20:05:21Z,8,Python source header comment,"<p>What is the line</p>

<pre><code>#!/usr/bin/env python
</code></pre>

<p>in the first line of a python script used for?</p>
"
707242,76081,2009-04-01T20:38:16Z,16,Create a standalone windows exe which does not require pythonXX.dll,"<p>is there a way to create a standalone .exe from a python script.
Executables generated with py2exe can run only with pythonXX.dll.
I'd like to obtain a fully standalone .exe which does not require to install the python runtime library.
It looks like a linking problem but using static library instead the dynamic one and it would be also useful to apply a strip in order to remove the unused symbols.</p>

<p>Any idea ?</p>

<p>Thanks.</p>

<p>Alessandro</p>
"
707380,20712,2009-04-01T21:23:39Z,61,"In Python how can I access ""static"" class variables within class methods","<p>If I have the following python code:</p>

<pre><code>class Foo(object):
    bar = 1
    def bah(self):

        print bar

f = Foo()
f.bah()
</code></pre>

<p>It complains </p>

<pre><code>NameError: global name 'bar' is not defined
</code></pre>

<p>How can I access class/static variable 'bar' within method 'bah'?</p>
"
707491,76434,2009-04-01T21:53:15Z,20,questions re: current state of GUI programming with Python,"<p>I recently did some work modifying a Python gui app that was using wxPython widgets.  I've experimented with Python in fits and starts over last six or seven years, but this was the first time I did any work with a gui.  I was pretty disappointed at what seems to be the current state of gui programming with Python.  I like the Python language itself a lot, it's a fun change from the Delphi/ObjectPascal programming I'm used to, definitely a big productivity increase for general purpose programming tasks.   I'd like to move to Python for everything.</p>

<p>But wxPython is a huge step backwards from something like Delphi's VCL or .NET's WinForms.  While Python itself offers nice productivity gains from generally programming a higher level of abstraction, wxPython is used at a way lower level of abstraction than the VCL.  For example, I wasted a lot fo time trying to get a wxPython list object to behave the way I wanted it to.  Just to add sortable columns involved several code-intensive steps, one to create and maintain a shadow-data-structure that provided the actual sort order, another to make it possible to show graphic-sort-direction-triangles in the column header, and there were a couple more I don't remember.  All of these error prone steps could be accomplished simply by setting a property value using my Delphi grid component.</p>

<p>My conclusion: while Python provides big productivity gains by raising level of abstraction for a lot of general purpose coding, wxPython is several levels of abstraction <em>lower</em> than the gui tools available for Delphi.   Net result:  gui programming with Delphi is way faster than gui programming with Python, and the resulting ui with Delphi is still more polished and full-featured.  It doesn't seem to me like it's exaggerating to say that Delphi gui programming was more advanced back in 1995 than python gui programming with wxPython is in 2009.</p>

<p>I did some investigating of other python gui frameworks and it didn't look like any were substantially better than wxPython.  I also did some minimal investigation of gui formbuilders for wxPython, which would have made things a little bit better.  But by most reports those solutions are buggy and even a great formbuilder wouldn't address my main complaints about wxPython, which are simply that it has fewer features and generally requires you to do gui programming at a much lower level of abstraction than I'm used to with Delphi's VCL.  Some quick investigating into suggested python gui-dev solutions ( <a href=""http://wiki.python.org/moin/GuiProgramming"">http://wiki.python.org/moin/GuiProgramming</a> ) is honestly somewhat depressing for someone used to Delphi or .NET.</p>

<p>Finally, I've got a couple of questions.</p>

<p>First, am I missing something?  Is there some gui-development solution for Python that can compare with VCL or WinForms programming?   I don't necessarily care if it doesn't quite measure up to Delphi's VCL.  I'm just looking for something that's in the same league.</p>

<p>Second, could IronPython be the direction to go?  I've mostly tried to avoid drinking the .NET koolaid, but maybe IronPython gives me a reason to finally give in.  Even then, does IronPython fully integrate with WinForms, or would I need to have the forms themselves be backed by c# or vb.net?  It looks to me like that definitely is the case with SharpDevelop and MonoDevelop (i.e, IronPython can't be used to do design-time gui building).  Does VS.NET fully integrate IronPython with gui-building?</p>

<p>It really seems to me like Python could ""take over the world"" in a way similar to the way that Visual Basic did back in the early 1990's, if some wonderful new gui-building solution came out for Python.    Only this time with Python we'd have a whole new paradigm of fast, cross platform, and  <em>open source</em> gui programming.  Wouldn't corporations eat that up?  Yeah, I know, web apps are the main focus of things these days, so a great Python-gui solution wouldn't create same revolution that VB once did.  But I don't see gui programming disappearing and I'd like a nice modern, open source, high level solution.</p>
"
707674,51816,2009-04-01T23:03:05Z,85,How to compare type of an object in Python?,"<p>Basically I want to do this:</p>

<pre><code>obj = 'str'
type ( obj ) == string
</code></pre>

<p>I tried:</p>

<pre><code>type ( obj ) == type ( string )
</code></pre>

<p>and it didn't work.</p>

<p>Also, what about the other types? For example, I couldn't replicate <code>NoneType</code>.</p>
"
707841,13055,2009-04-02T00:12:58Z,1,web.py: passing initialization / global variables to handler classes?,"<p>I'm attempting to use web.py with Tokyo Cabinet / pytc and need to pass the db handle (the connection to tokyo cabinet) to my handler classes so they can talk to tokyo cabinet. </p>

<p>Is there a way to pass the handler to the handler class's <strong>init</strong> function? Or should I be putting the handle in globals() ? What is globals() and how do you use it?</p>
"
707879,72556,2009-04-02T00:34:26Z,11,Which Python Bayesian text classification modules are similar to dbacl?,"<p>A quick Google search reveals that there are a good number of Bayesian classifiers implemented as Python modules. If I want wrapped, high-level functionality similar to <a href=""http://dbacl.sourceforge.net/"" rel=""nofollow"">dbacl</a>, which of those modules is right for me?</p>

<p>Training</p>

<pre><code>% dbacl -l one sample1.txt
% dbacl -l two sample2.txt
</code></pre>

<p>Classification</p>

<pre><code>% dbacl -c one -c two sample3.txt -v
one
</code></pre>
"
707999,52490,2009-04-02T01:45:03Z,14,Debugging a running python process,"<p>Is there a way to see a stacktrace of what various threads are doing inside a python process?  </p>

<p>Let's suppose I have a thread which allows me some sort of remote access to the process.</p>
"
708531,84359,2009-04-02T06:35:38Z,0,Python SAX parser says XML file is not well-formed,"<p>I stripped some tags that I thought were unnecessary from an XML file. Now when I try to parse it, my SAX parser throws an error and says my file is not well-formed. However, I know every start tag has an end tag. The file's opening tag has a link to an XML schema. Could this be causing the trouble? If so, then how do I fix it?</p>

<p>Edit: I think I've found the problem. My character data contains ""&amp;lt"" and ""&amp;gt"" characters, presumably from html tags. After being parsed, these are converted to ""&lt;"" and "">"" characters, which seems to bother the SAX parser. Is there any way to prevent this from happening?</p>
"
708649,63119,2009-04-02T07:24:59Z,19,Python comments: # vs strings,"<p>I have a question regarding the ""standard"" way to put comments inside Python source code:</p>

<pre><code>def func():
    ""Func doc""
    ... &lt;code&gt;
    'TODO: fix this'
    #badFunc()
    ... &lt;more code&gt;

def func():
    ""Func doc""
    ... &lt;code&gt;
    #TODO: fix this
    #badFunc()
    ... &lt;more code&gt;
</code></pre>

<p>I prefer to write general comments as strings instead of prefixing #'s.
The official python style guide doesn't mention using strings as comments (If I didn't miss it while reading it)</p>

<p>I like it that way mainly because I think the # character looks ugly with comment blocks. As far as I know these strings don't do anything.</p>

<p>The question is: Are there disadvantages in doing this?</p>
"
708762,85250,2009-04-02T08:05:37Z,9,SQLAlchemy - INSERT OR REPLACE equivalent,"<p>does anybody know what is the equivalent to SQL ""INSERT OR REPLACE"" clause in SQLAlchemy and its SQL expression language?</p>

<p>Many thanks -- honzas</p>
"
708799,86073,2009-04-02T08:27:42Z,4,How Much Traffic Can Shared Web Hosting (for a Python Django site) support?,"<p>Someone in this thread</p>

<p><a href=""http://stackoverflow.com/questions/685162/how-much-traffic-can-shared-web-hosting-take"">http://stackoverflow.com/questions/685162/how-much-traffic-can-shared-web-hosting-take</a></p>

<p>stated that a $5/mo shared hosting account on Reliablesite.net can support 10,000 - 20,000 unique users/day and 100,000 - 200,000 pageviews/day. 
That seems awfully high for a $5/mo account. And someone else told me it's far less than that. What's your experience?</p>

<p>I have a site based on Python, Django, MySQL/Postgresql. It doesn't have any video or other bandwidth heavy elements, but the whole site is dynamic, each page takes about 5 to 10 DB query, 90% reads, 10% writes.</p>

<p>Reliablesite.net is an ASP.NET hosting company. Any Python/LAMP hosting firm that can support 100-200,000 pageviews on a shared hosting account? If not, what kind of numbers am I looking at? Any suggestions for good hosting firms?</p>

<p>Thanks</p>
"
709036,3594,2009-04-02T09:45:13Z,13,"Why do languages like Java use hierarchical package names, while Python does not?","<p>I haven't done enterprise work in Java, but I often see the <a href=""http://stackoverflow.com/questions/420945/java-package-name-convention-failure"">reverse-domain-name package naming convention</a>. For example, for a Stack Overflow Java package you'd put your code underneath package <code>com.stackoverflow</code>.</p>

<p>I just ran across a Python package that uses the Java-like convention, and I wasn't sure what the arguments for and against it are, or whether they apply to Python in the same way as Java. What are the reasons you'd prefer one over the other? <strong>Do those reasons apply across the languages?</strong></p>
"
709084,11992,2009-04-02T09:56:55Z,10,How to tell the difference between an iterator and an iterable?,"<p>In Python the interface of an iterable is a subset of the <a href=""http://docs.python.org/library/stdtypes.html#iterator-types"">iterator interface</a>. This has the advantage that in many cases they can be treated in the same way. However, there is an important semantic difference between the two, since for an iterable <code>__iter__</code> returns a new iterator object and not just <code>self</code>. How can I test that an iterable is really an iterable and not an iterator? Conceptually I understand iterables to be collections, while an iterator only manages the iteration (i.e. keeps track of the position) but is not a collection itself.</p>

<p>The difference is for example important when one wants to loop multiple times. If an iterator is given then the second loop will not work since the iterator was already used up and directly raises <code>StopIteration</code>.</p>

<p>It is tempting to test for a <code>next</code> method, but this seems dangerous and somehow wrong. Should I just check that the second loop was empty?</p>

<p>Is there any way to do such a test in a more pythonic way? I know that this sound like a classic case of LBYL against EAFP, so maybe I should just give up? Or am I missing something?</p>

<p><strong>Edit:</strong>
S.Lott says in his answer below that this is primarily a problem of wanting to do multiple passes over the iterator, and that one should not do this in the first place. However, in my case the data is very large and depending on the situation has to be passed over multiple times for data processing (there is absolutely no way around this).</p>

<p>The iterable is also provided by the user, and for situations where a single pass is enough it will work with an iterator (e.g. created by a generator for simplicity). But it would be nice to safeguard against the case were a user provides only an iterator when multiple passes are needed.</p>

<p><strong>Edit 2:</strong>
Actually this is a very nice Example for <a href=""http://www.python.org/dev/peps/pep-3119/#abcs-for-containers-and-iterators"">Abstract Base Classes</a>. The <code>__iter__</code> methods in an iterator and an iterable have the same name but are sematically different! So <code>hasattr</code> is useless, but <code>isinstance</code> provides a clean solution.</p>
"
709385,66003,2009-04-02T11:49:09Z,8,What is the best way to toggle python prints?,"<p>I'm running Python 2.4 in a game engine and I want to be able to turn off all prints if needed. For example I'd like to have the prints on for a debug build, and then turned off for a release build.
It's also imperative that it's as transparent as possible.</p>

<p>My solution to this in the C code of the engine is having the <code>printf</code> function inside a <code>vararg</code> macro, and defining that to do nothing in a release build.</p>

<p>This is my current solution:</p>

<pre><code>DebugPrints = True
def PRINT (*args):
    global DebugPrints
    if DebugPrints:
    	string = """"
    	for arg in args:
    		string += "" "" + str(arg)
    	print string
</code></pre>

<p>It makes it easy to toggle print outs, but there is possibly a better way to format the string. My main issue is that this is actually adding a lot more function calls to the program.</p>

<p>I'm wondering if there is anything you can do to how the print keyword works?</p>
"
709388,54547,2009-04-02T11:50:49Z,4,What's a more elegant rephrasing of this cropping algorithm? (in Python),"<p>I want to crop a thumbnail image in my Django application, so that I get a quadratic image that shows the center of the image. This is not very hard, I agree. </p>

<p>I have already written some code that does exactly this, but somehow it lacks a certain ... elegance. I don't want to play code golf, but there must be a way to express this shorter and more pythonic, I think.</p>

<pre><code>x = y = 200 # intended size
image = Image.open(filename)
width = image.size[0]
height = image.size[1]
if (width &gt; height):
    crop_box = ( ((width - height)/2), 0, ((width - height)/2)+height, height )
    image = image.crop(crop_box)
elif (height &gt; width):
    crop_box = ( 0, ((height - width)/2), width, ((height - width)/2)+width )
    image = image.crop(crop_box)
image.thumbnail([x, y], Image.ANTIALIAS)
</code></pre>

<p>Do you have any ideas, SO?</p>

<p><strong>edit:</strong> explained x, y</p>
"
709397,3408,2009-04-02T11:54:59Z,6,Import an existing python project to XCode,"<p>I've got a python project I've been making in terminal with vim etc.. I've read that XCode supports Python development at that it supports SVN (which I am using) but I can't find documentation on how to start a new XCode project from an existing code repository.</p>

<p>Other developers are working on the project not using XCode - They won't mind if I add a project file or something, but they will mind if I have to reorganise the whole thing.</p>
"
709490,80500,2009-04-02T12:21:31Z,9,python code convention using pylint,"<p>I'm trying out pylint to check my source code for conventions. Somehow some variable names are matched with the regex for constants (<code>const-rgx</code>) instead of the variable name regex (<code>variable-rgx</code>). How to match the variable name with <code>variable-rgx</code>? Or should I extend <code>const-rgx</code> with my <code>variable-rgx</code> stuff?</p>

<p>e.g.<br />
<code>C0103: 31: Invalid name ""settings"" (should match (([A-Z_][A-Z1-9_]*)|(__.*__))$)</code></p>
"
709868,3233,2009-04-02T14:09:01Z,5,Python server side AJAX library?,"<p>I want to have a browser page that updates some information on a timer or events. I'd like to use Python on the server side. It's quite simple, I don't need anything massively complex.</p>

<p>I can spend some time figuring out how to do all this the ""AJAX way"", but I'm sure someone has written a nice Python library to do all the heavy lifting. If you have used such a library please let me know the details. </p>

<p>Note: I saw <a href=""http://stackoverflow.com/questions/336866/how-to-implement-a-minimal-server-for-ajax-in-python"">how-to-implement-a-minimal-server-for-ajax-in-python</a> but I want a library to hide the implementation details.</p>
"
709937,27620,2009-04-02T14:29:22Z,7,Backslashes being added into my cookie in Python,"<p>Hey,
I am working with Python's SimpleCookie and I ran into this problem and I am not sure if it is something with my syntax or what.  Also, this is classwork for my Python class so it is meant to teach about Python so this is far from the way I would do this in the real world.  </p>

<p>Anyway, so basically I am keeping information input into a form in a cookie.  I am attempting to append to the previous cookie with the new information entered.  But for some reason on the third entry of data the cookie suddenly gets ""\"" in it.  I am not sure where they are coming from though.  </p>

<p>This is the type of output I am getting:</p>

<blockquote>
  <p>""\""\\""\\\\""test:more\\\\"":rttre\\"":more\"":and more""</p>
</blockquote>

<pre><code>#!/usr/local/bin/python

import cgi,os,time,Cookie
#error checking
import cgitb
cgitb.enable()

if 'HTTP_COOKIE' in os.environ:
    cookies = os.environ['HTTP_COOKIE']
    cookies = cookies.split('; ')
    for myCookie in cookies:
    	myCookie = myCookie.split('=')
    	name = myCookie[0]
    	value = myCookie[1]
    	if name == 'critter' :
    		hideMe = value

#import critterClass

#get info from form
form = cgi.FieldStorage()
critterName = form.getvalue('input')
input2 = form.getvalue('input2')
hiddenCookie = form.getvalue('hiddenCookie')
hiddenVar = form.getvalue('hiddenVar')

#make cookie
cookie = Cookie.SimpleCookie()

#set critter Cookie
if critterName is not None:
    cookie['critter'] = critterName
#If already named
else:
    #if action asked, append cookie
    if input2 is not None:
    	cookie['critter'] = hideMe+"":""+input2
    else:
    	cookie['critter'] = ""default""

print cookie


print ""Content-type: text/html\n\n""



if ((critterName is None) and (input2 is None)):
    print """"""
    &lt;form name=""critter"" id=""critter"" method=""post"" action=""critter.py""&gt;
    &lt;label for=""name""&gt;Name your pet: &lt;input type=""text"" name=""input"" id=""input"" /&gt;&lt;/label&gt;
    &lt;input type=""submit"" name=""submit"" id=""submit"" value=""Submit"" /&gt;
    &lt;/form&gt;
    """"""
else:
    formTwo =""""""
    &lt;form name=""critter2"" id=""critter2"" method=""post"" action=""critter.py""&gt;
    &lt;label for=""name""&gt;%s wants to: &lt;input type=""text"" name=""input2"" id=""input2"" /&gt;&lt;/label&gt;
    &lt;input type=""hidden"" name=""hiddenVar"" id=""hiddenVar"" value=""%s"" /&gt;
    &lt;input type=""submit"" name=""submit"" id=""submit"" value=""Submit"" /&gt;
    &lt;/form&gt;
    [name,play,feed,mood,levels,end]
    """"""
    print formTwo % (critterName,critterName)

if 'HTTP_COOKIE' in os.environ:
    cookies = os.environ['HTTP_COOKIE']
    cookies = cookies.split('; ')
    for myCookie in cookies:
    	myCookie = myCookie.split('=')
    	name = myCookie[0]
    	value = myCookie[1]
    	if name == 'critter' :
    		print ""name""+name
    		print ""value""+value
</code></pre>
"
710100,86249,2009-04-02T15:05:31Z,3,'for' loop through form fields and excluding one of the fields with 'if',"<p>The problem I'm struggling with is as follows:</p>

<p>I have:</p>

<pre><code>{% for field in form %}
    {{ field }}
{% end for %}
</code></pre>

<p>What I want is to put an 'if' statement to exclude a field which .label or whatever is provided. Like:</p>

<pre><code>{% for field in form%}
    {% if field == title %}
    {% else %}
        {{ field }}
    {% endif %}
{% endfor %}
</code></pre>

<p>Is it possible? I have to many fields to write them one by one and only one or two to exclude.</p>

<p>Thank you for any tips.</p>

<p>BR,
Czlowiekwidmo.</p>
"
710262,NA,2009-04-02T15:37:15Z,1,case-insensitive alphabetical sorting of nested lists,"<p>i'm trying to sort this nested list by inner's list first element:</p>

<pre><code>ak = [ ['a',1],['E',2],['C',13],['A',11],['b',9] ]
ak.sort(cmp=lambda x, y: cmp(x[0], y[0]))
for i in ak: {
	print i
}
</code></pre>

<p>by default python considers A > a, hence the output i get is:</p>

<pre><code>['A', 11] ['C', 13] ['E', 2] ['a', 1] ['b', 9]
</code></pre>

<p>i've tried converting all list values to even case during comparison by adding x[0].lower etc. but no use. How do i force python (i'm working on 2.4 version) to do case-insensitive alphabetical sorting?</p>

<p><strong>Edited:</strong></p>

<blockquote>
  <p>Jarret and Brian, your
  assumptions about parenthesis were
  right! I did forget to put them in! And Jarret, your suggestions about not using ""cmp"" works like a charm! Thanks a lot guys!</p>
</blockquote>
"
710278,86263,2009-04-02T15:39:19Z,1,Python 3.0 Windows/COM,"<p>How to access a COM object from a python file using python 3.0.  </p>

<p>And, yes, I know that not a lot of people are using Python 3.0.  Switching back to 2.6 is a <em>huge</em> hassle for me, so I don't want to unless I absolutely have to. </p>

<p>I appreciate your time, and any assistance!</p>
"
710551,44041,2009-04-02T16:40:49Z,138,'import module' or 'from module import',"<p>I've tried to find a comprehensive guide on whether it is best to use <code>import module</code> or <code>from module import</code>. I've just started with Python, with the intention for developing web applications with Django and I'm trying to start off with best practices in mind.</p>

<p>Basically, I was hoping if anyone could share their experiences, what preferences other developers have and whats the best way to avoid any <em>gotchas</em> down the road.</p>
"
710609,86311,2009-04-02T16:53:08Z,94,Checking a Python module version at runtime,"<p>Many third-party Python modules have an attribute which holds the version information for the module (usually something like <code>module.VERSION</code> or <code>module.__version__</code>), however some do not.</p>

<p>Particular examples of such modules are libxslt and libxml2.</p>

<p>I need to check that the correct version of these modules are being used at runtime. Is there a way to do this?</p>

<p>A potential solution wold be to read in the source at runtime, hash it, and then compare it to the hash of the known version, but that's nasty. </p>

<p>Is there a better solutions?</p>
"
711002,NA,2009-04-02T18:26:57Z,2,How to deliver instance of object to instance of SocketServer.BaseRequestHandler?,"<p>This is problem.
My primary work is : deliver ""s"" object to ""handle"" method in TestRequestHandler class. 
My first step was : deliver ""s"" object through ""point"" method to TestServer class, but here im stuck. How to deliver ""s"" object to TestRequestHandler? Some suggestions?</p>

<pre><code>import threading
import SocketServer
from socket import *

class TestRequestHandler(SocketServer.BaseRequestHandler):

    def __init__(self, request, client_address, server):
        SocketServer.BaseRequestHandler.__init__(self, request, client_address, server)
        return

    def setup(self):
        return SocketServer.BaseRequestHandler.setup(self)

    def handle(self):
        data = self.request.recv(1024)

        if (data): 
            self.request.send(data)
            print data

    def finish(self):
        return SocketServer.BaseRequestHandler.finish(self)

class TestServer(SocketServer.TCPServer):

    def __init__(self, server_address, handler_class=TestRequestHandler):
        print ""__init__""
        SocketServer.TCPServer.__init__(self, server_address, handler_class)
        return

    def point(self,obj):
        self.obj = obj
        print ""point""

    def server_activate(self):
        SocketServer.TCPServer.server_activate(self)
        return

    def serve_forever(self):
        print ""serve_forever""
        while True:
            self.handle_request()
        return

    def handle_request(self):
        return SocketServer.TCPServer.handle_request(self)

if __name__ == '__main__':

    s = socket(AF_INET, SOCK_STREAM)

    address = ('localhost', 6666)
    server = TestServer(address, TestRequestHandler)
    server.point(s)
    t = threading.Thread(target=server.serve_forever())
    t.setDaemon(True)
    t.start()
</code></pre>
"
711066,3051,2009-04-02T18:42:15Z,4,calling execfile() in custom namespace executes code in '__builtin__' namespace,"<p>When I call execfile without passing the globals or locals arguments it creates objects in the current namespace, but if I call execfile and specify a dict for globals (and/or locals), it creates objects in the <code>__builtin__</code> namespace. </p>

<p>Take the following example:</p>

<pre><code># exec.py
def myfunc():
    print 'myfunc created in %s namespace' % __name__
</code></pre>

<p>exec.py is execfile'd from main.py as follows.</p>

<pre><code># main.py
print 'execfile in global namespace:'
execfile('exec.py')
myfunc()
print    

print 'execfile in custom namespace:'
d = {}
execfile('exec.py', d)
d['myfunc']()
</code></pre>

<p>when I run main.py from the commandline I get the following output.</p>

<pre><code>execfile in global namespace:
myfunc created in __main__ namespace

execfile in custom namespace:
myfunc created in __builtin__ namespace
</code></pre>

<p>Why is it being run in <code>__builtin__</code> namespace in the second case? </p>

<p>Furthermore, if I then try to run myfunc from <code>__builtins__</code>, I get an AttributeError. (This is what I would hope happens, but then why is <code>__name__</code> set to <code>__builtin__</code>?)</p>

<pre><code>&gt;&gt;&gt; __builtins__.myfunc()
Traceback (most recent call last):
  File ""&lt;stdin&gt;"", line 1, in ?
AttributeError: 'module' object has no attribute 'myfunc'
</code></pre>

<p>Can anyone explain this behaviour?
Thanks</p>
"
711376,79470,2009-04-02T20:04:38Z,2,Changing element value with BeautifulSoup returns empty element,"<pre><code>from BeautifulSoup import BeautifulStoneSoup

xml_data = """"""
&lt;doc&gt;
  &lt;test&gt;test&lt;/test&gt;
  &lt;foo:bar&gt;Hello world!&lt;/foo:bar&gt;
&lt;/doc&gt;
""""""

soup = BeautifulStoneSoup(xml_data)
print soup.prettify()
make = soup.find('foo:bar')
print make
# prints &lt;foo:bar&gt;Hello world!&lt;/foo:bar&gt;

make.contents = ['Top of the world Ma!']
print make
# prints &lt;foo:bar&gt;&lt;/foo:bar&gt;
</code></pre>

<p>How do I change the content of the element, in this case the element in the variable ""make"", without loosing the content? If you could point me to other pure python modules wich can modify existing xml-documents, please let me know.</p>

<p>PS! BeautifulSoup is great for screenscraping and parsing of both HTML and XML!</p>
"
711637,55565,2009-04-02T21:08:35Z,3,generating plural forms into a .pot file,"<p>I'm internationalizing a python program and cant get plural forms into the .pot file.  I have marked string that require plural translations with a _pl() eg.</p>

<p><code>self.write_info(_pl(""%(num)d track checked"", ""%(num)d tracks checked"",
                     song_obj.song_count) % {""num"" : song_obj.song_count})</code></p>

<p>Then I'm running:
<code>xgettext --language=Python --keyword=_pl --output=output.pot *.py</code>
Only the first (singular) string is generated in the pot file.</p>
"
711884,76701,2009-04-02T22:31:35Z,62,Python naming conventions for modules,"<p>I have a module whose purpose is to define a class called ""nib"". (and a few related classes too.) How should I call the module itself? ""nib""? ""nibmodule""? Anything else?</p>
"
712020,680,2009-04-02T23:27:37Z,28,List all Tests Found by Nosetest,"<p>I use <code>nosetests</code> to run my unittests and it works well. I want to get a list of all the tests <code>nostests</code> finds without actually running them. Is there a way to do that?</p>
"
712082,2786,2009-04-02T23:54:34Z,1,Barchart sizing of text & barwidth with matplotlib - python,"<p>I'm creating a bar chart with matplotlib-0.91 (for the first time) but the y axis labels are being cut off.  If I increase the width of the figure enough they eventually show up completely but then the output is not the correct size.</p>

<p>Any way to deal with this?</p>
"
712113,83898,2009-04-03T00:14:23Z,0,Is there a good python module that does HTML encoding/escaping in C?,"<p>There is cgi.escape but that appears to be implemented in pure python.  It seems like most frameworks like Django also just run some regular expressions.  This is something we do a lot, so it would be good to have it be as fast as possible.</p>

<p>Maybe C implementations wouldn't be much faster than a series of regexes for this?</p>
"
712124,NA,2009-04-03T00:18:21Z,5,Going nuts with executing python script via crontab on debian!,"<p>This is what my crontab file looks like:</p>

<pre><code>* * * * *  root /usr/bin/python /root/test.py &gt;&gt; /root/classwatch.log 2&gt;&amp;1
</code></pre>

<p>This is what my python script looks like:</p>

<pre><code>#!/usr/bin/python
print ""hello""
</code></pre>

<p>The cronjob creates the log file. But it is empty. I am also pretty certain that the python file is not being executed.</p>

<p>Appreciate any help! I've been playing with it for past 4 hrs with no luck.</p>
"
712225,30105,2009-04-03T01:14:28Z,3,How to work around needing to update a dictionary,"<p>I need to delete a k/v pair from a dictionary in a loop.  After getting <code>RuntimeError: dictionary changed size during iteration</code> I pickled the dictionary after deleting the k/v and in one of the outer loops I try to reopen the newly pickled/updated dictionary.  However, as many of you will probably know-I get the same error-I think when it reaches the top of the loop.  I do not use my dictionary in the outermost loop.  </p>

<p>So my question is-does anyone know how to get around this problem?  I want to delete a k/V pair from a dictionary and use that resized dictionary on the next iteration of the loop.</p>

<p>to focus the problem and use the solution from Cygil</p>

<pre><code>list=[27,29,23,30,3,5,40]
testDict={}
for x in range(25):
    tempDict={}
    tempDict['xsquared']=x*x
    tempDict['xinverse']=1.0/(x+1.0)
    testDict[(x,x+1)]=tempDict

for item in list:
    print 'the Dictionary now has',len(testDict.keys()), ' keys'
    for key in testDict.keys():
        if key[0]==item:

		del testDict[key]
</code></pre>

<p>I am doing this because I have to have some research assistants compare some observations from two data sets that could not be matched because of name variants.  The idea is to throw up a name from one data set (say set A) and then based on a key match find all the names attached to that key in the other dataset (set B).  One a match has been identified I don't want to show the value from B again to speed things up for them.  Because there are 6,000 observations I also don't want them to have to start at the beginning of A each time they get back to work.  However, I can fix that by letting them chose to enter the last key from A they worked with.  But I really need to reduce B once the match has been identified  </p>
"
712322,NA,2009-04-03T02:09:12Z,3,Is it possible to get a timezone in Python given a UTC timestamp and a UTC offset?,"<p>I have data that is the UTC offset and the UTC time. Given that, is it possible in Python to get the user's local timezone (mainly to figure if it is DST etc. probably using pytz), similar to the function in PHP <code>timezone_name_from_abbr</code>?</p>

<p>For example:</p>

<p>If my epoch time is 1238720309,
I can get the UTC time as:</p>

<pre><code>&gt;&gt;&gt; d = datetime.utcfromtimestamp(1238720309)
&gt;&gt;&gt; print d + dt.timedelta(0,-28800) #offset for pacific I think
2009-04-02 17:04:41.712143 
</code></pre>

<p>This is correct except it is PDT right now, so it should be:</p>

<pre><code>2009-04-02 18:04:41.712413
</code></pre>

<p>I need to get the timezone to use in pytz to figure out if it is daylight saving, I think?</p>
"
712460,86537,2009-04-03T03:33:41Z,4,Interpreting Number Ranges in Python,"<p>In a Pylons webapp, I need to take a string such as ""&lt;3, 45, 46, 48-51, 77"" and create a list of ints (which are actually IDs of objects) to search on. </p>

<p>Any suggestions on ways to do this? I'm new to Python, and I haven't found anything out there that helps with this kind of thing.</p>

<p>The list would be: [1, 2, 3, 45, 46, 48, 49, 50, 51, 77]</p>
"
712510,NA,2009-04-03T04:02:50Z,4,Using CSV as a mutable database?,"<p>Yes, this is as stupid a situation as it sounds like.  Due to some extremely annoying hosting restrictions and unresponsive tech support, I have to use a CSV file as a database.  </p>

<p>While I can use MySQL with PHP, I can't use it with the Python backend of my program because of install issues with the host.  I can't use SQLite with PHP because of more install issues, but can use it as it's a Python builtin.</p>

<p>Anyways, now, the question: is it possible to update values SQL-style in a CSV database? Or should I keep on calling the help desk?</p>
"
712791,55562,2009-04-03T06:56:13Z,289,What are the differences between json and simplejson Python modules?,"<p>I have seen many projects using <strong><code>simplejson</code></strong> module instead of <strong><code>json</code></strong> module from the Standard Library. Also, there are many different <code>simplejson</code> modules. Why would use these alternatives, instead of the one in the Standard Library?</p>
"
713138,1384652,2009-04-03T09:04:09Z,75,Getting the docstring from a function,"<p>I have the following function:</p>

<pre><code>def my_func():
    """"""My docstring is both funny and informative""""""
    pass
</code></pre>

<p>How do I get access to the docstring?</p>
"
713522,NA,2009-04-03T11:14:07Z,0,How to disable v1 tag in a Web service request with SoapPy?,"<p>I'm trying to use SOAPpy to write a web service client. However after defining WSDL object, a call to a web-service method is wrapped in a </p>

<pre><code> &lt;v1&gt; .. actual parameters .. &lt;/v1&gt;
</code></pre>

<p>How can I disable this v1 tag?</p>
"
713675,64579,2009-04-03T12:13:18Z,5,Preserving the Java-type of an object when passing it from Java to Jython,"<p>I wonder if it possible to <strong>not</strong> have jython automagicaly transform java objects to python types when you put them in a Java ArrayList.</p>

<p>Example copied from a jython-console:</p>

<pre><code>&gt;&gt;&gt; b = java.lang.Boolean(""True"");
&gt;&gt;&gt; type(b)
&lt;type 'javainstance'&gt;
&gt;&gt;&gt; isinstance(b, java.lang.Boolean);
1
</code></pre>

<p>So far, everything is fine but if I put the object in an ArrayList</p>

<pre><code>&gt;&gt;&gt; l = java.util.ArrayList();
&gt;&gt;&gt; l.add(b)
1
&gt;&gt;&gt; type(l.get(0))
&lt;type 'int'&gt;
</code></pre>

<p>the object is transformed into a python-like boolean (i.e. an int) and... </p>

<pre><code>&gt;&gt;&gt; isinstance(l.get(0), java.lang.Boolean)
0
</code></pre>

<p>which means that I can no longer see that this was once a java.lang.Boolean.</p>

<p><strong>Clarification</strong></p>

<p>I guess what really want to achieve is to get rid of the implicit conversion from Java-types to Python-types when passing objects from Java to Python. I will give another example for clarification.</p>

<p>A Python module:</p>

<pre><code>import java

import IPythonModule

class PythonModule(IPythonModule):

    def method(self, data):
        print type(data);
</code></pre>

<p>And a Java-Class that uses this module:</p>

<pre><code>import java.util.ArrayList;

import org.python.core.PyList;
import org.testng.annotations.*;

import static org.testng.AssertJUnit.*;

public class Test1 {

    IPythonModule m;

    @BeforeClass
    public void setUp() {
    	JythonFactory jf = JythonFactory.getInstance();
    	m = (IPythonModule) jf.getJythonObject(
    			""IPythonModule"",
    	""/Users/sg/workspace/JythonTests/src/PythonModule.py"");
    }

    @Test
    public void testFirst() {
    	m.method(new Boolean(""true""));
    }	
}
</code></pre>

<p>Here I will see the output 'bool' because of the implicit conversion, but what I would really like is to see 'javainstance' or 'java.lang.Boolean'. If you want to run this code you will also need the JythonFactory-class that can be found <a href=""http://wiki.python.org/jython/JythonMonthly/Articles/September2006/1"" rel=""nofollow"">here</a>.</p>
"
713794,69882,2009-04-03T13:00:25Z,129,Catching an exception while using a Python 'with' statement,"<p>To my shame, I can't figure out how to handle exception for python 'with' statement. If I have a code:</p>

<pre><code>with open(""a.txt"") as f:
    print f.readlines()
</code></pre>

<p>I really want to handle 'file not found exception' in order to do somehing. But I can't write</p>

<pre><code>with open(""a.txt"") as f:
    print f.readlines()
except:
    print 'oops'
</code></pre>

<p>and can't write</p>

<pre><code>with open(""a.txt"") as f:
    print f.readlines()
else:
    print 'oops'
</code></pre>

<p>enclosing 'with' in a try/except statement doesn't work else: exception is not raised. What can I do in order to process failure inside 'with' statement in a Pythonic way?</p>
"
713938,77284,2009-04-03T13:35:52Z,18,How can I generate a screenshot of a webpage using a server-side script?,"<p>I need a server-side script (PHP, Python) to capture a webpage to a PNG, JPG, Tiff, GIF image and resize them to a thumbnail.</p>

<p>What is the best way to accomplish this?</p>

<h3>See also:</h3>

<blockquote>
  <ul>
  <li><a href=""http://stackoverflow.com/questions/686858/web-page-screenshots-with-php"">Web Page Screenshots with PHP?</a></li>
  <li><a href=""http://stackoverflow.com/questions/627301/how-can-i-take-a-screenshot-of-a-website-with-php-and-gd"">How can I take a screenshot of a website with PHP and GD?</a></li>
  <li><a href=""http://stackoverflow.com/questions/443837"">How might I obtain a Snapshot or Thumbnail of a web page using PHP?</a></li>
  </ul>
</blockquote>
"
714063,76701,2009-04-03T14:08:02Z,197,Importing modules from parent folder,"<p>I am running Python 2.5.</p>

<p>This is my folder tree:</p>

<pre><code>ptdraft/
  nib.py
  simulations/
    life/
      life.py
</code></pre>

<p>(I also have <code>__init__.py</code> in each folder, omitted here for readability)</p>

<p>How do I import the <code>nib</code> module from inside the <code>life</code> module? I am hoping it is possible to do without tinkering with sys.path.</p>

<p>Note: The main module being run is in the <code>ptdraft</code> folder.</p>
"
714360,38666,2009-04-03T15:10:32Z,2,How to execute an arbitrary shell script and pass multiple variables via Python?,"<p>I am building an application plugin in Python which allows users to arbitrarily extend the application with simple scripts (working under Mac OS X).  Executing Python scripts is easy, but some users are more comfortable with languages like Ruby.</p>

<p>From what I've read, I can easily execute Ruby scripts (or other arbitrary shell scripts) using <code>subprocess</code> and capture their output with a pipe; that's not a problem, and there's lots of examples online.  However, I need to provide the script with multiple variables (say a chunk of text along with some simple boolean information about the text the script is modifying) and I'm having trouble figuring out the best way to do this.</p>

<p>Does anyone have a suggestion for the best way to accomplish this?  My goal is to provide scripts with the information they need with the least required code needed for accessing that information within the script.</p>

<p>Thanks in advance!</p>
"
714367,39623,2009-04-03T15:11:15Z,3,Turning ctypes data into python string as quickly as possible,"<p>I'm trying to write a video application in PyQt4 and I've used Python ctypes to hook into an old legacy video decoder library. The library gives me 32-bit ARGB data and I need to turn that into a QImage. I've got it working as follows:</p>

<pre><code>
# Copy the rgb image data from the pointer into the buffer
memmove(self.rgb_buffer, self.rgb_buffer_ptr, self.buffer_size)

# Copy the buffer to a python string
imgdata = """"
for a in self.rgb_buffer:
    imgdata = imgdata + a

# Create a QImage from the string data
img = QImage(imgdata, 720, 288, QImage.Format_ARGB32)
</code></pre>

<p>The problem is that ctypes outputs the data as type ""<code>ctypes.c_char_Array_829440</code>"" and I need to turn it into a python string so that I can construct a QImage. My copying mechanism is currently taking almost 300ms per image so it's painfully slow. The decode and display part of the process is only taking about 50ms.</p>

<p>Can anyone think of any cunning shortcuts I can take to speed up this process and avoid the need to copy the buffer twice as I'm currently doing?</p>
"
714475,46914,2009-04-03T15:32:14Z,21,What is a maximum number of arguments in a Python function?,"<p>It's somewhat common knowledge that Python functions can have a maximum of 256 arguments.  What I'm curious to know is if this limit applies to <code>*args</code> and <code>**kwargs</code> when they're unrolled in the following manner:</p>

<pre><code>items = [1,2,3,4,5,6]

def do_something(*items):
    pass
</code></pre>

<p>I ask because, hypothetically, there might be cases where a list larger than 256 items gets unrolled as a set of <code>*args</code> or <code>**kwargs</code>.</p>
"
714879,84861,2009-04-03T17:20:33Z,4,How do I print outputs from calls to subprocess.Popen(...) in a loop?,"<p>I wrote a script to run a command-line program with different input arguments and grab a certain line from the output. I have the following running in a loop:</p>

<pre><code>p1 = subprocess.Popen([""program"", args], stderr=subprocess.STDOUT, stdout=subprocess.PIPE, shell=False)
p2 = subprocess.Popen([""grep"", phrase], stdin=p1.stdout, stdout=subprocess.PIPE, shell=False)
p1.wait()
p2.wait()
p = str(p2.stdout.readlines())
print 'p is ', p
</code></pre>

<p>One problem is that there is only output after the loop is finished running. I want to print something each time a process is finished. How can I do that?</p>

<p>Also, I want to have the option of displaying the output of p1. But I can't grab it with p1.stdout.readlines() without breaking p2. How can I do this?</p>

<p>I was thinking that I could just not make the call to grep, store the output of p1 and search for the phrase, but there's a lot of output, so this way seems pretty inefficient.</p>

<p>Any suggestions would be greatly appreciated. Thanks!</p>
"
714881,51816,2009-04-03T17:21:58Z,86,How to include external Python code to use in other files?,"<p>If you have a collection of methods in a file, is there a way to include those files in another file, but call them without any prefix (i.e. file prefix)?</p>

<p>So if I have:</p>

<pre><code>[Math.py]
def Calculate ( num )
</code></pre>

<p>How do I call it like this:</p>

<pre><code>[Tool.py]
using Math.py

for i in range ( 5 ) :
    Calculate ( i )
</code></pre>
"
715125,NA,2009-04-03T18:34:46Z,1,WeakValueDictionary for holding any type,"<p>Is there any way to work around the limitations of WeakValueDictionary to allow it to hold weak references to built-in types like dict or list?  Can something be done at the C level in an extension module?  I really need a weakref container that can hold (nearly) any type of object.</p>
"
715234,73894,2009-04-03T19:04:34Z,5,python dict update diff,"<p>Does python have any sort of built in functionality of notifying what dictionary elements changed upon dict update?  For example I am looking for some functionality like this:</p>

<pre><code>&gt;&gt;&gt; a = {'a':'hamburger', 'b':'fries', 'c':'coke'}
&gt;&gt;&gt; b = {'b':'fries', 'c':'pepsi', 'd':'ice cream'}
&gt;&gt;&gt; a.diff(b)
{'c':'pepsi', 'd':'ice cream'}
&gt;&gt;&gt; a.update(b)
&gt;&gt;&gt; a
{'a':'hamburger', 'b':'fries', 'c':'pepsi', 'd':'ice cream'}
</code></pre>

<p>I am looking to get a dictionary of the changed values as shown in the result of a.diff(b)  </p>
"
715277,84065,2009-04-03T19:15:37Z,16,How do I iterate over all lines of files passed on the command line?,"<p>I usually do this in Perl:</p>

<p>whatever.pl</p>

<pre><code>while(&lt;&gt;) {
    #do whatever;
}
</code></pre>

<p>then <code>cat foo.txt | whatever.pl</code></p>

<p>Now, I want to do this in Python. I tried <code>sys.stdin</code> but I have no idea how to do as I have done in Perl. How can I read the input?</p>
"
715304,28421,2009-04-03T19:20:45Z,4,How can I print entity numbers in my xml document instead of entity names using python's lxml?,"<p>I'm using lxml and python to generate xml documents (just using etree.tostring(root) ) but at the moment the resulting xml displays html entities as with named entities ( &amp;lt ; ) rather than their numeric values ( &amp;#60 ; ).  How exactly do I go about changing this so that the result uses the numeric values instead of the names?</p>

<p>Thanks</p>
"
715417,51816,2009-04-03T19:44:20Z,258,Converting from a string to boolean in Python?,"<p>Does anyone know how to do convert from a string to a boolean in Python? I found <a href=""http://codecomments.wordpress.com/2008/04/08/converting-a-string-to-a-boolean-value-in-python/"">this link</a>. But it doesn't look like a proper way to do it.  I.e. using a built in functionality, etc.</p>

<p>EDIT: The reason I asked this is because I learned int(""string""), from here. I tried bool (""string"") but always got True.</p>
"
715538,54248,2009-04-03T20:11:22Z,4,How can I talk to UniProt over HTTP in Python?,"<p>I'm trying to get some results from UniProt, which is a protein database (details are not important). I'm trying to use some script that translates from one kind of ID to another. I was able to do this manually on the browser, but could not do it in Python. </p>

<p>In <a href=""http://www.uniprot.org/faq/28"" rel=""nofollow"">http://www.uniprot.org/faq/28</a> there are some sample scripts. I tried the Perl one and it seems to work, so the problem is my Python attempts. The (working) script is:</p>

<pre><code>## tool_example.pl ##
use strict;
use warnings;
use LWP::UserAgent;

my $base = 'http://www.uniprot.org';
my $tool = 'mapping';
my $params = {
  from =&gt; 'ACC', to =&gt; 'P_REFSEQ_AC', format =&gt; 'tab',
  query =&gt; 'P13368 P20806 Q9UM73 P97793 Q17192'
};

my $agent = LWP::UserAgent-&gt;new;
push @{$agent-&gt;requests_redirectable}, 'POST';
print STDERR ""Submitting...\n"";
my $response = $agent-&gt;post(""$base/$tool/"", $params);

while (my $wait = $response-&gt;header('Retry-After')) {
  print STDERR ""Waiting ($wait)...\n"";
  sleep $wait;
  print STDERR ""Checking...\n"";
  $response = $agent-&gt;get($response-&gt;base);
}

$response-&gt;is_success ?
  print $response-&gt;content :
  die 'Failed, got ' . $response-&gt;status_line . 
    ' for ' . $response-&gt;request-&gt;uri . ""\n"";
</code></pre>

<p>My questions are:</p>

<p>1) How would you do that in Python?</p>

<p>2) Will I be able to massively ""scale"" that (i.e., use a lot of entries in the query field)?</p>
"
715550,86887,2009-04-03T20:14:25Z,21,Best way to encode tuples with json,"<p>In python I have a dictionary that maps tuples to a list of tuples. e.g. </p>

<p><code>{(1,2): [(2,3),(1,7)]}</code></p>

<p>I want to be able to encode this data use it with javascript, so I looked into json but it appears keys must be strings so my tuple does not work as a key.</p>

<p>Is the best way to handle this is encode it as ""1,2"" and then parse it into something I want on the javascript? Or is there a more clever way to handle this.</p>
"
715791,NA,2009-04-03T21:26:00Z,0,Launching a .py python script from within a cgi script,"<p>I'm trying to launch a .py script from within a cgi script while running a local cgi server.
The cgi script simply receives some data from Google Earth and passes it to the .py script which is currently being called using execfile('script.py') placed at the end of the cgi script.</p>

<p>The script runs to completion, however script.py contains some print statements that I need to be able to monitor while the process runs. Any errors in the .py print to the localhost console window and the print statements seem to be buffered.</p>

<p>Is there a way to send the output from the .py to another python console window while the localhost console is running?</p>

<p>It seems like the subprocess module should do what I need but I've only been able to send the output to a variable or a logfile. This is fine except that I need to see the print statements in real-time.</p>

<p>Thanks in advance</p>
"
715889,14838,2009-04-03T21:58:47Z,0,Populating form field based on query/slug factor,"<p>I've seen some similar questions, but nothing that quite pointed me in the direction I was hoping for. I have a situation where I have a standard django form built off of a model. This form has a drop down box where you select an item you want to post a comment on. Now I'd like people to be able to browse by items, and click a link to comment on that particular item. What I'd like is for when a user clicks that link they'll be presented with the same old form, however, the dropbox will be defaulted to the item they wanted to comment on. </p>

<p>Is there a sane way to do this with the existing form? 
Should I create a separate form entirely for this need?</p>

<p>As a note, this isn't a true comment system, and isn't intended to be. One idea I had was to construct urls like:</p>

<pre><code>comment/?q=item1
</code></pre>

<p>Catching the 'item1' section, and then over riding the save function to force that into the form, while hiding the company in the form. From a UI standpoint, I'm not ecstatic with that idea though. Any thoughts or ideas?</p>
"
715950,76701,2009-04-03T22:24:24Z,1,A wxPython timeline widget,"<p>I am looking for a certain wxPython widget to use in my program. I hope that something like this exists and that you might know where to find. I will try to describe the functionality I'm looking for:</p>

<p>Imagine something like the widget that Audacity uses to display an audio track. It's a horizontal timeline, with a ruler. It is possible to zoom in and out, and to scroll, and the ruler updates to reflect where / how deep you are on the timeline.
Only a finite segment of the timeline is ""occupied"", i.e., actually contains data. The rest is empty.
It is possible to select with the mouse any time point on the timeline, and, of course, it is possible to let it ""play"": to traverse the timeline from left to right in a specified speed.</p>

<p>If you know something that's at least close to what I describe, I'd be interested.</p>

<p><hr /></p>

<p>If you want to know what the job of this widget is: It's for a program for running simulations. The program calculates the simulation in the background, extending the ""occupied"" part of the timeline. It is possible to select different points in the timeline to observe the state of the system in a certain timepoint, and of course it is possible to play the simulation.</p>

<p>Thanks!</p>
"
716006,80911,2009-04-03T22:52:46Z,5,OptionParser - supporting any option at the end of the command line,"<p>I'm writing a small program that's supposed to execute a command on a remote server (let's say a reasonably dumb wrapper around <code>ssh [hostname] [command]</code>).</p>

<p>I want to execute it as such:</p>

<pre>./floep [command] </pre>

<p>However, I need to pass certain command lines from time to time:</p>

<pre>./floep -v [command]</pre>

<p>so I decided to use optparse.OptionParser for this. Problem is, I sometimes the command also has argument, which works fine if I do:</p>

<pre>./floep -v ""uname -a""</pre>

<p>But I also want it to work when I use:</p>

<pre>./floep -v uname -a</pre>

<p>The idea is, as soon as I come across the first non-option argument, everything after that should be part of my command.</p>

<p>This, however, gives me:</p>

<pre>Usage: floep [options]

floep: error: no such option: -a</pre>

<p>Does OptionParser support this syntax? If so: how?
If not: what's the best way to fix this?</p>
"
716011,51532,2009-04-03T22:55:29Z,25,Why can't environmental variables set in python persist?,"<p>I was hoping to write a python script to create some appropriate environmental variables by running the script in whatever directory I'll be executing some simulation code, and I've read that I can't write a script to make these env vars persist in the mac os terminal. So two things:</p>

<p>Is this true?</p>

<p>and</p>

<p>It seems like it would be a useful things to do; why isn't it possible in general?</p>
"
716259,78374,2009-04-04T01:21:36Z,4,Matrices in Python,"<p>Yesterday I had the need for a matrix type in Python.</p>

<p>Apparently, a trivial answer to this need would be to use <code>numpy.matrix()</code>, but the additional issue I have is that I would like a matrix to store arbitrary values with mixed types, similarly to a list. <code>numpy.matrix</code> does not perform this. An example is</p>

<pre><code>&gt;&gt;&gt; numpy.matrix([[1,2,3],[4,""5"",6]])
matrix([['1', '2', '3'],
        ['4', '5', '6']], 
       dtype='|S4')
&gt;&gt;&gt; numpy.matrix([[1,2,3],[4,5,6]])
matrix([[1, 2, 3],
        [4, 5, 6]])
</code></pre>

<p>As you can see, the <code>numpy.matrix</code> must be homogeneous in content. If a string value is present in my initialization, every value gets implicitly stored as a string. This is also confirmed by accessing the single values</p>

<pre><code>&gt;&gt;&gt; numpy.matrix([[1,2,3],[4,""5"",6]])[1,1]
'5'
&gt;&gt;&gt; numpy.matrix([[1,2,3],[4,""5"",6]])[1,2]
'6'
</code></pre>

<p>Now, the Python list type can instead accept mixed types. You can have a list containing an integer and a string, both conserving their type. What I would need is something similar to a list, but operating in a matrix-like behavior. </p>

<p>Therefore, I had to implement my own type. I had two choices for the internal implementation: list containing lists, and dictionaries. Both solutions have shortcomings: </p>

<ul>
<li>list of lists require careful synchronization of the various lists' sizes. Swapping two rows is easy. Swapping two columns is less easy. Removing a row is easy as well.</li>
<li>dictionaries (with a tuple as a key) are slightly better, but you have to define the limits of your key (for example, you cannot insert element 5,5 if your matrix is 3x3), and they are more complex to use to insert, remove, or swap columns or rows.</li>
</ul>

<p>Edit: clarification. The concrete reason on why I need this functionality is because I am reading CSV files. Once I collect the values from a CSV file (values that can be string, integers, floats) I would like to perform swapping, removal, insertion and other operations alike. For this reason I need a ""matrix list"".</p>

<p>My curiosities are: </p>

<ul>
<li>do you know if a Python data type providing this service already exists (maybe in a ""non-battery included"" library out there)?</li>
<li>why is this data type not provided in the standard library? Too restricted interest maybe?</li>
<li>How would you have solved this need? Dictionary, list, or another smarter solution?</li>
</ul>
"
716278,80911,2009-04-04T01:27:46Z,6,My first python program: can you tell me what I'm doing wrong?,"<p>I hope this question is considered appropriate for stackoverflow. If not, I'll remove the question right away.</p>

<p>I've just wrote my very first python program. The idea is that you can issue a command, and it's gets sent to several servers in parallel.</p>

<p>This is just for personal educational purposes. The program works! I really want to get better at python and therefore I'd like to ask the following questions:</p>

<ol>
<li>My style looks messy compared to PHP (what I'm used to). Do you have any suggestions around style improvements.</li>
<li>Am I using the correct libraries? Am I using them correctly?</li>
<li>Am I using the correct datatypes? Am I using them correctly?</li>
</ol>

<p>I have a good programming background, but it took me quite a while to develope a decent style for PHP (PEAR-coding standards, knowing what tools to use and when).</p>

<p>The source (one file, 92 lines of code)</p>

<p><a href=""http://code.google.com/p/floep/source/browse/trunk/floep"" rel=""nofollow"">http://code.google.com/p/floep/source/browse/trunk/floep</a></p>
"
716386,84805,2009-04-04T02:33:10Z,1,Why is my PyObjc Cocoa view class forgetting its fields?,"<p>I was trying to hack up a tool to visualize shaders for my game and I figured I would try using python and cocoa. I have ran into a brick wall of sorts though. Maybe its my somewhat poor understand of objective c but I can not seem to get this code for a view I was trying to write working:</p>

<pre><code>from objc import YES, NO, IBAction, IBOutlet
from Foundation import *
from AppKit import *
import gv

class SceneView(NSOpenGLView):
    def __init__(self):
        NSOpenGLView.__init__(self)
        self.renderer = None

    def doinit(self):
        self.renderer = gv.CoreRenderer()


    def initWithFrame_(self, frame):
        self = super(SceneView, self).initWithFrame_(frame)

        if self:
            self.doinit()
            print self.__dict__

        return self

    def drawRect_(self, rect):
        clearColor = [0.0,0.0,0.0,0.0]
        print self.__dict__
        self.renderer.clear(CF_Target|CF_ZBuffer,clearColor)
</code></pre>

<p>It outputs this when executed:</p>

<pre><code>{'renderer': &lt;gv.CoreRenderer; proxy of &lt;Swig Object of type 'GV::CoreRenderer *' at 0x202c7d0&gt; &gt;}
{}
2009-04-03 19:13:30.941 geom-view-edit[50154:10b] An exception has occured:
Traceback (most recent call last):
  File ""/System/Library/Frameworks/Python.framework/Versions/2.5/Extras/lib/python/PyObjCTools/AppHelper.py"", line 235, in runEventLoop
  File ""/mnt/gilead/amcharg/projects/geom-view-edit/build/Debug/geom-view-edit.app/Contents/Resources/SceneView.py"", line 37, in drawRect_
    self.renderer.clear(CF_Target|CF_ZBuffer,clearColor)
AttributeError: 'SceneView' object has no attribute 'renderer'
</code></pre>

<p>It seems to be losing my renderer variable which is not that surprising considering how funky the initWithFrame_ code is but this was something xcode seemed to write which I suppose makes sense since objective C has the init separate from alloc idiom. It is still strange seeing it python however.</p>

<p>Is there anyways to salvage this or should I take it out behind the code shed shoot it and use QT or wxPython? I considered using objective-c but I want to test out these nifty swig bindings I just compiled =)</p>
"
716524,85287,2009-04-04T04:52:53Z,4,Packaging Ruby or Python applications for distribution?,"<p>Are there any good options <em>other</em> than the JVM for packaging Python or Ruby applications for distribution to end-users?  Specifically, I'm looking for ways to be able to write and test a web-based application written in either Ruby or Python, complete with a back-end database, that I can then wrap up in a convenient set of platform-independent packages (of some type) for deployment on Windows, Linux, OS X, and FreeBSD?</p>

<p><b>Edit:</b> What I mean by a 'web-based application' is a webapp that end-users can run on servers at their companies, providing a web service internally to their end-users.  There are a lot of ways to do this on the JVM via JPython or JRuby, but I'm curious if there's a non-JVM route with alternate VMs or interpreters.</p>
"
716795,34088,2009-04-04T08:58:33Z,1,Locating (file/line) the invocation of a constructor in python,"<p>I'm implementing a event system: Various pieces of code will post events to a central place where they will be distributed to all listeners. The main problem with this approach: When an exception happens during event processing, I can't tell anymore who posted the event.</p>

<p>So my question is: Is there an efficient way to figure out who called the constructor and remember that in Python 2.5?</p>

<p>More info: The simple way would be to use the traceback module to get a copy of the stack in the constructor and remember that. Alas, I only need this information rarely, so I'm wondering if there was a way to cache this or whether I could just remember the topmost stack frame and work my way back in the rare case that I actually need this data.</p>
"
716946,NA,2009-04-04T11:47:00Z,1,How do I enable SMS notifications in my web apps?,"<p>I have a web application and I would like to enable real time SMS notifications to the users of the applications. </p>

<p>Note: I currently cannot use the Twitter API because I live in West Africa, and Twitter doesn't send SMS to my country.</p>

<p>Also email2sms is not an option because the mobile operators don't allow that in my country.</p>
"
717120,74415,2009-04-04T13:49:46Z,1,Python's subprocess.Popen returns the same stdout even though it shouldn't,"<p>I'm having a very strange issue with Python's subprocess.Popen.  I'm using it to call several times an external exe and keep the output in a list. </p>

<p>Every time you call this external exe, it will return <strong>a different string</strong>. However, if I call it several times using Popen, it will always <strong>return the SAME string</strong>. =:-O  </p>

<p>It looks like Popen is returning always the same value from stdout, without recalling the exe. Maybe doing some sort of caching without actually calling again the exe.</p>

<p>This is my code:</p>

<pre><code>def get_key():

    from subprocess import Popen, PIPE

    args = [C_KEY_MAKER, '/26', USER_NAME, ENCRYPTION_TEMPLATE, '0', ]
    process = Popen(args, stdout=PIPE)
    output = process.communicate()[0].strip()
    return output

if __name__ == '__main__':
    print get_key() # Returns a certain string
    print get_key() # Should return another string, but returns the same!
</code></pre>

<p>What on Earth am I doing wrong?!</p>
"
717148,15677,2009-04-04T14:03:09Z,85,Queue.Queue vs. collections.deque,"<p>I need a queue which multiple threads can put stuff into, and multiple threads may read from.</p>

<p>Python has at least two queue classes, Queue.Queue and collections.deque, with the former seemingly using the latter internally. Both claim to be thread-safe in the documentation.</p>

<p>However, the Queue docs also state:</p>

<blockquote>
  <p>collections.deque is an alternative
  implementation of unbounded queues
  with fast atomic append() and
  popleft() operations that do not
  require locking.</p>
</blockquote>

<p>Which I guess I don't quite unterstand: Does this mean deque isn't fully thread-safe after all?</p>

<p>If it is, I may not fully understand the difference between the two classes. I can see that Queue adds blocking functionality. On the other hand, it loses some deque features like support for the in-operator.</p>

<p>Accessing the internal deque object directly, is</p>

<blockquote>
  <p>x in Queue().deque</p>
</blockquote>

<p>thread-safe?</p>

<p>Also, why does Queue employ a mutex for it's operations when deque is thread-safe already?</p>
"
717506,87007,2009-04-04T17:54:50Z,12,"If monkey patching is permitted in both Ruby and Python, why is it more controversial in Ruby?","<p>In many discussions I have heard about Ruby in which people have expressed their reservations about the language, the issue of monkey patching comes up as one of their primary concerns. </p>

<p>However, I rarely hear the same arguments made in the context of Python although it is also permitted in the Python language. </p>

<p>Why this distinction? </p>

<p>Does Python include different types of safeguards to minimize the risks of this feature?</p>
"
717687,87152,2009-04-04T19:46:03Z,0,Python and sockets +upnp,"<p>I have a question about python and sockets. As I understand, if you have router you must open a port before you can use it in your program. But if user can't do that...
I heard something about UPnP. I don't know will it help with my problem, so I've asked you.
Best regards.</p>
"
717700,40149,2009-04-04T19:50:11Z,1,Does the Python library httplib2 cache URIs with GET strings?,"<p>In the following example what is cached correctly? Is there a Vary-Header I have to set server-side for the GET string?</p>

<pre><code>import httplib2
h = httplib2.Http("".cache"")
resp, content = h.request(""http://test.com/list/"")
resp, content = h.request(""http://test.com/list?limit=10"")
resp, content = h.request(""http://test.com/list?limit=50"")
</code></pre>
"
717776,NA,2009-04-04T20:38:46Z,2,can pylons + authkit ignore particular responses with 401 status?,"<p>i am writing a pylons app, and I am using authkit for authentication/authorization. if a user is not logged in and hits a page that requires authorization, authkit swallows the 401 (not authenticated) response and redirects to a login page. this is great for the web interface, but not great for our web services. when an unauthenticated user this a protected web service, we'd like to set the status of the response to 401.</p>

<p>is there are way to slip some 401 responses past authkit in pylons, but not all?</p>

<p>thanks,
matt</p>
"
717831,79849,2009-04-04T21:14:32Z,4,Self-repairing Python threads,"<p>I've created a web spider that accesses both a US and EU server. The US and EU servers are the same data structure, but have different data inside them, and I want to collate it all. In order to be nice to the server, there's a wait time between each request. As the program is exactly the same, in order to speed up processing, I've threaded the program so it can access the EU and US servers simultaneously.</p>

<p>This crawling will take on the order of weeks, not days. There will be exceptions, and while I've tried to handle everything inside the program, it's likely something weird might crop up. To be truly defensive about this, I'd like to catch a thread that's failed, log the error and restart it. Worst case I lose a handful of pages out of thousands, which is better than having a thread fail and lose 50% of speed. However, from what I've read, Python threads die silently. Does anyone have any ideas?</p>

<pre><code>class AccessServer(threading.Thread):
    def __init__(self, site):
        threading.Thread.__init__(self)
        self.site = site
        self.qm = QueueManager.QueueManager(site)

    def run(self):
        # Do stuff here


def main():
    us_thread = AccessServer(u""us"")
    us_thread.start()

    eu_thread = AccessServer(u""eu"")
    eu_thread.start()
</code></pre>
"
717911,74474,2009-04-04T22:06:58Z,3,Paypal NVP API with Django,"<p>I am looking into using the paypal NVP API to allow users to pay on my website for a recurring subscription. </p>

<p>I have a few questions about the requirements.  Will my site have to meet the ""PCI Compliance"" stuff.  I guess I will have to get an SSL certificate and is there anything else that is required or that I need to know about? </p>
"
718040,32372,2009-04-04T23:31:10Z,32,How to install SimpleJson Package for Python,"<p><a href=""http://pypi.python.org/pypi/simplejson"">http://pypi.python.org/pypi/simplejson</a></p>

<p>I am just diving into the Python world and want to make a simple twitter application which requires the installation of simplejson but not sure how I can set it up and get it working..</p>

<p>I am on a Windows System</p>
"
718498,54964,2009-04-05T07:08:27Z,0,Unable to put Python code to Joomla,"<p>I have a Python code from Google app engine.
I need to implement it to Joomla.</p>

<p><strong>How can you implement Python code to Joomla?</strong></p>

<p><strong>[edit after the 1st answer]</strong></p>

<p>It is enough for me that I can put the code to a module position.</p>
"
718546,35364,2009-04-05T07:49:10Z,3,Changing the title of a Tab in wx.Notebook,"<p>I'm experimenting with wxPython,</p>

<p>I have a tabbed interface (notebook) and each tab is basically a file list view (yes, I'm trying to make a file manager)</p>

<p>The file list inherits from wx.ListCtrl, and the tabbed interface inherits from wx.Notebook</p>

<p>I'm just starting .. and I had it so double clicking on a folder will cd into that folder, but I want to also change the title of the tab.</p>

<p>How do I do that?</p>

<p>I have the object that represents the file list and the title I want to set it to,</p>

<p><code>[</code> <strong>EDIT</strong> <code>Notebook.SetPageText()</code> takes a number, so I can't pass the tab object directly to it <code>]</code></p>

<p>my current approach is to cycle through the tabs until one of them matches my tab:</p>

<pre><code>    for tab_id in range(self.GetPageCount()):
        if self.GetPage(tab_id) == tab:
            self.SetPageText(tab_id, title)
            break
</code></pre>

<p>This seems rather naive though, isn't there a smarter approach?</p>
"
718553,66731,2009-04-05T07:59:07Z,1,App Engine - problem trying to set a Model property value,"<p>I'm pretty new to app engine, and I'm trying to set a bit of text into the app engine database for the first time.</p>

<p>Here's my code:</p>

<pre><code>def setVenueIntroText(text):
  venue_obj = db.GqlQuery(""SELECT * FROM Venue"").get()
  venue_obj.intro_text = text     # Works if I comment out
  db.put(venue_obj)               # These two lines
</code></pre>

<p>This throws some sort of exception - I can't tell what it is though because of my django 1.02 setup.  </p>

<p>Ok, I gave the code in the answer below a go, and it worked after deleting my datastores, but I'm still not satisfied.</p>

<p>Here's an update:</p>

<p>I've modified my code to something that looks like it makes sense to me.  The getVenueIntroText doesn't complain when I call it - I haven't got any items in the database btw.</p>

<p>When I call setVenueIntroText, it doesn't like what I'm doing for some reason - if someone knows the reason why, I'd really like to know :)</p>

<p>Here's my latest attempt:</p>

<pre><code>def getVenueIntroText():
  venue_info = """"
  venue_obj = db.GqlQuery(""SELECT * FROM Venue"").get()

  if venue_obj is not None:
      venue_info = venue_obj.intro_text

  return venue_info

def setVenueIntroText(text):
  venue_obj = db.GqlQuery(""SELECT * FROM Venue"").get()
  if venue_obj is None:
     venue_obj = Venue(intro_text = text)
  else:
     venue_obj.intro_text = text

  db.put(venue_obj)
</code></pre>
"
718769,NA,2009-04-05T11:12:02Z,3,Reversible version of compile() in Python,"<p>I'm trying to make a function in Python that does the equivalent of compile(), but also lets me get the original string back. Let's call those two functions comp() and decomp(), for disambiguation purposes. That is,</p>

<pre><code>a = comp(""2 * (3 + x)"", """", ""eval"")
eval(a, dict(x=3)) # =&gt; 12
decomp(a) # =&gt; ""2 * (3 + x)""
</code></pre>

<p>The returned string does not have to be <em>identical</em> (""2*(3+x)"" would be acceptable), but it needs to be basically the same (""2 * x + 6"" would not be).</p>

<p>Here's what I've tried that <em>doesn't</em> work:</p>

<ul>
<li>Setting an attribute on the code object returned by compile. You can't set custom attributes on code objects.</li>
<li>Subclassing code so I can add the attribute. code cannot be subclassed.</li>
<li>Setting up a WeakKeyDictionary mapping code objects to the original strings. code objects cannot be weakly referenced.</li>
</ul>

<p>Here's what does work, with issues:</p>

<ul>
<li>Passing in the original code string for the filename to compile(). However, I lose the ability to actually keep a filename there, which I'd like to also do.</li>
<li>Keeping a real dictionary mapping code objects to strings. This leaks memory, although since compiling is rare, it's acceptable for my current use case. I could probably run the keys through gc.get_referrers periodically and kill off dead ones, if I had to.</li>
</ul>
"
719127,32372,2009-04-05T15:37:15Z,13,Django Template - New Variable Declaration,"<p>Let me preface by I am just starting Python so if this is really a simple question ^_^</p>

<p>I have a html file with the following content:</p>

<pre><code>    	{%for d in results%}
		&lt;div class=""twt""&gt;
			&lt;img src=""{{ d.profile_image_url }}"" width=""48px"" height=""48px"" /&gt; &lt;span&gt; {{ d.text }} &lt;/span&gt;
			&lt;span class=""date""&gt;{{ d.created_at }}&lt;/span&gt;
		&lt;/div&gt;
	{% endfor %}
</code></pre>

<p>which works well but I also would like to declare a variable on this page. Let's say for this example, we can it RowNumber which will increment for each d displayed, spitting out the current RowNumber.</p>

<p>I tried doing:</p>

<pre><code>{{ RowNumber = 0}} 
{{ RowNumber ++ }}
</code></pre>

<p>But it doesn't seem to allow me to declare RowNumber.</p>
"
719194,54964,2009-04-05T16:07:30Z,30,How can you make a vote-up-down button like in Stackoverflow?,"<p><strong>Problems</strong></p>

<ol>
<li>how to make an Ajax buttons (upward and downward arrows) such that the number can increase or decrease</li>
<li>how to save the action af an user to an variable NumberOfVotesOfQuestionID</li>
</ol>

<p>I am not sure whether I should use database or not for the variable. However, I know that there is an easier way too to save the number of votes.</p>

<p><strong>How can you solve those problems?</strong></p>

<p>[edit]</p>

<p>The server-side programming language is Python.</p>
"
719503,NA,2009-04-05T19:16:12Z,1,Python 3: formatting zip module arguments correctly (newb),"<p>Please tell me why this code fails.  I am new and I don't understand why my formatting of my zip arguments is incorrect.  Since I am unsure how to communicate best so I will show the code, the error message, and what I believe is happening.</p>

<pre><code>#!c:\python30
# Filename: backup_ver5.py

import os
import time
import zipfile


source = r'""C:\Documents and Settings\Benjamin Serrato\My Documents\python\backup_list""'

target_dir = r'C:\Documents and Settings\Benjamin Serrato\My Documents\python\backup_dir'

today = target_dir + os.sep + time.strftime('%Y%m%d') 

now = time.strftime('%H%M%S')

comment = input('Enter a comment --&gt; ')

if len(comment) == 0:
    target = '""' + today + os.sep + now + '.zip' + '""'
else:
    target = '""' + today + os.sep + now + '_' + \
    comment.replace(' ', '_') + '.zip' + '""'

if not os.path.exists(today):
    os.mkdir(today)
    print('Successfully created directory', today)


print(target)
print(source)
zip_command = zipfile.ZipFile(target, 'w').write(source)

if os.system(zip_command) == 0:
    print('Successful backup to', target)
else:
    print('Backup FAILED')

    enter code here
</code></pre>

<p>I recieve this error message:</p>

<pre><code>Enter a comment --&gt;
""C:\Documents and Settings\Benjamin Serrato\My Documents\python\backup_dir\20090
405\134614.zip""
""C:\Documents and Settings\Benjamin Serrato\My Documents\python\backup_list""
Traceback (most recent call last):
  File ""C:\Documents and Settings\Benjamin Serrato\My Documents\python\backup_ve
r5.py"", line 32, in &lt;module&gt;
    zip_command = zipfile.ZipFile(target, 'w').write(source)
  File ""c:\python30\lib\zipfile.py"", line 683, in __init__
    self.fp = io.open(file, modeDict[mode])
  File ""C:\Python30\lib\io.py"", line 222, in open
    closefd)
  File ""C:\Python30\lib\io.py"", line 615, in __init__
    _fileio._FileIO.__init__(self, name, mode, closefd)
IOError: [Errno 22] Invalid argument: '""C:\\Documents and Settings\\Benjamin Ser
rato\\My Documents\\python\\backup_dir\\20090405\\134614.zip""'
</code></pre>

<p>The two print tests before <code>zip_command</code> is assigned tell  me that the two strings are being passed to <code>zipfile.ZipFile()</code> correctly.  The traceback tells me I am not calling <code>zipfile.ZipFile()</code> correctly.  The error in <code>__init__</code> makes me more sure of this.  Last, the problem seems to be that I am causing my path string to have double backslashes.  I can't follow why the IOError shows that.</p>

<p>I used <a href=""http://docs.python.org/dev/3.0/library/zipfile.html"" rel=""nofollow"">this site</a> to figure out how to use <code>zipfile</code>.  <code>zipfile</code> is a class, I import it at the start of the program then I use it and its primary method.  I pass the file I would like to write to <code>zipfile.ZipFile('file to write', 'mode')</code> and set the program to open an object set to be writable.  Then the command writes the file to the destination folder with a sub-method like so, <code>"""".zipfile('files to write')</code>.</p>

<p>Where am I going wrong?</p>
"
719705,31610,2009-04-05T21:13:28Z,58,What is the purpose of python's inner classes?,"<p>Python's inner/nested classes confuse me. Is there something that can't be accomplished without them? If so, what is that thing?</p>
"
719710,27623,2009-04-05T21:15:20Z,0,How do I set Session name with Cherrypy?,"<p>In PHP I would do it like this:</p>

<pre><code>session_name(""special_session_name"");
</code></pre>

<p>So how do I do it with Cherrypy?
Just need to find exact equivalent for it.
PHP manual page: 
<a href=""http://fi2.php.net/session_name"" rel=""nofollow"">http://fi2.php.net/session_name</a></p>
"
719744,83898,2009-04-05T21:40:44Z,6,What is the best ordered dict implementation in python?,"<p>I've seen (and written) a number of implementations of this.  Is there one that is considered the best or is emerging as a standard?</p>

<p>What I mean by ordered dict is that the object has some concept of the order of the keys in it, similar to an array in PHP.</p>

<p>odict from <a href=""http://www.python.org/dev/peps/pep-0372/"">PEP 372</a> seems like a strong candidate, but it's not totally clear that it is the winner.</p>
"
719771,87349,2009-04-05T21:55:34Z,0,How can domain aliases be set up using Django?,"<p>I am working on creating a website in Django which consists of two parts: the website itself, and the forum. They will both be on separate domains, i.e. example.com and exampleforum.com. How can this be done in Django, when the forum and main site are part of the same instance?</p>
"
719886,87417,2009-04-05T23:34:32Z,0,Help Me Figure Out A Random Scheduling Algorithm using Python and PostgreSQL,"<p>I am trying to do the schedule for the upcoming season for my simulation baseball team.  I have an existing Postgresql database that contains the old schedule.</p>

<p>There are 648 rows in the database: 27 weeks of series for 24 teams.  The problem is that the schedule has gotten predictable and allows teams to know in advance about weak parts of their schedule.  What I want to do is take the existing schedule and randomize it.  That way teams are still playing each other the proper number of times but not in the same order as before.</p>

<p>There is one rule that has been tripping me up:  each team can only play one home and one road series PER week.  I had been fooling around with SELECT statements based on ORDER BY RANDOM() but I haven't figured out how to make sure a team only has one home and one road series per week.</p>

<p>Now, I <em>could</em> do this in PHP (which is the language I am most comfortable with) but I am trying to make the shift to Python so I'm not sure how to get this done in Python.  I know that Python doesn't seem to handle two dimensional arrays very well.</p>

<p>Any help would be greatly appreciated.</p>
"
720083,84952,2009-04-06T02:21:26Z,5,How do I apply Django model Meta options to models that I did not write?,"<p>I want to apply the <a href=""http://docs.djangoproject.com/en/dev/ref/models/options/#ordering"">""ordering""</a> Meta option to the Django model User from django.contrib.auth.models.  Normally I would just put the Meta class in the model's definition, but in this case I did not define the model.  So where do I put the Meta class to modify the User model?</p>
"
720113,32372,2009-04-06T02:37:48Z,12,Find Hyperlinks in Text using Python (twitter related),"<p>How can I parse text and find all instances of hyperlinks with a string? The hyperlink will not be in the html format of <code>&lt;a href=""http://test.com""&gt;test&lt;/a&gt;</code> but just <code>http://test.com</code></p>

<p>Secondly, I would like to then convert the original string and replace all instances of hyperlinks into clickable html hyperlinks.</p>

<p>I found an example in this thread:</p>

<p><a href=""http://stackoverflow.com/questions/32637/easiest-way-to-convert-a-url-to-a-hyperlink-in-a-c-string"">Easiest way to convert a URL to a hyperlink in a C# string?</a></p>

<p>but was unable to reproduce it in python :(</p>
"
720329,81797,2009-04-06T05:16:05Z,1,How do i use Django session to read/set cookies?,"<p>I am trying to use the Django sessions to read and set my cookies, but when i do the following the program just does not respond!</p>

<p><strong>sessionID = request.session[""userid""]</strong></p>

<p>The program does not pass this point!</p>

<p>Any ideas?</p>
"
720621,83501,2009-04-06T08:36:23Z,2,Function definition in Python,"<p>I am new to Python. I was trying to define and run a simple function in a class.</p>

<p>Can anybody please tell me what's wrong in my code:</p>

<pre><code>class A :
    def m1(name,age,address) :
    	print('Name --&gt;',name)
    	print('Age --&gt;',age)
    	print('Address --&gt;',address)


&gt;&gt;&gt; a = A()
&gt;&gt;&gt; a.m1('X',12,'XXXX')
Traceback (most recent call last):
  File ""&lt;pyshell#22&gt;"", line 1, in &lt;module&gt;
    a.m1('X',12,'XXXX')
</code></pre>

<p>I am getting below error <br>
<strong>TypeError: m1() takes exactly 3 positional arguments (4 given)</strong></p>
"
720800,45955,2009-04-06T09:36:35Z,8,Removing specific items from Django's cache?,"<p>I'm using site wide caching with <a href=""http://en.wikipedia.org/wiki/Memcached"">memcached</a> as the backend. I would like to invalidate pages in the cache when the underlying database object changes. </p>

<p>If the page name changes then I would invalidate the whole cache (as it affects navigation on every page. Clumsy but sufficient for my needs.</p>

<p>If just the page content changes then I'd like to invalidate the cache of just that page.</p>

<p>Is there an easy way to do this?  </p>
"
720867,55562,2009-04-06T10:03:12Z,15,HTTP Authentication in Python,"<p>Whats is the python urllib equivallent of </p>

<pre><code>curl -u username:password status=""abcd"" http://example.com/update.json
</code></pre>

<p>I did this:</p>

<pre><code>handle = urllib2.Request(url)
authheader =  ""Basic %s"" % base64.encodestring('%s:%s' % (username, password))
handle.add_header(""Authorization"", authheader)
</code></pre>

<p>Is there a better / simpler way?</p>
"
720927,56183,2009-04-06T10:43:45Z,1,String inside a string,"<pre><code>BASE_URL = 'http://foobar.com?foo=%s'

variable = 'bar'

final_url = BASE_URL % (variable)
</code></pre>

<p>I get this <code>'<a href=""http://foobar.com?foo=bar"" rel=""nofollow"">http://foobar.com?foo=bar</a>'</code> # It ignores the inside string.</p>

<p>But i wanted something like this <code>'<a href=""http://foobar.com?foo="" rel=""nofollow"">http://foobar.com?foo=</a>'bar''</code></p>

<p>Thanks for the answer.</p>

<p>Can you help me out with almost the same problem:</p>

<pre><code>lst = ['foo', 'bar', 'foo bar']

[str(l) for l in lst if ' ' in l]
</code></pre>

<p>I get <code>['foo bar']</code> but i wanted it like <code>[''foo bar'']</code></p>

<p>Thanks in advance.</p>
"
721035,60331,2009-04-06T11:22:15Z,13,Django templates stripping spaces?,"<p>I'm having trouble with Django templates and CharField models.</p>

<p>So I have a model with a CharField that creates a slug that replaces spaces with underscores. If I create an object, Somename Somesurname, this creates slug <em>Somename_Somesurname</em> and gets displayed as expected on the template. </p>

<p>However, if I create an object, <em>Somename Somesurname</em> (notice the second space), slug <em>Somename__Somesurname</em> is created, and although on the Django console I see this as <code>&lt;Object: Somename  Somesurname&gt;</code>, on the template it is displayed as <em>Somename Somesurname</em>. </p>

<p>So do Django templates somehow strip spaces? Is there a filter I can use to get the name with its spaces?</p>
"
721436,2147,2009-04-06T13:27:18Z,4,What's a good two-way encryption library implemented in Python?,"<p>The authentication system for an application we're using right now uses a two-way hash that's basically little more than a glorified caesar cypher.  Without going into too much detail about what's going on with it, I'd like to replace it with a more secure encryption algorithm (and it needs to be done server-side).  Unfortunately, it needs to be two-way and the algorithms in hashlib are all one-way.</p>

<p>What are some good encryption libraries that will include algorithms for this kind of thing?</p>
"
722046,2025,2009-04-06T15:45:44Z,2,Monitoring internet activity,"<p>I'm looking into writing a small app (in Python) that monitors internet activity. The same idea as <a href=""http://www.metal-machine.de/readerror/index.php?page=10"" rel=""nofollow"">NetMeter</a> except with a little more customisation (I need to be able to set off-peak time ranges).</p>

<p>Anyway, I've been having a little trouble researching these questions:</p>

<ul>
<li>Does Python have an API to monitor this?</li>
<li>As far as data collecting goes I'll probably be recording values in bytes/min with the timestamp - is there something more sensible I'm missing here?</li>
</ul>
"
722298,84643,2009-04-06T16:54:59Z,1,How can I get the width of a wx.ListCtrl and its column name?,"<p>I'm working in wx.Python and I want to get the columns of my wx.ListCtrl to auto-resize i.e. to be at minimum the width of the column name and otherwise as wide as the widest element or its column name.  At first I thought the ListCtrlAutoWidthMixin might do this but it doesn't so it looks like I might have to do it myself (Please correct me if there's a built in way of doing this!!!)</p>

<p>How can I find out how wide the titles and elements of my list will be rendered?</p>
"
722325,87719,2009-04-06T17:04:07Z,14,Django GROUP BY strftime date format,"<p>I would like to do a SUM on rows in a database and group by date.</p>

<p>I am trying to run this SQL query using Django aggregates and annotations:</p>

<pre><code>select strftime('%m/%d/%Y', time_stamp) as the_date, sum(numbers_data)
    from my_model
    group by the_date;
</code></pre>

<p>I tried the following:</p>

<pre><code>data = My_Model.objects.values(""strftime('%m/%d/%Y',
           time_stamp)"").annotate(Sum(""numbers_data"")).order_by()
</code></pre>

<p>but it seems like you can only use column names in the values() function; it doesn't like the use of strftime().</p>

<p>How should I go about this?</p>
"
722605,85710,2009-04-06T18:25:01Z,1,Why doesn't the handle_read method get called with asyncore?,"<p>I am trying to proto-type send/recv via a packet socket using the asyncore dispatcher (code below). Although my handle_write method gets called promptly, the handle_read method doesn't seem to get invoked. The loop() does call the readable method every so often, but I am not able to receive anything. I know there are packets received on eth0 because a simple tcpdump shows incoming packets. Am I missing something? </p>

<pre><code>

#!/usr/bin/python

import asyncore, socket, IN, struct

class packet_socket(asyncore.dispatcher):

    def __init__(self):
        asyncore.dispatcher.__init__(self)
        self.create_socket(socket.AF_PACKET, socket.SOCK_RAW)
        self.buffer = '0180C20034350012545900040060078910'
        self.socket.setsockopt(socket.SOL_SOCKET,IN.SO_BINDTODEVICE,struct.pack(""%ds"" % (len(""eth0"")+1,), ""eth0""))

    def handle_close(self):
        self.close()

    def handle_connect(self):
        pass

    def handle_read(self):
        print ""handle_read() called""
        data,addr=self.recvfrom(1024)
        print data
        print addr

    def readable(self):
        print ""Checking read flag""
        return True

    def writable(self):
        return (len(self.buffer) > 0)

    def handle_write(self):
        print ""Writing buffer data to the socket""
        sent = self.sendto(self.buffer,(""eth0"",0xFFFF))
        self.buffer = self.buffer[sent:]

c = packet_socket()

asyncore.loop()


</code></pre>

<p>Thanks in advance.</p>
"
722640,71333,2009-04-06T18:37:35Z,0,Python class inclusion wrong behaviour,"<p>I have into my main.py</p>

<pre><code>from modules import controller
ctrl = controller
help(ctrl)
print(ctrl.div(5,2))
</code></pre>

<p>and the controllor.py is:</p>

<pre><code>class controller:
    def div(self, x, y): 
        return x // y
</code></pre>

<p>when I run my main I got the error:</p>

<pre><code>Traceback (most recent call last):
  File ""...\main.py"", line 8, in ?
    print(ctrl.div(5,2))
AttributeError: 'module' object has no attribute 'div'
</code></pre>

<p>WHat is wrong?</p>
"
722697,41613,2009-04-06T18:55:11Z,4,Best way to turn word list into frequency dict,"<p>What's the best way to convert a list/tuple into a dict where the keys are the distinct values of the list and the values are the the frequencies of those distinct values?</p>

<p>In other words:</p>

<pre><code>['a', 'b', 'b', 'a', 'b', 'c']
--&gt; 
{'a': 2, 'b': 3, 'c': 1}
</code></pre>

<p>(I've had to do something like the above so many times, is there anything in the standard lib that does it for you?)</p>

<p>EDIT:</p>

<p>Jacob Gabrielson points out there is <a href=""http://svn.python.org/view/python/trunk/Lib/collections.py?view=markup&amp;pathrev=68559#Counter"" rel=""nofollow"">something coming in the standard lib</a> for the 2.7/3.1 branch</p>
"
722728,71560,2009-04-06T19:03:21Z,0,Google AppEngine: Date Range not returning correct results,"<p>Im trying to search for some values within a date range for a specific type, but content for dates that exist in the database are not being returned by the query.</p>

<p>Here is an extract of the python code:</p>

<pre><code>deltaDays = timedelta(days= 20)
endDate = datetime.date.today()
startDate = endDate - deltaDays

result = db.GqlQuery(
   ""SELECT * FROM myData WHERE mytype = :1 AND pubdate &gt;= :2 and pubdate &lt;= :3"", type, startDate, endDate
  )

class myData(db.Model):
   mytype = db.StringProperty(required=True)
   value =  db.FloatProperty(required=True)
   pubdate = db.DateTimeProperty(required=True)
</code></pre>

<p>The GQL returns data, but some rows that I am expecting are missing:</p>

<pre><code> 2009-03-18 00:00:00
(missing date in results: 2009-03-20 data exists in database)
 2009-03-23 00:00:00
 2009-03-24 00:00:00
 2009-03-25 00:00:00
 2009-03-26 00:00:00
(missing date in results: 2009-03-27 data exists in database)
 2009-03-30 00:00:00
(missing date in results: 2009-03-31. data exists in database)
 2009-04-01 00:00:00
 2009-04-02 00:00:00
 2009-04-03 00:00:00
 2009-04-06 00:00:00
</code></pre>

<p>I uploaded the data via de bulkload script. I just can think of the indexes being corrupted or something similar. This same query used to work for another table i had. But i had to replace it with new content from another source, and this new content is not responding to the query in the same way. The table has around 700.000 rows if that makes any difference.</p>

<p>I have done more research ant it appears that its a bug in the appEngine DataStore.
For more information about the bug check this link:
<a href=""http://code.google.com/p/googleappengine/issues/detail?id=901"" rel=""nofollow"">http://code.google.com/p/googleappengine/issues/detail?id=901</a></p>

<p>I have tried droping the index and recreating it with no luck.</p>

<p>thanks</p>
"
722739,86263,2009-04-06T19:07:17Z,3,Env Variables in Python (v3.0) on Windows,"<p>I'm using Python 3.0.  </p>

<p>How to expand an environment variable given the %var_name% syntax?</p>

<p>Any help is much appreciated!  Thanks!</p>
"
722741,69882,2009-04-06T19:07:55Z,2,pythonic way to compare compound classes?,"<p>I have a class that acts as an item in a tree:</p>

<pre><code>class CItem( list ):
  pass
</code></pre>

<p>I have two trees, each with CItem as root, each tree item has some dict members (like item._test = 1). Now i need to compare this trees. I can suggest to overload a comparison operator for CItem:</p>

<pre><code>class CItem( list ):
  def __eq__( self, other ):
    # first compare items as lists
    if not list.__eq__( self, other ): return False
    # now compare dict members
    if self.__dict__ != other.__dict__: return False
    # seems equal
    return True
</code></pre>

<p>Now i can compare two trees using '==' or '!='. Is this a 'pythonic' way or such comparsion can be done easire?</p>
"
722992,9161,2009-04-06T20:08:06Z,3,Using paver and nose together with an atypical directory structure,"<p>I'm trying to write a task for <code>Paver</code> that will run <code>nosetests</code> on my files.</p>

<p>My directory structure looks like this:</p>

<pre><code>project/
   file1.py
   file2.py
   file3.py
   build/
      pavement.py
   subproject/
      file4.py
   test/
      file5.py
      file6.py
</code></pre>

<p>Doctests (using the <code>--with_doctest</code> option) should be run on all the *.py files, while only the files under <code>project/test</code> (in this example, <code>file5.py</code> and <code>file6.py</code>) should be searched for test routines.</p>

<p>I can't seem to figure out how to do this--I can write a custom plugin for <code>nose</code> which includes the correct files, but I can't seem to get <code>paver</code> to build and install it before calling the <code>nosetests</code> task.  I also can't find a way to get <code>paver</code> to pass a list of files to test to <code>nosetests</code> on the command line.</p>

<p>What's the best way of getting this to work?</p>
"
723293,50272,2009-04-06T21:23:22Z,1,Inserting object with ManyToMany in Django,"<p>I have a blog-like application with stories and categories:</p>

<pre><code>class Category(models.Model):
    ...
class Story(models.Model):
    categories = models.ManyToManyField(Category)
    ...
</code></pre>

<p>Now I know that when you save a new instance of a model with a many-to-many field, problems come up because the object is not yet in the database.  This problem usually manifests itself on form submission, which can be neatly worked around with <code>story_form.save(commit=False)</code>.  What about a situation where there are no forms to speak of?  In my case, I want to build an API to accept remote submissions.  Since I like JSON, and a whole lot of other messaging in our company is in JSON (including outgoing messages from this server), I'd like to be able to receive the following:</p>

<pre><code>{ ""operation"": ""INSERT"",
  ""values"": [
            { ""datatype"": ""story"",
              ""categories"": [4,6,8],
              ""id"":50,
              ...
            }
            ]
}
</code></pre>

<p>and implement a factory that converts the values to instances.  But I'd like the factory to be as agnostic as possible to the type of operation.  So:</p>

<pre><code>{ ""operation"": ""UPDATE"",
  ""values"": [
            { ""datatype"": ""story"",
              ""categories"": [4,6,8],
              ""id"":50,
              ...
            }
            ]
}
</code></pre>

<p>should also be converted in the same way, except that INSERT ignores id and UPDATE gets the already existing instance and overrides it.  (The remote submitter listens to a feed that gives it, among other things, the category objects to cache, so it can, and must, refer to them by id, but it doesn't have any direct communication with the database.)</p>

<p>My real question is: what's the most easiest consistent to inflate an instance of a Django model object that has a ManyToManyManager involved.  As far as I can fathom, any insert of an object with a many-to-many field will require two database hits, just because it is necessary to obtain a new id first.  But my current awkward solution is to save the object right away and mark it hidden, so that functions down the line can play with it and save it as something a little more meaningful.  It seems like one step up would be overriding <code>save</code> so that objects without ids save once, copy some proxy field to <code>categories</code>, then save again.  Best of all would be some robust manager object that saves me the trouble.  What do you recommend?</p>
"
723424,84285,2009-04-06T22:01:25Z,1,Controlling a Windows Console App w/ stdin pipe,"<p>I am trying to control a console application (JTAG app from Segger) from Python using the subprocess module.  The application behaves correctly for stdout, but stdin doesn't seem to be read.  If enable the shell, I can type into the input and control the application, but I need to do this programmatically.  The same code works fine for issuing commands to something like cmd.exe.</p>

<p>I'm guessing that the keyboard is being read directly instead of stdin.  Any ideas how I can send the application input?</p>

<pre><code>from subprocess import Popen, PIPE, STDOUT
jtag = Popen('""C:/Program Files/SEGGER/JLinkARM_V402e/JLink.exe""', shell=True,
                        universal_newlines=True,
                        stdin=PIPE,
                        stdout=PIPE,
                        stderr=STDOUT)

jtag.stdin.write('usb\n')
jtag.stdin.flush()

print ""Stdout:""
while True:
    s = jtag.stdout.readline()
    if not s:
        break
    print s,

jtag.terminate()
</code></pre>
"
723635,83753,2009-04-06T23:30:16Z,6,How do you send an Ethernet frame with a corrupt FCS?,"<p>I'm not sure if this is even possible since this might be handled in hardware, but I need to send some Ethernet frames with errors in them. I'd like to be able to create runts, jabber, misalignment, and bad FCS errors. I'm working in Python.</p>
"
723652,53740,2009-04-06T23:38:22Z,5,Python/Django plugin for Dreamweaver,"<p>Does a plugin exists for Python/Django into Dreamweaver? Just wondering since Dreamweaver is a great web dev tool.</p>
"
723719,NA,2009-04-07T00:13:07Z,1,Is it possible to update a Google calendar from App Engine without logging in as the owner?,"<p>I'd like to be able to use the Google Data API from an AppEngine application to update a calendar while not logged in as the calendar's owner or the a user that the calendar is shared with.  This is in contrast to the examples here:</p>

<p><a href=""http://code.google.com/appengine/articles/more_google_data.html"" rel=""nofollow"">http://code.google.com/appengine/articles/more_google_data.html</a></p>

<p>The login and password for the calendar's owner could be embedded in the application.  Is there any way to accomplish the necessary authentication?</p>
"
723757,84359,2009-04-07T00:39:25Z,5,Import XML into SQL database,"<p>I'm working with a 20 gig XML file that I would like to import into a SQL database (preferably MySQL, since that is what I am familiar with). This seems like it would be a common task, but after Googling around a bit I haven't been able to figure out how to do it. What is the best way to do this? </p>

<p>I know this ability is built into MySQL 6.0, but that is not an option right now because it is an alpha development release.</p>

<p>Also, if I have to do any scripting I would prefer to use Python because that's what I am most familiar with. </p>

<p>Thanks.</p>
"
723856,62673,2009-04-07T01:23:45Z,6,"WSGI Authentication: Homegrown, Authkit, OpenID...?","<p>I want basic authentication for a very minimal site, all I personally need is a single superuser. While hard-coding a password and username in one of my source files is awfully tempting, especially since I'm hosting the site on my own server, I feel I'm breaking the law of the internets and I should just use a database (I'm using sqlite for blog posts and such). Which would be the <strong><em>easiest</em></strong> to setup, in terms of time and effort, out of OpenID or AuthKit (repoze just scares me.. it feels like too much overhead for what I'm trying to achieve), or should I roll my own? </p>

<p>Why I brought up OpenID is, it might just solve my spam problem (I'm currently using Akismet), to just require all commentors to login with an OpenID. I have absolutely no idea how to go about integrating OpenID with my WSGI application though (it's probably dead simple, I've never actually looked into it yet).</p>
"
723984,87908,2009-04-07T02:38:47Z,0,What's the best way to propagate information from my wx.Process back to my main thread?,"<p>I'm trying to subclass <code>wx.Process</code> such that I have a customized process launcher that fires events back to the main thread with data collected from the stdout stream.  Is this a good way of doing things?</p>

<pre><code>class BuildProcess(wx.Process):
    def __init__(self, cmd, notify=None):
       wx.Process.__init__(self, notify)
       print ""Constructing a build process""
       self.Bind(wx.EVT_IDLE, self.on_idle)
       self.Redirect()
       self.cmd = cmd
       self.pid = None

   def start(self):
       print ""Starting the process""
       self.pid = wx.Execute(self.cmd, wx.EXEC_ASYNC, self)
       print ""Started.""

   def on_idle(self, evt):
       print ""doing the idle thing...""
       stream = self.GetInputStream()
       if stream.CanRead():
          text = stream.read()
          wx.PostEvent(self, BuildEvent(EVT_BUILD_UPDATE, self, data=text))
          print text

   def OnTerminate(self, *args, **kwargs):
       wx.Process.OnTerminate(self, *args, **kwargs)
       print ""Terminating""
</code></pre>

<p><code>BuildEvent</code> here is a custom subclass of <code>wx.PyEvent</code>.  The process is starting, running, and terminating correctly, but my <code>on_idle</code> function is never executing, even though I'm sure I've bound it to the idle event. </p>
"
724212,2652,2009-04-07T05:18:27Z,1,How to handle unicode of an unknown encoding in Django?,"<p>I want to save some text to the database using the Django ORM wrappers. The problem is, this text is generated by scraping external websites and many times it seems they are listed with the wrong encoding. I would like to store the raw bytes so I can improve my encoding detection as time goes on without redoing the scrapes. But Django seems to want everything to be stored as unicode. Can I get around that somehow?</p>
"
724580,NA,2009-04-07T08:07:46Z,0,ctypes bindings for Subversion in windows,"<p>Is there a binary installer or a faq for the new ctypes bindings for Subversion 1.6 in Windows (32 and 64bit)?</p>

<p>What library would you use to make an easy to deploy (both win32 and x64) svn client in python for svn version >= 1.5?</p>
"
724664,45269,2009-04-07T08:36:07Z,22,"Python distutils, how to get a compiler that is going to be used?","<p>For example, I may use <code>python setup.py build --compiler=msvc</code> or <code>python setup.py build --compiler=mingw32</code> or just <code>python setup.py build</code>, in which case the default compiler (say, <code>bcpp</code>) will be used. How can I get the compiler name inside my setup.py (e. g. <code>msvc</code>, <code>mingw32</code> and <code>bcpp</code>, respectively)?</p>

<p>UPD.: I don't need the default compiler, I need the one that is <strong>actually</strong> going to be used, which is not necessarily the default one. So far I haven't found a better way than to parse <code>sys.argv</code> to see if there's a <code>--compiler...</code> string there.</p>
"
724856,11522,2009-04-07T09:43:33Z,9,Picking out items from a python list which have specific indexes,"<p>I'm sure there's a nice way to do this in Python, but I'm pretty new to the language, so forgive me if this is an easy one!</p>

<p>I have a list, and I'd like to pick out certain values from that list. The values I want to pick out are the ones whose indexes in the list are specified in another list.</p>

<p>For example:</p>

<pre><code>indexes = [2, 4, 5]
main_list = [0, 1, 9, 3, 2, 6, 1, 9, 8]
</code></pre>

<p>the output would be:</p>

<pre><code>[9, 2, 6]
</code></pre>

<p>(i.e., the elements with indexes 2, 4 and 5 from main_list).</p>

<p>I have a feeling this should be doable using something like list comprehensions, but I can't figure it out (in particular, I can't figure out how to access the index of an item when using a list comprehension).</p>
"
724924,88028,2009-04-07T10:09:09Z,4,How to make pdb recognize that the source has changed between runs?,"<p>From what I can tell, pdb does not recognize when the source code has changed between ""runs"". That is, if I'm debugging, notice a bug, fix that bug, and rerun the program in pdb (i.e. without exiting pdb), pdb will not recompile the code. I'll still be debugging the old version of the code, even if pdb lists the new source code.</p>

<p>So, does pdb not update the compiled code as the source changes? If not, is there a way to make it do so? I'd like to be able to stay in a single pdb session in order to keep my breakpoints and such.</p>

<p>FWIW, gdb will notice when the program it's debugging changes underneath it, though only on a restart of that program. This is the behavior I'm trying to replicate in pdb.</p>
"
725364,11722,2009-04-07T12:10:57Z,1,String manipulation in Python,"<p>I am converting some code from another language to python. That code reads a rather large file into a string and then manipulates it by array indexing like:</p>

<pre><code>str[i] = 'e'
</code></pre>

<p>This does not work directly in python due to the strings being immutable. What is the preferred way of doing this in python ?</p>

<p>I have seen the <code>string.replace()</code> function, but it returns a copy of the string which does not sound very optimal as the string in this case is an entire file.</p>
"
725756,NA,2009-04-07T13:40:41Z,0,Finding all *rendered* images in a HTML file,"<p>I need a way to find only <strong>rendered</strong> IMG tags in a HTML snippet. So, I can't just regex the HTML snippet to find all IMG tags because I'd also get IMG tags that are shown as text in the HTML (not rendered).</p>

<p>I'm using Python on AppEngine.</p>

<p>Any ideas?</p>

<p>Thanks,
Ivan</p>
"
725777,17911,2009-04-07T13:44:09Z,3,Dynamic use of a class method defined in a Cython extension module,"<p>I would like to use the C implementation of a class method (generated from <a href=""http://www.cython.org/"" rel=""nofollow"">Cython</a>) if it is present, or use its Python equivalent if the C extension is not present. I first tried this:</p>

<pre><code>class A(object):
    try:
        import c_ext
        method = c_ext.optimized_method
    except ImportError:
        def method(self):
            return ""foo""
</code></pre>

<p>Where optimized_method is a function defined in a <a href=""http://www.cython.org/"" rel=""nofollow"">Cython</a> module:</p>

<pre><code>def optimized_method(self):
    return ""fasterfoo""
</code></pre>

<p>But this doesn't work:</p>

<pre><code>&gt;&gt;&gt; A().method()
exceptions.TypeError: optimized_method() takes exactly one argument (0 given)
</code></pre>

<p>The only way I found to make this work is:</p>

<pre><code>class A(object):
    def method(self):
        try:
            import c_ext
            return c_ext.optimized_method(self)
        except ImportError:
            pass
        return ""foo""
</code></pre>

<p>But checking for the module's presence at each function call seems quite suboptimal... Why isn't my first approach working ?</p>

<p>[edit] : added <a href=""http://www.cython.org/"" rel=""nofollow"">Cython</a> module's contents</p>
"
725782,41718,2009-04-07T13:44:24Z,88,"In Python, what is the difference between "".append()"" and ""+= []""? ","<p>What is the difference between:</p>

<pre><code>some_list1 = []
some_list1.append(""something"")
</code></pre>

<p>and</p>

<pre><code>some_list2 = []
some_list2 += [""something""]
</code></pre>
"
726449,NA,2009-04-07T15:55:16Z,16,Installing ipython with readline on the mac,"<p>I am using ipython on Mac OS 10.5 with python 2.5.1 (I would actually like to use ipython for 2.6.1, but it doesn't seem to be available?)</p>

<p>I installed ipython via easy_install. It works but is missing gnu readline (needed for nice searching of command line history with ctrl-R, etc.)</p>

<p>I found a <a href=""http://www.brianberliner.com/2008/04/18/ipython-on-mac-os-x-105-leopard/"">blog post</a> and other sources saying this could be fixed by</p>

<p><code>sudo easy_install -f <a href=""http://ipython.scipy.org/dist/"">http://ipython.scipy.org/dist/</a> readline</code></p>

<p>However, this leads to build errors in <code>readline.c</code> , particularly undeclared functions like <code>rl_compentry_func_t</code> and <code>rl_catch_signals</code>. </p>

<p>Has anyone seen these errors? Is there another way to get ipython installed with readline?</p>
"
727410,21317,2009-04-07T20:14:52Z,42,How do I write to the console in Google App Engine?,"<p>Often when I am coding I just like to print little things (mostly the current value of variables) out to console. I don't see anything like this for Google App Engine, although I note that the Google App Engine Launcher does have a Log terminal. Is there any way to write to said Terminal, or to some other terminal, using Google App Engine? </p>
"
727507,18300,2009-04-07T20:41:46Z,28,How can I convert Unicode to uppercase to print it?,"<p>I have this:</p>

<pre><code>&gt;&gt;&gt; print 'example'
example
&gt;&gt;&gt; print 'exámple'
exámple
&gt;&gt;&gt; print 'exámple'.upper()
EXáMPLE
</code></pre>

<p>What I need to do to print:</p>

<pre><code>EXÁMPLE
</code></pre>

<p><em>(Where the 'a' gets its accute accent, but in uppercase.)</em></p>

<p>I'm using Python 2.6.</p>
"
727761,75857,2009-04-07T21:57:59Z,58,Python __str__ and lists,"<p>In Java, if I call List.toString(), it will automatically call the toString() method on each object inside the List. For example, if my list contains objects o1, o2, and o3, list.toString() would look something like this:</p>

<pre><code>""["" + o1.toString() + "", "" + o2.toString() + "", "" + o3.toString() + ""]""
</code></pre>

<p>Is there a way to get similar behavior in Python? I implemented a __str__() method in my class, but when I print out a list of objects, using:</p>

<pre><code>print 'my list is %s'%(list)
</code></pre>

<p>it looks something like this:</p>

<pre><code>[&lt;__main__.cell instance at 0x2a955e95f0&gt;, &lt;__main__.cell instance at 0x2a955e9638&gt;, &lt;__main__.cell instance at 0x2a955e9680&gt;]
</code></pre>

<p>how can I get python to call my __str__ automatically for each element inside the list (or dict for that matter)?</p>
"
727791,51816,2009-04-07T22:05:47Z,0,Transferring Python modules,"<p>Basically for this case, I am using the _winreg module in Python v2.6 but the python package I have to use is v2.5. When I try to use:</p>

<pre><code>_winreg.ExpandEnvironmentStrings
</code></pre>

<p>it complains about not having this attribute in this module. I have successfully transferred other modules like comtypes from site-packages folder.</p>

<p>But the problem is I don't know which files to copy/replace. Is there a way to do this? Also is site-packages the main places for 3rd party modules?</p>
"
727917,192337,2009-04-07T22:59:06Z,11,Display some free text in between Django Form fields,"<p>I have a form like the following:</p>

<pre><code>class MyForm(Form):

  #personal data
  firstname = CharField()
  lastname = CharField()

  #education data
  university = CharField()
  major = CharField()

  #foobar data
  foobar = ChoiceField()
</code></pre>

<p>Since some fields (like foobar) are populated from the database i can't use another method other than letting Django render it for me with form.as_ul </p>

<p>Also i wish i don't have to split the form in multiple forms for ease of mantainance</p>

<p>Is there a way to tell Django to display a help text in between these form sections so that i can put in some instructions on how to fill the form?</p>

<p>I'd like the form to render something like this:</p>

<pre><code>&lt;form&gt;

  &lt;p&gt;Here you enter your personal data...&lt;/p&gt;
  &lt;input name='firstname'&gt;
  &lt;input name='lastname'&gt;

  &lt;p&gt;Here you enter your education data...&lt;/p&gt;
  &lt;input name='university'&gt;
  &lt;input name='major'&gt;

&lt;/form&gt;
</code></pre>

<p>Would i need to create my own widget to be able to display those <code>&lt;P&gt;</code> tags, or is there an easier way?</p>

<p>Thanks</p>
"
728118,NA,2009-04-08T00:44:01Z,5,Python: Downloading a large file to a local path and setting custom http headers,"<p>I am looking to download a file from a http url to a local file. The file is large enough that I want to download it and save it chunks rather than <code>read()</code> and <code>write()</code> the whole file as a single giant string.</p>

<p>The interface of <code>urllib.urlretrieve</code> is essentially what I want. However, I cannot see a way to set request headers when downloading via  <code>urllib.urlretrieve</code>, which is something I need to do.</p>

<p>If I use <code>urllib2</code>, I can set request headers via its <code>Request</code> object. However, I don't see an API in <code>urllib2</code> to download a file directly to a path on disk like <code>urlretrieve</code>. It seems that instead I will have to use a loop to iterate over the returned data in chunks, writing them to a file myself and checking when we are done.</p>

<p>What would be the best way to build a function that works like <code>urllib.urlretrieve</code> but allows request headers to be passed in?</p>
"
728164,72990,2009-04-08T01:13:20Z,23,Securely Erasing Password in Memory (Python),"<p>How do you store a password entered by the user in memory and erase it securely after it is no longer need?</p>

<p>To elaborate, currently we have the following code:</p>

<pre><code>username = raw_input('User name: ')
password = getpass.getpass()
mail = imaplib.IMAP4(MAIL_HOST)
mail.login(username, password)
</code></pre>

<p>After calling the <code>login</code> method, what do we need to do to fill the area of memory that  contains password with garbled characters so that someone cannot recover the password by doing a core dump?</p>

<p>There is a similar question, however it is in Java and the solution uses character arrays:
<a href=""http://stackoverflow.com/questions/646224/how-does-one-store-password-hashes-securely-in-memory-when-creating-accounts"">http://stackoverflow.com/questions/646224/how-does-one-store-password-hashes-securely-in-memory-when-creating-accounts</a></p>

<p>Can this be done in Python?</p>
"
728193,NA,2009-04-08T01:31:58Z,1,Python/urllib suddenly stops working properly,"<p>I'm writing a little tool to monitor class openings at my school.</p>

<p>I wrote a python script that will fetch the current availablity of classes from each department every few minutes.</p>

<p>The script was functioning properly until the uni's site started returning this:</p>

<pre><code>SIS Server is not available at this time
</code></pre>

<p>Uni must have blocked my server right? Well, not really because that is the output I get when I goto the URL directly from other PCs. But if I go through the intermediary form on uni's site that does a POST, I don't get that message.</p>

<p>The URL I'm requesting is https://s4.its.unc.edu/SISMisc/SISTalkerServlet</p>

<p>This is what my python code looks like:</p>

<pre><code>data = urllib.urlencode({""progname"" : ""SIR033WA"", ""SUBJ"" : ""busi"", ""CRS"" : """", ""TERM"" : ""20099""})
f = urllib.urlopen(""https://s4.its.unc.edu/SISMisc/SISTalkerServlet"", data)
s =  f.read()
print (s)
</code></pre>

<p>I am really stumped! It seems like python isn't sending a proper request. At first I thought it wasn't sending a proper post data but I changed the URL to my localbox and the post data apache recieved seemed just fine.</p>

<p>If you'd like to see the system actually functioning, goto https://s4.its.unc.edu/SISMisc/browser/student_pass_z.jsp and click on the ""Enter as Guest"" button and then look for ""Course Availability"". (Now you know why I'm building this!)</p>

<p>Weirdest thing is this was working until 11am! I've had the same error before but it only lasted for few minutes. This tells me it is more of a problem somewhere than any blocking of my server by the uni.</p>

<p><b>update</b>
Upon suggestion, I tried to play with a more legit referer/user-agent. Same result. This is what I tried:</p>

<pre><code>import httplib
import urllib
headers =  {'User-Agent': 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US;rv:1.9.0.4) Gecko/2008102920 Firefox/3.0.4',""Content-type"": ""application/x-www-form-urlencoded"",""Accept"": ""text/plain"",""Referrer"": ""https://s4.its.unc.edu/SISMisc/SISTalkerServlet""}
data = urllib.urlencode({""progname"" : ""SIR033WA"", ""SUBJ"" : ""busi"", ""CRS"" : """", ""TERM"" : ""20099""})
c = httplib.HTTPSConnection(""s4.its.unc.edu"",443)
c.request(""POST"", ""/SISMisc/SISTalkerServlet"",data,headers)
r = c.getresponse()
print r.read()
</code></pre>
"
728296,67520,2009-04-08T02:32:18Z,0,How to convert html entities into symbols?,"<p>I have made some adaptations to <a href=""http://stackoverflow.com/questions/6936/using-what-ive-learned-from-stackoverflow-html-scraper/50772#50772"">the script from this answer</a>. and I am having problems with unicode. Some of the questions end up being written poorly.</p>

<p>Some answers and responses end up looking like:</p>

<p><code>Yeah.. I know.. I&amp;#8217;m a simpleton.. So what&amp;#8217;s a Singleton? (2)</code></p>

<p>How can I make the <code>&amp;#8217;</code> to be translated to the right character?</p>

<p>Note: If that matters, I'm using python 2.6, on a French windows.</p>

<pre><code>&gt;&gt;&gt; sys.getdefaultencoding()
'ascii'
&gt;&gt;&gt; sys.getfilesystemencoding()
'mbcs'
</code></pre>

<p><hr /></p>

<p><strong>EDIT1:</strong> Based on Ryan Ginstrom's post, I have been able to correct a part of the output, but I am having problems with python's unicode.</p>

<p>In Idle / python shell:</p>

<blockquote>
  <p>Yeah.. I know.. Iâ€™m a simpleton.. So
  whatâ€™s a Singleton?</p>
</blockquote>

<p>In a text file, when redirecting stdout</p>

<blockquote>
  <p>Yeah.. I know.. I’m a simpleton.. So
  what’s a Singleton?</p>
</blockquote>

<p>How can I correct that ?</p>

<p><hr /></p>

<p><strong>Edit2:</strong> I have tried Jarret Hardie's solution but it didn't do anything.
I am on windows, using python 2.6, so my site-packages folder is at:</p>

<blockquote>
  <p>C:\Python26\Lib\site-packages</p>
</blockquote>

<p>There was no siteconfig.py file, so I created one, pasted the code provided by Jarret Hardie, started a python interpreter, but seems like it has not been loaded.</p>

<blockquote>
  <blockquote>
    <blockquote>
      <p>sys.getdefaultencoding()
      'ascii'</p>
    </blockquote>
  </blockquote>
</blockquote>

<p>I noticed there is a site.py file at :</p>

<blockquote>
  <p>C:\Python26\Lib\site.py</p>
</blockquote>

<p>I tried changing the encoding in the function</p>

<pre><code>def setencoding():
    """"""Set the string encoding used by the Unicode implementation.  The
    default is 'ascii', but if you're willing to experiment, you can
    change this.""""""
    encoding = ""ascii"" # Default value set by _PyUnicode_Init()
    if 0:
        # Enable to support locale aware default string encodings.
        import locale
        loc = locale.getdefaultlocale()
        if loc[1]:
            encoding = loc[1]
    if 0:
        # Enable to switch off string to Unicode coercion and implicit
        # Unicode to string conversion.
        encoding = ""undefined""
    if encoding != ""ascii"":
        # On Non-Unicode builds this will raise an AttributeError...
        sys.setdefaultencoding(encoding) # Needs Python Unicode build !
</code></pre>

<p>to set the encoding to utf-8. It worked (after a restart of python of course).</p>

<pre><code>&gt;&gt;&gt; sys.getdefaultencoding()
'utf-8'
</code></pre>

<p>The sad thing is that it didn't correct the caracters in my program. :(</p>
"
728356,65977,2009-04-08T02:59:40Z,4,Dynamically creating a menu in Tkinter. (lambda expressions?),"<p>I have a menubutton, which when clicked should display a menu containing a specific sequence of strings. Exactly what strings are in that sequence, we do not know until runtime, so the menu that pops up must be generated at that moment. Here's what I have:</p>

<pre><code>class para_frame(Frame):
    def __init__(self, para=None, *args, **kwargs):
        # ...

        # menu button for adding tags that already exist in other para's
        self.add_tag_mb = Menubutton(self, text='Add tags...')

        # this menu needs to re-create itself every time it's clicked
        self.add_tag_menu = Menu(self.add_tag_mb,
                                 tearoff=0,
                                 postcommand = self.build_add_tag_menu)

        self.add_tag_mb['menu'] = self.add_tag_menu

    # ...

    def build_add_tag_menu(self):
        self.add_tag_menu.delete(0, END) # clear whatever was in the menu before

        all_tags = self.get_article().all_tags()
        # we don't want the menu to include tags that already in this para
        menu_tags = [tag for tag in all_tags if tag not in self.para.tags]

        if menu_tags:
            for tag in menu_tags:
                def new_command():
                    self.add_tag(tag)

                self.add_tag_menu.add_command(label = tag,
                                              command = new_command)
        else:
            self.add_tag_menu.add_command(label = ""&lt;No tags&gt;"")
</code></pre>

<p>The important part is the stuff under ""if menu_tags:"" -- Suppose menu_tags is the list ['stack', 'over', 'flow']. Then what I want to do is effectively this:</p>

<pre><code>self.add_tag_menu.add_command(label = 'stack', command = add_tag_stack)
self.add_tag_menu.add_command(label = 'over', command = add_tag_over)
self.add_tag_menu.add_command(label = 'flow', command = add_tag_flow)
</code></pre>

<p>where add_tag_stack() is defined as:</p>

<pre><code>def add_tag_stack():
    self.add_tag('stack')
</code></pre>

<p>and so on.</p>

<p>The problem is, the variable 'tag' takes on the value 'stack' and then the value 'over' and so on, and it doesn't get evaluated until new_command is called, at which point the variable 'tag' is just 'flow'. So the tag that gets added is always the last one on the menu, no matter what the user clicks on.</p>

<p>I was originally using a lambda, and I thought maybe explicitly defining the function as above might work better. Either way the problem occurs. I've tried using a copy of the variable 'tag' (either with ""current_tag = tag"" or using the copy module) but that doesn't solve it. I'm not sure why.</p>

<p>My mind is starting to wander towards things like ""eval"" but I'm hoping someone can think of a clever way that doesn't involve such horrible things.</p>

<p>Much thanks!</p>

<p>(In case it's relevant, Tkinter.__version__ returns '$Revision: 67083 $' and I'm using Python 2.6.1 on Windows XP.)</p>
"
728361,83898,2009-04-08T03:01:52Z,12,Is there a way to overload += in python?,"<p>I know about the <code>__add__</code> method to override plus, but when I use that to override +=, I end up with one of two problems:</p>

<p>(1) if <code>__add__</code> mutates self, then </p>

<pre><code>z = x + y
</code></pre>

<p>will mutate x when I don't really want x to be mutated there.</p>

<p>(2) if <code>__add__</code> returns a new object, then</p>

<pre><code>tmp = z
z += x
z += y
tmp += w
return z
</code></pre>

<p>will return something without w since z and tmp point to different objects after <code>z += x</code> is executed.</p>

<p>I can make some sort of <code>.append()</code> method, but I'd prefer to overload <code>+=</code> if it is possible.</p>
"
728543,NA,2009-04-08T04:38:53Z,4,"Python ""round robin""","<p>Given multiple (x,y) ordered pairs, I want to compare distances between each one of them.
So pretend I have a list of ordered pairs:</p>

<pre><code>pairs = [a,b,c,d,e,f]
</code></pre>

<p>I have a function that takes two ordered pairs and find the distance between them:</p>

<pre><code>def distance(a,b):
    from math import sqrt as sqrt
    from math import pow as pow
    d1 = pow((a[0] - b[0]),2)
    d2 = pow((a[1] - b[1]),2)
    distance = sqrt(d1 + d2)
    return distance
</code></pre>

<p>How can I use this function to compare every ordered pair to every other ordered pair, ultimately finding the two ordered-pairs with the greatest distance between them?</p>

<p>Psuedopsuedocode:  </p>

<pre><code>     distance(a,b)
     distance(a,c)
     ...
     distance(e,f)
</code></pre>

<p>Any help would be tremendously appreciated.</p>
"
728589,3045,2009-04-08T05:09:12Z,2,Example of how to use msilib to create a .msi file from a python module,"<p>Can anyone give me an example of how to use python's <a href=""http://docs.python.org/library/msilib.html"" rel=""nofollow"">msilib</a> standard library module to create a msi file from a custom python module?</p>

<p>For example, let's say I have a custom module called cool.py with the following code</p>

<pre><code>class Cool(object):
    def print_cool(self):
        print ""cool""
</code></pre>

<p>and I want to create an msi file using msilib that will install cool.py in python's site-packages directory.</p>

<p>How can I do that?</p>
"
728891,22035,2009-04-08T07:35:05Z,66,Correct way to define Python source code encoding,"<p><a href=""http://www.python.org/dev/peps/pep-0263/"">PEP 263</a> defines how to define Python source code encoding.</p>

<p>Normally, the first 2 lines of a Python file should start with:</p>

<pre><code>#!/usr/bin/python
# -*- coding: &lt;encoding name&gt; -*-
</code></pre>

<p>But I have seen a lot of files starting with:</p>

<pre><code>#!/usr/bin/python
# -*- encoding: &lt;encoding name&gt; -*-
</code></pre>

<p>-> <strong>encoding</strong> instead of <strong>coding</strong>.</p>

<p>So what is the correct way of declaring the file encoding ?</p>

<p>Is <strong>encoding</strong> permitted because the regex used is lazy ? Or is it just another form of declaring the file encoding ?</p>

<p>I'm asking this question because the PEP does not talk about <strong>encoding</strong>, it just talks about <strong>coding</strong>.</p>
"
729130,NA,2009-04-08T08:56:38Z,0,Python script - SCP on windows,"<p>How is it possible to do secure copy using python (windows native install - ActivePython). Unfortunately pexpect module is for unix only and we don't want cygwin locally. I wrote a script that based on pscp.exe win tool - but always stops at first execution becuse of fingerprint host id. and haven't found option to switch this off.
the remote hosts are running ssh-server on cygwin (win 2003 servers).</p>

<p>Thanks</p>
"
729248,79395,2009-04-08T09:30:31Z,6,Python's eval() and globals(),"<p>I'm trying to execute a number of functions using eval(), and I need to create some kind of environment for them to run. It is said in documentation that you can pass globals as a second parameter to eval().</p>

<p>But it seems to not work in my case. Here's the simpified example (I tried two approaches, declaring variable global and using globals(), and both do not work):</p>

<h3>File <em>script.py</em>:</h3>

<pre><code>import test

global test_variable
test_variable = 'test_value'
g = globals()
g['test_variable'] = 'test_value'
eval('test.my_func()', g)
</code></pre>

<h3>File <em>test.py</em>:</h3>

<pre><code>def my_func():
    global test_variable
    print repr(test_variable)
</code></pre>

<p>And I'm getting:</p>

<blockquote>
  <p>NameError: global name 'test_variable' is not defined.</p>
</blockquote>

<p>What should I do to pass that <code>test_variable</code> into <code>my_func()</code>? Assuming I can't pass it as a parameter.</p>
"
729354,88513,2009-04-08T10:16:07Z,3,Identifying a map in groovy,"<p>While porting over a code fragment from python I've stumbled over a trivial problem:</p>

<pre><code>if isinstance(v['content'], dict):
</code></pre>

<p>What would be the most elegant way to port this over to groovy?</p>
"
729583,1448,2009-04-08T11:30:21Z,28,Getting file path of imported module,"<p>How can I get the file path of a module imported in python. I am using Linux (if it matters). </p>

<p>Eg: if I am in my home dir and import a module, it should return back the full path of my home directory.</p>
"
729759,37984,2009-04-08T12:36:53Z,16,How to I get scons to invoke an external script?,"<p>I'm trying to use scons to build a latex document. In particular, I want to get scons to invoke a python program that generates a file containing a table that is \input{} into the main document. I've looked over the scons documentation but it is not immediately clear to me what I need to do.</p>

<p>What I wish to achieve is essentially what you would get with this makefile:</p>

<pre><code>document.pdf:  table.tex
    pdflatex document.tex

table.tex:
    python table_generator.py
</code></pre>

<p>How can I express this in scons?</p>
"
730105,83313,2009-04-08T13:50:10Z,1,Seting up Python on IIS 5.1,"<p>I have this test python file</p>

<pre><code>import os

print 'Content-type: text/html' 
print 

print '&lt;HTML&gt;&lt;HEAD&gt;&lt;TITLE&gt;Python Sample CGI&lt;/TITLE&gt;&lt;/HEAD&gt;'
print '&lt;BODY&gt;'
print ""&lt;H1&gt;This is A Sample Python CGI Script&lt;/H1&gt;""
print '&lt;br&gt;'
if os.environ.has_key('REMOTE_HOST'):
   print ""&lt;p&gt;You have accessed this site from IP: ""+os.environ[""REMOTE_HOST""]+""&lt;/p&gt;""
else:
   print os.environ['COMPUTERNAME']

print '&lt;/BODY&gt;&lt;/html&gt;'
</code></pre>

<p>I created an application on IIS 5.1 with permission to execute scripts and created a mapping to .py like this:</p>

<pre><code>C:\Python30\python.exe -u ""%"" ""%""
</code></pre>

<p>But when I try to execute the script I got the following error:</p>

<pre><code>CGI Error
The specified CGI application misbehaved by not returning a complete set of HTTP headers. The headers it did return are:

C:\Python30\python.exe: can't find '__main__.py' in ''
</code></pre>

<p>Any idea?</p>
"
730207,8207,2009-04-08T14:12:43Z,13,Django Model set foreign key to a field of another Model,"<p>Is there any way to set a foreign key in django to a <em>field</em> of another model?</p>

<p>For example, imagine I have a ValidationRule object.  And I want the rule to define what field in another model is to be validated (as well as some other information, such as whether it can be null, a data-type, range, etc.)</p>

<p>Is there a way to store this field-level mapping in django?</p>
"
730299,88622,2009-04-08T14:32:42Z,13,Replace html entities with the corresponding utf-8 characters in Python 2.6,"<p>I have a html text like this:</p>

<pre><code>&amp;lt;xml ... &amp;gt;
</code></pre>

<p>and I want to convert it to something readable:</p>

<pre><code>&lt;xml ...&gt;
</code></pre>

<p>Any easy (and fast) way to do it in Python?</p>
"
730319,88626,2009-04-08T14:35:13Z,2,mercurial + OSX == fail? hg log abort: Is a directory,"<pre><code>$ mkdir foo
$ cd foo
$ hg init .
$ hg log
abort: Is a directory
$ hg history
abort: Is a directory
</code></pre>

<p>Darwin Host.local 9.6.1 Darwin Kernel Version 9.6.1: Wed Dec 10 10:38:33 PST 2008; root:xnu-1228.9.75~3/RELEASE_I386 i386</p>

<pre><code>$ hg --version
Mercurial Distributed SCM (version 1.2.1)
$ python --version
Python 2.5.4
</code></pre>

<p>(all installed via macports)</p>

<p>Thoughts? The google gives us nothing.</p>

<p>Update:</p>

<p>(as root):</p>

<pre><code>$ hg init /tmp/foo
$ cd /tmp/foo; hg log
(works)
</code></pre>

<p>(as user):</p>

<pre><code>$ hg init /tmp/bar
$ cd /tmp/bar; hg log
abort: Is a directory
</code></pre>

<p>So Travis was right (see comments) it does look like a permission problem somewhere but where? This is a stock install of Leopard barely a week old and stock installs of macport versions of python and mercurial. I hope that isn't mercurial's idea of a good error message when it has a permission problem.</p>

<p>2nd update (from dkbits suggestions below):</p>

<pre><code>$ sudo dtruss hg log
[snip]
...
stat(""/opt/local/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/site-   packages/mercurial/templates/gitweb\0"", 0xBFFFC7DC, 0x1000) 	 = 0 0
open_nocancel(""/opt/local/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/site-packages/mercurial/templates/gitweb\0"", 0x0, 0x1B6)   	 = 3 0
fstat(0x3, 0xBFFFC900, 0x1B6)   	 = 0 0
close_nocancel(0x3) 	 = 0 0
write_nocancel(0x2, ""abort: Is a directory\n\0"", 0x16)  	 = 22 0
</code></pre>

<p>Also, the temp directory is where you expected it to be. Permissions look okay on it.</p>
"
730394,76701,2009-04-08T14:53:31Z,2,wxPython: Making a fixed-height panel,"<p>I have a wx.Frame, in which I have a vertical BoxSizer with two items, a TextCtrl and a custom widget. I want the custom widget to have a fixed pixel height, while the TextCtrl will expand normally to fill the window. What should I do?</p>
"
730573,2908,2009-04-08T15:38:53Z,21,django to send AND receive email?,"<p>I have gotten quite familiar with django's email sending abilities, but I havn't seen anything about it receiving and processing emails from users. Is this functionality available? </p>

<p>A few google searches have not turned up very promising results. Though I did find this: <a href=""http://stackoverflow.com/questions/348392/receive-and-send-emails-in-python"">http://stackoverflow.com/questions/348392/receive-and-send-emails-in-python</a></p>

<p>Am I going to have to roll my own? if so, I'll be posting that app faster than you can say... whatever you say.</p>

<p>thanks,
Jim</p>

<p><strong>update</strong>: I'm not trying to make an email server, I just need to add some functionality where you can email an image to the site and have it pop up in your account.</p>
"
730645,76701,2009-04-08T15:55:06Z,12,Python/wxPython: Doing work continuously in the background,"<p>I'm making a program for running simulations in Python, with a wxPython interface. In the program, you can create a simulation, and the program renders (=calculates) it for you. Rendering can be very time-consuming sometimes.</p>

<p>When the user starts a simulation, and defines an initial state, I want the program to render the simulation continuously in the background, while the user may be doing different things in the program. Sort of like a YouTube-style bar that fills up: You can play the simulation only up to the point that was rendered.</p>

<p>How should I run the rendering function?</p>
"
730764,51816,2009-04-08T16:23:00Z,393,Try/Except in Python: How do you properly ignore Exceptions?,"<p>When you just want to do a try-except without handling the exception, how do you do it in Python?</p>

<p>Is the following the right way to do it?</p>

<pre><code>try :
    shutil.rmtree ( path )
except :
    pass
</code></pre>
"
730952,NA,2009-04-08T17:19:23Z,1,draw text with GLUT / OpenGL in Python,"<p>Hey,
I m drawing text with OpenGL in Python. It all works ok, however the font is really bad. 
If I make it thick the letters start to look very occurred (especially the ones which are round like 'o' or 'g'. For the purpose of my program it must be thick. Is there any font I could use which does not look so bad when thickened, or is there another way to draw it?
I am really stuck and will appreciate any answer,</p>
"
731016,NA,2009-04-08T17:34:51Z,1,How can I get useful information from flash swf files?,"<p>I'm doing some crawling with Python, and would like to be able to identify (however imperfectly) the flash I come across - is it a video, an ad, a game, or whatever.</p>

<p>I assume I would have to decompile the swf, which seems doable. But what sort of processing would I do with the decompiled Actionscript to figure out what it's purpose is?</p>

<p>Edit: or any better ideas would be most welcome also.</p>
"
731057,88717,2009-04-08T17:49:15Z,0,Pygame Invalid Syntax I just can't figure out,"<p>I've been following a tutorial ""McGugan - Beginning Game Development with Python and Pygame (Apress, 2007)"" and in the code at around chapter five involving object movement I keep getting invalid syntax alerts on '-' being used in the code. It isn't up to date but I would've thought a subtract wouldn't be changed in any updates due to its simplicity and necessity.</p>

<p>This is the code I have: </p>

<pre><code>background_image_filename = 'sushiplate.jpg'
sprite_image_filename = 'fugu.png'
import pygame
from pygame.locals import *
from sys import exit
from gameobjects.vector2 import Vector2
pygame.init()
screen = pygame.display.set_mode((640, 480), 0, 32)
background = pygame.image.load(background_image_filename).convert()
sprite = pygame.image.load(sprite_image_filename).convert_alpha()
clock = pygame.time.Clock()
position = Vector2(100.0, 100.0)
speed = 250.
heading = Vector2()
while True:
    for event in pygame.event.get():
        if event.type == QUIT:
            exit()
    if event.type == MOUSEBUTTONDOWN:
        destination = Vector2(*event.pos) – Vector2(*sprite.get_size())/2.
        heading = Vector2.from_points(position, destination)
        heading.normalize()
    screen.blit(background, (0,0))
    screen.blit(sprite, position)
    time_passed = clock.tick()
    time_passed_seconds = time_passed / 1000.0
    distance_moved = time_passed_seconds * speed
    position += heading * distance_moved
    pygame.display.update()
</code></pre>

<p>am I doing something wrong or is it just simply outdated?</p>

<p>Any help is much needed.</p>
"
731470,20510,2009-04-08T19:31:04Z,5,What's easiest way to get Python script output on the web?,"<p>I have a python script that runs continuously.  It outputs 2 lines of info every 30 seconds.  I'd like to be able to view this output on the web.  In particular, I'd like the site to auto-update (add the new output at the top of the page/site every 30 seconds without having to refresh the page).</p>

<p>I understand I can do this with javascript but is there a python only based solution?  Even if there is, is javascript the way to go?  I'm more than willing to learn javascript if needed but if not, I'd like to stay focused on python.</p>

<p>Sorry for the basic question but I'm still clueless when it comes to web programming.</p>

<p>Thx!</p>
"
731534,51816,2009-04-08T19:47:11Z,1,Is there a way to get all the directories but not files in a directory in Python?,"<p>This <a href=""http://linux.die.net/diveintopython/html/file_handling/os_module.html"" rel=""nofollow"">link</a> is using a custom method, but I just wanna see if there is a single method to do it in Python 2.6?</p>
"
731759,70342,2009-04-08T20:46:50Z,0,Showing data in a GUI where the data comes from an outside source,"<p>I'm kind of lost on how to approach this problem, I'd like to write a GUI ideally using Tkinter with python, but I initially started with Qt and found that the problem extends either with all GUI frameworks or my limited understanding.</p>

<p>The data in this case is coming from a named pipe, and I'd like to display whatever comes through the pipe into a textbox. I've tried having one thread listen on the pipe and another create the GUI, but in both cases one thread always seems to hang or the GUI never gets created. </p>

<p>Any suggestions?</p>
"
731887,NA,2009-04-08T21:14:42Z,2,Resetting the main GUI window,"<p>I just want the equivalent of closing and reopening my main program. I want to invoke it when a ""new""-like option from a drop-down menu is clicked on. Something like calling root.destroy() and then re-initiating the mainloop.</p>

<p>How can I get this done?</p>
"
731993,76701,2009-04-08T21:44:44Z,24,Multiprocessing or Multithreading?,"<p>I'm making a program for running simulations in Python, with a wxPython interface. In the program, you can create a simulation, and the program renders (=calculates) it for you. Rendering can be very time-consuming sometimes.</p>

<p>When the user starts a simulation, and defines an initial state, I want the program to render the simulation continuously in the background, while the user may be doing different things in the program. Sort of like a YouTube-style bar that fills up: You can play the simulation only up to the point that was rendered.</p>

<p>Should I use multiple processes or multiple threads or what? People told me to use the <code>multiprocessing</code> package, I checked it out and it looks good, but I also heard that processes, unlike threads, can't share a lot of information (and I think my program will need to share a lot of information.) Additionally I also heard about Stackless Python: Is it a separate option? I have no idea.</p>

<p>Please advise.</p>
"
732190,11596,2009-04-08T22:47:16Z,8,Serving static files with mod_wsgi and Django,"<p>I have a django application using mod_python, fairly typical configuration except that media files are being served by a (I know, not recommended) 'media' directory in the document root.  I would like to test and maybe deploy with mod_wsgi but I cannot figure out how to create something simple to serve static files.  mod_python allows the use of Apache directives like:</p>

<pre><code>&lt;Location '/'&gt;
    SetHandler MyApplication.xyz.....
&lt;/Location&gt;

&lt;Location '/media'&gt;
    SetHandler None
&lt;/Location&gt;
</code></pre>

<p>The django docs seem to point to the second block above as the correct way to make a similar exception for mod_wsgi, but in my tests everything below root is still being sent to the wsgi app.  Is there a good way set a static media directory with mod_wsgi, or is what I am trying to do intentionally unsupported for compelling technical reasons?  Answers that point to entirely different approaches are welcome.</p>
"
732192,88191,2009-04-08T22:47:25Z,2,Get Tk winfo_rgb() without having a window instantiated,"<p>I know I can call Tkinter.Tk().winfo_rgb(color) to get a tuple of values that represent the named color.</p>

<p>for instance Tkinter.Tk().winfo_rgb(""red"") returns (65535, 0, 0)</p>

<p>The problem is it also opens a window.  I was hoping to abstract some color calculations into a generic color class, and handle whether or not the class was instantiated with ""red"" or ""#ff0000"" or maybe even some other formats.</p>

<p>With the class abstracted, I don't have a tk parent to pull this info from without instantiating a new window, or passing in a parent.</p>

<p>Is there any way to get this kind of colorname to hex value conversion without having an instantiated Tk window?</p>
"
732222,66289,2009-04-08T22:58:19Z,5,Python HTTP server that supports chunked encoding?,"<p>I'm looking for a well-supported multithreaded Python HTTP server that supports chunked encoding replies.  (I.e. ""Transfer-Encoding: chunked"" on responses).  What's the best HTTP server base to start with for this purpose?</p>
"
732405,13876,2009-04-09T00:39:06Z,0,Django Model: Returning username from currently logged in user,"<p>I'm working on a Django app for hosting media (specifically audio and images). I have image galleries and photos separate in my model, and have them linked with a <code>ForeignKey</code> (not sure if that's correct, but still learning). What I need is for the Album class's <code>__unicode__</code> to return the album owner's username.</p>

<pre><code>class Album(models.Model):
    artist = models.ForeignKey(User, unique=True, related_name='artpunk')

    def __unicode__(self):
        return self.artist.username
</code></pre>

<p>I know the username property exists, and confirmed it by inserting a <code>dir()</code> and checking the console output. The problem is when I enter the image section of the admin panel, it simply states ""Unrecognised command."" Can <code>User</code> properties not be accessed by models? Or am I doing something else wrong?</p>

<p>EDIT: Forgot to mention, using Python 2.6 with Django 1.0.2. The exact text of the error is, as above, simply ""Unrecognised command"" in bold, and I've already run <code>syncdb</code> without issue. However, I reran <code>syncdb</code> (gave no output) this morning just to try again and now it seems to be working fine.</p>

<p>It's reproducible by changing the following:</p>

<pre><code>    def __unicode__(self):
        return self.artist.username
</code></pre>

<p>To something like this:</p>

<pre><code>    def __unicode__(self):
        return self.artist.username+'\'s Gallery'
</code></pre>
"
732429,26861,2009-04-09T00:52:57Z,4,HTML Rich Textbox,"<p>I'm writing a web-app using Python and Pylons.  I need a textbox that is rich (ie, provides the ability to bold/underline/add bullets..etc...).  Does anyone know a library or widget I can use?</p>

<p>It doesn't have to be Python/Pylons specific, as it can be a Javascript implementation as well.</p>

<p>Thanks!</p>
"
732465,84372,2009-04-09T01:26:22Z,0,skip over HTML tags in Regular Expression patterns,"<p>I'm trying to write a regular expression pattern (in python) for reformatting these template engine files.</p>

<p>Basically the scheme looks like this:</p>

<pre><code>[$$price$$]
{
    &lt;h3 class=""price""&gt;
    $12.99
    &lt;/h3&gt;
}
</code></pre>

<p>I'm trying to make it remove any extra tabs\spaces\new lines so it should look like this:</p>

<pre><code>[$$price$$]{&lt;h3 class=""price""&gt;$12.99&lt;/h3&gt;}
</code></pre>

<p>I wrote this: (\t|\s)+? which works except it matches within the html tags, so h3 becomes h3class and I am unable to figure out how to make it ignore anything inside the tags.</p>
"
732829,88905,2009-04-09T04:42:59Z,1,How do I make this progress bar close when it is done,"<p>I commonly write Python scipts to do conversion tasks for me and whenever I write one that takes a while I use this little progress bar to check on it</p>

<pre><code>import sys
import time
from PyQt4 import QtGui
app = QtGui.QApplication(sys.argv)
barra = QtGui.QProgressBar()
barra.show()
barra.setMinimum(0)
barra.setMaximum(10)
for a in range(10):
    time.sleep(1)
    barra.setValue(a)
app.exec_()
</code></pre>

<p>I have 2 questions:</p>

<p>How do I make it close itself when it reaches 100%
(It stays open and if you close the python shell before clicking the X button you crash it.)</p>

<p>also, When it loses and regains focus, it stops painting correctly. the process will continue to completion but the progress bar space is all white. How do I handle this?</p>
"
732952,84498,2009-04-09T05:38:47Z,21,Get Primary Key after Saving a ModelForm in Django,"<p>How do I get the primary key after saving a ModelForm? After the form has been validated and saved, I would like to redirect the user to the contact_details view which requires the primary key of the contact. </p>

<pre><code>def contact_create(request):
    if request.method == 'POST':
        form = ContactForm(request.POST)
        if form.is_valid():
            form.save()
            return HttpResponseRedirect(reverse(contact_details, args=(form.pk,)))
    else:
        form = ContactForm()
</code></pre>
"
733454,87535,2009-04-09T09:15:33Z,113,Best way to format integer as string with leading zeros?,"<p>I need to add leading zeros to integer to make a string with defined quantity of digits ($cnt).
What the best way to translate this simple function from PHP to Python:</p>

<pre><code>function add_nulls($int, $cnt=2) {
    $int = intval($int);
    for($i=0; $i&lt;($cnt-strlen($int)); $i++)
        $nulls .= '0';
    return $nulls.$int;
}
</code></pre>

<p>Is there a function that can do this?</p>
"
733574,89006,2009-04-09T09:59:02Z,3,Access list of tuples,"<p>I have a list that contains several tuples, like:</p>

<pre><code>[('a_key', 'a value'), ('another_key', 'another value')]
</code></pre>

<p>where the first tuple-values act as dictionary-keys.
I'm now searching for a python-like way to access the key/value-pairs, like:</p>

<p><code>""mylist.a_key""</code> or <code>""mylist['a_key']""</code></p>

<p>without iterating over the list. any ideas?</p>
"
733916,88717,2009-04-09T12:01:58Z,1,Pygame: Sprite changing due to direction of movement,"<p>I've just started learning how to use pygame yesterday. I was read this one book that was super helpful and followed all its tutorials and examples and stuff. I wanted to try making a really simple side scroller/platforming game but the book sorta jumped pretty fast into 3D modeling with out instructing how to make changing sprites for movement of up down left and right and how to cycle through animating images.</p>

<p>I've spent all today trying to get a sprite to display and be able to move around with up down left and right. But because of the simple script it uses a static image and refuses to change.</p>

<p>Can anyone give me some knowledge on how to change the sprites. Or send me to a tutorial that does?</p>

<p>Every reference and person experimenting with it ha always been using generated shapes so I'm never able to work with them.</p>

<p>Any help is very appreciated.</p>

<p>Added: before figuring out how to place complex animations in my scene I'd like to know how I can make my 'player' change to unmoving images in regards to my pressing up down left or right. maybe diagonal if people know its something really complicated.</p>

<p>Add: This is what I've put together so far. <a href=""http://animania1.ca/ShowFriends/dev/dirmove.rar"" rel=""nofollow"">http://animania1.ca/ShowFriends/dev/dirmove.rar</a> would there be a possibility of making the direction/action set the column of the action and have the little column setting code also make it cycle down in a loop to do the animation? (or would that be a gross miss use of efficiency?)</p>
"
734255,31169,2009-04-09T13:35:00Z,23,What is the difference between a site and an app in Django?,"<p>I know a site can have many apps but all the examples I see have the site called ""mysite"". I figured the site would be the name of your site, like StackOverflow for example. </p>

<p>Would you do that and then have apps like ""authentication"", ""questions"", and ""search""? Or would you really just have a site called mysite with one app called StackOverflow?</p>
"
734413,52209,2009-04-09T14:05:37Z,-1,Pretty-printing C# from Python,"<p>Suppose I wrote a compiler in Python or Ruby that translates a language into a C# AST.</p>

<p>How do I pretty-print this AST from Python or Ruby to get nicely indented C# code?</p>

<pre><code>Thanks, Joel
</code></pre>
"
734893,76322,2009-04-09T16:11:15Z,27,Python mechanize - two buttons of type 'submit',"<p>I have a mechanize script written in python that fills out a web form and is supposed to click on the 'create' button. But there's a problem, the form has two buttons. One for 'add attached file' and one for 'create'. Both are of type 'submit', and the attach button is the first one listed. So when I select the forum and do br.submit(), it clicks on the 'attach' button instead of 'create'. Extensive Googling has yielded nothing useful for selecting a specific button in a form. Does anyone know of any methods for skipping over the first 'submit' button and clicking the second?</p>
"
734970,89141,2009-04-09T16:29:49Z,0,Python: Reference to a class from a string?,"<p>How to use a string containing a class name to reference a class itself?<br />
See this (not working) exemple...</p>

<pre><code>class WrapperClass:
    def display_var(self):
        #FIXME: self.__class_name__.__name__ is a string
        print self.__class__.__name__.the_var

class SomeSubClass(WrapperClass):
    var = ""abc""

class AnotherSubClass(WrapperClass):
    var = ""def""
</code></pre>

<p>And an obvious error message:</p>

<pre>
>>> b = SomeSubClass()
>>> b.display_var()
Traceback (most recent call last):
  File """", line 1, in 
  File """", line 4, in display_var
AttributeError: 'str' object has no attribute 'the_var'
>>> 
</pre>

<p>Thanks!</p>
"
735337,39167,2009-04-09T18:17:18Z,4,Propagating application settings,"<p>Probably a very common question, but couldn't find suitable answer yet.. </p>

<p>I have a (Python w/ C++ modules) application that makes heavy use of an SQLite database and its path gets supplied by user on application start-up. </p>

<p>Every time some part of application needs access to database, I plan to acquire a new session and discard it when done. For that to happen, I obviously need access to the path supplied on startup. Couple of ways that I see it happening:</p>

<p><strong>1. Explicit arguments</strong></p>

<p>The database path is passed everywhere it needs to be through an explicit parameter and database session is instantiated with that explicit path. This is perhaps the most modular, but seems to be incredibly awkward.</p>

<p><strong>2. Database path singleton</strong></p>

<p>The database session object would look like:</p>

<pre><code>import foo.options
class DatabaseSession(object):
    def __init__(self, path=foo.options.db_path):
        ...
</code></pre>

<p>I consider this to be the lesser-evil singleton, since we're storing only constant strings, which don't change during application runtime. This leaves it possible to override the default and unit test the <code>DatabaseSession</code> class if necessary.</p>

<p><strong>3. Database path singleton + static factory method</strong></p>

<p>Perhaps slight improvement over the above:</p>

<pre><code>def make_session(path=None):
    import foo.options
    if path is None:
        path = foo.options.db_path
    return DatabaseSession(path)

class DatabaseSession(object):
    def __init__(self, path):
        ...
</code></pre>

<p>This way the module doesn't depend on <code>foo.options</code> at all, unless we're using the factory method. Additionally, the method can perform stuff like session caching or whatnot.</p>

<p>And then there are other patterns, which I don't know of. I vaguely saw something similar in web frameworks, but I don't have any experience with those. My example is quite specific, but I imagine it also expands to other application settings, hence the title of the post. </p>

<p>I would like to hear your thoughts about what would be the best way to arrange this.</p>
"
735545,13009,2009-04-09T19:16:03Z,36,How to access data when form.is_valid() is false,"<p>When I have a valid Django form, I can access the data with form.cleaned_data.  But how do I get at the data a user entered when the form is not valid i.e., form.is_valid is false.</p>

<p>I'm trying to access forms within a form set, so form.data seems to just give me a mess.</p>
"
735743,38254,2009-04-09T20:03:11Z,0,"Looping through chars, generating words and checking if domain exists","<p>Hello<br>
Is there any way to generate words based on characters and checking if a domain exists with this word (ping)?</p>

<p>What I want to do is to generate words based on some characters, example ""abcdefgh"", and then ping generatedword.com to check if it exists. </p>
"
735878,76322,2009-04-09T20:51:18Z,1,Pass to python method based on length of a list,"<p>I have a list called 'optionlist' which may change length from day to day, but I want a tkinter dropdown box to be able to select something from it. </p>

<p>Here's an example of how to define a tkinter optionmenu:</p>

<pre><code>opt1 = OptionMenu(root, var1, 'A', 'B', 'C')
</code></pre>

<p>A, B, and C are the options you can select. The problem presented here is that while the OptionMenu is flexible and allows as many options as you want, you have to know exactly how many you want when you write the code. This isn't a list or a tuple being passed.</p>

<p>I'm wondering if anyone knows any kung-fu for making this so I don't have to do:</p>

<pre><code>if len(optionlist) == 1:
  opt1 = OptionMenu(root, var1, optionlist[0])  
if len(optionlist) == 2:
  opt1 = OptionMenu(root, var1, optionlist[0], optionlist[1])  
etc, etc, etc
</code></pre>

<p>I know you can define a list like this:</p>

<pre><code>elements = [client.get('element') for client in clientlist]
</code></pre>

<p>I'm hoping something similar can be done when passing to methods as well.</p>
"
735975,51816,2009-04-09T21:23:19Z,956,Static methods in Python?,"<p>Is it possible to have static methods in Python so I can call them without initializing a class, like:</p>

<pre><code>ClassName.StaticMethod ( )
</code></pre>
"
736043,2600,2009-04-09T21:52:33Z,55,Checking if a string can be converted to float in Python,"<p>I've got some Python code that runs through a list of strings and converts them to integers or floating point numbers if possible.  Doing this for integers is pretty easy</p>

<pre><code>if element.isdigit():
    newelement=int(element)
</code></pre>

<p>Floating point numbers are more difficult.  Right now I'm using partition('.') to split the string and checking to make sure that one or both sides are digits.</p>

<pre><code>partition=element.partition('.')
if (partition[0].isdigit() and partition[1]=='.' and partition[2].isdigit()) or (partition[0]=='' and partition[1]=='.' and partition[2].isdigit()) or (partition[0].isdigit() and partition[1]=='.' and partition[2]==''):
    newelement=float(element)
</code></pre>

<p>This works, but obviously the if statement for that is a bit of a bear.  The other solution I considered is to just wrap the conversion in a try/catch block and see if it succeeds, as described in <a href=""http://stackoverflow.com/questions/354038/checking-if-string-is-a-number-python"">this question</a>.</p>

<p>Anyone have any other ideas?  Opinions on the relative merits of the partition and try/catch approaches?</p>
"
736335,79722,2009-04-10T00:22:48Z,3,Python Superglobal?,"<p>Is there is a super global (like PHP) in Python?  I have certain variables I want to use throughout my whole project in separate files, classes, and functions, and I don't want to have to keep declaring it throughout each file.</p>
"
736413,65326,2009-04-10T01:00:55Z,4,Ping FeedBurner in Django App,"<p>I have a django site, and some of the feeds are published through FeedBurner. I would like to ping FeedBurner whenever I save an instance of a particular model. FeedBurner's website says to use the XML-RPC ping mechanism, but I can't find a lot of documentation on how to implement it.</p>

<p>What's the easiest way to do the XML-RPC ping in django/Python?</p>
"
736651,73048,2009-04-10T03:48:22Z,1,PyQt connect method bug when used in a for loop which creates widgets from a list,"<p>I have a GUI program, </p>

<p>It auto create buttons from a name list,
 and connect to a function prints its name.</p>

<p>but when I run this program, I press all the buttons, </p>

<p>they all return the last button's name.</p>

<p>I wonder why this thing happens. can any one help?</p>

<pre><code>import sys
from PyQt4.QtCore import *
from PyQt4.QtGui import *
import logging

logging.basicConfig(level=logging.DEBUG,)

class MainWindow(QWidget):
    def init(self):
        names = ('a','b','c')
        lo = QHBoxLayout(self)
        for name in names:
            button = QPushButton(name,self)
            lo.addWidget(button)
            self.connect(button,SIGNAL(""clicked()""),
                         lambda :logging.debug(name))

if __name__==""__main__"":
    app = QApplication(sys.argv)
    m = MainWindow();m.init();m.show()
    app.exec_()
</code></pre>

<p>result like:</p>

<pre><code>python t.py
DEBUG:root:c
DEBUG:root:c
DEBUG:root:c
</code></pre>
"
736813,76465,2009-04-10T05:45:24Z,12,How to read ID3 Tag in an MP3 using Python?,"<p>Does anyone has an experience of reading and writing ID3 tags in an MP3 file or a WMA file? There are some libraries but I would like to do it from the scratch. :-)</p>
"
737303,88717,2009-04-10T10:53:05Z,3,Pygame: Sprite animation Theory - Need Feedback,"<p>After some tweaking of some code I got from someone to cause a characters images to move in regards to its direction and up down left right input I've put this together: (hope the code isn't too messy)</p>

<p><a href=""http://animania1.ca/ShowFriends/dev/dirmove.rar"" rel=""nofollow"">Character Move Code + IMG</a></p>

<p>The Sprite sheet only runs lengthwise, so basically each sprite section is a different action. Now would there be a way I could make a code that functions with the current one to cycle down from a set 'action' in order to make an animation?</p>

<p>For example:
'Run Left' is sprite 3. So then after we designate that column would it be possible to loop down how ever many frames of the run animation (lets say 4) in order to make an animation?</p>

<p>Example Picture:
 <a href=""http://animania1.ca/ShowFriends/dev/example.jpg"" rel=""nofollow"">http://animania1.ca/ShowFriends/dev/example.jpg</a></p>
"
737383,912,2009-04-10T11:37:52Z,0,How can I make a Python extension module packaged as an egg loadable without installing it?,"<p>I'm in the middle of reworking our build scripts to be based upon <a href=""http://code.google.com/p/waf/"" rel=""nofollow"">the wonderful Waf tool</a> (I did use SCons for ages but its just <em>way</em> too slow).  </p>

<p>Anyway, I've hit the following situation and I cannot find a resolution to it:</p>

<ul>
<li>I have a product that depends on a number of previously built egg files.</li>
<li>I'm trying to package the product using <a href=""http://www.pyinstaller.org/"" rel=""nofollow"">PyInstaller</a> as part of the build process.</li>
<li>I build the dependencies first.</li>
<li>Next I want to run PyInstaller to package the product that depends on the eggs I built.  I need PyInstaller to be able to load those egg files as part of it's packaging process.</li>
</ul>

<p>This sounds easy: you work out what <code>PYTHONPATH</code> should be, construct a copy of <code>sys.environ</code> setting the variable up correctly, and then invoke the PyInstaller script using <code>subprocess.Popen</code> passing the previously configured environment as the env argument.</p>

<p>The problem is that setting <code>PYTHONPATH</code> alone does not seem to be enough if the eggs you are adding are extension modules that are packaged as zipsafe.  In this case, it turns out that the embedded libraries are not able to be imported.</p>

<p>If I unzip the eggs (renaming the directories to .egg), I can import them with no further settings but this is not what I want in this case.</p>

<p>I can also get the eggs to import from a subshell by doing the following:</p>

<ul>
<li>Setting <code>PYTHONPATH</code> to the directory that contains the egg you want to import (not the path of the egg itself)</li>
<li>Loading a python shell and using <code>pkg_resources.require</code> to locate the egg.  </li>
</ul>

<p>Once this has been done, the egg loads as normal.  Again, this is not practical because I need to be able to run my python shell in a manner where it is ready to import these eggs from the off.  </p>

<p>The dirty option would be to output a wrapper script that took the above actions before calling the real target script but this seems like the wrong thing to do: there must be a better way to do this.</p>
"
737511,NA,2009-04-10T12:40:39Z,1,SQLite in Python 2.2.3,"<p>I've written a web-app in python using SQLite and it runs fine on my server at home (with apache and python 2.5.2). I'm now trying to upload it to my web host and there servers use python 2.2.3 without SQLite.<br/>
Anyone know of a way to use SQLite in python 2.2.3 e.g. a module that I can upload and import? I've tried butchering the module from newer versions of python, but they don't seem to be compatible.<br/>
Thanks,<br/>
Mike</p>
"
737512,62811,2009-04-10T12:41:35Z,1,Returning default members when accessing to objects in python,"<p>I'm writing an ""envirorment"" where each variable is composed by a value and a description:</p>

<pre><code>class my_var:
   def __init__(self, value, description):
      self.value = value
      self.description = description
</code></pre>

<p>Variables are created and put inside a dictionary:</p>

<pre><code>my_dict[""foo""] = my_var(0.5, ""A foo var"")
</code></pre>

<p>This is cool but 99% of operations with variable are with the ""value"" member. So I have to write like this:</p>

<pre><code>print my_dict[""foo""].value + 15  # Prints 15.5
</code></pre>

<p>or</p>

<pre><code>my_dict[""foo""].value = 17
</code></pre>

<p>I'd like that all operation on the object my_dict[""foo""] could default to the ""value"" member. In other words I'd like to write:</p>

<pre><code>print my_dict[""foo""] + 15     # Prints 5.5
</code></pre>

<p>and stuff like that.</p>

<p>The only way I found is to reimplement <strong>all</strong> underscore-members (eq, add, str, etc) but I feel like this is the wrong way somehow. Is there a magic method I could use?</p>

<p>A workaround would be to have more dictionaries, like this:</p>

<pre><code>my_dict_value[""foo""] = 0.5
my_dict_description[""foo""] = ""A foo var""
</code></pre>

<p>but I don't like this solution. Do you have any suggestions?</p>
"
737826,76701,2009-04-10T14:41:10Z,0,Followup: Multiprocessing or Multithreading for Python simulation software,"<p>this is a follow up to <a href=""http://stackoverflow.com/questions/731993/multiprocessing-or-multithreading"">this</a>. (You don't have to read all the answers, just the question)</p>

<p>People explained to me the difference between processes and threads. On the one hand, I wanted processes so I could fully exploit all core of the CPU, on the other hand, passing information between processes was less than ideal, and I didn't want to have two copies of the huge object I was dealing with.</p>

<p>So I've been thinking about a way to do this, combining processes and threads; tell me if this makes sense. The main process in my program is the GUI process. I will have it spawn a ""rendering-manager"" thread. The rendering-manager thread will be responsible for rendering the simulation, however, it will not render them by itself, but spawn other processes to do the work for it.</p>

<p>These are the goals:</p>

<ol>
<li>Rendering should take advantage of all the cores available.</li>
<li>The GUI should never become sluggish.</li>
</ol>

<p>The reason I want the rendering-manager to be a thread is because it has to share a lot of information with the GUI: Namely, the simulation-timeline.</p>

<p>So do you think this is a good design? Do you have any suggestions for improvement?</p>

<p><strong>Update:</strong></p>

<p>Sorry for my confusing use of the word ""render"". By render I mean calculate the simulation, not render it on screen.</p>
"
737947,76701,2009-04-10T15:11:33Z,2,Scratch disks in Python?,"<p>I understood that in certain Windows XP programs, like Photoshop, there is something called ""scratch disks"". What I understood that this means, and please correct me if I'm wrong, is that Photoshop manages its own virtual memory on the hard-drive, instead of letting Windows manage it. I understood that the reason for this is some limitation by Windows XP on how much total memory a process can take, regardless of HD space. I think it's around 3 GB. Did I get it right so far?</p>

<p>I am making an application in Python for running simulations. It will take a lot of memory, and will run on Windows XP. Is it possible for it to use scratch disks? How?</p>
"
738301,76766,2009-04-10T17:34:26Z,5,How to Modify Choices of ModelMultipleChoiceField,"<p>Let's say I have some contrived models:</p>

<pre><code>class Author(Model):
   name = CharField()

class Book(Model):
   title = CharField()
   author = ForeignKey(Author)
</code></pre>

<p>And let's say I want to use a ModelForm for Book:</p>

<pre><code>   class BookForm(ModelForm):
      class Meta:
         model = Book
</code></pre>

<p>Simple so far.  But let's also say that I have a ton of Authors in my database, and I don't want to have such a long multiple choice field.  So, I'd like is to restrict the queryset on the BookForm's ModelMultipleChoiceField author field.  Let's also say that the queryset I want can't be chosen until <code>__init__</code>, because it relies on an argument to be passed.</p>

<p>This seems like it might do the trick:</p>

<pre><code>class BookForm(ModelForm):
   class Meta:
      model = Book

   def __init__(self, letter):
      # returns the queryset based on the letter
      choices = getChoices(letter)
      self.author.queryset = choices
</code></pre>

<p>Of course, if that just worked I wouldn't be here.  That gets me an AttributeError.  'BookForm' object has no attribute 'author'.  So, I also tried something like this, where I try to override the ModelForm's default field and then set it later:</p>

<pre><code>class BookForm(ModelForm):
   author = ModelMultipleChoiceField(queryset=Author.objects.all())

   class Meta:
      model = Book

   def __init__(self, letter):
      choices = getChoices(letter)
      self.author.queryset = choices
</code></pre>

<p>Which produces the same result.</p>

<p>Anyone know how this is intended to be done?</p>
"
738433,40023,2009-04-10T18:22:34Z,0,Getting started with Django-Instant Django,"<p>I've been trying to get Django running and when going through the intro to projects it seems that I keep having trouble when I get to the 'sync database' section.  When using InstantDjango this doesn't seem to be as much of a problem. My question is, can one just do Django development with the InstantDjango program or do you really need to run it the normal way?</p>
"
738467,88821,2009-04-10T18:31:50Z,18,"In Python, how do I reference a class generically in a static way, like PHP's ""self"" keyword?","<p>PHP classes can use the keyword ""self"" in a static context, like this:</p>

<pre><code>&lt;?php
class Test {
  public static $myvar = 'a';
  public static function t() {
     echo self::$myvar; // Generically reference the current class.
     echo Test::$myvar; // Same thing, but not generic.
  }
}
?&gt;
</code></pre>

<p>Obviously I can't use ""self"" in this way in Python because ""self"" refers not to a class but to an instance. So is there a way I can reference the current class in a static context in Python, similar to PHP's ""self""?</p>

<p>I guess what I'm trying to do is rather un-pythonic. Not sure though, I'm new to Python. Here is my code (using the Django framework):</p>

<pre><code>class Friendship(models.Model):
  def addfriend(self, friend):
    """"""does some stuff""""""

  @staticmethod # declared ""staticmethod"", not ""classmethod""
  def user_addfriend(user, friend): # static version of above method
    userf = Friendship(user=user) # creating instance of the current class
    userf.addfriend(friend) # calls above method

# later ....
Friendship.user_addfriend(u, f) # works
</code></pre>

<p>My code works as expected. I just wanted to know: is there a keyword I could use on the first line of the static method instead of ""Friendship""?</p>

<p>This way if the class name changes, the static method won't have to be edited. As it stands the static method would have to be edited if the class name changes.</p>
"
739090,14069,2009-04-10T22:43:55Z,4,How do you automate the launching/debugging of large scale projects?,"<p><strong>Scenario:</strong></p>

<p>There is a complex piece of software that is annoying to launch by hand. What I've done is to create a python script to launch the executable and attach <em>gdb</em> for debugging.</p>

<p>The process launching script:</p>

<ul>
<li>ensures an environment variable is set.</li>
<li>ensures a local build directory gets added to the environment's <code>LD_LIBRARY_PATH</code> variable.</li>
<li>changes the current working directory to where the executable expects to be (not my design)</li>
<li>launches the executable with a config file the only command line option </li>
<li>pipes the output from the executable to a second logging process</li>
<li>remembers PID of executable, then launches &amp; attaches gdb to running executable.</li>
</ul>

<p>The script works, with one caveat. <strong>ctrl-c doesn't interrupt the debugee and return control to gdb.</strong> So if I ""continue"" with no active breakpoints I can never stop the process again, it has to be killed/interrupted from another shell. BTW, running ""kill -s SIGINT &lt;pid&gt;"" where &lt;pid&gt; is the debuggee's pid does get me back to gdb's prompt... but it is really annoying to have to do things this way</p>

<p>At first I thought Python was grabbing the SIGINT signal, but this doesn't seem to be the case as I set up signal handlers forward the signal to the debugee and that doesn't fix the problem.</p>

<p>I've tried various configurations to the python script (calling os.spawn* instead of subprocess, etc.) It seems that any way I go about it, if python launched the child process, SIGINT (ctrl-c) signals DO NOT to get routed to gdb or the child process. </p>

<p><strong>Current line of thinking</strong></p>

<ul>
<li>This might be related to needing a
separate process group id for the debugee &amp; gdb...any credence to this? </li>
<li>Possible bug with SELinux?</li>
</ul>

<p><strong>Info:</strong> </p>

<ul>
<li>gdb 6.8</li>
<li>Python 2.5.2 (problem present with Python 2.6.1 as well)</li>
<li>SELinux Environment (bug delivering signals to processes?)</li>
</ul>

<p><strong>Alternatives I've considered:</strong></p>

<ul>
<li>Setting up a .gdbinit file to do as much of what the script does, environment variables and current working directory are a problem with this approach. </li>
<li>Launching executable and attaching gdb manually (yuck)</li>
</ul>

<p><strong>Question:</strong>
How do you automate the launching/debugging of large scale projects?</p>

<p><strong>Update:</strong>
I've tried Nicholas Riley's examples below, on my Macintosh at home they all allow cntl-c to work to varrying degrees, on the production boxen (which I now to believe may be running SELinux) they don't... </p>
"
739191,43004,2009-04-10T23:53:37Z,0,"""ImportError: No module named dummy"" on fresh Django project","<p>I've got the following installed through MacPorts on MacOS X 10.5.6:</p>

<pre><code>py25-sqlite3 @2.5.4_0 (active)
python25 @2.5.4_1+darwin_9+macosx (active)
sqlite3 @3.6.12_0 (active)
</code></pre>

<p><code>python25</code> is correctly set as my system's default Python.</p>

<p>I downloaded a fresh copy of Django 1.1 beta (I have the same problem with 1.0 and trunk, though) and installed it with ""<code>sudo python setup.py install</code>"".</p>

<p>Things seem to load correctly through the interactive interpreter:</p>

<pre><code>$ python
Python 2.5.4 (r254:67916, Apr 10 2009, 16:02:52) 
[GCC 4.0.1 (Apple Inc. build 5490)] on darwin
Type ""help"", ""copyright"", ""credits"" or ""license"" for more information.
&gt;&gt;&gt; import django
&gt;&gt;&gt; import sqlite3
&gt;&gt;&gt; ^D
</code></pre>

<p>But:</p>

<pre><code>$ django-admin.py startproject foo
$ cd foo/
$ python manage.py runserver
Validating models...
Unhandled exception in thread started by &lt;function inner_run at 0x6c1e70&gt;
Traceback (most recent call last):
  File ""/opt/local/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/site-packages/django/core/management/commands/runserver.py"", line 48, in inner_run
    self.validate(display_num_errors=True)
  File ""/opt/local/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/site-packages/django/core/management/base.py"", line 246, in validate
    num_errors = get_validation_errors(s, app)
  File ""/opt/local/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/site-packages/django/core/management/validation.py"", line 22, in get_validation_errors
    from django.db import models, connection
  File ""/opt/local/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/site-packages/django/db/__init__.py"", line 22, in &lt;module&gt;
    backend = __import__('%s.base' % settings.DATABASE_ENGINE, {}, {}, [''])
ImportError: No module named dummy.base
</code></pre>

<p>If I change <code>DATABASE_ENGINE</code> in <code>settings.py</code> to ""<code>sqlite3</code>"", I get the following, seemingly related problem:</p>

<pre><code>$ python manage.py runserver

Validating models...
Unhandled exception in thread started by &lt;function inner_run at 0x6c1e70&gt;
Traceback (most recent call last):
  File ""/opt/local/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/site-packages/django/core/management/commands/runserver.py"", line 48, in inner_run
    self.validate(display_num_errors=True)
  File ""/opt/local/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/site-packages/django/core/management/base.py"", line 246, in validate
    num_errors = get_validation_errors(s, app)
  File ""/opt/local/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/site-packages/django/core/management/validation.py"", line 22, in get_validation_errors
    from django.db import models, connection
  File ""/opt/local/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/site-packages/django/db/__init__.py"", line 22, in &lt;module&gt;
    backend = __import__('%s.base' % settings.DATABASE_ENGINE, {}, {}, [''])
ImportError: No module named base
^C$
</code></pre>

<p>I swear this all worked a few days ago and I don't recall changing anything related to Django or Python, installation-wise.</p>

<p>My various Google adventures have turned up nothing useful. So... Any ideas?</p>

<p>Edit: '<code>syncdb</code>' raises the same exceptions.</p>
"
739241,20010,2009-04-11T00:22:31Z,18,Date Ordinal Output?,"<p>I'm wondering if there is a quick and easy way to output ordinals given a number in python.</p>

<p>For example, given the number <code>1</code>, I'd like to output <code>""1st""</code>, the number <code>2</code>, <code>""2nd""</code>, et cetera, et cetera.</p>

<p>This is for working with dates in a breadcrumb trail</p>

<pre><code>Home &gt;  Venues &gt;  Bar Academy &gt;  2009 &gt;  April &gt;  01 
</code></pre>

<p>is what is currently shown</p>

<p>I'd like to have something along the lines of</p>

<pre><code>Home &gt;  Venues &gt;  Bar Academy &gt;  2009 &gt;  April &gt;  1st
</code></pre>
"
739260,30642,2009-04-11T00:43:58Z,58,Customize/remove Django select box blank option,"<p>I'm using Django 1.0.2.  I've written a ModelForm backed by a Model.  This model has a ForeignKey where blank=False.  When Django generates HTML for this form it creates a select box with one option for each row in the table referenced by the ForeignKey.  It also creates an option at the top of the list that has no value and displays as a series of dashes:</p>

<pre><code>&lt;option value=""""&gt;---------&lt;/option&gt;
</code></pre>

<p>What I'd like to know is:</p>

<ol>
<li>What is the cleanest way to remove this auto-generated option from the select box?  </li>
<li><p>What is the cleanest way to customize it so that it shows as:</p>

<pre><code>&lt;option value=""""&gt;Select Item&lt;/option&gt;
</code></pre></li>
</ol>

<p>In searching for a solution I came across <a href=""http://code.djangoproject.com/ticket/4653"">Django ticket 4653</a> which gave me the impression that others had the same question and that the default behavior of Django may have been modified.  This ticket is over a year old so I was hoping there might be a cleaner way to accomplish these things.</p>

<p>Thanks for any help,</p>

<p>Jeff</p>

<p>Edit: I've configured the ForeignKey field as such: </p>

<pre><code>verb = models.ForeignKey(Verb, blank=False, default=get_default_verb)
</code></pre>

<p>This does set the default so that it's no longer the empty/dashes option but unfortunately it doesn't seem to resolve either of my questions.  That is, the empty/dashes option still appears in the list.</p>
"
739288,45209,2009-04-11T01:00:10Z,1,QFileDialog passing directory to python script,"<p>Im writing a little python program that goes through an XML file and does some replacement of tags. It takes three arguments, a path from whcih it creates a directory tree, the XML file its reading and the xml file its outputting to. It works fine from the command line just passing in arguments. As its not just for me, i thought id put a Qt front on it. Below is the majority of the Qt front. MOVtoMXF is the class that does all the replacement. So you can see that im basically just grabbing strings and feeding them into the class that ive already made and tested.</p>

<pre><code>class Form(QDialog):

    def ConnectButtons(self):
        self.connect(self.pathBrowseB, SIGNAL(""clicked()""), self.pathFileBrowse)
        self.connect(self.xmlFileBrowseB, SIGNAL(""clicked()""), self.xmlFileBrowse)
        self.connect(self.outputFileBrowseB, SIGNAL(""clicked()""), self.outputFileBrowse)

    def accept(self):
        path = self.pathBox.displayText()
        xmlFile = self.xmlFileBox.displayText()
        outFileName = self.outfileNameBox.displayText()
        print path + ""  "" + xmlFile + "" "" + outFileName
        mov1 = MOVtoMXF.MOVtoMXF(path, xmlFile, outFileName)
        mov1.ScanFile()
        self.done()

    def pathFileBrowse(self):
        file = str(QFileDialog.getExistingDirectory(self, ""Select Directory""))
        self.pathBox.setText(file)

    def xmlFileBrowse(self):
        file = str(QFileDialog.getOpenFileName(self, ""Save File""))
        self.xmlFileBox.setText(file)

    def outputFileBrowse(self):
        file = str(QFileDialog.getSaveFileName(self, ""Save File""))
        self.outfileNameBox.setText(file)
</code></pre>

<p>the probelm is that when i feed in a Path, it now comes back with an error, either the directory doesnt exist, or if I have a trailing slash on the end that </p>

<p>File ""/System/Library/Frameworks/Python.framework/Versions/2.5/lib/python2.5/posixpath.py"", line 62, in join
    elif path == '' or path.endswith('/'):</p>

<p>I think its probably some mismatch between the QFileDialog, the QString its passing back and the string the my python expects. but im not sure how to go about fixing it.</p>

<p>Im running on Max OS X 10.5.6
pyQt 4.4.4
QT 4.4.0</p>

<p>thanks for any help you can give.</p>

<p>Mark</p>
"
739289,84952,2009-04-11T01:00:40Z,4,Why is my send_mail() command not working in Django?,"<p>I put the following in my settings.py file.  The email address there is a test one.  I found the email settings from <a href=""https://help.webfaction.com/index.php?%5Fm=knowledgebase&amp;%5Fa=viewarticle&amp;kbarticleid=128&amp;nav=0,3"" rel=""nofollow"">Webfaction</a>'s site: </p>

<pre><code>EMAIL_HOST = 'smtp.webfaction.com'
EMAIL_HOST_USER = 'hekevintran_test'
EMAIL_HOST_PASSWORD = 'testpass'
EMAIL_PORT = 465
EMAIL_USE_TLS = True
</code></pre>

<p>This is what my file looks like:</p>

<pre><code>from django.core.mail import send_mail

send_mail(subject='subject',
		  message='message',
		  from_email='hekevintran_test@webfaction.com',
		  recipient_list=['recipient@yahoo.com'],
		  fail_silently=False)
</code></pre>

<p>When I run the above it stalls a long time and then gives me this error:</p>

<pre><code>SMTPServerDisconnected: Connection unexpectedly closed
</code></pre>

<p>What am I doing wrong?</p>
"
739311,13876,2009-04-11T01:14:52Z,1,Organizing a large Python project that must share an internal state?,"<p>I'm currently in the middle of porting a fairly large Perl The problem is that it uses little Perl tricks to make its code available for <code>use</code>ing. I've done about the same with Python, making the codebase one big module for <code>import</code>ing. I've had a firm grasp of Python for a long time, but I have no experience with large projects written in Python that need to access other parts of itself while maintaining an internal state.</p>

<p>I haven't yet tried simply importing the entire thing in one line (<code>import core</code>), but I know I'm currently not doing things in the best of ways. Here's an example from the master script that sets everything in motion:</p>

<pre><code>self.Benchmark = Benchmark(self)

self.Exceptions = Exceptions

self.Settings = Settings(self)
self.Cache = Cache(self)

self.Deal = Deal(self)
self.Utils = Utils(self)
self.FileParsers = FileParsers(self)
self.Network = Network(self)
self.Plugins = Plugins(self)
self.Misc = Misc(self)
</code></pre>

<p>It <em>works</em>, but I'm not happy with it. Right now, the master class script imports each piece of the <code>core</code> module and creates an instance of the contained classes, passing itself as an argument to <code>__init__</code> in those classes. Like so:</p>

<pre><code>class FileParsers:
    def __init__(self, parent):
        self.parent = parent
</code></pre>

<p>Now the code in that class can access the entire rest of the codebase through the parent class.</p>

<pre><code>self.parent.Settings.loadSysConfig()
</code></pre>

<p>So my question is this: considering the above, what would be the best way to reorganize the project and refactor the code so that it retains its current ability to access everything else? The code is very noncritical, so I'm not <em>that</em> worried about internal data integrity, I just don't like having to go through the parent class in such an ugly way. And those long chains slow the code down as well.</p>

<p>EDIT: Whoops, forgot these: links to the SVN repos for both project. Mine is <a href=""http://erok.svn.sf.net/viewvc/erok/trunk/"" rel=""nofollow"">here</a>, and the project I'm porting is <a href=""http://openkore.svn.sf.net/viewvc/openkore/openkore/trunk/"" rel=""nofollow"">here</a>.</p>
"
739314,54872,2009-04-11T01:16:14Z,19,Easiest way to generate localization files,"<p>I'm currently writing an app in Python and need to provide localization for it. </p>

<p>I can use gettext and the utilities that come with it to generate .po and .mo files. But editing the .po files for each language, one-by-one, seems a bit tedious. Then, creating directories for each language and generating the .mo files, one-by-one, seems like overkill. The end result being something like: </p>

<pre><code>/en_US/LC_MESSAGES/en_US.mo
/en_CA/LC_MESSAGES/en_CA.mo
etc.
</code></pre>

<p>I could be wrong, but it seems like there's got to be a better way to do this. Does anyone have any tools, tricks or general knowledge that I haven't found yet?</p>

<p>Thanks in advance!</p>

<p>EDIT: To be a little more clear, I'm looking for something that speeds up the process. since it's already pretty easy. For example, in .NET, I can generate all of the strings that need to be translated into an excel file. Then, translators can fill out the excel file and add columns for each language. Then, I can use xls2resx to generate the language resource files. Is there anything like that for gettext? I realize I could write a script to create and read from a csv and generate the files -- I was just hoping there is something already made.</p>
"
739325,34537,2009-04-11T01:26:22Z,1,Parsing specific elements out of a very large HTML file,"<p>I have a very large HTML file (several megabytes). I know the data I want is under something like <code>&lt;div class=someName&gt;here&lt;/div&gt;</code></p>

<p>What is a good library to parse through the HTML page so I can loop through elements and grab each <code>someName</code>? I want to do this in either C#, Python or C++.</p>
"
739490,32372,2009-04-11T04:00:13Z,7,Google App Engine: Intro to their Data Store API for people with SQL Background?,"<p>Does anyone have any good information aside from the Google App Engine docs provided by Google that gives a good overview for people with MS SQL background to porting their knowledge and using Google App Engine Data Store API effectively.</p>

<p>For Example, if you have a self created Users Table and a Message Table</p>

<p>Where there is a relationship between Users and Message (connected by the UserID), how would this structure be represented in Google App Engine?</p>

<pre><code>SELECT * FROM Users INNER JOIN Message ON Users.ID = Message.UserID
</code></pre>
"
739625,1897,2009-04-11T06:31:19Z,15,"setattr with kwargs, pythonic or not?","<p>I'm using <code>__init__()</code> like this in some SQLAlchemy ORM classes that have many parameters (upto 20).</p>

<pre><code>def __init__(self, **kwargs):
    for k, v in kwargs.iteritems():
        setattr(self, k, v)
</code></pre>

<p>Is it ""pythonic"" to set attributes like this?</p>
"
739651,31056,2009-04-11T06:58:44Z,1,Apply multiple negative regex to expression in Python,"<p>This question is similar to <a href=""http://stackoverflow.com/questions/597476/how-to-concisely-cascade-through-multiple-regex-statements-in-python"">""How to concisely cascade through multiple regex statements in Python""</a> except instead of matching one regular expression and doing something I need to make sure I do not match a bunch of regular expressions, and if no matches are found (aka I have valid data) then do something. I have found one way to do it but am thinking there must be a better way, especially if I end up with many regular expressions.</p>

<p>Basically I am filtering URL's for bad stuff ("""", \\"", etc.) that occurs when I yank what looks like a valid URL out of an HTML document but it turns out to be part of a JavaScript (and thus needs to be evaluated, and thus the escaping characters). I can't use Beautiful soup to process these pages since they are far to mangled (actually I use BeautifulSoup, then fall back to my ugly but workable parser). </p>

<p>So far I have found the following works relatively well: I compile a dict or regular expressions outside the main loop (so I only have to compile it once, but benefit from the speed increase every time I use it), I then loop a URL through this dict, if there is a match then the URL is bad, if not the url is good:</p>

<pre><code>regex_bad_url = {""1"" :   re.compile('\""\""'),
                 ""2"" :   re.compile('\\\""')}
</code></pre>

<p>Followed by:</p>

<pre><code>url_state = ""good""

for key, pattern in regex_bad_url_components.items():
    match = re.search(pattern, url)
    if (match):
        url_state = ""bad""

if (url_state == ""good""):
# do stuff here ...
</code></pre>

<p>Now the obvious thought is to use regex ""or"" (""|""), i.e.:</p>

<pre><code>re.compile('(\""\""|\\\"")')
</code></pre>

<p>Which reduces the number of compares and whatnot, but makes it much harder to trouble shoot (with one expression per compare I can easily add a print statement like:</p>

<pre><code>print ""URL: "", url, "" matched by key "", key
</code></pre>

<p>So is there someway to get the best of both worlds (i.e. minimal number of compares) yet still be able to print out which regex is matching the URL, or do I simply need to bite the bullet and have my slower but easier to troubleshoot code when debugging and then squoosh all the regex's together into one line for production? (which means one more step of programming and code maintenance and possible problems).</p>

<p>Update:</p>

<p>Good answer by Dave Webb, so the actual code for this would look like:</p>

<pre><code>match = re.search(r'(?P&lt;double_quotes&gt;\""\"")|(?P&lt;slash_quote&gt;\\\"")', fullurl)
if (match == None):
    # do stuff here ...
else:
    #optional for debugging
    print ""url matched by"", match.lastgroup
</code></pre>
"
739654,1897,2009-04-11T07:05:31Z,1920,How to make a chain of function decorators in Python?,"<p>How can I make two decorators in Python that would do the following?</p>

<pre><code>@makebold
@makeitalic
def say():
   return ""Hello""
</code></pre>

<p>...which should return:</p>

<pre><code>""&lt;b&gt;&lt;i&gt;Hello&lt;/i&gt;&lt;/b&gt;""
</code></pre>

<p>I'm not trying to make <code>HTML</code> this way in a real application - just trying to understand how decorators and decorator chaining works.</p>
"
739687,76701,2009-04-11T07:37:24Z,5,Python: Locks from `threading` and `multiprocessing` interchangable?,"<p>Are the locks from the <code>threading</code> module interchangeable with those from the <code>multiprocessing</code> module?</p>
"
739882,51627,2009-04-11T11:13:09Z,12,Iterating over object instances of a given class in Python,"<p>Given a class that keeps a registry of its Objects:</p>

<pre><code>class Person(object):
   __registry = []

   def __init__(self, name):
       self.__registry.append(self)
       self.name = name
</code></pre>

<p>How would I make the following code work (without using Person.__registry):</p>

<pre><code>for personobject in Person:
    print personobject
</code></pre>

<p>While researching I found a hint that one could go for a <code>__metaclass__</code> with a <code>__getitem__</code>-method. Any ideas how this would look like?</p>
"
739993,54964,2009-04-11T12:34:18Z,533,How can I get a list of locally installed Python modules?,"<p>I would like to get a list of Python modules, which are in my Python installation (UNIX server).</p>

<p><strong>How can you get a list of Python modules installed in your computer?</strong></p>
"
740287,37056,2009-04-11T15:13:07Z,104,How to check if one of the following items is in a list?,"<p>I'm trying to find a short way to see if any of the following items is in a list, but my first attempt does not work. Besides writing a function to accomplish this, is the any short way to check if one of multiple items is in a list.</p>

<pre><code>&gt;&gt;&gt; a = [2,3,4]
&gt;&gt;&gt; print (1 or 2) in a
False
&gt;&gt;&gt; print (2 or 1) in a
True
</code></pre>
"
740630,61663,2009-04-11T19:07:17Z,8,SQLAlchemy many-to-many orphan deletion,"<p>I'm trying to use SQLAlchemy to implement a basic users-groups model where users can have multiple groups and groups can have multiple users.</p>

<p>When a group becomes empty, I want the group to be deleted, (along with other things associated with the group.  Fortunately, SQLAlchemy's cascade works fine with these more simple situations).</p>

<p>The problem is that cascade='all, delete-orphan' doesn't do exactly what I want; instead of deleting the group when the group becomes empty, it deletes the group when <em>any</em> member leaves the group.</p>

<p>Adding triggers to the database works fine for deleting a group when it becomes empty, except that triggers seem to bypass SQLAlchemy's cascade processing so things associated with the group don't get deleted.</p>

<p>What is the best way to delete a group when all of its members leave and have this deletion cascade to related entities.</p>

<p>I understand that I could do this manually by finding every place in my code where a user can leave a group and then doing the same thing as the trigger however, I'm afraid that I would miss places in the code (and I'm lazy).</p>
"
740717,NA,2009-04-11T20:15:47Z,2,Dynamic processes in Python,"<p>I have a question concerning Python multiprocessing. I am trying to take a dataset, break into chunks, and pass those chunks to concurrently running processes. I need to transform large tables of data using simple calculations (eg. electrical resistance -> temperature for a thermistor).</p>

<p>The code listed below almost works as desired, but it doesn't seem to be spawning any new processes (or if so only one at a time). I am new to Python, so there is probably quite a simple solution to this problem.</p>

<p>Thanks in advance!</p>

<pre>from multiprocessing import Process

class Worker(Process):
    # example data transform
    def process(self, x): return (x * 2) / 3

    def __init__(self, list):
        self.data = list
        self.result = map(self.process, self.data)
        super(Worker, self).__init__()

if __name__ == '__main__':
    start = datetime.datetime.now()
    dataset = range(10000) # null dataset
    processes = 3

    for i in range(processes):
        chunk = int(math.floor(len(dataset) / float(processes)))

        if i + 1 == processes:
            remainder = len(dataset) % processes
        else: remainder = 0

        tmp = dataset[i * chunk : (i + 1) * chunk + remainder]
        exec('worker'+str(i)+' = Worker(tmp)')
        exec('worker'+str(i)+'.start()')

    for i in range(processes):
        exec('worker'+str(i)+'.join()')
        # just a placeholder to make sure the initial values of the set are as expected
        exec('print worker'+str(i)+'.result[0]')</pre>
"
740820,81636,2009-04-11T21:41:08Z,21,python write string directly to tarfile,"<p>Is there a way to write a string directly to a tarfile? From <a href=""http://docs.python.org/library/tarfile.html"">http://docs.python.org/library/tarfile.html</a> it looks like only files already written to the file system can be added.</p>
"
740844,76701,2009-04-11T21:53:55Z,4,Python multiprocessing: Pool of custom Processes,"<p>I am subclassing the Process class, into a class I call EdgeRenderer. I want to use <code>multiprocessing.Pool</code>, except instead of regular Processes, I want them to be instances of my EdgeRenderer. Possible? How?</p>
"
740929,40023,2009-04-11T22:48:33Z,3,Can InstantDjango be Used Rather than the Normal Installation,"<p>Is it possible to do development just using Instant Django?  Do I need to have the normal version working or can I just use this instant version?  Has anyone used it?</p>
"
